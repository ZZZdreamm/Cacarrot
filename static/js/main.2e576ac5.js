/*! For license information please see main.2e576ac5.js.LICENSE.txt */
!function(){var e={457:function(e){"use strict";var t=Array.isArray,n=Object.keys,r=Object.prototype.hasOwnProperty,i="undefined"!==typeof Element;function a(e,o){if(e===o)return!0;if(e&&o&&"object"==typeof e&&"object"==typeof o){var u,s,c,l=t(e),f=t(o);if(l&&f){if((s=e.length)!=o.length)return!1;for(u=s;0!==u--;)if(!a(e[u],o[u]))return!1;return!0}if(l!=f)return!1;var h=e instanceof Date,d=o instanceof Date;if(h!=d)return!1;if(h&&d)return e.getTime()==o.getTime();var p=e instanceof RegExp,v=o instanceof RegExp;if(p!=v)return!1;if(p&&v)return e.toString()==o.toString();var y=n(e);if((s=y.length)!==n(o).length)return!1;for(u=s;0!==u--;)if(!r.call(o,y[u]))return!1;if(i&&e instanceof Element&&o instanceof Element)return e===o;for(u=s;0!==u--;)if(("_owner"!==(c=y[u])||!e.$$typeof)&&!a(e[c],o[c]))return!1;return!0}return e!==e&&o!==o}e.exports=function(e,t){try{return a(e,t)}catch(n){if(n.message&&n.message.match(/stack|recursion/i)||-2146828260===n.number)return console.warn("Warning: react-fast-compare does not handle circular references.",n.name,n.message),!1;throw n}}},110:function(e,t,n){"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),y=0;y<o.length;++y){var m=o[y];if(!a[m]&&(!r||!r[m])&&(!v||!v[m])&&(!u||!u[m])){var g=h(n,m);try{c(t,m,g)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case s:return e;default:return t}}case i:return t}}}function _(e){return w(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=y,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return _(e)||w(e)===l},t.isConcurrentMode=_,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===y},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===b||e.$$typeof===m)},t.typeOf=w},309:function(e,t,n){"use strict";e.exports=n(746)},758:function(e){"use strict";function t(e){this._maxSize=e,this.clear()}t.prototype.clear=function(){this._size=0,this._values=Object.create(null)},t.prototype.get=function(e){return this._values[e]},t.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var n=/[^.^\]^[]+|(?=\[\]|\.\.)/g,r=/^\d+$/,i=/^\d/,a=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,o=/^\s*(['"]?)(.*?)(\1)\s*$/,u=new t(512),s=new t(512),c=new t(512);function l(e){return u.get(e)||u.set(e,f(e).map((function(e){return e.replace(o,"$2")})))}function f(e){return e.match(n)||[""]}function h(e){return"string"===typeof e&&e&&-1!==["'",'"'].indexOf(e.charAt(0))}function d(e){return!h(e)&&(function(e){return e.match(i)&&!e.match(r)}(e)||function(e){return a.test(e)}(e))}e.exports={Cache:t,split:f,normalizePath:l,setter:function(e){var t=l(e);return s.get(e)||s.set(e,(function(e,n){for(var r=0,i=t.length,a=e;r<i-1;){var o=t[r];if("__proto__"===o||"constructor"===o||"prototype"===o)return e;a=a[t[r++]]}a[t[r]]=n}))},getter:function(e,t){var n=l(e);return c.get(e)||c.set(e,(function(e){for(var r=0,i=n.length;r<i;){if(null==e&&t)return;e=e[n[r++]]}return e}))},join:function(e){return e.reduce((function(e,t){return e+(h(t)||r.test(t)?"["+t+"]":(e?".":"")+t)}),"")},forEach:function(e,t,n){!function(e,t,n){var r,i,a,o,u=e.length;for(i=0;i<u;i++)(r=e[i])&&(d(r)&&(r='"'+r+'"'),a=!(o=h(r))&&/^\d+$/.test(r),t.call(n,r,o,a,i,e))}(Array.isArray(e)?e:f(e),t,n)}}},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),T=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function F(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var L,j=Object.assign;function M(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?M(e):""}function B(e){switch(e.tag){case 5:return M(e.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case E:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Q(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){X(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Se=null;function Ee(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Ce(e){xe?Se?Se.push(e):Se=[e]:xe=e}function Te(){if(xe){var e=xe,t=Se;if(Se=xe=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ie(e,t){return e(t)}function Ae(){}var Ne=!1;function De(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ie(e,t,n)}finally{Ne=!1,(null!==xe||null!==Se)&&(Ae(),Te())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Pe=!1;if(l)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(le){Pe=!1}function Fe(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Le=!1,je=null,Me=!1,Ue=null,Ve={onError:function(e){Le=!0,je=e}};function Be(e,t,n,r,i,a,o,u,s){Le=!1,je=null,Fe.apply(Ve,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(qe(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Qe(e):null}function Qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Qe(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Ge=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,xt,St,Et,Ct=!1,Tt=[],It=null,At=null,Nt=null,Dt=new Map,Ot=new Map,Pt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ft(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Lt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function jt(e){var t=gi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void Et(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Mt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){Mt(e)&&n.delete(t)}function Vt(){Ct=!1,null!==It&&Mt(It)&&(It=null),null!==At&&Mt(At)&&(At=null),null!==Nt&&Mt(Nt)&&(Nt=null),Dt.forEach(Ut),Ot.forEach(Ut)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function qt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&Bt(It,e),null!==At&&Bt(At,e),null!==Nt&&Bt(Nt,e),Dt.forEach(t),Ot.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)jt(n),null===n.blockedOn&&Pt.shift()}var zt=b.ReactCurrentBatchConfig,Wt=!0;function Kt(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=1,Ht(e,t,n,r)}finally{kt=i,zt.transition=a}}function Qt(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=4,Ht(e,t,n,r)}finally{kt=i,zt.transition=a}}function Ht(e,t,n,r){if(Wt){var i=$t(e,t,n,r);if(null===i)Wr(e,t,r,Gt,n),Ft(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Lt(It,e,t,n,r,i),!0;case"dragenter":return At=Lt(At,e,t,n,r,i),!0;case"mouseover":return Nt=Lt(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Dt.set(a,Lt(Dt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Ot.set(a,Lt(Ot.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ft(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=$t(e,t,n,r))&&Wr(e,t,r,Gt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Gt=null;function $t(e,t,n,r){if(Gt=null,null!==(e=gi(e=we(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=j({},cn,{view:0,detail:0}),hn=an(fn),dn=j({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(j({},dn,{dataTransfer:0})),yn=an(j({},fn,{relatedTarget:0})),mn=an(j({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=j({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(j({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function En(){return Sn}var Cn=j({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Cn),In=an(j({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(j({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Nn=an(j({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=j({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=an(Dn),Pn=[9,13,27,32],Rn=l&&"CompositionEvent"in window,Fn=null;l&&"documentMode"in document&&(Fn=document.documentMode);var Ln=l&&"TextEvent"in window&&!Fn,jn=l&&(!Rn||Fn&&8<Fn&&11>=Fn),Mn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Kn(e,t,n,r){Ce(r),0<(t=Qr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qn=null,Hn=null;function Gn(e){Mr(e,0)}function $n(e){if(H(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var Xn=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Qn&&(Qn.detachEvent("onpropertychange",nr),Hn=Qn=null)}function nr(e){if("value"===e.propertyName&&$n(Hn)){var t=[];Kn(t,Hn,e,we(e)),De(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Hn)}function ar(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==G(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Qr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Sr={};function Er(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return xr[e]=n[t];return e}l&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Cr=Er("animationend"),Tr=Er("animationiteration"),Ir=Er("animationstart"),Ar=Er("transitionend"),Nr=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Nr.set(e,t),s(t,[e])}for(var Pr=0;Pr<Dr.length;Pr++){var Rr=Dr[Pr];Or(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Or(Cr,"onAnimationEnd"),Or(Tr,"onAnimationIteration"),Or(Ir,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fr));function jr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Be.apply(this,arguments),Le){if(!Le)throw Error(a(198));var l=je;Le=!1,je=null,Me||(Me=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function Mr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;jr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;jr(i,u,c),a=s}}}if(Me)throw e=Ue,Me=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Vr("selectionchange",!1,t))}}function zr(e,t,n,r){switch(Yt(t)){case 1:var i=Kt;break;case 4:i=Qt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}De((function(){var r=a,i=we(n),o=[];e:{var u=Nr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=yn;break;case"focusout":c="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=An;break;case Cr:case Tr:case Ir:s=mn;break;case Ar:s=Nn;break;case"scroll":s=hn;break;case"wheel":s=On;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=In}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Oe(p,h))&&l.push(Kr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=In,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Hr(d))p++;for(d=0,v=h;v;v=Hr(v))d++;for(;0<p-d;)l=Hr(l),p--;for(;0<d-p;)h=Hr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Hr(l),h=Hr(h)}l=null}else l=null;null!==s&&Gr(o,u,s,l,!1),null!==c&&null!==f&&Gr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Yn;else if(Wn(u))if(Xn)y=or;else{y=ir;var m=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ar);switch(y&&(y=y(e,r))?Kn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?bi(r):window,e){case"focusin":(Wn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(Rn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else qn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(jn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==k?"onCompositionEnd"===k&&qn&&(g=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,qn=!0)),0<(m=Qr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Bn(n))&&(k.data=g))),(g=Ln?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Un=!0,Mn);case"textInput":return(e=t.data)===Mn&&Un?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!Rn&&Vn(e,t)?(e=en(),Zt=Jt=Xt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Qr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Mr(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Oe(e,n))&&r.unshift(Kr(e,a,i)),null!=(a=Oe(e,t))&&r.push(Kr(e,a,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Oe(n,a))&&o.unshift(Kr(n,s,u)):i||null!=(s=Oe(n,a))&&o.push(Kr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $r=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,yi="__reactListeners$"+fi,mi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var _i=[],xi=-1;function Si(e){return{current:e}}function Ei(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Ci(e,t){xi++,_i[xi]=e.current,e.current=t}var Ti={},Ii=Si(Ti),Ai=Si(!1),Ni=Ti;function Di(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Ei(Ai),Ei(Ii)}function Ri(e,t,n){if(Ii.current!==Ti)throw Error(a(168));Ci(Ii,t),Ci(Ai,n)}function Fi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,z(e)||"Unknown",i));return j({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ni=Ii.current,Ci(Ii,e),Ci(Ai,Ai.current),!0}function ji(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Fi(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ai),Ei(Ii),Ci(Ii,e)):Ei(Ai),Ci(Ai,n)}var Mi=null,Ui=!1,Vi=!1;function Bi(e){null===Mi?Mi=[e]:Mi.push(e)}function qi(){if(!Vi&&null!==Mi){Vi=!0;var e=0,t=kt;try{var n=Mi;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Mi=null,Ui=!1}catch(i){throw null!==Mi&&(Mi=Mi.slice(e+1)),He(Ze,qi),i}finally{kt=t,Vi=!1}}return null}var zi=[],Wi=0,Ki=null,Qi=0,Hi=[],Gi=0,$i=null,Yi=1,Xi="";function Ji(e,t){zi[Wi++]=Qi,zi[Wi++]=Ki,Ki=e,Qi=t}function Zi(e,t,n){Hi[Gi++]=Yi,Hi[Gi++]=Xi,Hi[Gi++]=$i,$i=e;var r=Yi;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Xi=a+e}else Yi=1<<a|n<<i|r,Xi=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Ki;)Ki=zi[--Wi],zi[Wi]=null,Qi=zi[--Wi],zi[Wi]=null;for(;e===$i;)$i=Hi[--Gi],Hi[Gi]=null,Xi=Hi[--Gi],Hi[Gi]=null,Yi=Hi[--Gi],Hi[Gi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Oc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Yi,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Oc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=Si(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function _a(e){var t=ma.current;Ei(ma),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ca=null;function Ta(e){null===Ca?Ca=[e]:Ca.push(e)}function Ia(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Aa(e,r)}function Aa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Na=!1;function Da(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ra(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&As)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Aa(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Aa(e,n)}function Fa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function La(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ja(e,t,n,r){var i=e.updateQueue;Na=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=j({},f,h);break e;case 2:Na=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);js|=o,e.lanes=o,e.memoizedState=f}}function Ma(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ba={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Pa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ra(e,a,i))&&(rc(t,e,i,r),Fa(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Pa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ra(e,a,i))&&(rc(t,e,i,r),Fa(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Pa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ra(e,i,r))&&(rc(t,e,r,n),Fa(t,e,r))}};function qa(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function za(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Oi(t)?Ni:Ii.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Di(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ba,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ba.enqueueReplaceState(t,t.state,null)}function Ka(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Da(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Oi(t)?Ni:Ii.current,i.context=Di(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ba.enqueueReplaceState(i,i.state,null),ja(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Qa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ha(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ga(e){return(0,e._init)(e._payload)}function $a(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===O&&Ga(a)===t.type)?((r=i(t,n.props)).ref=Qa(e,t,n),r.return=e,r):((r=Fc(n.type,n.key,n.props,null,e.mode,r)).ref=Qa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Fc(t.type,t.key,t.props,null,e.mode,n)).ref=Qa(e,null,t),n.return=e,n;case _:return(t=Uc(t,e.mode,n)).return=e,t;case O:return h(e,(0,t._init)(t._payload),n)}if(te(t)||F(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Ha(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case O:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||F(n))return null!==i?null:f(e,t,n,r,null);Ha(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||F(r))return f(t,e=e.get(n)||null,r,i,null);Ha(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),ia&&Ji(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Ji(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),c}function y(i,u,s,c){var l=F(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),ia&&Ji(i,y),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return ia&&Ji(i,y),l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ji(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&Ga(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Qa(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Lc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Fc(o.type,o.key,o.props,null,r.mode,s)).ref=Qa(r,a,o),s.return=r,r=s)}return u(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,s)).return=r,r=a}return u(r);case O:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(F(o))return y(r,a,o,s);Ha(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Mc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ya=$a(!0),Xa=$a(!1),Ja={},Za=Si(Ja),eo=Si(Ja),to=Si(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ci(to,t),Ci(eo,e),Ci(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Za),Ci(Za,t)}function io(){Ei(Za),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ci(eo,e),Ci(Za,n))}function oo(e){eo.current===e&&(Ei(Za),Ei(eo))}var uo=Si(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,yo=null,mo=null,go=!1,ko=!1,bo=0,wo=0;function _o(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function So(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==yo&&null!==yo.next,po=0,mo=yo=vo=null,go=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==bo;return bo=0,e}function Co(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?vo.memoizedState=mo=e:mo=mo.next=e,mo}function To(){if(null===yo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?vo.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?vo.memoizedState=mo=e:mo=mo.next=e}return mo}function Io(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,js|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,js|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Do(){}function Oo(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Wo(Fo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,Uo(9,Ro.bind(null,n,r,i,t),void 0,null),null===Ns)throw Error(a(349));0!==(30&po)||Po(n,t,i)}return i}function Po(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ro(e,t,n,r){t.value=n,t.getSnapshot=r,Lo(t)&&jo(e)}function Fo(e,t,n){return n((function(){Lo(t)&&jo(e)}))}function Lo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function jo(e){var t=Aa(e,1);null!==t&&rc(t,e,1,-1)}function Mo(e){var t=Co();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function Bo(e,t,n,r){var i=Co();vo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function qo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}vo.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function zo(e,t){return Bo(8390656,8,e,t)}function Wo(e,t){return qo(2048,8,e,t)}function Ko(e,t){return qo(4,2,e,t)}function Qo(e,t){return qo(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Go(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4,4,Ho.bind(null,t,e),n)}function $o(){}function Yo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,js|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ia(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ia(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ea,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},uu={readContext:Ea,useCallback:function(e,t){return Co().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:zo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=Co();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Co();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Co().memoizedState=e},useState:Mo,useDebugValue:$o,useDeferredValue:function(e){return Co().memoizedState=e},useTransition:function(){var e=Mo(!1),t=e[0];return e=Zo.bind(null,e[1]),Co().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Co();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ns)throw Error(a(349));0!==(30&po)||Po(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,zo(Fo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Ro.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Co(),t=Ns.identifierPrefix;if(ia){var n=Xi;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ea,useCallback:Yo,useContext:Ea,useEffect:Wo,useImperativeHandle:Go,useInsertionEffect:Ko,useLayoutEffect:Qo,useMemo:Xo,useReducer:Ao,useRef:Vo,useState:function(){return Ao(Io)},useDebugValue:$o,useDeferredValue:function(e){return Jo(To(),yo.memoizedState,e)},useTransition:function(){return[Ao(Io)[0],To().memoizedState]},useMutableSource:Do,useSyncExternalStore:Oo,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ea,useCallback:Yo,useContext:Ea,useEffect:Wo,useImperativeHandle:Go,useInsertionEffect:Ko,useLayoutEffect:Qo,useMemo:Xo,useReducer:No,useRef:Vo,useState:function(){return No(Io)},useDebugValue:$o,useDeferredValue:function(e){var t=To();return null===yo?t.memoizedState=e:Jo(t,yo.memoizedState,e)},useTransition:function(){return[No(Io)[0],To().memoizedState]},useMutableSource:Do,useSyncExternalStore:Oo,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Pa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ks||(Ks=!0,Qs=r),hu(0,t)},n}function vu(e,t,n){(n=Pa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Hs?Hs=new Set([this]):Hs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function mu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Pa(-1,1)).tag=2,Ra(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?Xa(t,null,n,r):Ya(t,e.child,n,r)}function _u(e,t,n,r,i){n=n.render;var a=t.ref;return Sa(t,i),r=So(e,t,n,r,a,i),n=Eo(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function xu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Pc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Fc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Su(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Ku(e,t,i)}return t.flags|=1,(e=Rc(a,r)).ref=t.ref,e.return=t,t.child=e}function Su(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ku(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Tu(e,t,n,r,i)}function Eu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Rs,Ps),Ps|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Rs,Ps),Ps|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ci(Rs,Ps),Ps|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ci(Rs,Ps),Ps|=r;return wu(e,t,i,n),t.child}function Cu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Oi(n)?Ni:Ii.current;return a=Di(t,a),Sa(t,i),n=So(e,t,n,r,a,i),r=Eo(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function Iu(e,t,n,r,i){if(Oi(n)){var a=!0;Li(t)}else a=!1;if(Sa(t,i),null===t.stateNode)Wu(e,t),za(t,n,r),Ka(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Di(t,c=Oi(n)?Ni:Ii.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Wa(t,o,r,c),Na=!1;var h=t.memoizedState;o.state=h,ja(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ai.current||Na?("function"===typeof l&&(Va(t,n,l,r),s=t.memoizedState),(u=Na||qa(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Oa(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ya(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ea(s):s=Di(t,s=Oi(n)?Ni:Ii.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Wa(t,o,r,s),Na=!1,h=t.memoizedState,o.state=h,ja(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ai.current||Na?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Na||qa(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Au(e,t,n,r,a,i)}function Au(e,t,n,r,i,a){Cu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&ji(t,n,!1),Ku(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ya(t,e.child,null,a),t.child=Ya(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&ji(t,n,!0),t.child}function Nu(e){var t=e.stateNode;t.pendingContext?Ri(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ri(0,t.context,!1),ro(e,t.containerInfo)}function Du(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Ou,Pu,Ru,Fu,Lu={dehydrated:null,treeContext:null,retryLane:0};function ju(e){return{baseLanes:e,cachePool:null,transitions:null}}function Mu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ci(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=jc(s,i,0,null),e=Lc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=ju(n),t.memoizedState=Lu,e):Uu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Vu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=jc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ya(t,e.child,null,u),t.child.memoizedState=ju(u),t.memoizedState=Lu,o);if(0===(1&t.mode))return Vu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Vu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=Ns)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Aa(e,i),rc(r,e,i,-1))}return yc(),Vu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ic.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Hi[Gi++]=Yi,Hi[Gi++]=Xi,Hi[Gi++]=$i,Yi=e.id,Xi=e.overflow,$i=t),t=Uu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Rc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Rc(r,u):(u=Lc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?ju(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Lu,i}return e=(u=e.child).sibling,i=Rc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uu(e,t){return(t=jc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vu(e,t,n,r){return null!==r&&pa(r),Ya(t,e.child,null,n),(e=Uu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function qu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bu(e,n,t);else if(19===e.tag)Bu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qu(t,!0,n,null,a);break;case"together":qu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ku(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),js|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Qu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hu(t),null;case 1:case 17:return Oi(t.type)&&Pi(),Hu(t),null;case 3:return r=t.stateNode,io(),Ei(Ai),Ei(Ii),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Pu(e,t),Hu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ru(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Fr.length;i++)Ur(Fr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Y(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Ur("scroll",r)}switch(n){case"input":Q(r),Z(r,o,!0);break;case"textarea":Q(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Ou(e,t,!1,!1),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Fr.length;i++)Ur(Fr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Y(e,r),i=$(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=j({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":Q(e),Z(e,r,!1);break;case"textarea":Q(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hu(t),null;case 6:if(e&&null!=t.stateNode)Fu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Hu(t),null;case 13:if(Ei(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hu(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Fs&&(Fs=3):yc())),null!==t.updateQueue&&(t.flags|=4),Hu(t),null);case 4:return io(),Pu(e,t),null===e&&qr(t.stateNode.containerInfo),Hu(t),null;case 10:return _a(t.type._context),Hu(t),null;case 19:if(Ei(uo),null===(o=t.memoizedState))return Hu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Qu(o,!1);else{if(0!==Fs||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Qu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>zs&&(t.flags|=128,r=!0,Qu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Qu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Hu(t),null}else 2*Xe()-o.renderingStartTime>zs&&1073741824!==n&&(t.flags|=128,r=!0,Qu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=uo.current,Ci(uo,r?1&n|2:1&n),t):(Hu(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ps)&&(Hu(t),6&t.subtreeFlags&&(t.flags|=8192)):Hu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function $u(e,t){switch(ta(t),t.tag){case 1:return Oi(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Ai),Ei(Ii),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(uo),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ou=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pu=function(){},Ru=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=j({},i,{value:void 0}),r=j({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Fu=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yu=!1,Xu=!1,Ju="function"===typeof WeakSet?WeakSet:Set,Zu=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var fs=null,hs=!1;function ds(e,t,n){for(n=n.child;null!==n;)ps(e,t,n),n=n.sibling}function ps(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Xu||es(n,t);case 6:var r=fs,i=hs;fs=null,ds(e,t,n),hs=i,null!==(fs=r)&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:null!==fs&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),qt(e)):si(fs,n.stateNode));break;case 4:r=fs,i=hs,fs=n.stateNode.containerInfo,hs=!0,ds(e,t,n),fs=r,hs=i;break;case 0:case 11:case 14:case 15:if(!Xu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!Xu&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ec(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?(Xu=(r=Xu)||null!==n.memoizedState,ds(e,t,n),Xu=r):ds(e,t,n);break;default:ds(e,t,n)}}function vs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ju),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ys(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:fs=s.stateNode,hs=!1;break e;case 3:case 4:fs=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===fs)throw Error(a(160));ps(o,u,i),fs=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ec(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ms(t,e),t=t.sibling}function ms(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ys(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(y){Ec(e,e.return,y)}try{rs(5,e,e.return)}catch(y){Ec(e,e.return,y)}}break;case 1:ys(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ys(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(y){Ec(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&X(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?ye(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){Ec(e,e.return,y)}}break;case 6:if(ys(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Ec(e,e.return,y)}}break;case 3:if(ys(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(y){Ec(e,e.return,y)}break;case 4:default:ys(t,e),gs(e);break;case 13:ys(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(qs=Xe())),4&r&&vs(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Xu=(l=Xu)||f,ys(t,e),Xu=l):ys(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zu=e,f=e.child;null!==f;){for(h=Zu=f;null!==Zu;){switch(p=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){Ec(r,n,y)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){_s(h);continue}}null!==p?(p.return=d,Zu=p):_s(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(y){Ec(e,e.return,y)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(y){Ec(e,e.return,y)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ys(t,e),gs(e),4&r&&vs(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){Ec(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ks(e,t,n){Zu=e,bs(e,t,n)}function bs(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Yu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Xu;u=Yu;var c=Xu;if(Yu=o,(Xu=s)&&!c)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?xs(i):null!==s?(s.return=o,Zu=s):xs(i);for(;null!==a;)Zu=a,bs(a,t,n),a=a.sibling;Zu=i,Yu=u,Xu=c}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):ws(e)}}function ws(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xu||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ma(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ma(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(a(163))}Xu||512&t.flags&&as(t)}catch(d){Ec(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function _s(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function xs(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){Ec(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ec(t,i,s)}}var a=t.return;try{as(t)}catch(s){Ec(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Ec(t,o,s)}}}catch(s){Ec(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var Ss,Es=Math.ceil,Cs=b.ReactCurrentDispatcher,Ts=b.ReactCurrentOwner,Is=b.ReactCurrentBatchConfig,As=0,Ns=null,Ds=null,Os=0,Ps=0,Rs=Si(0),Fs=0,Ls=null,js=0,Ms=0,Us=0,Vs=null,Bs=null,qs=0,zs=1/0,Ws=null,Ks=!1,Qs=null,Hs=null,Gs=!1,$s=null,Ys=0,Xs=0,Js=null,Zs=-1,ec=0;function tc(){return 0!==(6&As)?Xe():-1!==Zs?Zs:Zs=Xe()}function nc(e){return 0===(1&e.mode)?1:0!==(2&As)&&0!==Os?Os&-Os:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,n,r){if(50<Xs)throw Xs=0,Js=null,Error(a(185));mt(e,n,r),0!==(2&As)&&e===Ns||(e===Ns&&(0===(2&As)&&(Ms|=n),4===Fs&&sc(e,Os)),ic(e,r),1===n&&0===As&&0===(1&t.mode)&&(zs=Xe()+500,Ui&&qi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ns?Os:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Ui=!0,Bi(e)}(cc.bind(null,e)):Bi(cc.bind(null,e)),oi((function(){0===(6&As)&&qi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zs=-1,ec=0,0!==(6&As))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===Ns?Os:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=As;As|=2;var o=vc();for(Ns===e&&Os===t||(Ws=null,zs=Xe()+500,dc(e,t));;)try{kc();break}catch(s){pc(e,s)}wa(),Cs.current=o,As=i,null!==Ds?t=0:(Ns=null,Os=0,t=Fs)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ls,dc(e,0),sc(e,r),ic(e,Xe()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ls,dc(e,0),sc(e,r),ic(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:_c(e,Bs,Ws);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=qs+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,Bs,Ws),t);break}_c(e,Bs,Ws);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Es(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,Bs,Ws),r);break}_c(e,Bs,Ws);break;default:throw Error(a(329))}}}return ic(e,Xe()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Vs;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Bs,Bs=n,null!==t&&uc(t)),e}function uc(e){null===Bs?Bs=e:Bs.push.apply(Bs,e)}function sc(e,t){for(t&=~Us,t&=~Ms,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&As))throw Error(a(327));xc();var t=ht(e,0);if(0===(1&t))return ic(e,Xe()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ls,dc(e,0),sc(e,t),ic(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,Bs,Ws),ic(e,Xe()),null}function lc(e,t){var n=As;As|=1;try{return e(t)}finally{0===(As=n)&&(zs=Xe()+500,Ui&&qi())}}function fc(e){null!==$s&&0===$s.tag&&0===(6&As)&&xc();var t=As;As|=1;var n=Is.transition,r=kt;try{if(Is.transition=null,kt=1,e)return e()}finally{kt=r,Is.transition=n,0===(6&(As=t))&&qi()}}function hc(){Ps=Rs.current,Ei(Rs)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ds)for(n=Ds.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:io(),Ei(Ai),Ei(Ii),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(uo);break;case 10:_a(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Ns=e,Ds=e=Rc(e.current,null),Os=Ps=t,Fs=0,Ls=null,Us=Ms=js=0,Bs=Vs=null,null!==Ca){for(t=0;t<Ca.length;t++)if(null!==(r=(n=Ca[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ca=null}return e}function pc(e,t){for(;;){var n=Ds;try{if(wa(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,mo=yo=vo=null,ko=!1,bo=0,Ts.current=null,null===n||null===n.return){Fs=1,Ls=t,Ds=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Os,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=mu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&yu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){yu(o,l,t),yc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var m=mu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gu(m,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Fs&&(Fs=2),null===Vs?Vs=[o]:Vs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,La(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Hs||!Hs.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,La(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(b){t=b,Ds===n&&null!==n&&(Ds=n=n.return);continue}break}}function vc(){var e=Cs.current;return Cs.current=ou,null===e?ou:e}function yc(){0!==Fs&&3!==Fs&&2!==Fs||(Fs=4),null===Ns||0===(268435455&js)&&0===(268435455&Ms)||sc(Ns,Os)}function mc(e,t){var n=As;As|=2;var r=vc();for(Ns===e&&Os===t||(Ws=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(wa(),As=n,Cs.current=r,null!==Ds)throw Error(a(261));return Ns=null,Os=0,Fs}function gc(){for(;null!==Ds;)bc(Ds)}function kc(){for(;null!==Ds&&!$e();)bc(Ds)}function bc(e){var t=Ss(e.alternate,e,Ps);e.memoizedProps=e.pendingProps,null===t?wc(e):Ds=t,Ts.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Gu(n,t,Ps)))return void(Ds=n)}else{if(null!==(n=$u(n,t)))return n.flags&=32767,void(Ds=n);if(null===e)return Fs=6,void(Ds=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ds=t);Ds=t=e}while(null!==t);0===Fs&&(Fs=5)}function _c(e,t,n){var r=kt,i=Is.transition;try{Is.transition=null,kt=1,function(e,t,n,r){do{xc()}while(null!==$s);if(0!==(6&As))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ns&&(Ds=Ns=null,Os=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gs||(Gs=!0,Nc(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Is.transition,Is.transition=null;var u=kt;kt=1;var s=As;As|=4,Ts.current=null,function(e,t){if(ei=Wt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Ec(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}v=ns,ns=!1}(e,n),ms(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,ks(n,e,i),Ye(),As=s,kt=u,Is.transition=o}else e.current=n;if(Gs&&(Gs=!1,$s=e,Ys=i),o=e.pendingLanes,0===o&&(Hs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ks)throw Ks=!1,e=Qs,Qs=null,e;0!==(1&Ys)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===Js?Xs++:(Xs=0,Js=e):Xs=0,qi()}(e,t,n,r)}finally{Is.transition=i,kt=r}return null}function xc(){if(null!==$s){var e=bt(Ys),t=Is.transition,n=kt;try{if(Is.transition=null,kt=16>e?16:e,null===$s)var r=!1;else{if(e=$s,$s=null,Ys=0,0!==(6&As))throw Error(a(331));var i=As;for(As|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Zu=l;null!==Zu;){var f=Zu;switch(f.tag){case 0:case 11:case 15:rs(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zu=h;else for(;null!==Zu;){var d=(f=Zu).sibling,p=f.return;if(os(f),f===l){Zu=null;break}if(null!==d){d.return=p,Zu=d;break}Zu=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var k=e.current;for(Zu=k;null!==Zu;){var b=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Zu=b;else e:for(u=k;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(_){Ec(s,s.return,_)}if(s===u){Zu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Zu=w;break e}Zu=s.return}}if(As=i,qi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Is.transition=t}}return!1}function Sc(e,t,n){e=Ra(e,t=pu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(mt(e,1,t),ic(e,t))}function Ec(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hs||!Hs.has(r))){t=Ra(t,e=vu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(mt(t,1,e),ic(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Ns===e&&(Os&n)===n&&(4===Fs||3===Fs&&(130023424&Os)===Os&&500>Xe()-qs?dc(e,0):Us|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Aa(e,t))&&(mt(e,t,n),ic(e,n))}function Ic(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Nc(e,t){return He(e,t)}function Dc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oc(e,t,n,r){return new Dc(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Oc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Fc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Pc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Lc(n.children,i,o,t);case S:u=8,i|=8;break;case E:return(e=Oc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case A:return(e=Oc(13,n,t,i)).elementType=A,e.lanes=o,e;case N:return(e=Oc(19,n,t,i)).elementType=N,e.lanes=o,e;case P:return jc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:u=10;break e;case T:u=9;break e;case I:u=11;break e;case D:u=14;break e;case O:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Oc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Oc(7,e,r,t)).lanes=n,e}function jc(e,t,n,r){return(e=Oc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Mc(e,t,n){return(e=Oc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Oc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,a,o,u,s){return e=new Vc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Oc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Da(a),e}function qc(e){if(!e)return Ti;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Fi(e,n,t)}return t}function zc(e,t,n,r,i,a,o,u,s){return(e=Bc(n,r,!0,e,0,a,0,u,s)).context=qc(null),n=e.current,(a=Pa(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Ra(n,a,i),e.current.lanes=i,mt(e,i,r),ic(e,r),e}function Wc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=qc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Pa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ra(i,t,o))&&(rc(e,i,o,a),Fa(e,i,o)),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Qc(e,t),(e=e.alternate)&&Qc(e,t)}Ss=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Nu(t),da();break;case 5:ao(t);break;case 1:Oi(t.type)&&Li(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Mu(e,t,n):(Ci(uo,1&uo.current),null!==(e=Ku(e,t,n))?e.sibling:null);Ci(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Eu(e,t,n)}return Ku(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Qi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wu(e,t),e=t.pendingProps;var i=Di(t,Ii.current);Sa(t,n),i=So(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(o=!0,Li(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Da(t),i.updater=Ba,t.stateNode=i,i._reactInternals=t,Ka(t,r,e,n),t=Au(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===D)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Iu(null,t,r,e,n);break e;case 11:t=_u(null,t,r,e,n);break e;case 14:t=xu(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Iu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Nu(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Oa(e,t),ja(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Du(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Du(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ku(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Cu(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Mu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ya(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_u(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ci(ma,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ai.current){t=Ku(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Pa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),xa(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Sa(t,n),r=r(i=Ea(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),xu(e,t,r,i=ya(r.type,i),n);case 15:return Su(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),Wu(e,t),t.tag=1,Oi(r)?(e=!0,Li(t)):e=!1,Sa(t,n),za(t,r,i),Ka(t,r,i,n),Au(null,t,r,!0,e,n);case 19:return zu(e,t,n);case 22:return Eu(e,t,n)}throw Error(a(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Kc(o);u.call(e)}}Wc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Kc(o);a.call(e)}}var o=zc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,qr(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Kc(s);u.call(e)}}var s=Bc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,qr(8===e.nodeType?e.parentNode:e),fc((function(){Wc(t,s,n,r)})),s}(n,t,e,i,r);return Kc(o)}Yc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wc(e,t,null,null)},Yc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Wc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&jt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,Xe()),0===(6&As)&&(zs=Xe()+500,qi()))}break;case 13:fc((function(){var t=Aa(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Hc(e,1)}},_t=function(e){if(13===e.tag){var t=Aa(e,134217728);if(null!==t)rc(t,e,134217728,tc());Hc(e,134217728)}},xt=function(e){if(13===e.tag){var t=nc(e),n=Aa(e,t);if(null!==n)rc(n,e,t,tc());Hc(e,t)}},St=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));H(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=lc,Ae=fc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Ce,Te,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(a(299));var n=!1,r="",i=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,qr(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},372:function(e,t){"use strict";var n=60103,r=60106,i=60107,a=60108,o=60114,u=60109,s=60110,c=60112,l=60113,f=60120,h=60115,d=60116,p=60121,v=60122,y=60117,m=60129,g=60131;if("function"===typeof Symbol&&Symbol.for){var k=Symbol.for;n=k("react.element"),r=k("react.portal"),i=k("react.fragment"),a=k("react.strict_mode"),o=k("react.profiler"),u=k("react.provider"),s=k("react.context"),c=k("react.forward_ref"),l=k("react.suspense"),f=k("react.suspense_list"),h=k("react.memo"),d=k("react.lazy"),p=k("react.block"),v=k("react.server.block"),y=k("react.fundamental"),m=k("react.debug_trace_mode"),g=k("react.legacy_hidden")}function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case o:case a:case l:case f:return e;default:switch(e=e&&e.$$typeof){case s:case c:case d:case h:case u:return e;default:return t}}case r:return t}}}t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===o||e===m||e===a||e===l||e===f||e===g||"object"===typeof e&&null!==e&&(e.$$typeof===d||e.$$typeof===h||e.$$typeof===u||e.$$typeof===s||e.$$typeof===c||e.$$typeof===y||e.$$typeof===p||e[0]===v)},t.typeOf=b},441:function(e,t,n){"use strict";e.exports=n(372)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=k.prototype=new g;b.constructor=k,v(b,m.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+I(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(C(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+I(u=e[c],c);s+=A(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=A(u=u.value,t,i,l=a+I(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function N(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},P={transition:null},R={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:P,ReactCurrentOwner:x};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)_.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(y=!1,b(e),!v)if(null!==r(c))v=!0,P(_);else{var t=r(l);null!==t&&R(w,t.startTime-e)}}function _(e,n){v=!1,y&&(y=!1,g(C),C=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!A());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&R(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,S=!1,E=null,C=-1,T=5,I=-1;function A(){return!(t.unstable_now()-I<T)}function N(){if(null!==E){var e=t.unstable_now();I=e;var n=!0;try{n=E(!0,e)}finally{n?x():(S=!1,E=null)}}else S=!1}if("function"===typeof k)x=function(){k(N)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,O=D.port2;D.port1.onmessage=N,x=function(){O.postMessage(null)}}else x=function(){m(N,0)};function P(e){E=e,S||(S=!0,x())}function R(e,n){C=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,P(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(C),C=-1):y=!0,R(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,P(_))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},613:function(e){e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return!1;for(var u=Object.prototype.hasOwnProperty.bind(t),s=0;s<a.length;s++){var c=a[s];if(!u(c))return!1;var l=e[c],f=t[c];if(!1===(i=n?n.call(r,l,f,c):void 0)||void 0===i&&l!==f)return!1}return!0}},564:function(e){var t=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['\u2019](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,n=function(e){return e.match(t)||[]},r=function(e){return e[0].toUpperCase()+e.slice(1)},i=function(e,t){return n(e).join(t).toLowerCase()},a=function(e){return n(e).reduce((function(e,t){return"".concat(e).concat(e?t[0].toUpperCase()+t.slice(1).toLowerCase():t.toLowerCase())}),"")};e.exports={words:n,upperFirst:r,camelCase:a,pascalCase:function(e){return r(a(e))},snakeCase:function(e){return i(e,"_")},kebabCase:function(e){return i(e,"-")},sentenceCase:function(e){return r(i(e," "))},titleCase:function(e){return n(e).map(r).join(" ")}}},514:function(e){function t(e,t){var n=e.length,r=new Array(n),i={},a=n,o=function(e){for(var t=new Map,n=0,r=e.length;n<r;n++){var i=e[n];t.has(i[0])||t.set(i[0],new Set),t.has(i[1])||t.set(i[1],new Set),t.get(i[0]).add(i[1])}return t}(t),u=function(e){for(var t=new Map,n=0,r=e.length;n<r;n++)t.set(e[n],n);return t}(e);for(t.forEach((function(e){if(!u.has(e[0])||!u.has(e[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")}));a--;)i[a]||s(e[a],a,new Set);return r;function s(e,t,a){if(a.has(e)){var c;try{c=", node was:"+JSON.stringify(e)}catch(h){c=""}throw new Error("Cyclic dependency"+c)}if(!u.has(e))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(e));if(!i[t]){i[t]=!0;var l=o.get(e)||new Set;if(t=(l=Array.from(l)).length){a.add(e);do{var f=l[--t];s(f,u.get(f),a)}while(t);a.delete(e)}r[--n]=e}}}e.exports=function(e){return t(function(e){for(var t=new Set,n=0,r=e.length;n<r;n++){var i=e[n];t.add(i[0]),t.add(i[1])}return Array.from(t)}(e),e)},e.exports.array=t}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".f5079acd.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="cacarrot:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/Cacarrot/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkcacarrot=self.webpackChunkcacarrot||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),n.nc=void 0,function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return fr},SDK_VERSION:function(){return Ai},_DEFAULT_ENTRY_NAME:function(){return yi},_addComponent:function(){return bi},_addOrOverwriteComponent:function(){return wi},_apps:function(){return gi},_clearComponents:function(){return Ei},_components:function(){return ki},_getProvider:function(){return xi},_registerComponent:function(){return _i},_removeServiceInstance:function(){return Si},deleteApp:function(){return Pi},getApp:function(){return Di},getApps:function(){return Oi},initializeApp:function(){return Ni},onLog:function(){return Li},registerVersion:function(){return Fi},setLogLevel:function(){return ji}});var t,r=n(791),i=n(250);function a(e){if(Array.isArray(e))return e}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return a(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||u(e,t)||s()}function l(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function f(e){return function(e){if(Array.isArray(e))return o(e)}(e)||l(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e){var t=function(e,t){if("object"!==d(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===d(t)?t:String(t)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function y(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){var t=b();return function(){var n,r=k(e);if(t){var i=k(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===d(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}(this,n)}}function x(e,t,n){return x=b()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&m(i,n.prototype),i},x.apply(null,arguments)}function S(e){var t="function"===typeof Map?new Map:void 0;return S=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return x(e,arguments,k(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),m(n,e)},S(e)}function E(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var T,I="popstate";function A(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function N(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function D(e,t){return{usr:e.state,key:e.key,idx:t}}function O(e,t,n,r){return void 0===n&&(n=null),C({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?R(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function P(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function R(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function F(e,n,r,i){void 0===i&&(i={});var a=i,o=a.window,u=void 0===o?document.defaultView:o,s=a.v5Compat,c=void 0!==s&&s,l=u.history,f=t.Pop,h=null,d=p();function p(){return(l.state||{idx:null}).idx}function v(){f=t.Pop;var e=p(),n=null==e?null:e-d;d=e,h&&h({action:f,location:m.location,delta:n})}function y(e){var t="null"!==u.location.origin?u.location.origin:u.location.href,n="string"===typeof e?e:P(e);return A(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==d&&(d=0,l.replaceState(C({},l.state,{idx:d}),""));var m={get action(){return f},get location(){return e(u,l)},listen:function(e){if(h)throw new Error("A history only accepts one active listener");return u.addEventListener(I,v),h=e,function(){u.removeEventListener(I,v),h=null}},createHref:function(e){return n(u,e)},createURL:y,encodeLocation:function(e){var t=y(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){f=t.Push;var i=O(m.location,e,n);r&&r(i,e);var a=D(i,d=p()+1),o=m.createHref(i);try{l.pushState(a,"",o)}catch(Ca){u.location.assign(o)}c&&h&&h({action:f,location:m.location,delta:1})},replace:function(e,n){f=t.Replace;var i=O(m.location,e,n);r&&r(i,e);var a=D(i,d=p()),o=m.createHref(i);l.replaceState(a,"",o),c&&h&&h({action:f,location:m.location,delta:0})},go:function(e){return l.go(e)}};return m}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(T||(T={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function L(e,t,n){void 0===n&&(n="/");var r=Y(("string"===typeof t?R(t):t).pathname||"/",n);if(null==r)return null;var i=j(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=H(i[o],$(r));return a}function j(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(A(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var u=ee([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(A(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+u+'".'),j(e.children,t,s,u)),(null!=e.path||e.index)&&t.push({path:u,score:Q(u,e.index),routesMeta:s})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=E(M(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(u){a.e(u)}finally{a.f()}}else i(e,t)})),t}function M(e){var t=e.split("/");if(0===t.length)return[];var n,r=a(n=t)||l(n)||u(n)||s(),i=r[0],o=r.slice(1),c=i.endsWith("?"),h=i.replace(/\?$/,"");if(0===o.length)return c?[h,""]:[h];var d=M(o.join("/")),p=[];return p.push.apply(p,f(d.map((function(e){return""===e?h:[h,e].join("/")})))),c&&p.push.apply(p,f(d)),p.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var U=/^:\w+$/,V=3,B=2,q=1,z=10,W=-2,K=function(e){return"*"===e};function Q(e,t){var n=e.split("/"),r=n.length;return n.some(K)&&(r+=W),t&&(r+=B),n.filter((function(e){return!K(e)})).reduce((function(e,t){return e+(U.test(t)?V:""===t?q:z)}),r)}function H(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=G({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:ee([i,l.pathname]),pathnameBase:te(ee([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=ee([i,l.pathnameBase]))}return a}function G(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);N("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=c(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),l=o.slice(1),f=a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(Ca){return N(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+Ca+")."),e}}(l[n]||"",t),e}),{});return{params:f,pathname:u,pathnameBase:s,pattern:e}}function $(e){try{return decodeURI(e)}catch(Ca){return N(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+Ca+")."),e}}function Y(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function X(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function J(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function Z(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=R(e):(A(!(i=C({},e)).pathname||!i.pathname.includes("?"),X("?","pathname","search",i)),A(!i.pathname||!i.pathname.includes("#"),X("#","pathname","hash",i)),A(!i.search||!i.search.includes("#"),X("#","search","hash",i)));var a,o=""===e||""===i.pathname,u=o?"/":i.pathname;if(r||null==u)a=n;else{var s=t.length-1;if(u.startsWith("..")){for(var c=u.split("/");".."===c[0];)c.shift(),s-=1;i.pathname=c.join("/")}a=s>=0?t[s]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?R(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:ne(a),hash:re(u)}}(i,a),f=u&&"/"!==u&&u.endsWith("/"),h=(o||"."===u)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var ee=function(e){return e.join("/").replace(/\/\/+/g,"/")},te=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},ne=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},re=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},ie=function(e){g(n,e);var t=_(n);function n(){return h(this,n),t.apply(this,arguments)}return y(n)}(S(Error));function ae(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var oe=["post","put","patch","delete"],ue=(new Set(oe),["get"].concat(oe));new Set(ue),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;Symbol("deferred");function se(){return se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},se.apply(this,arguments)}var ce=r.createContext(null);var le=r.createContext(null);var fe=r.createContext(null);var he=r.createContext(null);var de=r.createContext(null);var pe=r.createContext({outlet:null,matches:[],isDataRoute:!1});var ve=r.createContext(null);function ye(){return null!=r.useContext(de)}function me(){return ye()||A(!1),r.useContext(de).location}function ge(e){r.useContext(he).static||r.useLayoutEffect(e)}function ke(){return r.useContext(pe).isDataRoute?function(){var e=Ie(_e.UseNavigateStable).router,t=Ne(xe.UseNavigateStable),n=r.useRef(!1);ge((function(){n.current=!0}));var i=r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,se({fromRouteId:t},i)))}),[e,t]);return i}():function(){ye()||A(!1);var e=r.useContext(ce),t=r.useContext(he),n=t.basename,i=t.navigator,a=r.useContext(pe).matches,o=me().pathname,u=JSON.stringify(J(a).map((function(e){return e.pathnameBase}))),s=r.useRef(!1);ge((function(){s.current=!0}));var c=r.useCallback((function(t,r){if(void 0===r&&(r={}),s.current)if("number"!==typeof t){var a=Z(t,JSON.parse(u),o,"path"===r.relative);null==e&&"/"!==n&&(a.pathname="/"===a.pathname?n:ee([n,a.pathname])),(r.replace?i.replace:i.push)(a,r.state,r)}else i.go(t)}),[n,i,u,o,e]);return c}()}function be(e,n,i){ye()||A(!1);var a,o=r.useContext(he).navigator,u=r.useContext(pe).matches,s=u[u.length-1],c=s?s.params:{},l=(s&&s.pathname,s?s.pathnameBase:"/"),f=(s&&s.route,me());if(n){var h,d="string"===typeof n?R(n):n;"/"===l||(null==(h=d.pathname)?void 0:h.startsWith(l))||A(!1),a=d}else a=f;var p=a.pathname||"/",v=L(e,{pathname:"/"===l?p:p.slice(l.length)||"/"});var y=Te(v&&v.map((function(e){return Object.assign({},e,{params:Object.assign({},c,e.params),pathname:ee([l,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:ee([l,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),u,i);return n&&y?r.createElement(de.Provider,{value:{location:se({pathname:"/",search:"",hash:"",state:null,key:"default"},a),navigationType:t.Pop}},y):y}function we(){var e=function(){var e,t=r.useContext(ve),n=Ae(xe.UseRouteError),i=Ne(xe.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=ae(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:a},n):null,null)}var _e,xe,Se=r.createElement(we,null),Ee=function(e){g(n,e);var t=_(n);function n(e){var r;return h(this,n),(r=t.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},r}return y(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?r.createElement(pe.Provider,{value:this.props.routeContext},r.createElement(ve.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),n}(r.Component);function Ce(e){var t=e.routeContext,n=e.match,i=e.children,a=r.useContext(ce);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(pe.Provider,{value:t},i)}function Te(e,t,n){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),null==e){var a;if(null==(a=n)||!a.errors)return null;e=n.matches}var o=e,u=null==(i=n)?void 0:i.errors;if(null!=u){var s=o.findIndex((function(e){return e.route.id&&(null==u?void 0:u[e.route.id])}));s>=0||A(!1),o=o.slice(0,Math.min(o.length,s+1))}return o.reduceRight((function(e,i,a){var s=i.route.id?null==u?void 0:u[i.route.id]:null,c=null;n&&(c=i.route.errorElement||Se);var l=t.concat(o.slice(0,a+1)),f=function(){var t;return t=s?c:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(Ce,{match:i,routeContext:{outlet:e,matches:l,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?r.createElement(Ee,{location:n.location,revalidation:n.revalidation,component:c,error:s,children:f(),routeContext:{outlet:null,matches:l,isDataRoute:!0}}):f()}),null)}function Ie(e){var t=r.useContext(ce);return t||A(!1),t}function Ae(e){var t=r.useContext(le);return t||A(!1),t}function Ne(e){var t=function(e){var t=r.useContext(pe);return t||A(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||A(!1),n.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"}(_e||(_e={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"}(xe||(xe={}));var De;function Oe(e){A(!1)}function Pe(e){var n=e.basename,i=void 0===n?"/":n,a=e.children,o=void 0===a?null:a,u=e.location,s=e.navigationType,c=void 0===s?t.Pop:s,l=e.navigator,f=e.static,h=void 0!==f&&f;ye()&&A(!1);var d=i.replace(/^\/*/,"/"),p=r.useMemo((function(){return{basename:d,navigator:l,static:h}}),[d,l,h]);"string"===typeof u&&(u=R(u));var v=u,y=v.pathname,m=void 0===y?"/":y,g=v.search,k=void 0===g?"":g,b=v.hash,w=void 0===b?"":b,_=v.state,x=void 0===_?null:_,S=v.key,E=void 0===S?"default":S,C=r.useMemo((function(){var e=Y(m,d);return null==e?null:{location:{pathname:e,search:k,hash:w,state:x,key:E},navigationType:c}}),[d,m,k,w,x,E,c]);return null==C?null:r.createElement(he.Provider,{value:p},r.createElement(de.Provider,{children:o,value:C}))}function Re(e){var t=e.children,n=e.location;return function(e,t){return be(e,t)}(Le(t),n)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(De||(De={}));var Fe=new Promise((function(){}));r.Component;function Le(e,t){void 0===t&&(t=[]);var n=[];return r.Children.forEach(e,(function(e,i){if(r.isValidElement(e)){var a=[].concat(f(t),[i]);if(e.type!==r.Fragment){e.type!==Oe&&A(!1),e.props.index&&e.props.children&&A(!1);var o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Le(e.props.children,a)),n.push(o)}else n.push.apply(n,Le(e.props.children,a))}})),n}var je=n(441),Me=n(613),Ue=n.n(Me);var Ve=function(e){function t(e,r,s,c,h){for(var d,p,v,y,b,_=0,x=0,S=0,E=0,C=0,O=0,R=v=d=0,L=0,j=0,M=0,U=0,V=s.length,B=V-1,q="",z="",W="",K="";L<V;){if(p=s.charCodeAt(L),L===B&&0!==x+E+S+_&&(0!==x&&(p=47===x?10:47),E=S=_=0,V++,B++),0===x+E+S+_){if(L===B&&(0<j&&(q=q.replace(f,"")),0<q.trim().length)){switch(p){case 32:case 9:case 59:case 13:case 10:break;default:q+=s.charAt(L)}p=59}switch(p){case 123:for(d=(q=q.trim()).charCodeAt(0),v=1,U=++L;L<V;){switch(p=s.charCodeAt(L)){case 123:v++;break;case 125:v--;break;case 47:switch(p=s.charCodeAt(L+1)){case 42:case 47:e:{for(R=L+1;R<B;++R)switch(s.charCodeAt(R)){case 47:if(42===p&&42===s.charCodeAt(R-1)&&L+2!==R){L=R+1;break e}break;case 10:if(47===p){L=R+1;break e}}L=R}}break;case 91:p++;case 40:p++;case 34:case 39:for(;L++<B&&s.charCodeAt(L)!==p;);}if(0===v)break;L++}if(v=s.substring(U,L),0===d&&(d=(q=q.replace(l,"").trim()).charCodeAt(0)),64===d){switch(0<j&&(q=q.replace(f,"")),p=q.charCodeAt(1)){case 100:case 109:case 115:case 45:j=r;break;default:j=D}if(U=(v=t(r,j,v,p,h+1)).length,0<P&&(b=u(3,v,j=n(D,q,M),r,I,T,U,p,h,c),q=j.join(""),void 0!==b&&0===(U=(v=b.trim()).length)&&(p=0,v="")),0<U)switch(p){case 115:q=q.replace(w,o);case 100:case 109:case 45:v=q+"{"+v+"}";break;case 107:v=(q=q.replace(m,"$1 $2"))+"{"+v+"}",v=1===N||2===N&&a("@"+v,3)?"@-webkit-"+v+"@"+v:"@"+v;break;default:v=q+v,112===c&&(z+=v,v="")}else v=""}else v=t(r,n(r,q,M),v,c,h+1);W+=v,v=M=j=R=d=0,q="",p=s.charCodeAt(++L);break;case 125:case 59:if(1<(U=(q=(0<j?q.replace(f,""):q).trim()).length))switch(0===R&&(d=q.charCodeAt(0),45===d||96<d&&123>d)&&(U=(q=q.replace(" ",":")).length),0<P&&void 0!==(b=u(1,q,r,e,I,T,z.length,c,h,c))&&0===(U=(q=b.trim()).length)&&(q="\0\0"),d=q.charCodeAt(0),p=q.charCodeAt(1),d){case 0:break;case 64:if(105===p||99===p){K+=q+s.charAt(L);break}default:58!==q.charCodeAt(U-1)&&(z+=i(q,d,p,q.charCodeAt(2)))}M=j=R=d=0,q="",p=s.charCodeAt(++L)}}switch(p){case 13:case 10:47===x?x=0:0===1+d&&107!==c&&0<q.length&&(j=1,q+="\0"),0<P*F&&u(0,q,r,e,I,T,z.length,c,h,c),T=1,I++;break;case 59:case 125:if(0===x+E+S+_){T++;break}default:switch(T++,y=s.charAt(L),p){case 9:case 32:if(0===E+_+x)switch(C){case 44:case 58:case 9:case 32:y="";break;default:32!==p&&(y=" ")}break;case 0:y="\\0";break;case 12:y="\\f";break;case 11:y="\\v";break;case 38:0===E+x+_&&(j=M=1,y="\f"+y);break;case 108:if(0===E+x+_+A&&0<R)switch(L-R){case 2:112===C&&58===s.charCodeAt(L-3)&&(A=C);case 8:111===O&&(A=O)}break;case 58:0===E+x+_&&(R=L);break;case 44:0===x+S+E+_&&(j=1,y+="\r");break;case 34:case 39:0===x&&(E=E===p?0:0===E?p:E);break;case 91:0===E+x+S&&_++;break;case 93:0===E+x+S&&_--;break;case 41:0===E+x+_&&S--;break;case 40:if(0===E+x+_){if(0===d)if(2*C+3*O===533);else d=1;S++}break;case 64:0===x+S+E+_+R+v&&(v=1);break;case 42:case 47:if(!(0<E+_+S))switch(x){case 0:switch(2*p+3*s.charCodeAt(L+1)){case 235:x=47;break;case 220:U=L,x=42}break;case 42:47===p&&42===C&&U+2!==L&&(33===s.charCodeAt(U+2)&&(z+=s.substring(U,L+1)),y="",x=0)}}0===x&&(q+=y)}O=C,C=p,L++}if(0<(U=z.length)){if(j=r,0<P&&(void 0!==(b=u(2,z,j,e,I,T,U,c,h,c))&&0===(z=b).length))return K+z+W;if(z=j.join(",")+"{"+z+"}",0!==N*A){switch(2!==N||a(z,2)||(A=0),A){case 111:z=z.replace(k,":-moz-$1")+z;break;case 112:z=z.replace(g,"::-webkit-input-$1")+z.replace(g,"::-moz-$1")+z.replace(g,":-ms-input-$1")+z}A=0}}return K+z+W}function n(e,t,n){var i=t.trim().split(v);t=i;var a=i.length,o=e.length;switch(o){case 0:case 1:var u=0;for(e=0===o?"":e[0]+" ";u<a;++u)t[u]=r(e,t[u],n).trim();break;default:var s=u=0;for(t=[];u<a;++u)for(var c=0;c<o;++c)t[s++]=r(e[c]+" ",i[u],n).trim()}return t}function r(e,t,n){var r=t.charCodeAt(0);switch(33>r&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(y,"$1"+e.trim());case 58:return e.trim()+t.replace(y,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(y,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function i(e,t,n,r){var o=e+";",u=2*t+3*n+4*r;if(944===u){e=o.indexOf(":",9)+1;var s=o.substring(e,o.length-1).trim();return s=o.substring(0,e).trim()+s+";",1===N||2===N&&a(s,1)?"-webkit-"+s+s:s}if(0===N||2===N&&!a(o,1))return o;switch(u){case 1015:return 97===o.charCodeAt(10)?"-webkit-"+o+o:o;case 951:return 116===o.charCodeAt(3)?"-webkit-"+o+o:o;case 963:return 110===o.charCodeAt(5)?"-webkit-"+o+o:o;case 1009:if(100!==o.charCodeAt(4))break;case 969:case 942:return"-webkit-"+o+o;case 978:return"-webkit-"+o+"-moz-"+o+o;case 1019:case 983:return"-webkit-"+o+"-moz-"+o+"-ms-"+o+o;case 883:if(45===o.charCodeAt(8))return"-webkit-"+o+o;if(0<o.indexOf("image-set(",11))return o.replace(C,"$1-webkit-$2")+o;break;case 932:if(45===o.charCodeAt(4))switch(o.charCodeAt(5)){case 103:return"-webkit-box-"+o.replace("-grow","")+"-webkit-"+o+"-ms-"+o.replace("grow","positive")+o;case 115:return"-webkit-"+o+"-ms-"+o.replace("shrink","negative")+o;case 98:return"-webkit-"+o+"-ms-"+o.replace("basis","preferred-size")+o}return"-webkit-"+o+"-ms-"+o+o;case 964:return"-webkit-"+o+"-ms-flex-"+o+o;case 1023:if(99!==o.charCodeAt(8))break;return"-webkit-box-pack"+(s=o.substring(o.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+o+"-ms-flex-pack"+s+o;case 1005:return d.test(o)?o.replace(h,":-webkit-")+o.replace(h,":-moz-")+o:o;case 1e3:switch(t=(s=o.substring(13).trim()).indexOf("-")+1,s.charCodeAt(0)+s.charCodeAt(t)){case 226:s=o.replace(b,"tb");break;case 232:s=o.replace(b,"tb-rl");break;case 220:s=o.replace(b,"lr");break;default:return o}return"-webkit-"+o+"-ms-"+s+o;case 1017:if(-1===o.indexOf("sticky",9))break;case 975:switch(t=(o=e).length-10,u=(s=(33===o.charCodeAt(t)?o.substring(0,t):o).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|s.charCodeAt(7))){case 203:if(111>s.charCodeAt(8))break;case 115:o=o.replace(s,"-webkit-"+s)+";"+o;break;case 207:case 102:o=o.replace(s,"-webkit-"+(102<u?"inline-":"")+"box")+";"+o.replace(s,"-webkit-"+s)+";"+o.replace(s,"-ms-"+s+"box")+";"+o}return o+";";case 938:if(45===o.charCodeAt(5))switch(o.charCodeAt(6)){case 105:return s=o.replace("-items",""),"-webkit-"+o+"-webkit-box-"+s+"-ms-flex-"+s+o;case 115:return"-webkit-"+o+"-ms-flex-item-"+o.replace(x,"")+o;default:return"-webkit-"+o+"-ms-flex-line-pack"+o.replace("align-content","").replace(x,"")+o}break;case 973:case 989:if(45!==o.charCodeAt(3)||122===o.charCodeAt(4))break;case 931:case 953:if(!0===E.test(e))return 115===(s=e.substring(e.indexOf(":")+1)).charCodeAt(0)?i(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):o.replace(s,"-webkit-"+s)+o.replace(s,"-moz-"+s.replace("fill-",""))+o;break;case 962:if(o="-webkit-"+o+(102===o.charCodeAt(5)?"-ms-"+o:"")+o,211===n+r&&105===o.charCodeAt(13)&&0<o.indexOf("transform",10))return o.substring(0,o.indexOf(";",27)+1).replace(p,"$1-webkit-$2")+o}return o}function a(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),R(2!==t?r:r.replace(S,"$1"),n,t)}function o(e,t){var n=i(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(_," or ($1)").substring(4):"("+t+")"}function u(e,t,n,r,i,a,o,u,s,l){for(var f,h=0,d=t;h<P;++h)switch(f=O[h].call(c,e,d,n,r,i,a,o,u,s,l)){case void 0:case!1:case!0:case null:break;default:d=f}if(d!==t)return d}function s(e){return void 0!==(e=e.prefix)&&(R=null,e?"function"!==typeof e?N=1:(N=2,R=e):N=0),s}function c(e,n){var r=e;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<P){var i=u(-1,n,r,r,I,T,0,0,0,0);void 0!==i&&"string"===typeof i&&(n=i)}var a=t(D,r,n,0,0);return 0<P&&(void 0!==(i=u(-2,a,r,r,I,T,a.length,0,0,0))&&(a=i)),"",A=0,T=I=1,a}var l=/^\0+/g,f=/[\0\r\f]/g,h=/: */g,d=/zoo|gra/,p=/([,: ])(transform)/g,v=/,\r+?/g,y=/([\t\r\n ])*\f?&/g,m=/@(k\w+)\s*(\S*)\s*/,g=/::(place)/g,k=/:(read-only)/g,b=/[svh]\w+-[tblr]{2}/,w=/\(\s*(.*)\s*\)/g,_=/([\s\S]*?);/g,x=/-self|flex-/g,S=/[^]*?(:[rp][el]a[\w-]+)[^]*/,E=/stretch|:\s*\w+\-(?:conte|avail)/,C=/([^-])(image-set\()/,T=1,I=1,A=0,N=1,D=[],O=[],P=0,R=null,F=0;return c.use=function e(t){switch(t){case void 0:case null:P=O.length=0;break;default:if("function"===typeof t)O[P++]=t;else if("object"===typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else F=0|!!t}return e},c.set=s,void 0!==e&&s(e),c},Be={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function qe(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var ze=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,We=qe((function(e){return ze.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),Ke=n(110),Qe=n.n(Ke);function He(){return(He=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Ge=function(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n},$e=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,je.typeOf)(e)},Ye=Object.freeze([]),Xe=Object.freeze({});function Je(e){return"function"==typeof e}function Ze(e){return e.displayName||e.name||"Component"}function et(e){return e&&"string"==typeof e.styledComponentId}var tt="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&({NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",nt="undefined"!=typeof window&&"HTMLElement"in window,rt=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&(void 0!=={NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:void 0!=={NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY)));function it(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var at=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)(i<<=1)<0&&it(16,""+e);this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var a=r;a<i;a++)this.groupSizes[a]=0}for(var o=this.indexOfGroup(e+1),u=0,s=t.length;u<s;u++)this.tag.insertRule(o,t[u])&&(this.groupSizes[e]++,o++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,a=r;a<i;a++)t+=this.tag.getRule(a)+"/*!sc*/\n";return t},e}(),ot=new Map,ut=new Map,st=1,ct=function(e){if(ot.has(e))return ot.get(e);for(;ut.has(st);)st++;var t=st++;return ot.set(e,t),ut.set(t,e),t},lt=function(e){return ut.get(e)},ft=function(e,t){t>=st&&(st=t+1),ot.set(e,t),ut.set(t,e)},ht="style["+tt+'][data-styled-version="5.3.10"]',dt=new RegExp("^"+tt+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),pt=function(e,t,n){for(var r,i=n.split(","),a=0,o=i.length;a<o;a++)(r=i[a])&&e.registerName(t,r)},vt=function(e,t){for(var n=(t.textContent||"").split("/*!sc*/\n"),r=[],i=0,a=n.length;i<a;i++){var o=n[i].trim();if(o){var u=o.match(dt);if(u){var s=0|parseInt(u[1],10),c=u[2];0!==s&&(ft(c,s),pt(e,c,u[3]),e.getTag().insertRules(s,r)),r.length=0}else r.push(o)}}},yt=function(){return n.nc},mt=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var r=t[n];if(r&&1===r.nodeType&&r.hasAttribute(tt))return r}}(n),a=void 0!==i?i.nextSibling:null;r.setAttribute(tt,"active"),r.setAttribute("data-styled-version","5.3.10");var o=yt();return o&&r.setAttribute("nonce",o),n.insertBefore(r,a),r},gt=function(){function e(e){var t=this.element=mt(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}it(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),kt=function(){function e(e){var t=this.element=mt(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),r=this.nodes[e];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),bt=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),wt=nt,_t={isServer:!nt,useCSSOMInjection:!rt},xt=function(){function e(e,t,n){void 0===e&&(e=Xe),void 0===t&&(t={}),this.options=He({},_t,{},e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&nt&&wt&&(wt=!1,function(e){for(var t=document.querySelectorAll(ht),n=0,r=t.length;n<r;n++){var i=t[n];i&&"active"!==i.getAttribute(tt)&&(vt(e,i),i.parentNode&&i.parentNode.removeChild(i))}}(this))}e.registerId=function(e){return ct(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(He({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(n=(t=this.options).isServer,r=t.useCSSOMInjection,i=t.target,e=n?new bt(i):r?new gt(i):new kt(i),new at(e)));var e,t,n,r,i},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(ct(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(ct(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(ct(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=0;i<n;i++){var a=lt(i);if(void 0!==a){var o=e.names.get(a),u=t.getGroup(i);if(o&&u&&o.size){var s=tt+".g"+i+'[id="'+a+'"]',c="";void 0!==o&&o.forEach((function(e){e.length>0&&(c+=e+",")})),r+=""+u+s+'{content:"'+c+'"}/*!sc*/\n'}}}return r}(this)},e}(),St=/(a)(d)/gi,Et=function(e){return String.fromCharCode(e+(e>25?39:97))};function Ct(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=Et(t%52)+n;return(Et(t%52)+n).replace(St,"$1-$2")}var Tt=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},It=function(e){return Tt(5381,e)};function At(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(Je(n)&&!et(n))return!1}return!0}var Nt=It("5.3.10"),Dt=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&At(e),this.componentId=t,this.baseHash=Tt(Nt,t),this.baseStyle=n,xt.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.componentId,i=[];if(this.baseStyle&&i.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(r,this.staticRulesId))i.push(this.staticRulesId);else{var a=$t(this.rules,e,t,n).join(""),o=Ct(Tt(this.baseHash,a)>>>0);if(!t.hasNameForId(r,o)){var u=n(a,"."+o,void 0,r);t.insertRules(r,o,u)}i.push(o),this.staticRulesId=o}else{for(var s=this.rules.length,c=Tt(this.baseHash,n.hash),l="",f=0;f<s;f++){var h=this.rules[f];if("string"==typeof h)l+=h;else if(h){var d=$t(h,e,t,n),p=Array.isArray(d)?d.join(""):d;c=Tt(c,p+f),l+=p}}if(l){var v=Ct(c>>>0);if(!t.hasNameForId(r,v)){var y=n(l,"."+v,void 0,r);t.insertRules(r,v,y)}i.push(v)}}return i.join(" ")},e}(),Ot=/^\s*\/\/.*$/gm,Pt=[":","[",".","#"];function Rt(e){var t,n,r,i,a=void 0===e?Xe:e,o=a.options,u=void 0===o?Xe:o,s=a.plugins,c=void 0===s?Ye:s,l=new Ve(u),f=[],h=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,r,i,a,o,u,s,c,l,f){switch(n){case 1:if(0===l&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===c)return r+"/*|*/";break;case 3:switch(c){case 102:case 112:return e(i[0]+r),"";default:return r+(0===f?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(t)}}}((function(e){f.push(e)})),d=function(e,r,a){return 0===r&&-1!==Pt.indexOf(a[n.length])||a.match(i)?e:"."+t};function p(e,a,o,u){void 0===u&&(u="&");var s=e.replace(Ot,""),c=a&&o?o+" "+a+" { "+s+" }":s;return t=u,n=a,r=new RegExp("\\"+n+"\\b","g"),i=new RegExp("(\\"+n+"\\b){2,}"),l(o||!a?"":a,c)}return l.use([].concat(c,[function(e,t,i){2===e&&i.length&&i[0].lastIndexOf(n)>0&&(i[0]=i[0].replace(r,d))},h,function(e){if(-2===e){var t=f;return f=[],t}}])),p.hash=c.length?c.reduce((function(e,t){return t.name||it(15),Tt(e,t.name)}),5381).toString():"",p}var Ft=r.createContext(),Lt=(Ft.Consumer,r.createContext()),jt=(Lt.Consumer,new xt),Mt=Rt();function Ut(){return(0,r.useContext)(Ft)||jt}function Vt(){return(0,r.useContext)(Lt)||Mt}function Bt(e){var t=(0,r.useState)(e.stylisPlugins),n=t[0],i=t[1],a=Ut(),o=(0,r.useMemo)((function(){var t=a;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target]),u=(0,r.useMemo)((function(){return Rt({options:{prefix:!e.disableVendorPrefixes},plugins:n})}),[e.disableVendorPrefixes,n]);return(0,r.useEffect)((function(){Ue()(n,e.stylisPlugins)||i(e.stylisPlugins)}),[e.stylisPlugins]),r.createElement(Ft.Provider,{value:o},r.createElement(Lt.Provider,{value:u},e.children))}var qt=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=Mt);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.toString=function(){return it(12,String(n.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=Mt),this.name+e.hash},e}(),zt=/([A-Z])/,Wt=/([A-Z])/g,Kt=/^ms-/,Qt=function(e){return"-"+e.toLowerCase()};function Ht(e){return zt.test(e)?e.replace(Wt,Qt).replace(Kt,"-ms-"):e}var Gt=function(e){return null==e||!1===e||""===e};function $t(e,t,n,r){if(Array.isArray(e)){for(var i,a=[],o=0,u=e.length;o<u;o+=1)""!==(i=$t(e[o],t,n,r))&&(Array.isArray(i)?a.push.apply(a,i):a.push(i));return a}return Gt(e)?"":et(e)?"."+e.styledComponentId:Je(e)?"function"!=typeof(s=e)||s.prototype&&s.prototype.isReactComponent||!t?e:$t(e(t),t,n,r):e instanceof qt?n?(e.inject(n,r),e.getName(r)):e:$e(e)?function e(t,n){var r,i,a=[];for(var o in t)t.hasOwnProperty(o)&&!Gt(t[o])&&(Array.isArray(t[o])&&t[o].isCss||Je(t[o])?a.push(Ht(o)+":",t[o],";"):$e(t[o])?a.push.apply(a,e(t[o],o)):a.push(Ht(o)+": "+(r=o,(null==(i=t[o])||"boolean"==typeof i||""===i?"":"number"!=typeof i||0===i||r in Be||r.startsWith("--")?String(i).trim():i+"px")+";")));return n?[n+" {"].concat(a,["}"]):a}(e):e.toString();var s}var Yt=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function Xt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Je(e)||$e(e)?Yt($t(Ge(Ye,[e].concat(n)))):0===n.length&&1===e.length&&"string"==typeof e[0]?e:Yt($t(Ge(e,n)))}new Set;var Jt=function(e,t,n){return void 0===n&&(n=Xe),e.theme!==n.theme&&e.theme||t||n.theme},Zt=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,en=/(^-|-$)/g;function tn(e){return e.replace(Zt,"-").replace(en,"")}var nn=function(e){return Ct(It(e)>>>0)};function rn(e){return"string"==typeof e&&!0}var an=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},on=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function un(e,t,n){var r=e[n];an(t)&&an(r)?sn(r,t):e[n]=t}function sn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];if(an(o))for(var u in o)on(u)&&un(e,o[u],u)}return e}var cn=r.createContext();cn.Consumer;var ln={};function fn(e,t,n){var i=et(e),a=!rn(e),o=t.attrs,u=void 0===o?Ye:o,s=t.componentId,c=void 0===s?function(e,t){var n="string"!=typeof e?"sc":tn(e);ln[n]=(ln[n]||0)+1;var r=n+"-"+nn("5.3.10"+n+ln[n]);return t?t+"-"+r:r}(t.displayName,t.parentComponentId):s,l=t.displayName,f=void 0===l?function(e){return rn(e)?"styled."+e:"Styled("+Ze(e)+")"}(e):l,h=t.displayName&&t.componentId?tn(t.displayName)+"-"+t.componentId:t.componentId||c,d=i&&e.attrs?Array.prototype.concat(e.attrs,u).filter(Boolean):u,p=t.shouldForwardProp;i&&e.shouldForwardProp&&(p=t.shouldForwardProp?function(n,r,i){return e.shouldForwardProp(n,r,i)&&t.shouldForwardProp(n,r,i)}:e.shouldForwardProp);var v,y=new Dt(n,h,i?e.componentStyle:void 0),m=y.isStatic&&0===u.length,g=function(e,t){return function(e,t,n,i){var a=e.attrs,o=e.componentStyle,u=e.defaultProps,s=e.foldedComponentIds,c=e.shouldForwardProp,l=e.styledComponentId,f=e.target,h=function(e,t,n){void 0===e&&(e=Xe);var r=He({},t,{theme:e}),i={};return n.forEach((function(e){var t,n,a,o=e;for(t in Je(o)&&(o=o(r)),o)r[t]=i[t]="className"===t?(n=i[t],a=o[t],n&&a?n+" "+a:n||a):o[t]})),[r,i]}(Jt(t,(0,r.useContext)(cn),u)||Xe,t,a),d=h[0],p=h[1],v=function(e,t,n,r){var i=Ut(),a=Vt();return t?e.generateAndInjectStyles(Xe,i,a):e.generateAndInjectStyles(n,i,a)}(o,i,d),y=n,m=p.$as||t.$as||p.as||t.as||f,g=rn(m),k=p!==t?He({},t,{},p):t,b={};for(var w in k)"$"!==w[0]&&"as"!==w&&("forwardedAs"===w?b.as=k[w]:(c?c(w,We,m):!g||We(w))&&(b[w]=k[w]));return t.style&&p.style!==t.style&&(b.style=He({},t.style,{},p.style)),b.className=Array.prototype.concat(s,l,v!==l?v:null,t.className,p.className).filter(Boolean).join(" "),b.ref=y,(0,r.createElement)(m,b)}(v,e,t,m)};return g.displayName=f,(v=r.forwardRef(g)).attrs=d,v.componentStyle=y,v.displayName=f,v.shouldForwardProp=p,v.foldedComponentIds=i?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):Ye,v.styledComponentId=h,v.target=i?e.target:e,v.withComponent=function(e){var r=t.componentId,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["componentId"]),a=r&&r+"-"+(rn(e)?e:tn(Ze(e)));return fn(e,He({},i,{attrs:d,componentId:a}),n)},Object.defineProperty(v,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=i?sn({},e.defaultProps,t):t}}),Object.defineProperty(v,"toString",{value:function(){return"."+v.styledComponentId}}),a&&Qe()(v,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),v}var hn=function(e){return function e(t,n,r){if(void 0===r&&(r=Xe),!(0,je.isValidElementType)(n))return it(1,String(n));var i=function(){return t(n,r,Xt.apply(void 0,arguments))};return i.withConfig=function(i){return e(t,n,He({},r,{},i))},i.attrs=function(i){return e(t,n,He({},r,{attrs:Array.prototype.concat(r.attrs,i).filter(Boolean)}))},i}(fn,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){hn[e]=hn(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=At(e),xt.registerId(this.componentId+1)}var t=e.prototype;t.createStyles=function(e,t,n,r){var i=r($t(this.rules,t,n,r).join(""),""),a=this.componentId+e;n.insertRules(a,a,i)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,n,r){e>2&&xt.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)}}();!function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=yt();return"<style "+[n&&'nonce="'+n+'"',tt+'="true"','data-styled-version="5.3.10"'].filter(Boolean).join(" ")+">"+t+"</style>"},this.getStyleTags=function(){return e.sealed?it(2):e._emitSheetCSS()},this.getStyleElement=function(){var t;if(e.sealed)return it(2);var n=((t={})[tt]="",t["data-styled-version"]="5.3.10",t.dangerouslySetInnerHTML={__html:e.instance.toString()},t),i=yt();return i&&(n.nonce=i),[r.createElement("style",He({},n,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new xt({isServer:!0}),this.sealed=!1}var t=e.prototype;t.collectStyles=function(e){return this.sealed?it(2):r.createElement(Bt,{sheet:this.instance},e)},t.interleaveWithNodeStream=function(e){return it(3)}}();var dn=hn,pn=n(164),vn=dn.div.withConfig({displayName:"baseStyles__BaseModalBackground"})(["display:flex;position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:30;background-color:rgba(0,0,0,0.5);align-items:center;justify-content:center;"]);function yn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){u=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return yn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gn(){}function kn(){}kn.resetWarningCache=gn;var bn,wn,_n=(bn=function(e){e.exports=function(){function e(e,t,n,r,i,a){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==a){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:kn,resetWarningCache:gn};return n.PropTypes=n,n}()},bn(wn={exports:{}}),wn.exports),xn=_n,Sn=r.createContext({}),En=Sn.Provider,Cn=Sn.Consumer;function Tn(e){var t=e.backgroundComponent,n=e.children,i=(0,r.useRef)(null),a=mn((0,r.useState)(null),2),o=a[0],u=a[1],s=mn((0,r.useState)(vn),2),c=s[0],l=s[1];return(0,r.useEffect)((function(){t&&l(t)}),[l,t]),(0,r.useEffect)((function(){u(i.current)}),[u,i]),r.createElement(En,{value:{modalNode:o,BackgroundComponent:c}},n,r.createElement("div",{ref:i}))}function In(){return In=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},In.apply(this,arguments)}Tn.propTypes={backgroundComponent:xn.oneOfType([xn.element,xn.object])};var An=["WrapperComponent","children","onBackgroundClick","onEscapeKeydown","allowScroll","beforeOpen","afterOpen","beforeClose","afterClose","backgroundProps","isOpen"];function Nn(e){var t,n=e.WrapperComponent,i=e.children,a=e.onBackgroundClick,o=e.onEscapeKeydown,u=e.allowScroll,s=e.beforeOpen,c=e.afterOpen,l=e.beforeClose,f=e.afterClose,h=e.backgroundProps,d=e.isOpen,p=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,An),v=(0,r.useRef)(null),y=(0,r.useRef)(null),m=(0,r.useRef)(!1),g=mn((0,r.useState)(!1),2),k=g[0],b=g[1];function w(e){v.current===e.target&&a&&a(e)}return(0,r.useEffect)((function(){function e(e){b(e),function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e&&e.apply(void 0,n)}(e?c:f)}k===d||m.current||function(t){if(t){var n=t();"function"==typeof(null==n?void 0:n.then)?(m.current=!0,n.then((function(){e(d),m.current=!1}))):e(d)}else e(d)}(d?s:l)}),[m,k,d,s,l,f,c]),(0,r.useEffect)((function(){function e(e){"Escape"===e.key&&o&&o(e)}return k&&document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[k,o]),(0,r.useEffect)((function(){return k&&!u&&(y.current=document.body.style.overflow,document.body.style.overflow="hidden"),function(){u||(document.body.style.overflow=y.current||"")}}),[k,u]),t=n?r.createElement(n,p,i):i,r.createElement(Cn,null,(function(e){var n=e.modalNode,i=e.BackgroundComponent;return n&&i&&k?pn.createPortal(r.createElement(i,In({},h,{onClick:w,ref:v}),t),n):null}))}Nn.styled=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t?dn.div.withConfig({displayName:"Modal__wrap"}).apply(void 0,t):dn.div.withConfig({displayName:"Modal__wrap"})();return function(e){return r.createElement(Nn,In({WrapperComponent:i},e))}},Nn.defaultProps={backgroundProps:{}},Nn.propTypes={WrapperComponent:xn.oneOfType([xn.element,xn.object]),onBackgroundClick:xn.func,onEscapeKeydown:xn.func,allowScroll:xn.bool,beforeOpen:xn.func,afterOpen:xn.func,beforeClose:xn.func,afterClose:xn.func,backgroundProps:xn.object,isOpen:xn.bool};var Dn,On,Pn,Rn=n(184),Fn=Nn.styled(Dn||(On=["\n  width: 30rem;\n  height: 30rem;\n  display: flex;\n  align-items: center;\n  background-color: #ffffff;\n  flex-direction: column;\n"],Pn||(Pn=On.slice(0)),Dn=Object.freeze(Object.defineProperties(On,{raw:{value:Object.freeze(Pn)}}))));function Ln(e){var t=e.isOpen,n=e.toggleModal,r=e.children,i=e.submitButtonText,a=e.onSubmit;return(0,Rn.jsxs)(Fn,{isOpen:t,onBackgroundClick:n,onEscapeKeydown:n,children:[r,(0,Rn.jsxs)("div",{children:[(0,Rn.jsx)("button",{onClick:function(){n(),a()},children:i}),(0,Rn.jsx)("button",{onClick:n,children:"Close"})]})]})}function jn(e){var t=e.template,n=e.templateIndex,r=e.chooseTemplate,i=e.choosenTemplate,a=i&&t.id===i.id?"#c4c1e0":"inherit";return(0,Rn.jsxs)("p",{style:{backgroundColor:a},className:"template-name",onClick:function(){r(n)},children:[n,". ",t.templateName]})}function Mn(e){var t=e.templates,n=e.chooseTemplate,r=e.choosenTemplate;return(0,Rn.jsxs)("div",{className:"list-container",children:[(0,Rn.jsx)("h2",{style:{textAlign:"center"},children:"Templates"}),t.map((function(e,t){return(0,Rn.jsx)(jn,{template:e,templateIndex:t+1,chooseTemplate:n,choosenTemplate:r},t)}))]})}function Un(){Un=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(A){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),u=new C(i||[]);return r(o,"_invoke",{value:_(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}e.wrap=c;var f={};function h(){}function p(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(T([])));g&&g!==t&&n.call(g,a)&&(y=g);var k=v.prototype=h.prototype=Object.create(y);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(r,a,o,u){var s=l(e[r],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==d(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function _(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return I()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=x(o,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:I}}function I(){return{value:void 0,done:!0}}return p.prototype=v,r(k,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:p,configurable:!0}),p.displayName=s(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},b(w.prototype),s(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(k),s(k,u,"Generator"),s(k,a,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function Vn(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(Ca){return void n(Ca)}u.done?t(s):Promise.resolve(s).then(r,i)}function Bn(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Vn(a,r,i,o,u,"next",e)}function u(e){Vn(a,r,i,o,u,"throw",e)}o(void 0)}))}}function qn(e,t,n){return(t=p(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zn=!1,Wn=!1,Kn="${JSCORE_VERSION}",Qn=function(e,t){if(!e)throw Hn(t)},Hn=function(e){return new Error("Firebase Database ("+Kn+") INTERNAL ASSERT FAILED: "+e)},Gn=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},$n={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Gn(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new Yn;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Yn=function(e){g(n,e);var t=_(n);function n(){var e;return h(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return y(n)}(S(Error)),Xn=function(e){var t=Gn(e);return $n.encodeByteArray(t,!0)},Jn=function(e){return Xn(e).replace(/\./g,"")},Zn=function(e){try{return $n.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function er(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=er(e[n],t[n]));return e}var tr=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},nr=function(){try{return tr()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&Zn(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},rr=function(){var e;return null===(e=nr())||void 0===e?void 0:e.config},ir=function(){function e(){var t=this;h(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return y(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function ar(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Jn(JSON.stringify({alg:"none",type:"JWT"})),Jn(JSON.stringify(a)),""].join(".")}function or(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function ur(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(or())}function sr(){return!0===zn||!0===Wn}function cr(){return!function(){var e,t=null===(e=nr())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lr(){try{return"object"===typeof indexedDB}catch(e){return!1}}var fr=function(e){g(n,e);var t=_(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(w(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(w(a),hr.prototype.create),a}return y(n)}(S(Error)),hr=function(){function e(t,n,r){h(this,e),this.service=t,this.serviceName=n,this.errors=r}return y(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(dr,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new fr(n,a,t)}}]),e}();var dr=/\{\$([^}]+)}/g;function pr(e){return JSON.parse(e)}function vr(e){return JSON.stringify(e)}var yr=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=pr(Zn(a[0])||""),n=pr(Zn(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function mr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function gr(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function kr(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function br(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function wr(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(_r(u)&&_r(s)){if(!wr(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function _r(e){return null!==e&&"object"===typeof e}var xr=function(){function e(){h(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return y(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var u,s,c=this.chain_[0],l=this.chain_[1],f=this.chain_[2],h=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(u=h^l&(f^h),s=1518500249):(u=l^f^h,s=1859775393):p<60?(u=l&f|h&(l|f),s=2400959708):(u=l^f^h,s=3395469782);var v=(c<<5|c>>>27)+u+d+s+n[p]&4294967295;d=h,h=f,f=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function Sr(e,t){var n=new Er(e,t);return n.subscribe.bind(n)}var Er=function(){function e(t,n){var r=this;h(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return y(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=E(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Cr),void 0===r.error&&(r.error=Cr),void 0===r.complete&&(r.complete=Cr);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Cr(){}var Tr=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function Ir(e,t){return"".concat(e," failed: ").concat(t," argument ")}function Ar(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(Ir(e,t)+"must be a valid function.")}function Nr(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(Ir(e,t)+"must be a valid context object.")}var Dr=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function Or(e){return e&&e._delegate?e._delegate:e}var Pr=function(){function e(t,n,r){h(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return y(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Rr="[DEFAULT]",Fr=function(){function e(t,n){h(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return y(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new ir;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Rr})}catch(s){}var t,n=E(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=c(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rr;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Bn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(f(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),f(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rr;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rr;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=E(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=c(i.value,2),s=u[0],l=u[1];r===this.normalizeInstanceIdentifier(s)&&l.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=E(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(EC){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Rr?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(EC){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rr;return this.component?this.component.multipleInstances?e:Rr:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Lr,jr,Mr=function(){function e(t){h(this,e),this.name=t,this.providers=new Map}return y(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Fr(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Ur=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(jr||(jr={}));var Vr={debug:jr.DEBUG,verbose:jr.VERBOSE,info:jr.INFO,warn:jr.WARN,error:jr.ERROR,silent:jr.SILENT},Br=jr.INFO,qr=(qn(Lr={},jr.DEBUG,"log"),qn(Lr,jr.VERBOSE,"log"),qn(Lr,jr.INFO,"info"),qn(Lr,jr.WARN,"warn"),qn(Lr,jr.ERROR,"error"),Lr),zr=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=qr[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Wr=function(){function e(t){h(this,e),this.name=t,this._logLevel=Br,this._logHandler=zr,this._userLogHandler=null,Ur.push(this)}return y(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in jr))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Vr[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,jr.DEBUG].concat(t)),this._logHandler.apply(this,[this,jr.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,jr.VERBOSE].concat(t)),this._logHandler.apply(this,[this,jr.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,jr.INFO].concat(t)),this._logHandler.apply(this,[this,jr.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,jr.WARN].concat(t)),this._logHandler.apply(this,[this,jr.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,jr.ERROR].concat(t)),this._logHandler.apply(this,[this,jr.ERROR].concat(t))}}]),e}();function Kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kr(Object(n),!0).forEach((function(t){qn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Hr,Gr,$r=function(e,t){return t.some((function(t){return e instanceof t}))};var Yr=new WeakMap,Xr=new WeakMap,Jr=new WeakMap,Zr=new WeakMap,ei=new WeakMap;var ti={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Xr.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Jr.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ii(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function ni(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Gr||(Gr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ai(this),n),ii(Yr.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ii(e.apply(ai(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[ai(this),t].concat(r));return Jr.set(a,t.sort?t.sort():[t]),ii(a)}}function ri(e){return"function"===typeof e?ni(e):(e instanceof IDBTransaction&&function(e){if(!Xr.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Xr.set(e,t)}}(e),$r(e,Hr||(Hr=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,ti):e)}function ii(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(ii(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Yr.set(t,e)})).catch((function(){})),ei.set(t,e),t}(e);if(Zr.has(e))return Zr.get(e);var t=ri(e);return t!==e&&(Zr.set(e,t),ei.set(t,e)),t}var ai=function(e){return ei.get(e)};var oi,ui,si=["get","getKey","getAll","getAllKeys","count"],ci=["put","add","delete","clear"],li=new Map;function fi(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(li.get(t))return li.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=ci.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||si.includes(n))){var a=function(){var e=Bn(Un().mark((function e(t){var a,o,u,s,c,l,f=arguments;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return li.set(t,a),a}}}ti=function(e){return Qr(Qr({},e),{},{get:function(t,n,r){return fi(t,n)||e.get(t,n,r)},has:function(t,n){return!!fi(t,n)||e.has(t,n)}})}(ti);var hi=function(){function e(t){h(this,e),this.container=t}return y(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var di="@firebase/app",pi="0.9.10",vi=new Wr("@firebase/app"),yi="[DEFAULT]",mi=(qn(oi={},di,"fire-core"),qn(oi,"@firebase/app-compat","fire-core-compat"),qn(oi,"@firebase/analytics","fire-analytics"),qn(oi,"@firebase/analytics-compat","fire-analytics-compat"),qn(oi,"@firebase/app-check","fire-app-check"),qn(oi,"@firebase/app-check-compat","fire-app-check-compat"),qn(oi,"@firebase/auth","fire-auth"),qn(oi,"@firebase/auth-compat","fire-auth-compat"),qn(oi,"@firebase/database","fire-rtdb"),qn(oi,"@firebase/database-compat","fire-rtdb-compat"),qn(oi,"@firebase/functions","fire-fn"),qn(oi,"@firebase/functions-compat","fire-fn-compat"),qn(oi,"@firebase/installations","fire-iid"),qn(oi,"@firebase/installations-compat","fire-iid-compat"),qn(oi,"@firebase/messaging","fire-fcm"),qn(oi,"@firebase/messaging-compat","fire-fcm-compat"),qn(oi,"@firebase/performance","fire-perf"),qn(oi,"@firebase/performance-compat","fire-perf-compat"),qn(oi,"@firebase/remote-config","fire-rc"),qn(oi,"@firebase/remote-config-compat","fire-rc-compat"),qn(oi,"@firebase/storage","fire-gcs"),qn(oi,"@firebase/storage-compat","fire-gcs-compat"),qn(oi,"@firebase/firestore","fire-fst"),qn(oi,"@firebase/firestore-compat","fire-fst-compat"),qn(oi,"fire-js","fire-js"),qn(oi,"firebase","fire-js-all"),oi),gi=new Map,ki=new Map;function bi(e,t){try{e.container.addComponent(t)}catch(n){vi.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function wi(e,t){e.container.addOrOverwriteComponent(t)}function _i(e){var t=e.name;if(ki.has(t))return vi.debug("There were multiple attempts to register component ".concat(t,".")),!1;ki.set(t,e);var n,r=E(gi.values());try{for(r.s();!(n=r.n()).done;){bi(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function xi(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Si(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yi;xi(e,t).clearInstance(n)}function Ei(){ki.clear()}var Ci=(qn(ui={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),qn(ui,"bad-app-name","Illegal App name: '{$appName}"),qn(ui,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),qn(ui,"app-deleted","Firebase App named '{$appName}' already deleted"),qn(ui,"no-options","Need to provide options, when not being deployed to hosting via source."),qn(ui,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),qn(ui,"invalid-log-argument","First argument to `onLog` must be null or a function."),qn(ui,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),qn(ui,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),qn(ui,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),qn(ui,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),ui),Ti=new hr("app","Firebase",Ci),Ii=function(){function e(t,n,r){var i=this;h(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Pr("app",(function(){return i}),"PUBLIC"))}return y(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Ti.create("app-deleted",{appName:this._name})}}]),e}(),Ai="9.22.0";function Ni(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:yi,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Ti.create("bad-app-name",{appName:String(i)});if(n||(n=rr()),!n)throw Ti.create("no-options");var a=gi.get(i);if(a){if(wr(n,a.options)&&wr(r,a.config))return a;throw Ti.create("duplicate-app",{appName:i})}var o,u=new Mr(i),s=E(ki.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Ii(n,r,u);return gi.set(i,l),l}function Di(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yi,t=gi.get(e);if(!t&&e===yi&&rr())return Ni();if(!t)throw Ti.create("no-app",{appName:e});return t}function Oi(){return Array.from(gi.values())}function Pi(e){return Ri.apply(this,arguments)}function Ri(){return(Ri=Bn(Un().mark((function e(t){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!gi.has(n)){e.next=6;break}return gi.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fi(e,t,n){var r,i=null!==(r=mi[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void vi.warn(u.join(" "))}_i(new Pr("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Li(e,t){if(null!==e&&"function"!==typeof e)throw Ti.create("invalid-log-argument");!function(e,t){var n,r=E(Ur);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Vr[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:jr[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function ji(e){var t;t=e,Ur.forEach((function(e){e.setLogLevel(t)}))}var Mi="firebase-heartbeat-database",Ui=1,Vi="firebase-heartbeat-store",Bi=null;function qi(){return Bi||(Bi=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=ii(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(ii(u.result),e.oldVersion,e.newVersion,ii(u.transaction),e)})),r&&u.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),s}(Mi,Ui,{upgrade:function(e,t){if(0===t)e.createObjectStore(Vi)}}).catch((function(e){throw Ti.create("idb-open",{originalErrorMessage:e.message})}))),Bi}function zi(e){return Wi.apply(this,arguments)}function Wi(){return Wi=Bn(Un().mark((function e(t){var n,r,i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qi();case 3:return n=e.sent,e.next=6,n.transaction(Vi).objectStore(Vi).get(Hi(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof fr?vi.warn(e.t0.message):(i=Ti.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),vi.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),Wi.apply(this,arguments)}function Ki(e,t){return Qi.apply(this,arguments)}function Qi(){return Qi=Bn(Un().mark((function e(t,n){var r,i,a,o;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qi();case 3:return r=e.sent,i=r.transaction(Vi,"readwrite"),a=i.objectStore(Vi),e.next=8,a.put(n,Hi(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof fr?vi.warn(e.t0.message):(o=Ti.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),vi.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),Qi.apply(this,arguments)}function Hi(e){return"".concat(e.name,"!").concat(e.options.appId)}var Gi=function(){function e(t){var n=this;h(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Zi(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return y(e,[{key:"triggerHeartbeat",value:function(){var e=Bn(Un().mark((function e(){var t,n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=$i(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Bn(Un().mark((function e(){var t,n,r,i,a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=$i(),n=Yi(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=Jn(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function $i(){return(new Date).toISOString().substring(0,10)}function Yi(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=E(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),ea(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),ea(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Xi,Ji,Zi=function(){function e(t){h(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return y(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Bn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(lr()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(Ca){t(Ca)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Bn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,zi(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Bn(Un().mark((function e(t){var n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Ki(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Bn(Un().mark((function e(t){var n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Ki(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(f(r.heartbeats),f(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function ea(e){return Jn(JSON.stringify({version:2,heartbeats:e})).length}Xi="",_i(new Pr("platform-logger",(function(e){return new hi(e)}),"PRIVATE")),_i(new Pr("heartbeat",(function(e){return new Gi(e)}),"PRIVATE")),Fi(di,pi,Xi),Fi(di,pi,"esm2017"),Fi("fire-js","");var ta=function(){function e(t,n){var r=this;h(this,e),this._delegate=t,this.firebase=n,bi(t,new Pr("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return y(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Pi(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yi;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yi;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){bi(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){wi(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),na=(qn(Ji={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),qn(Ji,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Ji),ra=new hr("app-compat","Firebase",na);var ia=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Ni(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(mr(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Fi,setLogLevel:ji,onLog:Li,apps:null,SDK_VERSION:Ai,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(_i(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw ra.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&er(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!mr(n,e=e||yi))throw ra.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(ta);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){er(n,e)},createSubscribe:Sr,ErrorFactory:hr,deepExtend:er}),n}(),aa=new Wr("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){aa.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var oa=self.firebase.SDK_VERSION;oa&&oa.indexOf("LITE")>=0&&aa.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var ua=ia;!function(e){Fi("@firebase/app-compat","0.2.10",e)}();ua.registerVersion("firebase","9.22.0","app-compat");var sa="@firebase/database",ca="0.14.4",la="";function fa(e){la=e}var ha=function(){function e(t){h(this,e),this.domStorage_=t,this.prefix_="firebase:"}return y(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),vr(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:pr(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),da=function(){function e(){h(this,e),this.cache_={},this.isInMemoryStorage=!0}return y(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return mr(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),pa=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new ha(t)}}catch(n){}return new da},va=pa("localStorage"),ya=pa("sessionStorage"),ma=new Wr("@firebase/database"),ga=function(){var e=1;return function(){return e++}}(),ka=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,Qn(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new xr;n.update(t);var r=n.digest();return $n.encodeByteArray(r)},ba=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?vr(r):r,t+=" "}return t},wa=null,_a=!0,xa=function(e,t){Qn(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(ma.logLevel=jr.VERBOSE,wa=ma.log.bind(ma),t&&ya.set("logging_enabled",!0)):"function"===typeof e?wa=e:(wa=null,ya.remove("logging_enabled"))},Sa=function(){if(!0===_a&&(_a=!1,null===wa&&!0===ya.get("logging_enabled")&&xa(!0)),wa){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=ba.apply(null,t);wa(r)}},Ea=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Sa.apply(void 0,[e].concat(n))}},Ca=function(){var e="FIREBASE INTERNAL ERROR: "+ba.apply(void 0,arguments);ma.error(e)},Ta=function(){var e="FIREBASE FATAL ERROR: ".concat(ba.apply(void 0,arguments));throw ma.error(e),new Error(e)},Ia=function(){var e="FIREBASE WARNING: "+ba.apply(void 0,arguments);ma.warn(e)},Aa=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Na="[MIN_NAME]",Da="[MAX_NAME]",Oa=function(e,t){if(e===t)return 0;if(e===Na||t===Da)return-1;if(t===Na||e===Da)return 1;var n=Va(e),r=Va(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},Pa=function(e,t){return e===t?0:e<t?-1:1},Ra=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+vr(t))},Fa=function e(t){if("object"!==typeof t||null===t)return vr(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=vr(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},La=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function ja(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var Ma=function(e){Qn(!Aa(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var u=[];for(a=52;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(t?1:0),u.reverse();var s=u.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(s.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var Ua=new RegExp("^-?(0*)\\d{1,10}$"),Va=function(e){if(Ua.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Ba=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw Ia("Exception was thrown by user callback.",e),t}),Math.floor(0))}},qa=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},za=function(){function e(t,n){var r=this;h(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return y(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){Ia('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),Wa=function(){function e(t,n,r){var i=this;h(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return y(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(Sa("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ia(e)}}]),e}(),Ka=function(){function e(t){h(this,e),this.accessToken=t}return y(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();Ka.OWNER="owner";var Qa="5",Ha=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ga="ac",$a="websocket",Ya="long_polling",Xa=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];h(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=u,this.isUsingEmulator=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=va.get("host:"+t)||this._host}return y(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&va.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function Ja(e,t,n){var r;if(Qn("string"===typeof t,"typeof type must == string"),Qn("object"===typeof n,"typeof params must == object"),t===$a)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Ya)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return ja(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var Za=function(){function e(){h(this,e),this.counters_={}}return y(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;mr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return er(void 0,this.counters_)}}]),e}(),eo={},to={};function no(e){var t=e.toString();return eo[t]||(eo[t]=new Za),eo[t]}var ro=function(){function e(t){h(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return y(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&Ba((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),io="start",ao=function(){function e(t,n,r,i,a,o,u){var s=this;h(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ea(t),this.stats_=no(n),this.urlFn=function(e){return s.appCheckToken&&(e[Ga]=s.appCheckToken),Ja(n,Ya,e)}}return y(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new ro(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(sr()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new oo((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===io)n.id=a,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={};e[io]="t",e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=Qa,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e[Ga]=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&Ha.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=vr(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=Xn(t),r=La(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!sr()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=vr(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!sr()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),oo=function(){function e(t,n,r,i){if(h(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,sr())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=ga(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(u){Sa("frame writing exception"),u.stack&&Sa(u.stack),Sa(u)}}}return y(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;sr()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){Sa("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Sa("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),uo=null;"undefined"!==typeof MozWebSocket?uo=MozWebSocket:"undefined"!==typeof WebSocket&&(uo=WebSocket);var so=function(){function e(t,n,r,i,a,o,u){h(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ea(this.connId),this.stats_=no(n),this.connURL=e.connectionURL_(n,o,u,i,r),this.nodeAdmin=n.nodeAdmin}return y(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,va.set("previous_websocket_failure",!0);try{var r;if(sr()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(Qa,"/").concat(la,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new uo(this.connURL,[],r)}catch(s){this.log_("Error instantiating WebSocket.");var u=s.message||s.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){va.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=pr(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(Qn(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=vr(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=La(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=Qa,!sr()&&"undefined"!==typeof location&&location.hostname&&Ha.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a[Ga]=r),i&&(a.p=i),Ja(e,$a,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==uo&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return va.isInMemoryStorage||!0===va.get("previous_websocket_failure")}}]),e}();so.responsesRequiredToBeHealthy=2,so.healthyTimeout=3e4;var co=function(){function e(t){h(this,e),this.initTransports_(t)}return y(e,[{key:"initTransports_",value:function(t){var n=so&&so.isAvailable(),r=n&&!so.previouslyFailed();if(t.webSocketOnly&&(n||Ia("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[so];else{var i,a=this.transports_=[],o=E(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var u=i.value;u&&u.isAvailable()&&a.push(u)}}catch(s){o.e(s)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[ao,so]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();co.globalTransportInitialized_=!1;var lo=function(){function e(t,n,r,i,a,o,u,s,c,l){h(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=u,this.onDisconnect_=s,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ea("c:"+this.id+":"),this.transportManager_=new co(n),this.log_("Connection created"),this.start_()}return y(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=qa((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=Ra("t",e),n=Ra("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=Ra("t",e),n=Ra("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=Ra("t",e);if("d"in e){var n=e.d;if("h"===t){var r=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Ca("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ca("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Qa!==n&&Ia("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),qa((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):qa((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(va.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),fo=function(){function e(){h(this,e)}return y(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),ho=function(){function e(t){h(this,e),this.allowedEvents_=t,this.listeners_={},Qn(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return y(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=f(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){Qn(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),po=function(e){g(n,e);var t=_(n);function n(){var e;return h(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||ur()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return y(n,[{key:"getInitialEvent",value:function(e){return Qn("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(ho),vo=32,yo=768,mo=function(){function e(t,n){if(h(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return y(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function go(){return new mo("")}function ko(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function bo(e){return e.pieces_.length-e.pieceNum_}function wo(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new mo(e.pieces_,t)}function _o(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function xo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function So(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new mo(t,0)}function Eo(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof mo)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new mo(n,0)}function Co(e){return e.pieceNum_>=e.pieces_.length}function To(e,t){var n=ko(e),r=ko(t);if(null===n)return t;if(n===r)return To(wo(e),wo(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Io(e,t){for(var n=xo(e,0),r=xo(t,0),i=0;i<n.length&&i<r.length;i++){var a=Oa(n[i],r[i]);if(0!==a)return a}return n.length===r.length?0:n.length<r.length?-1:1}function Ao(e,t){if(bo(e)!==bo(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function No(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(bo(e)>bo(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Do=y((function e(t,n){h(this,e),this.errorPrefix_=n,this.parts_=xo(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=Dr(this.parts_[r]);Oo(this)}));function Oo(e){if(e.byteLength_>yo)throw new Error(e.errorPrefix_+"has a key path longer than "+yo+" bytes ("+e.byteLength_+").");if(e.parts_.length>vo)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+vo+") or object contains a cycle "+Po(e))}function Po(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var Ro=function(e){g(n,e);var t=_(n);function n(){var e,r,i;return h(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return y(n,[{key:"getInitialEvent",value:function(e){return Qn("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(ho),Fo=1e3,Lo=function(e){g(n,e);var t=_(n);function n(e,r,i,a,o,u,s,c){var l;if(h(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=u,l.appCheckTokenProvider_=s,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=Ea("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=Fo,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!sr())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Ro.getInstance().on("visible",l.onVisible_,w(l)),-1===e.host.indexOf("fblocal")&&po.getInstance().on("online",l.onOnline_,w(l)),l}return y(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(vr(i)),Qn(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new ir,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),Qn(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Qn(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var u=o.d,s=o.s;n.warnOnListenWarnings_(u,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==s&&t.removeListen_(i,a),e.onComplete&&e.onComplete(s,u))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=yr(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=yr(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Qn(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+vr(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Ca("Unrecognized action received from server: "+vr(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;Qn(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Fo,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Fo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Fo),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=Bn(Un().mark((function e(){var t,r,i,a,o,u,s,l,f,h,d,p,v,y,m=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,u=!1,s=null,l=function(){s?s.close():(u=!0,i())},f=function(e){Qn(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)},this.realtime_={close:l,sendRequest:f},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);case 19:d=e.sent,p=c(d,2),v=p[0],y=p[1],u?Sa("getToken() completed but was canceled"):(Sa("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=y&&y.token,s=new lo(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){Ia(e+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),u||(this.repoInfo_.nodeAdmin&&Ia(e.t0),l());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){Sa("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){Sa("Resuming connection for reason: "+e),delete this.interruptReasons_[e],kr(this.interruptReasons_)&&(this.reconnectDelay_=Fo,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return Fa(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new mo(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){Sa("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){Sa("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=E(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=E(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){t.e(s)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}},{key:"sendConnectStats_",value:function(){var e={},t="js";sr()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+la.replace(/\./g,"-")]=1,ur()?e["framework.cordova"]=1:"object"===typeof navigator&&"ReactNative"===navigator.product&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=po.getInstance().currentlyOnline();return kr(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&mr(e,"w")){var n=gr(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();Ia("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(fo);Lo.nextPersistentConnectionId_=0,Lo.nextConnectionId_=0;var jo,Mo=function(){function e(t,n){h(this,e),this.name=t,this.node=n}return y(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),Uo=function(){function e(){h(this,e)}return y(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new Mo(Na,e),r=new Mo(Na,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return Mo.MIN}}]),e}(),Vo=function(e){g(n,e);var t=_(n);function n(){return h(this,n),t.apply(this,arguments)}return y(n,[{key:"compare",value:function(e,t){return Oa(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw Hn("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return Mo.MIN}},{key:"maxPost",value:function(){return new Mo(Da,jo)}},{key:"makePost",value:function(e,t){return Qn("string"===typeof e,"KeyIndex indexValue must always be a string."),new Mo(e,jo)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return jo},set:function(e){jo=e}}]),n}(Uo),Bo=new Vo,qo=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;h(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return y(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),zo=function(){function e(t,n,r,i,a){h(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:Qo.EMPTY_NODE,this.right=null!=a?a:Qo.EMPTY_NODE}return y(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return Qo.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Qo.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();zo.RED=!0,zo.BLACK=!1;var Wo,Ko=function(){function e(){h(this,e)}return y(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new zo(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),Qo=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;h(this,e),this.comparator_=t,this.root_=n}return y(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,zo.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,zo.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new qo(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new qo(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new qo(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new qo(this.root_,null,this.comparator_,!0,e)}}]),e}();function Ho(e,t){return Oa(e.name,t.name)}function Go(e,t){return Oa(e,t)}Qo.EMPTY_NODE=new Ko;var $o,Yo,Xo,Jo=function(e){return"number"===typeof e?"number:"+Ma(e):"string:"+e},Zo=function(e){if(e.isLeafNode()){var t=e.val();Qn("string"===typeof t||"number"===typeof t||"object"===typeof t&&mr(t,".sv"),"Priority must be a string or number.")}else Qn(e===Wo||e.isEmpty(),"priority of unexpected type.");Qn(e===Wo||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},eu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;h(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,Qn(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Zo(this.priorityNode_)}return y(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return Co(t)?this:".priority"===ko(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=ko(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Qn(".priority"!==r||1===bo(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(wo(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+Jo(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?Ma(this.value_):this.value_,this.lazyHash_=ka(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(Qn(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return Qn(i>=0,"Unknown leaf type: "+n),Qn(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return $o},set:function(e){$o=e}}]),e}();eu.VALUE_TYPE_ORDER=["object","boolean","number","string"];var tu,nu,ru=function(e){g(n,e);var t=_(n);function n(){return h(this,n),t.apply(this,arguments)}return y(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Oa(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return Mo.MIN}},{key:"maxPost",value:function(){return new Mo(Da,new eu("[PRIORITY-POST]",Xo))}},{key:"makePost",value:function(e,t){var n=Yo(e);return new Mo(t,new eu("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(Uo),iu=new ru,au=Math.log(2),ou=function(){function e(t){h(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/au,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return y(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),uu=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,u=i-r;if(0===u)return null;if(1===u)return a=e[r],o=n?n(a):a,new zo(o,a.node,zo.BLACK,null,null);var s=parseInt(u/2,10)+r,c=t(r,s),l=t(s+1,i);return a=e[s],o=n?n(a):a,new zo(o,a.node,zo.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,u=function(t,r){var a=o-t,u=o;o-=t;var c=i(a+1,u),l=e[a],f=n?n(l):l;s(new zo(f,l.node,r,null,c))},s=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),f=Math.pow(2,t.count-(c+1));l?u(f,zo.BLACK):(u(f,zo.BLACK),u(f,zo.RED))}return a}(new ou(e.length));return new Qo(r||t,a)},su={},cu=function(){function e(t,n){h(this,e),this.indexes_=t,this.indexSet_=n}return y(e,[{key:"get",value:function(e){var t=gr(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Qo?t:null}},{key:"hasIndex",value:function(e){return mr(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){Qn(t!==Bo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(Mo.Wrap),u=o.getNext();u;)a=a||t.isDefinedOn(u.node),i.push(u),u=o.getNext();r=a?uu(i,t.getCompare()):su;var s=t.toString(),c=Object.assign({},this.indexSet_);c[s]=t;var l=Object.assign({},this.indexes_);return l[s]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(br(this.indexes_,(function(e,i){var a=gr(r.indexSet_,i);if(Qn(a,"Missing index implementation for "+i),e===su){if(a.isDefinedOn(t.node)){for(var o=[],u=n.getIterator(Mo.Wrap),s=u.getNext();s;)s.name!==t.name&&o.push(s),s=u.getNext();return o.push(t),uu(o,a.getCompare())}return su}var c=n.get(t.name),l=e;return c&&(l=l.remove(new Mo(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(br(this.indexes_,(function(e){if(e===su)return e;var r=n.get(t.name);return r?e.remove(new Mo(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return Qn(su&&iu,"ChildrenNode.ts has not been loaded"),tu=tu||new e({".priority":su},{".priority":iu})}}]),e}(),lu=function(){function e(t,n,r){h(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Zo(this.priorityNode_),this.children_.isEmpty()&&Qn(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return y(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||nu}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?nu:t}},{key:"getChild",value:function(e){var t=ko(e);return null===t?this:this.getImmediateChild(t).getChild(wo(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(Qn(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new Mo(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?nu:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=ko(e);if(null===n)return t;Qn(".priority"!==ko(e)||1===bo(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(wo(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(iu,(function(o,u){n[o]=u.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var u in n)o[u]=n[u];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+Jo(this.getPriority().val())+":"),this.forEachChild(iu,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":ka(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Mo(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new Mo(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new Mo(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,Mo.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,Mo.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===fu?-1:0}},{key:"withIndex",value:function(t){if(t===Bo||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===Bo||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(iu),r=t.getIterator(iu),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===Bo?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return nu||(nu=new e(new Qo(Go),null,cu.Default))}}]),e}();lu.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var fu=new(function(e){g(n,e);var t=_(n);function n(){return h(this,n),t.call(this,new Qo(Go),lu.EMPTY_NODE,cu.Default)}return y(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return lu.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(lu));Object.defineProperties(Mo,{MIN:{value:new Mo(Na,lu.EMPTY_NODE)},MAX:{value:new Mo(Da,fu)}}),Vo.__EMPTY_NODE=lu.EMPTY_NODE,eu.__childrenNodeConstructor=lu,Wo=fu,function(e){Xo=e}(fu);var hu=!0;function du(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return lu.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Qn(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e)return new eu(e,du(t));if(e instanceof Array||!hu){var n=lu.EMPTY_NODE;return ja(e,(function(t,r){if(mr(e,t)&&"."!==t.substring(0,1)){var i=du(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}})),n.updatePriority(du(t))}var r=[],i=!1;if(ja(e,(function(e,t){if("."!==e.substring(0,1)){var n=du(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Mo(e,n)))}})),0===r.length)return lu.EMPTY_NODE;var a=uu(r,Ho,(function(e){return e.name}),Go);if(i){var o=uu(r,iu.getCompare());return new lu(a,du(t),new cu({".priority":o},{".priority":iu}))}return new lu(a,du(t),cu.Default)}!function(e){Yo=e}(du);var pu=function(e){g(n,e);var t=_(n);function n(e){var r;return h(this,n),(r=t.call(this)).indexPath_=e,Qn(!Co(e)&&".priority"!==ko(e),"Can't create PathIndex with empty path or .priority key"),r}return y(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Oa(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=du(e),r=lu.EMPTY_NODE.updateChild(this.indexPath_,n);return new Mo(t,r)}},{key:"maxPost",value:function(){var e=lu.EMPTY_NODE.updateChild(this.indexPath_,fu);return new Mo(Da,e)}},{key:"toString",value:function(){return xo(this.indexPath_,0).join("/")}}]),n}(Uo),vu=function(e){g(n,e);var t=_(n);function n(){return h(this,n),t.apply(this,arguments)}return y(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?Oa(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return Mo.MIN}},{key:"maxPost",value:function(){return Mo.MAX}},{key:"makePost",value:function(e,t){var n=du(e);return new Mo(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(Uo),yu=new vu;function mu(e){return{type:"value",snapshotNode:e}}function gu(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function ku(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function bu(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var wu=function(){function e(t){h(this,e),this.index_=t}return y(e,[{key:"updateChild",value:function(e,t,n,r,i,a){Qn(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(ku(t,o)):Qn(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(gu(t,n)):a.trackChildChange(bu(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(iu,(function(e,r){t.hasChild(e)||n.trackChildChange(ku(e,r))})),t.isLeafNode()||t.forEachChild(iu,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(bu(t,r,i))}else n.trackChildChange(gu(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?lu.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),_u=function(){function e(t){h(this,e),this.indexedFilter_=new wu(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return y(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){var t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new Mo(t,n))||(n=lu.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=lu.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(lu.EMPTY_NODE);var i=this;return t.forEachChild(iu,(function(e,t){i.matches(new Mo(e,t))||(r=r.updateImmediateChild(e,lu.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),xu=function(){function e(t){var n=this;h(this,e),this.withinDirectionalStart=function(e){return n.reverse_?n.withinEndPost(e):n.withinStartPost(e)},this.withinDirectionalEnd=function(e){return n.reverse_?n.withinStartPost(e):n.withinEndPost(e)},this.withinStartPost=function(e){var t=n.index_.compare(n.rangedFilter_.getStartPost(),e);return n.startIsInclusive_?t<=0:t<0},this.withinEndPost=function(e){var t=n.index_.compare(e,n.rangedFilter_.getEndPost());return n.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new _u(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return y(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new Mo(t,n))||(n=lu.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=lu.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=lu.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(this.withinDirectionalStart(o)){if(!this.withinDirectionalEnd(o))break;r=r.updateImmediateChild(o.name,o.node),a++}}}else{var u;r=(r=t.withIndex(this.index_)).updatePriority(lu.EMPTY_NODE),u=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);for(var s=0;u.hasNext();){var c=u.getNext();s<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?s++:r=r.updateImmediateChild(c.name,lu.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var u=e;Qn(u.numChildren()===this.limit_,"");var s=new Mo(t,n),c=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),l=this.rangedFilter_.matches(s);if(u.hasChild(t)){for(var f=u.getImmediateChild(t),h=r.getChildAfterChild(this.index_,c,this.reverse_);null!=h&&(h.name===t||u.hasChild(h.name));)h=r.getChildAfterChild(this.index_,h,this.reverse_);var d=null==h?1:a(h,s);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(bu(t,n,f)),u.updateImmediateChild(t,n);null!=i&&i.trackChildChange(ku(t,f));var p=u.updateImmediateChild(t,lu.EMPTY_NODE);return null!=h&&this.rangedFilter_.matches(h)?(null!=i&&i.trackChildChange(gu(h.name,h.node)),p.updateImmediateChild(h.name,h.node)):p}return n.isEmpty()?e:l&&a(c,s)>=0?(null!=i&&(i.trackChildChange(ku(c.name,c.node)),i.trackChildChange(gu(t,n))),u.updateImmediateChild(t,n).updateImmediateChild(c.name,lu.EMPTY_NODE)):e}}]),e}(),Su=function(){function e(){h(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=iu}return y(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return Qn(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return Qn(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Na}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return Qn(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return Qn(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Da}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return Qn(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===iu}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function Eu(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Cu(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Tu(e,t){var n=e.copy();return n.index_=t,n}function Iu(e){var t,n={};if(e.isDefault())return n;if(e.index_===iu?t="$priority":e.index_===yu?t="$value":e.index_===Bo?t="$key":(Qn(e.index_ instanceof pu,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=vr(t),e.startSet_){var r=e.startAfterSet_?"startAfter":"startAt";n[r]=vr(e.indexStartValue_),e.startNameSet_&&(n[r]+=","+vr(e.indexStartName_))}if(e.endSet_){var i=e.endBeforeSet_?"endBefore":"endAt";n[i]=vr(e.indexEndValue_),e.endNameSet_&&(n[i]+=","+vr(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function Au(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==iu&&(t.i=e.index_.toString()),t}var Nu=function(e){g(n,e);var t=_(n);function n(e,r,i,a){var o;return h(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=Ea("p:rest:"),o.listens_={},o}return y(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var u=n.getListenId_(e,r),s={};this.listens_[u]=s;var c=Iu(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),gr(a.listens_,u)===s)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=Iu(e._queryParams),r=e._path.toString(),i=new ir;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=c(i,2),o=a[0],u=a[1];o&&o.accessToken&&(n.auth=o.accessToken),u&&u.token&&(n.ac=u.token);var s=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+function(e){for(var t=[],n=function(){var e=c(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}(n);t.log_("Sending REST request for "+s);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(r&&4===l.readyState){t.log_("REST Response for "+s+" received. status:",l.status,"response:",l.responseText);var e=null;if(l.status>=200&&l.status<300){try{e=pr(l.responseText)}catch(n){Ia("Failed to parse JSON response for "+s+": "+l.responseText)}r(null,e)}else 401!==l.status&&404!==l.status&&Ia("Got unsuccessful REST response for "+s+" Status: "+l.status),r(l.status);r=null}},l.open("GET",s,!0),l.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(Qn(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(fo),Du=function(){function e(){h(this,e),this.rootNode_=lu.EMPTY_NODE}return y(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function Ou(){return{value:null,children:new Map}}function Pu(e,t,n){if(Co(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=ko(t);e.children.has(r)||e.children.set(r,Ou()),Pu(e.children.get(r),t=wo(t),n)}}function Ru(e,t){if(Co(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(iu,(function(t,n){Pu(e,new mo(t),n)})),Ru(e,t)}if(e.children.size>0){var r=ko(t);if(t=wo(t),e.children.has(r))Ru(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function Fu(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){Fu(r,new mo(t.toString()+"/"+e),n)}))}var Lu,ju=function(){function e(t){h(this,e),this.collection_=t,this.last_=null}return y(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ja(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),Mu=function(){function e(t,n){h(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new ju(t);var r=1e4+2e4*Math.random();qa(this.reportStats_.bind(this),Math.floor(r))}return y(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;ja(t,(function(t,i){i>0&&mr(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),qa(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function Uu(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Lu||(Lu={}));var Vu,Bu=function(){function e(t,n,r){h(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=Lu.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return y(e,[{key:"operationForChild",value:function(t){if(Co(this.path)){if(null!=this.affectedTree.value)return Qn(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new mo(t));return new e(go(),n,this.revert)}return Qn(ko(this.path)===t,"operationForChild called for unrelated child."),new e(wo(this.path),this.affectedTree,this.revert)}}]),e}(),qu=function(){function e(t,n){h(this,e),this.source=t,this.path=n,this.type=Lu.LISTEN_COMPLETE}return y(e,[{key:"operationForChild",value:function(t){return Co(this.path)?new e(this.source,go()):new e(this.source,wo(this.path))}}]),e}(),zu=function(){function e(t,n,r){h(this,e),this.source=t,this.path=n,this.snap=r,this.type=Lu.OVERWRITE}return y(e,[{key:"operationForChild",value:function(t){return Co(this.path)?new e(this.source,go(),this.snap.getImmediateChild(t)):new e(this.source,wo(this.path),this.snap)}}]),e}(),Wu=function(){function e(t,n,r){h(this,e),this.source=t,this.path=n,this.children=r,this.type=Lu.MERGE}return y(e,[{key:"operationForChild",value:function(t){if(Co(this.path)){var n=this.children.subtree(new mo(t));return n.isEmpty()?null:n.value?new zu(this.source,go(),n.value):new e(this.source,go(),n)}return Qn(ko(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,wo(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),Ku=function(){function e(t,n,r){h(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return y(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(Co(e))return this.isFullyInitialized()&&!this.filtered_;var t=ko(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),Qu=y((function e(t){h(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function Hu(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw Hn("Should only compare child_ events.");var r=new Mo(t.childName,t.snapshotNode),i=new Mo(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function Gu(e,t){return{eventCache:e,serverCache:t}}function $u(e,t,n,r){return Gu(new Ku(t,n,r),e.serverCache)}function Yu(e,t,n,r){return Gu(e.eventCache,new Ku(t,n,r))}function Xu(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Ju(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var Zu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(Vu||(Vu=new Qo(Pa)),Vu);h(this,e),this.value=t,this.children=n}return y(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:go(),value:this.value};if(Co(e))return null;var n=ko(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(wo(e),t);return null!=i?{path:Eo(new mo(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(Co(t))return this;var n=ko(t),r=this.children.get(n);return null!==r?r.subtree(wo(t)):new e(null)}},{key:"set",value:function(t,n){if(Co(t))return new e(n,this.children);var r=ko(t),i=(this.children.get(r)||new e(null)).set(wo(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(Co(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=ko(t),r=this.children.get(n);if(r){var i,a=r.remove(wo(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(Co(e))return this.value;var t=ko(e),n=this.children.get(t);return n?n.get(wo(e)):null}},{key:"setTree",value:function(t,n){if(Co(t))return n;var r,i=ko(t),a=(this.children.get(i)||new e(null)).setTree(wo(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(go(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(Eo(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,go(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(Co(e))return null;var i=ko(e),a=this.children.get(i);return a?a.findOnPath_(wo(e),Eo(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,go(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(Co(t))return this;this.value&&r(n,this.value);var i=ko(t),a=this.children.get(i);return a?a.foreachOnPath_(wo(t),Eo(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(go(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(Eo(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return ja(t,(function(e,t){n=n.set(new mo(e),t)})),n}}]),e}(),es=function(){function e(t){h(this,e),this.writeTree_=t}return y(e,null,[{key:"empty",value:function(){return new e(new Zu(null))}}]),e}();function ts(e,t,n){if(Co(t))return new es(new Zu(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=To(i,t);return a=a.updateChild(o,n),new es(e.writeTree_.set(i,a))}var u=new Zu(n),s=e.writeTree_.setTree(t,u);return new es(s)}function ns(e,t,n){var r=e;return ja(n,(function(e,n){r=ts(r,Eo(t,e),n)})),r}function rs(e,t){if(Co(t))return es.empty();var n=e.writeTree_.setTree(t,new Zu(null));return new es(n)}function is(e,t){return null!=as(e,t)}function as(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(To(n.path,t)):null}function os(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(iu,(function(e,n){t.push(new Mo(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Mo(e,n.value))})),t}function us(e,t){if(Co(t))return e;var n=as(e,t);return new es(null!=n?new Zu(n):e.writeTree_.subtree(t))}function ss(e){return e.writeTree_.isEmpty()}function cs(e,t){return ls(go(),e.writeTree_,t)}function ls(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(Qn(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=ls(Eo(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Eo(e,".priority"),r)),n}function fs(e,t){return Ss(t,e)}function hs(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));Qn(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var u=e.allWrites[o];u.visible&&(o>=n&&ds(u,r.path)?i=!1:No(r.path,u.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=vs(e.allWrites,ps,go()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=rs(e.visibleWrites,r.path):ja(r.children,(function(t){e.visibleWrites=rs(e.visibleWrites,Eo(r.path,t))}));return!0}return!1}function ds(e,t){if(e.snap)return No(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&No(Eo(e.path,n),t))return!0;return!1}function ps(e){return e.visible}function vs(e,t,n){for(var r=es.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,u=void 0;if(a.snap)No(n,o)?r=ts(r,u=To(n,o),a.snap):No(o,n)&&(u=To(o,n),r=ts(r,go(),a.snap.getChild(u)));else{if(!a.children)throw Hn("WriteRecord should have .snap or .children");if(No(n,o))r=ns(r,u=To(n,o),a.children);else if(No(o,n))if(Co(u=To(o,n)))r=ns(r,go(),a.children);else{var s=gr(a.children,ko(u));if(s){var c=s.getChild(wo(u));r=ts(r,go(),c)}}}}}return r}function ys(e,t,n,r,i){if(r||i){var a=us(e.visibleWrites,t);if(!i&&ss(a))return n;if(i||null!=n||is(a,go())){return cs(vs(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(No(e.path,t)||No(t,e.path))}),t),n||lu.EMPTY_NODE)}return null}var o=as(e.visibleWrites,t);if(null!=o)return o;var u=us(e.visibleWrites,t);return ss(u)?n:null!=n||is(u,go())?cs(u,n||lu.EMPTY_NODE):null}function ms(e,t,n,r){return ys(e.writeTree,e.treePath,t,n,r)}function gs(e,t){return function(e,t,n){var r=lu.EMPTY_NODE,i=as(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(iu,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=us(e.visibleWrites,t);return n.forEachChild(iu,(function(e,t){var n=cs(us(a,new mo(e)),t);r=r.updateImmediateChild(e,n)})),os(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return os(us(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function ks(e,t,n,r){return function(e,t,n,r,i){Qn(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=Eo(t,n);if(is(e.visibleWrites,a))return null;var o=us(e.visibleWrites,a);return ss(o)?i.getChild(n):cs(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function bs(e,t){return function(e,t){return as(e.visibleWrites,t)}(e.writeTree,Eo(e.treePath,t))}function ws(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var u,s=us(e.visibleWrites,t),c=as(s,go());if(null!=c)u=c;else{if(null==n)return[];u=cs(s,n)}if((u=u.withIndex(o)).isEmpty()||u.isLeafNode())return[];for(var l=[],f=o.getCompare(),h=a?u.getReverseIteratorFrom(r,o):u.getIteratorFrom(r,o),d=h.getNext();d&&l.length<i;)0!==f(d,r)&&l.push(d),d=h.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function _s(e,t,n){return function(e,t,n,r){var i=Eo(t,n),a=as(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?cs(us(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function xs(e,t){return Ss(Eo(e.treePath,t),e.writeTree)}function Ss(e,t){return{treePath:e,writeTree:t}}var Es=function(){function e(){h(this,e),this.changeMap=new Map}return y(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;Qn("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Qn(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,bu(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,ku(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,gu(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Hn("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,bu(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),Cs=new(function(){function e(){h(this,e)}return y(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),Ts=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;h(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return y(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new Ku(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return _s(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ju(this.viewCache_),i=ws(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function Is(e,t,n,r,i){var a,o,u=new Es;if(n.type===Lu.OVERWRITE){var s=n;s.source.fromUser?a=Ds(e,t,s.path,s.snap,r,i,u):(Qn(s.source.fromServer,"Unknown source."),o=s.source.tagged||t.serverCache.isFiltered()&&!Co(s.path),a=Ns(e,t,s.path,s.snap,r,i,o,u))}else if(n.type===Lu.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var u=t;return r.foreach((function(r,s){var c=Eo(n,r);Os(t,ko(c))&&(u=Ds(e,u,c,s,i,a,o))})),r.foreach((function(r,s){var c=Eo(n,r);Os(t,ko(c))||(u=Ds(e,u,c,s,i,a,o))})),u}(e,t,c.path,c.children,r,i,u):(Qn(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=Rs(e,t,c.path,c.children,r,i,o,u))}else if(n.type===Lu.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=bs(r,n))return t;var u,s=new Ts(r,t,i),c=t.eventCache.getNode();if(Co(n)||".priority"===ko(n)){var l;if(t.serverCache.isFullyInitialized())l=ms(r,Ju(t));else{var f=t.serverCache.getNode();Qn(f instanceof lu,"serverChildren would be complete if leaf node"),l=gs(r,f)}u=e.filter.updateFullNode(c,l,a)}else{var h=ko(n),d=_s(r,h,t.serverCache);null==d&&t.serverCache.isCompleteForChild(h)&&(d=c.getImmediateChild(h)),(u=null!=d?e.filter.updateChild(c,h,d,wo(n),s,a):t.eventCache.getNode().hasChild(h)?e.filter.updateChild(c,h,lu.EMPTY_NODE,wo(n),s,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=ms(r,Ju(t))).isLeafNode()&&(u=e.filter.updateFullNode(u,o,a))}return o=t.serverCache.isFullyInitialized()||null!=bs(r,go()),$u(t,u,o,e.filter.filtersNodes())}(e,t,l.path,r,i,u):function(e,t,n,r,i,a,o){if(null!=bs(i,n))return t;var u=t.serverCache.isFiltered(),s=t.serverCache;if(null!=r.value){if(Co(n)&&s.isFullyInitialized()||s.isCompleteForPath(n))return Ns(e,t,n,s.getNode().getChild(n),i,a,u,o);if(Co(n)){var c=new Zu(null);return s.getNode().forEachChild(Bo,(function(e,t){c=c.set(new mo(e),t)})),Rs(e,t,n,c,i,a,u,o)}return t}var l=new Zu(null);return r.foreach((function(e,t){var r=Eo(n,e);s.isCompleteForPath(r)&&(l=l.set(e,s.getNode().getChild(r)))})),Rs(e,t,n,l,i,a,u,o)}(e,t,l.path,l.affectedTree,r,i,u)}else{if(n.type!==Lu.LISTEN_COMPLETE)throw Hn("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=Yu(t,a.getNode(),a.isFullyInitialized()||Co(n),a.isFiltered());return As(e,o,n,r,Cs,i)}(e,t,n.path,r,u)}var f=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=Xu(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(mu(Xu(t)))}}(t,a,f),{viewCache:a,changes:f}}function As(e,t,n,r,i,a){var o,u,s=t.eventCache;if(null!=bs(r,n))return t;if(Co(n))if(Qn(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=Ju(t),l=gs(r,c instanceof lu?c:lu.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var f=ms(r,Ju(t));o=e.filter.updateFullNode(t.eventCache.getNode(),f,a)}else{var h=ko(n);if(".priority"===h){Qn(1===bo(n),"Can't have a priority with additional path components");var d=s.getNode(),p=ks(r,n,d,u=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):s.getNode()}else{var v,y=wo(n);if(s.isCompleteForChild(h)){u=t.serverCache.getNode();var m=ks(r,n,s.getNode(),u);v=null!=m?s.getNode().getImmediateChild(h).updateChild(y,m):s.getNode().getImmediateChild(h)}else v=_s(r,h,t.serverCache);o=null!=v?e.filter.updateChild(s.getNode(),h,v,y,i,a):s.getNode()}}return $u(t,o,s.isFullyInitialized()||Co(n),e.filter.filtersNodes())}function Ns(e,t,n,r,i,a,o,u){var s,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(Co(n))s=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var f=c.getNode().updateChild(n,r);s=l.updateFullNode(c.getNode(),f,null)}else{var h=ko(n);if(!c.isCompleteForPath(n)&&bo(n)>1)return t;var d=wo(n),p=c.getNode().getImmediateChild(h).updateChild(d,r);s=".priority"===h?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),h,p,d,Cs,null)}var v=Yu(t,s,c.isFullyInitialized()||Co(n),l.filtersNodes());return As(e,v,n,i,new Ts(i,v,a),u)}function Ds(e,t,n,r,i,a,o){var u,s,c=t.eventCache,l=new Ts(i,t,a);if(Co(n))s=e.filter.updateFullNode(t.eventCache.getNode(),r,o),u=$u(t,s,!0,e.filter.filtersNodes());else{var f=ko(n);if(".priority"===f)s=e.filter.updatePriority(t.eventCache.getNode(),r),u=$u(t,s,c.isFullyInitialized(),c.isFiltered());else{var h,d=wo(n),p=c.getNode().getImmediateChild(f);if(Co(d))h=r;else{var v=l.getCompleteChild(f);h=null!=v?".priority"===_o(d)&&v.getChild(So(d)).isEmpty()?v:v.updateChild(d,r):lu.EMPTY_NODE}if(p.equals(h))u=t;else u=$u(t,e.filter.updateChild(c.getNode(),f,h,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return u}function Os(e,t){return e.eventCache.isCompleteForChild(t)}function Ps(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function Rs(e,t,n,r,i,a,o,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var s,c=t;s=Co(n)?r:new Zu(null).setTree(n,r);var l=t.serverCache.getNode();return s.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var s=Ps(0,t.serverCache.getNode().getImmediateChild(n),r);c=Ns(e,c,new mo(n),s,i,a,o,u)}})),s.children.inorderTraversal((function(n,r){var s=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!l.hasChild(n)&&!s){var f=Ps(0,t.serverCache.getNode().getImmediateChild(n),r);c=Ns(e,c,new mo(n),f,i,a,o,u)}})),c}var Fs,Ls=function(){function e(t,n){h(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new wu(i.getIndex()),o=(r=i).loadsAllData()?new wu(r.getIndex()):r.hasLimit()?new xu(r):new _u(r);this.processor_=function(e){return{filter:e}}(o);var u=n.serverCache,s=n.eventCache,c=a.updateFullNode(lu.EMPTY_NODE,u.getNode(),null),l=o.updateFullNode(lu.EMPTY_NODE,s.getNode(),null),f=new Ku(c,u.isFullyInitialized(),a.filtersNodes()),d=new Ku(l,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=Gu(d,f),this.eventGenerator_=new Qu(this.query_)}return y(e,[{key:"query",get:function(){return this.query_}}]),e}();function js(e,t){var n=Ju(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Co(t)&&!n.getImmediateChild(ko(t)).isEmpty())?n.getChild(t):null}function Ms(e){return 0===e.eventRegistrations_.length}function Us(e,t,n){var r=[];if(n){Qn(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var u=e.eventRegistrations_[o];if(u.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(u)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function Vs(e,t,n,r){t.type===Lu.MERGE&&null!==t.source.queryId&&(Qn(Ju(e.viewCache_),"We should always have a full cache before handling merges"),Qn(Xu(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,u=Is(e.processor_,o,t,n,r);return i=e.processor_,a=u.viewCache,Qn(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Qn(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Qn(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=u.viewCache,Bs(e,u.changes,u.viewCache.eventCache.getNode(),null)}function Bs(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Hu(e,i,"child_removed",t,r,n),Hu(e,i,"child_added",t,r,n),Hu(e,i,"child_moved",a,r,n),Hu(e,i,"child_changed",t,r,n),Hu(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var qs,zs=y((function e(){h(this,e),this.views=new Map}));function Ws(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return Qn(null!=a,"SyncTree gave us an op for an invalid query."),Vs(a,t,n,r)}var o,u=[],s=E(e.views.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u=u.concat(Vs(c,t,n,r))}}catch(l){s.e(l)}finally{s.f()}return u}function Ks(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var u=ms(n,i?r:null),s=!1;u?s=!0:r instanceof lu?(u=gs(n,r),s=!1):(u=lu.EMPTY_NODE,s=!1);var c=Gu(new Ku(u,s,!1),new Ku(r,i,!1));return new Ls(t,c)}return o}function Qs(e,t,n,r,i,a){var o=Ks(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(iu,(function(e,t){r.push(gu(e,t))})),n.isFullyInitialized()&&r.push(mu(n.getNode())),Bs(e,r,n.getNode(),t)}(o,n)}function Hs(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],u=Js(e);if("default"===i){var s,l=E(e.views.entries());try{for(l.s();!(s=l.n()).done;){var f=c(s.value,2),h=f[0],d=f[1];o=o.concat(Us(d,n,r)),Ms(d)&&(e.views.delete(h),d.query._queryParams.loadsAllData()||a.push(d.query))}}catch(v){l.e(v)}finally{l.f()}}else{var p=e.views.get(i);p&&(o=o.concat(Us(p,n,r)),Ms(p)&&(e.views.delete(i),p.query._queryParams.loadsAllData()||a.push(p.query)))}return u&&!Js(e)&&a.push(new(Qn(Fs,"Reference.ts has not been loaded"),Fs)(t._repo,t._path)),{removed:a,events:o}}function Gs(e){var t,n=[],r=E(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function $s(e,t){var n,r=null,i=E(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||js(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function Ys(e,t){if(t._queryParams.loadsAllData())return Zs(e);var n=t._queryIdentifier;return e.views.get(n)}function Xs(e,t){return null!=Ys(e,t)}function Js(e){return null!=Zs(e)}function Zs(e){var t,n=E(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var ec=1,tc=y((function e(t){h(this,e),this.listenProvider_=t,this.syncPointTree_=new Zu(null),this.pendingWriteTree_={visibleWrites:es.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function nc(e,t,n,r,i){return function(e,t,n,r,i){Qn(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=ts(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?fc(e,new zu({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function rc(e,t,n,r){!function(e,t,n,r){Qn(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=ns(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=Zu.fromObject(n);return fc(e,new Wu({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function ic(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(hs(e.pendingWriteTree_,t)){var i=new Zu(null);return null!=r.snap?i=i.set(go(),!0):ja(r.children,(function(e){i=i.set(new mo(e),!0)})),fc(e,new Bu(r.path,i,n))}return[]}function ac(e,t,n){return fc(e,new zu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function oc(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t._path,o=e.syncPointTree_.get(a),u=[];if(o&&("default"===t._queryIdentifier||Xs(o,t))){var s=Hs(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(a));var c=s.removed;if(u=s.events,!i){var l=-1!==c.findIndex((function(e){return e._queryParams.loadsAllData()})),f=e.syncPointTree_.findOnPath(a,(function(e,t){return Js(t)}));if(l&&!f){var h=e.syncPointTree_.subtree(a);if(!h.isEmpty())for(var d=function(e){return e.fold((function(e,t,n){if(t&&Js(t))return[Zs(t)];var r=[];return t&&(r=Gs(t)),ja(n,(function(e,t){r=r.concat(t)})),r}))}(h),p=0;p<d.length;++p){var v=d[p],y=v.query,m=pc(e,v);e.listenProvider_.startListening(bc(y),vc(e,y),m.hashFn,m.onComplete)}}if(!f&&c.length>0&&!r)if(l){e.listenProvider_.stopListening(bc(t),null)}else c.forEach((function(t){var n=e.queryToTagMap.get(yc(t));e.listenProvider_.stopListening(bc(t),n)}))}!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=yc(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}(e,c)}return u}function uc(e,t,n,r){var i=mc(e,r);if(null!=i){var a=gc(i),o=a.path,u=a.queryId,s=To(o,t);return kc(e,o,new zu(Uu(u),s,n))}return[]}function sc(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t._path,a=null,o=!1;e.syncPointTree_.foreachOnPath(i,(function(e,t){var n=To(e,i);a=a||$s(t,n),o=o||Js(t)}));var u,s=e.syncPointTree_.get(i);(s?(o=o||Js(s),a=a||$s(s,go())):(s=new zs,e.syncPointTree_=e.syncPointTree_.set(i,s)),null!=a)?u=!0:(u=!1,a=lu.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((function(e,t){var n=$s(t,go());n&&(a=a.updateImmediateChild(e,n))})));var c=Xs(s,t);if(!c&&!t._queryParams.loadsAllData()){var l=yc(t);Qn(!e.queryToTagMap.has(l),"View does not exist, but we have a tag");var f=ec++;e.queryToTagMap.set(l,f),e.tagToQueryMap.set(f,l)}var h=Qs(s,t,n,fs(e.pendingWriteTree_,i),a,u);if(!c&&!o&&!r){var d=Ys(s,t);h=h.concat(function(e,t,n){var r=t._path,i=vc(e,t),a=pc(e,n),o=e.listenProvider_.startListening(bc(t),i,a.hashFn,a.onComplete),u=e.syncPointTree_.subtree(r);if(i)Qn(!Js(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var s=u.fold((function(e,t,n){if(!Co(e)&&t&&Js(t))return[Zs(t).query];var r=[];return t&&(r=r.concat(Gs(t).map((function(e){return e.query})))),ja(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<s.length;++c){var l=s[c];e.listenProvider_.stopListening(bc(l),vc(e,l))}return o}(e,t,d))}return h}function cc(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=$s(n,To(e,t));if(r)return r}));return ys(r,t,i,n,!0)}function lc(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=To(e,n);r=r||$s(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||$s(i,go()):(i=new zs,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new Ku(r,!0,!1):null;return function(e){return Xu(e.viewCache_)}(Ks(i,t,fs(e.pendingWriteTree_,t._path),a?o.getNode():lu.EMPTY_NODE,a))}function fc(e,t){return hc(t,e.syncPointTree_,null,fs(e.pendingWriteTree_,go()))}function hc(e,t,n,r){if(Co(e.path))return dc(e,t,n,r);var i=t.get(go());null==n&&null!=i&&(n=$s(i,go()));var a=[],o=ko(e.path),u=e.operationForChild(o),s=t.children.get(o);if(s&&u){var c=n?n.getImmediateChild(o):null,l=xs(r,o);a=a.concat(hc(u,s,c,l))}return i&&(a=a.concat(Ws(i,e,r,n))),a}function dc(e,t,n,r){var i=t.get(go());null==n&&null!=i&&(n=$s(i,go()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,u=xs(r,t),s=e.operationForChild(t);s&&(a=a.concat(dc(s,i,o,u)))})),i&&(a=a.concat(Ws(i,e,r,n))),a}function pc(e,t){var n=t.query,r=vc(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||lu.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=mc(e,n);if(r){var i=gc(r),a=i.path,o=i.queryId,u=To(a,t);return kc(e,a,new qu(Uu(o),u))}return[]}(e,n._path,r):function(e,t){return fc(e,new qu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return oc(e,n,null,i)}}}function vc(e,t){var n=yc(t);return e.queryToTagMap.get(n)}function yc(e){return e._path.toString()+"$"+e._queryIdentifier}function mc(e,t){return e.tagToQueryMap.get(t)}function gc(e){var t=e.indexOf("$");return Qn(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new mo(e.substr(0,t))}}function kc(e,t,n){var r=e.syncPointTree_.get(t);return Qn(r,"Missing sync point for query tag that we're tracking"),Ws(r,n,fs(e.pendingWriteTree_,t),null)}function bc(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Qn(qs,"Reference.ts has not been loaded"),qs)(e._repo,e._path):e}var wc=function(){function e(t){h(this,e),this.node_=t}return y(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),_c=function(){function e(t,n){h(this,e),this.syncTree_=t,this.path_=n}return y(e,[{key:"getImmediateChild",value:function(t){var n=Eo(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return cc(this.syncTree_,this.path_)}}]),e}(),xc=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},Sc=function(e,t,n){return e&&"object"===typeof e?(Qn(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?Ec(e[".sv"],t,n):"object"===typeof e[".sv"]?Cc(e[".sv"],t):void Qn(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Ec=function(e,t,n){if("timestamp"===e)return n.timestamp;Qn(!1,"Unexpected server value: "+e)},Cc=function(e,t,n){e.hasOwnProperty("increment")||Qn(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&Qn(!1,"Unexpected increment value: "+r);var i=t.node();if(Qn(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},Tc=function(e,t,n,r){return Ac(t,new _c(n,e),r)},Ic=function(e,t,n){return Ac(e,new wc(t),n)};function Ac(e,t,n){var r,i=e.getPriority().val(),a=Sc(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,u=Sc(o.getValue(),t,n);return u!==o.getValue()||a!==o.getPriority().val()?new eu(u,du(a)):e}var s=e;return r=s,a!==s.getPriority().val()&&(r=r.updatePriority(new eu(a))),s.forEachChild(iu,(function(e,i){var a=Ac(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var Nc=y((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};h(this,e),this.name=t,this.parent=n,this.node=r}));function Dc(e,t){for(var n=t instanceof mo?t:new mo(t),r=e,i=ko(n);null!==i;){var a=gr(r.node.children,i)||{children:{},childCount:0};r=new Nc(i,r,a),i=ko(n=wo(n))}return r}function Oc(e){return e.node.value}function Pc(e,t){e.node.value=t,Mc(e)}function Rc(e){return e.node.childCount>0}function Fc(e,t){ja(e.node.children,(function(n,r){t(new Nc(n,e,r))}))}function Lc(e,t,n,r){n&&!r&&t(e),Fc(e,(function(e){Lc(e,t,!0,r)})),n&&r&&t(e)}function jc(e){return new mo(null===e.parent?e.name:jc(e.parent)+"/"+e.name)}function Mc(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===Oc(e)&&!Rc(e)}(n),i=mr(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Mc(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Mc(e))}(e.parent,e.name,e)}var Uc=/[\[\].#$\/\u0000-\u001F\u007F]/,Vc=/[\[\].#$\u0000-\u001F\u007F]/,Bc=10485760,qc=function(e){return"string"===typeof e&&0!==e.length&&!Uc.test(e)},zc=function(e){return"string"===typeof e&&0!==e.length&&!Vc.test(e)},Wc=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!Aa(e)||e&&"object"===typeof e&&mr(e,".sv")},Kc=function(e,t,n,r){r&&void 0===t||Qc(Ir(e,"value"),t,n)},Qc=function e(t,n,r){var i=r instanceof mo?new Do(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+Po(i));if("function"===typeof n)throw new Error(t+"contains a function "+Po(i)+" with contents = "+n.toString());if(Aa(n))throw new Error(t+"contains "+n.toString()+" "+Po(i));if("string"===typeof n&&n.length>Bc/3&&Dr(n)>Bc)throw new Error(t+"contains a string greater than "+Bc+" utf8 bytes "+Po(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(ja(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!qc(n)))throw new Error(t+" contains an invalid key ("+n+") "+Po(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var u,s;s=n,(u=i).parts_.length>0&&(u.byteLength_+=1),u.parts_.push(s),u.byteLength_+=Dr(s),Oo(u),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=Dr(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+Po(i)+" in addition to actual children.")}},Hc=function(e,t,n,r){if(!r||void 0!==t){var i=Ir(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var a=[];ja(t,(function(e,t){var r=new mo(e);if(Qc(i,t,Eo(n,r)),".priority"===_o(r)&&!Wc(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=xo(r=t[n]),a=0;a<i.length;a++)if(".priority"===i[a]&&a===i.length-1);else if(!qc(i[a]))throw new Error(e+"contains an invalid key ("+i[a]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(Io);var o=null;for(n=0;n<t.length;n++){if(r=t[n],null!==o&&No(o,r))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(i,a)}},Gc=function(e,t,n){if(!n||void 0!==t){if(Aa(t))throw new Error(Ir(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Wc(t))throw new Error(Ir(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},$c=function(e,t,n,r){if((!r||void 0!==n)&&!qc(n))throw new Error(Ir(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Yc=function(e,t,n,r){if((!r||void 0!==n)&&!zc(n))throw new Error(Ir(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Xc=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Yc(e,t,n,r)},Jc=function(e,t){if(".info"===ko(t))throw new Error(e+" failed = Can't modify data under /.info/")},Zc=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!qc(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),zc(e)}(n))throw new Error(Ir(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},el=y((function e(){h(this,e),this.eventLists_=[],this.recursionDepth_=0}));function tl(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||Ao(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function nl(e,t,n){tl(e,n),il(e,(function(e){return Ao(e,t)}))}function rl(e,t,n){tl(e,n),il(e,(function(e){return No(e,t)||No(t,e)}))}function il(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(al(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function al(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();wa&&Sa("event: "+n.toString()),Ba(r)}}}var ol="repo_interrupt",ul=25,sl=function(){function e(t,n,r,i){h(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new el,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ou(),this.transactionQueueTree_=new Nc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return y(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function cl(e,t,n){if(e.stats_=no(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Nu(e.repoInfo_,(function(t,n,r,i){hl(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return dl(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{vr(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Lo(e.repoInfo_,t,(function(t,n,r,i){hl(e,t,n,r,i)}),(function(t){dl(e,t)}),(function(t){!function(e,t){ja(t,(function(t,n){pl(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return to[n]||(to[n]=t()),to[n]}(e.repoInfo_,(function(){return new Mu(e.stats_,e.server_)})),e.infoData_=new Du,e.infoSyncTree_=new tc({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=ac(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),pl(e,"connected",!1),e.serverSyncTree_=new tc({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);rl(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function ll(e){var t=e.infoData_.getNode(new mo(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function fl(e){return xc({timestamp:ll(e)})}function hl(e,t,n,r,i){e.dataUpdateCount++;var a=new mo(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var u=br(n,(function(e){return du(e)}));o=function(e,t,n,r){var i=mc(e,r);if(i){var a=gc(i),o=a.path,u=a.queryId,s=To(o,t),c=Zu.fromObject(n);return kc(e,o,new Wu(Uu(u),s,c))}return[]}(e.serverSyncTree_,a,u,i)}else{var s=du(n);o=uc(e.serverSyncTree_,a,s,i)}else if(r){var c=br(n,(function(e){return du(e)}));o=function(e,t,n){var r=Zu.fromObject(n);return fc(e,new Wu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=du(n);o=ac(e.serverSyncTree_,a,l)}var f=a;o.length>0&&(f=El(e,a)),rl(e.eventQueue_,f,o)}function dl(e,t){pl(e,"connected",t),!1===t&&function(e){wl(e,"onDisconnectEvents");var t=fl(e),n=Ou();Fu(e.onDisconnect_,go(),(function(r,i){var a=Tc(r,i,e.serverSyncTree_,t);Pu(n,r,a)}));var r=[];Fu(n,go(),(function(t,n){r=r.concat(ac(e.serverSyncTree_,t,n));var i=Nl(e,t);El(e,i)})),e.onDisconnect_=Ou(),rl(e.eventQueue_,go(),r)}(e)}function pl(e,t,n){var r=new mo("/.info/"+t),i=du(n);e.infoData_.updateSnapshot(r,i);var a=ac(e.infoSyncTree_,r,i);rl(e.eventQueue_,r,a)}function vl(e){return e.nextWriteId_++}function yl(e,t,n,r,i){wl(e,"set",{path:t.toString(),value:n,priority:r});var a=fl(e),o=du(n,r),u=cc(e.serverSyncTree_,t),s=Ic(o,u,a),c=vl(e),l=nc(e.serverSyncTree_,t,s,c,!0);tl(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||Ia("set at "+t+" failed: "+n);var o=ic(e.serverSyncTree_,c,!a);rl(e.eventQueue_,t,o),_l(e,i,n,r)}));var f=Nl(e,t);El(e,f),rl(e.eventQueue_,f,[])}function ml(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&Ru(e.onDisconnect_,t),_l(e,n,r,i)}))}function gl(e,t,n,r){var i=du(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,a){"ok"===n&&Pu(e.onDisconnect_,t,i),_l(e,r,n,a)}))}function kl(e,t,n){var r;r=".info"===ko(t._path)?oc(e.infoSyncTree_,t,n):oc(e.serverSyncTree_,t,n),nl(e.eventQueue_,t._path,r)}function bl(e){e.persistentConnection_&&e.persistentConnection_.interrupt(ol)}function wl(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Sa.apply(void 0,[t].concat(r))}function _l(e,t,n,r){t&&Ba((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function xl(e,t,n){return cc(e.serverSyncTree_,t,n)||lu.EMPTY_NODE}function Sl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||Al(e,t),Oc(t)){var n=Tl(e,t);Qn(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return 0===e.status}))&&function(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=xl(e,t,r),a=i,o=i.hash(),u=0;u<n.length;u++){var s=n[u];Qn(0===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;var c=To(t,s.path);a=a.updateChild(c,s.currentOutputSnapshotRaw)}var l=a.val(!0),f=t;e.server_.put(f.toString(),l,(function(r){wl(e,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(ic(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},u=0;u<n.length;u++)o(u);Al(e,Dc(e.transactionQueueTree_,t)),Sl(e,e.transactionQueueTree_),rl(e.eventQueue_,t,i);for(var s=0;s<a.length;s++)Ba(a[s])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{Ia("transaction at "+f.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}El(e,t)}}),o)}(e,jc(t),n)}else Rc(t)&&Fc(t,(function(t){Sl(e,t)}))}function El(e,t){var n=Cl(e,t),r=jc(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),u=function(a){var u,s,c=t[a],l=To(n,c.path),f=!1;if(Qn(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)f=!0,u=c.abortReason,i=i.concat(ic(e.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=ul)f=!0,u="maxretry",i=i.concat(ic(e.serverSyncTree_,c.currentWriteId,!0));else{var h=xl(e,c.path,o);c.currentInputSnapshot=h;var d=t[a].update(h.val());if(void 0!==d){Qc("transaction failed: Data returned ",d,c.path);var p=du(d);"object"===typeof d&&null!=d&&mr(d,".priority")||(p=p.updatePriority(h.getPriority()));var v=c.currentWriteId,y=fl(e),m=Ic(p,h,y);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=m,c.currentWriteId=vl(e),o.splice(o.indexOf(v),1),i=(i=i.concat(nc(e.serverSyncTree_,c.path,m,c.currentWriteId,c.applyLocally))).concat(ic(e.serverSyncTree_,v,!0))}else f=!0,u="nodata",i=i.concat(ic(e.serverSyncTree_,c.currentWriteId,!0))}rl(e.eventQueue_,n,i),i=[],f&&(t[a].status=2,s=t[a].unwatcher,setTimeout(s,Math.floor(0)),t[a].onComplete&&("nodata"===u?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(u),!1,null)}))))},s=0;s<t.length;s++)u(s);Al(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)Ba(r[c]);Sl(e,e.transactionQueueTree_)}(e,Tl(e,n),r),r}function Cl(e,t){var n,r=e.transactionQueueTree_;for(n=ko(t);null!==n&&void 0===Oc(r);)r=Dc(r,n),n=ko(t=wo(t));return r}function Tl(e,t){var n=[];return Il(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function Il(e,t,n){var r=Oc(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Fc(t,(function(t){Il(e,t,n)}))}function Al(e,t){var n=Oc(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Pc(t,n.length>0?n:void 0)}Fc(t,(function(t){Al(e,t)}))}function Nl(e,t){var n=jc(Cl(e,t)),r=Dc(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){Dl(e,t)})),Dl(e,r),Lc(r,(function(t){Dl(e,t)})),n}function Dl(e,t){var n=Oc(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(Qn(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(Qn(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(ic(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Pc(t,void 0):n.length=a+1,rl(e.eventQueue_,jc(t),i);for(var u=0;u<r.length;u++)Ba(r[u])}}var Ol=function(e,t){var n=Pl(e),r=n.namespace;"firebase.com"===n.domain&&Ta(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Ta("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ia("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Xa(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new mo(n.pathString)}},Pl=function(e){var t="",n="",r="",i="",a="",o=!0,u="https",s=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(u=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var f=e.indexOf("?");-1===f&&(f=e.length),t=e.substring(0,Math.min(l,f)),l<f&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,f)));var h=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=E(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Ia("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,f)));(c=t.indexOf(":"))>=0?(o="https"===u||"wss"===u,s=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in h&&(a=h.ns)}return{host:t,port:s,domain:n,subdomain:r,secure:o,scheme:u,pathString:i,namespace:a}},Rl="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Fl=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=Rl.charAt(n%64),n=Math.floor(n/64);Qn(0===n,"Cannot push at time == 0");var o=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=Rl.charAt(t[r]);return Qn(20===o.length,"nextPushId: Length should be 20."),o}}(),Ll=function(){function e(t,n,r,i){h(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return y(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+vr(this.snapshot.exportVal())}}]),e}(),jl=function(){function e(t,n,r){h(this,e),this.eventRegistration=t,this.error=n,this.path=r}return y(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),Ml=function(){function e(t,n){h(this,e),this.snapshotCallback=t,this.cancelCallback=n}return y(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return Qn(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),Ul=function(){function e(t,n){h(this,e),this._repo=t,this._path=n}return y(e,[{key:"cancel",value:function(){var e=new ir;return ml(this._repo,this._path,e.wrapCallback((function(){}))),e.promise}},{key:"remove",value:function(){Jc("OnDisconnect.remove",this._path);var e=new ir;return gl(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise}},{key:"set",value:function(e){Jc("OnDisconnect.set",this._path),Kc("OnDisconnect.set",e,this._path,!1);var t=new ir;return gl(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}},{key:"setWithPriority",value:function(e,t){Jc("OnDisconnect.setWithPriority",this._path),Kc("OnDisconnect.setWithPriority",e,this._path,!1),Gc("OnDisconnect.setWithPriority",t,!1);var n=new ir;return function(e,t,n,r,i){var a=du(n,r);e.server_.onDisconnectPut(t.toString(),a.val(!0),(function(n,r){"ok"===n&&Pu(e.onDisconnect_,t,a),_l(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise}},{key:"update",value:function(e){Jc("OnDisconnect.update",this._path),Hc("OnDisconnect.update",e,this._path,!1);var t=new ir;return function(e,t,n,r){if(kr(n))return Sa("onDisconnect().update() called with empty data.  Don't do anything."),void _l(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,a){"ok"===i&&ja(n,(function(n,r){var i=du(r);Pu(e.onDisconnect_,Eo(t,n),i)})),_l(0,r,i,a)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}}]),e}(),Vl=function(){function e(t,n,r,i){h(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return y(e,[{key:"key",get:function(){return Co(this._path)?null:_o(this._path)}},{key:"ref",get:function(){return new Wl(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=Au(this._queryParams),t=Fa(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return Au(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=Or(t))instanceof e))return!1;var n=this._repo===t._repo,r=Ao(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();function Bl(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function ql(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Bo){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==Na)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==Da)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===iu){if(null!=t&&!Wc(t)||null!=n&&!Wc(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Qn(e.getIndex()instanceof pu||e.getIndex()===yu,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function zl(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Wl=function(e){g(n,e);var t=_(n);function n(e,r){return h(this,n),t.call(this,e,r,new Su,!1)}return y(n,[{key:"parent",get:function(){var e=So(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(Vl),Kl=function(){function e(t,n,r){h(this,e),this._node=t,this.ref=n,this._index=r}return y(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new mo(t),r=Gl(this.ref,t);return new e(this._node.getChild(n),r,iu)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,Gl(n.ref,r),iu))}))}},{key:"hasChild",value:function(e){var t=new mo(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function Ql(e,t){return(e=Or(e))._checkNotDeleted("ref"),void 0!==t?Gl(e._root,t):e._root}function Hl(e,t){(e=Or(e))._checkNotDeleted("refFromURL");var n=Ol(t,e._repo.repoInfo_.nodeAdmin);Zc("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||Ta("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),Ql(e,n.path.toString())}function Gl(e,t){return null===ko((e=Or(e))._path)?Xc("child","path",t,!1):Yc("child","path",t,!1),new Wl(e._repo,Eo(e._path,t))}function $l(e,t){e=Or(e),Jc("set",e._path),Kc("set",t,e._path,!1);var n=new ir;return yl(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function Yl(e,t){Hc("update",t,e._path,!1);var n=new ir;return function(e,t,n,r){wl(e,"update",{path:t.toString(),value:n});var i=!0,a=fl(e),o={};if(ja(n,(function(n,r){i=!1,o[n]=Tc(Eo(t,n),du(r),e.serverSyncTree_,a)})),i)Sa("update() called with empty data.  Don't do anything."),_l(0,r,"ok",void 0);else{var u=vl(e),s=rc(e.serverSyncTree_,t,o,u);tl(e.eventQueue_,s),e.server_.merge(t.toString(),n,(function(n,i){var a="ok"===n;a||Ia("update at "+t+" failed: "+n);var o=ic(e.serverSyncTree_,u,!a),s=o.length>0?El(e,t):t;rl(e.eventQueue_,s,o),_l(0,r,n,i)})),ja(n,(function(n){var r=Nl(e,Eo(t,n));El(e,r)})),rl(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function Xl(e){e=Or(e);var t=new Ml((function(){})),n=new Jl(t);return function(e,t,n){var r=lc(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((function(r){var i,a=du(r).withIndex(t._queryParams.getIndex());if(sc(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())i=ac(e.serverSyncTree_,t._path,a);else{var o=vc(e.serverSyncTree_,t);i=uc(e.serverSyncTree_,t._path,a,o)}return rl(e.eventQueue_,t._path,i),oc(e.serverSyncTree_,t,n,null,!0),a}),(function(n){return wl(e,"get for query "+vr(t)+" failed: "+n),Promise.reject(new Error(n))}))}(e._repo,e,n).then((function(t){return new Kl(t,new Wl(e._repo,e._path),e._queryParams.getIndex())}))}var Jl=function(){function e(t){h(this,e),this.callbackContext=t}return y(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new Ll("value",this,new Kl(e.snapshotNode,new Wl(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new jl(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),Zl=function(){function e(t,n){h(this,e),this.eventType=t,this.callbackContext=n}return y(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new jl(this,e,t):null}},{key:"createEvent",value:function(e,t){Qn(null!=e.childName,"Child events should have a childName.");var n=Gl(new Wl(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new Ll(e.type,this,new Kl(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function ef(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,u=function(t,n){kl(e._repo,e,c),o(t,n)};u.userCallback=n.userCallback,u.context=n.context,n=u}var s=new Ml(n,a||void 0),c="value"===t?new Jl(s):new Zl(t,s);return function(e,t,n){var r;r=".info"===ko(t._path)?sc(e.infoSyncTree_,t,n):sc(e.serverSyncTree_,t,n),nl(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return kl(e._repo,e,c)}}function tf(e,t,n,r){return ef(e,"value",t,n,r)}function nf(e,t,n,r){return ef(e,"child_added",t,n,r)}function rf(e,t,n,r){return ef(e,"child_changed",t,n,r)}function af(e,t,n,r){return ef(e,"child_moved",t,n,r)}function of(e,t,n,r){return ef(e,"child_removed",t,n,r)}function uf(e,t,n){var r=null,i=n?new Ml(n):null;"value"===t?r=new Jl(i):t&&(r=new Zl(t,i)),kl(e._repo,e,r)}var sf=y((function e(){h(this,e)})),cf=function(e){g(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this))._value=e,i._key=r,i}return y(n,[{key:"_apply",value:function(e){Kc("endAt",this._value,e._path,!0);var t=Cu(e._queryParams,this._value,this._key);if(zl(t),ql(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Vl(e._repo,e._path,t,e._orderByCalled)}}]),n}(sf);var lf=function(e){g(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this))._value=e,i._key=r,i}return y(n,[{key:"_apply",value:function(e){Kc("endBefore",this._value,e._path,!1);var t=function(e,t,n){var r;return(r=e.index_===Bo||n?Cu(e,t,n):Cu(e,t,Na)).endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(zl(t),ql(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Vl(e._repo,e._path,t,e._orderByCalled)}}]),n}(sf);var ff=function(e){g(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this))._value=e,i._key=r,i}return y(n,[{key:"_apply",value:function(e){Kc("startAt",this._value,e._path,!0);var t=Eu(e._queryParams,this._value,this._key);if(zl(t),ql(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Vl(e._repo,e._path,t,e._orderByCalled)}}]),n}(sf);var hf=function(e){g(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this))._value=e,i._key=r,i}return y(n,[{key:"_apply",value:function(e){Kc("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;return(r=e.index_===Bo||n?Eu(e,t,n):Eu(e,t,Da)).startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(zl(t),ql(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Vl(e._repo,e._path,t,e._orderByCalled)}}]),n}(sf);var df=function(e){g(n,e);var t=_(n);function n(e){var r;return h(this,n),(r=t.call(this))._limit=e,r}return y(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Vl(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(sf);var pf=function(e){g(n,e);var t=_(n);function n(e){var r;return h(this,n),(r=t.call(this))._limit=e,r}return y(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Vl(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(sf);var vf=function(e){g(n,e);var t=_(n);function n(e){var r;return h(this,n),(r=t.call(this))._path=e,r}return y(n,[{key:"_apply",value:function(e){Bl(e,"orderByChild");var t=new mo(this._path);if(Co(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new pu(t),r=Tu(e._queryParams,n);return ql(r),new Vl(e._repo,e._path,r,!0)}}]),n}(sf);var yf=function(e){g(n,e);var t=_(n);function n(){return h(this,n),t.apply(this,arguments)}return y(n,[{key:"_apply",value:function(e){Bl(e,"orderByKey");var t=Tu(e._queryParams,Bo);return ql(t),new Vl(e._repo,e._path,t,!0)}}]),n}(sf);var mf=function(e){g(n,e);var t=_(n);function n(){return h(this,n),t.apply(this,arguments)}return y(n,[{key:"_apply",value:function(e){Bl(e,"orderByPriority");var t=Tu(e._queryParams,iu);return ql(t),new Vl(e._repo,e._path,t,!0)}}]),n}(sf);var gf=function(e){g(n,e);var t=_(n);function n(){return h(this,n),t.apply(this,arguments)}return y(n,[{key:"_apply",value:function(e){Bl(e,"orderByValue");var t=Tu(e._queryParams,yu);return ql(t),new Vl(e._repo,e._path,t,!0)}}]),n}(sf);var kf=function(e){g(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this))._value=e,i._key=r,i}return y(n,[{key:"_apply",value:function(e){if(Kc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new cf(this._value,this._key)._apply(new ff(this._value,this._key)._apply(e))}}]),n}(sf);function bf(e){for(var t=Or(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0,o=r;a<o.length;a++){t=o[a]._apply(t)}return t}!function(e){Qn(!Fs,"__referenceConstructor has already been defined"),Fs=e}(Wl),function(e){Qn(!qs,"__referenceConstructor has already been defined"),qs=e}(Wl);var wf="FIREBASE_DATABASE_EMULATOR_HOST",_f={},xf=!1;function Sf(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||Ta("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Sa("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,u=Ol(a,i),s=u.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}[wf]),c?(o=!0,a="http://".concat(c,"?ns=").concat(s.namespace),s=(u=Ol(a,i)).repoInfo):o=!u.repoInfo.secure;var l=i&&o?new Ka(Ka.OWNER):new Wa(e.name,e.options,t);Zc("Invalid Firebase Database URL",u),Co(u.path)||Ta("Database URL must point to the root of a Firebase Database (not including a child path).");var f=function(e,t,n,r){var i=_f[t.name];i||(i={},_f[t.name]=i);var a=i[e.toURLString()];a&&Ta("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new sl(e,xf,n,r),i[e.toURLString()]=a,a}(s,e,l,new za(e.name,n));return new Ef(f,e)}var Ef=function(){function e(t,n){h(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return y(e,[{key:"_repo",get:function(){return this._instanceStarted||(cl(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new Wl(this._repo,go())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=_f[t];n&&n[e.key]===e||Ta("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),bl(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&Ta("Cannot call "+e+" on a deleted database.")}}]),e}();function Cf(){co.IS_TRANSPORT_INITIALIZED&&Ia("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Tf(){Cf(),ao.forceDisallow()}function If(){Cf(),so.forceDisallow(),ao.forceAllow()}function Af(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=Or(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&Ta("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ta('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Ka(Ka.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:ar(r.mockUserToken,e.app.options.projectId);a=new Ka(o)}!function(e,t,n,r){e.repoInfo_=new Xa("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,a)}function Nf(e){var t;(e=Or(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(ol)}function Df(e,t){xa(e,t)}var Of={".sv":"timestamp"};var Pf=function(){function e(t,n){h(this,e),this.committed=t,this.snapshot=n}return y(e,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}();function Rf(e,t,n){var r;if(e=Or(e),Jc("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new ir,o=tf(e,(function(){}));return function(e,t,n,r,i,a){wl(e,"transaction on "+t);var o={path:t,update:n,onComplete:r,status:null,order:ga(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=xl(e,t,void 0);o.currentInputSnapshot=u;var s=o.update(u.val());if(void 0===s)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{Qc("transaction failed: Data returned ",s,o.path),o.status=0;var c,l=Dc(e.transactionQueueTree_,t),f=Oc(l)||[];f.push(o),Pc(l,f),"object"===typeof s&&null!==s&&mr(s,".priority")?(c=gr(s,".priority"),Qn(Wc(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(cc(e.serverSyncTree_,t)||lu.EMPTY_NODE).getPriority().val();var h=fl(e),d=du(s,c),p=Ic(d,u,h);o.currentOutputSnapshotRaw=d,o.currentOutputSnapshotResolved=p,o.currentWriteId=vl(e);var v=nc(e.serverSyncTree_,t,p,o.currentWriteId,o.applyLocally);rl(e.eventQueue_,t,v),Sl(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?a.reject(t):(i=new Kl(r,new Wl(e._repo,e._path),iu),a.resolve(new Pf(n,i)))}),o,i),a.promise}Lo.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Lo.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){fa(Ai),_i(new Pr("database",(function(e,t){var n=t.instanceIdentifier;return Sf(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Fi(sa,ca,e),Fi(sa,ca,"esm2017")}();var Ff=new Wr("@firebase/database-compat"),Lf=function(e){var t="FIREBASE WARNING: "+e;Ff.warn(t)},jf=function(){function e(t){h(this,e),this._delegate=t}return y(e,[{key:"cancel",value:function(e){Tr("OnDisconnect.cancel",0,1,arguments.length),Ar("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"remove",value:function(e){Tr("OnDisconnect.remove",0,1,arguments.length),Ar("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"set",value:function(e,t){Tr("OnDisconnect.set",1,2,arguments.length),Ar("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"setWithPriority",value:function(e,t,n){Tr("OnDisconnect.setWithPriority",2,3,arguments.length),Ar("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"update",value:function(e,t){if(Tr("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,Lf("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ar("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}}]),e}(),Mf=function(){function e(t,n){h(this,e),this.committed=t,this.snapshot=n}return y(e,[{key:"toJSON",value:function(){return Tr("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}(),Uf=function(){function e(t,n){h(this,e),this._database=t,this._delegate=n}return y(e,[{key:"val",value:function(){return Tr("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return Tr("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return Tr("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return Tr("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(t){return Tr("DataSnapshot.child",0,1,arguments.length),t=String(t),Yc("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}},{key:"hasChild",value:function(e){return Tr("DataSnapshot.hasChild",1,1,arguments.length),Yc("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}},{key:"getPriority",value:function(){return Tr("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(t){var n=this;return Tr("DataSnapshot.forEach",1,1,arguments.length),Ar("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))}},{key:"hasChildren",value:function(){return Tr("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return Tr("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return Tr("DataSnapshot.ref",0,0,arguments.length),new Bf(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),e}(),Vf=function(){function e(t,n){h(this,e),this.database=t,this._delegate=n}return y(e,[{key:"on",value:function(t,n,r,i){var a,o=this;Tr("Query.on",2,4,arguments.length),Ar("Query.on","callback",n,!1);var u=e.getCancelAndContextArgs_("Query.on",r,i),s=function(e,t){n.call(u.context,new Uf(o.database,e),t)};s.userCallback=n,s.context=u.context;var c=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(t){case"value":return tf(this._delegate,s,c),n;case"child_added":return nf(this._delegate,s,c),n;case"child_removed":return of(this._delegate,s,c),n;case"child_changed":return rf(this._delegate,s,c),n;case"child_moved":return af(this._delegate,s,c),n;default:throw new Error(Ir("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(e,t,n){if(Tr("Query.off",0,3,arguments.length),function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Ir(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}("Query.off",e,!0),Ar("Query.off","callback",t,!0),Nr("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,uf(this._delegate,e,r)}else uf(this._delegate,e)}},{key:"get",value:function(){var e=this;return Xl(this._delegate).then((function(t){return new Uf(e.database,t)}))}},{key:"once",value:function(t,n,r,i){var a=this;Tr("Query.once",1,4,arguments.length),Ar("Query.once","callback",n,!0);var o=e.getCancelAndContextArgs_("Query.once",r,i),u=new ir,s=function(e,t){var r=new Uf(a.database,e);n&&n.call(o.context,r,t),u.resolve(r)};s.userCallback=n,s.context=o.context;var c=function(e){o.cancel&&o.cancel.call(o.context,e),u.reject(e)};switch(t){case"value":tf(this._delegate,s,c,{onlyOnce:!0});break;case"child_added":nf(this._delegate,s,c,{onlyOnce:!0});break;case"child_removed":of(this._delegate,s,c,{onlyOnce:!0});break;case"child_changed":rf(this._delegate,s,c,{onlyOnce:!0});break;case"child_moved":af(this._delegate,s,c,{onlyOnce:!0});break;default:throw new Error(Ir("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}},{key:"limitToFirst",value:function(t){return Tr("Query.limitToFirst",1,1,arguments.length),new e(this.database,bf(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new df(e)}(t)))}},{key:"limitToLast",value:function(t){return Tr("Query.limitToLast",1,1,arguments.length),new e(this.database,bf(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new pf(e)}(t)))}},{key:"orderByChild",value:function(t){return Tr("Query.orderByChild",1,1,arguments.length),new e(this.database,bf(this._delegate,function(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Yc("orderByChild","path",e,!1),new vf(e)}(t)))}},{key:"orderByKey",value:function(){return Tr("Query.orderByKey",0,0,arguments.length),new e(this.database,bf(this._delegate,new yf))}},{key:"orderByPriority",value:function(){return Tr("Query.orderByPriority",0,0,arguments.length),new e(this.database,bf(this._delegate,new mf))}},{key:"orderByValue",value:function(){return Tr("Query.orderByValue",0,0,arguments.length),new e(this.database,bf(this._delegate,new gf))}},{key:"startAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Tr("Query.startAt",0,2,arguments.length),new e(this.database,bf(this._delegate,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return $c("startAt","key",t,!0),new ff(e,t)}(t,n)))}},{key:"startAfter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Tr("Query.startAfter",0,2,arguments.length),new e(this.database,bf(this._delegate,function(e,t){return $c("startAfter","key",t,!0),new hf(e,t)}(t,n)))}},{key:"endAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Tr("Query.endAt",0,2,arguments.length),new e(this.database,bf(this._delegate,function(e,t){return $c("endAt","key",t,!0),new cf(e,t)}(t,n)))}},{key:"endBefore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Tr("Query.endBefore",0,2,arguments.length),new e(this.database,bf(this._delegate,function(e,t){return $c("endBefore","key",t,!0),new lf(e,t)}(t,n)))}},{key:"equalTo",value:function(t,n){return Tr("Query.equalTo",1,2,arguments.length),new e(this.database,bf(this._delegate,function(e,t){return $c("equalTo","key",t,!0),new kf(e,t)}(t,n)))}},{key:"toString",value:function(){return Tr("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return Tr("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(t){if(Tr("Query.isEqual",1,1,arguments.length),!(t instanceof e)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}return this._delegate.isEqual(t._delegate)}},{key:"ref",get:function(){return new Bf(this.database,new Wl(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,Ar(e,"cancel",r.cancel,!0),r.context=n,Nr(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(Ir(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}}]),e}(),Bf=function(e){g(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,new Vl(r._repo,r._path,new Su,!1))).database=e,i._delegate=r,i}return y(n,[{key:"getKey",value:function(){return Tr("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(e){return Tr("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new n(this.database,Gl(this._delegate,e))}},{key:"getParent",value:function(){Tr("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new n(this.database,e):null}},{key:"getRoot",value:function(){return Tr("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(e,t){Tr("Reference.set",1,2,arguments.length),Ar("Reference.set","onComplete",t,!0);var n=$l(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"update",value:function(e,t){if(Tr("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,Lf("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Jc("Reference.update",this._delegate._path),Ar("Reference.update","onComplete",t,!0);var i=Yl(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}},{key:"setWithPriority",value:function(e,t,n){Tr("Reference.setWithPriority",2,3,arguments.length),Ar("Reference.setWithPriority","onComplete",n,!0);var r=function(e,t,n){if(Jc("setWithPriority",e._path),Kc("setWithPriority",t,e._path,!1),Gc("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new ir;return yl(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"remove",value:function(e){Tr("Reference.remove",0,1,arguments.length),Ar("Reference.remove","onComplete",e,!0);var t,n=(t=this._delegate,Jc("remove",t._path),$l(t,null));return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n}},{key:"transaction",value:function(e,t,n){var r=this;Tr("Reference.transaction",1,3,arguments.length),Ar("Reference.transaction","transactionUpdate",e,!1),Ar("Reference.transaction","onComplete",t,!0),function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(Ir(e,t)+"must be a boolean.")}("Reference.transaction","applyLocally",n,!0);var i=Rf(this._delegate,e,{applyLocally:n}).then((function(e){return new Mf(e.committed,new Uf(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i}},{key:"setPriority",value:function(e,t){Tr("Reference.setPriority",1,2,arguments.length),Ar("Reference.setPriority","onComplete",t,!0);var n=function(e,t){e=Or(e),Jc("setPriority",e._path),Gc("setPriority",t,!1);var n=new ir;return yl(e._repo,Eo(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"push",value:function(e,t){var r=this;Tr("Reference.push",0,2,arguments.length),Ar("Reference.push","onComplete",t,!0);var i=function(e,t){e=Or(e),Jc("push",e._path),Kc("push",t,e._path,!0);var n,r=ll(e._repo),i=Fl(r),a=Gl(e,i),o=Gl(e,i);return n=null!=t?$l(o,t).then((function(){return o})):Promise.resolve(o),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}(this._delegate,e),a=i.then((function(e){return new n(r.database,e)}));t&&a.then((function(){return t(null)}),(function(e){return t(e)}));var o=new n(this.database,i);return o.then=a.then.bind(a),o.catch=a.catch.bind(a,void 0),o}},{key:"onDisconnect",value:function(){return Jc("Reference.onDisconnect",this._delegate._path),new jf(new Ul(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}(Vf),qf=function(){function e(t,n){var r=this;h(this,e),this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()},forceWebSockets:Tf,forceLongPolling:If}}return y(e,[{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Af(this._delegate,e,t,n)}},{key:"ref",value:function(e){if(Tr("database.ref",0,1,arguments.length),e instanceof Bf){var t=Hl(this._delegate,e.toString());return new Bf(this,t)}var n=Ql(this._delegate,e);return new Bf(this,n)}},{key:"refFromURL",value:function(e){Tr("database.refFromURL",1,1,arguments.length);var t=Hl(this._delegate,e);return new Bf(this,t)}},{key:"goOffline",value:function(){return Tr("database.goOffline",0,0,arguments.length),function(e){(e=Or(e))._checkNotDeleted("goOffline"),bl(e._repo)}(this._delegate)}},{key:"goOnline",value:function(){return Tr("database.goOnline",0,0,arguments.length),Nf(this._delegate)}}]),e}();qf.ServerValue={TIMESTAMP:Of,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}};var zf,Wf=Object.freeze({__proto__:null,initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,a=e.namespace,o=e.nodeAdmin,u=void 0!==o&&o;fa(r);var s=new Fr("auth-internal",new Mr("database-standalone"));return s.setComponent(new Pr("auth-internal",(function(){return i}),"PRIVATE")),{instance:new qf(Sf(t,s,void 0,n,u),t),namespace:a}}}),Kf=qf.ServerValue;function Qf(){return Qf="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Qf.apply(this,arguments)}(zf=ua).INTERNAL.registerComponent(new Pr("database-compat",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new qf(i,r)}),"PUBLIC").setServiceProps({Reference:Bf,Query:Vf,Database:qf,DataSnapshot:Uf,enableLogging:Df,INTERNAL:Wf,ServerValue:Kf}).setMultipleInstances(!0)),zf.registerVersion("@firebase/database-compat","0.3.4");var Hf,Gf="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},$f={},Yf=Yf||{},Xf=Gf||self;function Jf(){}function Zf(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function eh(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var th="closure_uid_"+(1e9*Math.random()>>>0),nh=0;function rh(e,t,n){return e.call.apply(e.bind,arguments)}function ih(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function ah(e,t,n){return(ah=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?rh:ih).apply(null,arguments)}function oh(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function uh(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function sh(){this.s=this.s,this.o=this.o}sh.prototype.s=!1,sh.prototype.ra=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,th)&&e[th]||(e[th]=++nh))},sh.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var ch=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function lh(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function fh(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Zf(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function hh(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}hh.prototype.h=function(){this.defaultPrevented=!0};var dh=function(){if(!Xf.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Xf.addEventListener("test",Jf,t),Xf.removeEventListener("test",Jf,t)}catch(n){}return e}();function ph(e){return/^[\s\xa0]*$/.test(e)}var vh=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function yh(e,t){return e<t?-1:e>t?1:0}function mh(){var e=Xf.navigator;return e&&(e=e.userAgent)?e:""}function gh(e){return-1!=mh().indexOf(e)}function kh(e){return kh[" "](e),e}function bh(e,t,n){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:e[t]=n(t)}kh[" "]=Jf;var wh,_h=gh("Opera"),xh=gh("Trident")||gh("MSIE"),Sh=gh("Edge"),Eh=Sh||xh,Ch=gh("Gecko")&&!(-1!=mh().toLowerCase().indexOf("webkit")&&!gh("Edge"))&&!(gh("Trident")||gh("MSIE"))&&!gh("Edge"),Th=-1!=mh().toLowerCase().indexOf("webkit")&&!gh("Edge");function Ih(){var e=Xf.document;return e?e.documentMode:void 0}e:{var Ah="",Nh=function(){var e=mh();return Ch?/rv:([^\);]+)(\)|;)/.exec(e):Sh?/Edge\/([\d\.]+)/.exec(e):xh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Th?/WebKit\/(\S+)/.exec(e):_h?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Nh&&(Ah=Nh?Nh[1]:""),xh){var Dh=Ih();if(null!=Dh&&Dh>parseFloat(Ah)){wh=String(Dh);break e}}wh=Ah}var Oh,Ph={};if(Xf.document&&xh){var Rh=Ih();Oh=Rh||(parseInt(wh,10)||void 0)}else Oh=void 0;var Fh=Oh;function Lh(e,t){if(hh.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Ch){e:{try{kh(t.nodeName);var i=!0;break e}catch(bn){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:jh[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Lh.$.h.call(this)}}uh(Lh,hh);var jh={2:"touch",3:"pen",4:"mouse"};Lh.prototype.h=function(){Lh.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Mh="closure_listenable_"+(1e6*Math.random()|0),Uh=0;function Vh(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Uh,this.fa=this.ia=!1}function Bh(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function qh(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function zh(e){var t={};for(var n in e)t[n]=e[n];return t}var Wh="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Kh(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Wh.length;a++)n=Wh[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Qh(e){this.src=e,this.g={},this.h=0}function Hh(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=ch(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Bh(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Gh(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}Qh.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Gh(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Vh(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var $h="closure_lm_"+(1e6*Math.random()|0),Yh={};function Xh(e,t,n,r,i){if(r&&r.once)return Zh(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Xh(e,t[a],n,r,i);return null}return n=od(n),e&&e[Mh]?e.O(t,n,eh(r)?!!r.capture:!!r,i):Jh(e,t,n,!1,r,i)}function Jh(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=eh(i)?!!i.capture:!!i,u=id(e);if(u||(e[$h]=u=new Qh(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=rd;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)dh||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(nd(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Zh(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Zh(e,t[a],n,r,i);return null}return n=od(n),e&&e[Mh]?e.P(t,n,eh(r)?!!r.capture:!!r,i):Jh(e,t,n,!0,r,i)}function ed(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)ed(e,t[a],n,r,i);else r=eh(r)?!!r.capture:!!r,n=od(n),e&&e[Mh]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Gh(a=e.g[t],n,r,i))&&(Bh(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=id(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Gh(t,n,r,i)),(n=-1<e?t[e]:null)&&td(n))}function td(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Mh])Hh(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(nd(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=id(t))?(Hh(n,e),0==n.h&&(n.src=null,t[$h]=null)):Bh(e)}}}function nd(e){return e in Yh?Yh[e]:Yh[e]="on"+e}function rd(e,t){if(e.fa)e=!0;else{t=new Lh(t,this);var n=e.listener,r=e.la||e.src;e.ia&&td(e),e=n.call(r,t)}return e}function id(e){return(e=e[$h])instanceof Qh?e:null}var ad="__closure_events_fn_"+(1e9*Math.random()>>>0);function od(e){return"function"===typeof e?e:(e[ad]||(e[ad]=function(t){return e.handleEvent(t)}),e[ad])}function ud(){sh.call(this),this.i=new Qh(this),this.S=this,this.J=null}function sd(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new hh(t,e);else if(t instanceof hh)t.target=t.target||e;else{var i=t;Kh(t=new hh(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=cd(o,r,!0,t)&&i}if(i=cd(o=t.g=e,r,!0,t)&&i,i=cd(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=cd(o=t.g=n[a],r,!1,t)&&i}function cd(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var u=o.listener,s=o.la||o.src;o.ia&&Hh(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}uh(ud,sh),ud.prototype[Mh]=!0,ud.prototype.removeEventListener=function(e,t,n,r){ed(this,e,t,n,r)},ud.prototype.N=function(){if(ud.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Bh(n[r]);delete t.g[e],t.h--}}this.J=null},ud.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ud.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var ld=Xf.JSON.stringify;function fd(){var e=kd,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var hd,dd=function(){function e(){h(this,e),this.h=this.g=null}return y(e,[{key:"add",value:function(e,t){var n=pd.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),pd=new(function(){function e(t,n){h(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return y(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new vd}),(function(e){return e.reset()})),vd=function(){function e(){h(this,e),this.next=this.g=this.h=null}return y(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function yd(e){Xf.setTimeout((function(){throw e}),0)}function md(e,t){hd||function(){var e=Xf.Promise.resolve(void 0);hd=function(){e.then(bd)}}(),gd||(hd(),gd=!0),kd.add(e,t)}var gd=!1,kd=new dd;function bd(){for(var e;e=fd();){try{e.h.call(e.g)}catch(n){yd(n)}var t=pd;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}gd=!1}function wd(e,t){ud.call(this),this.h=e||1,this.g=t||Xf,this.j=ah(this.qb,this),this.l=Date.now()}function _d(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function xd(e,t,n){if("function"===typeof e)n&&(e=ah(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=ah(e.handleEvent,e)}return 2147483647<Number(t)?-1:Xf.setTimeout(e,t||0)}function Sd(e){e.g=xd((function(){e.g=null,e.i&&(e.i=!1,Sd(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}uh(wd,ud),(Hf=wd.prototype).ga=!1,Hf.T=null,Hf.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),sd(this,"tick"),this.ga&&(_d(this),this.start()))}},Hf.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Hf.N=function(){wd.$.N.call(this),_d(this),delete this.g};var Ed=function(e){g(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return y(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Sd(this)}},{key:"N",value:function(){Qf(k(n.prototype),"N",this).call(this),this.g&&(Xf.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(sh);function Cd(e){sh.call(this),this.h=e,this.g={}}uh(Cd,sh);var Td=[];function Id(e,t,n,r){Array.isArray(n)||(n&&(Td[0]=n.toString()),n=Td);for(var i=0;i<n.length;i++){var a=Xh(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Ad(e){qh(e.g,(function(e,t){this.g.hasOwnProperty(t)&&td(e)}),e),e.g={}}function Nd(){this.g=!0}function Dd(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return ld(n)}catch(xn){return t}}(e,n)+(r?" "+r:"")}))}Cd.prototype.N=function(){Cd.$.N.call(this),Ad(this)},Cd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Nd.prototype.Ea=function(){this.g=!1},Nd.prototype.info=function(){};var Od={},Pd=null;function Rd(){return Pd=Pd||new ud}function Fd(e){hh.call(this,Od.Ta,e)}function Ld(e){var t=Rd();sd(t,new Fd(t))}function jd(e,t){hh.call(this,Od.STAT_EVENT,e),this.stat=t}function Md(e){var t=Rd();sd(t,new jd(t,e))}function Ud(e,t){hh.call(this,Od.Ua,e),this.size=t}function Vd(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Xf.setTimeout((function(){e()}),t)}Od.Ta="serverreachability",uh(Fd,hh),Od.STAT_EVENT="statevent",uh(jd,hh),Od.Ua="timingevent",uh(Ud,hh);var Bd={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},qd={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function zd(){}function Wd(e){return e.h||(e.h=e.i())}function Kd(){}zd.prototype.h=null;var Qd,Hd={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Gd(){hh.call(this,"d")}function $d(){hh.call(this,"c")}function Yd(){}function Xd(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Cd(this),this.P=Zd,e=Eh?125:void 0,this.V=new wd(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new Jd}function Jd(){this.i=null,this.g="",this.h=!1}uh(Gd,hh),uh($d,hh),uh(Yd,zd),Yd.prototype.g=function(){return new XMLHttpRequest},Yd.prototype.i=function(){return{}},Qd=new Yd;var Zd=45e3,ep={},tp={};function np(e,t,n){e.L=1,e.v=wp(yp(t)),e.s=n,e.S=!0,rp(e,null)}function rp(e,t){e.G=Date.now(),up(e),e.A=yp(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),Rp(n.i,"t",r),e.C=0,n=e.l.I,e.h=new Jd,e.g=Fv(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Ed(ah(e.Pa,e,e.g),e.O)),Id(e.U,e.g,"readystatechange",e.nb),t=e.I?zh(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Ld(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function ip(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function ap(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=op(e,n))==tp){4==t&&(e.o=4,Md(14),i=!1),Dd(e.j,e.m,null,"[Incomplete Response]");break}if(r==ep){e.o=4,Md(15),Dd(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Dd(e.j,e.m,r,null),hp(e,r)}ip(e)&&r!=tp&&r!=ep&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Md(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ca&&(e.ca=!0,(t=e.l).g==e&&t.ca&&!t.L&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Tv(t),t.L=!0,Md(11))):(Dd(e.j,e.m,n,"[Invalid Chunked Response]"),fp(e),lp(e))}function op(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?tp:(n=Number(t.substring(n,r)),isNaN(n)?ep:(r+=1)+n>t.length?tp:(t=t.substr(r,n),e.C=r+n,t))}function up(e){e.Y=Date.now()+e.P,sp(e,e.P)}function sp(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Vd(ah(e.lb,e),t)}function cp(e){e.B&&(Xf.clearTimeout(e.B),e.B=null)}function lp(e){0==e.l.H||e.J||Nv(e.l,e)}function fp(e){cp(e);var t=e.M;t&&"function"==typeof t.ra&&t.ra(),e.M=null,_d(e.V),Ad(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ra())}function hp(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||qp(n.h,e)))if(!e.K&&qp(n.h,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Av(n),kv(n)}Cv(n),Md(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.M&&0==n.A&&!n.v&&(n.v=Vd(ah(n.ib,n),6e3));if(1>=Bp(n.h)&&n.na){try{n.na()}catch(a){}n.na=void 0}}else Ov(n,11)}else if((e.K||n.g==e)&&Av(n),!ph(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.J=a[1],n.oa=a[2];var o=a[3];null!=o&&(n.qa=o,n.j.info("VER="+n.qa));var u=a[4];null!=u&&(n.Ga=u,n.j.info("SVER="+n.Ga));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(zp(f,f.h),f.h=null))}if(r.F){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,bp(r.G,r.F,h))}}n.H=3,n.l&&n.l.Ba(),n.ca&&(n.S=Date.now()-e.G,n.j.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=Rv(r,r.I?r.oa:null,r.Y),d.K){Wp(r.h,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(cp(p),up(p)),r.g=d}else Ev(r);0<n.i.length&&wv(n)}else"stop"!=a[0]&&"close"!=a[0]||Ov(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Ov(n,7):gv(n):"noop"!=a[0]&&n.l&&n.l.Aa(a),n.A=0)}Ld()}catch(a){}}function dp(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Zf(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.sa&&"function"==typeof e.sa)return e.sa();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Zf(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Zf(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Hf=Xd.prototype).setTimeout=function(e){this.P=e},Hf.nb=function(e){e=e.target;var t=this.M;t&&3==hv(e)?t.l():this.Pa(e)},Hf.Pa=function(e){try{if(e==this.g)e:{var t=hv(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||Eh||this.g&&(this.h.h||this.g.ja()||dv(this.g)))){this.J||4!=t||7==n||Ld(),cp(this);var r=this.g.da();this.aa=r;t:if(ip(this)){var i=dv(this.g);e="";var a=i.length,o=4==hv(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){fp(this),lp(this);var u="";break t}this.h.i=new Xf.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.ba&&!this.K){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ph(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Md(12),fp(this),lp(this);break e}Dd(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hp(this,r)}this.S?(ap(this,t,u),Eh&&this.i&&3==t&&(Id(this.U,this.V,"tick",this.mb),this.V.start())):(Dd(this.j,this.m,u,null),hp(this,u)),4==t&&fp(this),this.i&&!this.J&&(4==t?Nv(this.l,this):(this.i=!1,up(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,Md(12)):(this.o=0,Md(13)),fp(this),lp(this)}}}catch(t){}},Hf.mb=function(){if(this.g){var e=hv(this.g),t=this.g.ja();this.C<t.length&&(cp(this),ap(this,e,t),this.i&&4!=e&&up(this))}},Hf.cancel=function(){this.J=!0,fp(this)},Hf.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(Ld(),Md(17)),fp(this),this.o=2,lp(this)):sp(this,this.Y-e)};var pp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vp(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof vp){this.h=void 0!==t?t:e.h,mp(this,e.j),this.s=e.s,this.g=e.g,gp(this,e.m),this.l=e.l,t=e.i;var n=new Np;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),kp(this,n),this.o=e.o}else e&&(n=String(e).match(pp))?(this.h=!!t,mp(this,n[1]||"",!0),this.s=_p(n[2]||""),this.g=_p(n[3]||"",!0),gp(this,n[4]),this.l=_p(n[5]||"",!0),kp(this,n[6]||"",!0),this.o=_p(n[7]||"")):(this.h=!!t,this.i=new Np(null,this.h))}function yp(e){return new vp(e)}function mp(e,t,n){e.j=n?_p(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function gp(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function kp(e,t,n){t instanceof Np?(e.i=t,function(e,t){t&&!e.j&&(Dp(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Op(this,t),Rp(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=xp(t,Ip)),e.i=new Np(t,e.h))}function bp(e,t,n){e.i.set(t,n)}function wp(e){return bp(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function _p(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function xp(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Sp),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Sp(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}vp.prototype.toString=function(){var e=[],t=this.j;t&&e.push(xp(t,Ep,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(xp(t,Ep,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(xp(n,"/"==n.charAt(0)?Tp:Cp,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",xp(n,Ap)),e.join("")};var Ep=/[#\/\?@]/g,Cp=/[#\?:]/g,Tp=/[#\?]/g,Ip=/[#\?@]/g,Ap=/#/g;function Np(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Dp(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Op(e,t){Dp(e),t=Fp(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Pp(e,t){return Dp(e),t=Fp(e,t),e.g.has(t)}function Rp(e,t,n){Op(e,t),0<n.length&&(e.i=null,e.g.set(Fp(e,t),lh(n)),e.h+=n.length)}function Fp(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Hf=Np.prototype).add=function(e,t){Dp(this),this.i=null,e=Fp(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Hf.forEach=function(e,t){Dp(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Hf.sa=function(){Dp(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Hf.Z=function(e){Dp(this);var t=[];if("string"===typeof e)Pp(this,e)&&(t=t.concat(this.g.get(Fp(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Hf.set=function(e,t){return Dp(this),this.i=null,Pp(this,e=Fp(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Hf.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Hf.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Lp=y((function e(t,n){h(this,e),this.h=t,this.g=n}));function jp(e){this.l=e||Up,Xf.PerformanceNavigationTiming?e=0<(e=Xf.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Xf.g&&Xf.g.Ka&&Xf.g.Ka()&&Xf.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Mp,Up=10;function Vp(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Bp(e){return e.h?1:e.g?e.g.size:0}function qp(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function zp(e,t){e.g?e.g.add(t):e.h=t}function Wp(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Kp(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=E(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return lh(e.i)}function Qp(){}function Hp(){this.g=new Qp}function Gp(e,t,n){var r=n||"";try{dp(e,(function(e,n){var i=e;eh(e)&&(i=ld(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function $p(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(bn){}}function Yp(e){this.l=e.fc||null,this.j=e.ob||!1}function Xp(e,t){ud.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Jp,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}jp.prototype.cancel=function(){if(this.i=Kp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=E(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Qp.prototype.stringify=function(e){return Xf.JSON.stringify(e,void 0)},Qp.prototype.parse=function(e){return Xf.JSON.parse(e,void 0)},uh(Yp,zd),Yp.prototype.g=function(){return new Xp(this.l,this.j)},Yp.prototype.i=(Mp={},function(){return Mp}),uh(Xp,ud);var Jp=0;function Zp(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function ev(e){e.readyState=4,e.l=null,e.j=null,e.A=null,tv(e)}function tv(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Hf=Xp.prototype).open=function(e,t){if(this.readyState!=Jp)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,tv(this)},Hf.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Xf).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Hf.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ev(this)),this.readyState=Jp},Hf.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,tv(this)),this.g&&(this.readyState=3,tv(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Xf.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Zp(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Hf.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ev(this):tv(this),3==this.readyState&&Zp(this)}},Hf.Za=function(e){this.g&&(this.response=this.responseText=e,ev(this))},Hf.Ya=function(e){this.g&&(this.response=e,ev(this))},Hf.ka=function(){this.g&&ev(this)},Hf.setRequestHeader=function(e,t){this.v.append(e,t)},Hf.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Hf.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Xp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var nv=Xf.JSON.parse;function rv(e){ud.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=iv,this.L=this.M=!1}uh(rv,ud);var iv="",av=/^https?$/i,ov=["POST","PUT"];function uv(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,sv(e),lv(e)}function sv(e){e.F||(e.F=!0,sd(e,"complete"),sd(e,"error"))}function cv(e){if(e.h&&"undefined"!=typeof Yf&&(!e.C[1]||4!=hv(e)||2!=e.da()))if(e.v&&4==hv(e))xd(e.La,0,e);else if(sd(e,"readystatechange"),4==hv(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(pp)[1]||null;if(!a&&Xf.self&&Xf.self.location){var o=Xf.self.location.protocol;a=o.substr(0,o.length-1)}i=!av.test(a?a.toLowerCase():"")}t=i}if(t)sd(e,"complete"),sd(e,"success");else{e.m=6;try{var u=2<hv(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.da()+"]",sv(e)}}finally{lv(e)}}}function lv(e,t){if(e.g){fv(e);var n=e.g,r=e.C[0]?Jf:null;e.g=null,e.C=null,t||sd(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function fv(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Xf.clearTimeout(e.A),e.A=null)}function hv(e){return e.g?e.g.readyState:0}function dv(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case iv:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Je){return null}}function pv(e){var t="";return qh(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function vv(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=pv(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):bp(e,t,n))}function yv(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function mv(e){this.Ga=0,this.i=[],this.j=new Nd,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=yv("failFast",!1,e),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=yv("baseRetryDelayMs",5e3,e),this.hb=yv("retryDelaySeedMs",1e4,e),this.eb=yv("forwardChannelMaxRetries",2,e),this.xa=yv("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.K=void 0,this.I=e&&e.supportsCrossDomainXhr||!1,this.J="",this.h=new jp(e&&e.concurrentRequestLimit),this.Ja=new Hp,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.j.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function gv(e){if(bv(e),3==e.H){var t=e.W++,n=yp(e.G);bp(n,"SID",e.J),bp(n,"RID",t),bp(n,"TYPE","terminate"),xv(e,n),(t=new Xd(e,e.j,t,void 0)).L=2,t.v=wp(yp(n)),n=!1,Xf.navigator&&Xf.navigator.sendBeacon&&(n=Xf.navigator.sendBeacon(t.v.toString(),"")),!n&&Xf.Image&&((new Image).src=t.v,n=!0),n||(t.g=Fv(t.l,null),t.g.ha(t.v)),t.G=Date.now(),up(t)}Pv(e)}function kv(e){e.g&&(Tv(e),e.g.cancel(),e.g=null)}function bv(e){kv(e),e.u&&(Xf.clearTimeout(e.u),e.u=null),Av(e),e.h.cancel(),e.m&&("number"===typeof e.m&&Xf.clearTimeout(e.m),e.m=null)}function wv(e){Vp(e.h)||e.m||(e.m=!0,md(e.Na,e),e.C=0)}function _v(e,t){var n;n=t?t.m:e.W++;var r=yp(e.G);bp(r,"SID",e.J),bp(r,"RID",n),bp(r,"AID",e.V),xv(e,r),e.o&&e.s&&vv(r,e.o,e.s),n=new Xd(e,e.j,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.i=t.F.concat(e.i)),t=Sv(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),zp(e.h,n),np(n,r,t)}function xv(e,t){e.ma&&qh(e.ma,(function(e,n){bp(t,n,e)})),e.l&&dp({},(function(e,n){bp(t,n,e)}))}function Sv(e,t,n){n=Math.min(e.i.length,n);var r=e.l?ah(e.l.Va,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Gp(l,o,"req"+c+"_")}catch(dt){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.F=e,r}function Ev(e){e.g||e.u||(e.ba=1,md(e.Ma,e),e.A=0)}function Cv(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Vd(ah(e.Ma,e),Dv(e,e.A)),e.A++,!0)}function Tv(e){null!=e.B&&(Xf.clearTimeout(e.B),e.B=null)}function Iv(e){e.g=new Xd(e,e.j,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=yp(e.wa);bp(t,"RID","rpc"),bp(t,"SID",e.J),bp(t,"CI",e.M?"0":"1"),bp(t,"AID",e.V),bp(t,"TYPE","xmlhttp"),xv(e,t),e.o&&e.s&&vv(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.oa,n.L=1,n.v=wp(yp(t)),n.s=null,n.S=!0,rp(n,e)}function Av(e){null!=e.v&&(Xf.clearTimeout(e.v),e.v=null)}function Nv(e,t){var n=null;if(e.g==t){Av(e),Tv(e),e.g=null;var r=2}else{if(!qp(e.h,t))return;n=t.F,Wp(e.h,t),r=1}if(0!=e.H)if(e.ta=t.aa,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;sd(r=Rd(),new Ud(r,n)),wv(e)}else Ev(e);else if(3==(i=t.o)||0==i&&0<e.ta||!(1==r&&function(e,t){return!(Bp(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.F.concat(e.i),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Vd(ah(e.Na,e,t),Dv(e,e.C)),e.C++,!0))}(e,t)||2==r&&Cv(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Ov(e,5);break;case 4:Ov(e,10);break;case 3:Ov(e,6);break;default:Ov(e,2)}}function Dv(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.l||(n*=2),n*t}function Ov(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=ah(e.pb,e);n||(n=new vp("//www.google.com/images/cleardot.gif"),Xf.location&&"http"==Xf.location.protocol||mp(n,"https"),wp(n)),function(e,t){var n=new Nd;if(Xf.Image){var r=new Image;r.onload=oh($p,n,r,"TestLoadImage: loaded",!0,t),r.onerror=oh($p,n,r,"TestLoadImage: error",!1,t),r.onabort=oh($p,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=oh($p,n,r,"TestLoadImage: timeout",!1,t),Xf.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Md(2);e.H=0,e.l&&e.l.za(t),Pv(e),bv(e)}function Pv(e){if(e.H=0,e.pa=[],e.l){var t=Kp(e.h);0==t.length&&0==e.i.length||(fh(e.pa,t),fh(e.pa,e.i),e.h.i.length=0,lh(e.i),e.i.length=0),e.l.ya()}}function Rv(e,t,n){var r=n instanceof vp?yp(n):new vp(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),gp(r,r.m);else{var i=Xf.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new vp(null,void 0);r&&mp(a,r),t&&(a.g=t),i&&gp(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&bp(r,n,t),bp(r,"VER",e.qa),xv(e,r),r}function Fv(e,t,n){if(t&&!e.I)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new rv(new Yp({ob:!0})):new rv(e.va)).Oa(e.I),t}function Lv(){}function jv(){if(xh&&!(10<=Number(Fh)))throw Error("Environmental error: no available transport.")}function Mv(e,t){ud.call(this),this.g=new mv(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!ph(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ph(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Bv(this)}function Uv(e){Gd.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Vv(){$d.call(this),this.status=1}function Bv(e){this.g=e}function qv(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function zv(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function Wv(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(Hf=rv.prototype).Oa=function(e){this.M=e},Hf.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Qd.g(),this.C=this.u?Wd(this.u):Wd(Qd),this.g.onreadystatechange=ah(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(u){return void uv(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=E(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Xf.FormData&&e instanceof Xf.FormData,!(0<=ch(ov,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,l=E(n);try{for(l.s();!(s=l.n()).done;){var f=c(s.value,2),h=f[0],d=f[1];this.g.setRequestHeader(h,d)}}catch(p){l.e(p)}finally{l.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{fv(this),0<this.B&&((this.L=function(e){return xh&&bh(Ph,9,(function(){for(var e=0,t=vh(String(wh)).split("."),n=vh("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=yh(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||yh(0==a[2].length,0==o[2].length)||yh(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ah(this.ua,this)):this.A=xd(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){uv(this,u)}},Hf.ua=function(){"undefined"!=typeof Yf&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,sd(this,"timeout"),this.abort(8))},Hf.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,sd(this,"complete"),sd(this,"abort"),lv(this))},Hf.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),lv(this,!0)),rv.$.N.call(this)},Hf.La=function(){this.s||(this.G||this.v||this.l?cv(this):this.kb())},Hf.kb=function(){cv(this)},Hf.da=function(){try{return 2<hv(this)?this.g.status:-1}catch(Mp){return-1}},Hf.ja=function(){try{return this.g?this.g.responseText:""}catch(Mp){return""}},Hf.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),nv(t)}},Hf.Ia=function(){return this.m},Hf.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Hf=mv.prototype).qa=8,Hf.H=1,Hf.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new Xd(this,this.j,e,void 0),n=this.s;if(this.U&&(n?Kh(n=zh(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Sv(this,t,r),bp(i=yp(this.G),"RID",e),bp(i,"CVER",22),this.F&&bp(i,"X-HTTP-Session-Id",this.F),xv(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(pv(n)))+"&"+r:this.o&&vv(i,this.o,n)),zp(this.h,t),this.bb&&bp(i,"TYPE","init"),this.P?(bp(i,"$req",r),bp(i,"SID","null"),t.ba=!0,np(t,i,null)):np(t,i,r),this.H=2}}else 3==this.H&&(e?_v(this,e):0==this.i.length||Vp(this.h)||_v(this))},Hf.Ma=function(){if(this.u=null,Iv(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var e=2*this.S;this.j.info("BP detection timer enabled: "+e),this.B=Vd(ah(this.jb,this),e)}},Hf.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,Md(10),kv(this),Iv(this))},Hf.ib=function(){null!=this.v&&(this.v=null,kv(this),Cv(this),Md(19))},Hf.pb=function(e){e?(this.j.info("Successfully pinged google.com"),Md(2)):(this.j.info("Failed to ping google.com"),Md(1))},(Hf=Lv.prototype).Ba=function(){},Hf.Aa=function(){},Hf.za=function(){},Hf.ya=function(){},Hf.Va=function(){},jv.prototype.g=function(e,t){return new Mv(e,t)},uh(Mv,ud),Mv.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var e=this.g,t=this.l,n=this.h||void 0;Md(0),e.Y=t,e.ma=n||{},e.M=e.aa,e.G=Rv(e,null,e.Y),wv(e)},Mv.prototype.close=function(){gv(this.g)},Mv.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ld(e),e=n);t.i.push(new Lp(t.fb++,e)),3==t.H&&wv(t)},Mv.prototype.N=function(){this.g.l=null,delete this.j,gv(this.g),delete this.g,Mv.$.N.call(this)},uh(Uv,Gd),uh(Vv,$d),uh(Bv,Lv),Bv.prototype.Ba=function(){sd(this.g,"a")},Bv.prototype.Aa=function(e){sd(this.g,new Uv(e))},Bv.prototype.za=function(e){sd(this.g,new Vv)},Bv.prototype.ya=function(){sd(this.g,"b")},uh(qv,(function(){this.blockSize=-1})),qv.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},qv.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)zv(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){zv(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){zv(this,r),i=0;break}}this.h=i,this.i+=t},qv.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Kv={};function Qv(e){return-128<=e&&128>e?bh(Kv,e,(function(e){return new Wv([0|e],0>e?-1:0)})):new Wv([0|e],0>e?-1:0)}function Hv(e){if(isNaN(e)||!isFinite(e))return $v;if(0>e)return ey(Hv(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Gv;return new Wv(t,0)}var Gv=4294967296,$v=Qv(0),Yv=Qv(1),Xv=Qv(16777216);function Jv(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Zv(e){return-1==e.h}function ey(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Wv(n,~e.h).add(Yv)}function ty(e,t){return e.add(ey(t))}function ny(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function ry(e,t){this.g=e,this.h=t}function iy(e,t){if(Jv(t))throw Error("division by zero");if(Jv(e))return new ry($v,$v);if(Zv(e))return t=iy(ey(e),t),new ry(ey(t.g),ey(t.h));if(Zv(t))return t=iy(e,ey(t)),new ry(ey(t.g),t.h);if(30<e.g.length){if(Zv(e)||Zv(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Yv,r=t;0>=r.X(e);)n=ay(n),r=ay(r);var i=oy(n,1),a=oy(r,1);for(r=oy(r,2),n=oy(n,2);!Jv(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=oy(r,1),n=oy(n,1)}return t=ty(e,i.R(t)),new ry(i,t)}for(i=$v;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=Hv(n)).R(t);Zv(o)||0<o.X(e);)o=(a=Hv(n-=r)).R(t);Jv(a)&&(a=Yv),i=i.add(a),e=ty(e,o)}return new ry(i,e)}function ay(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Wv(n,e.h)}function oy(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new Wv(i,e.h)}(Hf=Wv.prototype).ea=function(){if(Zv(this))return-ey(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Gv+r)*t,t*=Gv}return e},Hf.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Jv(this))return"0";if(Zv(this))return"-"+ey(this).toString(e);for(var t=Hv(Math.pow(e,6)),n=this,r="";;){var i=iy(n,t).g,a=((0<(n=ty(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Jv(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Hf.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Hf.X=function(e){return Zv(e=ty(this,e))?-1:Jv(e)?0:1},Hf.abs=function(){return Zv(this)?ey(this):this},Hf.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new Wv(n,-2147483648&n[n.length-1]?-1:0)},Hf.R=function(e){if(Jv(this)||Jv(e))return $v;if(Zv(this))return Zv(e)?ey(this).R(ey(e)):ey(ey(this).R(e));if(Zv(e))return ey(this.R(ey(e)));if(0>this.X(Xv)&&0>e.X(Xv))return Hv(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),u=e.D(i)>>>16,s=65535&e.D(i);n[2*r+2*i]+=o*s,ny(n,2*r+2*i),n[2*r+2*i+1]+=a*s,ny(n,2*r+2*i+1),n[2*r+2*i+1]+=o*u,ny(n,2*r+2*i+1),n[2*r+2*i+2]+=a*u,ny(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Wv(n,0)},Hf.gb=function(e){return iy(this,e).h},Hf.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Wv(n,this.h&e.h)},Hf.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Wv(n,this.h|e.h)},Hf.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Wv(n,this.h^e.h)},jv.prototype.createWebChannel=jv.prototype.g,Mv.prototype.send=Mv.prototype.u,Mv.prototype.open=Mv.prototype.m,Mv.prototype.close=Mv.prototype.close,Bd.NO_ERROR=0,Bd.TIMEOUT=8,Bd.HTTP_ERROR=6,qd.COMPLETE="complete",Kd.EventType=Hd,Hd.OPEN="a",Hd.CLOSE="b",Hd.ERROR="c",Hd.MESSAGE="d",ud.prototype.listen=ud.prototype.O,rv.prototype.listenOnce=rv.prototype.P,rv.prototype.getLastError=rv.prototype.Sa,rv.prototype.getLastErrorCode=rv.prototype.Ia,rv.prototype.getStatus=rv.prototype.da,rv.prototype.getResponseJson=rv.prototype.Wa,rv.prototype.getResponseText=rv.prototype.ja,rv.prototype.send=rv.prototype.ha,rv.prototype.setWithCredentials=rv.prototype.Oa,qv.prototype.digest=qv.prototype.l,qv.prototype.reset=qv.prototype.reset,qv.prototype.update=qv.prototype.j,Wv.prototype.add=Wv.prototype.add,Wv.prototype.multiply=Wv.prototype.R,Wv.prototype.modulo=Wv.prototype.gb,Wv.prototype.compare=Wv.prototype.X,Wv.prototype.toNumber=Wv.prototype.ea,Wv.prototype.toString=Wv.prototype.toString,Wv.prototype.getBits=Wv.prototype.D,Wv.fromNumber=Hv,Wv.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return ey(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Hv(Math.pow(n,8)),i=$v,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+o),n);8>o?(o=Hv(Math.pow(n,o)),i=i.R(o).add(Hv(u))):i=(i=i.R(r)).add(Hv(u))}return i};var uy=$f.createWebChannelTransport=function(){return new jv},sy=$f.getStatEventTarget=function(){return Rd()},cy=$f.ErrorCode=Bd,ly=$f.EventType=qd,fy=$f.Event=Od,hy=$f.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},dy=$f.FetchXmlHttpFactory=Yp,py=$f.WebChannel=Kd,vy=$f.XhrIo=rv,yy=$f.Md5=qv,my=$f.Integer=Wv,gy="@firebase/firestore",ky=function(){function e(t){h(this,e),this.uid=t}return y(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();ky.UNAUTHENTICATED=new ky(null),ky.GOOGLE_CREDENTIALS=new ky("google-credentials-uid"),ky.FIRST_PARTY=new ky("first-party-uid"),ky.MOCK_USER=new ky("mock-user");var by="9.22.0",wy=new Wr("@firebase/firestore");function _y(){return wy.logLevel}function xy(e){if(wy.logLevel<=jr.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Cy);wy.debug.apply(wy,["Firestore (".concat(by,"): ").concat(e)].concat(f(i)))}}function Sy(e){if(wy.logLevel<=jr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Cy);wy.error.apply(wy,["Firestore (".concat(by,"): ").concat(e)].concat(f(i)))}}function Ey(e){if(wy.logLevel<=jr.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Cy);wy.warn.apply(wy,["Firestore (".concat(by,"): ").concat(e)].concat(f(i)))}}function Cy(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Ty(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(by,") INTERNAL ASSERTION FAILED: ")+e;throw Sy(t),new Error(t)}function Iy(e,t){e||Ty()}function Ay(e,t){return e}var Ny={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Dy=function(e){g(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return y(n)}(fr),Oy=y((function e(){var t=this;h(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Py=y((function e(t,n){h(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Ry=function(){function e(){h(this,e)}return y(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(ky.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Fy=function(){function e(t){h(this,e),this.token=t,this.changeListener=null}return y(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Ly=function(){function e(t){h(this,e),this.t=t,this.currentUser=ky.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return y(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Oy;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Oy,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Bn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){xy("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(xy("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Oy)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(xy("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Iy("string"==typeof n.accessToken),new Py(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Iy(null===e||"string"==typeof e),new ky(e)}}]),e}(),jy=function(){function e(t,n,r){h(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=ky.FIRST_PARTY,this.g=new Map}return y(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),My=function(){function e(t,n,r){h(this,e),this.h=t,this.l=n,this.m=r}return y(e,[{key:"getToken",value:function(){return Promise.resolve(new jy(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(ky.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Uy=y((function e(t){h(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Vy=function(){function e(t){h(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return y(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&xy("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,xy("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){xy("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?i(e):xy("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Iy("string"==typeof t.token),e.T=t.token,new Uy(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function By(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var qy=function(){function e(){h(this,e)}return y(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=By(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function zy(e,t){return e<t?-1:e>t?1:0}function Wy(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Ky(e){return e+"\0"}var Qy=function(){function e(t,n){if(h(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Dy(Ny.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Dy(Ny.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Dy(Ny.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Dy(Ny.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return y(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?zy(this.nanoseconds,e.nanoseconds):zy(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Hy=function(){function e(t){h(this,e),this.timestamp=t}return y(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Qy(0,0))}},{key:"max",value:function(){return new e(new Qy(253402300799,999999999))}}]),e}(),Gy=function(){function e(t,n,r){h(this,e),void 0===n?n=0:n>t.length&&Ty(),void 0===r?r=t.length-n:r>t.length-n&&Ty(),this.segments=t,this.offset=n,this.len=r}return y(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),$y=function(e){g(n,e);var t=_(n);function n(){return h(this,n),t.apply(this,arguments)}return y(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Dy(Ny.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,f(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Gy),Yy=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Xy=function(e){g(n,e);var t=_(n);function n(){return h(this,n),t.apply(this,arguments)}return y(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Yy.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Dy(Ny.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Dy(Ny.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Dy(Ny.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Dy(Ny.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Gy),Jy=function(){function e(t){h(this,e),this.path=t}return y(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===$y.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e($y.fromString(t))}},{key:"fromName",value:function(t){return new e($y.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e($y.emptyPath())}},{key:"comparator",value:function(e,t){return $y.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new $y(t.slice()))}}]),e}(),Zy=y((function e(t,n,r,i){h(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function em(e){return e.fields.find((function(e){return 2===e.kind}))}function tm(e){return e.fields.filter((function(e){return 2!==e.kind}))}Zy.UNKNOWN_ID=-1;var nm=y((function e(t,n){h(this,e),this.fieldPath=t,this.kind=n}));var rm=function(){function e(t,n){h(this,e),this.sequenceNumber=t,this.offset=n}return y(e,null,[{key:"empty",value:function(){return new e(0,om.min())}}]),e}();function im(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Hy.fromTimestamp(1e9===r?new Qy(n+1,0):new Qy(n,r));return new om(i,Jy.empty(),t)}function am(e){return new om(e.readTime,e.key,-1)}var om=function(){function e(t,n,r){h(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return y(e,null,[{key:"min",value:function(){return new e(Hy.min(),Jy.empty(),-1)}},{key:"max",value:function(){return new e(Hy.max(),Jy.empty(),-1)}}]),e}();function um(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Jy.comparator(e.documentKey,t.documentKey))?n:zy(e.largestBatchId,t.largestBatchId)}var sm="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",cm=function(){function e(){h(this,e),this.onCommittedListeners=[]}return y(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function lm(e){return fm.apply(this,arguments)}function fm(){return(fm=Bn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Ny.FAILED_PRECONDITION&&t.message===sm){e.next=2;break}throw t;case 2:xy("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var hm=function(){function e(t){var n=this;h(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return y(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Ty(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=E(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),dm=function(){function e(t,n){var r=this;h(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.v=new Oy,this.transaction.oncomplete=function(){r.v.resolve()},this.transaction.onabort=function(){n.error?r.v.reject(new ym(t,n.error)):r.v.resolve()},this.transaction.onerror=function(e){var n=wm(e.target.error);r.v.reject(new ym(t,n))}}return y(e,[{key:"R",get:function(){return this.v.promise}},{key:"abort",value:function(e){e&&this.v.reject(e),this.aborted||(xy("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"P",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new gm(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new ym(n,t)}}}]),e}(),pm=function(){function e(t,n,r){h(this,e),this.name=t,this.version=n,this.V=r,12.2===e.S(or())&&Sy("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return y(e,[{key:"$",value:function(){var e=Bn(Un().mark((function e(t){var n=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return xy("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new ym(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Dy(Ny.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Dy(Ny.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new ym(t,n))},i.onupgradeneeded=function(e){xy("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.V.O(t,i.transaction,e.oldVersion,n.version).next((function(){xy("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.F&&(this.db.onversionchange=function(e){return n.F(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"B",value:function(e){this.F=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Bn(Un().mark((function e(t,n,r,i){var a,o,u,s,c=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=Un().mark((function e(){var n,u,s,l;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.$(t);case 4:return c.db=e.sent,n=dm.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.P(),e})).catch((function(e){return n.abort(e),hm.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.R;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,l="FirebaseError"!==s.name&&o<3,xy("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if("object"!==typeof(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return xy("SimpleDb","Removing database:",e),km(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!lr())return!1;if(e.C())return!0;var t=or(),n=e.S(t),r=0<n&&n<10,i=e.N(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"N",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),vm=function(){function e(t){h(this,e),this.L=t,this.q=!1,this.U=null}return y(e,[{key:"isDone",get:function(){return this.q}},{key:"K",get:function(){return this.U}},{key:"cursor",set:function(e){this.L=e}},{key:"done",value:function(){this.q=!0}},{key:"G",value:function(e){this.U=e}},{key:"delete",value:function(){return km(this.L.delete())}}]),e}(),ym=function(e){g(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this,Ny.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return y(n)}(Dy);function mm(e){return"IndexedDbTransactionError"===e.name}var gm=function(){function e(t){h(this,e),this.store=t}return y(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(xy("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(xy("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),km(n)}},{key:"add",value:function(e){return xy("SimpleDb","ADD",this.store.name,e,e),km(this.store.add(e))}},{key:"get",value:function(e){var t=this;return km(this.store.get(e)).next((function(n){return void 0===n&&(n=null),xy("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return xy("SimpleDb","DELETE",this.store.name,e),km(this.store.delete(e))}},{key:"count",value:function(){return xy("SimpleDb","COUNT",this.store.name),km(this.store.count())}},{key:"j",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.W(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new hm((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new hm((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){xy("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.W(r,(function(e,t,n){return n.delete()}))}},{key:"X",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.W(r,t)}},{key:"Z",value:function(e){var t=this.cursor({});return new hm((function(n,r){t.onerror=function(e){var t=wm(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"W",value:function(e,t){var n=[];return new hm((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new vm(i),o=t(i.primaryKey,i.value,a);if(o instanceof hm){var u=o.catch((function(e){return a.done(),hm.reject(e)}));n.push(u)}a.isDone?r():null===a.K?i.continue():i.continue(a.K)}else r()}})).next((function(){return hm.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function km(e){return new hm((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=wm(e.target.error);n(t)}}))}var bm=!1;function wm(e){var t=pm.S(or());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Dy("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return bm||(bm=!0,setTimeout((function(){throw r}),0)),r}}return e}var _m=function(){function e(t,n){h(this,e),this.asyncQueue=t,this.tt=n,this.task=null}return y(e,[{key:"start",value:function(){this.et(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"et",value:function(e){var t=this;xy("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,Bn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=xy,e.t1="Documents written: ",e.next=6,t.tt.nt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!mm(e.t4)){e.next=17;break}xy("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,lm(e.t4);case 19:return e.next=21,t.et(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),xm=function(){function e(t,n){h(this,e),this.localStore=t,this.persistence=n}return y(e,[{key:"nt",value:function(){var e=Bn(Un().mark((function e(){var t,n=this,r=arguments;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.st(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"st",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return hm.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return xy("IndexBackiller","Processing collection: ".concat(t)),n.it(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"it",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.rt(i,n)})).next((function(n){return xy("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"rt",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=am(t);um(r,n)>0&&(n=r)})),new om(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Sm=function(){function e(t,n){var r=this;h(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return y(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function Em(e){return null==e}function Cm(e){return 0===e&&1/e==-1/0}function Tm(e){return"number"==typeof e&&Number.isInteger(e)&&!Cm(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Im(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Nm(t)),t=Am(e.get(n),t);return Nm(t)}function Am(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Nm(e){return e+"\x01\x01"}function Dm(e){var t=e.length;if(Iy(t>=2),2===t)return Iy("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),$y.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Ty(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Ty()}a=o+2}return new $y(r)}Sm.ct=-1;var Om=["userId","batchId"];function Pm(e,t){return[e,Im(t)]}function Rm(e,t,n){return[e,Im(t),n]}var Fm={},Lm=["prefixPath","collectionGroup","readTime","documentId"],jm=["prefixPath","collectionGroup","documentId"],Mm=["collectionGroup","readTime","prefixPath","documentId"],Um=["canonicalId","targetId"],Vm=["targetId","path"],Bm=["path","targetId"],qm=["collectionId","parent"],zm=["indexId","uid"],Wm=["uid","sequenceNumber"],Km=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Qm=["indexId","uid","orderedDocumentKey"],Hm=["userId","collectionPath","documentId"],Gm=["userId","collectionPath","largestBatchId"],$m=["userId","collectionGroup","largestBatchId"],Ym=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Xm=[].concat(f(Ym),["documentOverlays"]),Jm=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Zm=Jm,eg=[].concat(Zm,["indexConfiguration","indexState","indexEntries"]),tg=function(e){g(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this)).ht=e,i.currentSequenceNumber=r,i}return y(n)}(cm);function ng(e,t){var n=Ay(e);return pm.M(n.ht,t)}function rg(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ig(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ag(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var og=function(){function e(t,n){h(this,e),this.comparator=t,this.root=n||sg.EMPTY}return y(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,sg.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,sg.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new ug(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new ug(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new ug(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new ug(this.root,e,this.comparator,!0)}}]),e}(),ug=function(){function e(t,n,r,i){h(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return y(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),sg=function(){function e(t,n,r,i,a){h(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return y(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Ty();if(this.right.isRed())throw Ty();var e=this.left.check();if(e!==this.right.check())throw Ty();return e+(this.isRed()?0:1)}}]),e}();sg.EMPTY=null,sg.RED=!0,sg.BLACK=!1,sg.EMPTY=new(function(){function e(){h(this,e),this.size=0}return y(e,[{key:"key",get:function(){throw Ty()}},{key:"value",get:function(){throw Ty()}},{key:"color",get:function(){throw Ty()}},{key:"left",get:function(){throw Ty()}},{key:"right",get:function(){throw Ty()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new sg(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var cg=function(){function e(t){h(this,e),this.comparator=t,this.data=new og(this.comparator)}return y(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new lg(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new lg(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),lg=function(){function e(t){h(this,e),this.iter=t}return y(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function fg(e){return e.hasNext()?e.getNext():void 0}var hg=function(){function e(t){h(this,e),this.fields=t,t.sort(Xy.comparator)}return y(e,[{key:"unionWith",value:function(t){var n,r=new cg(Xy.comparator),i=E(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=E(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=E(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Wy(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),dg=function(e){g(n,e);var t=_(n);function n(){var e;return h(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return y(n)}(S(Error));var pg=function(e){function t(e){h(this,t),this.binaryString=e}return y(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return zy(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new dg("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();pg.EMPTY_BYTE_STRING=new pg("");var vg=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yg(e){if(Iy(!!e),"string"==typeof e){var t=0,n=vg.exec(e);if(Iy(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:mg(e.seconds),nanos:mg(e.nanos)}}function mg(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function gg(e){return"string"==typeof e?pg.fromBase64String(e):pg.fromUint8Array(e)}function kg(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function bg(e){var t=e.mapValue.fields.__previous_value__;return kg(t)?bg(t):t}function wg(e){var t=yg(e.mapValue.fields.__local_write_time__.timestampValue);return new Qy(t.seconds,t.nanos)}var _g=y((function e(t,n,r,i,a,o,u,s,c){h(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=s,this.useFetchStreams=c})),xg=function(){function e(t,n){h(this,e),this.projectId=t,this.database=n||"(default)"}return y(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),Sg={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Eg={nullValue:"NULL_VALUE"};function Cg(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?kg(e)?4:Vg(e)?9007199254740991:10:Ty()}function Tg(e,t){if(e===t)return!0;var n=Cg(e);if(n!==Cg(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return wg(e).isEqual(wg(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=yg(e.timestampValue),r=yg(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return gg(e.bytesValue).isEqual(gg(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return mg(e.geoPointValue.latitude)===mg(t.geoPointValue.latitude)&&mg(e.geoPointValue.longitude)===mg(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return mg(e.integerValue)===mg(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=mg(e.doubleValue),r=mg(t.doubleValue);return n===r?Cm(n)===Cm(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Wy(e.arrayValue.values||[],t.arrayValue.values||[],Tg);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(rg(n)!==rg(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Tg(n[i],r[i])))return!1;return!0}(e,t);default:return Ty()}}function Ig(e,t){return void 0!==(e.values||[]).find((function(e){return Tg(e,t)}))}function Ag(e,t){if(e===t)return 0;var n=Cg(e),r=Cg(t);if(n!==r)return zy(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return zy(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=mg(e.integerValue||e.doubleValue),r=mg(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ng(e.timestampValue,t.timestampValue);case 4:return Ng(wg(e),wg(t));case 5:return zy(e.stringValue,t.stringValue);case 6:return function(e,t){var n=gg(e),r=gg(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=zy(n[i],r[i]);if(0!==a)return a}return zy(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=zy(mg(e.latitude),mg(t.latitude));return 0!==n?n:zy(mg(e.longitude),mg(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Ag(n[i],r[i]);if(a)return a}return zy(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Sg.mapValue&&t===Sg.mapValue)return 0;if(e===Sg.mapValue)return 1;if(t===Sg.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=zy(r[o],a[o]);if(0!==u)return u;var s=Ag(n[r[o]],i[a[o]]);if(0!==s)return s}return zy(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Ty()}}function Ng(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return zy(e,t);var n=yg(e),r=yg(t),i=zy(n.seconds,r.seconds);return 0!==i?i:zy(n.nanos,r.nanos)}function Dg(e){return Og(e)}function Og(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=yg(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?gg(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Jy.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=E(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Og(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=E(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Og(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Ty();var t,n}function Pg(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Rg(e){return!!e&&"integerValue"in e}function Fg(e){return!!e&&"arrayValue"in e}function Lg(e){return!!e&&"nullValue"in e}function jg(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Mg(e){return!!e&&"mapValue"in e}function Ug(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return ig(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Ug(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Ug(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Vg(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Bg(e){return"nullValue"in e?Eg:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Pg(xg.empty(),Jy.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Ty()}function qg(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Pg(xg.empty(),Jy.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Sg:Ty()}function zg(e,t){var n=Ag(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Wg(e,t){var n=Ag(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Kg=function(){function e(t){h(this,e),this.value=t}return y(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Mg(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ug(t)}},{key:"setAll",value:function(e){var t=this,n=Xy.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Ug(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Mg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Tg(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Mg(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){ig(t,(function(t,n){return e[t]=n}));var r,i=E(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Ug(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Qg(e){var t=[];return ig(e.fields,(function(e,n){var r=new Xy([e]);if(Mg(n)){var i=Qg(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=E(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new hg(t)}var Hg=function(){function e(t,n,r,i,a,o,u){h(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return y(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(Hy.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Kg.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Kg.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Hy.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Hy.min(),Hy.min(),Hy.min(),Kg.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,Hy.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Hy.min(),Hy.min(),Kg.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Hy.min(),Hy.min(),Kg.empty(),2)}}]),e}(),Gg=y((function e(t,n){h(this,e),this.position=t,this.inclusive=n}));function $g(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Jy.comparator(Jy.fromName(o.referenceValue),n.key):Ag(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Yg(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Tg(e.position[n],t.position[n]))return!1;return!0}var Xg=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";h(this,e),this.field=t,this.dir=n}));function Jg(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Zg=y((function e(){h(this,e)})),ek=function(e){g(n,e);var t=_(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ag(t,this.value)):null!==t&&Cg(this.value)===Cg(t)&&this.matchesComparison(Ag(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ty()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new lk(e,t,r):"array-contains"===t?new pk(e,r):"in"===t?new vk(e,r):"not-in"===t?new yk(e,r):"array-contains-any"===t?new mk(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new fk(e,n):new hk(e,n)}}]),n}(Zg),tk=function(e){g(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this)).filters=e,i.op=r,i.lt=null,i}return y(n,[{key:"matches",value:function(e){return nk(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.lt||(this.lt=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.lt}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.ft((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"ft",value:function(e){var t,n=E(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(Zg);function nk(e){return"and"===e.op}function rk(e){return"or"===e.op}function ik(e){return ak(e)&&nk(e)}function ak(e){var t,n=E(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof tk)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function ok(e){if(e instanceof ek)return e.field.canonicalString()+e.op.toString()+Dg(e.value);if(ik(e))return e.filters.map((function(e){return ok(e)})).join(",");var t=e.filters.map((function(e){return ok(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function uk(e,t){return e instanceof ek?function(e,t){return t instanceof ek&&e.op===t.op&&e.field.isEqual(t.field)&&Tg(e.value,t.value)}(e,t):e instanceof tk?function(e,t){return t instanceof tk&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&uk(n,t.filters[r])}),!0)}(e,t):void Ty()}function sk(e,t){var n=e.filters.concat(t);return tk.create(n,e.op)}function ck(e){return e instanceof ek?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Dg(e.value))}(e):e instanceof tk?function(e){return e.op.toString()+" {"+e.getFilters().map(ck).join(" ,")+"}"}(e):"Filter"}var lk=function(e){g(n,e);var t=_(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this,e,r,i)).key=Jy.fromName(i.referenceValue),a}return y(n,[{key:"matches",value:function(e){var t=Jy.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(ek),fk=function(e){g(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,"in",r)).keys=dk("in",r),i}return y(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(ek),hk=function(e){g(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,"not-in",r)).keys=dk("not-in",r),i}return y(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(ek);function dk(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Jy.fromName(e.referenceValue)}))}var pk=function(e){g(n,e);var t=_(n);function n(e,r){return h(this,n),t.call(this,e,"array-contains",r)}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Fg(t)&&Ig(t.arrayValue,this.value)}}]),n}(ek),vk=function(e){g(n,e);var t=_(n);function n(e,r){return h(this,n),t.call(this,e,"in",r)}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Ig(this.value.arrayValue,t)}}]),n}(ek),yk=function(e){g(n,e);var t=_(n);function n(e,r){return h(this,n),t.call(this,e,"not-in",r)}return y(n,[{key:"matches",value:function(e){if(Ig(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Ig(this.value.arrayValue,t)}}]),n}(ek),mk=function(e){g(n,e);var t=_(n);function n(e,r){return h(this,n),t.call(this,e,"array-contains-any",r)}return y(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Fg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Ig(t.value.arrayValue,e)}))}}]),n}(ek),gk=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;h(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.dt=null}));function kk(e){return new gk(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function bk(e){var t=Ay(e);if(null===t.dt){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return ok(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Em(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Dg(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Dg(e)})).join(",")),t.dt=n}return t.dt}function wk(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Jg(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!uk(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Yg(e.startAt,t.startAt)&&Yg(e.endAt,t.endAt)}function _k(e){return Jy.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function xk(e,t){return e.filters.filter((function(e){return e instanceof ek&&e.field.isEqual(t)}))}function Sk(e,t,n){var r,i=Eg,a=!0,o=E(xk(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Eg,c=!0;switch(u.op){case"<":case"<=":s=Bg(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Eg}zg({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];zg({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function Ek(e,t,n){var r,i=Sg,a=!0,o=E(xk(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Sg,c=!0;switch(u.op){case">=":case">":s=qg(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Sg}Wg({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Wg({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var Ck=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;h(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.wt=null,this._t=null,this.startAt,this.endAt}));function Tk(e,t,n,r,i,a,o,u){return new Ck(e,t,n,r,i,a,o,u)}function Ik(e){return new Ck(e)}function Ak(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Nk(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Dk(e){var t,n=E(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function Ok(e){return null!==e.collectionGroup}function Pk(e){var t=Ay(e);if(null===t.wt){t.wt=[];var n=Dk(t),r=Nk(t);if(null!==n&&null===r)n.isKeyField()||t.wt.push(new Xg(n)),t.wt.push(new Xg(Xy.keyField(),"asc"));else{var i,a=!1,o=E(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.wt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new Xg(Xy.keyField(),s))}}}return t.wt}function Rk(e){var t=Ay(e);if(!t._t)if("F"===t.limitType)t._t=kk(t.path,t.collectionGroup,Pk(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=E(Pk(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Xg(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Gg(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Gg(t.startAt.position,t.startAt.inclusive):null;t._t=kk(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t._t}function Fk(e,t){t.getFirstInequalityField(),Dk(e);var n=e.filters.concat([t]);return new Ck(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Lk(e,t,n){return new Ck(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function jk(e,t){return wk(Rk(e),Rk(t))&&e.limitType===t.limitType}function Mk(e){return"".concat(bk(Rk(e)),"|lt:").concat(e.limitType)}function Uk(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return ck(e)})).join(", "),"]")),Em(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Dg(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Dg(e)})).join(",")),"Target(".concat(t,")")}(Rk(e)),"; limitType=").concat(e.limitType,")")}function Vk(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Jy.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=E(Pk(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=E(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=$g(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Pk(e),t))&&!(e.endAt&&!function(e,t,n){var r=$g(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Pk(e),t))}(e,t)}function Bk(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function qk(e){return function(t,n){var r,i=!1,a=E(Pk(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=zk(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function zk(e,t,n){var r=e.field.isKeyField()?Jy.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Ag(r,i):Ty()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ty()}}var Wk=function(){function e(t,n){h(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return y(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=E(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){ig(this.inner,(function(t,n){var r,i=E(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return ag(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Kk=new og(Jy.comparator);function Qk(){return Kk}var Hk=new og(Jy.comparator);function Gk(){for(var e=Hk,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function $k(e){var t=Hk;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Yk(){return Jk()}function Xk(){return Jk()}function Jk(){return new Wk((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Zk=new og(Jy.comparator),eb=new cg(Jy.comparator);function tb(){for(var e=eb,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var nb=new cg(zy);function rb(){return nb}function ib(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cm(t)?"-0":t}}function ab(e){return{integerValue:""+e}}function ob(e,t){return Tm(t)?ab(t):ib(e,t)}var ub=y((function e(){h(this,e),this._=void 0}));function sb(e,t,n){return e instanceof fb?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&kg(t)&&(t=bg(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof hb?db(e,t):e instanceof pb?vb(e,t):function(e,t){var n=lb(e,t),r=mb(n)+mb(e.gt);return Rg(n)&&Rg(e.gt)?ab(r):ib(e.serializer,r)}(e,t)}function cb(e,t,n){return e instanceof hb?db(e,t):e instanceof pb?vb(e,t):n}function lb(e,t){return e instanceof yb?Rg(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var fb=function(e){g(n,e);var t=_(n);function n(){return h(this,n),t.apply(this,arguments)}return y(n)}(ub),hb=function(e){g(n,e);var t=_(n);function n(e){var r;return h(this,n),(r=t.call(this)).elements=e,r}return y(n)}(ub);function db(e,t){var n,r=gb(t),i=E(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Tg(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var pb=function(e){g(n,e);var t=_(n);function n(e){var r;return h(this,n),(r=t.call(this)).elements=e,r}return y(n)}(ub);function vb(e,t){var n,r=gb(t),i=E(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Tg(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var yb=function(e){g(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this)).serializer=e,i.gt=r,i}return y(n)}(ub);function mb(e){return mg(e.integerValue||e.doubleValue)}function gb(e){return Fg(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var kb=y((function e(t,n){h(this,e),this.field=t,this.transform=n}));var bb=y((function e(t,n){h(this,e),this.version=t,this.transformResults=n})),wb=function(){function e(t,n){h(this,e),this.updateTime=t,this.exists=n}return y(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function _b(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var xb=y((function e(){h(this,e)}));function Sb(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Lb(e.key,wb.none()):new Ab(e.key,e.data,wb.none());var n,r=e.data,i=Kg.empty(),a=new cg(Xy.comparator),o=E(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new Nb(e.key,i,new hg(a.toArray()),wb.none())}function Eb(e,t,n){e instanceof Ab?function(e,t,n){var r=e.value.clone(),i=Ob(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Nb?function(e,t,n){if(_b(e.precondition,t)){var r=Ob(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Db(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Cb(e,t,n,r){return e instanceof Ab?function(e,t,n,r){if(!_b(e.precondition,t))return n;var i=e.value.clone(),a=Pb(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Nb?function(e,t,n,r){if(!_b(e.precondition,t))return n;var i=Pb(e.fieldTransforms,r,t),a=t.data;return a.setAll(Db(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return _b(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Tb(e,t){var n,r=null,i=E(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=lb(a.transform,o||null);null!=u&&(null===r&&(r=Kg.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Ib(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Wy(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof hb&&t instanceof hb||e instanceof pb&&t instanceof pb?Wy(e.elements,t.elements,Tg):e instanceof yb&&t instanceof yb?Tg(e.gt,t.gt):e instanceof fb&&t instanceof fb}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Ab=function(e){g(n,e);var t=_(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return h(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return y(n,[{key:"getFieldMask",value:function(){return null}}]),n}(xb),Nb=function(e){g(n,e);var t=_(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return h(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return y(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(xb);function Db(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Ob(e,t,n){var r=new Map;Iy(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,cb(o,u,n[i]))}return r}function Pb(e,t,n){var r,i=new Map,a=E(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,sb(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Rb,Fb,Lb=function(e){g(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return y(n,[{key:"getFieldMask",value:function(){return null}}]),n}(xb),jb=function(e){g(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return y(n,[{key:"getFieldMask",value:function(){return null}}]),n}(xb),Mb=function(){function e(t,n,r,i){h(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return y(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Eb(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=E(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Cb(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=E(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=Cb(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Xk();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=Sb(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Hy.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),tb())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Wy(this.mutations,e.mutations,(function(e,t){return Ib(e,t)}))&&Wy(this.baseMutations,e.baseMutations,(function(e,t){return Ib(e,t)}))}}]),e}(),Ub=function(){function e(t,n,r,i){h(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return y(e,null,[{key:"from",value:function(t,n,r){Iy(t.mutations.length===r.length);for(var i=Zk,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Vb=function(){function e(t,n){h(this,e),this.largestBatchId=t,this.mutation=n}return y(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Bb=y((function e(t,n){h(this,e),this.count=t,this.unchangedNames=n}));function qb(e){switch(e){default:return Ty();case Ny.CANCELLED:case Ny.UNKNOWN:case Ny.DEADLINE_EXCEEDED:case Ny.RESOURCE_EXHAUSTED:case Ny.INTERNAL:case Ny.UNAVAILABLE:case Ny.UNAUTHENTICATED:return!1;case Ny.INVALID_ARGUMENT:case Ny.NOT_FOUND:case Ny.ALREADY_EXISTS:case Ny.PERMISSION_DENIED:case Ny.FAILED_PRECONDITION:case Ny.ABORTED:case Ny.OUT_OF_RANGE:case Ny.UNIMPLEMENTED:case Ny.DATA_LOSS:return!0}}function zb(e){if(void 0===e)return Sy("GRPC error has no .code"),Ny.UNKNOWN;switch(e){case Rb.OK:return Ny.OK;case Rb.CANCELLED:return Ny.CANCELLED;case Rb.UNKNOWN:return Ny.UNKNOWN;case Rb.DEADLINE_EXCEEDED:return Ny.DEADLINE_EXCEEDED;case Rb.RESOURCE_EXHAUSTED:return Ny.RESOURCE_EXHAUSTED;case Rb.INTERNAL:return Ny.INTERNAL;case Rb.UNAVAILABLE:return Ny.UNAVAILABLE;case Rb.UNAUTHENTICATED:return Ny.UNAUTHENTICATED;case Rb.INVALID_ARGUMENT:return Ny.INVALID_ARGUMENT;case Rb.NOT_FOUND:return Ny.NOT_FOUND;case Rb.ALREADY_EXISTS:return Ny.ALREADY_EXISTS;case Rb.PERMISSION_DENIED:return Ny.PERMISSION_DENIED;case Rb.FAILED_PRECONDITION:return Ny.FAILED_PRECONDITION;case Rb.ABORTED:return Ny.ABORTED;case Rb.OUT_OF_RANGE:return Ny.OUT_OF_RANGE;case Rb.UNIMPLEMENTED:return Ny.UNIMPLEMENTED;case Rb.DATA_LOSS:return Ny.DATA_LOSS;default:return Ty()}}(Fb=Rb||(Rb={}))[Fb.OK=0]="OK",Fb[Fb.CANCELLED=1]="CANCELLED",Fb[Fb.UNKNOWN=2]="UNKNOWN",Fb[Fb.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fb[Fb.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fb[Fb.NOT_FOUND=5]="NOT_FOUND",Fb[Fb.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fb[Fb.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fb[Fb.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fb[Fb.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fb[Fb.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fb[Fb.ABORTED=10]="ABORTED",Fb[Fb.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fb[Fb.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fb[Fb.INTERNAL=13]="INTERNAL",Fb[Fb.UNAVAILABLE=14]="UNAVAILABLE",Fb[Fb.DATA_LOSS=15]="DATA_LOSS";var Wb=function(){function e(){h(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return y(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return Kb}},{key:"getOrCreateInstance",value:function(){return null===Kb&&(Kb=new e),Kb}}]),e}(),Kb=null;function Qb(){return new TextEncoder}var Hb=new my([4294967295,4294967295],0);function Gb(e){var t=Qb().encode(e),n=new yy;return n.update(t),new Uint8Array(n.digest())}function $b(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new my([n,r],0),new my([i,a],0)]}var Yb=function(){function e(t,n,r){if(h(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Xb("Invalid padding: ".concat(n));if(r<0)throw new Xb("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new Xb("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new Xb("Invalid padding when bitmap length is 0: ".concat(n));this.It=8*t.length-n,this.Tt=my.fromNumber(this.It)}return y(e,[{key:"Et",value:function(e,t,n){var r=e.add(t.multiply(my.fromNumber(n)));return 1===r.compare(Hb)&&(r=new my([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}},{key:"At",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"vt",value:function(e){if(0===this.It)return!1;for(var t=c($b(Gb(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Et(n,r,i);if(!this.At(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.It)for(var t=c($b(Gb(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Et(n,r,i);this.Rt(a)}}},{key:"Rt",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),Xb=function(e){g(n,e);var t=_(n);function n(){var e;return h(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return y(n)}(S(Error)),Jb=function(){function e(t,n,r,i,a){h(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return y(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,Zb.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Hy.min(),i,new og(zy),Qk(),tb())}}]),e}(),Zb=function(){function e(t,n,r,i,a){h(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return y(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,tb(),tb(),tb())}}]),e}(),ew=y((function e(t,n,r,i){h(this,e),this.Pt=t,this.removedTargetIds=n,this.key=r,this.bt=i})),tw=y((function e(t,n){h(this,e),this.targetId=t,this.Vt=n})),nw=y((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:pg.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;h(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),rw=function(){function e(){h(this,e),this.St=0,this.Dt=ow(),this.Ct=pg.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}return y(e,[{key:"current",get:function(){return this.xt}},{key:"resumeToken",get:function(){return this.Ct}},{key:"kt",get:function(){return 0!==this.St}},{key:"Mt",get:function(){return this.Nt}},{key:"$t",value:function(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}},{key:"Ot",value:function(){var e=tb(),t=tb(),n=tb();return this.Dt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ty()}})),new Zb(this.Ct,this.xt,e,t,n)}},{key:"Ft",value:function(){this.Nt=!1,this.Dt=ow()}},{key:"Bt",value:function(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}},{key:"Lt",value:function(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}},{key:"qt",value:function(){this.St+=1}},{key:"Ut",value:function(){this.St-=1}},{key:"Kt",value:function(){this.Nt=!0,this.xt=!0}}]),e}(),iw=function(){function e(t){h(this,e),this.Gt=t,this.Qt=new Map,this.jt=Qk(),this.zt=aw(),this.Wt=new og(zy)}return y(e,[{key:"Ht",value:function(e){var t,n=E(e.Pt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.bt&&e.bt.isFoundDocument()?this.Jt(r,e.bt):this.Yt(r,e.key,e.bt)}}catch(u){n.e(u)}finally{n.f()}var i,a=E(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Yt(o,e.key,e.bt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Xt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Zt(n);switch(e.state){case 0:t.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||t.removeTarget(n);break;case 3:t.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:t.te(n)&&(t.ee(n),r.$t(e.resumeToken));break;default:Ty()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((function(e,r){n.te(r)&&t(r)}))}},{key:"ne",value:function(e){var t,n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){var a=i.target;if(_k(a))if(0===r){var o=new Jy(a.path);this.Yt(n,o,Hg.newNoDocument(o,Hy.min()))}else Iy(1===r);else{var u=this.ie(n);if(u!==r){var s=this.re(e,u);if(0!==s){this.ee(n);var c=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,c)}null===(t=Wb.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,a,o,u,s,c={localCacheCount:t,existenceFilterCount:n.count},l=n.unchangedNames;return l&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==l?void 0:l.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(a=null===(i=null==l?void 0:l.bits)||void 0===i?void 0:i.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(s=null===(u=null==l?void 0:l.bits)||void 0===u?void 0:u.padding)&&void 0!==s?s:0}),c}(s,u,e.Vt))}}}}},{key:"re",value:function(e,t){var n=e.Vt,r=n.unchangedNames,i=n.count;if(!r||!r.bits)return 1;var a,o,u=r.bits,s=u.bitmap,c=void 0===s?"":s,l=u.padding,f=void 0===l?0:l,h=r.hashCount,d=void 0===h?0:h;try{a=gg(c).toUint8Array()}catch(e){if(e instanceof dg)return Ey("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{o=new Yb(a,f,d)}catch(e){return Ey(e instanceof Xb?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===o.It?1:i!==t-this.oe(e.targetId,o)?2:0}},{key:"oe",value:function(e,t){var n=this,r=this.Gt.getRemoteKeysForTarget(e),i=0;return r.forEach((function(r){var a=n.Gt.ue(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());t.vt(o)||(n.Yt(e,r,null),i++)})),i}},{key:"ce",value:function(e){var t=this,n=new Map;this.Qt.forEach((function(r,i){var a=t.se(i);if(a){if(r.current&&_k(a.target)){var o=new Jy(a.target.path);null!==t.jt.get(o)||t.ae(i,o)||t.Yt(i,o,Hg.newNoDocument(o,e))}r.Mt&&(n.set(i,r.Ot()),r.Ft())}}));var r=tb();this.zt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.se(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.jt.forEach((function(t,n){return n.setReadTime(e)}));var i=new Jb(e,n,this.Wt,this.jt,r);return this.jt=Qk(),this.zt=aw(),this.Wt=new og(zy),i}},{key:"Jt",value:function(e,t){if(this.te(e)){var n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}}},{key:"Yt",value:function(e,t,n){if(this.te(e)){var r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Qt.delete(e)}},{key:"ie",value:function(e){var t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"qt",value:function(e){this.Zt(e).qt()}},{key:"Zt",value:function(e){var t=this.Qt.get(e);return t||(t=new rw,this.Qt.set(e,t)),t}},{key:"he",value:function(e){var t=this.zt.get(e);return t||(t=new cg(zy),this.zt=this.zt.insert(e,t)),t}},{key:"te",value:function(e){var t=null!==this.se(e);return t||xy("WatchChangeAggregator","Detected inactive target",e),t}},{key:"se",value:function(e){var t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}},{key:"ee",value:function(e){var t=this;this.Qt.set(e,new rw),this.Gt.getRemoteKeysForTarget(e).forEach((function(n){t.Yt(e,n,null)}))}},{key:"ae",value:function(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}]),e}();function aw(){return new og(Jy.comparator)}function ow(){return new og(Jy.comparator)}var uw={asc:"ASCENDING",desc:"DESCENDING"},sw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cw={and:"AND",or:"OR"},lw=y((function e(t,n){h(this,e),this.databaseId=t,this.useProto3Json=n}));function fw(e,t){return e.useProto3Json||Em(t)?t:{value:t}}function hw(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function dw(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function pw(e,t){return hw(e,t.toTimestamp())}function vw(e){return Iy(!!e),Hy.fromTimestamp(function(e){var t=yg(e);return new Qy(t.seconds,t.nanos)}(e))}function yw(e,t){return function(e){return new $y(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function mw(e){var t=$y.fromString(e);return Iy(Vw(t)),t}function gw(e,t){return yw(e.databaseId,t.path)}function kw(e,t){var n=mw(t);if(n.get(1)!==e.databaseId.projectId)throw new Dy(Ny.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Dy(Ny.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Jy(xw(n))}function bw(e,t){return yw(e.databaseId,t)}function ww(e){var t=mw(e);return 4===t.length?$y.emptyPath():xw(t)}function _w(e){return new $y(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function xw(e){return Iy(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Sw(e,t,n){return{name:gw(e,t),fields:n.value.mapValue.fields}}function Ew(e,t,n){var r=kw(e,t.name),i=vw(t.updateTime),a=t.createTime?vw(t.createTime):Hy.min(),o=new Kg({mapValue:{fields:t.fields}}),u=Hg.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function Cw(e,t){return"found"in t?function(e,t){Iy(!!t.found),t.found.name,t.found.updateTime;var n=kw(e,t.found.name),r=vw(t.found.updateTime),i=t.found.createTime?vw(t.found.createTime):Hy.min(),a=new Kg({mapValue:{fields:t.found.fields}});return Hg.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){Iy(!!t.missing),Iy(!!t.readTime);var n=kw(e,t.missing),r=vw(t.readTime);return Hg.newNoDocument(n,r)}(e,t):Ty()}function Tw(e,t){var n;if(t instanceof Ab)n={update:Sw(e,t.key,t.value)};else if(t instanceof Lb)n={delete:gw(e,t.key)};else if(t instanceof Nb)n={update:Sw(e,t.key,t.data),updateMask:Uw(t.fieldMask)};else{if(!(t instanceof jb))return Ty();n={verify:gw(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof fb)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof hb)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof pb)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof yb)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Ty()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:pw(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ty()}(e,t.precondition)),n}function Iw(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?wb.updateTime(vw(e.updateTime)):void 0!==e.exists?wb.exists(e.exists):wb.none()}(t.currentDocument):wb.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Iy("REQUEST_TIME"===t.setToServerValue),n=new fb;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new hb(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new pb(i)}else"increment"in t?n=new yb(e,t.increment):Ty();var a=Xy.fromServerFormat(t.fieldPath);return new kb(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=kw(e,t.update.name),a=new Kg({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new hg(t.map((function(e){return Xy.fromServerFormat(e)})))}(t.updateMask);return new Nb(i,a,o,n,r)}return new Ab(i,a,n,r)}if(t.delete){var u=kw(e,t.delete);return new Lb(u,n)}if(t.verify){var s=kw(e,t.verify);return new jb(s,n)}return Ty()}function Aw(e,t){return{documents:[bw(e,t.path)]}}function Nw(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=bw(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=bw(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return Mw(tk.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Lw(e.field),direction:Pw(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=fw(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Dw(e){var t=ww(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Iy(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=Ow(e);return t instanceof tk&&ik(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Xg(jw(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Em(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Gg(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Gg(n,t)}(n.endAt)),Tk(t,i,u,o,s,"F",c,l)}function Ow(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=jw(e.unaryFilter.field);return ek.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=jw(e.unaryFilter.field);return ek.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=jw(e.unaryFilter.field);return ek.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=jw(e.unaryFilter.field);return ek.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ty()}}(e):void 0!==e.fieldFilter?function(e){return ek.create(jw(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ty()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return tk.create(e.compositeFilter.filters.map((function(e){return Ow(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ty()}}(e.compositeFilter.op))}(e):Ty()}function Pw(e){return uw[e]}function Rw(e){return sw[e]}function Fw(e){return cw[e]}function Lw(e){return{fieldPath:e.canonicalString()}}function jw(e){return Xy.fromServerFormat(e.fieldPath)}function Mw(e){return e instanceof ek?function(e){if("=="===e.op){if(jg(e.value))return{unaryFilter:{field:Lw(e.field),op:"IS_NAN"}};if(Lg(e.value))return{unaryFilter:{field:Lw(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(jg(e.value))return{unaryFilter:{field:Lw(e.field),op:"IS_NOT_NAN"}};if(Lg(e.value))return{unaryFilter:{field:Lw(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lw(e.field),op:Rw(e.op),value:e.value}}}(e):e instanceof tk?function(e){var t=e.getFilters().map((function(e){return Mw(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Fw(e.op),filters:t}}}(e):Ty()}function Uw(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Vw(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var Bw=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Hy.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Hy.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:pg.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;h(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=s}return y(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),qw=y((function e(t){h(this,e),this.fe=t}));function zw(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Ww(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:gw(e,t.key),fields:t.data.value.mapValue.fields,updateTime:hw(e,t.version.toTimestamp()),createTime:hw(e,t.createTime.toTimestamp())}}(e.fe,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Kw(t.version)};else{if(!t.isUnknownDocument())return Ty();r.unknownDocument={path:n.path.toArray(),version:Kw(t.version)}}return r}function Ww(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Kw(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Qw(e){var t=new Qy(e.seconds,e.nanoseconds);return Hy.fromTimestamp(t)}function Hw(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Iw(e.fe,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Iw(e.fe,t)})),u=Qy.fromMillis(t.localWriteTimeMs);return new Mb(t.batchId,u,n,o)}function Gw(e){var t,n,r=Qw(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Qw(e.lastLimboFreeSnapshotVersion):Hy.min();return void 0!==e.query.documents?(Iy(1===(n=e.query).documents.length),t=Rk(Ik(ww(n.documents[0])))):t=function(e){return Rk(Dw(e))}(e.query),new Bw(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,r,i,pg.fromBase64String(e.resumeToken))}function $w(e,t){var n,r=Kw(t.snapshotVersion),i=Kw(t.lastLimboFreeSnapshotVersion);n=_k(t.target)?Aw(e.fe,t.target):Nw(e.fe,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:bk(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Yw(e){var t=Dw({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Lk(t,t.limit,"L"):t}function Xw(e,t){return new Vb(t.largestBatchId,Iw(e.fe,t.overlayMutation))}function Jw(e,t){var n=t.path.lastSegment();return[e,Im(t.path.popLast()),n]}function Zw(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Kw(r.readTime),documentKey:Im(r.documentKey.path),largestBatchId:r.largestBatchId}}var e_=function(){function e(){h(this,e)}return y(e,[{key:"getBundleMetadata",value:function(e,t){return t_(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Qw(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return t_(e).put({bundleId:(n=t).id,createTime:Kw(vw(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return n_(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Yw(t.bundledQuery),readTime:Qw(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return n_(e).put(function(e){return{name:e.name,readTime:Kw(vw(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function t_(e){return ng(e,"bundles")}function n_(e){return ng(e,"namedQueries")}var r_=function(){function e(t,n){h(this,e),this.serializer=t,this.userId=n}return y(e,[{key:"getOverlay",value:function(e,t){var n=this;return i_(e).get(Jw(this.userId,t)).next((function(e){return e?Xw(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Yk();return hm.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Vb(t,a);i.push(r.we(e,o))})),hm.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Im(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(i_(e).J("collectionPathOverlayIndex",i))})),hm.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Yk(),a=Im(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return i_(e).j("collectionPathOverlayIndex",o).next((function(e){var t,n=E(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Xw(r.serializer,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Yk(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return i_(e).X({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Xw(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"we",value:function(e,t){return i_(e).put(function(e,t,n){var r=c(Jw(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Tw(e.fe,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"de",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function i_(e){return ng(e,"documentOverlays")}var a_=function(){function e(){h(this,e)}return y(e,[{key:"_e",value:function(e,t){this.me(e,t),t.ge()}},{key:"me",value:function(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(mg(e.integerValue));else if("doubleValue"in e){var n=mg(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),Cm(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie("".concat(r.seconds||"")),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(gg(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ye(t,45),t.pe(i.latitude||0),t.pe(i.longitude||0)}else"mapValue"in e?Vg(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Ty()}},{key:"Te",value:function(e,t){this.ye(t,25),this.be(e,t)}},{key:"be",value:function(e,t){t.Ie(e)}},{key:"Re",value:function(e,t){var n=e.fields||{};this.ye(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Te(a,t),this.me(n[a],t)}}},{key:"Pe",value:function(e,t){var n=e.values||[];this.ye(t,50);var r,i=E(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.me(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ve",value:function(e,t){var n=this;this.ye(t,37),Jy.fromName(e).path.forEach((function(e){n.ye(t,60),n.be(e,t)}))}},{key:"ye",value:function(e,t){e.pe(t)}},{key:"Ee",value:function(e){e.pe(2)}}]),e}();function o_(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function u_(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=o_(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}a_.Ve=new a_;var s_=function(){function e(){h(this,e),this.buffer=new Uint8Array(1024),this.position=0}return y(e,[{key:"Se",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.De(n.value),n=t.next();this.Ce()}},{key:"xe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ne(n.value),n=t.next();this.ke()}},{key:"Me",value:function(e){var t,n=E(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.De(i);else if(i<2048)this.De(960|i>>>6),this.De(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.De(480|i>>>12),this.De(128|63&i>>>6),this.De(128|63&i);else{var a=r.codePointAt(0);this.De(240|a>>>18),this.De(128|63&a>>>12),this.De(128|63&a>>>6),this.De(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ce()}},{key:"$e",value:function(e){var t,n=E(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ne(i);else if(i<2048)this.Ne(960|i>>>6),this.Ne(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ne(480|i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i);else{var a=r.codePointAt(0);this.Ne(240|a>>>18),this.Ne(128|63&a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ke()}},{key:"Oe",value:function(e){var t=this.Fe(e),n=u_(t);this.Be(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Le",value:function(e){var t=this.Fe(e),n=u_(t);this.Be(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"qe",value:function(){this.Ue(255),this.Ue(255)}},{key:"Ke",value:function(){this.Ge(255),this.Ge(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Qe",value:function(){return this.buffer.slice(0,this.position)}},{key:"Fe",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"De",value:function(e){var t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}},{key:"Ne",value:function(e){var t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}},{key:"Ce",value:function(){this.Ue(0),this.Ue(1)}},{key:"ke",value:function(){this.Ge(0),this.Ge(1)}},{key:"Ue",value:function(e){this.Be(1),this.buffer[this.position++]=e}},{key:"Ge",value:function(e){this.Be(1),this.buffer[this.position++]=~e}},{key:"Be",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),c_=function(){function e(t){h(this,e),this.je=t}return y(e,[{key:"Ae",value:function(e){this.je.Se(e)}},{key:"Ie",value:function(e){this.je.Me(e)}},{key:"pe",value:function(e){this.je.Oe(e)}},{key:"ge",value:function(){this.je.qe()}}]),e}(),l_=function(){function e(t){h(this,e),this.je=t}return y(e,[{key:"Ae",value:function(e){this.je.xe(e)}},{key:"Ie",value:function(e){this.je.$e(e)}},{key:"pe",value:function(e){this.je.Le(e)}},{key:"ge",value:function(){this.je.Ke()}}]),e}(),f_=function(){function e(){h(this,e),this.je=new s_,this.ze=new c_(this.je),this.We=new l_(this.je)}return y(e,[{key:"seed",value:function(e){this.je.seed(e)}},{key:"He",value:function(e){return 0===e?this.ze:this.We}},{key:"Qe",value:function(){return this.je.Qe()}},{key:"reset",value:function(){this.je.reset()}}]),e}(),h_=function(){function e(t,n,r,i){h(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return y(e,[{key:"Je",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function d_(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=p_(e.arrayValue,t.arrayValue))?n:0!==(n=p_(e.directionalValue,t.directionalValue))?n:Jy.comparator(e.documentKey,t.documentKey)}function p_(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var v_=function(){function e(t){h(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ye=t.orderBy,this.Xe=[];var n,r=E(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Ze=i:this.Xe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return y(e,[{key:"tn",value:function(e){Iy(e.collectionGroup===this.collectionId);var t=em(e);if(void 0!==t&&!this.en(t))return!1;for(var n=tm(e),r=0,i=0;r<n.length&&this.en(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Ze){var a=n[r];if(!this.nn(this.Ze,a)||!this.sn(this.Ye[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ye.length||!this.sn(this.Ye[i++],o))return!1}return!0}},{key:"en",value:function(e){var t,n=E(this.Xe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.nn(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"nn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"sn",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function y_(e){var t,n;if(Iy(e instanceof ek||e instanceof tk),e instanceof ek){if(e instanceof vk){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return ek.create(e.field,"==",t)})))||[];return tk.create(r,"or")}return e}var i=e.filters.map((function(e){return y_(e)}));return tk.create(i,e.op)}function m_(e){if(0===e.getFilters().length)return[];var t=w_(y_(e));return Iy(b_(t)),g_(t)||k_(t)?[t]:t.getFilters()}function g_(e){return e instanceof ek}function k_(e){return e instanceof tk&&ik(e)}function b_(e){return g_(e)||k_(e)||function(e){if(e instanceof tk&&rk(e)){var t,n=E(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!g_(r)&&!k_(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function w_(e){if(Iy(e instanceof ek||e instanceof tk),e instanceof ek)return e;if(1===e.filters.length)return w_(e.filters[0]);var t=e.filters.map((function(e){return w_(e)})),n=tk.create(t,e.op);return b_(n=S_(n))?n:(Iy(n instanceof tk),Iy(nk(n)),Iy(n.filters.length>1),n.filters.reduce((function(e,t){return __(e,t)})))}function __(e,t){var n;return Iy(e instanceof ek||e instanceof tk),Iy(t instanceof ek||t instanceof tk),n=e instanceof ek?t instanceof ek?function(e,t){return tk.create([e,t],"and")}(e,t):x_(e,t):t instanceof ek?x_(t,e):function(e,t){if(Iy(e.filters.length>0&&t.filters.length>0),nk(e)&&nk(t))return sk(e,t.getFilters());var n=rk(e)?e:t,r=rk(e)?t:e,i=n.filters.map((function(e){return __(e,r)}));return tk.create(i,"or")}(e,t),S_(n)}function x_(e,t){if(nk(t))return sk(t,e.getFilters());var n=t.filters.map((function(t){return __(e,t)}));return tk.create(n,"or")}function S_(e){if(Iy(e instanceof ek||e instanceof tk),e instanceof ek)return e;var t=e.getFilters();if(1===t.length)return S_(t[0]);if(ak(e))return e;var n=t.map((function(e){return S_(e)})),r=[];return n.forEach((function(t){t instanceof ek?r.push(t):t instanceof tk&&(t.op===e.op?r.push.apply(r,f(t.filters)):r.push(t))})),1===r.length?r[0]:tk.create(r,e.op)}var E_=function(){function e(){h(this,e),this.rn=new C_}return y(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.rn.add(t),hm.resolve()}},{key:"getCollectionParents",value:function(e,t){return hm.resolve(this.rn.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return hm.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return hm.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return hm.resolve(null)}},{key:"getIndexType",value:function(e,t){return hm.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return hm.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return hm.resolve(null)}},{key:"getMinOffset",value:function(e,t){return hm.resolve(om.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return hm.resolve(om.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return hm.resolve()}},{key:"updateIndexEntries",value:function(e,t){return hm.resolve()}}]),e}(),C_=function(){function e(){h(this,e),this.index={}}return y(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new cg($y.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new cg($y.comparator)).toArray()}}]),e}(),T_=new Uint8Array(0),I_=function(){function e(t,n){h(this,e),this.user=t,this.databaseId=n,this.on=new C_,this.un=new Wk((function(e){return bk(e)}),(function(e,t){return wk(e,t)})),this.uid=t.uid||""}return y(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.on.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.on.add(t)}));var a={collectionId:r,parent:Im(i)};return A_(e).put(a)}return hm.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Ky(t),""],!1,!0);return A_(e).j(r).next((function(e){var r,i=E(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Dm(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=D_(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=O_(e);return a.next((function(e){o.put(Zw(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=D_(e),r=O_(e),i=N_(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=N_(e),i=!0,a=new Map;return hm.forEach(this.cn(t),(function(t){return n.an(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=tb(),o=[];return hm.forEach(a,(function(i,a){var u;xy("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(bk(t)));var s=function(e,t){var n=em(t);if(void 0===n)return null;var r,i=E(xk(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=E(tm(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=E(xk(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=E(tm(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Sk(e,o.fieldPath,e.startAt):Ek(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Gg(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=E(tm(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Ek(e,o.fieldPath,e.endAt):Sk(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Gg(r,i)}(a,i),h=n.hn(i,a,l),d=n.hn(i,a,f),p=n.ln(i,a,c),v=n.fn(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return hm.forEach(v,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=Jy.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return hm.resolve(null)}))}},{key:"cn",value:function(e){var t=this.un.get(e);return t||(t=0===e.filters.length?[e]:m_(tk.create(e.filters,"and")).map((function(t){return kk(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.un.set(e,t),t)}},{key:"fn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],h=function(){var s=t?u.dn(t[d/c]):T_,h=u.wn(e,s,n[d%c],r),p=u._n(e,s,i[d%c],a),v=o.map((function(t){return u.wn(e,s,t,!0)}));l.push.apply(l,f(u.createRange(h,p,v)))},d=0;d<s;++d)h();return l}},{key:"wn",value:function(e,t,n,r){var i=new h_(e,Jy.empty(),t,n);return r?i:i.Je()}},{key:"_n",value:function(e,t,n,r){var i=new h_(e,Jy.empty(),t,n);return r?i.Je():i}},{key:"an",value:function(e,t){var n=new v_(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=E(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.tn(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.cn(t);return hm.forEach(i,(function(t){return n.an(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new cg(Xy.comparator),r=!1,i=E(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=E(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=E(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"mn",value:function(e,t){var n,r=new f_,i=E(tm(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.He(a.kind);a_.Ve._e(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Qe()}},{key:"dn",value:function(e){var t=new f_;return a_.Ve._e(e,t.He(0)),t.Qe()}},{key:"gn",value:function(e,t){var n=new f_;return a_.Ve._e(Pg(this.databaseId,t),n.He(function(e){var t=tm(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Qe()}},{key:"ln",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new f_);var i,a=0,o=E(tm(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=E(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.yn(t,s.fieldPath)&&Fg(c))r=this.pn(r,s,c);else{var h=f.He(s.kind);a_.Ve._e(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.In(r)}},{key:"hn",value:function(e,t,n){return this.ln(e,t,n.position)}},{key:"In",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Qe();return t}},{key:"pn",value:function(e,t,n){var r,i=f(e),a=[],o=E(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=E(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,h=new f_;h.seed(l.Qe()),a_.Ve._e(s,h.He(t.kind)),a.push(h)}}catch(d){c.e(d)}finally{c.f()}}}catch(d){o.e(d)}finally{o.f()}return a}},{key:"yn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof ek&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=D_(e),i=O_(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next((function(e){var t=[];return hm.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new rm(t.sequenceNumber,new om(Qw(t.readTime),new Jy(Dm(t.documentKey)),t.largestBatchId)):rm.empty(),r=e.fields.map((function(e){var t=c(e,2),n=t[0],r=t[1];return new nm(Xy.fromServerFormat(n),r)}));return new Zy(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:zy(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=D_(e),a=O_(e);return this.Tn(e).next((function(e){return i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return hm.forEach(t,(function(t){return a.put(Zw(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return hm.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?hm.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),hm.forEach(a,(function(r){return n.En(e,t,r).next((function(t){var a=n.An(i,r);return t.isEqual(a)?hm.resolve():n.vn(e,i,r,t,a)}))}))}))}))}},{key:"Rn",value:function(e,t,n,r){return N_(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"Pn",value:function(e,t,n,r){return N_(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(n,t.key),t.key.path.toArray()])}},{key:"En",value:function(e,t,n){var r=N_(e),i=new cg(d_);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,t)])},(function(e,r){i=i.add(new h_(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"An",value:function(e,t){var n=new cg(d_),r=this.mn(t,e);if(null==r)return n;var i=em(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Fg(a)){var o,u=E(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new h_(t.indexId,e.key,this.dn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new h_(t.indexId,e.key,T_,r));return n}},{key:"vn",value:function(e,t,n,r,i){var a=this;xy("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=fg(a),s=fg(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=fg(o)):l?(i(u),u=fg(a)):(u=fg(a),s=fg(o))}}(r,i,d_,(function(r){o.push(a.Rn(e,t,n,r))}),(function(r){o.push(a.Pn(e,t,n,r))})),hm.waitFor(o)}},{key:"Tn",value:function(e){var t=1;return O_(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return d_(e,t)})).filter((function(e,t,n){return!t||0!==d_(e,n[t-1])}));var r=[];r.push(e);var i,a=E(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=d_(o,e),s=d_(o,t);if(0===u)r[0]=e.Je();else if(u>0&&s<0)r.push(o),r.push(o.Je());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.bn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,T_,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,T_,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"bn",value:function(e,t){return d_(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(P_)}},{key:"getMinOffset",value:function(e,t){var n=this;return hm.mapArray(this.cn(t),(function(t){return n.an(e,t).next((function(e){return e||Ty()}))})).next(P_)}}]),e}();function A_(e){return ng(e,"collectionParents")}function N_(e){return ng(e,"indexEntries")}function D_(e){return ng(e,"indexConfiguration")}function O_(e){return ng(e,"indexState")}function P_(e){Iy(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;um(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new om(t.readTime,t.documentKey,n)}var R_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},F_=function(){function e(t,n,r){h(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return y(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function L_(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.X({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Iy(1===u)})));var c,l=[],f=E(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Rm(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return hm.waitFor(a).next((function(){return l}))}function j_(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Ty();t=e.noDocument}return JSON.stringify(t).length}F_.DEFAULT_COLLECTION_PERCENTILE=10,F_.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,F_.DEFAULT=new F_(41943040,F_.DEFAULT_COLLECTION_PERCENTILE,F_.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),F_.DISABLED=new F_(-1,0,0);var M_=function(){function e(t,n,r,i){h(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}return y(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return V_(e).X({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=B_(e),o=V_(e);return o.add({}).next((function(u){Iy("number"==typeof u);var s,c=new Mb(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Tw(e.fe,t)})),i=n.mutations.map((function(t){return Tw(e.fe,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new cg((function(e,t){return zy(e.canonicalString(),t.canonicalString())})),d=E(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Rm(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Fm))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Vn[u]=c.keys()})),hm.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return V_(e).get(t).next((function(e){return e?(Iy(e.userId===n.userId),Hw(n.serializer,e)):null}))}},{key:"Sn",value:function(e,t){var n=this;return this.Vn[t]?hm.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Vn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return V_(e).X({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Iy(t.batchId>=r),a=Hw(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return V_(e).X({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return V_(e).j("userMutationsIndex",n).next((function(e){return e.map((function(e){return Hw(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Pm(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return B_(e).X({range:i},(function(r,i,o){var u=c(r,3),s=u[0],l=u[1],f=u[2],h=Dm(l);if(s===n.userId&&t.path.isEqual(h))return V_(e).get(f).next((function(e){if(!e)throw Ty();Iy(e.userId===n.userId),a.push(Hw(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new cg(zy),i=[];return t.forEach((function(t){var a=Pm(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=B_(e).X({range:o},(function(e,i,a){var o=c(e,3),u=o[0],s=o[1],l=o[2],f=Dm(s);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),hm.waitFor(i).next((function(){return n.Dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Pm(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new cg(zy);return B_(e).X({range:o},(function(e,t,a){var o=c(e,3),s=o[0],l=o[1],f=o[2],h=Dm(l);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.Dn(e,u)}))}},{key:"Dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(V_(e).get(t).next((function(e){if(null===e)throw Ty();Iy(e.userId===n.userId),r.push(Hw(n.serializer,e))})))})),hm.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return L_(e.ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Cn(t.batchId)})),hm.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Cn",value:function(e){delete this.Vn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return hm.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return B_(e).X({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Dm(e[1]);i.push(a)}else r.done()})).next((function(){Iy(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return U_(e,this.userId,t)}},{key:"xn",value:function(e){var t=this;return q_(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"de",value:function(t,n,r,i){return Iy(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function U_(e,t,n){var r=Pm(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return B_(e).X({range:a,Y:!0},(function(e,n,r){var a=c(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function V_(e){return ng(e,"mutations")}function B_(e){return ng(e,"documentMutations")}function q_(e){return ng(e,"mutationQueues")}var z_=function(){function e(t){h(this,e),this.Nn=t}return y(e,[{key:"next",value:function(){return this.Nn+=2,this.Nn}}],[{key:"kn",value:function(){return new e(0)}},{key:"Mn",value:function(){return new e(-1)}}]),e}(),W_=function(){function e(t,n){h(this,e),this.referenceDelegate=t,this.serializer=n}return y(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.$n(e).next((function(n){var r=new z_(n.highestTargetId);return n.highestTargetId=r.next(),t.On(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.$n(e).next((function(e){return Hy.fromTimestamp(new Qy(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.$n(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.$n(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.On(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Fn(e,t).next((function(){return n.$n(e).next((function(r){return r.targetCount+=1,n.Bn(t,r),n.On(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Fn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return K_(e).delete(t.targetId)})).next((function(){return n.$n(e)})).next((function(t){return Iy(t.targetCount>0),t.targetCount-=1,n.On(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return K_(e).X((function(o,u){var s=Gw(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return hm.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return K_(e).X((function(e,n){var r=Gw(n);t(r)}))}},{key:"$n",value:function(e){return Q_(e).get("targetGlobalKey").next((function(e){return Iy(null!==e),e}))}},{key:"On",value:function(e,t){return Q_(e).put("targetGlobalKey",t)}},{key:"Fn",value:function(e,t){return K_(e).put($w(this.serializer,t))}},{key:"Bn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.$n(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=bk(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return K_(e).X({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Gw(n);wk(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=H_(e);return t.forEach((function(t){var o=Im(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),hm.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=H_(e);return hm.forEach(t,(function(t){var a=Im(t.path);return hm.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=H_(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=H_(e),i=tb();return r.X({range:n,Y:!0},(function(e,t,n){var r=Dm(e[1]),a=new Jy(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Im(t.path),r=IDBKeyRange.bound([n],[Ky(n)],!1,!0),i=0;return H_(e).X({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=c(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"le",value:function(e,t){return K_(e).get(t).next((function(e){return e?Gw(e):null}))}}]),e}();function K_(e){return ng(e,"targets")}function Q_(e){return ng(e,"targetGlobal")}function H_(e){return ng(e,"targetDocuments")}function G_(e,t){var n=c(e,2),r=n[0],i=n[1],a=c(t,2),o=a[0],u=a[1],s=zy(r,o);return 0===s?zy(i,u):s}var $_=function(){function e(t){h(this,e),this.Ln=t,this.buffer=new cg(G_),this.qn=0}return y(e,[{key:"Un",value:function(){return++this.qn}},{key:"Kn",value:function(e){var t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();G_(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Y_=function(){function e(t,n,r){h(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Gn=null}return y(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}},{key:"stop",value:function(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}},{key:"started",get:function(){return null!==this.Gn}},{key:"Qn",value:function(e){var t=this;xy("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,Bn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Gn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!mm(e.t0)){e.next=12;break}xy("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,lm(e.t0);case 14:return e.next=16,t.Qn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),X_=function(){function e(t,n){h(this,e),this.jn=t,this.params=n}return y(e,[{key:"calculateTargetCount",value:function(e,t){return this.jn.zn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return hm.resolve(Sm.ct);var r=new $_(t);return this.jn.forEachTarget(e,(function(e){return r.Kn(e.sequenceNumber)})).next((function(){return n.jn.Wn(e,(function(e){return r.Kn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.jn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.jn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(xy("LruGarbageCollector","Garbage collection skipped; disabled"),hm.resolve(R_)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(xy("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),R_):n.Hn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.jn.getCacheSize(e)}},{key:"Hn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(xy("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),_y()<=jr.DEBUG&&xy("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),hm.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function J_(e,t){return new X_(e,t)}var Z_=function(){function e(t,n){h(this,e),this.db=t,this.garbageCollector=J_(this,n)}return y(e,[{key:"zn",value:function(e){var t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Jn",value:function(e){var t=0;return this.Wn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Wn",value:function(e,t){return this.Yn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return ex(e,n)}},{key:"removeReference",value:function(e,t,n){return ex(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return ex(e,t)}},{key:"Xn",value:function(e,t){return function(e,t){var n=!1;return q_(e).Z((function(r){return U_(e,r,t).next((function(e){return e&&(n=!0),hm.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Yn(e,(function(o,u){if(u<=t){var s=n.Xn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Hy.min()),H_(e).delete([0,Im(o.path)])}))}));i.push(s)}})).next((function(){return hm.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return ex(e,t)}},{key:"Yn",value:function(e,t){var n,r=H_(e),i=Sm.ct;return r.X({index:"documentTargetsIndex"},(function(e,r){var a=c(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==Sm.ct&&t(new Jy(Dm(n)),i),i=s,n=u):i=Sm.ct})).next((function(){i!==Sm.ct&&t(new Jy(Dm(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function ex(e,t){return H_(e).put(function(e,t){return{targetId:0,path:Im(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var tx=function(){function e(){h(this,e),this.changes=new Wk((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return y(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Hg.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?hm.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),nx=function(){function e(t){h(this,e),this.serializer=t}return y(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return ox(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return ox(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Ww(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Zn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Hg.newInvalidDocument(t);return ox(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(ux(t))},(function(e,i){r=n.ts(t,i)})).next((function(){return r}))}},{key:"es",value:function(e,t){var n=this,r={size:0,document:Hg.newInvalidDocument(t)};return ox(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(ux(t))},(function(e,i){r={document:n.ts(t,i),size:j_(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Qk();return this.ns(e,t,(function(e,t){var i=n.ts(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"ss",value:function(e,t){var n=this,r=Qk(),i=new og(Jy.comparator);return this.ns(e,t,(function(e,t){var a=n.ts(e,t);r=r.insert(e,a),i=i.insert(e,j_(t))})).next((function(){return{documents:r,rs:i}}))}},{key:"ns",value:function(e,t,n){if(t.isEmpty())return hm.resolve();var r=new cg(cx);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(ux(r.first()),ux(r.last())),a=r.getIterator(),o=a.getNext();return ox(e).X({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Jy.fromSegments([].concat(f(t.prefixPath),[t.collectionGroup,t.documentId]));o&&cx(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.G(ux(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),Ww(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ox(e).j(IDBKeyRange.bound(o,u,!0)).next((function(e){var n,a=Qk(),o=E(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=i.ts(Jy.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s.isFoundDocument()&&(Vk(t,s)||r.has(s.key))&&(a=a.insert(s.key,s))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Qk(),o=sx(t,n),u=sx(t,om.max());return ox(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.ts(Jy.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new ix(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return ax(e).get("remoteDocumentGlobalKey").next((function(e){return Iy(!!e),e}))}},{key:"Zn",value:function(e,t){return ax(e).put("remoteDocumentGlobalKey",t)}},{key:"ts",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Ew(e.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Jy.fromSegments(t.noDocument.path),i=Qw(t.noDocument.readTime);n=Hg.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Ty();var a=Jy.fromSegments(t.unknownDocument.path),o=Qw(t.unknownDocument.version);n=Hg.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Qy(e[0],e[1]);return Hy.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(Hy.min()))return n}return Hg.newInvalidDocument(e)}}]),e}();function rx(e){return new nx(e)}var ix=function(e){g(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this)).os=e,i.trackRemovals=r,i.us=new Wk((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return y(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new cg((function(e,t){return zy(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.us.get(a);if(n.push(t.os.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=zw(t.os.serializer,o);i=i.add(a.path.popLast());var c=j_(s);r+=c-u.size,n.push(t.os.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=zw(t.os.serializer,o.convertToNoDocument(Hy.min()));n.push(t.os.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.os.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.os.updateMetadata(e,r)),hm.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.os.es(e,t).next((function(e){return n.us.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.os.ss(e,t).next((function(e){var t=e.documents;return e.rs.forEach((function(e,r){n.us.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(tx);function ax(e){return ng(e,"remoteDocumentGlobal")}function ox(e){return ng(e,"remoteDocumentsV14")}function ux(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function sx(e,t){var n=t.documentKey.path.toArray();return[e,Ww(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function cx(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=zy(n[a],r[a]))return i;return(i=zy(n.length,r.length))||((i=zy(n[n.length-2],r[r.length-2]))||zy(n[n.length-1],r[r.length-1]))}var lx=y((function e(t,n){h(this,e),this.overlayedDocument=t,this.mutatedFields=n})),fx=function(){function e(t,n,r,i){h(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return y(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&Cb(r.mutation,e,hg.empty(),Qy.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,tb()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tb(),i=Yk();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Gk();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Yk();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,tb())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Qk(),a=Jk(),o=Jk();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Nb)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),Cb(o.mutation,t,o.mutation.getFieldMask(),Qy.now())):a.set(t.key,hg.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new lx(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Jk(),i=new og((function(e,t){return e-t})),a=tb();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=E(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||hg.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||tb()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=Xk();c.forEach((function(e){if(!a.has(e)){var n=Sb(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return hm.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Jy.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ok(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):hm.resolve(Yk()),u=-1,s=a;return o.next((function(t){return hm.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?hm.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,tb())})).next((function(e){return{batchId:u,changes:$k(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Jy(t)).next((function(e){var t=Gk();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Gk();return this.indexManager.getCollectionParents(e,i).next((function(o){return hm.forEach(o,(function(o){var u=function(e,t){return new Ck(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,Hg.newInvalidDocument(r)))}));var n=Gk();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&Cb(a.mutation,i,hg.empty(),Qy.now()),Vk(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),hx=function(){function e(t){h(this,e),this.serializer=t,this.cs=new Map,this.hs=new Map}return y(e,[{key:"getBundleMetadata",value:function(e,t){return hm.resolve(this.cs.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:vw(n.createTime)}),hm.resolve()}},{key:"getNamedQuery",value:function(e,t){return hm.resolve(this.hs.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:Yw(e.bundledQuery),readTime:vw(e.readTime)}}(t)),hm.resolve()}}]),e}(),dx=function(){function e(){h(this,e),this.overlays=new og(Jy.comparator),this.ls=new Map}return y(e,[{key:"getOverlay",value:function(e,t){return hm.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Yk();return hm.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.we(e,t,i)})),hm.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ls.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ls.delete(n)),hm.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Yk(),i=t.length+1,a=new Jy(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return hm.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new og((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Yk(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Yk(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return hm.resolve(s)}},{key:"we",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Vb(t,n));var a=this.ls.get(t);void 0===a&&(a=tb(),this.ls.set(t,a)),this.ls.set(t,a.add(n.key))}}]),e}(),px=function(){function e(){h(this,e),this.fs=new cg(vx.ds),this.ws=new cg(vx._s)}return y(e,[{key:"isEmpty",value:function(){return this.fs.isEmpty()}},{key:"addReference",value:function(e,t){var n=new vx(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}},{key:"gs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.ys(new vx(e,t))}},{key:"ps",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Is",value:function(e){var t=this,n=new Jy(new $y([])),r=new vx(n,e),i=new vx(n,e+1),a=[];return this.ws.forEachInRange([r,i],(function(e){t.ys(e),a.push(e.key)})),a}},{key:"Ts",value:function(){var e=this;this.fs.forEach((function(t){return e.ys(t)}))}},{key:"ys",value:function(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}},{key:"Es",value:function(e){var t=new Jy(new $y([])),n=new vx(t,e),r=new vx(t,e+1),i=tb();return this.ws.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new vx(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),vx=function(){function e(t,n){h(this,e),this.key=t,this.As=n}return y(e,null,[{key:"ds",value:function(e,t){return Jy.comparator(e.key,t.key)||zy(e.As,t.As)}},{key:"_s",value:function(e,t){return zy(e.As,t.As)||Jy.comparator(e.key,t.key)}}]),e}(),yx=function(){function e(t,n){h(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new cg(vx.ds)}return y(e,[{key:"checkEmpty",value:function(e){return hm.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Mb(i,t,n,r);this.mutationQueue.push(a);var o,u=E(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Rs=this.Rs.add(new vx(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return hm.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return hm.resolve(this.Ps(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.bs(n),i=r<0?0:r;return hm.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return hm.resolve(0===this.mutationQueue.length?-1:this.vs-1)}},{key:"getAllMutationBatches",value:function(e){return hm.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new vx(t,0),i=new vx(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],(function(e){var t=n.Ps(e.As);a.push(t)})),hm.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new cg(zy);return t.forEach((function(e){var t=new vx(e,0),i=new vx(e,Number.POSITIVE_INFINITY);n.Rs.forEachInRange([t,i],(function(e){r=r.add(e.As)}))})),hm.resolve(this.Vs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Jy.isDocumentKey(i)||(i=i.child(""));var a=new vx(new Jy(i),0),o=new cg(zy);return this.Rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.As)),!0)}),a),hm.resolve(this.Vs(o))}},{key:"Vs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Ps(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Iy(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();var r=this.Rs;return hm.forEach(t.mutations,(function(i){var a=new vx(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Rs=r}))}},{key:"Cn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new vx(t,0),r=this.Rs.firstAfterOrEqual(n);return hm.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,hm.resolve()}},{key:"Ss",value:function(e,t){return this.bs(e)}},{key:"bs",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"Ps",value:function(e){var t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),mx=function(){function e(t){h(this,e),this.Ds=t,this.docs=new og(Jy.comparator),this.size=0}return y(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return hm.resolve(n?n.document.mutableCopy():Hg.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Qk();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Hg.newInvalidDocument(e))})),hm.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=Qk(),a=t.path,o=new Jy(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||um(am(l),n)<=0||(r.has(l.key)||Vk(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return hm.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Ty()}},{key:"Cs",value:function(e,t){return hm.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new gx(this)}},{key:"getSize",value:function(e){return hm.resolve(this.size)}}]),e}(),gx=function(e){g(n,e);var t=_(n);function n(e){var r;return h(this,n),(r=t.call(this)).os=e,r}return y(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.os.addEntry(e,i)):t.os.removeEntry(r)})),hm.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.os.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.os.getEntries(e,t)}}]),n}(tx),kx=function(){function e(t){h(this,e),this.persistence=t,this.xs=new Wk((function(e){return bk(e)}),wk),this.lastRemoteSnapshotVersion=Hy.min(),this.highestTargetId=0,this.Ns=0,this.ks=new px,this.targetCount=0,this.Ms=z_.kn()}return y(e,[{key:"forEachTarget",value:function(e,t){return this.xs.forEach((function(e,n){return t(n)})),hm.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return hm.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return hm.resolve(this.Ns)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ms.next(),hm.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),hm.resolve()}},{key:"Fn",value:function(e){this.xs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ms=new z_(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Fn(t),this.targetCount+=1,hm.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Fn(t),hm.resolve()}},{key:"removeTargetData",value:function(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,hm.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.xs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.xs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),hm.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return hm.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.xs.get(t)||null;return hm.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.ks.gs(t,n),hm.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.ks.ps(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),hm.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.ks.Is(t),hm.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.ks.Es(t);return hm.resolve(n)}},{key:"containsKey",value:function(e,t){return hm.resolve(this.ks.containsKey(t))}}]),e}(),bx=function(){function e(t,n){var r=this;h(this,e),this.$s={},this.overlays={},this.Os=new Sm(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=t(this),this.Bs=new kx(this),this.indexManager=new E_,this.remoteDocumentCache=new mx((function(e){return r.referenceDelegate.Ls(e)})),this.serializer=new qw(n),this.qs=new hx(this.serializer)}return y(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Fs=!1,Promise.resolve()}},{key:"started",get:function(){return this.Fs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new dx,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.$s[e.toKey()];return n||(n=new yx(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;xy("MemoryPersistence","Starting transaction:",e);var i=new wx(this.Os.next());return this.referenceDelegate.Us(),n(i).next((function(e){return r.referenceDelegate.Ks(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Gs",value:function(e,t){return hm.or(Object.values(this.$s).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),wx=function(e){g(n,e);var t=_(n);function n(e){var r;return h(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return y(n)}(cm),_x=function(){function e(t){h(this,e),this.persistence=t,this.Qs=new px,this.js=null}return y(e,[{key:"Ws",get:function(){if(this.js)return this.js;throw Ty()}},{key:"addReference",value:function(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),hm.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),hm.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ws.add(t.toString()),hm.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Qs.Is(t.targetId).forEach((function(e){return n.Ws.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ws.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Us",value:function(){this.js=new Set}},{key:"Ks",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return hm.forEach(this.Ws,(function(r){var i=Jy.fromPath(r);return t.Hs(e,i).next((function(e){e||n.removeEntry(i,Hy.min())}))})).next((function(){return t.js=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hs(e,t).next((function(e){e?n.Ws.delete(t.toString()):n.Ws.add(t.toString())}))}},{key:"Ls",value:function(e){return 0}},{key:"Hs",value:function(e,t){var n=this;return hm.or([function(){return hm.resolve(n.Qs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Gs(e,t)}])}}],[{key:"zs",value:function(t){return new e(t)}}]),e}(),xx=function(){function e(t){h(this,e),this.serializer=t}return y(e,[{key:"O",value:function(e,t,n,r){var i=this,a=new dm("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Om,{unique:!0}),e.createObjectStore("documentMutations")}(e),Sx(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=hm.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Sx(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Hy.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").j().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Om,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return hm.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Ys(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Xs(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Zs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ti(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ei(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Hm});t.createIndex("collectionPathOverlayIndex",Gm,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",$m,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Lm});t.createIndex("documentKeyIndex",jm),t.createIndex("collectionGroupIndex",Mm)}(e)})).next((function(){return i.ni(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.si(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:zm}).createIndex("sequenceNumberIndex",Wm,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Km}).createIndex("documentKeyIndex",Qm,{unique:!1})}(e)}))),o}},{key:"Xs",value:function(e){var t=0;return e.store("remoteDocuments").X((function(e,n){t+=j_(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Ys",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next((function(n){return hm.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",i).next((function(r){return hm.forEach(r,(function(r){Iy(r.userId===n.userId);var i=Hw(t.serializer,r);return L_(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Zs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.X((function(n,i){var a=new $y(n),o=function(e){return[0,Im(e)]}(a);r.push(t.get(o).next((function(n){return n?hm.resolve():function(n){return t.put({targetId:0,path:Im(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return hm.waitFor(r)}))}))}},{key:"ti",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:qm});var n=t.store("collectionParents"),r=new C_,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Im(i)})}};return t.store("remoteDocuments").X({Y:!0},(function(e,t){var n=new $y(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").X({Y:!0},(function(e,t){var n=c(e,3),r=(n[0],n[1]),a=(n[2],Dm(r));return i(a.popLast())}))}))}},{key:"ei",value:function(e){var t=this,n=e.store("targets");return n.X((function(e,r){var i=Gw(r),a=$w(t.serializer,i);return n.put(a)}))}},{key:"ni",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.X((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Jy($y.fromString(i.document.name).popFirst(5)):i.noDocument?Jy.fromSegments(i.noDocument.path):i.unknownDocument?Jy.fromSegments(i.unknownDocument.path):Ty()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return hm.waitFor(r)}))}},{key:"si",value:function(e,t){var n=this,r=t.store("mutations"),i=rx(this.serializer),a=new bx(_x.zs,this.serializer.fe);return r.j().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:tb();Hw(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),hm.forEach(r,(function(e,r){var o=new ky(r),u=r_.de(n.serializer,o),s=a.getIndexManager(o),c=M_.de(o,n.serializer,s,a.referenceDelegate);return new fx(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new tg(t,Sm.ct),e).next()}))}))}}]),e}();function Sx(e){e.createObjectStore("targetDocuments",{keyPath:Vm}).createIndex("documentTargetsIndex",Bm,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Um,{unique:!0}),e.createObjectStore("targetGlobal")}var Ex="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Cx=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(h(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.ii=a,this.window=o,this.document=u,this.ri=c,this.oi=l,this.ui=f,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=function(e){return Promise.resolve()},!e.D())throw new Dy(Ny.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Z_(this,i),this.di=n+"main",this.serializer=new qw(s),this.wi=new pm(this.di,this.ui,new xx(this.serializer)),this.Bs=new W_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=rx(this.serializer),this.qs=new e_,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===l&&Sy("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return y(e,[{key:"start",value:function(){var e=this;return this.mi().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Dy(Ny.FAILED_PRECONDITION,Ex);return e.gi(),e.yi(),e.pi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Bs.getHighestSequenceNumber(t)}))})).then((function(t){e.Os=new Sm(t,e.ri)})).then((function(){e.Fs=!0})).catch((function(t){return e.wi&&e.wi.close(),Promise.reject(t)}))}},{key:"Ii",value:function(e){var t=this;return this.fi=function(){var n=Bn(Un().mark((function n(r){return Un().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.wi.B(function(){var t=Bn(Un().mark((function t(n){return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget(Bn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.mi();case 4:case"end":return e.stop()}}),e)})))))}},{key:"mi",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Ix(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Ti(t).next((function(t){t||(e.isPrimary=!1,e.ii.enqueueRetryable((function(){return e.fi(!1)})))}))})).next((function(){return e.Ei(t)})).next((function(n){return e.isPrimary&&!n?e.Ai(t).next((function(){return!1})):!!n&&e.vi(t).next((function(){return!0}))}))})).catch((function(t){if(mm(t))return xy("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return xy("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.ii.enqueueRetryable((function(){return e.fi(t)})),e.isPrimary=t}))}},{key:"Ti",value:function(e){var t=this;return Tx(e).get("owner").next((function(e){return hm.resolve(t.Ri(e))}))}},{key:"Pi",value:function(e){return Ix(e).delete(this.clientId)}},{key:"bi",value:function(){var e=Bn(Un().mark((function e(){var t,n,r,i,a=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Vi(this.li,18e5)){e.next=6;break}return this.li=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=ng(e,"clientMetadata");return t.j().next((function(e){var n=a.Si(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return hm.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this._i){n=E(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this._i.removeItem(this.Di(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pi",value:function(){var e=this;this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.mi().then((function(){return e.bi()})).then((function(){return e.pi()}))}))}},{key:"Ri",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Ei",value:function(e){var t=this;return this.oi?hm.resolve(!0):Tx(e).get("owner").next((function(n){if(null!==n&&t.Vi(n.leaseTimestampMs,5e3)&&!t.Ci(n.ownerId)){if(t.Ri(n)&&t.networkEnabled)return!0;if(!t.Ri(n)){if(!n.allowTabSynchronization)throw new Dy(Ny.FAILED_PRECONDITION,Ex);return!1}}return!(!t.networkEnabled||!t.inForeground)||Ix(e).j().next((function(e){return void 0===t.Si(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&xy("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Bn(Un().mark((function e(){var t=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),e.next=7,this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new tg(e,Sm.ct);return t.Ai(n).next((function(){return t.Pi(n)}))}));case 7:this.wi.close(),this.Mi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Si",value:function(e,t){var n=this;return e.filter((function(e){return n.Vi(e.updateTimeMs,t)&&!n.Ci(e.clientId)}))}},{key:"$i",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Ix(t).j().next((function(t){return e.Si(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Fs}},{key:"getMutationQueue",value:function(e,t){return M_.de(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new I_(e,this.serializer.fe.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return r_.de(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;xy("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.ui)?eg:14===i?Zm:13===i?Jm:12===i?Xm:11===i?Ym:void Ty();return this.wi.runTransaction(e,o,u,(function(i){return a=new tg(i,r.Os?r.Os.next():Sm.ct),"readwrite-primary"===t?r.Ti(a).next((function(e){return!!e||r.Ei(a)})).next((function(t){if(!t)throw Sy("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.ii.enqueueRetryable((function(){return r.fi(!1)})),new Dy(Ny.FAILED_PRECONDITION,sm);return n(a)})).next((function(e){return r.vi(a).next((function(){return e}))})):r.Oi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Oi",value:function(e){var t=this;return Tx(e).get("owner").next((function(e){if(null!==e&&t.Vi(e.leaseTimestampMs,5e3)&&!t.Ci(e.ownerId)&&!t.Ri(e)&&!(t.oi||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Dy(Ny.FAILED_PRECONDITION,Ex)}))}},{key:"vi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Tx(e).put("owner",t)}},{key:"Ai",value:function(e){var t=this,n=Tx(e);return n.get("owner").next((function(e){return t.Ri(e)?(xy("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):hm.resolve()}))}},{key:"Vi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Sy("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"gi",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=function(){e.ii.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.mi()}))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ni",value:function(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}},{key:"yi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=function(){t.xi();var e=/(?:Version|Mobile)\/1[456]/;cr()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.ii.enterRestrictedMode(!0),t.ii.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ci))}},{key:"ki",value:function(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}},{key:"Ci",value:function(e){var t;try{var n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return xy("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Sy("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"xi",value:function(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Sy("Failed to set zombie client id.",e)}}},{key:"Mi",value:function(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(e){}}},{key:"Di",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return pm.D()}}]),e}();function Tx(e){return ng(e,"owner")}function Ix(e){return ng(e,"clientMetadata")}function Ax(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Nx=function(){function e(t,n,r,i){h(this,e),this.targetId=t,this.fromCache=n,this.Fi=r,this.Bi=i}return y(e,null,[{key:"Li",value:function(t,n){var r,i=tb(),a=tb(),o=E(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Dx=function(){function e(){h(this,e),this.qi=!1}return y(e,[{key:"initialize",value:function(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ki(e,t).next((function(a){return a||i.Gi(e,t,r,n)})).next((function(n){return n||i.Qi(e,t)}))}},{key:"Ki",value:function(e,t){var n=this;if(Ak(t))return hm.resolve(null);var r=Rk(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Lk(t,null,"F"),r=Rk(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=tb.apply(void 0,f(i));return n.Ui.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.ji(t,i);return n.zi(t,o,a,r.readTime)?n.Ki(e,Lk(t,null,"F")):n.Wi(e,o,t,r)}))}))})))}))}},{key:"Gi",value:function(e,t,n,r){var i=this;return Ak(t)||r.isEqual(Hy.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((function(a){var o=i.ji(t,a);return i.zi(t,o,n,r)?i.Qi(e,t):(_y()<=jr.DEBUG&&xy("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Uk(t)),i.Wi(e,o,t,im(r,-1)))}))}},{key:"ji",value:function(e,t){var n=new cg(qk(e));return t.forEach((function(t,r){Vk(e,r)&&(n=n.add(r))})),n}},{key:"zi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Qi",value:function(e,t){return _y()<=jr.DEBUG&&xy("QueryEngine","Using full collection scan to execute query:",Uk(t)),this.Ui.getDocumentsMatchingQuery(e,t,om.min())}},{key:"Wi",value:function(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Ox=function(){function e(t,n,r,i){h(this,e),this.persistence=t,this.Hi=n,this.serializer=i,this.Ji=new og(zy),this.Yi=new Wk((function(e){return bk(e)}),wk),this.Xi=new Map,this.Zi=t.getRemoteDocumentCache(),this.Bs=t.getTargetCache(),this.qs=t.getBundleCache(),this.tr(r)}return y(e,[{key:"tr",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fx(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ji)}))}}]),e}();function Px(e,t,n,r){return new Ox(e,t,n,r)}function Rx(e,t){return Fx.apply(this,arguments)}function Fx(){return(Fx=Bn(Un().mark((function e(t,n){var r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ay(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.tr(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=tb(),s=E(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=E(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=E(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=E(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{er:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lx(e,t){var n=Ay(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=hm.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Iy(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=tb(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function jx(e){var t=Ay(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Bs.getLastRemoteSnapshotVersion(e)}))}function Mx(e,t){var n=Ay(e),r=t.snapshotVersion,i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Bs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Bs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(u)?c=c.withResumeToken(pg.EMPTY_BYTE_STRING,Hy.min()).withLastLimboFreeSnapshotVersion(Hy.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Bs.updateTargetData(e,c))}}));var u=Qk(),s=tb();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Ux(e,a,t.documentUpdates).next((function(e){u=e.nr,s=e.sr}))),!r.isEqual(Hy.min())){var c=n.Bs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return hm.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Ji=i,e}))}function Ux(e,t,n){var r=tb(),i=tb();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Qk();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Hy.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):xy("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{nr:r,sr:i}}))}function Vx(e,t){var n=Ay(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Bx(e,t){var n=Ay(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Bs.getTargetData(e,t).next((function(i){return i?(r=i,hm.resolve(r)):n.Bs.allocateTargetId(e).next((function(i){return r=new Bw(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}function qx(e,t,n){return zx.apply(this,arguments)}function zx(){return(zx=Bn(Un().mark((function e(t,n,r){var i,a,o;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Ay(t),a=i.Ji.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),mm(e.t1)){e.next=12;break}throw e.t1;case 12:xy("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ji=i.Ji.remove(n),i.Yi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function Wx(e,t,n){var r=Ay(e),i=Hy.min(),a=tb();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Ay(e),i=r.Yi.get(n);return void 0!==i?hm.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,Rk(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Hi.getDocumentsMatchingQuery(e,t,n?i:Hy.min(),n?a:tb())})).next((function(e){return Hx(r,Bk(t),e),{documents:e,ir:a}}))}))}function Kx(e,t){var n=Ay(e),r=Ay(n.Bs),i=n.Ji.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.le(e,t).next((function(e){return e?e.target:null}))}))}function Qx(e,t){var n=Ay(e),r=n.Xi.get(t)||Hy.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Zi.getAllFromCollectionGroup(e,t,im(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Hx(n,t,e),e}))}function Hx(e,t,n){var r=e.Xi.get(t)||Hy.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}function Gx(e,t,n,r){return $x.apply(this,arguments)}function $x(){return $x=Bn(Un().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Ay(t),o=tb(),u=Qk(),s=E(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.rr(l.metadata.name),l.document&&(o=o.add(f)),(h=n.ur(l)).setReadTime(n.cr(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Zi.newChangeBuffer({trackRemovals:!0}),e.next=7,Bx(a,function(e){return Rk(Ik($y.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Ux(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Bs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Bs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.nr,t.sr)})).next((function(){return t.nr}))}))})));case 9:case"end":return e.stop()}}),e)}))),$x.apply(this,arguments)}function Yx(e,t){return Xx.apply(this,arguments)}function Xx(){return Xx=Bn(Un().mark((function e(t,n){var r,i,a,o=arguments;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:tb(),e.next=3,Bx(t,Rk(Yw(n.bundledQuery)));case 3:return i=e.sent,a=Ay(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=vw(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.qs.saveNamedQuery(e,n);var o=i.withResumeToken(pg.EMPTY_BYTE_STRING,t);return a.Ji=a.Ji.insert(o.targetId,o),a.Bs.updateTargetData(e,o).next((function(){return a.Bs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Bs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.qs.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Xx.apply(this,arguments)}function Jx(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Zx(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function eS(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var tS=function(){function e(t,n,r,i){h(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return y(e,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Dy(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Sy("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),nS=function(){function e(t,n,r){h(this,e),this.targetId=t,this.state=n,this.error=r}return y(e,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Dy(i.error.code,i.error.message))),a?new e(t,i.state,r):(Sy("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),rS=function(){function e(t,n){h(this,e),this.clientId=t,this.activeTargetIds=n}return y(e,null,[{key:"ar",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=rb(),o=0;i&&o<r.activeTargetIds.length;++o)i=Tm(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Sy("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),iS=function(){function e(t,n){h(this,e),this.clientId=t,this.onlineState=n}return y(e,null,[{key:"ar",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Sy("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),aS=function(){function e(){h(this,e),this.activeTargetIds=rb()}return y(e,[{key:"lr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"dr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"hr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),oS=function(){function e(t,n,r,i,a){h(this,e),this.window=t,this.ii=n,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new og(zy),this.started=!1,this.yr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=Jx(this.persistenceKey,this.wr),this.Ir=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gr=this.gr.insert(this.wr,new aS),this.Tr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Er=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Ar=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.vr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Rr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this._r)}return y(e,[{key:"start",value:function(){var e=Bn(Un().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.$i();case 2:t=e.sent,n=E(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.wr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Jx(this.persistenceKey,i)))&&(o=rS.ar(i,a))&&(this.gr=this.gr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Pr(),(u=this.storage.getItem(this.vr))&&(s=this.br(u))&&this.Vr(s),c=E(this.yr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.mr(f)}catch(d){c.e(d)}finally{c.f()}this.yr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Ir,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Sr(this.gr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.gr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Dr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Dr(e,t,n),this.Cr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(eS(this.persistenceKey,e));if(n){var r=nS.ar(e,n);r&&(t=r.state)}}return this.Nr.lr(e),this.Pr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Nr.dr(e),this.Pr()}},{key:"isLocalQueryTarget",value:function(e){return this.Nr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(eS(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.kr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Cr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Mr(e)}},{key:"notifyBundleLoaded",value:function(e){this.$r(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return xy("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){xy("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){xy("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"mr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(xy("SharedClientState","EVENT",n.key,n.newValue),n.key===this.pr)return void Sy("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable(Bn(Un().mark((function e(){var r,i,a,o,u,s,c;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.Tr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Or(n.key),e.abrupt("return",t.Fr(r,null));case 6:if(!(i=t.Br(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Fr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.Er.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Lr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.qr(a));case 16:e.next=41;break;case 18:if(!t.Ar.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Ur(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Kr(o));case 23:e.next=41;break;case 25:if(n.key!==t.vr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.br(n.newValue))){e.next=30;break}return e.abrupt("return",t.Vr(u));case 30:e.next=41;break;case 32:if(n.key!==t.Ir){e.next=37;break}s=function(e){var t=Sm.ct;if(null!=e)try{var n=JSON.parse(e);Iy("number"==typeof n),t=n}catch(e){Sy("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Sm.ct&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.Rr){e.next=41;break}return c=t.Gr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Qr(e)})));case 41:e.next=44;break;case 43:t.yr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Nr",get:function(){return this.gr.get(this.wr)}},{key:"Pr",value:function(){this.setItem(this.pr,this.Nr.hr())}},{key:"Dr",value:function(e,t,n){var r=new tS(this.currentUser,e,t,n),i=Zx(this.persistenceKey,this.currentUser,e);this.setItem(i,r.hr())}},{key:"Cr",value:function(e){var t=Zx(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Mr",value:function(e){var t={clientId:this.wr,onlineState:e};this.storage.setItem(this.vr,JSON.stringify(t))}},{key:"kr",value:function(e,t,n){var r=eS(this.persistenceKey,e),i=new nS(e,t,n);this.setItem(r,i.hr())}},{key:"$r",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}},{key:"Or",value:function(e){var t=this.Tr.exec(e);return t?t[1]:null}},{key:"Br",value:function(e,t){var n=this.Or(e);return rS.ar(n,t)}},{key:"Lr",value:function(e,t){var n=this.Er.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return tS.ar(new ky(i),r,t)}},{key:"Ur",value:function(e,t){var n=this.Ar.exec(e),r=Number(n[1]);return nS.ar(r,t)}},{key:"br",value:function(e){return iS.ar(e)}},{key:"Gr",value:function(e){return JSON.parse(e)}},{key:"qr",value:function(){var e=Bn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.jr(t.batchId,t.state,t.error));case 2:xy("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Kr",value:function(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}},{key:"Fr",value:function(e,t){var n=this,r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Wr(o,u).then((function(){n.gr=r}))}},{key:"Vr",value:function(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Sr",value:function(e){var t=rb();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),e}(),uS=function(){function e(){h(this,e),this.Hr=new aS,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return y(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Jr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Hr.dr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Jr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Hr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Hr=new aS,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),sS=function(){function e(){h(this,e)}return y(e,[{key:"Yr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),cS=function(){function e(){var t=this;h(this,e),this.Xr=function(){return t.Zr()},this.eo=function(){return t.no()},this.so=[],this.io()}return y(e,[{key:"Yr",value:function(e){this.so.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}},{key:"io",value:function(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}},{key:"Zr",value:function(){xy("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=E(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"no",value:function(){xy("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=E(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),lS=null;function fS(){return null===lS?lS=268435456+Math.round(2147483648*Math.random()):lS++,"0x"+lS.toString(16)}var hS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},dS=function(){function e(t){h(this,e),this.ro=t.ro,this.oo=t.oo}return y(e,[{key:"uo",value:function(e){this.co=e}},{key:"ao",value:function(e){this.ho=e}},{key:"onMessage",value:function(e){this.lo=e}},{key:"close",value:function(){this.oo()}},{key:"send",value:function(e){this.ro(e)}},{key:"fo",value:function(){this.co()}},{key:"wo",value:function(e){this.ho(e)}},{key:"_o",value:function(e){this.lo(e)}}]),e}(),pS="WebChannelConnection",vS=function(e){g(n,e);var t=_(n);function n(e){var r;return h(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return y(n,[{key:"Ao",value:function(e,t,n,r){var i=fS();return new Promise((function(a,o){var u=new vy;u.setWithCredentials(!0),u.listenOnce(ly.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case cy.NO_ERROR:var t=u.getResponseJson();xy(pS,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case cy.TIMEOUT:xy(pS,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Dy(Ny.DEADLINE_EXCEEDED,"Request time out"));break;case cy.HTTP_ERROR:var n=u.getStatus();if(xy(pS,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ny).indexOf(t)>=0?t:Ny.UNKNOWN}(s.status);o(new Dy(c,s.message))}else o(new Dy(Ny.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new Dy(Ny.UNAVAILABLE,"Connection failed."));break;default:Ty()}}finally{xy(pS,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);xy(pS,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"Ro",value:function(e,t,n){var r=fS(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=uy(),o=sy(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},s=this.longPollingOptions.timeoutSeconds;void 0!==s&&(u.longPollingTimeout=Math.round(1e3*s)),this.useFetchStreams&&(u.xmlHttpFactory=new dy({})),this.Eo(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var c=i.join("");xy(pS,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),u);var l=a.createWebChannel(c,u),f=!1,h=!1,d=new dS({ro:function(t){h?xy(pS,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(f||(xy(pS,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),f=!0),xy(pS,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},oo:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,py.EventType.OPEN,(function(){h||xy(pS,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,py.EventType.CLOSE,(function(){h||(h=!0,xy(pS,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.wo())})),p(l,py.EventType.ERROR,(function(t){h||(h=!0,Ey(pS,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.wo(new Dy(Ny.UNAVAILABLE,"The operation could not be completed")))})),p(l,py.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];Iy(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){xy(pS,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=Rb[e];if(void 0!==t)return zb(t)}(u),c=o.message;void 0===s&&(s=Ny.INTERNAL,c="Unknown error status: "+u+" with message "+o.message),h=!0,d.wo(new Dy(s,c)),l.close()}else xy(pS,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d._o(i)}})),p(o,fy.STAT_EVENT,(function(t){t.stat===hy.PROXY?xy(pS,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===hy.NOPROXY&&xy(pS,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.fo()}),0),d}}]),n}(function(){function e(t){h(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.mo=n+"://"+t.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return y(e,[{key:"po",get:function(){return!1}},{key:"Io",value:function(e,t,n,r,i){var a=fS(),o=this.To(e,t);xy("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={};return this.Eo(u,r,i),this.Ao(e,o,u,n).then((function(t){return xy("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw Ey("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"vo",value:function(e,t,n,r,i,a){return this.Io(e,t,n,r,i)}},{key:"Eo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+by,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"To",value:function(e,t){var n=hS[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}]),e}());function yS(){return"undefined"!=typeof window?window:null}function mS(){return"undefined"!=typeof document?document:null}function gS(e){return new lw(e,!0)}var kS=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;h(this,e),this.ii=t,this.timerId=n,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}return y(e,[{key:"reset",value:function(){this.So=0}},{key:"xo",value:function(){this.So=this.Vo}},{key:"No",value:function(e){var t=this;this.cancel();var n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&xy("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,(function(){return t.Co=Date.now(),e()})),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}},{key:"Mo",value:function(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}},{key:"cancel",value:function(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"ko",value:function(){return(Math.random()-.5)*this.So}}]),e}(),bS=function(){function e(t,n,r,i,a,o,u,s){h(this,e),this.ii=t,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new kS(t,n)}return y(e,[{key:"Uo",value:function(){return 1===this.state||5===this.state||this.Ko()}},{key:"Ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Go()}},{key:"stop",value:function(){var e=Bn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Uo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Qo",value:function(){this.state=0,this.qo.reset()}},{key:"jo",value:function(){var e=this;this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(function(){return e.zo()})))}},{key:"Wo",value:function(e){this.Ho(),this.stream.send(e)}},{key:"zo",value:function(){var e=Bn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ho",value:function(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}},{key:"Jo",value:function(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}},{key:"close",value:function(){var e=Bn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==t?this.qo.reset():n&&n.code===Ny.RESOURCE_EXHAUSTED?(Sy(n.toString()),Sy("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===Ny.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.ao(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Yo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=c(t,2),i=r[0],a=r[1];e.Fo===n&&e.Zo(i,a)}),(function(n){t((function(){var t=new Dy(Ny.UNKNOWN,"Fetching auth token failed: "+n.message);return e.tu(t)}))}))}},{key:"Zo",value:function(e,t){var n=this,r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((function(){r((function(){return n.state=2,n.Lo=n.ii.enqueueAfterDelay(n.Oo,1e4,(function(){return n.Ko()&&(n.state=3),Promise.resolve()})),n.listener.uo()}))})),this.stream.ao((function(e){r((function(){return n.tu(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Go",value:function(){var e=this;this.state=5,this.qo.No(Bn(Un().mark((function t(){return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"tu",value:function(e){return xy("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Xo",value:function(e){var t=this;return function(n){t.ii.enqueueAndForget((function(){return t.Fo===e?n():(xy("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),wS=function(e){g(n,e);var t=_(n);function n(e,r,i,a,o,u){var s;return h(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return y(n,[{key:"eu",value:function(e,t){return this.connection.Ro("Listen",e,t)}},{key:"onMessage",value:function(e){this.qo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ty()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(Iy(void 0===t||"string"==typeof t),pg.fromBase64String(t||"")):(Iy(void 0===t||t instanceof Uint8Array),pg.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Ny.UNKNOWN:zb(e.code);return new Dy(t,e.message||"")}(o);n=new nw(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=kw(e,s.document.name),l=vw(s.document.updateTime),f=s.document.createTime?vw(s.document.createTime):Hy.min(),h=new Kg({mapValue:{fields:s.document.fields}}),d=Hg.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new ew(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var y=t.documentDelete;y.document;var m=kw(e,y.document),g=y.readTime?vw(y.readTime):Hy.min(),k=Hg.newNoDocument(m,g),b=y.removedTargetIds||[];n=new ew([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var _=kw(e,w.document),x=w.removedTargetIds||[];n=new ew([],x,_,null)}else{if(!("filter"in t))return Ty();t.filter;var S=t.filter;S.targetId;var E=S.count,C=void 0===E?0:E,T=S.unchangedNames,I=new Bb(C,T),A=S.targetId;n=new tw(A,I)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Hy.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Hy.min():t.readTime?vw(t.readTime):Hy.min()}(e);return this.listener.nu(t,n)}},{key:"su",value:function(e){var t={};t.database=_w(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=_k(r)?{documents:Aw(e,r)}:{query:Nw(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=dw(e,t.resumeToken);var i=fw(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(Hy.min())>0){n.readTime=hw(e,t.snapshotVersion.toTimestamp());var a=fw(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ty()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}},{key:"iu",value:function(e){var t={};t.database=_w(this.serializer),t.removeTarget=e,this.Wo(t)}}]),n}(bS),_S=function(e){g(n,e);var t=_(n);function n(e,r,i,a,o,u){var s;return h(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s.ru=!1,s}return y(n,[{key:"ou",get:function(){return this.ru}},{key:"start",value:function(){this.ru=!1,this.lastStreamToken=void 0,Qf(k(n.prototype),"start",this).call(this)}},{key:"Yo",value:function(){this.ru&&this.uu([])}},{key:"eu",value:function(e,t){return this.connection.Ro("Write",e,t)}},{key:"onMessage",value:function(e){if(Iy(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();var t=function(e,t){return e&&e.length>0?(Iy(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?vw(e.updateTime):vw(t);return n.isEqual(Hy.min())&&(n=vw(t)),new bb(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=vw(e.commitTime);return this.listener.cu(n,t)}return Iy(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}},{key:"hu",value:function(){var e={};e.database=_w(this.serializer),this.Wo(e)}},{key:"uu",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Tw(t.serializer,e)}))};this.Wo(n)}}]),n}(bS),xS=function(e){g(n,e);var t=_(n);function n(e,r,i,a){var o;return h(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.lu=!1,o}return y(n,[{key:"fu",value:function(){if(this.lu)throw new Dy(Ny.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Io",value:function(e,t,n){var r=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=c(i,2),o=a[0],u=a[1];return r.connection.Io(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Ny.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Dy(Ny.UNKNOWN,e.toString())}))}},{key:"vo",value:function(e,t,n,r){var i=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=c(a,2),u=o[0],s=o[1];return i.connection.vo(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Ny.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Dy(Ny.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.lu=!0}}]),n}(function(){return y((function e(){h(this,e)}))}());var SS=function(){function e(t,n){h(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}return y(e,[{key:"gu",value:function(){var e=this;0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e._u=null,e.pu("Backend didn't respond within 10 seconds."),e.yu("Offline"),Promise.resolve()})))}},{key:"Iu",value:function(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}},{key:"set",value:function(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}},{key:"yu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"pu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(Sy(t),this.mu=!1):xy("OnlineStateTracker",t)}},{key:"Tu",value:function(){null!==this._u&&(this._u.cancel(),this._u=null)}}]),e}(),ES=y((function e(t,n,r,i,a){var o=this;h(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr((function(e){r.enqueueAndForget(Bn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=LS(o),!e.t0){e.next=5;break}return xy("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Bn(Un().mark((function e(t){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Ay(t)).vu.add(4),e.next=4,IS(n);case 4:return n.bu.set("Unknown"),n.vu.delete(4),e.next=8,CS(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.bu=new SS(r,i)}));function CS(e){return TS.apply(this,arguments)}function TS(){return(TS=Bn(Un().mark((function e(t){var n,r,i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!LS(t)){e.next=18;break}n=E(t.Ru),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function IS(e){return AS.apply(this,arguments)}function AS(){return(AS=Bn(Un().mark((function e(t){var n,r,i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=E(t.Ru),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function NS(e,t){var n=Ay(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),FS(n)?RS(n):fE(n).Ko()&&OS(n,t))}function DS(e,t){var n=Ay(e),r=fE(n);n.Au.delete(t),r.Ko()&&PS(n,t),0===n.Au.size&&(r.Ko()?r.jo():LS(n)&&n.bu.set("Unknown"))}function OS(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Hy.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}fE(e).su(t)}function PS(e,t){e.Vu.qt(t),fE(e).iu(t)}function RS(e){e.Vu=new iw({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},le:function(t){return e.Au.get(t)||null},ue:function(){return e.datastore.serializer.databaseId}}),fE(e).start(),e.bu.gu()}function FS(e){return LS(e)&&!fE(e).Uo()&&e.Au.size>0}function LS(e){return 0===Ay(e).vu.size}function jS(e){e.Vu=void 0}function MS(e){return US.apply(this,arguments)}function US(){return(US=Bn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Au.forEach((function(e,n){OS(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function VS(e,t){return BS.apply(this,arguments)}function BS(){return(BS=Bn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:jS(t),FS(t)?(t.bu.Iu(n),RS(t)):t.bu.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qS(e,t,n){return zS.apply(this,arguments)}function zS(){return zS=Bn(Un().mark((function e(t,n,r){var i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.bu.set("Online"),!(n instanceof nw&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Bn(Un().mark((function e(t,n){var r,i,a,o;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=E(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.Au.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.Au.delete(o),t.Vu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),xy("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,WS(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof ew?t.Vu.Ht(n):n instanceof tw?t.Vu.ne(n):t.Vu.Xt(n),r.isEqual(Hy.min())){e.next=29;break}return e.prev=14,e.next=17,jx(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Vu.ce(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.Au.get(t);if(r){e.Au.set(t,r.withResumeToken(pg.EMPTY_BYTE_STRING,r.snapshotVersion)),PS(e,t);var i=new Bw(r.target,t,n,r.sequenceNumber);OS(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),xy("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,WS(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),zS.apply(this,arguments)}function WS(e,t,n){return KS.apply(this,arguments)}function KS(){return(KS=Bn(Un().mark((function e(t,n,r){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(mm(n)){e.next=2;break}throw n;case 2:return t.vu.add(1),e.next=5,IS(t);case 5:t.bu.set("Offline"),r||(r=function(){return jx(t.localStore)}),t.asyncQueue.enqueueRetryable(Bn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xy("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.vu.delete(1),e.next=6,CS(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function QS(e,t){return t().catch((function(n){return WS(e,n,t)}))}function HS(e){return GS.apply(this,arguments)}function GS(){return(GS=Bn(Un().mark((function e(t){var n,r,i,a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Ay(t),r=hE(n),i=n.Eu.length>0?n.Eu[n.Eu.length-1].batchId:-1;case 2:if(!$S(n)){e.next=19;break}return e.prev=3,e.next=6,Vx(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Eu.length&&r.jo(),e.abrupt("break",19);case 10:i=a.batchId,YS(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,WS(n,e.t0);case 17:e.next=2;break;case 19:XS(n)&&JS(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function $S(e){return LS(e)&&e.Eu.length<10}function YS(e,t){e.Eu.push(t);var n=hE(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function XS(e){return LS(e)&&!hE(e).Uo()&&e.Eu.length>0}function JS(e){hE(e).start()}function ZS(e){return eE.apply(this,arguments)}function eE(){return(eE=Bn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:hE(t).hu();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tE(e){return nE.apply(this,arguments)}function nE(){return(nE=Bn(Un().mark((function e(t){var n,r,i,a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=hE(t),r=E(t.Eu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.uu(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rE(e,t,n){return iE.apply(this,arguments)}function iE(){return(iE=Bn(Un().mark((function e(t,n,r){var i,a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Eu.shift(),a=Ub.from(i,n,r),e.next=3,QS(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,HS(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function aE(e,t){return oE.apply(this,arguments)}function oE(){return oE=Bn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&hE(t).ou,!e.t0){e.next=4;break}return e.next=4,function(){var e=Bn(Un().mark((function e(t,n){var r,i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!qb(i=n.code)||i===Ny.ABORTED){e.next=7;break}return r=t.Eu.shift(),hE(t).Qo(),e.next=5,QS(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,HS(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:XS(t)&&JS(t);case 5:case"end":return e.stop()}}),e)}))),oE.apply(this,arguments)}function uE(e,t){return sE.apply(this,arguments)}function sE(){return(sE=Bn(Un().mark((function e(t,n){var r,i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Ay(t)).asyncQueue.verifyOperationInProgress(),xy("RemoteStore","RemoteStore received new credentials"),i=LS(r),r.vu.add(3),e.next=6,IS(r);case 6:return i&&r.bu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.vu.delete(3),e.next=12,CS(r);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cE(e,t){return lE.apply(this,arguments)}function lE(){return(lE=Bn(Un().mark((function e(t,n){var r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ay(t),!n){e.next=7;break}return r.vu.delete(2),e.next=5,CS(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.vu.add(2),e.next=12,IS(r);case 12:r.bu.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fE(e){return e.Su||(e.Su=function(e,t,n){var r=Ay(e);return r.fu(),new wS(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:MS.bind(null,e),ao:VS.bind(null,e),nu:qS.bind(null,e)}),e.Ru.push(function(){var t=Bn(Un().mark((function t(n){return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Su.Qo(),FS(e)?RS(e):e.bu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Su.stop();case 6:jS(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Su}function hE(e){return e.Du||(e.Du=function(e,t,n){var r=Ay(e);return r.fu(),new _S(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:ZS.bind(null,e),ao:aE.bind(null,e),au:tE.bind(null,e),cu:rE.bind(null,e)}),e.Ru.push(function(){var t=Bn(Un().mark((function t(n){return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Du.Qo(),t.next=4,HS(e);case 4:t.next=9;break;case 6:return t.next=8,e.Du.stop();case 8:e.Eu.length>0&&(xy("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Du}var dE=function(){function e(t,n,r,i,a){h(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Oy,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return y(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Dy(Ny.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function pE(e,t){if(Sy("AsyncQueue","".concat(t,": ").concat(e)),mm(e))return new Dy(Ny.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var vE=function(){function e(t){h(this,e),this.comparator=t?function(e,n){return t(e,n)||Jy.comparator(e.key,n.key)}:function(e,t){return Jy.comparator(e.key,t.key)},this.keyedMap=Gk(),this.sortedSet=new og(this.comparator)}return y(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),yE=function(){function e(){h(this,e),this.Cu=new og(Jy.comparator)}return y(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Ty():this.Cu=this.Cu.insert(t,e)}},{key:"xu",value:function(){var e=[];return this.Cu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),mE=function(){function e(t,n,r,i,a,o,u,s,c){h(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return y(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jk(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,vE.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),gE=y((function e(){h(this,e),this.Nu=void 0,this.listeners=[]})),kE=y((function e(){h(this,e),this.queries=new Wk((function(e){return Mk(e)}),jk),this.onlineState="Unknown",this.ku=new Set}));function bE(e,t){return wE.apply(this,arguments)}function wE(){return(wE=Bn(Un().mark((function e(t,n){var r,i,a,o,u;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ay(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new gE),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Nu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=pE(e.t0,"Initialization of query '".concat(Uk(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Mu(r.onlineState),o.Nu&&n.$u(o.Nu)&&CE(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}function _E(e,t){return xE.apply(this,arguments)}function xE(){return(xE=Bn(Un().mark((function e(t,n){var r,i,a,o,u;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ay(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function SE(e,t){var n,r=Ay(e),i=!1,a=E(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=E(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.$u(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Nu=o}}}catch(f){a.e(f)}finally{a.f()}i&&CE(r)}function EE(e,t,n){var r=Ay(e),i=r.queries.get(t);if(i){var a,o=E(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function CE(e){e.ku.forEach((function(e){e.next()}))}var TE=function(){function e(t,n,r){h(this,e),this.query=t,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}return y(e,[{key:"$u",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=E(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new mE(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),a=!0):this.qu(e,this.onlineState)&&(this.Uu(e),a=!0),this.Bu=e,a}},{key:"onError",value:function(e){this.Ou.error(e)}},{key:"Mu",value:function(e){this.onlineState=e;var t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}},{key:"qu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Lu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Uu",value:function(e){e=mE.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}]),e}(),IE=function(){function e(t,n){h(this,e),this.Gu=t,this.byteLength=n}return y(e,[{key:"Qu",value:function(){return"metadata"in this.Gu}}]),e}(),AE=function(){function e(t){h(this,e),this.serializer=t}return y(e,[{key:"rr",value:function(e){return kw(this.serializer,e)}},{key:"ur",value:function(e){return e.metadata.exists?Ew(this.serializer,e.document,!1):Hg.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}},{key:"cr",value:function(e){return vw(e)}}]),e}(),NE=function(){function e(t,n,r){h(this,e),this.ju=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=DE(t)}return y(e,[{key:"zu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;var n=$y.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Wu",value:function(e){var t,n=new Map,r=new AE(this.serializer),i=E(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.rr(a.metadata.name),s=E(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||tb()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Bn(Un().mark((function e(){var t,n,r,i,a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gx(this.localStore,new AE(this.serializer),this.documents,this.ju.id);case 2:t=e.sent,n=this.Wu(this.documents),r=E(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Yx(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Hu:this.collectionGroups,Ju:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function DE(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var OE=y((function e(t){h(this,e),this.key=t})),PE=y((function e(t){h(this,e),this.key=t})),RE=function(){function e(t,n){h(this,e),this.query=t,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=tb(),this.mutatedKeys=tb(),this.tc=qk(t),this.ec=new vE(this.tc)}return y(e,[{key:"nc",get:function(){return this.Yu}},{key:"sc",value:function(e,t){var n=this,r=t?t.ic:new yE,i=t?t.ec:this.ec,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Vk(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.rc(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.tc(f,s)>0||c&&n.tc(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{ec:o,ic:r,zi:u,mutatedKeys:a}}},{key:"rc",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;var a=e.ic.xu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ty()}};return n(e)-n(t)}(e.type,t.type)||r.tc(e.doc,t.doc)})),this.oc(n);var o=t?this.uc():[],u=0===this.Zu.size&&this.current?1:0,s=u!==this.Xu;return this.Xu=u,0!==a.length||s?{snapshot:new mE(this.query,e.ec,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}},{key:"Mu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new yE,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}},{key:"ac",value:function(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}},{key:"oc",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Yu=t.Yu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Yu=t.Yu.delete(e)})),this.current=e.current)}},{key:"uc",value:function(){var e=this;if(!this.current)return[];var t=this.Zu;this.Zu=tb(),this.ec.forEach((function(t){e.ac(t.key)&&(e.Zu=e.Zu.add(t.key))}));var n=[];return t.forEach((function(t){e.Zu.has(t)||n.push(new PE(t))})),this.Zu.forEach((function(e){t.has(e)||n.push(new OE(e))})),n}},{key:"hc",value:function(e){this.Yu=e.ir,this.Zu=tb();var t=this.sc(e.documents);return this.applyChanges(t,!0)}},{key:"lc",value:function(){return mE.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}]),e}(),FE=y((function e(t,n,r){h(this,e),this.query=t,this.targetId=n,this.view=r})),LE=y((function e(t){h(this,e),this.key=t,this.fc=!1})),jE=function(){function e(t,n,r,i,a,o){h(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new Wk((function(e){return Mk(e)}),jk),this._c=new Map,this.mc=new Set,this.gc=new og(Jy.comparator),this.yc=new Map,this.Ic=new px,this.Tc={},this.Ec=new Map,this.Ac=z_.Mn(),this.onlineState="Unknown",this.vc=void 0}return y(e,[{key:"isPrimaryClient",get:function(){return!0===this.vc}}]),e}();function ME(e,t){return UE.apply(this,arguments)}function UE(){return(UE=Bn(Un().mark((function e(t,n){var r,i,a,o,u,s;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=DC(t),!(o=r.wc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.lc(),e.next=15;break;case 6:return e.next=8,Bx(r.localStore,Rk(n));case 8:return u=e.sent,s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=13,VE(r,n,i,"current"===s,u.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&NS(r.remoteStore,u);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function VE(e,t,n,r,i){return BE.apply(this,arguments)}function BE(){return BE=Bn(Un().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Rc=function(e,n,r){return function(){var e=Bn(Un().mark((function e(t,n,r,i){var a,o,u;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.sc(r),e.t0=a.zi,!e.t0){e.next=6;break}return e.next=5,Wx(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.sc(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(uC(t,n.targetId,u.cc),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Wx(t.localStore,n,!0);case 3:return o=e.sent,u=new RE(n,o.ir),s=u.sc(o.documents),c=Zb.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),uC(t,r,l.cc),f=new FE(n,r,u),e.abrupt("return",(t.wc.set(n,f),t._c.has(r)?t._c.get(r).push(n):t._c.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),BE.apply(this,arguments)}function qE(e,t){return zE.apply(this,arguments)}function zE(){return(zE=Bn(Un().mark((function e(t,n){var r,i,a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ay(t),i=r.wc.get(n),!((a=r._c.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r._c.set(i.targetId,a.filter((function(e){return!jk(e,n)}))),void r.wc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,qx(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),DS(r.remoteStore,i.targetId),aC(r,i.targetId)})).catch(lm);case 9:e.next=14;break;case 11:return aC(r,i.targetId),e.next=14,qx(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function WE(e,t,n){return KE.apply(this,arguments)}function KE(){return KE=Bn(Un().mark((function e(t,n,r){var i,a,o;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=OC(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Ay(e),a=Qy.now(),o=t.reduce((function(e,t){return e.add(t.key)}),tb());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=Qk(),s=tb();return i.Zi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=E(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Tb(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new Nb(c.key,l,Qg(l.value.mapValue),wb.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:$k(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Tc[e.currentUser.toKey()];r||(r=new og(zy)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,lC(i,a.changes);case 9:return e.next=11,HS(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=pE(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),KE.apply(this,arguments)}function QE(e,t){return HE.apply(this,arguments)}function HE(){return(HE=Bn(Un().mark((function e(t,n){var r,i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ay(t),e.prev=1,e.next=4,Mx(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.yc.get(t);n&&(Iy(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.fc=!0:e.modifiedDocuments.size>0?Iy(n.fc):e.removedDocuments.size>0&&(Iy(n.fc),n.fc=!1))})),e.next=8,lC(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,lm(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function GE(e,t,n){var r=Ay(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.wc.forEach((function(e,n){var r=n.view.Mu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Ay(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=E(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Mu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&CE(n)}(r.eventManager,t),i.length&&r.dc.nu(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function $E(e,t,n){return YE.apply(this,arguments)}function YE(){return(YE=Bn(Un().mark((function e(t,n,r){var i,a,o,u,s,c;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Ay(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.yc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new og(Jy.comparator)).insert(o,Hg.newNoDocument(o,Hy.min())),s=tb().add(o),c=new Jb(Hy.min(),new Map,new og(zy),u,s),e.next=9,QE(i,c);case 9:i.gc=i.gc.remove(o),i.yc.delete(n),cC(i),e.next=16;break;case 14:return e.next=16,qx(i.localStore,n,!1).then((function(){return aC(i,n,r)})).catch(lm);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function XE(e,t){return JE.apply(this,arguments)}function JE(){return(JE=Bn(Un().mark((function e(t,n){var r,i,a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ay(t),i=n.batch.batchId,e.prev=1,e.next=4,Lx(r.localStore,n);case 4:return a=e.sent,iC(r,i,null),rC(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,lC(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,lm(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function ZE(e,t,n){return eC.apply(this,arguments)}function eC(){return(eC=Bn(Un().mark((function e(t,n,r){var i,a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ay(t),e.prev=1,e.next=4,function(e,t){var n=Ay(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Iy(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,iC(i,n,r),rC(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,lC(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,lm(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function tC(e,t){return nC.apply(this,arguments)}function nC(){return(nC=Bn(Un().mark((function e(t,n){var r,i,a,o;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return LS((r=Ay(t)).remoteStore)||xy("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Ay(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Ec.get(i)||[]).push(n),r.Ec.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=pE(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}function rC(e,t){(e.Ec.get(t)||[]).forEach((function(e){e.resolve()})),e.Ec.delete(t)}function iC(e,t,n){var r=Ay(e),i=r.Tc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function aC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=E(e._c.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.wc.delete(a),n&&e.dc.Pc(a,n)}}catch(o){i.e(o)}finally{i.f()}e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((function(t){e.Ic.containsKey(t)||oC(e,t)}))}function oC(e,t){e.mc.delete(t.path.canonicalString());var n=e.gc.get(t);null!==n&&(DS(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),cC(e))}function uC(e,t,n){var r,i=E(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof OE?(e.Ic.addReference(a.key,t),sC(e,a)):a instanceof PE?(xy("SyncEngine","Document no longer in limbo: "+a.key),e.Ic.removeReference(a.key,t),e.Ic.containsKey(a.key)||oC(e,a.key)):Ty()}}catch(o){i.e(o)}finally{i.f()}}function sC(e,t){var n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(xy("SyncEngine","New document in limbo: "+n),e.mc.add(r),cC(e))}function cC(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){var t=e.mc.values().next().value;e.mc.delete(t);var n=new Jy($y.fromString(t)),r=e.Ac.next();e.yc.set(r,new LE(n)),e.gc=e.gc.insert(n,r),NS(e.remoteStore,new Bw(Rk(Ik(n.path)),r,"TargetPurposeLimboResolution",Sm.ct))}}function lC(e,t,n){return fC.apply(this,arguments)}function fC(){return fC=Bn(Un().mark((function e(t,n,r){var i,a,o,u;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Ay(t),a=[],o=[],u=[],e.t0=i.wc.isEmpty(),e.t0){e.next=9;break}return i.wc.forEach((function(e,t){u.push(i.Rc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=Nx.Li(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.dc.nu(a),e.next=9,function(){var e=Bn(Un().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ay(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return hm.forEach(n,(function(t){return hm.forEach(t.Fi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return hm.forEach(t.Bi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),mm(e.t0)){e.next=10;break}throw e.t0;case 10:xy("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=E(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Ji.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Ji=r.Ji.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),fC.apply(this,arguments)}function hC(e,t){return dC.apply(this,arguments)}function dC(){return(dC=Bn(Un().mark((function e(t,n){var r,i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Ay(t)).currentUser.isEqual(n)){e.next=11;break}return xy("SyncEngine","User change. New user:",n.toKey()),e.next=5,Rx(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Ec.forEach((function(e){e.forEach((function(e){e.reject(new Dy(Ny.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,lC(r,i.er);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pC(e,t){var n=Ay(e),r=n.yc.get(t);if(r&&r.fc)return tb().add(r.key);var i=tb(),a=n._c.get(t);if(!a)return i;var o,u=E(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.wc.get(s);i=i.unionWith(c.view.nc)}}catch(l){u.e(l)}finally{u.f()}return i}function vC(e,t){return yC.apply(this,arguments)}function yC(){return(yC=Bn(Un().mark((function e(t,n){var r,i,a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ay(t),e.next=3,Wx(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.hc(i),e.abrupt("return",(r.isPrimaryClient&&uC(r,n.targetId,a.cc),a));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mC(e,t){return gC.apply(this,arguments)}function gC(){return(gC=Bn(Un().mark((function e(t,n){var r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ay(t),e.abrupt("return",Qx(r.localStore,n).then((function(e){return lC(r,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kC(e,t,n,r){return bC.apply(this,arguments)}function bC(){return(bC=Bn(Un().mark((function e(t,n,r,i){var a,o;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ay(t),e.next=3,function(e,t){var n=Ay(e),r=Ay(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Sn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):hm.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,HS(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(iC(a,n,i||null),rC(a,n),function(e,t){Ay(Ay(e).mutationQueue).Cn(t)}(a.localStore,n)):Ty();case 11:return e.next=13,lC(a,o);case 13:e.next=16;break;case 15:xy("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wC(e,t){return _C.apply(this,arguments)}function _C(){return(_C=Bn(Un().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(DC(r=Ay(t)),OC(r),!0!==n||!0===r.vc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,xC(r,i.toArray());case 5:return a=e.sent,r.vc=!0,e.next=9,cE(r.remoteStore,!0);case 9:o=E(a);try{for(o.s();!(u=o.n()).done;)s=u.value,NS(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.vc){e.next=25;break}return c=[],l=Promise.resolve(),r._c.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return aC(r,t),qx(r.localStore,t,!0)})),DS(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,xC(r,c);case 21:return function(e){var t=Ay(e);t.yc.forEach((function(e,n){DS(t.remoteStore,n)})),t.Ic.Ts(),t.yc=new Map,t.gc=new og(Jy.comparator)}(r),r.vc=!1,e.next=25,cE(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xC(e,t,n){return SC.apply(this,arguments)}function SC(){return(SC=Bn(Un().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,y,m;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Ay(t),a=[],o=[],u=E(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i._c.get(c))||0===f.length){e.next=34;break}return e.next=11,Bx(i.localStore,Rk(f[0]));case 11:l=e.sent,h=E(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.wc.get(p),e.next=20,vC(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Kx(i.localStore,c);case 36:return m=e.sent,e.next=39,Bx(i.localStore,m);case 39:return l=e.sent,e.next=42,VE(i,EC(m),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.dc.nu(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])})))).apply(this,arguments)}function EC(e){return Tk(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function CC(e){var t=Ay(e);return Ay(Ay(t.localStore).persistence).$i()}function TC(e,t,n,r){return IC.apply(this,arguments)}function IC(){return(IC=Bn(Un().mark((function e(t,n,r,i){var a,o,u,s;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Ay(t)).vc){e.next=3;break}return e.abrupt("return",void xy("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a._c.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Qx(a.localStore,Bk(o[0]));case 10:return u=e.sent,s=Jb.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,pg.EMPTY_BYTE_STRING),e.next=14,lC(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,qx(a.localStore,n,!0);case 17:return aC(a,n,i),e.abrupt("break",20);case 19:Ty();case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function AC(e,t,n){return NC.apply(this,arguments)}function NC(){return(NC=Bn(Un().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=DC(t)).vc){e.next=45;break}a=E(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i._c.has(u)){e.next=10;break}return xy("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Kx(i.localStore,u);case 12:return s=e.sent,e.next=15,Bx(i.localStore,s);case 15:return c=e.sent,e.next=18,VE(i,EC(s),c.targetId,!1,c.resumeToken);case 18:NS(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=E(r),e.prev=30,h=Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i._c.has(t),!e.t0){e.next=5;break}return e.next=5,qx(i.localStore,t,!1).then((function(){DS(i.remoteStore,t),aC(i,t)})).catch(lm);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])})))).apply(this,arguments)}function DC(e){var t=Ay(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=QE.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=pC.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=$E.bind(null,t),t.dc.nu=SE.bind(null,t.eventManager),t.dc.Pc=EE.bind(null,t.eventManager),t}function OC(e){var t=Ay(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=XE.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ZE.bind(null,t),t}function PC(e,t,n){var r=Ay(e);(function(){var e=Bn(Un().mark((function e(t,n,r){var i,a,o,u,s;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Ay(e),r=vw(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.qs.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(DE(i)),a=new NE(i,t.localStore,n.serializer),e.next=15,n.bc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.zu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.bc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,lC(t,s.Ju,void 0);case 31:return e.next=33,function(e,t){var n=Ay(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.qs.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Hu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Ey("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var RC=function(){function e(){h(this,e),this.synchronizeTabs=!1}return y(e,[{key:"initialize",value:function(){var e=Bn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=gS(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return Px(this.persistence,new Dx,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new bx(_x.zs,this.serializer)}},{key:"createSharedClientState",value:function(e){return new uS}},{key:"terminate",value:function(){var e=Bn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),FC=function(e){g(n,e);var t=_(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this)).Vc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return y(n,[{key:"initialize",value:function(){var e=Bn(Un().mark((function e(t){var r=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qf(k(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Vc.initialize(this,t);case 4:return e.next=6,OC(this.Vc.syncEngine);case 6:return e.next=8,HS(this.Vc.remoteStore);case 8:return e.next=10,this.persistence.Ii((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return Px(this.persistence,new Dx,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new Y_(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new xm(t,this.persistence);return new _m(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=Ax(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?F_.withCacheSize(this.cacheSizeBytes):F_.DEFAULT;return new Cx(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,yS(),mS(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new uS}}]),n}(RC),LC=function(e){g(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,r,!1)).Vc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return y(n,[{key:"initialize",value:function(){var e=Bn(Un().mark((function e(t){var r,i=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qf(k(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Vc.syncEngine,e.t0=this.sharedClientState instanceof oS,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={jr:kC.bind(null,r),zr:TC.bind(null,r),Wr:AC.bind(null,r),$i:CC.bind(null,r),Qr:mC.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ii(function(){var e=Bn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wC(i.Vc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=yS();if(!oS.D(t))throw new Dy(Ny.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Ax(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new oS(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(FC),jC=function(){function e(){h(this,e)}return y(e,[{key:"initialize",value:function(){var e=Bn(Un().mark((function e(t,n){var r=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return GE(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=hC.bind(null,this.syncEngine),e.next=12,cE(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new kE}},{key:"createDatastore",value:function(e){var t,n=gS(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new vS(t));return function(e,t,n,r){return new xS(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return GE(o.syncEngine,e,0)},a=cS.D()?new cS:new sS,new ES(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new jE(e,t,n,r,i,a);return o&&(u.vc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Bn(Un().mark((function e(t){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ay(t),xy("RemoteStore","RemoteStore shutting down."),n.vu.add(5),e.next=5,IS(n);case 5:n.Pu.shutdown(),n.bu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function MC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Bn(Un().mark((function r(){var i;return Un().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Bn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var UC=function(){function e(t){h(this,e),this.observer=t,this.muted=!1}return y(e,[{key:"next",value:function(e){this.observer.next&&this.Sc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Sc(this.observer.error,e):Sy("Uncaught Error in snapshot listener:",e.toString())}},{key:"Dc",value:function(){this.muted=!0}},{key:"Sc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),VC=function(){function e(t,n){var r=this;h(this,e),this.Cc=t,this.serializer=n,this.metadata=new Oy,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then((function(e){e&&e.Qu()?r.metadata.resolve(e.Gu.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Gu))))}),(function(e){return r.metadata.reject(e)}))}return y(e,[{key:"close",value:function(){return this.Cc.cancel()}},{key:"getMetadata",value:function(){var e=Bn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bc",value:function(){var e=Bn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Nc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Nc",value:function(){var e=Bn(Un().mark((function e(){var t,n,r,i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.kc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.xc.decode(t),r=Number(n),isNaN(r)&&this.Mc("length string (".concat(n,") is not valid number")),e.next=9,this.$c(r);case 9:return i=e.sent,e.abrupt("return",new IE(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"kc",value:function(){var e=Bn(Un().mark((function e(){var t,n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Oc()<0)){e.next=7;break}return e.next=3,this.Fc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Oc())<0&&this.Mc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"$c",value:function(){var e=Bn(Un().mark((function e(t){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Fc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Mc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.xc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mc",value:function(e){throw this.Cc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Fc",value:function(){var e=Bn(Un().mark((function e(){var t,n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Cc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),BC=function(){function e(t){h(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return y(e,[{key:"lookup",value:function(){var e=Bn(Un().mark((function e(t){var n,r=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Dy(Ny.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Bn(Un().mark((function e(t,n){var r,i,a,o,u,s;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ay(t),i=_w(r.serializer)+"/documents",a={documents:n.map((function(e){return gw(r.serializer,e)}))},e.next=5,r.vo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Cw(r.serializer,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Iy(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Lb(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Bn(Un().mark((function e(){var t,n=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Jy.fromPath(t);n.mutations.push(new jb(r,n.precondition(r)))})),e.next=7,function(){var e=Bn(Un().mark((function e(t,n){var r,i,a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ay(t),i=_w(r.serializer)+"/documents",a={writes:n.map((function(e){return Tw(r.serializer,e)}))},e.next=3,r.Io("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ty();t=Hy.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Dy(Ny.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Hy.min())?wb.exists(!1):wb.updateTime(t):wb.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Hy.min()))throw new Dy(Ny.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return wb.updateTime(t)}return wb.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),qC=function(){function e(t,n,r,i,a){h(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Bc=r.maxAttempts,this.qo=new kS(this.asyncQueue,"transaction_retry")}return y(e,[{key:"run",value:function(){this.Bc-=1,this.Lc()}},{key:"Lc",value:function(){var e=this;this.qo.No(Bn(Un().mark((function t(){var n,r;return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new BC(e.datastore),(r=e.qc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Uc(t)}))}))})).catch((function(t){e.Uc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"qc",value:function(e){try{var t=this.updateFunction(e);return!Em(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Uc",value:function(e){var t=this;this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Lc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!qb(t)}return!1}}]),e}(),zC=function(){function e(t,n,r,i){var a=this;h(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ky.UNAUTHENTICATED,this.clientId=qy.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Bn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xy("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return xy("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return y(e,[{key:"getConfiguration",value:function(){var e=Bn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Dy(Ny.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Oy;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Bn(Un().mark((function n(){var r;return Un().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=pE(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function WC(e,t){return KC.apply(this,arguments)}function KC(){return KC=Bn(Un().mark((function e(t,n){var r,i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),xy("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Bn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Rx(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),KC.apply(this,arguments)}function QC(e,t){return HC.apply(this,arguments)}function HC(){return(HC=Bn(Un().mark((function e(t,n){var r,i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,$C(t);case 3:return r=e.sent,xy("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return uE(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return uE(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function GC(e){return"FirebaseError"===e.name?e.code===Ny.FAILED_PRECONDITION||e.code===Ny.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function $C(e){return YC.apply(this,arguments)}function YC(){return(YC=Bn(Un().mark((function e(t){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return xy("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,WC(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),GC(n=e.t0)){e.next=13;break}throw n;case 13:return Ey("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,WC(t,new RC);case 16:e.next=21;break;case 18:return xy("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,WC(t,new RC);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function XC(e){return JC.apply(this,arguments)}function JC(){return(JC=Bn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return xy("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,QC(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return xy("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,QC(t,new jC);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ZC(e){return $C(e).then((function(e){return e.persistence}))}function eT(e){return $C(e).then((function(e){return e.localStore}))}function tT(e){return XC(e).then((function(e){return e.remoteStore}))}function nT(e){return XC(e).then((function(e){return e.syncEngine}))}function rT(e){return XC(e).then((function(e){return e.datastore}))}function iT(e){return aT.apply(this,arguments)}function aT(){return(aT=Bn(Un().mark((function e(t){var n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,XC(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=ME.bind(null,n.syncEngine),r.onUnlisten=qE.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Oy;return e.asyncQueue.enqueueAndForget(Bn(Un().mark((function i(){return Un().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new UC({next:function(a){t.enqueueAndForget((function(){return _E(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Dy(Ny.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Dy(Ny.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new TE(Ik(n.path),a,{includeMetadataChanges:!0,Ku:!0});return bE(e,o)},i.next=3,iT(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function uT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Oy;return e.asyncQueue.enqueueAndForget(Bn(Un().mark((function i(){return Un().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new UC({next:function(n){t.enqueueAndForget((function(){return _E(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Dy(Ny.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new TE(n,a,{includeMetadataChanges:!0,Ku:!0});return bE(e,o)},i.next=3,iT(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function sT(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var cT=new Map;function lT(e,t,n){if(!n)throw new Dy(Ny.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function fT(e,t,n,r){if(!0===t&&!0===r)throw new Dy(Ny.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function hT(e){if(!Jy.isDocumentKey(e))throw new Dy(Ny.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function dT(e){if(Jy.isDocumentKey(e))throw new Dy(Ny.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function pT(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Ty()}function vT(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Dy(Ny.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=pT(e);throw new Dy(Ny.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function yT(e,t){if(t<=0)throw new Dy(Ny.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var mT=function(){function e(t){var n,r;if(h(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Dy(Ny.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Dy(Ny.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}fT("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sT(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Dy(Ny.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Dy(Ny.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Dy(Ny.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return y(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}]),e}(),gT=function(){function e(t,n,r,i){h(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mT({}),this._settingsFrozen=!1}return y(e,[{key:"app",get:function(){if(!this._app)throw new Dy(Ny.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Dy(Ny.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mT(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ry;switch(e.type){case"firstParty":return new My(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Dy(Ny.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=cT.get(e);t&&(xy("ComponentProvider","Removing Datastore"),cT.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function kT(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=vT(e,gT))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Ey("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=ky.MOCK_USER;else{o=ar(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Dy(Ny.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ky(s)}e._authCredentials=new Fy(new Py(o,u))}}var bT=function(){function e(t,n,r){h(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return y(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new _T(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),wT=function(){function e(t,n,r){h(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return y(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),_T=function(e){g(n,e);var t=_(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this,e,r,Ik(i)))._path=i,a.type="collection",a}return y(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new bT(this.firestore,null,new Jy(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(wT);function xT(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Or(e),lT("collection","path",t),e instanceof gT){var a=$y.fromString.apply($y,[t].concat(r));return dT(a),new _T(e,null,a)}if(!(e instanceof bT||e instanceof _T))throw new Dy(Ny.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child($y.fromString.apply($y,[t].concat(r)));return dT(o),new _T(e.firestore,null,o)}function ST(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Or(e),1===arguments.length&&(t=qy.A()),lT("doc","path",t),e instanceof gT){var a=$y.fromString.apply($y,[t].concat(r));return hT(a),new bT(e,null,new Jy(a))}if(!(e instanceof bT||e instanceof _T))throw new Dy(Ny.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child($y.fromString.apply($y,[t].concat(r)));return hT(o),new bT(e.firestore,e instanceof _T?e.converter:null,new Jy(o))}function ET(e,t){return e=Or(e),t=Or(t),(e instanceof bT||e instanceof _T)&&(t instanceof bT||t instanceof _T)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function CT(e,t){return e=Or(e),t=Or(t),e instanceof wT&&t instanceof wT&&e.firestore===t.firestore&&jk(e._query,t._query)&&e.converter===t.converter}var TT=function(){function e(){var t=this;h(this,e),this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new kS(this,"async_queue_retry"),this.Xc=function(){var e=mS();e&&xy("AsyncQueue","Visibility state changed to "+e.visibilityState),t.qo.Mo()};var n=mS();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Xc)}return y(e,[{key:"isShuttingDown",get:function(){return this.jc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Zc(),this.ta(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;var t=mS();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Zc(),this.jc)return new Promise((function(){}));var n=new Oy;return this.ta((function(){return t.jc&&t.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Qc.push(e),t.ea()}))}},{key:"ea",value:function(){var e=Bn(Un().mark((function e(){var t=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Qc.length){e.next=14;break}return e.prev=1,e.next=4,this.Qc[0]();case 4:this.Qc.shift(),this.qo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),mm(e.t0)){e.next=12;break}throw e.t0;case 12:xy("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Qc.length>0&&this.qo.No((function(){return t.ea()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"ta",value:function(e){var t=this,n=this.Gc.then((function(){return t.Hc=!0,e().catch((function(e){t.Wc=e,t.Hc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Sy("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Hc=!1,e}))}));return this.Gc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);var i=dE.createAndSchedule(this,e,t,n,(function(e){return r.na(e)}));return this.zc.push(i),i}},{key:"Zc",value:function(){this.Wc&&Ty()}},{key:"verifyOperationInProgress",value:function(){}},{key:"sa",value:function(){var e=Bn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Gc,e.next=3,t;case 3:if(t!==this.Gc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ia",value:function(e){var t,n=E(this.zc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ra",value:function(e){var t=this;return this.sa().then((function(){t.zc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=E(t.zc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.sa()}))}},{key:"oa",value:function(e){this.Yc.push(e)}},{key:"na",value:function(e){var t=this.zc.indexOf(e);this.zc.splice(t,1)}}]),e}();function IT(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=E(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var AT=function(){function e(){h(this,e),this._progressObserver={},this._taskCompletionResolver=new Oy,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return y(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),NT=function(e){g(n,e);var t=_(n);function n(e,r,i,a){var o;return h(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new TT,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return y(n,[{key:"_terminate",value:function(){return this._firestoreClient||OT(this),this._firestoreClient.terminate()}}]),n}(gT);function DT(e){return e._firestoreClient||OT(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function OT(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new _g(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,sT(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new zC(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function PT(e,t,n){var r=new Oy;return e.asyncQueue.enqueue(Bn(Un().mark((function i(){var a;return Un().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,WC(e,n);case 3:return i.next=5,QC(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),GC(a=i.t0)){i.next=13;break}throw a;case 13:Ey("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function RT(e){return function(e){return e.asyncQueue.enqueue(Bn(Un().mark((function t(){var n,r;return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ZC(e);case 2:return n=t.sent,t.next=5,tT(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Ay(e);return t.vu.delete(0),CS(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(DT(e=vT(e,NT)))}function FT(e){return function(e){return e.asyncQueue.enqueue(Bn(Un().mark((function t(){var n,r;return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ZC(e);case 2:return n=t.sent,t.next=5,tT(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Bn(Un().mark((function e(t){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Ay(t)).vu.add(0),e.next=4,IS(n);case 4:n.bu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(DT(e=vT(e,NT)))}function LT(e,t){var n=DT(e=vT(e,NT)),r=new AT;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new VC(e,t)}(function(e,t){if(e instanceof Uint8Array)return MC(e,t);if(e instanceof ArrayBuffer)return MC(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?Qb().encode(e):e),t)}(n,gS(t));e.asyncQueue.enqueueAndForget(Bn(Un().mark((function t(){return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=PC,t.next=3,nT(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function jT(e,t){return function(e,t){return e.asyncQueue.enqueue(Bn(Un().mark((function n(){return Un().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Ay(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.qs.getNamedQuery(e,t)}))},n.next=3,eT(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(DT(e=vT(e,NT)),t).then((function(t){return t?new wT(e,null,t.query):null}))}function MT(e){if(e._initialized||e._terminated)throw new Dy(Ny.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var UT=function(){function e(t){h(this,e),this._byteString=t}return y(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(pg.fromBase64String(t))}catch(t){throw new Dy(Ny.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(pg.fromUint8Array(t))}}]),e}(),VT=function(){function e(){h(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Dy(Ny.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xy(n)}return y(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var BT=y((function e(t){h(this,e),this._methodName=t})),qT=function(){function e(t,n){if(h(this,e),!isFinite(t)||t<-90||t>90)throw new Dy(Ny.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Dy(Ny.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return y(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return zy(this._lat,e._lat)||zy(this._long,e._long)}}]),e}(),zT=/^__.*__$/,WT=function(){function e(t,n,r){h(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return y(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Nb(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ab(e,this.data,t,this.fieldTransforms)}}]),e}(),KT=function(){function e(t,n,r){h(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return y(e,[{key:"toMutation",value:function(e,t){return new Nb(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function QT(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ty()}}var HT=function(){function e(t,n,r,i,a,o){h(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return y(e,[{key:"path",get:function(){return this.settings.path}},{key:"ca",get:function(){return this.settings.ca}},{key:"aa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ha",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}},{key:"da",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}},{key:"wa",value:function(e){return this.aa({path:void 0,la:!0})}},{key:"_a",value:function(e){return dI(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ua",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.fa(this.path.get(e))}},{key:"fa",value:function(e){if(0===e.length)throw this._a("Document fields must not be empty");if(QT(this.ca)&&zT.test(e))throw this._a('Document fields cannot begin and end with "__"')}}]),e}(),GT=function(){function e(t,n,r){h(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||gS(t)}return y(e,[{key:"ya",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new HT({ca:e,methodName:t,ga:n,path:Xy.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function $T(e){var t=e._freezeSettings(),n=gS(e._databaseId);return new GT(e._databaseId,!!t.ignoreUndefinedProperties,n)}function YT(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ya(a.merge||a.mergeFields?2:0,t,n,i);cI("Data must be an object, but it was:",o,r);var u,s,c=uI(r,o);if(a.merge)u=new hg(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=E(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=lI(t,l.value,n);if(!o.contains(d))throw new Dy(Ny.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));pI(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}u=new hg(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new WT(new Kg(c),u,s)}var XT=function(e){g(n,e);var t=_(n);function n(){return h(this,n),t.apply(this,arguments)}return y(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(BT);function JT(e,t,n){return new HT({ca:3,ga:t.settings.ga,methodName:e._methodName,la:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var ZT=function(e){g(n,e);var t=_(n);function n(){return h(this,n),t.apply(this,arguments)}return y(n,[{key:"_toFieldTransform",value:function(e){return new kb(e.path,new fb)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(BT),eI=function(e){g(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e)).pa=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=JT(this,e,!0),n=this.pa.map((function(e){return oI(e,t)})),r=new hb(n);return new kb(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(BT),tI=function(e){g(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e)).pa=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=JT(this,e,!0),n=this.pa.map((function(e){return oI(e,t)})),r=new pb(n);return new kb(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(BT),nI=function(e){g(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e)).Ia=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=new yb(e.serializer,ob(e.serializer,this.Ia));return new kb(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(BT);function rI(e,t,n,r){var i=e.ya(1,t,n);cI("Data must be an object, but it was:",i,r);var a=[],o=Kg.empty();ig(r,(function(e,r){var u=hI(t,e,n);r=Or(r);var s=i.da(u);if(r instanceof XT)a.push(u);else{var c=oI(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new hg(a);return new KT(o,u,i.fieldTransforms)}function iI(e,t,n,r,i,a){var o=e.ya(1,t,n),u=[lI(t,r,n)],s=[i];if(a.length%2!=0)throw new Dy(Ny.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(lI(t,a[c])),s.push(a[c+1]);for(var l=[],f=Kg.empty(),h=u.length-1;h>=0;--h)if(!pI(l,u[h])){var d=u[h],p=s[h];p=Or(p);var v=o.da(d);if(p instanceof XT)l.push(d);else{var y=oI(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new hg(l);return new KT(f,m,o.fieldTransforms)}function aI(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return oI(n,e.ya(r?4:3,t))}function oI(e,t){if(sI(e=Or(e)))return cI("Unsupported field value:",t,e),uI(e,t);if(e instanceof BT)return function(e,t){if(!QT(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=E(e);try{for(a.s();!(n=a.n()).done;){var o=oI(n.value,t.wa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Or(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ob(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Qy.fromDate(e);return{timestampValue:hw(t.serializer,n)}}if(e instanceof Qy){var r=new Qy(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:hw(t.serializer,r)}}if(e instanceof qT)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof UT)return{bytesValue:dw(t.serializer,e._byteString)};if(e instanceof bT){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t._a("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:yw(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(pT(e)))}(e,t)}function uI(e,t){var n={};return ag(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ig(e,(function(e,r){var i=oI(r,t.ha(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function sI(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Qy||e instanceof qT||e instanceof UT||e instanceof bT||e instanceof BT)}function cI(e,t,n){if(!sI(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=pT(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function lI(e,t,n){if((t=Or(t))instanceof VT)return t._internalPath;if("string"==typeof t)return hI(e,t);throw dI("Field path arguments must be of type string or ",e,!1,void 0,n)}var fI=new RegExp("[~\\*/\\[\\]]");function hI(e,t,n){if(t.search(fI)>=0)throw dI("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return x(VT,f(t.split(".")))._internalPath}catch(r){throw dI("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function dI(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Dy(Ny.INVALID_ARGUMENT,u+e+s)}function pI(e,t){return e.some((function(e){return e.isEqual(t)}))}var vI=function(){function e(t,n,r,i,a){h(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return y(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new bT(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new yI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(mI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),yI=function(e){g(n,e);var t=_(n);function n(){return h(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(){return Qf(k(n.prototype),"data",this).call(this)}}]),n}(vI);function mI(e,t){return"string"==typeof t?hI(e,t):t instanceof VT?t._internalPath:t._delegate._internalPath}function gI(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Dy(Ny.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var kI=y((function e(){h(this,e)})),bI=function(e){g(n,e);var t=_(n);function n(){return h(this,n),t.apply(this,arguments)}return y(n)}(kI);function wI(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof kI&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof xI})).length,n=e.filter((function(e){return e instanceof _I})).length;if(t>1||t>0&&n>0)throw new Dy(Ny.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=E(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var _I=function(e){g(n,e);var t=_(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return y(n,[{key:"_apply",value:function(e){var t=this._parse(e);return FI(e._query,t),new wT(e.firestore,e.converter,Fk(e._query,t))}},{key:"_parse",value:function(e){var t=$T(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Dy(Ny.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){RI(o,a);var s,c=[],l=E(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(PI(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=PI(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||RI(o,a),u=aI(n,"where",o,"in"===a||"not-in"===a);return ek.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(bI);var xI=function(e){g(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return y(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:tk.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=E(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;FI(r,a),r=Fk(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new wT(e.firestore,e.converter,Fk(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(kI);var SI=function(e){g(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return y(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Dy(Ny.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Dy(Ny.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Xg(t,n);return function(e,t){if(null===Nk(e)){var n=Dk(e);null!==n&&LI(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new wT(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Ck(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(bI);var EI=function(e){g(n,e);var t=_(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return y(n,[{key:"_apply",value:function(e){return new wT(e.firestore,e.converter,Lk(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(bI);var CI=function(e){g(n,e);var t=_(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return y(n,[{key:"_apply",value:function(e){var t=OI(e,this.type,this._docOrFields,this._inclusive);return new wT(e.firestore,e.converter,function(e,t){return new Ck(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(bI);function TI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return CI._create("startAt",t,!0)}function II(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return CI._create("startAfter",t,!1)}var AI=function(e){g(n,e);var t=_(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return y(n,[{key:"_apply",value:function(e){var t=OI(e,this.type,this._docOrFields,this._inclusive);return new wT(e.firestore,e.converter,function(e,t){return new Ck(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(bI);function NI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return AI._create("endBefore",t,!1)}function DI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return AI._create("endAt",t,!0)}function OI(e,t,n,r){if(n[0]=Or(n[0]),n[0]instanceof vI)return function(e,t,n,r,i){if(!r)throw new Dy(Ny.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=E(Pk(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Pg(t,r.key));else{var c=r.data.field(s.field);if(kg(c))throw new Dy(Ny.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Dy(Ny.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Gg(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=$T(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Dy(Ny.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Dy(Ny.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Ok(e)&&-1!==c.indexOf("/"))throw new Dy(Ny.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child($y.fromString(c));if(!Jy.isDocumentKey(l))throw new Dy(Ny.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Jy(l);u.push(Pg(t,f))}else{var h=aI(n,r,c);u.push(h)}}return new Gg(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function PI(e,t,n){if("string"==typeof(n=Or(n))){if(""===n)throw new Dy(Ny.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ok(t)&&-1!==n.indexOf("/"))throw new Dy(Ny.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child($y.fromString(n));if(!Jy.isDocumentKey(r))throw new Dy(Ny.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Pg(e,new Jy(r))}if(n instanceof bT)return Pg(e,n._key);throw new Dy(Ny.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(pT(n),"."))}function RI(e,t){if(!Array.isArray(e)||0===e.length)throw new Dy(Ny.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function FI(e,t){if(t.isInequality()){var n=Dk(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Dy(Ny.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=Nk(e);null!==i&&LI(e,r,i)}var a=function(e,t){var n,r=E(e);try{for(r.s();!(n=r.n()).done;){var i,a=E(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new Dy(Ny.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Dy(Ny.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function LI(e,t,n){if(!n.isEqual(t))throw new Dy(Ny.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var jI=function(){function e(){h(this,e)}return y(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Cg(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mg(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gg(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ty()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return ig(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new qT(mg(e.latitude),mg(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=bg(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(wg(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=yg(e);return new Qy(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=$y.fromString(e);Iy(Vw(n));var r=new xg(n.get(1),n.get(3)),i=new Jy(n.popFirst(5));return r.isEqual(t)||Sy("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function MI(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var UI=function(e){g(n,e);var t=_(n);function n(e){var r;return h(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new UT(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new bT(this.firestore,null,t)}}]),n}(jI);var VI=function(){function e(t,n){h(this,e),this.hasPendingWrites=t,this.fromCache=n}return y(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),BI=function(e){g(n,e);var t=_(n);function n(e,r,i,a,o,u){var s;return h(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return y(n,[{key:"exists",value:function(){return Qf(k(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new qI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(mI("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(vI),qI=function(e){g(n,e);var t=_(n);function n(){return h(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Qf(k(n.prototype),"data",this).call(this,e)}}]),n}(BI),zI=function(){function e(t,n,r,i){h(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new VI(i.hasPendingWrites,i.fromCache),this.query=r}return y(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new qI(n._firestore,n._userDataWriter,r.key,r,new VI(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Dy(Ny.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new qI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new VI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new qI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new VI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:WI(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function WI(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ty()}}function KI(e,t){return e instanceof BI&&t instanceof BI?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof zI&&t instanceof zI&&e._firestore===t._firestore&&CT(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var QI=function(e){g(n,e);var t=_(n);function n(e){var r;return h(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new UT(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new bT(this.firestore,null,t)}}]),n}(jI);function HI(e){e=vT(e,bT);var t=vT(e.firestore,NT),n=DT(t),r=new QI(t);return function(e,t){var n=new Oy;return e.asyncQueue.enqueueAndForget(Bn(Un().mark((function r(){return Un().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Bn(Un().mark((function e(t,n,r){var i,a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Ay(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Dy(Ny.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=pE(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,eT(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new BI(t,r,e._key,n,new VI(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function GI(e){e=vT(e,wT);var t=vT(e.firestore,NT),n=DT(t),r=new QI(t);return function(e,t){var n=new Oy;return e.asyncQueue.enqueueAndForget(Bn(Un().mark((function r(){return Un().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Bn(Un().mark((function e(t,n,r){var i,a,o,u,s;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Wx(t,n,!0);case 3:i=e.sent,a=new RE(n,i.ir),o=a.sc(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=pE(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,eT(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new zI(t,r,e,n)}))}function $I(e,t,n){e=vT(e,bT);var r=vT(e.firestore,NT),i=MI(e.converter,t,n);return ZI(r,[YT($T(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,wb.none())])}function YI(e,t,n){e=vT(e,bT);for(var r=vT(e.firestore,NT),i=$T(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return ZI(r,[("string"==typeof(t=Or(t))||t instanceof VT?iI(i,"updateDoc",e._key,t,n,o):rI(i,"updateDoc",e._key,t)).toMutation(e._key,wb.exists(!0))])}function XI(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Or(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||IT(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(IT(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof bT)l=vT(e.firestore,NT),f=Ik(e._key.path),c={next:function(t){n[s]&&n[s](eA(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=vT(e,wT);l=vT(p.firestore,NT),f=p._query;var v=new QI(l);c={next:function(e){n[s]&&n[s](new zI(l,v,p,e))},error:n[s+1],complete:n[s+2]},gI(e._query)}return function(e,t,n,r){var i=new UC(r),a=new TE(t,i,n);return e.asyncQueue.enqueueAndForget(Bn(Un().mark((function t(){return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=bE,t.next=3,iT(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Dc(),e.asyncQueue.enqueueAndForget(Bn(Un().mark((function t(){return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=_E,t.next=3,iT(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(DT(l),f,h,c)}function JI(e,t){return function(e,t){var n=new UC(t);return e.asyncQueue.enqueueAndForget(Bn(Un().mark((function t(){return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Ay(e).ku.add(t),t.next()},t.next=3,iT(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Dc(),e.asyncQueue.enqueueAndForget(Bn(Un().mark((function t(){return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Ay(e).ku.delete(t)},t.next=3,iT(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(DT(e=vT(e,NT)),IT(t)?t:{next:t})}function ZI(e,t){return function(e,t){var n=new Oy;return e.asyncQueue.enqueueAndForget(Bn(Un().mark((function r(){return Un().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=WE,r.next=3,nT(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(DT(e),t)}function eA(e,t,n){var r=n.docs.get(t._key),i=new QI(e);return new BI(e,i,t._key,r,new VI(n.hasPendingWrites,n.fromCache),t.converter)}var tA={maxAttempts:5},nA=function(){function e(t,n){h(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=$T(t)}return y(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=rA(e,this._firestore),i=MI(r.converter,t,n),a=YT(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,wb.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=rA(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Or(t))||t instanceof VT?iI(this._dataReader,"WriteBatch.update",i._key,t,n,o):rI(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,wb.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=rA(e,this._firestore);return this._mutations=this._mutations.concat(new Lb(t._key,wb.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Dy(Ny.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function rA(e,t){if((e=Or(e)).firestore!==t)throw new Dy(Ny.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var iA=function(e){g(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,r))._firestore=e,i}return y(n,[{key:"get",value:function(e){var t=this,r=rA(e,this._firestore),i=new QI(this._firestore);return Qf(k(n.prototype),"get",this).call(this,e).then((function(e){return new BI(t._firestore,i,r._key,e._document,new VI(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){h(this,e),this._firestore=t,this._transaction=n,this._dataReader=$T(t)}return y(e,[{key:"get",value:function(e){var t=this,n=rA(e,this._firestore),r=new UI(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Ty();var i=e[0];if(i.isFoundDocument())return new vI(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new vI(t._firestore,r,n._key,null,n.converter);throw Ty()}))}},{key:"set",value:function(e,t,n){var r=rA(e,this._firestore),i=MI(r.converter,t,n),a=YT(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=rA(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Or(t))||t instanceof VT?iI(this._dataReader,"Transaction.update",i._key,t,n,o):rI(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=rA(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function aA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new eI("arrayUnion",t)}function oA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new tI("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){by=e}(Ai),_i(new Pr("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new NT(new Ly(e.getProvider("auth-internal")),new Vy(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Dy(Ny.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xg(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Fi(gy,"3.12.0",e),Fi(gy,"3.12.0","esm2017")}();function uA(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Dy("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function sA(){if("undefined"===typeof Uint8Array)throw new Dy("unimplemented","Uint8Arrays are not available in this environment.")}function cA(){if("undefined"==typeof atob)throw new Dy("unimplemented","Blobs are unavailable in Firestore in this environment.")}var lA=function(){function e(t){h(this,e),this._delegate=t}return y(e,[{key:"toBase64",value:function(){return cA(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return sA(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return cA(),new e(UT.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return sA(),new e(UT.fromUint8Array(t))}}]),e}();function fA(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=E(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var hA=function(){function e(){h(this,e)}return y(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){MT(e=vT(e,NT));var n=DT(e);if(n._uninitializedComponentsProvider)throw new Dy(Ny.FAILED_PRECONDITION,"SDK cache is already specified.");Ey("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new jC;return PT(n,i,new FC(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){MT(e=vT(e,NT));var t=DT(e);if(t._uninitializedComponentsProvider)throw new Dy(Ny.FAILED_PRECONDITION,"SDK cache is already specified.");Ey("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new jC;return PT(t,r,new LC(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Dy(Ny.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Oy;return e._queue.enqueueAndForgetEvenWhileRestricted(Bn(Un().mark((function n(){return Un().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Bn(Un().mark((function e(t){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(pm.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,pm.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Ax(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),dA=function(){function e(t,n,r){var i=this;h(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof xg||(this._appCompat=t)}return y(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Ey("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};kT(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return RT(this._delegate)}},{key:"disableNetwork",value:function(){return FT(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&fT("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){var t=new Oy;return e.asyncQueue.enqueueAndForget(Bn(Un().mark((function n(){return Un().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=tC,n.next=3,nT(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(DT(vT(this._delegate,NT)))}},{key:"onSnapshotsInSync",value:function(e){return JI(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Dy("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new TA(this,xT(this._delegate,e))}catch(t){throw kA(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new gA(this,ST(this._delegate,e))}catch(t){throw kA(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new SA(this,function(e,t){if(e=vT(e,gT),lT("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Dy(Ny.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new wT(e,null,function(e){return new Ck($y.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw kA(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=vT(e,NT);var r=Object.assign(Object.assign({},tA),n);return function(e){if(e.maxAttempts<1)throw new Dy(Ny.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Oy;return e.asyncQueue.enqueueAndForget(Bn(Un().mark((function i(){var a;return Un().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,rT(e);case 2:a=i.sent,new qC(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(DT(e),(function(n){return t(new iA(e,n))}),r)}(this._delegate,(function(n){return e(new vA(t,n))}))}},{key:"batch",value:function(){var e=this;return DT(this._delegate),new yA(new nA(this._delegate,(function(t){return ZI(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return LT(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return jT(this._delegate,e).then((function(e){return e?new SA(t,e):null}))}}]),e}(),pA=function(e){g(n,e);var t=_(n);function n(e){var r;return h(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new lA(new UT(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return gA.forKey(t,this.firestore,null)}}]),n}(jI);var vA=function(){function e(t,n){h(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new pA(t)}return y(e,[{key:"get",value:function(e){var t=this,n=IA(e);return this._delegate.get(n).then((function(e){return new _A(t._firestore,new BI(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=IA(e);return n?(uA("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=IA(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=IA(e);return this._delegate.delete(t),this}}]),e}(),yA=function(){function e(t){h(this,e),this._delegate=t}return y(e,[{key:"set",value:function(e,t,n){var r=IA(e);return n?(uA("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=IA(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=IA(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),mA=function(){function e(t,n,r){h(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return y(e,[{key:"fromFirestore",value:function(e,t){var n=new qI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new xA(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new pA(t),n),i.set(n,a)),a}}]),e}();mA.INSTANCES=new WeakMap;var gA=function(){function e(t,n){h(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new pA(t)}return y(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new TA(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new TA(this.firestore,xT(this._delegate,e))}catch(t){throw kA(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Or(e))instanceof bT&&ET(this._delegate,e)}},{key:"set",value:function(e,t){t=uA("DocumentReference.set",t);try{return t?$I(this._delegate,e,t):$I(this._delegate,e)}catch(n){throw kA(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?YI(this._delegate,e):YI.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw kA(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return ZI(vT((e=this._delegate).firestore,NT),[new Lb(e._key,wb.none())]);var e}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=bA(n),a=wA(n,(function(t){return new _A(e.firestore,new BI(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return XI(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?HI(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=vT(e,bT);var t=vT(e.firestore,NT);return oT(DT(t),e._key,{source:"server"}).then((function(n){return eA(t,e,n)}))}(this._delegate):function(e){e=vT(e,bT);var t=vT(e.firestore,NT);return oT(DT(t),e._key).then((function(n){return eA(t,e,n)}))}(this._delegate)).then((function(e){return new _A(t.firestore,new BI(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(mA.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Dy("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new bT(n._delegate,r,new Jy(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new bT(n._delegate,r,t))}}]),e}();function kA(e,t,n){return e.message=e.message.replace(t,n),e}function bA(e){var t,n=E(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!fA(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function wA(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=fA(e[0])?e[0]:fA(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var _A=function(){function e(t,n){h(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"ref",get:function(){return new gA(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return KI(this._delegate,e._delegate)}}]),e}(),xA=function(e){g(n,e);var t=_(n);function n(){return h(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return void 0!==t||Ty(),t}}]),n}(_A),SA=function(){function e(t,n){h(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new pA(t)}return y(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,wI(this._delegate,function(e,t,n){var r=t,i=mI("where",e);return _I._create(i,r,n)}(t,n,r)))}catch(i){throw kA(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,wI(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=mI("orderBy",e);return SI._create(n,t)}(t,n)))}catch(r){throw kA(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,wI(this._delegate,(yT("limit",n=t),EI._create("limit",n,"F"))))}catch(r){throw kA(r,"limit()","Query.limit()")}var n}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,wI(this._delegate,(yT("limitToLast",n=t),EI._create("limitToLast",n,"L"))))}catch(r){throw kA(r,"limitToLast()","Query.limitToLast()")}var n}},{key:"startAt",value:function(){try{return new e(this.firestore,wI(this._delegate,TI.apply(void 0,arguments)))}catch(t){throw kA(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,wI(this._delegate,II.apply(void 0,arguments)))}catch(t){throw kA(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,wI(this._delegate,NI.apply(void 0,arguments)))}catch(t){throw kA(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,wI(this._delegate,DI.apply(void 0,arguments)))}catch(t){throw kA(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return CT(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?GI(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=vT(e,wT);var t=vT(e.firestore,NT),n=DT(t),r=new QI(t);return uT(n,e._query,{source:"server"}).then((function(n){return new zI(t,r,e,n)}))}(this._delegate):function(e){e=vT(e,wT);var t=vT(e.firestore,NT),n=DT(t),r=new QI(t);return gI(e._query),uT(n,e._query).then((function(n){return new zI(t,r,e,n)}))}(this._delegate)).then((function(e){return new CA(t.firestore,new zI(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=bA(n),a=wA(n,(function(t){return new CA(e.firestore,new zI(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return XI(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(mA.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),EA=function(){function e(t,n){h(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new xA(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),CA=function(){function e(t,n){h(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"query",get:function(){return new SA(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new xA(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new EA(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new xA(n._firestore,r))}))}},{key:"isEqual",value:function(e){return KI(this._delegate,e._delegate)}}]),e}(),TA=function(e){g(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return y(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new gA(this.firestore,e):null}},{key:"doc",value:function(e){try{return new gA(this.firestore,void 0===e?ST(this._delegate):ST(this._delegate,e))}catch(t){throw kA(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=vT(e.firestore,NT),r=ST(e),i=MI(e.converter,t);return ZI(n,[YT($T(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,wb.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new gA(t.firestore,e)}))}},{key:"isEqual",value:function(e){return ET(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(mA.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(SA);function IA(e){return vT(e,bT)}var AA=function(){function e(){h(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=x(VT,n)}return y(e,[{key:"isEqual",value:function(e){return(e=Or(e))instanceof VT&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Xy.keyField().canonicalString())}}]),e}(),NA=function(){function e(t){h(this,e),this._delegate=t}return y(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new ZT("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new XT("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=aA.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=oA.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=new nI("increment",t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),DA={Firestore:dA,GeoPoint:qT,Timestamp:Qy,Blob:lA,Transaction:vA,WriteBatch:yA,DocumentReference:gA,DocumentSnapshot:_A,Query:SA,QueryDocumentSnapshot:xA,QuerySnapshot:CA,CollectionReference:TA,FieldPath:AA,FieldValue:NA,setLogLevel:function(e){var t;t=e,wy.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Pr("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},DA)))}(e,(function(e,t){return new dA(e,t,new hA)})),e.registerVersion("@firebase/firestore-compat","0.3.9")}(ua);ua.initializeApp({apiKey:"AIzaSyDusTR62nXSXyjblgvFNIFGepxtzYxHVF8",authDomain:"kakoot-d06ff.firebaseapp.com",databaseURL:"https://kakoot-d06ff-default-rtdb.firebaseio.com",projectId:"kakoot-d06ff",storageBucket:"kakoot-d06ff.appspot.com",messagingSenderId:"594818848188",appId:"1:594818848188:web:331461933f89b9bcb707b9"});var OA=ua.database(),PA=ua.database().ref(),RA=PA.child("users"),FA=PA.child("games");function LA(){return(LA=Bn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,RA.child(t).child("templates").child(n.templateName).set(n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jA(){return jA=Bn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,RA.child(t).child("templates").once("value",(function(e){var t=e.val(),r=[];Object.values(t).forEach((function(e){var t=null!==e&&void 0!==e?e:{},n={allQuestions:t.allQuestions,id:t.id,questionTime:t.questionTime,templateName:t.templateName};r.push(n)})),n(r)}),(function(e){console.error("Error retrieving data ",e)}));case 2:case"end":return e.stop()}}),e)}))),jA.apply(this,arguments)}var MA="".concat("/Cacarrot");function UA(e){var t=e.answerSign,n=e.answerRef,r=e.characterLimit,i=e.handleInput,a=e.onQuestionChange,o=e.answer,u=e.checkboxNumber,s=e.checkboxes,c=e.handleCheckboxChange;return(0,Rn.jsxs)("span",{id:"answer-".concat(t),className:"answer",children:[(0,Rn.jsx)("div",{ref:n,className:"my-input editable-div",contentEditable:!0,onInput:function(){i(n,r),a("answer".concat(t),n.current.innerText)},children:o}),(0,Rn.jsx)("input",{checked:s[u].checked,className:"answer-checkbox",type:"checkbox",onChange:function(e){c(u),a("correctAnswer",t)}})]})}function VA(e){var t=e.question,n=e.questionNumber,i=e.setQuestions,a=(0,r.useRef)(null),o=(0,r.useRef)(null),u=(0,r.useRef)(null),s=(0,r.useRef)(null),l=(0,r.useRef)(null),f=c((0,r.useState)([{id:0,checked:!1},{id:1,checked:!1},{id:2,checked:!1},{id:3,checked:!1}]),2),h=f[0],d=f[1];function p(e,t){i((function(r){return r.forEach((function(r){return r.questionNumber===n&&("question"===e?r.question=t:"answerA"===e?r.answerA=t:"answerB"===e?r.answerB=t:"answerC"===e?r.answerC=t:"answerD"===e?r.answerD=t:"correctAnswer"===e&&(r.correctAnswer=t)),r})),r}))}(0,r.useEffect)((function(){var e=h.map((function(e){return 0===e.id&&"A"===t.correctAnswer||1===e.id&&"B"===t.correctAnswer||2===e.id&&"C"===t.correctAnswer||3===e.id&&"D"===t.correctAnswer?Qr(Qr({},e),{},{checked:!0}):Qr(Qr({},e),{},{checked:!1})}));d(e)}),[n]);var v=function(e,t){var n=e.current.innerText;n.length>t&&(console.log(e.current.innerText),e.current.innerText=n.slice(0,t))};function y(e){if(console.log(e),h[e].checked){var t=h.map((function(t){return t.id===e?Qr(Qr({},t),{},{checked:!1}):Qr({},t)}));console.log(t),d(t)}else{var n=h.map((function(t){return t.id===e?Qr(Qr({},t),{},{checked:!0}):Qr(Qr({},t),{},{checked:!1})}));console.log(n),d(n)}}var m=[{answerSign:"A",answerRef:o,answer:t.answerA,checkboxNumber:0},{answerSign:"B",answerRef:u,answer:t.answerB,checkboxNumber:1},{answerSign:"C",answerRef:s,answer:t.answerC,checkboxNumber:2},{answerSign:"D",answerRef:l,answer:t.answerD,checkboxNumber:3}];return(0,Rn.jsxs)("section",{className:"question-template",children:[(0,Rn.jsx)("div",{ref:a,className:"my-input question-input",placeholder:"Write your question here",contentEditable:!0,onInput:function(){v(a,40),p("question",a.current.innerText)},children:t.question}),(0,Rn.jsx)("img",{className:"question-image",src:"".concat(MA,"/landscape-image.jpg"),alt:"Beautiful"}),(0,Rn.jsx)("div",{className:"answers-placeholder",children:m.map((function(e){return(0,Rn.jsx)(UA,{answerSign:e.answerSign,answerRef:e.answerRef,answer:e.answer,checkboxNumber:e.checkboxNumber,characterLimit:70,handleInput:v,onQuestionChange:p,checkboxes:h,handleCheckboxChange:y})}))})]})}function BA(e){var t=e.value,n=e.setValue,i=e.placeholder,a=e.characterLimit,o=e.visibleWarning,u=(0,r.useRef)(null),s=c((0,r.useState)(""),2),l=s[0],f=s[1];return(0,Rn.jsxs)(Rn.Fragment,{children:[(0,Rn.jsx)("input",{ref:u,className:"my-input",style:{margin:"1rem",fontSize:"1.5rem"},placeholder:i,value:t,onChange:function(e){!function(e){var t=e.current.value;t.length>a?(e.current.value=t.slice(0,a),o&&f("Template name can only have ".concat(a," characters length."))):f("")}(u),n(e.target.value)}}),(0,Rn.jsx)("div",{className:"error",style:{padding:"10px"},children:l})]})}var qA=function(){var e=Bn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n((function(e){return e.length>1?e.filter((function(n){return n!==e[t-1]})):e}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),zA=function(){var e=Bn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n((function(e){return[].concat(f(e),[t])}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function WA(e){var t=e.toggleModal,n=e.questionTime,r=e.setQuestionTime,i=e.timesForAnswer;return(0,Rn.jsxs)("div",{className:"bar right-bar",children:[(0,Rn.jsx)("button",{onClick:t,children:"Save template"}),(0,Rn.jsx)("label",{children:"Time for answer"}),(0,Rn.jsx)("select",{value:n,onChange:function(e){r(parseInt(e.target.value))},children:i.map((function(e){return(0,Rn.jsxs)("option",{value:e,children:[e," sec"]},e)}))})]})}function KA(e){var t=e.slideNumber,n=e.questions,i=(e.setQuestions,e.choosenQuestion),a=e.setChoosenQuestion,o=e.removeSlide;(0,r.useEffect)((function(){n[t-1].questionNumber=t}),[t]);var u=t===i?{background:"#7c73e6"}:{};return(0,Rn.jsxs)("div",{className:"slide",style:u,children:[(0,Rn.jsx)("div",{style:{position:"relative",left:"25%"},children:t}),(0,Rn.jsx)("img",{className:"small-image",src:"".concat(MA,"/bin-image.png"),alt:"Bin",onClick:function(){o()}}),(0,Rn.jsx)("img",{className:"slide-image",src:"".concat(MA,"/question-image.png"),alt:"Slide",onClick:function(){a(t)}})]})}function QA(e){var t=e.questions,n=e.setQuestions,r=e.choosenQuestion,i=e.setChoosenQuestion,a=e.deleteQuestion;return(0,Rn.jsxs)("div",{className:"bar question-bar",children:[t&&t.map((function(e,o){return(0,Rn.jsx)(KA,{slideNumber:o+1,questions:t,setQuestions:n,choosenQuestion:r,setChoosenQuestion:i,removeSlide:function(){a(o+1)}},e.questionNumber)})),(0,Rn.jsx)("button",{onClick:function(){zA({questionNumber:t.length+1,question:"",answerA:"",answerB:"",answerC:"",answerD:"",correctAnswer:""},n)},children:"Add question"})]})}var HA=function(){var e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()};function GA(e,t,n,r){var i=localStorage.getItem("id"),a=[];e.forEach((function(e){(function(e){if(e.answerA&&e.answerB&&e.answerC&&e.answerD&&e.question&&e.correctAnswer)return!0;return!1})(e)&&a.push(e)}));var o={id:r||HA(),templateName:t,allQuestions:a,questionTime:n};return!(a.length<1)&&(function(e,t){LA.apply(this,arguments)}(i,o),!0)}function $A(e){var t=e.time,n=e.setTime,i=e.bonusStyling;return(0,r.useEffect)((function(){var e=setInterval((function(){t>0&&n((function(e){return e-1}))}),1e3);return function(){return clearInterval(e)}}),[t]),(0,Rn.jsx)("div",{className:"timer",style:i,children:(0,Rn.jsx)("span",{style:{fontSize:"2.5em"},children:t})})}function YA(e){var t=e.time,n=e.setTime,i=e.bonusStyling;return(0,r.useEffect)((function(){var e=setInterval((function(){t>0&&n((function(e){return e-1}))}),1e3);return function(){return clearInterval(e)}}),[t]),(0,Rn.jsx)("div",{className:"timer",style:i,children:(0,Rn.jsx)("span",{style:{fontSize:"2.5em"},children:t})})}function XA(e){return JA.apply(this,arguments)}function JA(){return JA=Bn(Un().mark((function e(t){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=FA.orderByChild("name").equalTo(t.gamecode),e.next=3,n.once("value",(function(e){e.exists()&&FA.child(t.gamecode).remove(),FA.child(t.gamecode).set(t)}),(function(e){console.error("Error checking record existence: ",e)}));case 3:case"end":return e.stop()}}),e)}))),JA.apply(this,arguments)}function ZA(){return(ZA=Bn(Un().mark((function e(t,n,r){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,FA.once("value",(function(e){var i=e.val();Object.keys(i).forEach((function(e){var a=i[e];t==e&&"waiting"==a.started&&((a.players?Object.keys(a.players).length:0)<10?n(!0):r("Maximum amount of players reached!"))})),r("Wrong code!")}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eN(e,t,n){return tN.apply(this,arguments)}function tN(){return tN=Bn(Un().mark((function e(t,n,r){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:FA.child(t).on("value",(function(e){var t=e.val();if(t){var r=null!==t&&void 0!==t?t:{},i=r.gameTemplate,a=r.gamecode,o=r.players,u=r.started,s=r.currentQuestion,c=r.gamePhase,l=r.time,f=r.startingTime,h=[];o&&Object.values(o).forEach((function(e){var t=null!==e&&void 0!==e?e:{},n=t.id,r=t.name,i=t.points,a=t.lastAnswer,o=t.shownComponent;if(a){var u={id:n,name:r,points:i,lastAnswer:a,shownComponent:o};h.push(u)}else{var s={id:n,name:r,points:i,lastAnswer:{choosenAnswer:"",sendingTime:0,questionNumber:1},shownComponent:"answers"};null===h||void 0===h||h.push(s)}})),n({gameTemplate:i,gamecode:a,players:h,started:u,currentQuestion:s,gamePhase:c,time:l,startingTime:f})}}));case 1:case"end":return e.stop()}}),e)}))),tN.apply(this,arguments)}function nN(){return(nN=Bn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:FA.child(t).child("players").once("value",(function(e){var r=e.val(),i=r?Object.keys(r).length:0;FA.child(t).child("players").child("".concat(i)).set(n)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rN(e,t){return iN.apply(this,arguments)}function iN(){return(iN=Bn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:FA.child(t).child("started").on("value",(function(e){var t=e.val();n(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function aN(e,t,n,r,i){return oN.apply(this,arguments)}function oN(){return(oN=Bn(Un().mark((function e(t,n,r,i,a){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:FA.child(t).child("players").once("value",(function(e){e.val().forEach((function(e){e.name==n&&FA.child(t).child("players").child("".concat(e.id)).child("lastAnswer").set({choosenAnswer:r,sendingTime:a,questionNumber:i})}))}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uN(){return(uN=Bn(Un().mark((function e(t,n,r){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,FA.child(t).child("players").once("value",(function(e){e.val().forEach((function(e){e.name==n&&FA.child(t).child("currentQuestion").once("value",(function(n){n.val();FA.child(t).child("players").child("".concat(e.id)).child("lastAnswer").once("value",(function(e){e.val().questionNumber}))}))}))}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sN(e,t){return cN.apply(this,arguments)}function cN(){return(cN=Bn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:FA.child(t).child("currentQuestion").set(n);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lN(){return(lN=Bn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:FA.child(t).child("currentQuestion").on("value",(function(e){var t=e.val();n(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fN(){return(fN=Bn(Un().mark((function e(t,n,r){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:FA.child(t).child("players").once("value",(function(e){e.val().forEach((function(e){e.name==n&&FA.child(t).child("players").child("".concat(e.id)).child("points").set(r)}))}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hN(){return(hN=Bn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:FA.child(t).child("time").on("value",(function(e){var t=e.val();null!=t&&n(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dN(){return(dN=Bn(Un().mark((function e(t,n,r){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:FA.child(t).child("players").once("value",(function(e){e.val().forEach((function(e){e.name==n&&r(e)}))}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pN(){return(pN=Bn(Un().mark((function e(t,n,r){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:FA.child(t).child("players").child("".concat(n)).child("shownComponent").on("value",(function(e){var t=e.val();t&&r(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vN(){return(vN=Bn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:FA.child(t).child("startingTime").on("value",(function(e){var t=e.val();n(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var yN=function(){var e=Bn(Un().mark((function e(t,n,r,i){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("game"!=r){e.next=5;break}return e.next=3,FA.child(t).set(n);case 3:case 8:case 13:case 18:case 23:case 28:case 33:case 38:case 43:case 48:case 53:case 58:e.next=63;break;case 5:if("currentQuestion"!=r){e.next=10;break}return e.next=8,FA.child(t).child("currentQuestion").set(n);case 10:if("time"!=r){e.next=15;break}return e.next=13,FA.child(t).child("time").set(n);case 15:if("questionDone"!=r){e.next=20;break}return e.next=18,FA.child(t).child("currentQuestion").set(n);case 20:if("points"!=r){e.next=25;break}return e.next=23,FA.child(t).child("players").child("".concat(i)).child("points").set(n);case 25:if("game"!=r){e.next=30;break}return e.next=28,FA.child(t).set(n);case 30:if("shownComponent"!=r){e.next=35;break}return e.next=33,FA.child(t).child("players").child("".concat(i)).child("shownComponent").set(n);case 35:if("players"!=r){e.next=40;break}return e.next=38,FA.child(t).child("players").set(n);case 40:if("gamePhase"!=r){e.next=45;break}return e.next=43,FA.child(t).child("gamePhase").set(n);case 45:if("lastAnswer"!=r){e.next=50;break}return e.next=48,FA.child(t).child("players").child("".concat(i)).child("lastAnswer").set(n);case 50:if("gameStarted"!=r){e.next=55;break}return e.next=53,FA.child(t).child("started").set(n);case 55:if("startingTime"!=r){e.next=60;break}return e.next=58,FA.child(t).child("startingTime").set(n);case 60:if("winners"!=r){e.next=63;break}return e.next=63,FA.child(t).child("winners").set(n);case 63:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),mN=function(){var e=Bn(Un().mark((function e(t,n,r,i,a){var o,u;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gN(i,t,a);case 2:o=e.sent,u=o.val(),r("number"==typeof n?"number"==typeof u?u:n:u||n);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a){return e.apply(this,arguments)}}();function gN(e,t,n){return kN.apply(this,arguments)}function kN(){return(kN=Bn(Un().mark((function e(t,n,r){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("currentQuestion"!=t){e.next=6;break}return e.next=3,FA.child(n).child("currentQuestion").once("value");case 3:case 9:case 15:case 21:case 27:case 33:case 39:case 45:case 51:case 57:case 63:case 69:return e.abrupt("return",e.sent);case 6:if("time"!=t){e.next=12;break}return e.next=9,FA.child(n).child("time").once("value");case 12:if("questionDone"!=t){e.next=18;break}return e.next=15,FA.child(n).child("currentQuestion").once("value");case 18:if("points"!=t){e.next=24;break}return e.next=21,FA.child(n).child("players").child("".concat(r)).child("points").once("value");case 24:if("game"!=t){e.next=30;break}return e.next=27,FA.child(n).once("value");case 30:if("shownComponent"!=t){e.next=36;break}return e.next=33,FA.child(n).child("players").child("".concat(r)).child("shownComponent").once("value");case 36:if("players"!=t){e.next=42;break}return e.next=39,FA.child(n).child("players").once("value");case 42:if("gamePhase"!=t){e.next=48;break}return e.next=45,FA.child(n).child("gamePhase").once("value");case 48:if("currentQuestionIndex"!=t){e.next=54;break}return e.next=51,FA.child(n).child("currentQuestion").once("value");case 54:if("lastAnswer"!=t){e.next=60;break}return e.next=57,FA.child(n).child("players").child("".concat(r)).child("lastAnswer").once("value");case 60:if("startingTime"!=t){e.next=66;break}return e.next=63,FA.child(n).child("startingTime").once("value");case 66:if("winners"!=t){e.next=70;break}return e.next=69,FA.child(n).child("winners").once("value");case 70:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var bN=Ql(OA,".info/connected");function wN(e){var t=e.currentQuestion,n=e.time,i=e.setTime,a=e.gamecode,o=c((0,r.useState)(),2),u=o[0],s=o[1],l=c((0,r.useState)(!1),2),f=l[0],h=l[1],d=c((0,r.useState)({}),2),p=(d[0],d[1]);return(0,r.useEffect)((function(){mN(a,3,s,"startingTime")}),[]),(0,r.useEffect)((function(){u&&(p({transform:"rotate(".concat(90*(3-u),"deg)")}),yN(a,u,"startingTime"),u<1&&setTimeout((function(){h(!0)}),1e3)),0==u&&(yN(a,u,"startingTime"),h(!0))}),[u]),(0,Rn.jsxs)(Rn.Fragment,{children:[!f&&(0,Rn.jsx)(Rn.Fragment,{children:(0,Rn.jsxs)("div",{style:{position:"absolute",top:"45%"},children:[(0,Rn.jsx)("div",{className:"my-input shown-question",children:t.question}),(0,Rn.jsx)(YA,{time:u,setTime:s,bonusStyling:{display:"none"}})]})}),f&&(0,Rn.jsxs)(Rn.Fragment,{children:[(0,Rn.jsx)($A,{time:n,setTime:i,bonusStyling:{left:"90%"}}),(0,Rn.jsx)("div",{className:"my-input shown-question",children:t.question}),(0,Rn.jsx)("img",{className:"question-image",src:"".concat(MA,"/landscape-image.jpg"),style:{width:"40%"}}),(0,Rn.jsxs)("div",{className:"answers-placeholder",style:{width:"80%",marginBottom:"2em"},children:[(0,Rn.jsx)("span",{id:"answer-A",className:"answer",children:t.answerA}),(0,Rn.jsx)("span",{id:"answer-B",className:"answer",children:t.answerB}),(0,Rn.jsx)("span",{id:"answer-C",className:"answer",children:t.answerC}),(0,Rn.jsx)("span",{id:"answer-D",className:"answer",children:t.answerD})]})]})]})}function _N(e){var t=e.player;return(0,Rn.jsxs)("div",{className:"player-stats",children:[(0,Rn.jsx)("span",{children:t.name}),(0,Rn.jsx)("span",{children:t.points})]})}function xN(e){var t=e.time,n=e.setTime,i=e.players,a=e.setPlayers,o=e.gamecode;return(0,r.useEffect)((function(){a(i.sort((function(e,t){return t.points-e.points})))}),[]),(0,r.useEffect)((function(){t<1&&yN(o,3,"startingTime")}),[t]),(0,Rn.jsxs)(Rn.Fragment,{children:[(0,Rn.jsx)($A,{time:t,setTime:n,bonusStyling:{top:"1%"}}),(0,Rn.jsxs)("div",{className:"player-stats-list column-shaped-container",children:[(0,Rn.jsxs)("p",{style:{display:"flex",justifyContent:"space-between",width:"80%"},children:[(0,Rn.jsx)("span",{style:{backgroundColor:"#fafafa",borderRadius:"30px",padding:"10px"},children:"Name"}),(0,Rn.jsx)("span",{style:{backgroundColor:"#fafafa",borderRadius:"30px",padding:"10px"},children:"Score"})]}),i.map((function(e){return(0,Rn.jsx)(_N,{player:e},e.id)}))]})]})}function SN(e){var t=e.name,n=e.points,r=e.statsColor;return(0,Rn.jsxs)("div",{className:"player-stats",style:{backgroundColor:r},children:[(0,Rn.jsxs)("div",{className:"img-name-container",style:{height:"100%"},children:[(0,Rn.jsx)("img",{className:"winners-image",src:"".concat(MA,"/first-place.png")}),(0,Rn.jsx)("span",{children:t})]}),(0,Rn.jsxs)("span",{style:{marginLeft:"2rem"},children:["Score: ",n]})]})}function EN(e){var t=e.winners,n=ke(),r=[{name:t[0].name,points:t[0].points,statsColor:"#ffd700"},{name:t[1]?t[1].name:null,points:t[1]?t[1].points:0,statsColor:"#C0C0C0"},{name:t[2]?t[2].name:null,points:t[2]?t[2].points:0,statsColor:"#CD7F32"}];return(0,Rn.jsx)(Rn.Fragment,{children:(0,Rn.jsxs)("div",{className:"player-stats-list column-shaped-container",style:{margin:"10% 0 0 0",maxHeight:"40%"},children:[(0,Rn.jsx)("h1",{children:"Winners"}),r.map((function(e){return e.name&&(0,Rn.jsx)(SN,{name:e.name,points:e.points,statsColor:e.statsColor},e.name)})),(0,Rn.jsx)("button",{style:{marginTop:"10%"},onClick:function(){n("/")},children:"Go back to menu"})]})})}var CN=function(e){return(0,r.useEffect)((function(){var e=function(e){e.preventDefault(),e.returnValue="";var t="Are you sure you want to leave?";t&&(e.returnValue=t)};return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}),[]),null};var TN=function(){var e=Bn(Un().mark((function e(t,n){var r,i,a,o,u,s,c,l,f,h,d,p,v;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,FA.child(t.gamecode).once("value");case 2:if(r=e.sent,i=r.val(),a={gameTemplate:t.template,players:[],gamecode:t.gamecode,started:"waiting",currentQuestion:0,time:t.template.questionTime,gamePhase:1,startingTime:3,winners:[]},!i){e.next=12;break}o=i.gameTemplate,u=i.gamecode,s=i.players,c=i.started,l=i.currentQuestion,f=i.time,h=i.gamePhase,d=i.startingTime,p=i.winners,v=s?Object.values(s).map((function(e){var t=null!==e&&void 0!==e?e:{};return{id:t.id,name:t.name,points:t.points,lastAnswer:t.lastAnswer,shownComponent:t.shownComponent}})):[],n(a={gameTemplate:o,gamecode:u,players:v,started:c,currentQuestion:l,time:f,gamePhase:h,startingTime:d,winners:p}),e.next=14;break;case 12:return e.next=14,XA(a);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function IN(e,t){t(e.sort((function(e,t){return t.points-e.points})).slice(0,2))}function AN(){return(0,Rn.jsxs)(Rn.Fragment,{children:[(0,Rn.jsx)("img",{src:"".concat(MA,"/loading.gif"),style:{height:"30rem",width:"30rem"}}),(0,Rn.jsx)("h1",{children:"Waiting for connection"})]})}function NN(e){var t=e.gameState,n=e.time,i=e.setShownComponent,a=e.username,o=e.setPointsForLast,u=e.setLastAnswer,s=c((0,r.useState)(!1),2),l=s[0],f=s[1],h=function(e){return Bn(Un().mark((function r(){var s,c;return Un().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=t.gameTemplate.questionTime-n,r.next=3,aN(t.gamecode,a,e,t.currentQuestion,s);case 3:f(!0),c={choosenAnswer:e,sendingTime:s,questionNumber:t.currentQuestion},u(c),o(c),i("between");case 8:case"end":return r.stop()}}),r)})))};(0,r.useEffect)((function(){n<1&&function(e,t,n){uN.apply(this,arguments)}(t.gamecode,a,f)}),[n]),(0,r.useEffect)((function(){n<1&&!l&&h("")}),[l]);var d=c((0,r.useState)(3),2),p=d[0],v=d[1],y=c((0,r.useState)(!1),2),m=(y[0],y[1],c((0,r.useState)({}),2)),g=m[0],k=m[1];return(0,r.useEffect)((function(){!function(e,t){vN.apply(this,arguments)}(t.gamecode,v)}),[]),(0,r.useEffect)((function(){(p||0==p)&&k({transform:"rotate(".concat(90*(3-p),"deg)")})}),[p]),(0,Rn.jsxs)(Rn.Fragment,{children:[p>0&&(0,Rn.jsxs)("div",{className:"circle",style:{position:"absolute",top:"45%"},children:[(0,Rn.jsx)("div",{className:"rolling-square",style:g}),(0,Rn.jsx)(YA,{time:p,setTime:function(){},bonusStyling:{marginTop:"0"}})]}),0==p&&(0,Rn.jsxs)(Rn.Fragment,{children:[(0,Rn.jsx)($A,{time:n,setTime:function(){},bonusStyling:{top:"0%"}}),(0,Rn.jsxs)("div",{className:"grid-container",children:[(0,Rn.jsx)("div",{id:"answer-A",onClick:h("A")}),(0,Rn.jsx)("div",{id:"answer-B",onClick:h("B")}),(0,Rn.jsx)("div",{id:"answer-C",onClick:h("C")}),(0,Rn.jsx)("div",{id:"answer-D",onClick:h("D")})]})]})]})}function DN(e){var t=e.gameState,n=e.setShownComponent,i=e.questionDone,a=e.setQuestionsDone,o=e.setTime,u=e.lastQuestionPoints,s=e.setLastQuestionPoints,l=c((0,r.useState)(0),2),f=l[0],h=l[1];(0,r.useEffect)((function(){mN(t.gamecode,i,a,"questionDone"),function(e,t){lN.apply(this,arguments)}(t.gamecode,h)}),[]),(0,r.useEffect)((function(){f>i&&(o(t.gameTemplate.questionTime),s(0),n("answers"))}),[f]);var d=0!=u?"good-answer.png":"wrong-answer.png",p=0!=u?"Good answer!":"Wrong answer!";return(0,Rn.jsx)(Rn.Fragment,{children:(0,Rn.jsxs)("div",{className:"answer-result-container",children:[(0,Rn.jsx)("img",{className:"circle-image",src:"".concat(MA,"/").concat(d),alt:"Answer",style:{width:"50%",aspectRatio:1}}),(0,Rn.jsx)("h2",{children:p}),(0,Rn.jsxs)("h4",{children:["+ ",u," points"]})]})})}function ON(e){var t=e.player,n=e.image;return(0,Rn.jsxs)("div",{className:"player-container",children:[(0,Rn.jsx)("div",{className:"player",style:{backgroundImage:n}}),(0,Rn.jsx)("span",{children:t.name})]},t.id)}var PN=r.createContext({claims:[],update:function(){}});function RN(e){var t=c((0,r.useState)(!1),2),n=t[0],i=t[1],a=(0,r.useContext)(PN).claims;return(0,r.useEffect)((function(){if(e.role){var t=a.findIndex((function(t){return"role"===t.name&&t.value===e.role}));i(t>-1)}else i(a.length>0)}),[a,e.role]),(0,Rn.jsx)(Rn.Fragment,{children:n?e.isAuthorized:e.notAuthorized})}function FN(){var e=ke(),t=c((0,r.useState)(""),2),n=t[0],i=t[1],a=c((0,r.useState)(!1),2),o=a[0],u=a[1],s=c((0,r.useState)(""),2),l=s[0],f=s[1],h=c((0,r.useState)(window.innerWidth),2),d=h[0],p=h[1];(0,r.useEffect)((function(){window.addEventListener("resize",(function(){p(window.innerWidth)}))}),[]),(0,r.useEffect)((function(){p(window.innerWidth)}),[window.innerWidth]);var v=d>550;function y(){!function(e,t,n){ZA.apply(this,arguments)}(n,u,f)}return(0,r.useEffect)((function(){o&&e("/input-name",{state:n})}),[o]),(0,Rn.jsxs)(Rn.Fragment,{children:[v&&(0,Rn.jsxs)(Rn.Fragment,{children:[(0,Rn.jsx)("h1",{children:"Cacarrot"}),(0,Rn.jsx)("div",{className:"paragraph",children:(0,Rn.jsx)(RN,{isAuthorized:(0,Rn.jsx)("button",{className:"my-button",onClick:function(){e("create")},children:"Create your own Cacarrot"}),notAuthorized:(0,Rn.jsxs)(Rn.Fragment,{children:[(0,Rn.jsx)("button",{onClick:function(){return e("/login")},children:"Login"}),(0,Rn.jsx)("button",{onClick:function(){return e("/register")},children:"Register"})]})})})]}),(0,Rn.jsxs)("div",{className:"paragraph",style:{marginTop:"30px"},children:[(0,Rn.jsx)("div",{children:"Join game with code"}),(0,Rn.jsx)(BA,{value:n,setValue:i,placeholder:"Put in game code",characterLimit:6,visibleWarning:!1}),l&&(0,Rn.jsx)("div",{className:"error",children:l}),(0,Rn.jsx)("button",{className:"my-button",onClick:function(){y()},children:"Join"})]})]})}function LN(e,t){return function(){return e.apply(t,arguments)}}var jN,MN=Object.prototype.toString,UN=Object.getPrototypeOf,VN=(jN=Object.create(null),function(e){var t=MN.call(e);return jN[t]||(jN[t]=t.slice(8,-1).toLowerCase())}),BN=function(e){return e=e.toLowerCase(),function(t){return VN(t)===e}},qN=function(e){return function(t){return typeof t===e}},zN=Array.isArray,WN=qN("undefined");var KN=BN("ArrayBuffer");var QN=qN("string"),HN=qN("function"),GN=qN("number"),$N=function(e){return null!==e&&"object"===typeof e},YN=function(e){if("object"!==VN(e))return!1;var t=UN(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},XN=BN("Date"),JN=BN("File"),ZN=BN("Blob"),eD=BN("FileList"),tD=BN("URLSearchParams");function nD(e,t){var n,r,i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).allOwnKeys,a=void 0!==i&&i;if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),zN(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{var o,u=a?Object.getOwnPropertyNames(e):Object.keys(e),s=u.length;for(n=0;n<s;n++)o=u[n],t.call(null,e[o],o,e)}}function rD(e,t){t=t.toLowerCase();for(var n,r=Object.keys(e),i=r.length;i-- >0;)if(t===(n=r[i]).toLowerCase())return n;return null}var iD="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,aD=function(e){return!WN(e)&&e!==iD};var oD,uD=(oD="undefined"!==typeof Uint8Array&&UN(Uint8Array),function(e){return oD&&e instanceof oD}),sD=BN("HTMLFormElement"),cD=function(e){var t=Object.prototype.hasOwnProperty;return function(e,n){return t.call(e,n)}}(),lD=BN("RegExp"),fD=function(e,t){var n=Object.getOwnPropertyDescriptors(e),r={};nD(n,(function(n,i){!1!==t(n,i,e)&&(r[i]=n)})),Object.defineProperties(e,r)},hD="abcdefghijklmnopqrstuvwxyz",dD="0123456789",pD={DIGIT:dD,ALPHA:hD,ALPHA_DIGIT:hD+hD.toUpperCase()+dD};var vD=BN("AsyncFunction"),yD={isArray:zN,isArrayBuffer:KN,isBuffer:function(e){return null!==e&&!WN(e)&&null!==e.constructor&&!WN(e.constructor)&&HN(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:function(e){var t;return e&&("function"===typeof FormData&&e instanceof FormData||HN(e.append)&&("formdata"===(t=VN(e))||"object"===t&&HN(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&KN(e.buffer)},isString:QN,isNumber:GN,isBoolean:function(e){return!0===e||!1===e},isObject:$N,isPlainObject:YN,isUndefined:WN,isDate:XN,isFile:JN,isBlob:ZN,isRegExp:lD,isFunction:HN,isStream:function(e){return $N(e)&&HN(e.pipe)},isURLSearchParams:tD,isTypedArray:uD,isFileList:eD,forEach:nD,merge:function e(){for(var t=(aD(this)&&this||{}).caseless,n={},r=function(r,i){var a=t&&rD(n,i)||i;YN(n[a])&&YN(r)?n[a]=e(n[a],r):YN(r)?n[a]=e({},r):zN(r)?n[a]=r.slice():n[a]=r},i=0,a=arguments.length;i<a;i++)arguments[i]&&nD(arguments[i],r);return n},extend:function(e,t,n){return nD(t,(function(t,r){n&&HN(t)?e[r]=LN(t,n):e[r]=t}),{allOwnKeys:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).allOwnKeys}),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n,r){var i,a,o,u={};if(t=t||{},null==e)return t;do{for(a=(i=Object.getOwnPropertyNames(e)).length;a-- >0;)o=i[a],r&&!r(o,e,t)||u[o]||(t[o]=e[o],u[o]=!0);e=!1!==n&&UN(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:VN,kindOfTest:BN,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;if(zN(e))return e;var t=e.length;if(!GN(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},forEachEntry:function(e,t){for(var n,r=(e&&e[Symbol.iterator]).call(e);(n=r.next())&&!n.done;){var i=n.value;t.call(e,i[0],i[1])}},matchAll:function(e,t){for(var n,r=[];null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:sD,hasOwnProperty:cD,hasOwnProp:cD,reduceDescriptors:fD,freezeMethods:function(e){fD(e,(function(t,n){if(HN(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;var r=e[n];HN(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=function(){throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:function(e,t){var n={},r=function(e){e.forEach((function(e){n[e]=!0}))};return zN(e)?r(e):r(String(e).split(t)),n},toCamelCase:function(e){return e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))},noop:function(){},toFiniteNumber:function(e,t){return e=+e,Number.isFinite(e)?e:t},findKey:rD,global:iD,isContextDefined:aD,ALPHABET:pD,generateString:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pD.ALPHA_DIGIT,n="",r=t.length;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&HN(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:function(e){var t=new Array(10);return function e(n,r){if($N(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[r]=n;var i=zN(n)?[]:{};return nD(n,(function(t,n){var a=e(t,r+1);!WN(a)&&(i[n]=a)})),t[r]=void 0,i}}return n}(e,0)},isAsyncFn:vD,isThenable:function(e){return e&&($N(e)||HN(e))&&HN(e.then)&&HN(e.catch)}};function mD(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}yD.inherits(mD,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:yD.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var gD=mD.prototype,kD={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){kD[e]={value:e}})),Object.defineProperties(mD,kD),Object.defineProperty(gD,"isAxiosError",{value:!0}),mD.from=function(e,t,n,r,i,a){var o=Object.create(gD);return yD.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(function(e){return"isAxiosError"!==e})),mD.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};var bD=mD;function wD(e){return yD.isPlainObject(e)||yD.isArray(e)}function _D(e){return yD.endsWith(e,"[]")?e.slice(0,-2):e}function xD(e,t,n){return e?e.concat(t).map((function(e,t){return e=_D(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}var SD=yD.toFlatObject(yD,{},null,(function(e){return/^is[A-Z]/.test(e)}));var ED=function(e,t,n){if(!yD.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;var r=(n=yD.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!yD.isUndefined(t[e])}))).metaTokens,i=n.visitor||c,a=n.dots,o=n.indexes,u=(n.Blob||"undefined"!==typeof Blob&&Blob)&&yD.isSpecCompliantForm(t);if(!yD.isFunction(i))throw new TypeError("visitor must be a function");function s(e){if(null===e)return"";if(yD.isDate(e))return e.toISOString();if(!u&&yD.isBlob(e))throw new bD("Blob is not supported. Use a Buffer instead.");return yD.isArrayBuffer(e)||yD.isTypedArray(e)?u&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,i){var u=e;if(e&&!i&&"object"===typeof e)if(yD.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(yD.isArray(e)&&function(e){return yD.isArray(e)&&!e.some(wD)}(e)||(yD.isFileList(e)||yD.endsWith(n,"[]"))&&(u=yD.toArray(e)))return n=_D(n),u.forEach((function(e,r){!yD.isUndefined(e)&&null!==e&&t.append(!0===o?xD([n],r,a):null===o?n:n+"[]",s(e))})),!1;return!!wD(e)||(t.append(xD(i,n,a),s(e)),!1)}var l=[],f=Object.assign(SD,{defaultVisitor:c,convertValue:s,isVisitable:wD});if(!yD.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!yD.isUndefined(n)){if(-1!==l.indexOf(n))throw Error("Circular reference detected in "+r.join("."));l.push(n),yD.forEach(n,(function(n,a){!0===(!(yD.isUndefined(n)||null===n)&&i.call(t,n,yD.isString(a)?a.trim():a,r,f))&&e(n,r?r.concat(a):[a])})),l.pop()}}(e),t};function CD(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function TD(e,t){this._pairs=[],e&&ED(e,this,t)}var ID=TD.prototype;ID.append=function(e,t){this._pairs.push([e,t])},ID.toString=function(e){var t=e?function(t){return e.call(this,t,CD)}:CD;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var AD=TD;function ND(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function DD(e,t,n){if(!t)return e;var r,i=n&&n.encode||ND,a=n&&n.serialize;if(r=a?a(t,n):yD.isURLSearchParams(t)?t.toString():new AD(t,n).toString(i)){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}var OD=function(){function e(){h(this,e),this.handlers=[]}return y(e,[{key:"use",value:function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){yD.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}]),e}(),PD=OD,RD={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},FD={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:AD,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},isStandardBrowserEnv:function(){var e;return("undefined"===typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&("undefined"!==typeof window&&"undefined"!==typeof document)}(),isStandardBrowserWebWorkerEnv:"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,protocols:["http","https","file","blob","url","data"]};var LD=function(e){function t(e,n,r,i){var a=e[i++],o=Number.isFinite(+a),u=i>=e.length;return a=!a&&yD.isArray(r)?r.length:a,u?(yD.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!o):(r[a]&&yD.isObject(r[a])||(r[a]=[]),t(e,n,r[a],i)&&yD.isArray(r[a])&&(r[a]=function(e){var t,n,r={},i=Object.keys(e),a=i.length;for(t=0;t<a;t++)r[n=i[t]]=e[n];return r}(r[a])),!o)}if(yD.isFormData(e)&&yD.isFunction(e.entries)){var n={};return yD.forEachEntry(e,(function(e,r){t(function(e){return yD.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),r,n,0)})),n}return null},jD={"Content-Type":void 0};var MD={transitional:RD,adapter:["xhr","http"],transformRequest:[function(e,t){var n,r=t.getContentType()||"",i=r.indexOf("application/json")>-1,a=yD.isObject(e);if(a&&yD.isHTMLForm(e)&&(e=new FormData(e)),yD.isFormData(e))return i&&i?JSON.stringify(LD(e)):e;if(yD.isArrayBuffer(e)||yD.isBuffer(e)||yD.isStream(e)||yD.isFile(e)||yD.isBlob(e))return e;if(yD.isArrayBufferView(e))return e.buffer;if(yD.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return ED(e,new FD.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return FD.isNode&&yD.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((n=yD.isFileList(e))||r.indexOf("multipart/form-data")>-1){var o=this.env&&this.env.FormData;return ED(n?{"files[]":e}:e,o&&new o,this.formSerializer)}}return a||i?(t.setContentType("application/json",!1),function(e,t,n){if(yD.isString(e))try{return(t||JSON.parse)(e),yD.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||MD.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&yD.isString(e)&&(n&&!this.responseType||r)){var i=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(a){if(i){if("SyntaxError"===a.name)throw bD.from(a,bD.ERR_BAD_RESPONSE,this,null,this.response);throw a}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:FD.classes.FormData,Blob:FD.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};yD.forEach(["delete","get","head"],(function(e){MD.headers[e]={}})),yD.forEach(["post","put","patch"],(function(e){MD.headers[e]=yD.merge(jD)}));var UD=MD,VD=yD.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),BD=Symbol("internals");function qD(e){return e&&String(e).trim().toLowerCase()}function zD(e){return!1===e||null==e?e:yD.isArray(e)?e.map(zD):String(e)}function WD(e,t,n,r,i){return yD.isFunction(r)?r.call(this,t,n):(i&&(t=n),yD.isString(t)?yD.isString(r)?-1!==t.indexOf(r):yD.isRegExp(r)?r.test(t):void 0:void 0)}var KD=function(e,t){function n(e){h(this,n),e&&this.set(e)}return y(n,[{key:"set",value:function(e,t,n){var r=this;function i(e,t,n){var i=qD(t);if(!i)throw new Error("header name must be a non-empty string");var a=yD.findKey(r,i);(!a||void 0===r[a]||!0===n||void 0===n&&!1!==r[a])&&(r[a||t]=zD(e))}var a=function(e,t){return yD.forEach(e,(function(e,n){return i(e,n,t)}))};return yD.isPlainObject(e)||e instanceof this.constructor?a(e,t):yD.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?a(function(e){var t,n,r,i={};return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),t=e.substring(0,r).trim().toLowerCase(),n=e.substring(r+1).trim(),!t||i[t]&&VD[t]||("set-cookie"===t?i[t]?i[t].push(n):i[t]=[n]:i[t]=i[t]?i[t]+", "+n:n)})),i}(e),t):null!=e&&i(t,e,n),this}},{key:"get",value:function(e,t){if(e=qD(e)){var n=yD.findKey(this,e);if(n){var r=this[n];if(!t)return r;if(!0===t)return function(e){for(var t,n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;t=r.exec(e);)n[t[1]]=t[2];return n}(r);if(yD.isFunction(t))return t.call(this,r,n);if(yD.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(e,t){if(e=qD(e)){var n=yD.findKey(this,e);return!(!n||void 0===this[n]||t&&!WD(0,this[n],n,t))}return!1}},{key:"delete",value:function(e,t){var n=this,r=!1;function i(e){if(e=qD(e)){var i=yD.findKey(n,e);!i||t&&!WD(0,n[i],i,t)||(delete n[i],r=!0)}}return yD.isArray(e)?e.forEach(i):i(e),r}},{key:"clear",value:function(e){for(var t=Object.keys(this),n=t.length,r=!1;n--;){var i=t[n];e&&!WD(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}},{key:"normalize",value:function(e){var t=this,n={};return yD.forEach(this,(function(r,i){var a=yD.findKey(n,i);if(a)return t[a]=zD(r),void delete t[i];var o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))}(i):String(i).trim();o!==i&&delete t[i],t[o]=zD(r),n[o]=!0})),this}},{key:"concat",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.constructor).concat.apply(e,[this].concat(n))}},{key:"toJSON",value:function(e){var t=Object.create(null);return yD.forEach(this,(function(n,r){null!=n&&!1!==n&&(t[r]=e&&yD.isArray(n)?n.join(", "):n)})),t}},{key:Symbol.iterator,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map((function(e){var t=c(e,2);return t[0]+": "+t[1]})).join("\n")}},{key:Symbol.toStringTag,get:function(){return"AxiosHeaders"}}],[{key:"from",value:function(e){return e instanceof this?e:new this(e)}},{key:"concat",value:function(e){for(var t=new this(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((function(e){return t.set(e)})),t}},{key:"accessor",value:function(e){var t=(this[BD]=this[BD]={accessors:{}}).accessors,n=this.prototype;function r(e){var r=qD(e);t[r]||(!function(e,t){var n=yD.toCamelCase(" "+t);["get","set","has"].forEach((function(r){Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return yD.isArray(e)?e.forEach(r):r(e),this}}]),n}();KD.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),yD.freezeMethods(KD.prototype),yD.freezeMethods(KD);var QD=KD;function HD(e,t){var n=this||UD,r=t||n,i=QD.from(r.headers),a=r.data;return yD.forEach(e,(function(e){a=e.call(n,a,i.normalize(),t?t.status:void 0)})),i.normalize(),a}function GD(e){return!(!e||!e.__CANCEL__)}function $D(e,t,n){bD.call(this,null==e?"canceled":e,bD.ERR_CANCELED,t,n),this.name="CanceledError"}yD.inherits($D,bD,{__CANCEL__:!0});var YD=$D;var XD=FD.isStandardBrowserEnv?{write:function(e,t,n,r,i,a){var o=[];o.push(e+"="+encodeURIComponent(t)),yD.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),yD.isString(r)&&o.push("path="+r),yD.isString(i)&&o.push("domain="+i),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function JD(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var ZD=FD.isStandardBrowserEnv?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=yD.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0};var eO=function(e,t){e=e||10;var n,r=new Array(e),i=new Array(e),a=0,o=0;return t=void 0!==t?t:1e3,function(u){var s=Date.now(),c=i[o];n||(n=s),r[a]=u,i[a]=s;for(var l=o,f=0;l!==a;)f+=r[l++],l%=e;if((a=(a+1)%e)===o&&(o=(o+1)%e),!(s-n<t)){var h=c&&s-c;return h?Math.round(1e3*f/h):void 0}}};function tO(e,t){var n=0,r=eO(50,250);return function(i){var a=i.loaded,o=i.lengthComputable?i.total:void 0,u=a-n,s=r(u);n=a;var c={loaded:a,total:o,progress:o?a/o:void 0,bytes:u,rate:s||void 0,estimated:s&&o&&a<=o?(o-a)/s:void 0,event:i};c[t?"download":"upload"]=!0,e(c)}}var nO="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){var r,i=e.data,a=QD.from(e.headers).normalize(),o=e.responseType;function u(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}yD.isFormData(i)&&(FD.isStandardBrowserEnv||FD.isStandardBrowserWebWorkerEnv?a.setContentType(!1):a.setContentType("multipart/form-data;",!1));var s=new XMLHttpRequest;if(e.auth){var c=e.auth.username||"",l=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";a.set("Authorization","Basic "+btoa(c+":"+l))}var f=JD(e.baseURL,e.url);function h(){if(s){var r=QD.from("getAllResponseHeaders"in s&&s.getAllResponseHeaders());!function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new bD("Request failed with status code "+n.status,[bD.ERR_BAD_REQUEST,bD.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),u()}),(function(e){n(e),u()}),{data:o&&"text"!==o&&"json"!==o?s.response:s.responseText,status:s.status,statusText:s.statusText,headers:r,config:e,request:s}),s=null}}if(s.open(e.method.toUpperCase(),DD(f,e.params,e.paramsSerializer),!0),s.timeout=e.timeout,"onloadend"in s?s.onloadend=h:s.onreadystatechange=function(){s&&4===s.readyState&&(0!==s.status||s.responseURL&&0===s.responseURL.indexOf("file:"))&&setTimeout(h)},s.onabort=function(){s&&(n(new bD("Request aborted",bD.ECONNABORTED,e,s)),s=null)},s.onerror=function(){n(new bD("Network Error",bD.ERR_NETWORK,e,s)),s=null},s.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||RD;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new bD(t,r.clarifyTimeoutError?bD.ETIMEDOUT:bD.ECONNABORTED,e,s)),s=null},FD.isStandardBrowserEnv){var d=(e.withCredentials||ZD(f))&&e.xsrfCookieName&&XD.read(e.xsrfCookieName);d&&a.set(e.xsrfHeaderName,d)}void 0===i&&a.setContentType(null),"setRequestHeader"in s&&yD.forEach(a.toJSON(),(function(e,t){s.setRequestHeader(t,e)})),yD.isUndefined(e.withCredentials)||(s.withCredentials=!!e.withCredentials),o&&"json"!==o&&(s.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&s.addEventListener("progress",tO(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&s.upload&&s.upload.addEventListener("progress",tO(e.onUploadProgress)),(e.cancelToken||e.signal)&&(r=function(t){s&&(n(!t||t.type?new YD(null,e,s):t),s.abort(),s=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r)));var p=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(f);p&&-1===FD.protocols.indexOf(p)?n(new bD("Unsupported protocol "+p+":",bD.ERR_BAD_REQUEST,e)):s.send(i||null)}))},rO={http:null,xhr:nO};yD.forEach(rO,(function(e,t){if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}}));var iO=function(e){for(var t,n,r=(e=yD.isArray(e)?e:[e]).length,i=0;i<r&&(t=e[i],!(n=yD.isString(t)?rO[t.toLowerCase()]:t));i++);if(!n){if(!1===n)throw new bD("Adapter ".concat(t," is not supported by the environment"),"ERR_NOT_SUPPORT");throw new Error(yD.hasOwnProp(rO,t)?"Adapter '".concat(t,"' is not available in the build"):"Unknown adapter '".concat(t,"'"))}if(!yD.isFunction(n))throw new TypeError("adapter is not a function");return n};function aO(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new YD(null,e)}function oO(e){return aO(e),e.headers=QD.from(e.headers),e.data=HD.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),iO(e.adapter||UD.adapter)(e).then((function(t){return aO(e),t.data=HD.call(e,e.transformResponse,t),t.headers=QD.from(t.headers),t}),(function(t){return GD(t)||(aO(e),t&&t.response&&(t.response.data=HD.call(e,e.transformResponse,t.response),t.response.headers=QD.from(t.response.headers))),Promise.reject(t)}))}var uO=function(e){return e instanceof QD?e.toJSON():e};function sO(e,t){t=t||{};var n={};function r(e,t,n){return yD.isPlainObject(e)&&yD.isPlainObject(t)?yD.merge.call({caseless:n},e,t):yD.isPlainObject(t)?yD.merge({},t):yD.isArray(t)?t.slice():t}function i(e,t,n){return yD.isUndefined(t)?yD.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function a(e,t){if(!yD.isUndefined(t))return r(void 0,t)}function o(e,t){return yD.isUndefined(t)?yD.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function u(n,i,a){return a in t?r(n,i):a in e?r(void 0,n):void 0}var s={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u,headers:function(e,t){return i(uO(e),uO(t),!0)}};return yD.forEach(Object.keys(Object.assign({},e,t)),(function(r){var a=s[r]||i,o=a(e[r],t[r],r);yD.isUndefined(o)&&a!==u||(n[r]=o)})),n}var cO="1.4.0",lO={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){lO[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var fO={};lO.transitional=function(e,t,n){function r(e,t){return"[Axios v1.4.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,a){if(!1===e)throw new bD(r(i," has been removed"+(t?" in "+t:"")),bD.ERR_DEPRECATED);return t&&!fO[i]&&(fO[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,a)}};var hO={assertOptions:function(e,t,n){if("object"!==typeof e)throw new bD("options must be an object",bD.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var a=r[i],o=t[a];if(o){var u=e[a],s=void 0===u||o(u,a,e);if(!0!==s)throw new bD("option "+a+" must be "+s,bD.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new bD("Unknown option "+a,bD.ERR_BAD_OPTION)}},validators:lO},dO=hO.validators,pO=function(){function e(t){h(this,e),this.defaults=t,this.interceptors={request:new PD,response:new PD}}return y(e,[{key:"request",value:function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{};var n,r=t=sO(this.defaults,t),i=r.transitional,a=r.paramsSerializer,o=r.headers;void 0!==i&&hO.assertOptions(i,{silentJSONParsing:dO.transitional(dO.boolean),forcedJSONParsing:dO.transitional(dO.boolean),clarifyTimeoutError:dO.transitional(dO.boolean)},!1),null!=a&&(yD.isFunction(a)?t.paramsSerializer={serialize:a}:hO.assertOptions(a,{encode:dO.function,serialize:dO.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase(),(n=o&&yD.merge(o.common,o[t.method]))&&yD.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete o[e]})),t.headers=QD.concat(n,o);var u=[],s=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,u.unshift(e.fulfilled,e.rejected))}));var c,l=[];this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));var f,h=0;if(!s){var d=[oO.bind(this),void 0];for(d.unshift.apply(d,u),d.push.apply(d,l),f=d.length,c=Promise.resolve(t);h<f;)c=c.then(d[h++],d[h++]);return c}f=u.length;var p=t;for(h=0;h<f;){var v=u[h++],y=u[h++];try{p=v(p)}catch(Ca){y.call(this,Ca);break}}try{c=oO.call(this,p)}catch(Ca){return Promise.reject(Ca)}for(h=0,f=l.length;h<f;)c=c.then(l[h++],l[h++]);return c}},{key:"getUri",value:function(e){return DD(JD((e=sO(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}]),e}();yD.forEach(["delete","get","head","options"],(function(e){pO.prototype[e]=function(t,n){return this.request(sO(n||{},{method:e,url:t,data:(n||{}).data}))}})),yD.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(sO(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}pO.prototype[e]=t(),pO.prototype[e+"Form"]=t(!0)}));var vO=pO,yO=function(){function e(t){if(h(this,e),"function"!==typeof t)throw new TypeError("executor must be a function.");var n;this.promise=new Promise((function(e){n=e}));var r=this;this.promise.then((function(e){if(r._listeners){for(var t=r._listeners.length;t-- >0;)r._listeners[t](e);r._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},t((function(e,t,i){r.reason||(r.reason=new YD(e,t,i),n(r.reason))}))}return y(e,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}},{key:"unsubscribe",value:function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}}}],[{key:"source",value:function(){var t;return{token:new e((function(e){t=e})),cancel:t}}}]),e}();var mO={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(mO).forEach((function(e){var t=c(e,2),n=t[0],r=t[1];mO[r]=n}));var gO=mO;var kO=function e(t){var n=new vO(t),r=LN(vO.prototype.request,n);return yD.extend(r,vO.prototype,n,{allOwnKeys:!0}),yD.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(sO(t,n))},r}(UD);kO.Axios=vO,kO.CanceledError=YD,kO.CancelToken=yO,kO.isCancel=GD,kO.VERSION=cO,kO.toFormData=ED,kO.AxiosError=bD,kO.Cancel=kO.CanceledError,kO.all=function(e){return Promise.all(e)},kO.spread=function(e){return function(t){return e.apply(null,t)}},kO.isAxiosError=function(e){return yD.isObject(e)&&!0===e.isAxiosError},kO.mergeConfig=sO,kO.AxiosHeaders=QD,kO.formToJSON=function(e){return LD(yD.isHTMLForm(e)?new FormData(e):e)},kO.HttpStatusCode=gO,kO.default=kO;var bO=kO,wO="https://facebugapi.azurewebsites.net",_O=wO,xO="".concat(_O=wO,"/api/accounts");"".concat(_O,"/api/posts"),"".concat(_O,"/api/comments"),"".concat(_O,"/api/friends"),"".concat(_O,"/api/messages");function SO(e){return(0,Rn.jsx)(Rn.Fragment,{children:e.errors?(0,Rn.jsx)("ul",{style:{color:"red"},children:e.errors.map((function(e,t){return(0,Rn.jsx)("li",{children:e},t)}))}):null})}var EO=n(457),CO=n.n(EO),TO=function(e){return function(e){return!!e&&"object"===typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===IO}(e)}(e)};var IO="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function AO(e,t){return!1!==t.clone&&t.isMergeableObject(e)?DO(function(e){return Array.isArray(e)?[]:{}}(e),e,t):e}function NO(e,t,n){return e.concat(t).map((function(e){return AO(e,n)}))}function DO(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||NO,n.isMergeableObject=n.isMergeableObject||TO;var r=Array.isArray(t);return r===Array.isArray(e)?r?n.arrayMerge(e,t,n):function(e,t,n){var r={};return n.isMergeableObject(e)&&Object.keys(e).forEach((function(t){r[t]=AO(e[t],n)})),Object.keys(t).forEach((function(i){n.isMergeableObject(t[i])&&e[i]?r[i]=DO(e[i],t[i],n):r[i]=AO(t[i],n)})),r}(e,t,n):AO(t,n)}DO.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return DO(e,n,t)}),{})};var OO=DO,PO="object"==typeof global&&global&&global.Object===Object&&global,RO="object"==typeof self&&self&&self.Object===Object&&self,FO=PO||RO||Function("return this")(),LO=FO.Symbol,jO=Object.prototype,MO=jO.hasOwnProperty,UO=jO.toString,VO=LO?LO.toStringTag:void 0;var BO=function(e){var t=MO.call(e,VO),n=e[VO];try{e[VO]=void 0;var r=!0}catch(a){}var i=UO.call(e);return r&&(t?e[VO]=n:delete e[VO]),i},qO=Object.prototype.toString;var zO=function(e){return qO.call(e)},WO=LO?LO.toStringTag:void 0;var KO=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":WO&&WO in Object(e)?BO(e):zO(e)};var QO=function(e,t){return function(n){return e(t(n))}},HO=QO(Object.getPrototypeOf,Object);var GO=function(e){return null!=e&&"object"==typeof e},$O=Function.prototype,YO=Object.prototype,XO=$O.toString,JO=YO.hasOwnProperty,ZO=XO.call(Object);var eP=function(e){if(!GO(e)||"[object Object]"!=KO(e))return!1;var t=HO(e);if(null===t)return!0;var n=JO.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&XO.call(n)==ZO};var tP=function(){this.__data__=[],this.size=0};var nP=function(e,t){return e===t||e!==e&&t!==t};var rP=function(e,t){for(var n=e.length;n--;)if(nP(e[n][0],t))return n;return-1},iP=Array.prototype.splice;var aP=function(e){var t=this.__data__,n=rP(t,e);return!(n<0)&&(n==t.length-1?t.pop():iP.call(t,n,1),--this.size,!0)};var oP=function(e){var t=this.__data__,n=rP(t,e);return n<0?void 0:t[n][1]};var uP=function(e){return rP(this.__data__,e)>-1};var sP=function(e,t){var n=this.__data__,r=rP(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function cP(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}cP.prototype.clear=tP,cP.prototype.delete=aP,cP.prototype.get=oP,cP.prototype.has=uP,cP.prototype.set=sP;var lP=cP;var fP=function(){this.__data__=new lP,this.size=0};var hP=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var dP=function(e){return this.__data__.get(e)};var pP=function(e){return this.__data__.has(e)};var vP=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var yP=function(e){if(!vP(e))return!1;var t=KO(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},mP=FO["__core-js_shared__"],gP=function(){var e=/[^.]+$/.exec(mP&&mP.keys&&mP.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var kP=function(e){return!!gP&&gP in e},bP=Function.prototype.toString;var wP=function(e){if(null!=e){try{return bP.call(e)}catch(t){}try{return e+""}catch(t){}}return""},_P=/^\[object .+?Constructor\]$/,xP=Function.prototype,SP=Object.prototype,EP=xP.toString,CP=SP.hasOwnProperty,TP=RegExp("^"+EP.call(CP).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var IP=function(e){return!(!vP(e)||kP(e))&&(yP(e)?TP:_P).test(wP(e))};var AP=function(e,t){return null==e?void 0:e[t]};var NP=function(e,t){var n=AP(e,t);return IP(n)?n:void 0},DP=NP(FO,"Map"),OP=NP(Object,"create");var PP=function(){this.__data__=OP?OP(null):{},this.size=0};var RP=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},FP=Object.prototype.hasOwnProperty;var LP=function(e){var t=this.__data__;if(OP){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return FP.call(t,e)?t[e]:void 0},jP=Object.prototype.hasOwnProperty;var MP=function(e){var t=this.__data__;return OP?void 0!==t[e]:jP.call(t,e)};var UP=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=OP&&void 0===t?"__lodash_hash_undefined__":t,this};function VP(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}VP.prototype.clear=PP,VP.prototype.delete=RP,VP.prototype.get=LP,VP.prototype.has=MP,VP.prototype.set=UP;var BP=VP;var qP=function(){this.size=0,this.__data__={hash:new BP,map:new(DP||lP),string:new BP}};var zP=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var WP=function(e,t){var n=e.__data__;return zP(t)?n["string"==typeof t?"string":"hash"]:n.map};var KP=function(e){var t=WP(this,e).delete(e);return this.size-=t?1:0,t};var QP=function(e){return WP(this,e).get(e)};var HP=function(e){return WP(this,e).has(e)};var GP=function(e,t){var n=WP(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function $P(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}$P.prototype.clear=qP,$P.prototype.delete=KP,$P.prototype.get=QP,$P.prototype.has=HP,$P.prototype.set=GP;var YP=$P;var XP=function(e,t){var n=this.__data__;if(n instanceof lP){var r=n.__data__;if(!DP||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new YP(r)}return n.set(e,t),this.size=n.size,this};function JP(e){var t=this.__data__=new lP(e);this.size=t.size}JP.prototype.clear=fP,JP.prototype.delete=hP,JP.prototype.get=dP,JP.prototype.has=pP,JP.prototype.set=XP;var ZP=JP;var eR=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},tR=function(){try{var e=NP(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();var nR=function(e,t,n){"__proto__"==t&&tR?tR(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},rR=Object.prototype.hasOwnProperty;var iR=function(e,t,n){var r=e[t];rR.call(e,t)&&nP(r,n)&&(void 0!==n||t in e)||nR(e,t,n)};var aR=function(e,t,n,r){var i=!n;n||(n={});for(var a=-1,o=t.length;++a<o;){var u=t[a],s=r?r(n[u],e[u],u,n,e):void 0;void 0===s&&(s=e[u]),i?nR(n,u,s):iR(n,u,s)}return n};var oR=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};var uR=function(e){return GO(e)&&"[object Arguments]"==KO(e)},sR=Object.prototype,cR=sR.hasOwnProperty,lR=sR.propertyIsEnumerable,fR=uR(function(){return arguments}())?uR:function(e){return GO(e)&&cR.call(e,"callee")&&!lR.call(e,"callee")},hR=fR,dR=Array.isArray;var pR=function(){return!1},vR="object"==typeof exports&&exports&&!exports.nodeType&&exports,yR=vR&&"object"==typeof module&&module&&!module.nodeType&&module,mR=yR&&yR.exports===vR?FO.Buffer:void 0,gR=(mR?mR.isBuffer:void 0)||pR,kR=/^(?:0|[1-9]\d*)$/;var bR=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&kR.test(e))&&e>-1&&e%1==0&&e<t};var wR=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},_R={};_R["[object Float32Array]"]=_R["[object Float64Array]"]=_R["[object Int8Array]"]=_R["[object Int16Array]"]=_R["[object Int32Array]"]=_R["[object Uint8Array]"]=_R["[object Uint8ClampedArray]"]=_R["[object Uint16Array]"]=_R["[object Uint32Array]"]=!0,_R["[object Arguments]"]=_R["[object Array]"]=_R["[object ArrayBuffer]"]=_R["[object Boolean]"]=_R["[object DataView]"]=_R["[object Date]"]=_R["[object Error]"]=_R["[object Function]"]=_R["[object Map]"]=_R["[object Number]"]=_R["[object Object]"]=_R["[object RegExp]"]=_R["[object Set]"]=_R["[object String]"]=_R["[object WeakMap]"]=!1;var xR=function(e){return GO(e)&&wR(e.length)&&!!_R[KO(e)]};var SR=function(e){return function(t){return e(t)}},ER="object"==typeof exports&&exports&&!exports.nodeType&&exports,CR=ER&&"object"==typeof module&&module&&!module.nodeType&&module,TR=CR&&CR.exports===ER&&PO.process,IR=function(){try{var e=CR&&CR.require&&CR.require("util").types;return e||TR&&TR.binding&&TR.binding("util")}catch(t){}}(),AR=IR&&IR.isTypedArray,NR=AR?SR(AR):xR,DR=Object.prototype.hasOwnProperty;var OR=function(e,t){var n=dR(e),r=!n&&hR(e),i=!n&&!r&&gR(e),a=!n&&!r&&!i&&NR(e),o=n||r||i||a,u=o?oR(e.length,String):[],s=u.length;for(var c in e)!t&&!DR.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||bR(c,s))||u.push(c);return u},PR=Object.prototype;var RR=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||PR)},FR=QO(Object.keys,Object),LR=Object.prototype.hasOwnProperty;var jR=function(e){if(!RR(e))return FR(e);var t=[];for(var n in Object(e))LR.call(e,n)&&"constructor"!=n&&t.push(n);return t};var MR=function(e){return null!=e&&wR(e.length)&&!yP(e)};var UR=function(e){return MR(e)?OR(e):jR(e)};var VR=function(e,t){return e&&aR(t,UR(t),e)};var BR=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},qR=Object.prototype.hasOwnProperty;var zR=function(e){if(!vP(e))return BR(e);var t=RR(e),n=[];for(var r in e)("constructor"!=r||!t&&qR.call(e,r))&&n.push(r);return n};var WR=function(e){return MR(e)?OR(e,!0):zR(e)};var KR=function(e,t){return e&&aR(t,WR(t),e)},QR="object"==typeof exports&&exports&&!exports.nodeType&&exports,HR=QR&&"object"==typeof module&&module&&!module.nodeType&&module,GR=HR&&HR.exports===QR?FO.Buffer:void 0,$R=GR?GR.allocUnsafe:void 0;var YR=function(e,t){if(t)return e.slice();var n=e.length,r=$R?$R(n):new e.constructor(n);return e.copy(r),r};var XR=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t};var JR=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a};var ZR=function(){return[]},eF=Object.prototype.propertyIsEnumerable,tF=Object.getOwnPropertySymbols,nF=tF?function(e){return null==e?[]:(e=Object(e),JR(tF(e),(function(t){return eF.call(e,t)})))}:ZR,rF=nF;var iF=function(e,t){return aR(e,rF(e),t)};var aF=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},oF=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)aF(t,rF(e)),e=HO(e);return t}:ZR,uF=oF;var sF=function(e,t){return aR(e,uF(e),t)};var cF=function(e,t,n){var r=t(e);return dR(e)?r:aF(r,n(e))};var lF=function(e){return cF(e,UR,rF)};var fF=function(e){return cF(e,WR,uF)},hF=NP(FO,"DataView"),dF=NP(FO,"Promise"),pF=NP(FO,"Set"),vF=NP(FO,"WeakMap"),yF="[object Map]",mF="[object Promise]",gF="[object Set]",kF="[object WeakMap]",bF="[object DataView]",wF=wP(hF),_F=wP(DP),xF=wP(dF),SF=wP(pF),EF=wP(vF),CF=KO;(hF&&CF(new hF(new ArrayBuffer(1)))!=bF||DP&&CF(new DP)!=yF||dF&&CF(dF.resolve())!=mF||pF&&CF(new pF)!=gF||vF&&CF(new vF)!=kF)&&(CF=function(e){var t=KO(e),n="[object Object]"==t?e.constructor:void 0,r=n?wP(n):"";if(r)switch(r){case wF:return bF;case _F:return yF;case xF:return mF;case SF:return gF;case EF:return kF}return t});var TF=CF,IF=Object.prototype.hasOwnProperty;var AF=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&IF.call(e,"index")&&(n.index=e.index,n.input=e.input),n},NF=FO.Uint8Array;var DF=function(e){var t=new e.constructor(e.byteLength);return new NF(t).set(new NF(e)),t};var OF=function(e,t){var n=t?DF(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},PF=/\w*$/;var RF=function(e){var t=new e.constructor(e.source,PF.exec(e));return t.lastIndex=e.lastIndex,t},FF=LO?LO.prototype:void 0,LF=FF?FF.valueOf:void 0;var jF=function(e){return LF?Object(LF.call(e)):{}};var MF=function(e,t){var n=t?DF(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)};var UF=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return DF(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return OF(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return MF(e,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return RF(e);case"[object Symbol]":return jF(e)}},VF=Object.create,BF=function(){function e(){}return function(t){if(!vP(t))return{};if(VF)return VF(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),qF=BF;var zF=function(e){return"function"!=typeof e.constructor||RR(e)?{}:qF(HO(e))};var WF=function(e){return GO(e)&&"[object Map]"==TF(e)},KF=IR&&IR.isMap,QF=KF?SR(KF):WF;var HF=function(e){return GO(e)&&"[object Set]"==TF(e)},GF=IR&&IR.isSet,$F=GF?SR(GF):HF,YF="[object Arguments]",XF="[object Function]",JF="[object Object]",ZF={};ZF[YF]=ZF["[object Array]"]=ZF["[object ArrayBuffer]"]=ZF["[object DataView]"]=ZF["[object Boolean]"]=ZF["[object Date]"]=ZF["[object Float32Array]"]=ZF["[object Float64Array]"]=ZF["[object Int8Array]"]=ZF["[object Int16Array]"]=ZF["[object Int32Array]"]=ZF["[object Map]"]=ZF["[object Number]"]=ZF[JF]=ZF["[object RegExp]"]=ZF["[object Set]"]=ZF["[object String]"]=ZF["[object Symbol]"]=ZF["[object Uint8Array]"]=ZF["[object Uint8ClampedArray]"]=ZF["[object Uint16Array]"]=ZF["[object Uint32Array]"]=!0,ZF["[object Error]"]=ZF[XF]=ZF["[object WeakMap]"]=!1;var eL=function e(t,n,r,i,a,o){var u,s=1&n,c=2&n,l=4&n;if(r&&(u=a?r(t,i,a,o):r(t)),void 0!==u)return u;if(!vP(t))return t;var f=dR(t);if(f){if(u=AF(t),!s)return XR(t,u)}else{var h=TF(t),d=h==XF||"[object GeneratorFunction]"==h;if(gR(t))return YR(t,s);if(h==JF||h==YF||d&&!a){if(u=c||d?{}:zF(t),!s)return c?sF(t,KR(u,t)):iF(t,VR(u,t))}else{if(!ZF[h])return a?t:{};u=UF(t,h,s)}}o||(o=new ZP);var p=o.get(t);if(p)return p;o.set(t,u),$F(t)?t.forEach((function(i){u.add(e(i,n,r,i,t,o))})):QF(t)&&t.forEach((function(i,a){u.set(a,e(i,n,r,a,t,o))}));var v=f?void 0:(l?c?fF:lF:c?WR:UR)(t);return eR(v||t,(function(i,a){v&&(i=t[a=i]),iR(u,a,e(i,n,r,a,t,o))})),u};var tL=function(e){return eL(e,4)};var nL=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i};var rL=function(e){return"symbol"==typeof e||GO(e)&&"[object Symbol]"==KO(e)};function iL(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(iL.Cache||YP),n}iL.Cache=YP;var aL=iL;var oL=function(e){var t=aL(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t},uL=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,sL=/\\(\\)?/g,cL=oL((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(uL,(function(e,n,r,i){t.push(r?i.replace(sL,"$1"):n||e)})),t})),lL=cL;var fL=function(e){if("string"==typeof e||rL(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t},hL=LO?LO.prototype:void 0,dL=hL?hL.toString:void 0;var pL=function e(t){if("string"==typeof t)return t;if(dR(t))return nL(t,e)+"";if(rL(t))return dL?dL.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n};var vL=function(e){return null==e?"":pL(e)};var yL=function(e){return dR(e)?nL(e,fL):rL(e)?[e]:XR(lL(vL(e)))};var mL=function(e,t){};var gL=function(e){return eL(e,5)};function kL(){return kL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kL.apply(this,arguments)}function bL(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function wL(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function _L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var xL=function(e){return Array.isArray(e)&&0===e.length},SL=function(e){return"function"===typeof e},EL=function(e){return null!==e&&"object"===typeof e},CL=function(e){return String(Math.floor(Number(e)))===e},TL=function(e){return"[object String]"===Object.prototype.toString.call(e)},IL=function(e){return 0===r.Children.count(e)},AL=function(e){return EL(e)&&SL(e.then)};function NL(e,t,n,r){void 0===r&&(r=0);for(var i=yL(t);e&&r<i.length;)e=e[i[r++]];return void 0===e?n:e}function DL(e,t,n){for(var r=tL(e),i=r,a=0,o=yL(t);a<o.length-1;a++){var u=o[a],s=NL(e,o.slice(0,a+1));if(s&&(EL(s)||Array.isArray(s)))i=i[u]=tL(s);else{var c=o[a+1];i=i[u]=CL(c)&&Number(c)>=0?[]:{}}}return(0===a?e:i)[o[a]]===n?e:(void 0===n?delete i[o[a]]:i[o[a]]=n,0===a&&void 0===n&&delete r[o[a]],r)}function OL(e,t,n,r){void 0===n&&(n=new WeakMap),void 0===r&&(r={});for(var i=0,a=Object.keys(e);i<a.length;i++){var o=a[i],u=e[o];EL(u)?n.get(u)||(n.set(u,!0),r[o]=Array.isArray(u)?[]:{},OL(u,t,n,r[o])):r[o]=t}return r}var PL=(0,r.createContext)(void 0);PL.displayName="FormikContext";PL.Provider,PL.Consumer;function RL(){var e=(0,r.useContext)(PL);return e||mL(!1),e}function FL(e,t){switch(t.type){case"SET_VALUES":return kL({},e,{values:t.payload});case"SET_TOUCHED":return kL({},e,{touched:t.payload});case"SET_ERRORS":return CO()(e.errors,t.payload)?e:kL({},e,{errors:t.payload});case"SET_STATUS":return kL({},e,{status:t.payload});case"SET_ISSUBMITTING":return kL({},e,{isSubmitting:t.payload});case"SET_ISVALIDATING":return kL({},e,{isValidating:t.payload});case"SET_FIELD_VALUE":return kL({},e,{values:DL(e.values,t.payload.field,t.payload.value)});case"SET_FIELD_TOUCHED":return kL({},e,{touched:DL(e.touched,t.payload.field,t.payload.value)});case"SET_FIELD_ERROR":return kL({},e,{errors:DL(e.errors,t.payload.field,t.payload.value)});case"RESET_FORM":return kL({},e,t.payload);case"SET_FORMIK_STATE":return t.payload(e);case"SUBMIT_ATTEMPT":return kL({},e,{touched:OL(e.values,!0),isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":case"SUBMIT_SUCCESS":return kL({},e,{isSubmitting:!1});default:return e}}var LL={},jL={};function ML(e){var t=e.validateOnChange,n=void 0===t||t,i=e.validateOnBlur,a=void 0===i||i,o=e.validateOnMount,u=void 0!==o&&o,s=e.isInitialValid,c=e.enableReinitialize,l=void 0!==c&&c,f=e.onSubmit,h=wL(e,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),d=kL({validateOnChange:n,validateOnBlur:a,validateOnMount:u,onSubmit:f},h),p=(0,r.useRef)(d.initialValues),v=(0,r.useRef)(d.initialErrors||LL),y=(0,r.useRef)(d.initialTouched||jL),m=(0,r.useRef)(d.initialStatus),g=(0,r.useRef)(!1),k=(0,r.useRef)({});(0,r.useEffect)((function(){return g.current=!0,function(){g.current=!1}}),[]);var b=(0,r.useReducer)(FL,{values:d.initialValues,errors:d.initialErrors||LL,touched:d.initialTouched||jL,status:d.initialStatus,isSubmitting:!1,isValidating:!1,submitCount:0}),w=b[0],_=b[1],x=(0,r.useCallback)((function(e,t){return new Promise((function(n,r){var i=d.validate(e,t);null==i?n(LL):AL(i)?i.then((function(e){n(e||LL)}),(function(e){r(e)})):n(i)}))}),[d.validate]),S=(0,r.useCallback)((function(e,t){var n=d.validationSchema,r=SL(n)?n(t):n,i=t&&r.validateAt?r.validateAt(t,e):function(e,t,n,r){void 0===n&&(n=!1);void 0===r&&(r={});var i=UL(e);return t[n?"validateSync":"validate"](i,{abortEarly:!1,context:r})}(e,r);return new Promise((function(e,t){i.then((function(){e(LL)}),(function(n){"ValidationError"===n.name?e(function(e){var t={};if(e.inner){if(0===e.inner.length)return DL(t,e.path,e.message);var n=e.inner,r=Array.isArray(n),i=0;for(n=r?n:n[Symbol.iterator]();;){var a;if(r){if(i>=n.length)break;a=n[i++]}else{if((i=n.next()).done)break;a=i.value}var o=a;NL(t,o.path)||(t=DL(t,o.path,o.message))}}return t}(n)):t(n)}))}))}),[d.validationSchema]),E=(0,r.useCallback)((function(e,t){return new Promise((function(n){return n(k.current[e].validate(t))}))}),[]),C=(0,r.useCallback)((function(e){var t=Object.keys(k.current).filter((function(e){return SL(k.current[e].validate)})),n=t.length>0?t.map((function(t){return E(t,NL(e,t))})):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(n).then((function(e){return e.reduce((function(e,n,r){return"DO_NOT_DELETE_YOU_WILL_BE_FIRED"===n||n&&(e=DL(e,t[r],n)),e}),{})}))}),[E]),T=(0,r.useCallback)((function(e){return Promise.all([C(e),d.validationSchema?S(e):{},d.validate?x(e):{}]).then((function(e){var t=e[0],n=e[1],r=e[2];return OO.all([t,n,r],{arrayMerge:VL})}))}),[d.validate,d.validationSchema,C,x,S]),I=qL((function(e){return void 0===e&&(e=w.values),_({type:"SET_ISVALIDATING",payload:!0}),T(e).then((function(e){return g.current&&(_({type:"SET_ISVALIDATING",payload:!1}),_({type:"SET_ERRORS",payload:e})),e}))}));(0,r.useEffect)((function(){u&&!0===g.current&&CO()(p.current,d.initialValues)&&I(p.current)}),[u,I]);var A=(0,r.useCallback)((function(e){var t=e&&e.values?e.values:p.current,n=e&&e.errors?e.errors:v.current?v.current:d.initialErrors||{},r=e&&e.touched?e.touched:y.current?y.current:d.initialTouched||{},i=e&&e.status?e.status:m.current?m.current:d.initialStatus;p.current=t,v.current=n,y.current=r,m.current=i;var a=function(){_({type:"RESET_FORM",payload:{isSubmitting:!!e&&!!e.isSubmitting,errors:n,touched:r,status:i,values:t,isValidating:!!e&&!!e.isValidating,submitCount:e&&e.submitCount&&"number"===typeof e.submitCount?e.submitCount:0}})};if(d.onReset){var o=d.onReset(w.values,G);AL(o)?o.then(a):a()}else a()}),[d.initialErrors,d.initialStatus,d.initialTouched]);(0,r.useEffect)((function(){!0!==g.current||CO()(p.current,d.initialValues)||(l&&(p.current=d.initialValues,A()),u&&I(p.current))}),[l,d.initialValues,A,u,I]),(0,r.useEffect)((function(){l&&!0===g.current&&!CO()(v.current,d.initialErrors)&&(v.current=d.initialErrors||LL,_({type:"SET_ERRORS",payload:d.initialErrors||LL}))}),[l,d.initialErrors]),(0,r.useEffect)((function(){l&&!0===g.current&&!CO()(y.current,d.initialTouched)&&(y.current=d.initialTouched||jL,_({type:"SET_TOUCHED",payload:d.initialTouched||jL}))}),[l,d.initialTouched]),(0,r.useEffect)((function(){l&&!0===g.current&&!CO()(m.current,d.initialStatus)&&(m.current=d.initialStatus,_({type:"SET_STATUS",payload:d.initialStatus}))}),[l,d.initialStatus,d.initialTouched]);var N=qL((function(e){if(k.current[e]&&SL(k.current[e].validate)){var t=NL(w.values,e),n=k.current[e].validate(t);return AL(n)?(_({type:"SET_ISVALIDATING",payload:!0}),n.then((function(e){return e})).then((function(t){_({type:"SET_FIELD_ERROR",payload:{field:e,value:t}}),_({type:"SET_ISVALIDATING",payload:!1})}))):(_({type:"SET_FIELD_ERROR",payload:{field:e,value:n}}),Promise.resolve(n))}return d.validationSchema?(_({type:"SET_ISVALIDATING",payload:!0}),S(w.values,e).then((function(e){return e})).then((function(t){_({type:"SET_FIELD_ERROR",payload:{field:e,value:t[e]}}),_({type:"SET_ISVALIDATING",payload:!1})}))):Promise.resolve()})),D=(0,r.useCallback)((function(e,t){var n=t.validate;k.current[e]={validate:n}}),[]),O=(0,r.useCallback)((function(e){delete k.current[e]}),[]),P=qL((function(e,t){return _({type:"SET_TOUCHED",payload:e}),(void 0===t?a:t)?I(w.values):Promise.resolve()})),R=(0,r.useCallback)((function(e){_({type:"SET_ERRORS",payload:e})}),[]),F=qL((function(e,t){var r=SL(e)?e(w.values):e;return _({type:"SET_VALUES",payload:r}),(void 0===t?n:t)?I(r):Promise.resolve()})),L=(0,r.useCallback)((function(e,t){_({type:"SET_FIELD_ERROR",payload:{field:e,value:t}})}),[]),j=qL((function(e,t,r){return _({type:"SET_FIELD_VALUE",payload:{field:e,value:t}}),(void 0===r?n:r)?I(DL(w.values,e,t)):Promise.resolve()})),M=(0,r.useCallback)((function(e,t){var n,r=t,i=e;if(!TL(e)){e.persist&&e.persist();var a=e.target?e.target:e.currentTarget,o=a.type,u=a.name,s=a.id,c=a.value,l=a.checked,f=(a.outerHTML,a.options),h=a.multiple;r=t||(u||s),i=/number|range/.test(o)?(n=parseFloat(c),isNaN(n)?"":n):/checkbox/.test(o)?function(e,t,n){if("boolean"===typeof e)return Boolean(t);var r=[],i=!1,a=-1;if(Array.isArray(e))r=e,i=(a=e.indexOf(n))>=0;else if(!n||"true"==n||"false"==n)return Boolean(t);if(t&&n&&!i)return r.concat(n);if(!i)return r;return r.slice(0,a).concat(r.slice(a+1))}(NL(w.values,r),l,c):f&&h?function(e){return Array.from(e).filter((function(e){return e.selected})).map((function(e){return e.value}))}(f):c}r&&j(r,i)}),[j,w.values]),U=qL((function(e){if(TL(e))return function(t){return M(t,e)};M(e)})),V=qL((function(e,t,n){return void 0===t&&(t=!0),_({type:"SET_FIELD_TOUCHED",payload:{field:e,value:t}}),(void 0===n?a:n)?I(w.values):Promise.resolve()})),B=(0,r.useCallback)((function(e,t){e.persist&&e.persist();var n=e.target,r=n.name,i=n.id,a=(n.outerHTML,t||(r||i));V(a,!0)}),[V]),q=qL((function(e){if(TL(e))return function(t){return B(t,e)};B(e)})),z=(0,r.useCallback)((function(e){SL(e)?_({type:"SET_FORMIK_STATE",payload:e}):_({type:"SET_FORMIK_STATE",payload:function(){return e}})}),[]),W=(0,r.useCallback)((function(e){_({type:"SET_STATUS",payload:e})}),[]),K=(0,r.useCallback)((function(e){_({type:"SET_ISSUBMITTING",payload:e})}),[]),Q=qL((function(){return _({type:"SUBMIT_ATTEMPT"}),I().then((function(e){var t=e instanceof Error;if(!t&&0===Object.keys(e).length){var n;try{if(void 0===(n=$()))return}catch(Ca){throw Ca}return Promise.resolve(n).then((function(e){return g.current&&_({type:"SUBMIT_SUCCESS"}),e})).catch((function(e){if(g.current)throw _({type:"SUBMIT_FAILURE"}),e}))}if(g.current&&(_({type:"SUBMIT_FAILURE"}),t))throw e}))})),H=qL((function(e){e&&e.preventDefault&&SL(e.preventDefault)&&e.preventDefault(),e&&e.stopPropagation&&SL(e.stopPropagation)&&e.stopPropagation(),Q().catch((function(e){console.warn("Warning: An unhandled error was caught from submitForm()",e)}))})),G={resetForm:A,validateForm:I,validateField:N,setErrors:R,setFieldError:L,setFieldTouched:V,setFieldValue:j,setStatus:W,setSubmitting:K,setTouched:P,setValues:F,setFormikState:z,submitForm:Q},$=qL((function(){return f(w.values,G)})),Y=qL((function(e){e&&e.preventDefault&&SL(e.preventDefault)&&e.preventDefault(),e&&e.stopPropagation&&SL(e.stopPropagation)&&e.stopPropagation(),A()})),X=(0,r.useCallback)((function(e){return{value:NL(w.values,e),error:NL(w.errors,e),touched:!!NL(w.touched,e),initialValue:NL(p.current,e),initialTouched:!!NL(y.current,e),initialError:NL(v.current,e)}}),[w.errors,w.touched,w.values]),J=(0,r.useCallback)((function(e){return{setValue:function(t,n){return j(e,t,n)},setTouched:function(t,n){return V(e,t,n)},setError:function(t){return L(e,t)}}}),[j,V,L]),Z=(0,r.useCallback)((function(e){var t=EL(e),n=t?e.name:e,r=NL(w.values,n),i={name:n,value:r,onChange:U,onBlur:q};if(t){var a=e.type,o=e.value,u=e.as,s=e.multiple;"checkbox"===a?void 0===o?i.checked=!!r:(i.checked=!(!Array.isArray(r)||!~r.indexOf(o)),i.value=o):"radio"===a?(i.checked=r===o,i.value=o):"select"===u&&s&&(i.value=i.value||[],i.multiple=!0)}return i}),[q,U,w.values]),ee=(0,r.useMemo)((function(){return!CO()(p.current,w.values)}),[p.current,w.values]),te=(0,r.useMemo)((function(){return"undefined"!==typeof s?ee?w.errors&&0===Object.keys(w.errors).length:!1!==s&&SL(s)?s(d):s:w.errors&&0===Object.keys(w.errors).length}),[s,ee,w.errors,d]);return kL({},w,{initialValues:p.current,initialErrors:v.current,initialTouched:y.current,initialStatus:m.current,handleBlur:q,handleChange:U,handleReset:Y,handleSubmit:H,resetForm:A,setErrors:R,setFormikState:z,setFieldTouched:V,setFieldValue:j,setFieldError:L,setStatus:W,setSubmitting:K,setTouched:P,setValues:F,submitForm:Q,validateForm:I,validateField:N,isValid:te,dirty:ee,unregisterField:O,registerField:D,getFieldProps:Z,getFieldMeta:X,getFieldHelpers:J,validateOnBlur:a,validateOnChange:n,validateOnMount:u})}function UL(e){var t=Array.isArray(e)?[]:{};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=String(n);!0===Array.isArray(e[r])?t[r]=e[r].map((function(e){return!0===Array.isArray(e)||eP(e)?UL(e):""!==e?e:void 0})):eP(e[r])?t[r]=UL(e[r]):t[r]=""!==e[r]?e[r]:void 0}return t}function VL(e,t,n){var r=e.slice();return t.forEach((function(t,i){if("undefined"===typeof r[i]){var a=!1!==n.clone&&n.isMergeableObject(t);r[i]=a?OO(Array.isArray(t)?[]:{},t,n):t}else n.isMergeableObject(t)?r[i]=OO(e[i],t,n):-1===e.indexOf(t)&&r.push(t)})),r}var BL="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?r.useLayoutEffect:r.useEffect;function qL(e){var t=(0,r.useRef)(e);return BL((function(){t.current=e})),(0,r.useCallback)((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.current.apply(void 0,n)}),[])}(0,r.forwardRef)((function(e,t){var n=e.action,i=wL(e,["action"]),a=null!=n?n:"#",o=RL(),u=o.handleReset,s=o.handleSubmit;return(0,r.createElement)("form",Object.assign({onSubmit:s,ref:t,onReset:u,action:a},i))})).displayName="Form";var zL=function(e,t,n){var r=WL(e);return r.splice(t,0,n),r},WL=function(e){if(e){if(Array.isArray(e))return[].concat(e);var t=Object.keys(e).map((function(e){return parseInt(e)})).reduce((function(e,t){return t>e?t:e}),0);return Array.from(kL({},e,{length:t+1}))}return[]},KL=function(e){function t(t){var n;return(n=e.call(this,t)||this).updateArrayField=function(e,t,r){var i=n.props,a=i.name;(0,i.formik.setFormikState)((function(n){var i="function"===typeof r?r:e,o="function"===typeof t?t:e,u=DL(n.values,a,e(NL(n.values,a))),s=r?i(NL(n.errors,a)):void 0,c=t?o(NL(n.touched,a)):void 0;return xL(s)&&(s=void 0),xL(c)&&(c=void 0),kL({},n,{values:u,errors:r?DL(n.errors,a,s):n.errors,touched:t?DL(n.touched,a,c):n.touched})}))},n.push=function(e){return n.updateArrayField((function(t){return[].concat(WL(t),[gL(e)])}),!1,!1)},n.handlePush=function(e){return function(){return n.push(e)}},n.swap=function(e,t){return n.updateArrayField((function(n){return function(e,t,n){var r=WL(e),i=r[t];return r[t]=r[n],r[n]=i,r}(n,e,t)}),!0,!0)},n.handleSwap=function(e,t){return function(){return n.swap(e,t)}},n.move=function(e,t){return n.updateArrayField((function(n){return function(e,t,n){var r=WL(e),i=r[t];return r.splice(t,1),r.splice(n,0,i),r}(n,e,t)}),!0,!0)},n.handleMove=function(e,t){return function(){return n.move(e,t)}},n.insert=function(e,t){return n.updateArrayField((function(n){return zL(n,e,t)}),(function(t){return zL(t,e,null)}),(function(t){return zL(t,e,null)}))},n.handleInsert=function(e,t){return function(){return n.insert(e,t)}},n.replace=function(e,t){return n.updateArrayField((function(n){return function(e,t,n){var r=WL(e);return r[t]=n,r}(n,e,t)}),!1,!1)},n.handleReplace=function(e,t){return function(){return n.replace(e,t)}},n.unshift=function(e){var t=-1;return n.updateArrayField((function(n){var r=n?[e].concat(n):[e];return t<0&&(t=r.length),r}),(function(e){var n=e?[null].concat(e):[null];return t<0&&(t=n.length),n}),(function(e){var n=e?[null].concat(e):[null];return t<0&&(t=n.length),n})),t},n.handleUnshift=function(e){return function(){return n.unshift(e)}},n.handleRemove=function(e){return function(){return n.remove(e)}},n.handlePop=function(){return function(){return n.pop()}},n.remove=n.remove.bind(_L(n)),n.pop=n.pop.bind(_L(n)),n}bL(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){this.props.validateOnChange&&this.props.formik.validateOnChange&&!CO()(NL(e.formik.values,e.name),NL(this.props.formik.values,this.props.name))&&this.props.formik.validateForm(this.props.formik.values)},n.remove=function(e){var t;return this.updateArrayField((function(n){var r=n?WL(n):[];return t||(t=r[e]),SL(r.splice)&&r.splice(e,1),r}),!0,!0),t},n.pop=function(){var e;return this.updateArrayField((function(t){var n=t;return e||(e=n&&n.pop&&n.pop()),n}),!0,!0),e},n.render=function(){var e={push:this.push,pop:this.pop,swap:this.swap,move:this.move,insert:this.insert,replace:this.replace,unshift:this.unshift,remove:this.remove,handlePush:this.handlePush,handlePop:this.handlePop,handleSwap:this.handleSwap,handleMove:this.handleMove,handleInsert:this.handleInsert,handleReplace:this.handleReplace,handleUnshift:this.handleUnshift,handleRemove:this.handleRemove},t=this.props,n=t.component,i=t.render,a=t.children,o=t.name,u=kL({},e,{form:wL(t.formik,["validate","validationSchema"]),name:o});return n?(0,r.createElement)(n,u):i?i(u):a?"function"===typeof a?a(u):IL(a)?null:r.Children.only(a):null},t}(r.Component);KL.defaultProps={validateOnChange:!0};r.Component,r.Component;var QL=n(758),HL=n(564),GL=n(514),$L=n.n(GL),YL=Object.prototype.toString,XL=Error.prototype.toString,JL=RegExp.prototype.toString,ZL="undefined"!==typeof Symbol?Symbol.prototype.toString:function(){return""},ej=/^Symbol\((.*)\)(.*)$/;function tj(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==e||!0===e||!1===e)return""+e;var n=typeof e;if("number"===n)return function(e){return e!=+e?"NaN":0===e&&1/e<0?"-0":""+e}(e);if("string"===n)return t?'"'.concat(e,'"'):e;if("function"===n)return"[Function "+(e.name||"anonymous")+"]";if("symbol"===n)return ZL.call(e).replace(ej,"Symbol($1)");var r=YL.call(e).slice(8,-1);return"Date"===r?isNaN(e.getTime())?""+e:e.toISOString(e):"Error"===r||e instanceof Error?"["+XL.call(e)+"]":"RegExp"===r?JL.call(e):null}function nj(e,t){var n=tj(e,t);return null!==n?n:JSON.stringify(e,(function(e,n){var r=tj(this[e],t);return null!==r?r:n}),2)}function rj(e){return null==e?[]:[].concat(e)}var ij=/\$\{\s*(\w+)\s*\}/g,aj=function(e){g(n,e);var t=_(n);function n(e,r,i,a){var o;return h(this,n),(o=t.call(this)).value=void 0,o.path=void 0,o.type=void 0,o.errors=void 0,o.params=void 0,o.inner=void 0,o.name="ValidationError",o.value=r,o.path=i,o.type=a,o.errors=[],o.inner=[],rj(e).forEach((function(e){var t;n.isError(e)?((t=o.errors).push.apply(t,f(e.errors)),o.inner=o.inner.concat(e.inner.length?e.inner:e)):o.errors.push(e)})),o.message=o.errors.length>1?"".concat(o.errors.length," errors occurred"):o.errors[0],Error.captureStackTrace&&Error.captureStackTrace(w(o),n),o}return y(n,null,[{key:"formatError",value:function(e,t){var n=t.label||t.path||"this";return n!==t.path&&(t=Object.assign({},t,{path:n})),"string"===typeof e?e.replace(ij,(function(e,n){return nj(t[n])})):"function"===typeof e?e(t):e}},{key:"isError",value:function(e){return e&&"ValidationError"===e.name}}]),n}(S(Error)),oj={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:function(e){var t=e.path,n=e.type,r=e.value,i=e.originalValue,a=null!=i&&i!==r?" (cast from the value `".concat(nj(i,!0),"`)."):".";return"mixed"!==n?"".concat(t," must be a `").concat(n,"` type, ")+"but the final value was: `".concat(nj(r,!0),"`")+a:"".concat(t," must match the configured type. ")+"The validated value was: `".concat(nj(r,!0),"`")+a}},uj={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},sj={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},cj={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},lj={isValue:"${path} field must be ${value}"},fj={noUnknown:"${path} field has unspecified keys: ${unknown}"},hj={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},dj=function(e){var t=e.path,n=e.value,r=e.spec.types.length;if(Array.isArray(n)){if(n.length<r)return"".concat(t," tuple value has too few items, expected a length of ").concat(r," but got ").concat(n.length," for value: `").concat(nj(n,!0),"`");if(n.length>r)return"".concat(t," tuple value has too many items, expected a length of ").concat(r," but got ").concat(n.length," for value: `").concat(nj(n,!0),"`")}return aj.formatError(oj.notType,e)},pj=(Object.assign(Object.create(null),{mixed:oj,string:uj,number:sj,date:cj,object:fj,array:hj,boolean:lj}),function(e){return e&&e.__isYupSchema__}),vj=function(){function e(t,n){h(this,e),this.fn=void 0,this.refs=t,this.refs=t,this.fn=n}return y(e,[{key:"resolve",value:function(e,t){var n=this.refs.map((function(e){return e.getValue(null==t?void 0:t.value,null==t?void 0:t.parent,null==t?void 0:t.context)})),r=this.fn(n,e,t);if(void 0===r||r===e)return e;if(!pj(r))throw new TypeError("conditions must return a schema object");return r.resolve(t)}}],[{key:"fromOptions",value:function(t,n){if(!n.then&&!n.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");var r=n.is,i=n.then,a=n.otherwise,o="function"===typeof r?r:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every((function(e){return e===r}))};return new e(t,(function(e,t){var n,r=o.apply(void 0,f(e))?i:a;return null!=(n=null==r?void 0:r(t))?n:t}))}}]),e}(),yj="$",mj=".";var gj=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(h(this,e),this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,"string"!==typeof t)throw new TypeError("ref must be a string, got: "+t);if(this.key=t.trim(),""===t)throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===yj,this.isValue=this.key[0]===mj,this.isSibling=!this.isContext&&!this.isValue;var r=this.isContext?yj:this.isValue?mj:"";this.path=this.key.slice(r.length),this.getter=this.path&&(0,QL.getter)(this.path,!0),this.map=n.map}return y(e,[{key:"getValue",value:function(e,t,n){var r=this.isContext?n:this.isValue?e:t;return this.getter&&(r=this.getter(r||{})),this.map&&(r=this.map(r)),r}},{key:"cast",value:function(e,t){return this.getValue(e,null==t?void 0:t.parent,null==t?void 0:t.context)}},{key:"resolve",value:function(){return this}},{key:"describe",value:function(){return{type:"ref",key:this.key}}},{key:"toString",value:function(){return"Ref(".concat(this.key,")")}}],[{key:"isRef",value:function(e){return e&&e.__isYupRef}}]),e}();gj.prototype.__isYupRef=!0;var kj=function(e){return null==e};function bj(e){function t(t,n,r){var i=t.value,a=t.path,o=void 0===a?"":a,u=t.options,s=t.originalValue,c=t.schema,l=e.name,f=e.test,h=e.params,d=e.message,p=e.skipAbsent,v=u.parent,y=u.context,m=u.abortEarly;function g(e){return gj.isRef(e)?e.getValue(i,v,y):e}function k(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({value:i,originalValue:s,label:c.spec.label,path:e.path||o,spec:c.spec},h,e.params),n=0,r=Object.keys(t);n<r.length;n++){var a=r[n];t[a]=g(t[a])}var u=new aj(aj.formatError(e.message||d,t),i,t.path,e.type||l);return u.params=t,u}var b=(void 0===m?c.spec.abortEarly:m)?n:r,w={path:o,parent:v,type:l,from:u.from,createError:k,resolve:g,options:u,originalValue:s,schema:c},_=function(e){aj.isError(e)?b(e):e?r(null):b(k())},x=function(e){aj.isError(e)?b(e):n(e)},S=p&&kj(i);if(u.sync){var E;try{var C;if("function"===typeof(null==(C=E=!!S||f.call(w,i,w))?void 0:C.then))throw new Error('Validation test of type: "'.concat(w.type,'" returned a Promise during a synchronous validate. ')+"This test will finish after the validate call has returned")}catch(T){return void x(T)}_(E)}else try{Promise.resolve(!!S||f.call(w,i,w)).then(_,x)}catch(T){x(T)}}return t.OPTIONS=e,t}function wj(e,t,n){var r,i,a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return t?((0,QL.forEach)(t,(function(u,s,c){var l=s?u.slice(1,u.length-1):u,f="tuple"===(e=e.resolve({context:o,parent:r,value:n})).type,h=c?parseInt(l,10):0;if(e.innerType||f){if(f&&!c)throw new Error('Yup.reach cannot implicitly index into a tuple type. the path part "'.concat(a,'" must contain an index to the tuple element, e.g. "').concat(a,'[0]"'));if(n&&h>=n.length)throw new Error("Yup.reach cannot resolve an array item at index: ".concat(u,", in the path: ").concat(t,". ")+"because there is no value at that index. ");r=n,n=n&&n[h],e=f?e.spec.types[h]:e.innerType}if(!c){if(!e.fields||!e.fields[l])throw new Error("The schema does not contain the path: ".concat(t,". ")+"(failed at: ".concat(a,' which is a type: "').concat(e.type,'")'));r=n,n=n&&n[l],e=e.fields[l]}i=l,a=s?"["+u+"]":"."+u})),{schema:e,parent:r,parentPath:i}):{parent:r,parentPath:t,schema:e}}var _j=function(e){g(n,e);var t=_(n);function n(){return h(this,n),t.apply(this,arguments)}return y(n,[{key:"describe",value:function(){var e,t=[],n=E(this.values());try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(gj.isRef(r)?r.describe():r)}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"resolveAll",value:function(e){var t,n=[],r=E(this.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n.push(e(i))}}catch(a){r.e(a)}finally{r.f()}return n}},{key:"clone",value:function(){return new n(this.values())}},{key:"merge",value:function(e,t){var n=this.clone();return e.forEach((function(e){return n.add(e)})),t.forEach((function(e){return n.delete(e)})),n}}]),n}(S(Set));function xj(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;if(pj(e)||!e||"object"!==typeof e)return e;if(n.has(e))return n.get(e);if(e instanceof Date)t=new Date(e.getTime()),n.set(e,t);else if(e instanceof RegExp)t=new RegExp(e),n.set(e,t);else if(Array.isArray(e)){t=new Array(e.length),n.set(e,t);for(var r=0;r<e.length;r++)t[r]=xj(e[r],n)}else if(e instanceof Map){t=new Map,n.set(e,t);var i,a=E(e.entries());try{for(a.s();!(i=a.n()).done;){var o=c(i.value,2),u=o[0],s=o[1];t.set(u,xj(s,n))}}catch(g){a.e(g)}finally{a.f()}}else if(e instanceof Set){t=new Set,n.set(e,t);var l,f=E(e);try{for(f.s();!(l=f.n()).done;){var h=l.value;t.add(xj(h,n))}}catch(g){f.e(g)}finally{f.f()}}else{if(!(e instanceof Object))throw Error("Unable to clone ".concat(e));t={},n.set(e,t);for(var d=0,p=Object.entries(e);d<p.length;d++){var v=c(p[d],2),y=v[0],m=v[1];t[y]=xj(m,n)}}return t}var Sj=function(){function e(t){var n=this;h(this,e),this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new _j,this._blacklist=new _j,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation((function(){n.typeError(oj.notType)})),this.type=t.type,this._typeCheck=t.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,nullable:!1,optional:!0,coerce:!0},null==t?void 0:t.spec),this.withMutation((function(e){e.nonNullable()}))}return y(e,[{key:"_type",get:function(){return this.type}},{key:"clone",value:function(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;var t=Object.create(Object.getPrototypeOf(this));return t.type=this.type,t._typeCheck=this._typeCheck,t._whitelist=this._whitelist.clone(),t._blacklist=this._blacklist.clone(),t.internalTests=Object.assign({},this.internalTests),t.exclusiveTests=Object.assign({},this.exclusiveTests),t.deps=f(this.deps),t.conditions=f(this.conditions),t.tests=f(this.tests),t.transforms=f(this.transforms),t.spec=xj(Object.assign({},this.spec,e)),t}},{key:"label",value:function(e){var t=this.clone();return t.spec.label=e,t}},{key:"meta",value:function(){if(0===arguments.length)return this.spec.meta;var e=this.clone();return e.spec.meta=Object.assign(e.spec.meta||{},arguments.length<=0?void 0:arguments[0]),e}},{key:"withMutation",value:function(e){var t=this._mutate;this._mutate=!0;var n=e(this);return this._mutate=t,n}},{key:"concat",value:function(e){if(!e||e===this)return this;if(e.type!==this.type&&"mixed"!==this.type)throw new TypeError("You cannot `concat()` schema's of different types: ".concat(this.type," and ").concat(e.type));var t=this,n=e.clone(),r=Object.assign({},t.spec,n.spec);return n.spec=r,n.internalTests=Object.assign({},t.internalTests,n.internalTests),n._whitelist=t._whitelist.merge(e._whitelist,e._blacklist),n._blacklist=t._blacklist.merge(e._blacklist,e._whitelist),n.tests=t.tests,n.exclusiveTests=t.exclusiveTests,n.withMutation((function(t){e.tests.forEach((function(e){t.test(e.OPTIONS)}))})),n.transforms=[].concat(f(t.transforms),f(n.transforms)),n}},{key:"isType",value:function(e){return null==e?!(!this.spec.nullable||null!==e)||!(!this.spec.optional||void 0!==e):this._typeCheck(e)}},{key:"resolve",value:function(e){var t=this;if(t.conditions.length){var n=t.conditions;(t=t.clone()).conditions=[],t=(t=n.reduce((function(t,n){return n.resolve(t,e)}),t)).resolve(e)}return t}},{key:"resolveOptions",value:function(e){var t,n,r;return Object.assign({},e,{from:e.from||[],strict:null!=(t=e.strict)?t:this.spec.strict,abortEarly:null!=(n=e.abortEarly)?n:this.spec.abortEarly,recursive:null!=(r=e.recursive)?r:this.spec.recursive})}},{key:"cast",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.resolve(Object.assign({value:e},t)),r="ignore-optionality"===t.assert,i=n._cast(e,t);if(!1!==t.assert&&!n.isType(i)){if(r&&kj(i))return i;var a=nj(e),o=nj(i);throw new TypeError("The value of ".concat(t.path||"field"," could not be cast to a value ")+'that satisfies the schema type: "'.concat(n.type,'". \n\n')+"attempted value: ".concat(a," \n")+(o!==a?"result of cast: ".concat(o):""))}return i}},{key:"_cast",value:function(e,t){var n=this,r=void 0===e?e:this.transforms.reduce((function(t,r){return r.call(n,t,e,n)}),e);return void 0===r&&(r=this.getDefault(t)),r}},{key:"_validate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=n.path,o=n.originalValue,u=void 0===o?e:o,s=n.strict,c=void 0===s?this.spec.strict:s,l=e;c||(l=this._cast(l,Object.assign({assert:!1},n)));for(var f=[],h=0,d=Object.values(this.internalTests);h<d.length;h++){var p=d[h];p&&f.push(p)}this.runTests({path:a,value:l,originalValue:u,options:n,tests:f},r,(function(e){if(e.length)return i(e,l);t.runTests({path:a,value:l,originalValue:u,options:n,tests:t.tests},r,i)}))}},{key:"runTests",value:function(e,t,n){var r=!1,i=e.tests,a=e.value,o=e.originalValue,u=e.path,s=e.options,c=function(e){r||(r=!0,t(e,a))},l=function(e){r||(r=!0,n(e,a))},f=i.length,h=[];if(!f)return l([]);for(var d={value:a,originalValue:o,path:u,options:s,schema:this},p=0;p<i.length;p++){(0,i[p])(d,c,(function(e){e&&(h=h.concat(e)),--f<=0&&l(h)}))}}},{key:"asNestedTest",value:function(e){var t,n=this,r=e.key,i=e.index,a=e.parent,o=e.parentPath,u=e.originalParent,s=e.options,c=null!=r?r:i;if(null==c)throw TypeError("Must include `key` or `index` for nested validations");var l="number"===typeof c,f=a[c],h=Object.assign({},s,(qn(t={strict:!0,parent:a,value:f,originalValue:u[c],key:void 0},l?"index":"key",c),qn(t,"path",l||c.includes(".")?"".concat(o||"","[").concat(f?c:'"'.concat(c,'"'),"]"):(o?"".concat(o,"."):"")+r),t));return function(e,t,r){return n.resolve(h)._validate(f,h,t,r)}}},{key:"validate",value:function(e,t){var n=this.resolve(Object.assign({},t,{value:e}));return new Promise((function(r,i){return n._validate(e,t,(function(e,t){aj.isError(e)&&(e.value=t),i(e)}),(function(e,t){e.length?i(new aj(e,t)):r(t)}))}))}},{key:"validateSync",value:function(e,t){var n;return this.resolve(Object.assign({},t,{value:e}))._validate(e,Object.assign({},t,{sync:!0}),(function(e,t){throw aj.isError(e)&&(e.value=t),e}),(function(t,r){if(t.length)throw new aj(t,e);n=r})),n}},{key:"isValid",value:function(e,t){return this.validate(e,t).then((function(){return!0}),(function(e){if(aj.isError(e))return!1;throw e}))}},{key:"isValidSync",value:function(e,t){try{return this.validateSync(e,t),!0}catch(n){if(aj.isError(n))return!1;throw n}}},{key:"_getDefault",value:function(e){var t=this.spec.default;return null==t?t:"function"===typeof t?t.call(this):xj(t)}},{key:"getDefault",value:function(e){return this.resolve(e||{})._getDefault(e)}},{key:"default",value:function(e){return 0===arguments.length?this._getDefault():this.clone({default:e})}},{key:"strict",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.clone({strict:e})}},{key:"nullability",value:function(e,t){var n=this.clone({nullable:e});return n.internalTests.nullable=bj({message:t,name:"nullable",test:function(e){return null!==e||this.schema.spec.nullable}}),n}},{key:"optionality",value:function(e,t){var n=this.clone({optional:e});return n.internalTests.optionality=bj({message:t,name:"optionality",test:function(e){return void 0!==e||this.schema.spec.optional}}),n}},{key:"optional",value:function(){return this.optionality(!0)}},{key:"defined",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oj.defined;return this.optionality(!1,e)}},{key:"nullable",value:function(){return this.nullability(!0)}},{key:"nonNullable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oj.notNull;return this.nullability(!1,e)}},{key:"required",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oj.required;return this.clone().withMutation((function(t){return t.nonNullable(e).defined(e)}))}},{key:"notRequired",value:function(){return this.clone().withMutation((function(e){return e.nullable().optional()}))}},{key:"transform",value:function(e){var t=this.clone();return t.transforms.push(e),t}},{key:"test",value:function(){var e;if(void 0===(e=1===arguments.length?"function"===typeof(arguments.length<=0?void 0:arguments[0])?{test:arguments.length<=0?void 0:arguments[0]}:arguments.length<=0?void 0:arguments[0]:2===arguments.length?{name:arguments.length<=0?void 0:arguments[0],test:arguments.length<=1?void 0:arguments[1]}:{name:arguments.length<=0?void 0:arguments[0],message:arguments.length<=1?void 0:arguments[1],test:arguments.length<=2?void 0:arguments[2]}).message&&(e.message=oj.default),"function"!==typeof e.test)throw new TypeError("`test` is a required parameters");var t=this.clone(),n=bj(e),r=e.exclusive||e.name&&!0===t.exclusiveTests[e.name];if(e.exclusive&&!e.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return e.name&&(t.exclusiveTests[e.name]=!!e.exclusive),t.tests=t.tests.filter((function(t){if(t.OPTIONS.name===e.name){if(r)return!1;if(t.OPTIONS.test===n.OPTIONS.test)return!1}return!0})),t.tests.push(n),t}},{key:"when",value:function(e,t){Array.isArray(e)||"string"===typeof e||(t=e,e=".");var n=this.clone(),r=rj(e).map((function(e){return new gj(e)}));return r.forEach((function(e){e.isSibling&&n.deps.push(e.key)})),n.conditions.push("function"===typeof t?new vj(r,t):vj.fromOptions(r,t)),n}},{key:"typeError",value:function(e){var t=this.clone();return t.internalTests.typeError=bj({message:e,name:"typeError",skipAbsent:!0,test:function(e){return!!this.schema._typeCheck(e)||this.createError({params:{type:this.schema.type}})}}),t}},{key:"oneOf",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oj.oneOf,n=this.clone();return e.forEach((function(e){n._whitelist.add(e),n._blacklist.delete(e)})),n.internalTests.whiteList=bj({message:t,name:"oneOf",skipAbsent:!0,test:function(e){var t=this.schema._whitelist,n=t.resolveAll(this.resolve);return!!n.includes(e)||this.createError({params:{values:Array.from(t).join(", "),resolved:n}})}}),n}},{key:"notOneOf",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oj.notOneOf,n=this.clone();return e.forEach((function(e){n._blacklist.add(e),n._whitelist.delete(e)})),n.internalTests.blacklist=bj({message:t,name:"notOneOf",test:function(e){var t=this.schema._blacklist,n=t.resolveAll(this.resolve);return!n.includes(e)||this.createError({params:{values:Array.from(t).join(", "),resolved:n}})}}),n}},{key:"strip",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.clone();return t.spec.strip=e,t}},{key:"describe",value:function(e){var t=(e?this.resolve(e):this).clone(),n=t.spec,r=n.label,i={meta:n.meta,label:r,optional:n.optional,nullable:n.nullable,default:t.getDefault(e),type:t.type,oneOf:t._whitelist.describe(),notOneOf:t._blacklist.describe(),tests:t.tests.map((function(e){return{name:e.OPTIONS.name,params:e.OPTIONS.params}})).filter((function(e,t,n){return n.findIndex((function(t){return t.name===e.name}))===t}))};return i}}]),e}();Sj.prototype.__isYupSchema__=!0;for(var Ej=function(){var e=Tj[Cj];Sj.prototype["".concat(e,"At")]=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=wj(this,t,n,r.context),a=i.parent,o=i.parentPath;return i.schema[e](a&&a[o],Object.assign({},r,{parent:a,path:t}))}},Cj=0,Tj=["validate","validateSync"];Cj<Tj.length;Cj++)Ej();for(var Ij=0,Aj=["equals","is"];Ij<Aj.length;Ij++){var Nj=Aj[Ij];Sj.prototype[Nj]=Sj.prototype.oneOf}for(var Dj=0,Oj=["not","nope"];Dj<Oj.length;Dj++){var Pj=Oj[Dj];Sj.prototype[Pj]=Sj.prototype.notOneOf}var Rj=function(){return!0};var Fj=function(e){g(n,e);var t=_(n);function n(e){return h(this,n),t.call(this,"function"===typeof e?{type:"mixed",check:e}:Object.assign({type:"mixed",check:Rj},e))}return y(n)}(Sj);Fj.prototype;var Lj=function(e){g(n,e);var t=_(n);function n(){var e;return h(this,n),e=t.call(this,{type:"boolean",check:function(e){return e instanceof Boolean&&(e=e.valueOf()),"boolean"===typeof e}}),e.withMutation((function(){e.transform((function(e,t,n){if(n.spec.coerce&&!n.isType(e)){if(/^(true|1)$/i.test(String(e)))return!0;if(/^(false|0)$/i.test(String(e)))return!1}return e}))})),e}return y(n,[{key:"isTrue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lj.isValue;return this.test({message:e,name:"is-value",exclusive:!0,params:{value:"true"},test:function(e){return kj(e)||!0===e}})}},{key:"isFalse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lj.isValue;return this.test({message:e,name:"is-value",exclusive:!0,params:{value:"false"},test:function(e){return kj(e)||!1===e}})}},{key:"default",value:function(e){return Qf(k(n.prototype),"default",this).call(this,e)}},{key:"defined",value:function(e){return Qf(k(n.prototype),"defined",this).call(this,e)}},{key:"optional",value:function(){return Qf(k(n.prototype),"optional",this).call(this)}},{key:"required",value:function(e){return Qf(k(n.prototype),"required",this).call(this,e)}},{key:"notRequired",value:function(){return Qf(k(n.prototype),"notRequired",this).call(this)}},{key:"nullable",value:function(){return Qf(k(n.prototype),"nullable",this).call(this)}},{key:"nonNullable",value:function(e){return Qf(k(n.prototype),"nonNullable",this).call(this,e)}},{key:"strip",value:function(e){return Qf(k(n.prototype),"strip",this).call(this,e)}}]),n}(Sj);Lj.prototype;var jj=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Mj=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,Uj=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Vj=function(e){return kj(e)||e===e.trim()},Bj={}.toString();function qj(){return new zj}var zj=function(e){g(n,e);var t=_(n);function n(){var e;return h(this,n),(e=t.call(this,{type:"string",check:function(e){return e instanceof String&&(e=e.valueOf()),"string"===typeof e}})).withMutation((function(){e.transform((function(e,t,n){if(!n.spec.coerce||n.isType(e))return e;if(Array.isArray(e))return e;var r=null!=e&&e.toString?e.toString():e;return r===Bj?e:r}))})),e}return y(n,[{key:"required",value:function(e){return Qf(k(n.prototype),"required",this).call(this,e).withMutation((function(t){return t.test({message:e||oj.required,name:"required",skipAbsent:!0,test:function(e){return!!e.length}})}))}},{key:"notRequired",value:function(){return Qf(k(n.prototype),"notRequired",this).call(this).withMutation((function(e){return e.tests=e.tests.filter((function(e){return"required"!==e.OPTIONS.name})),e}))}},{key:"length",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uj.length;return this.test({message:t,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test:function(t){return t.length===this.resolve(e)}})}},{key:"min",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uj.min;return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test:function(t){return t.length>=this.resolve(e)}})}},{key:"max",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uj.max;return this.test({name:"max",exclusive:!0,message:t,params:{max:e},skipAbsent:!0,test:function(t){return t.length<=this.resolve(e)}})}},{key:"matches",value:function(e,t){var n,r,i=!1;if(t)if("object"===typeof t){var a=t.excludeEmptyString;i=void 0!==a&&a,n=t.message,r=t.name}else n=t;return this.test({name:r||"matches",message:n||uj.matches,params:{regex:e},skipAbsent:!0,test:function(t){return""===t&&i||-1!==t.search(e)}})}},{key:"email",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uj.email;return this.matches(jj,{name:"email",message:e,excludeEmptyString:!0})}},{key:"url",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uj.url;return this.matches(Mj,{name:"url",message:e,excludeEmptyString:!0})}},{key:"uuid",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uj.uuid;return this.matches(Uj,{name:"uuid",message:e,excludeEmptyString:!1})}},{key:"ensure",value:function(){return this.default("").transform((function(e){return null===e?"":e}))}},{key:"trim",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uj.trim;return this.transform((function(e){return null!=e?e.trim():e})).test({message:e,name:"trim",test:Vj})}},{key:"lowercase",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uj.lowercase;return this.transform((function(e){return kj(e)?e:e.toLowerCase()})).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:function(e){return kj(e)||e===e.toLowerCase()}})}},{key:"uppercase",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uj.uppercase;return this.transform((function(e){return kj(e)?e:e.toUpperCase()})).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:function(e){return kj(e)||e===e.toUpperCase()}})}}]),n}(Sj);qj.prototype=zj.prototype;var Wj=function(e){g(n,e);var t=_(n);function n(){var e;return h(this,n),(e=t.call(this,{type:"number",check:function(e){return e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&!function(e){return e!=+e}(e)}})).withMutation((function(){e.transform((function(e,t,n){if(!n.spec.coerce)return e;var r=e;if("string"===typeof r){if(""===(r=r.replace(/\s/g,"")))return NaN;r=+r}return n.isType(r)||null===r?r:parseFloat(r)}))})),e}return y(n,[{key:"min",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sj.min;return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test:function(t){return t>=this.resolve(e)}})}},{key:"max",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sj.max;return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test:function(t){return t<=this.resolve(e)}})}},{key:"lessThan",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sj.lessThan;return this.test({message:t,name:"max",exclusive:!0,params:{less:e},skipAbsent:!0,test:function(t){return t<this.resolve(e)}})}},{key:"moreThan",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sj.moreThan;return this.test({message:t,name:"min",exclusive:!0,params:{more:e},skipAbsent:!0,test:function(t){return t>this.resolve(e)}})}},{key:"positive",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sj.positive;return this.moreThan(0,e)}},{key:"negative",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sj.negative;return this.lessThan(0,e)}},{key:"integer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sj.integer;return this.test({name:"integer",message:e,skipAbsent:!0,test:function(e){return Number.isInteger(e)}})}},{key:"truncate",value:function(){return this.transform((function(e){return kj(e)?e:0|e}))}},{key:"round",value:function(e){var t,n=["ceil","floor","round","trunc"];if("trunc"===(e=(null==(t=e)?void 0:t.toLowerCase())||"round"))return this.truncate();if(-1===n.indexOf(e.toLowerCase()))throw new TypeError("Only valid options for round() are: "+n.join(", "));return this.transform((function(t){return kj(t)?t:Math[e](t)}))}}]),n}(Sj);Wj.prototype;var Kj=/^(\d{4}|[+\-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;var Qj=new Date("");function Hj(){return new Gj}var Gj=function(e){g(n,e);var t=_(n);function n(){var e;return h(this,n),e=t.call(this,{type:"date",check:function(e){return t=e,"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(e.getTime());var t}}),e.withMutation((function(){e.transform((function(e,t,r){return!r.spec.coerce||r.isType(e)||null===e?e:(e=function(e){var t,n,r=[1,4,5,6,7,10,11],i=0;if(n=Kj.exec(e)){for(var a,o=0;a=r[o];++o)n[a]=+n[a]||0;n[2]=(+n[2]||1)-1,n[3]=+n[3]||1,n[7]=n[7]?String(n[7]).substr(0,3):0,void 0!==n[8]&&""!==n[8]||void 0!==n[9]&&""!==n[9]?("Z"!==n[8]&&void 0!==n[9]&&(i=60*n[10]+n[11],"+"===n[9]&&(i=0-i)),t=Date.UTC(n[1],n[2],n[3],n[4],n[5]+i,n[6],n[7])):t=+new Date(n[1],n[2],n[3],n[4],n[5],n[6],n[7])}else t=Date.parse?Date.parse(e):NaN;return t}(e),isNaN(e)?n.INVALID_DATE:new Date(e))}))})),e}return y(n,[{key:"prepareParam",value:function(e,t){var n;if(gj.isRef(e))n=e;else{var r=this.cast(e);if(!this._typeCheck(r))throw new TypeError("`".concat(t,"` must be a Date or a value that can be `cast()` to a Date"));n=r}return n}},{key:"min",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cj.min,n=this.prepareParam(e,"min");return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test:function(e){return e>=this.resolve(n)}})}},{key:"max",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cj.max,n=this.prepareParam(e,"max");return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test:function(e){return e<=this.resolve(n)}})}}]),n}(Sj);function $j(e,t){var n=1/0;return e.some((function(e,r){var i;if(null!=(i=t.path)&&i.includes(e))return n=r,!0})),n}function Yj(e){return function(t,n){return $j(e,t)-$j(e,n)}}Gj.INVALID_DATE=Qj,Hj.prototype=Gj.prototype,Hj.INVALID_DATE=Qj;var Xj=function(e,t,n){if("string"!==typeof e)return e;var r=e;try{r=JSON.parse(e)}catch(i){}return n.isType(r)?r:e};function Jj(e){if("fields"in e){for(var t={},n=0,r=Object.entries(e.fields);n<r.length;n++){var i=c(r[n],2),a=i[0],o=i[1];t[a]=Jj(o)}return e.setFields(t)}if("array"===e.type){var u=e.optional();return u.innerType&&(u.innerType=Jj(u.innerType)),u}return"tuple"===e.type?e.optional().clone({types:e.spec.types.map(Jj)}):"optional"in e?e.optional():e}var Zj=function(e){return"[object Object]"===Object.prototype.toString.call(e)};var eM=Yj([]);function tM(e){return new nM(e)}var nM=function(e){g(n,e);var t=_(n);function n(e){var r;return h(this,n),(r=t.call(this,{type:"object",check:function(e){return Zj(e)||"function"===typeof e}})).fields=Object.create(null),r._sortErrors=eM,r._nodes=[],r._excludedEdges=[],r.withMutation((function(){e&&r.shape(e)})),r}return y(n,[{key:"_cast",value:function(e){var t,r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Qf(k(n.prototype),"_cast",this).call(this,e,i);if(void 0===a)return this.getDefault(i);if(!this._typeCheck(a))return a;var o,u=this.fields,s=null!=(t=i.stripUnknown)?t:this.spec.noUnknown,c=[].concat(this._nodes,Object.keys(a).filter((function(e){return!r._nodes.includes(e)}))),l={},f=Object.assign({},i,{parent:l,__validating:i.__validating||!1}),h=!1,d=E(c);try{for(d.s();!(o=d.n()).done;){var p=o.value,v=u[p],y=p in a;if(v){var m,g=a[p];f.path=(i.path?"".concat(i.path,"."):"")+p;var b=(v=v.resolve({value:g,context:i.context,parent:l}))instanceof Sj?v.spec:void 0,w=null==b?void 0:b.strict;if(null!=b&&b.strip){h=h||p in a;continue}void 0!==(m=i.__validating&&w?a[p]:v.cast(a[p],f))&&(l[p]=m)}else y&&!s&&(l[p]=a[p]);y===p in l&&l[p]===a[p]||(h=!0)}}catch(_){d.e(_)}finally{d.f()}return h?l:a}},{key:"_validate",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=r.from,u=void 0===o?[]:o,s=r.originalValue,c=void 0===s?e:s,l=r.recursive,h=void 0===l?this.spec.recursive:l;r.from=[{schema:this,value:c}].concat(f(u)),r.__validating=!0,r.originalValue=c,Qf(k(n.prototype),"_validate",this).call(this,e,r,i,(function(e,n){if(h&&Zj(n)){c=c||n;var o,u=[],s=E(t._nodes);try{for(s.s();!(o=s.n()).done;){var l=o.value,f=t.fields[l];f&&!gj.isRef(f)&&u.push(f.asNestedTest({options:r,key:l,parent:n,parentPath:r.path,originalParent:c}))}}catch(d){s.e(d)}finally{s.f()}t.runTests({tests:u,value:n,originalValue:c,options:r},i,(function(r){a(r.sort(t._sortErrors).concat(e),n)}))}else a(e,n)}))}},{key:"clone",value:function(e){var t=Qf(k(n.prototype),"clone",this).call(this,e);return t.fields=Object.assign({},this.fields),t._nodes=this._nodes,t._excludedEdges=this._excludedEdges,t._sortErrors=this._sortErrors,t}},{key:"concat",value:function(e){for(var t=this,r=Qf(k(n.prototype),"concat",this).call(this,e),i=r.fields,a=0,o=Object.entries(this.fields);a<o.length;a++){var u=c(o[a],2),s=u[0],l=u[1],h=i[s];i[s]=void 0===h?l:h}return r.withMutation((function(n){return n.setFields(i,[].concat(f(t._excludedEdges),f(e._excludedEdges)))}))}},{key:"_getDefault",value:function(e){var t=this;if("default"in this.spec)return Qf(k(n.prototype),"_getDefault",this).call(this,e);if(this._nodes.length){var r={};return this._nodes.forEach((function(n){var i,a=t.fields[n],o=e;null!=(i=o)&&i.value&&(o=Object.assign({},o,{parent:o.value,value:o.value[n]})),r[n]=a&&"getDefault"in a?a.getDefault(o):void 0})),r}}},{key:"setFields",value:function(e,t){var n=this.clone();return n.fields=e,n._nodes=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=new Set,i=new Set(t.map((function(e){var t=c(e,2),n=t[0],r=t[1];return"".concat(n,"-").concat(r)})));function a(e,t){var a=(0,QL.split)(e)[0];r.add(a),i.has("".concat(t,"-").concat(a))||n.push([t,a])}for(var o=function(){var t=s[u],n=e[t];r.add(t),gj.isRef(n)&&n.isSibling?a(n.path,t):pj(n)&&"deps"in n&&n.deps.forEach((function(e){return a(e,t)}))},u=0,s=Object.keys(e);u<s.length;u++)o();return $L().array(Array.from(r),n).reverse()}(e,t),n._sortErrors=Yj(Object.keys(e)),t&&(n._excludedEdges=t),n}},{key:"shape",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.clone().withMutation((function(n){var r=n._excludedEdges;return t.length&&(Array.isArray(t[0])||(t=[t]),r=[].concat(f(n._excludedEdges),f(t))),n.setFields(Object.assign(n.fields,e),r)}))}},{key:"partial",value:function(){for(var e={},t=0,n=Object.entries(this.fields);t<n.length;t++){var r=c(n[t],2),i=r[0],a=r[1];e[i]="optional"in a&&a.optional instanceof Function?a.optional():a}return this.setFields(e)}},{key:"deepPartial",value:function(){return Jj(this)}},{key:"pick",value:function(e){var t,n={},r=E(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;this.fields[i]&&(n[i]=this.fields[i])}}catch(a){r.e(a)}finally{r.f()}return this.setFields(n)}},{key:"omit",value:function(e){var t,n=Object.assign({},this.fields),r=E(e);try{for(r.s();!(t=r.n()).done;){delete n[t.value]}}catch(i){r.e(i)}finally{r.f()}return this.setFields(n)}},{key:"from",value:function(e,t,n){var r=(0,QL.getter)(e,!0);return this.transform((function(i){if(!i)return i;var a=i;return function(e,t){var n=f((0,QL.normalizePath)(t));if(1===n.length)return n[0]in e;var r=n.pop(),i=(0,QL.getter)((0,QL.join)(n),!0)(e);return!(!i||!(r in i))}(i,e)&&(a=Object.assign({},i),n||delete a[e],a[t]=r(i)),a}))}},{key:"json",value:function(){return this.transform(Xj)}},{key:"noUnknown",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fj.noUnknown;"boolean"!==typeof e&&(t=e,e=!0);var n=this.test({name:"noUnknown",exclusive:!0,message:t,test:function(t){if(null==t)return!0;var n=function(e,t){var n=Object.keys(e.fields);return Object.keys(t).filter((function(e){return-1===n.indexOf(e)}))}(this.schema,t);return!e||0===n.length||this.createError({params:{unknown:n.join(", ")}})}});return n.spec.noUnknown=e,n}},{key:"unknown",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fj.noUnknown;return this.noUnknown(!e,t)}},{key:"transformKeys",value:function(e){return this.transform((function(t){if(!t)return t;for(var n={},r=0,i=Object.keys(t);r<i.length;r++){var a=i[r];n[e(a)]=t[a]}return n}))}},{key:"camelCase",value:function(){return this.transformKeys(HL.camelCase)}},{key:"snakeCase",value:function(){return this.transformKeys(HL.snakeCase)}},{key:"constantCase",value:function(){return this.transformKeys((function(e){return(0,HL.snakeCase)(e).toUpperCase()}))}},{key:"describe",value:function(e){var t=Qf(k(n.prototype),"describe",this).call(this,e);t.fields={};for(var r=0,i=Object.entries(this.fields);r<i.length;r++){var a,o=c(i[r],2),u=o[0],s=o[1],l=e;null!=(a=l)&&a.value&&(l=Object.assign({},l,{parent:l.value,value:l.value[u]})),t.fields[u]=s.describe(l)}return t}}]),n}(Sj);tM.prototype=nM.prototype;var rM=function(e){g(n,e);var t=_(n);function n(e){var r;return h(this,n),r=t.call(this,{type:"array",spec:{types:e},check:function(e){return Array.isArray(e)}}),r.innerType=void 0,r.innerType=e,r}return y(n,[{key:"_cast",value:function(e,t){var r=this,i=Qf(k(n.prototype),"_cast",this).call(this,e,t);if(!this._typeCheck(i)||!this.innerType)return i;var a=!1,o=i.map((function(e,n){var i=r.innerType.cast(e,Object.assign({},t,{path:"".concat(t.path||"","[").concat(n,"]")}));return i!==e&&(a=!0),i}));return a?o:i}},{key:"_validate",value:function(e){var t,r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,u=this.innerType,s=null!=(t=i.recursive)?t:this.spec.recursive;null!=i.originalValue&&i.originalValue,Qf(k(n.prototype),"_validate",this).call(this,e,i,a,(function(t,n){var c;if(s&&u&&r._typeCheck(n)){for(var l=new Array(n.length),f=0;f<n.length;f++){var h;l[f]=u.asNestedTest({options:i,index:f,parent:n,parentPath:i.path,originalParent:null!=(h=i.originalValue)?h:e})}r.runTests({value:n,tests:l,originalValue:null!=(c=i.originalValue)?c:e,options:i},a,(function(e){return o(e.concat(t),n)}))}else o(t,n)}))}},{key:"clone",value:function(e){var t=Qf(k(n.prototype),"clone",this).call(this,e);return t.innerType=this.innerType,t}},{key:"json",value:function(){return this.transform(Xj)}},{key:"concat",value:function(e){var t=Qf(k(n.prototype),"concat",this).call(this,e);return t.innerType=this.innerType,e.innerType&&(t.innerType=t.innerType?t.innerType.concat(e.innerType):e.innerType),t}},{key:"of",value:function(e){var t=this.clone();if(!pj(e))throw new TypeError("`array.of()` sub-schema must be a valid yup schema not: "+nj(e));return t.innerType=e,t.spec=Object.assign({},t.spec,{types:e}),t}},{key:"length",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hj.length;return this.test({message:t,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test:function(t){return t.length===this.resolve(e)}})}},{key:"min",value:function(e,t){return t=t||hj.min,this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test:function(t){return t.length>=this.resolve(e)}})}},{key:"max",value:function(e,t){return t=t||hj.max,this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test:function(t){return t.length<=this.resolve(e)}})}},{key:"ensure",value:function(){var e=this;return this.default((function(){return[]})).transform((function(t,n){return e._typeCheck(t)?t:null==n?[]:[].concat(n)}))}},{key:"compact",value:function(e){var t=e?function(t,n,r){return!e(t,n,r)}:function(e){return!!e};return this.transform((function(e){return null!=e?e.filter(t):e}))}},{key:"describe",value:function(e){var t=Qf(k(n.prototype),"describe",this).call(this,e);if(this.innerType){var r,i=e;null!=(r=i)&&r.value&&(i=Object.assign({},i,{parent:i.value,value:i.value[0]})),t.innerType=this.innerType.describe(i)}return t}}]),n}(Sj);rM.prototype;var iM=function(e){g(n,e);var t=_(n);function n(e){var r;return h(this,n),r=t.call(this,{type:"tuple",spec:{types:e},check:function(e){var t=this.spec.types;return Array.isArray(e)&&e.length===t.length}}),r.withMutation((function(){r.typeError(dj)})),r}return y(n,[{key:"_cast",value:function(e,t){var r=this.spec.types,i=Qf(k(n.prototype),"_cast",this).call(this,e,t);if(!this._typeCheck(i))return i;var a=!1,o=r.map((function(e,n){var r=e.cast(i[n],Object.assign({},t,{path:"".concat(t.path||"","[").concat(n,"]")}));return r!==i[n]&&(a=!0),r}));return a?o:i}},{key:"_validate",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=this.spec.types;Qf(k(n.prototype),"_validate",this).call(this,e,r,i,(function(n,u){var s;if(t._typeCheck(u)){var l,f=[],h=E(o.entries());try{for(h.s();!(l=h.n()).done;){var d,p=c(l.value,2),v=p[0],y=p[1];f[v]=y.asNestedTest({options:r,index:v,parent:u,parentPath:r.path,originalParent:null!=(d=r.originalValue)?d:e})}}catch(m){h.e(m)}finally{h.f()}t.runTests({value:u,tests:f,originalValue:null!=(s=r.originalValue)?s:e,options:r},i,(function(e){return a(e.concat(n),u)}))}else a(n,u)}))}},{key:"describe",value:function(e){var t=Qf(k(n.prototype),"describe",this).call(this,e);return t.innerType=this.spec.types.map((function(t,n){var r,i=e;return null!=(r=i)&&r.value&&(i=Object.assign({},i,{parent:i.value,value:i.value[n]})),t.describe(i)})),t}}]),n}(Sj);iM.prototype;var aM=tM().shape({email:qj().email("Enter valid email").required("Required"),password:qj().min(5).max(20).matches(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{5,20}$/,{message:"Create stronger password"}).required("Required")});function oM(e,t){var n=ML({initialValues:{email:"",password:""},validationSchema:aM,onSubmit:function(t,n){e.onSubmit(t)}}),r=n.values,i=n.errors,a=n.touched,o=n.handleBlur,u=n.handleChange,s=n.handleSubmit,c=n.isSubmitting;return(0,Rn.jsxs)("form",{autoComplete:"off",onSubmit:s,children:[(0,Rn.jsx)("label",{htmlFor:"email",children:"Email"}),(0,Rn.jsx)("input",{style:{textAlign:"left"},className:"my-input",value:r.email,onChange:u,onBlur:o,id:"email",type:"email",placeholder:"Enter your email"}),a.email&&i.email&&(0,Rn.jsx)("div",{className:"error",children:i.email}),(0,Rn.jsx)("label",{htmlFor:"password",children:"Password"}),(0,Rn.jsx)("input",{style:{textAlign:"left"},className:"my-input",value:r.password,onChange:u,onBlur:o,id:"password",type:"password",placeholder:"Enter your password"}),a.password&&i.password&&(0,Rn.jsx)("div",{className:"error",children:i.password}),(0,Rn.jsx)("button",{disabled:c,type:"submit",children:"Submit"})]})}var uM="token",sM="token-expiration";function cM(e){localStorage.setItem(uM,e.token)}function lM(){var e=localStorage.getItem(uM);if(!e||"null"==e)return[];var t=localStorage.getItem(sM),n=(new Date(t),JSON.parse(atob(e.split(".")[1]))),r=[];for(var i in n)r.push({name:i,value:n[i]});return r}function fM(e){localStorage.setItem("id",e.id),localStorage.setItem("email",e.email),e.profileImage?localStorage.setItem("profileImage",e.profileImage):localStorage.setItem("profileImage","".concat(MA,"/noProfile.jpg"))}function hM(){var e=localStorage.getItem("id"),t=localStorage.getItem("email"),n=localStorage.getItem("profileImage"),r={id:e,email:t};return n&&(r.profileImage=n),r}var dM=r.createContext({profileDTO:{id:"",email:""},updateProfile:function(){}});var pM=[{path:"create",component:function(){var e=ke(),t=c((0,r.useState)(!1),2),n=t[0],i=t[1],a=c((0,r.useState)(!1),2),o=a[0],u=a[1];function s(e,t,n){n(!t)}var l=c((0,r.useState)([]),2),f=l[0],h=l[1];(0,r.useEffect)((function(){!function(e,t){jA.apply(this,arguments)}(localStorage.getItem("id"),h)}),[]),(0,r.useEffect)((function(){v(f[0])}),[f]);var d=c((0,r.useState)(f[0]),2),p=d[0],v=d[1];function y(e){v(f[e-1])}function m(){for(var e,t,n="",r=0;r<6;r++){var i=(e=0,t=9,Math.floor(Math.random()*(t-e+1))+e);n+="".concat(i)}return n}return(0,Rn.jsx)(Rn.Fragment,{children:(0,Rn.jsxs)("section",{className:"flex-section",children:[(0,Rn.jsxs)("article",{className:"half-article",children:[(0,Rn.jsx)("button",{className:"my-button",onClick:function(e){s(0,n,i)},style:{height:"100%",aspectRatio:"1"},children:"Choose game template"}),(0,Rn.jsx)(Ln,{isOpen:n,toggleModal:function(e){s(0,n,i)},children:(0,Rn.jsx)(Rn.Fragment,{children:(0,Rn.jsx)(Mn,{templates:f,chooseTemplate:y,choosenTemplate:p})}),submitButtonText:"Choose",onSubmit:function(){var t={template:p,gamecode:m()};e("/game-code",{state:t}),localStorage.setItem("gameTemplate",JSON.stringify(p))}})]}),(0,Rn.jsxs)("article",{className:"half-article",children:[(0,Rn.jsx)("button",{className:"my-button",onClick:function(e){s(0,o,u)},style:{height:"100%",aspectRatio:"1"},children:"Edit game templates"}),(0,Rn.jsx)(Ln,{isOpen:o,toggleModal:function(e){s(0,o,u)},children:(0,Rn.jsx)(Rn.Fragment,{children:(0,Rn.jsx)(Mn,{templates:f,chooseTemplate:y,choosenTemplate:p})}),submitButtonText:"Choose",onSubmit:function(){e("/edit-template",{state:p})}})]}),(0,Rn.jsx)("article",{className:"half-article",children:(0,Rn.jsx)("button",{className:"my-button",onClick:function(){e("/create-template")},style:{height:"100%",aspectRatio:"1"},children:"Create new game template"})})]})})}},{path:"create-template",component:function(){var e=ke(),t=c((0,r.useState)(!1),2),n=t[0],i=t[1];function a(e){i(!n)}var o=c((0,r.useState)([{questionNumber:1,question:"",answerA:"",answerB:"",answerC:"",answerD:"",correctAnswer:""},{questionNumber:2,question:"",answerA:"",answerB:"",answerC:"",answerD:"",correctAnswer:""}]),2),u=o[0],s=o[1],l=c((0,r.useState)(1),2),f=l[0],h=l[1],d=c((0,r.useState)(10),2),p=d[0],v=d[1],y=c((0,r.useState)(""),2),m=y[0],g=y[1],k=c((0,r.useState)(""),2),b=k[0],w=k[1],_=function(){var e=Bn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t>=u.length||t<f)&&f>1?h(f-1):h(1),qA(t,s);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){console.log(u)}),[u]),(0,Rn.jsxs)("main",{className:"question-placeholder",children:[(0,Rn.jsx)(QA,{questions:u,setQuestions:s,choosenQuestion:f,setChoosenQuestion:h,deleteQuestion:_}),(0,Rn.jsx)(VA,{question:u[f-1],questionNumber:f,setQuestions:s}),(0,Rn.jsx)(WA,{toggleModal:a,questionTime:p,setQuestionTime:v,timesForAnswer:[5,10,20,30,40]}),(0,Rn.jsx)(Ln,{isOpen:n,toggleModal:a,children:(0,Rn.jsxs)("div",{style:{width:"100%",height:"100%",textAlign:"center"},children:[(0,Rn.jsx)("h2",{children:"Template name"}),(0,Rn.jsx)(BA,{value:m,setValue:g,placeholder:"Enter template name",characterLimit:20,visibleWarning:!0}),b&&(0,Rn.jsx)("span",{className:"error",children:b})]}),submitButtonText:"Save template",onSubmit:function(){GA(u,m,p)?e("/create"):w("You have to have at least 1 full question!")}})]})}},{path:"/edit-template",component:function(){var e=me().state,t=ke(),n=c((0,r.useState)(!1),2),i=n[0],a=n[1];function o(e){a(!i)}var u=c((0,r.useState)(e.allQuestions),2),s=u[0],l=u[1],f=c((0,r.useState)(1),2),h=f[0],d=f[1],p=c((0,r.useState)(e.questionTime),2),v=p[0],y=p[1],m=c((0,r.useState)(e.templateName),2),g=m[0],k=m[1],b=c((0,r.useState)(""),2),w=b[0],_=b[1],x=function(){var e=Bn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t>=s.length||t<h)&&h>1?d(h-1):d(1),qA(t,l);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,Rn.jsxs)("main",{className:"question-placeholder",children:[(0,Rn.jsx)(QA,{questions:s,setQuestions:l,choosenQuestion:h,setChoosenQuestion:d,deleteQuestion:x}),(0,Rn.jsx)(VA,{question:s[h-1],questionNumber:h,setQuestions:l}),(0,Rn.jsx)(WA,{toggleModal:o,questionTime:v,setQuestionTime:y,timesForAnswer:[5,10,20,30,40]}),(0,Rn.jsx)(Ln,{isOpen:i,toggleModal:o,children:(0,Rn.jsxs)("div",{style:{width:"100%",height:"100%",textAlign:"center"},children:[(0,Rn.jsx)("h2",{children:"Template name"}),(0,Rn.jsx)(BA,{value:g,setValue:k,placeholder:"Enter template name",characterLimit:20,visibleWarning:!0}),w&&(0,Rn.jsx)("span",{className:"error",children:w})]}),submitButtonText:"Save template",onSubmit:function(){GA(s,g,v)?t("/create"):_("You have to have at least 1 full question!")}})]})}},{path:"/login",component:function(){var e=c((0,r.useState)([]),2),t=e[0],n=e[1],i=(0,r.useContext)(PN).update,a=(0,r.useContext)(dM).updateProfile,o=ke();function u(e){return s.apply(this,arguments)}function s(){return(s=Bn(Un().mark((function e(t){var r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,n([]),e.next=5,bO.post("".concat(xO,"/login"),t);case 5:return cM(e.sent.data),i(lM()),e.next=10,bO.post("".concat(xO,"/loginProfile/").concat(t.email));case 10:r=e.sent,console.log(r),fM(r.data),a(hM()),o("/"),o(0),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),n(["Your login or password was wrong!"]);case 21:case"end":return e.stop()}}),e,null,[[1,18]])})))).apply(this,arguments)}return(0,Rn.jsxs)(Rn.Fragment,{children:[(0,Rn.jsx)("h3",{style:{fontSize:"3em"},children:"Login"}),(0,Rn.jsx)(SO,{errors:t}),(0,Rn.jsx)(oM,{model:{email:"",password:""},onSubmit:function(){var e=Bn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),submitButtonName:"Login"}),(0,Rn.jsx)("span",{style:{color:"red"},children:t})]})}},{path:"/register",component:function(){var e=c((0,r.useState)([]),2),t=e[0],n=e[1],i=(0,r.useContext)(PN).update,a=(0,r.useContext)(dM).updateProfile,o=ke();function u(e){return s.apply(this,arguments)}function s(){return(s=Bn(Un().mark((function e(t){var r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,n([]),e.next=5,bO.post("".concat(xO,"/create"),t);case 5:return cM(e.sent.data),e.next=9,bO.post("".concat(xO,"/loginProfile/").concat(t.email));case 9:r=e.sent,console.log(r),fM(r.data),a(hM()),i(lM()),o("/"),o(0),e.next=20;break;case 18:e.prev=18,e.t0=e.catch(1);case 20:case"end":return e.stop()}}),e,null,[[1,18]])})))).apply(this,arguments)}return(0,Rn.jsxs)(Rn.Fragment,{children:[(0,Rn.jsx)("h1",{children:"Register"}),(0,Rn.jsx)(SO,{errors:t}),(0,Rn.jsx)(oM,{model:{email:"",password:""},onSubmit:function(){var e=Bn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),submitButtonName:"Register"})]})}},{path:"/game-code",component:function(){var e=me().state,t=ke(),n=c((0,r.useState)({gameTemplate:e.template,players:[],gamecode:e.gamecode,started:"waiting",currentQuestion:0,time:e.template.questionTime,gamePhase:1,startingTime:3,winners:[]}),2),i=n[0],a=n[1],o=c((0,r.useState)(!0),2),u=o[0],s=o[1];return(0,r.useEffect)((function(){TN(e,a),eN(i.gamecode,a)}),[]),(0,r.useEffect)((function(){i.players.length>=1&&s(!1)}),[i.players]),(0,r.useEffect)((function(){if("started"==i.started){var e={gamestate:i};t("/game-host/".concat(i.gamecode),{state:e})}}),[i]),(0,Rn.jsx)("div",{className:"column-shaped-container",children:i&&(0,Rn.jsxs)(Rn.Fragment,{children:[(0,Rn.jsx)("h2",{children:"Your game code"}),(0,Rn.jsxs)("span",{className:"column-shaped-container",children:[(0,Rn.jsx)("h2",{children:e.gamecode}),(0,Rn.jsxs)("h3",{children:["Number of players in game: ",i.players.length,"/10"]})]}),(0,Rn.jsx)("div",{className:"player-list",children:i.players&&0!=i.players.length&&i.players.map((function(e){return(0,Rn.jsx)(ON,{player:e,image:""},e.id)}))}),(0,Rn.jsx)("button",{disabled:u,className:"start-game-btn",onClick:function(){return function(e,t){e.players.length>=1&&(t(Qr(Qr({},e),{},{started:"started"})),yN(e.gamecode,"started","gameStarted"))}(i,a)},children:"Start game"})]})})}},{path:"/game-host/:code",component:function(){var e=me().state.gamestate,t=c((0,r.useState)(e),2),n=t[0],i=t[1],a=e.gamecode,o=c((0,r.useState)("question"),2),u=o[0],s=o[1],l=c((0,r.useState)(),2),f=l[0],h=l[1],d=c((0,r.useState)(n.gameTemplate.allQuestions[0]),2),p=d[0],v=d[1],y=c((0,r.useState)(n.players),2),m=y[0],g=y[1],k=c((0,r.useState)([]),2),b=k[0],w=k[1],_=c((0,r.useState)(),2),x=_[0],S=_[1],E=c((0,r.useState)(),2),C=E[0],T=E[1],I=c((0,r.useState)(!1),2),A=I[0],N=I[1],D=c((0,r.useState)(!1),2),O=D[0],P=D[1];return(0,r.useEffect)((function(){!function(e){tf(bN,(function(t){!0===t.val()?(e(!0),console.log("connected")):(e(!1),console.log("not connected"))}))}(P)}),[]),(0,r.useEffect)((function(){!x&&0!=x||!f&&0!=f||!u||N(!0)}),[f,C,x]),(0,r.useEffect)((function(){a&&(mN(a,x,S,"time"),mN(a,b,w,"winners"),mN(a,C,T,"gamePhase"),mN(a,0,h,"currentQuestionIndex"),eN(a,i,!0))}),[a]),(0,r.useEffect)((function(){C&&(C==2*n.gameTemplate.allQuestions.length+1||(C%2==0?s("statistics"):C%2==1&&((x||0==x)&&x<1&&(f||0==f)&&h(f+1),s("question"))),(x||0==x)&&x<1&&S(n.gameTemplate.questionTime))}),[C]),(0,r.useEffect)((function(){(x||0==x)&&(yN(n.gamecode,x,"time"),x<1&&C&&(i(Qr(Qr({},n),{},{gamePhase:n.gamePhase+1})),T(C+1),yN(n.gamecode,n.gamePhase+1,"gamePhase"),C+1==2*n.gameTemplate.allQuestions.length+1&&(yN(n.gamecode,"winners","gameStarted"),IN(m,w))))}),[x]),(0,r.useEffect)((function(){f&&(v(n.gameTemplate.allQuestions[f]),sN(n.gamecode,f))}),[f]),(0,r.useEffect)((function(){console.log(b),b.length>0&&(yN(n.gamecode,b,"winners"),s("winners"))}),[b]),(0,r.useEffect)((function(){eN(n.gamecode,i,!1)}),[]),(0,r.useEffect)((function(){f&&sN(n.gamecode,f)}),[u]),(0,r.useEffect)((function(){g(n.players)}),[n.players]),(0,Rn.jsxs)(Rn.Fragment,{children:[(0,Rn.jsx)(CN,{}),A&&O?(0,Rn.jsxs)("div",{className:"column-shaped-container",style:{justifyContent:"space-between",width:"100%",height:"100%"},children:["question"==u&&(0,Rn.jsx)(wN,{currentQuestion:p,time:x,setTime:S,gamecode:n.gamecode}),"statistics"==u&&(0,Rn.jsx)(xN,{time:x,setTime:S,players:m,setPlayers:g,gamecode:n.gamecode}),"winners"==u&&(0,Rn.jsx)(EN,{winners:b})]}):(0,Rn.jsx)(AN,{})]})}},{path:"/waiting-room",component:function(){var e=me().state,t=ke(),n=c((0,r.useState)("waiting"),2),i=n[0],a=n[1];return(0,r.useEffect)((function(){rN(e.game.gamecode,a),function(){var e=localStorage.getItem("token"),t=localStorage.getItem("email"),n=localStorage.getItem("id"),r=localStorage.getItem("profileImage");localStorage.clear(),localStorage.setItem("token",e),localStorage.setItem("email",t),localStorage.setItem("id",n),localStorage.setItem("profileImage",r)}()}),[]),(0,r.useEffect)((function(){if("started"==i){var n=e.game.players.length,r={game:e.game,username:e.username,playerNumber:n};localStorage.setItem("username/".concat(n),e.username),t("/game-player/".concat(e.game.gamecode),{state:r})}}),[i]),(0,Rn.jsxs)(Rn.Fragment,{children:[(0,Rn.jsx)(CN,{}),(0,Rn.jsx)("div",{style:{fontSize:"2em",alignItems:"center",justifyContent:"center",padding:"20px"},children:"Wait for start of game..."})]})}},{path:"/game-player/:code",component:function(){var e=me().state,t=c((0,r.useState)(e.game),2),n=t[0],i=t[1],a=c((0,r.useState)(e.game.gameTemplate.questionTime),2),o=a[0],u=a[1],s=c((0,r.useState)(null),2),l=s[0],f=s[1],h=c((0,r.useState)(0),2),d=h[0],p=h[1],v=c((0,r.useState)([]),2),y=v[0],m=v[1],g=c((0,r.useState)([]),2),k=g[0],b=g[1],w=c((0,r.useState)(0),2),_=w[0],x=w[1],S=c((0,r.useState)(),2),E=S[0],C=S[1],T=c((0,r.useState)(0),2),I=T[0],A=T[1],N=c((0,r.useState)(),2),D=N[0],O=N[1],P=c((0,r.useState)("started"),2),R=P[0],F=P[1],L=c((0,r.useState)(),2),j=L[0],M=L[1],U=Math.round(1e3/e.game.gameTemplate.questionTime),V=e.username?e.username:localStorage.getItem("username/".concat(e.playerNumber));return(0,r.useEffect)((function(){eN(e.game.gamecode,i),function(e,t){hN.apply(this,arguments)}(null===n||void 0===n?void 0:n.gamecode,u),rN(n.gamecode,F)}),[]),(0,r.useEffect)((function(){D&&(n.currentQuestion||0==n.currentQuestion)&&n.gameTemplate.allQuestions[n.currentQuestion].correctAnswer==D.choosenAnswer&&n.currentQuestion==D.questionNumber&&A(1e3-U*D.sendingTime)}),[D,n.currentQuestion]),(0,r.useEffect)((function(){n.gamecode&&V&&(E||function(e,t,n){dN.apply(this,arguments)}(n.gamecode,V,C),E&&(mN(n.gamecode,y,m,"players"),mN(n.gamecode,d,p,"questionDone"),mN(n.gamecode,_,x,"points",E.id),mN(n.gamecode,l,f,"shownComponent",E.id),mN(n.gamecode,o,u,"time"),mN(n.gamecode,D,O,"lastAnswer",E.id),mN(n.gamecode,j,M,"startingTime"),mN(n.gamecode,k,b,"winners"),function(e,t,n){pN.apply(this,arguments)}(n.gamecode,E.id,f)))}),[n.gamecode,V,E]),(0,r.useEffect)((function(){o<1&&(n.gamePhase==2*n.gameTemplate.allQuestions.length?(IN(y,b),f("winners")):"answers"==l&&n.gamePhase%2==1?f("between"):"between"==l&&d<e.game.gameTemplate.allQuestions.length&&n.gamePhase%2==0&&f("answers"))}),[o]),(0,r.useEffect)((function(){m(null===n||void 0===n?void 0:n.players)}),[null===n||void 0===n?void 0:n.players]),(0,r.useEffect)((function(){"winners"==(null===n||void 0===n?void 0:n.started)&&f("winners")}),[null===n||void 0===n?void 0:n.started]),(0,r.useEffect)((function(){b(n.winners)}),[n.winners]),(0,r.useEffect)((function(){E&&l&&yN(n.gamecode,l,"shownComponent",null===E||void 0===E?void 0:E.id)}),[l]),(0,Rn.jsxs)(Rn.Fragment,{children:[(0,Rn.jsx)(CN,{}),"answers"==l&&"started"==R&&(0,Rn.jsx)(NN,{gameState:n,time:o,setShownComponent:f,username:e.username,setPointsForLast:function(t){n.gameTemplate.allQuestions[n.currentQuestion].correctAnswer==t.choosenAnswer&&n.currentQuestion==t.questionNumber&&x((function(r){var i=1e3-U*t.sendingTime;return A(i),x(r+i),function(e,t,n){fN.apply(this,arguments)}(n.gamecode,e.username,r+i),r+i}))},setLastAnswer:O}),"between"==l&&"started"==R&&(0,Rn.jsx)(DN,{gameState:n,setShownComponent:f,questionDone:d,setQuestionsDone:p,setTime:u,lastQuestionPoints:I,setLastQuestionPoints:A}),"winners"==l&&"winners"==R&&k&&(0,Rn.jsx)(EN,{winners:k})]})}},{path:"/input-name",component:function(){var e=me().state,t=ke(),n=c((0,r.useState)(""),2),i=n[0],a=n[1],o=c((0,r.useState)(),2),u=o[0],s=o[1];return(0,r.useEffect)((function(){u&&t("/waiting-room",{state:{game:u,username:i}})}),[u]),(0,Rn.jsxs)(Rn.Fragment,{children:[(0,Rn.jsx)(BA,{value:i,setValue:a,placeholder:"Input your name",characterLimit:15,visibleWarning:!0}),(0,Rn.jsx)("button",{onClick:function(){!function(e,t){nN.apply(this,arguments)}(e,{id:0,name:i,points:0,lastAnswer:{choosenAnswer:"",sendingTime:0,questionNumber:1},shownComponent:"answers"}),eN(e,s)},children:"Submit name"})]})}},{path:"/",component:FN},{path:"*",component:FN}],vM=pM;function yM(){var e=ke();return(0,Rn.jsx)("button",{className:"go-back-button",style:{height:"fit-content"},onClick:function(){e("/")},children:"Cacarrot"})}function mM(){var e=ke(),t=(0,r.useContext)(PN).update;return(0,Rn.jsx)("button",{onClick:function(){localStorage.removeItem(uM),localStorage.removeItem("email"),localStorage.removeItem("id"),localStorage.removeItem("profileImage"),t([]),e("/"),e(0)},style:{height:"fit-content"},children:"Logout"})}function gM(){return(0,Rn.jsxs)("div",{className:"navbar",children:[(0,Rn.jsx)(yM,{}),(0,Rn.jsx)(RN,{isAuthorized:(0,Rn.jsx)(Rn.Fragment,{children:(0,Rn.jsx)(mM,{})}),notAuthorized:(0,Rn.jsx)(Rn.Fragment,{})})]})}var kM=function(){var e=c((0,r.useState)([]),2),t=e[0],n=e[1];return(0,r.useEffect)((function(){n(lM())}),[localStorage]),(0,Rn.jsx)(PN.Provider,{value:{claims:t,update:n},children:(0,Rn.jsx)(Tn,{children:(0,Rn.jsx)("div",{className:"App",children:(0,Rn.jsxs)("main",{className:"wrapper",children:[(0,Rn.jsx)(gM,{}),(0,Rn.jsx)("section",{className:"landing-page",children:(0,Rn.jsx)(Re,{children:vM.map((function(e){return(0,Rn.jsx)(Oe,{path:e.path,Component:e.component},e.path)}))})})]})})})})},bM=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};function wM(e){var t,n=e.basename,i=e.children,a=e.window,o=r.useRef();null==o.current&&(o.current=(void 0===(t={window:a,v5Compat:!0})&&(t={}),F((function(e,t){var n=R(e.location.hash.substr(1)),r=n.pathname,i=void 0===r?"/":r,a=n.search,o=void 0===a?"":a,u=n.hash;return O("",{pathname:i,search:o,hash:void 0===u?"":u},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){var n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){var i=e.location.href,a=i.indexOf("#");r=-1===a?i:i.slice(0,a)}return r+"#"+("string"===typeof t?t:P(t))}),(function(e,t){N("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),t)));var u=o.current,s=c(r.useState({action:u.action,location:u.location}),2),l=s[0],f=s[1];return r.useLayoutEffect((function(){return u.listen(f)}),[u]),r.createElement(Pe,{basename:n,children:i,location:l.location,navigationType:l.action,navigator:u})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var _M,xM;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(_M||(_M={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(xM||(xM={}));i.createRoot(document.getElementById("root")).render((0,Rn.jsx)(r.StrictMode,{children:(0,Rn.jsx)(wM,{children:(0,Rn.jsx)(kM,{})})})),bM()}()}();
//# sourceMappingURL=main.2e576ac5.js.map