/*! For license information please see main.1cd0bb26.js.LICENSE.txt */
!function(){var e={457:function(e){"use strict";var t=Array.isArray,n=Object.keys,r=Object.prototype.hasOwnProperty,i="undefined"!==typeof Element;function a(e,o){if(e===o)return!0;if(e&&o&&"object"==typeof e&&"object"==typeof o){var s,u,c,l=t(e),h=t(o);if(l&&h){if((u=e.length)!=o.length)return!1;for(s=u;0!==s--;)if(!a(e[s],o[s]))return!1;return!0}if(l!=h)return!1;var f=e instanceof Date,d=o instanceof Date;if(f!=d)return!1;if(f&&d)return e.getTime()==o.getTime();var p=e instanceof RegExp,v=o instanceof RegExp;if(p!=v)return!1;if(p&&v)return e.toString()==o.toString();var y=n(e);if((u=y.length)!==n(o).length)return!1;for(s=u;0!==s--;)if(!r.call(o,y[s]))return!1;if(i&&e instanceof Element&&o instanceof Element)return e===o;for(s=u;0!==s--;)if(("_owner"!==(c=y[s])||!e.$$typeof)&&!a(e[c],o[c]))return!1;return!0}return e!==e&&o!==o}e.exports=function(e,t){try{return a(e,t)}catch(n){if(n.message&&n.message.match(/stack|recursion/i)||-2146828260===n.number)return console.warn("Warning: react-fast-compare does not handle circular references.",n.name,n.message),!1;throw n}}},110:function(e,t,n){"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?o:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);h&&(o=o.concat(h(n)));for(var s=u(t),v=u(n),y=0;y<o.length;++y){var m=o[y];if(!a[m]&&(!r||!r[m])&&(!v||!v[m])&&(!s||!s[m])){var g=f(n,m);try{c(t,m,g)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case h:case a:case s:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case f:case y:case v:case u:return e;default:return t}}case i:return t}}}function _(e){return w(e)===h}t.AsyncMode=l,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=f,t.Fragment=a,t.Lazy=y,t.Memo=v,t.Portal=i,t.Profiler=s,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return _(e)||w(e)===l},t.isConcurrentMode=_,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===f},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===y},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===h||e===s||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===u||e.$$typeof===c||e.$$typeof===f||e.$$typeof===g||e.$$typeof===k||e.$$typeof===b||e.$$typeof===m)},t.typeOf=w},309:function(e,t,n){"use strict";e.exports=n(746)},758:function(e){"use strict";function t(e){this._maxSize=e,this.clear()}t.prototype.clear=function(){this._size=0,this._values=Object.create(null)},t.prototype.get=function(e){return this._values[e]},t.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var n=/[^.^\]^[]+|(?=\[\]|\.\.)/g,r=/^\d+$/,i=/^\d/,a=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,o=/^\s*(['"]?)(.*?)(\1)\s*$/,s=new t(512),u=new t(512),c=new t(512);function l(e){return s.get(e)||s.set(e,h(e).map((function(e){return e.replace(o,"$2")})))}function h(e){return e.match(n)||[""]}function f(e){return"string"===typeof e&&e&&-1!==["'",'"'].indexOf(e.charAt(0))}function d(e){return!f(e)&&(function(e){return e.match(i)&&!e.match(r)}(e)||function(e){return a.test(e)}(e))}e.exports={Cache:t,split:h,normalizePath:l,setter:function(e){var t=l(e);return u.get(e)||u.set(e,(function(e,n){for(var r=0,i=t.length,a=e;r<i-1;){var o=t[r];if("__proto__"===o||"constructor"===o||"prototype"===o)return e;a=a[t[r++]]}a[t[r]]=n}))},getter:function(e,t){var n=l(e);return c.get(e)||c.set(e,(function(e){for(var r=0,i=n.length;r<i;){if(null==e&&t)return;e=e[n[r++]]}return e}))},join:function(e){return e.reduce((function(e,t){return e+(f(t)||r.test(t)?"["+t+"]":(e?".":"")+t)}),"")},forEach:function(e,t,n){!function(e,t,n){var r,i,a,o,s=e.length;for(i=0;i<s;i++)(r=e[i])&&(d(r)&&(r='"'+r+'"'),a=!(o=f(r))&&/^\d+$/.test(r),t.call(n,r,o,a,i,e))}(Array.isArray(e)?e:h(e),t,n)}}},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),I=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var F,M=Object.assign;function j(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function q(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case E:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){J(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,he=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Se=null;function Ee(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Te(e){xe?Se?Se.push(e):Se=[e]:xe=e}function Ie(){if(xe){var e=xe,t=Se;if(Se=xe=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var Ne=!1;function Pe(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ce(e,t,n)}finally{Ne=!1,(null!==xe||null!==Se)&&(Ae(),Ie())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(l)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(le){Oe=!1}function Le(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Fe=!1,Me=null,je=!1,Ue=null,Ve={onError:function(e){Fe=!0,Me=e}};function qe(e,t,n,r,i,a,o,s,u){Fe=!1,Me=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(a(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ht(s):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,xt,St,Et,Tt=!1,It=[],Ct=null,At=null,Nt=null,Pt=new Map,Rt=new Map,Ot=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Ft(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=gi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void Et(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){jt(e)&&n.delete(t)}function Vt(){Tt=!1,null!==Ct&&jt(Ct)&&(Ct=null),null!==At&&jt(At)&&(At=null),null!==Nt&&jt(Nt)&&(Nt=null),Pt.forEach(Ut),Rt.forEach(Ut)}function qt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return qt(t,e)}if(0<It.length){qt(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&qt(Ct,e),null!==At&&qt(At,e),null!==Nt&&qt(Nt,e),Pt.forEach(t),Rt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Mt(n),null===n.blockedOn&&Ot.shift()}var zt=b.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=1,Gt(e,t,n,r)}finally{kt=i,zt.transition=a}}function Kt(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=4,Gt(e,t,n,r)}finally{kt=i,zt.transition=a}}function Gt(e,t,n,r){if(Wt){var i=$t(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Ft(Ct,e,t,n,r,i),!0;case"dragenter":return At=Ft(At,e,t,n,r,i),!0;case"mouseover":return Nt=Ft(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pt.set(a,Ft(Pt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,Ft(Rt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=$t(e,t,n,r))&&Wr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function $t(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),hn=M({},cn,{view:0,detail:0}),fn=an(hn),dn=M({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(dn),vn=an(M({},dn,{dataTransfer:0})),yn=an(M({},hn,{relatedTarget:0})),mn=an(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(M({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function En(){return Sn}var Tn=M({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=an(Tn),Cn=an(M({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(M({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Nn=an(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=M({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(Pn),On=[9,13,27,32],Dn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Fn=l&&"TextEvent"in window&&!Ln,Mn=l&&(!Dn||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Hn(e,t,n,r){Te(r),0<(t=Kr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){jr(e,0)}function $n(e){if(G(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var Jn=!1;if(l){var Xn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&$n(Gn)){var t=[];Hn(t,Gn,e,we(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Gn)}function ar(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&ur(gr,r)||(gr=r,0<(r=Kr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Sr={};function Er(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return xr[e]=n[t];return e}l&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Tr=Er("animationend"),Ir=Er("animationiteration"),Cr=Er("animationstart"),Ar=Er("transitionend"),Nr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Nr.set(e,t),u(t,[e])}for(var Or=0;Or<Pr.length;Or++){var Dr=Pr[Or];Rr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Rr(Tr,"onAnimationEnd"),Rr(Ir,"onAnimationIteration"),Rr(Cr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,c){if(qe.apply(this,arguments),Fe){if(!Fe)throw Error(a(198));var l=Me;Fe=!1,Me=null,je||(je=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Mr(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Mr(i,s,c),a=u}}}if(je)throw e=Ue,je=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var qr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[qr]){e[qr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Fr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[qr]||(t[qr]=!0,Vr("selectionchange",!1,t))}}function zr(e,t,n,r){switch(Yt(t)){case 1:var i=Ht;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=gi(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}Pe((function(){var r=a,i=we(n),o=[];e:{var s=Nr.get(e);if(void 0!==s){var u=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=In;break;case"focusin":c="focus",u=yn;break;case"focusout":c="blur",u=yn;break;case"beforeblur":case"afterblur":u=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=An;break;case Tr:case Ir:case Cr:u=mn;break;case Ar:u=Nn;break;case"scroll":u=fn;break;case"wheel":u=Rn;break;case"copy":case"cut":case"paste":u=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Cn}var l=0!==(4&t),h=!l&&"scroll"===e,f=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=Re(p,f))&&l.push(Hr(p,v,d)))),h)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=pn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==u?s:bi(u),d=null==c?s:bi(c),(s=new l(v,p+"leave",u,n,i)).target=h,s.relatedTarget=d,v=null,gi(i)===r&&((l=new l(f,p+"enter",c,n,i)).target=d,l.relatedTarget=h,v=l),h=v,u&&c)e:{for(f=c,p=0,d=l=u;d;d=Gr(d))p++;for(d=0,v=f;v;v=Gr(v))d++;for(;0<p-d;)l=Gr(l),p--;for(;0<d-p;)f=Gr(f),d--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=Gr(l),f=Gr(f)}l=null}else l=null;null!==u&&Qr(o,s,u,l,!1),null!==c&&null!==h&&Qr(o,h,c,l,!0)}if("select"===(u=(s=r?bi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var y=Yn;else if(Wn(s))if(Jn)y=or;else{y=ir;var m=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(y=ar);switch(y&&(y=y(e,r))?Hn(o,y,n,i):(m&&m(e,s,r),"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&ee(s,"number",s.value)),m=r?bi(r):window,e){case"focusin":(Wn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(Dn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Bn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Mn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Bn&&(g=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,Bn=!0)),0<(m=Kr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=qn(n))&&(k.data=g))),(g=Fn?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(Un=!0,jn);case"textInput":return(e=t.data)===jn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Zt=Xt=Jt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}jr(o,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(Hr(e,a,i)),null!=(a=Re(e,t))&&r.push(Hr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Re(n,a))&&o.unshift(Hr(n,u,s)):i||null!=(u=Re(n,a))&&o.push(Hr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $r=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Yr,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,di="__reactProps$"+hi,pi="__reactContainer$"+hi,vi="__reactEvents$"+hi,yi="__reactListeners$"+hi,mi="__reactHandles$"+hi;function gi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[fi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[fi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var _i=[],xi=-1;function Si(e){return{current:e}}function Ei(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Ti(e,t){xi++,_i[xi]=e.current,e.current=t}var Ii={},Ci=Si(Ii),Ai=Si(!1),Ni=Ii;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ei(Ai),Ei(Ci)}function Di(e,t,n){if(Ci.current!==Ii)throw Error(a(168));Ti(Ci,t),Ti(Ai,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,z(e)||"Unknown",i));return M({},n,r)}function Fi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,Ni=Ci.current,Ti(Ci,e),Ti(Ai,Ai.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ai),Ei(Ci),Ti(Ci,e)):Ei(Ai),Ti(Ai,n)}var ji=null,Ui=!1,Vi=!1;function qi(e){null===ji?ji=[e]:ji.push(e)}function Bi(){if(!Vi&&null!==ji){Vi=!0;var e=0,t=kt;try{var n=ji;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Ui=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),Ge(Ze,Bi),i}finally{kt=t,Vi=!1}}return null}var zi=[],Wi=0,Hi=null,Ki=0,Gi=[],Qi=0,$i=null,Yi=1,Ji="";function Xi(e,t){zi[Wi++]=Ki,zi[Wi++]=Hi,Hi=e,Ki=t}function Zi(e,t,n){Gi[Qi++]=Yi,Gi[Qi++]=Ji,Gi[Qi++]=$i,$i=e;var r=Yi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Ji=a+e}else Yi=1<<a|n<<i|r,Ji=e}function ea(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ta(e){for(;e===Hi;)Hi=zi[--Wi],zi[Wi]=null,Ki=zi[--Wi],zi[Wi]=null;for(;e===$i;)$i=Gi[--Qi],Gi[Qi]=null,Ji=Gi[--Qi],Gi[Qi]=null,Yi=Gi[--Qi],Gi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Yi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function ua(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(ua(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(ua(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(ua(e))throw fa(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function fa(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=Si(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function _a(e){var t=ma.current;Ei(ma),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ta=null;function Ia(e){null===Ta?Ta=[e]:Ta.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ia(t)):(n.next=i.next,i.next=n),t.interleaved=n,Aa(e,r)}function Aa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Na=!1;function Pa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Da(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Au)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Aa(e,n)}return null===(i=r.interleaved)?(t.next=t,Ia(r)):(t.next=i.next,i.next=t),r.interleaved=t,Aa(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Fa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ma(e,t,n,r){var i=e.updateQueue;Na=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,c=u.next;u.next=null,null===o?a=c:o.next=c,o=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==a){var h=i.baseState;for(o=0,l=c=u=null,s=a;;){var f=s.lane,d=s.eventTime;if((r&f)===f){null!==l&&(l=l.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(f=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=v.payload)?p.call(d,h,f):p)||void 0===f)break e;h=M({},h,f);break e;case 2:Na=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[s]:f.push(s))}else d={eventTime:d,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=d,u=h):l=l.next=d,o|=f;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===l&&(u=h),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Mu|=o,e.lanes=o,e.memoizedState=h}}function ja(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var qa={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Oa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Oa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Oa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Da(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function Ba(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,a))}function za(e,t,n){var r=!1,i=Ii,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Ri(t)?Ni:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ii),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=qa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&qa.enqueueReplaceState(t,t.state,null)}function Ha(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Pa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Ri(t)?Ni:Ci.current,i.context=Pi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&qa.enqueueReplaceState(i,i.state,null),Ma(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ka(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function $a(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ka(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ka(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Fc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ka(e,null,t),n.return=e,n;case _:return(t=Uc(t,e.mode,n)).return=e,t;case R:return f(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Fc(t,e.mode,n,null)).return=e,t;Ga(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Ga(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Ga(t,r)}return null}function v(i,a,s,u){for(var c=null,l=null,h=a,v=a=0,y=null;null!==h&&v<s.length;v++){h.index>v?(y=h,h=null):y=h.sibling;var m=d(i,h,s[v],u);if(null===m){null===h&&(h=y);break}e&&h&&null===m.alternate&&t(i,h),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,h=y}if(v===s.length)return n(i,h),ia&&Xi(i,v),c;if(null===h){for(;v<s.length;v++)null!==(h=f(i,s[v],u))&&(a=o(h,a,v),null===l?c=h:l.sibling=h,l=h);return ia&&Xi(i,v),c}for(h=r(i,h);v<s.length;v++)null!==(y=p(h,i,v,s[v],u))&&(e&&null!==y.alternate&&h.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&h.forEach((function(e){return t(i,e)})),ia&&Xi(i,v),c}function y(i,s,u,c){var l=L(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var h=l=null,v=s,y=s=0,m=null,g=u.next();null!==v&&!g.done;y++,g=u.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),s=o(k,s,y),null===h?l=k:h.sibling=k,h=k,v=m}if(g.done)return n(i,v),ia&&Xi(i,y),l;if(null===v){for(;!g.done;y++,g=u.next())null!==(g=f(i,g.value,c))&&(s=o(g,s,y),null===h?l=g:h.sibling=g,h=g);return ia&&Xi(i,y),l}for(v=r(i,v);!g.done;y++,g=u.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),s=o(g,s,y),null===h?l=g:h.sibling=g,h=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Xi(i,y),l}return function e(r,a,o,u){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ka(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Fc(o.props.children,r.mode,u,o.key)).return=r,r=a):((u=Lc(o.type,o.key,o.props,null,r.mode,u)).ref=Ka(r,a,o),u.return=r,r=u)}return s(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,u)).return=r,r=a}return s(r);case R:return e(r,a,(l=o._init)(o._payload),u)}if(te(o))return v(r,a,o,u);if(L(o))return y(r,a,o,u);Ga(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=jc(o,r.mode,u)).return=r,r=a),s(r)):n(r,a)}}var Ya=$a(!0),Ja=$a(!1),Xa={},Za=Si(Xa),eo=Si(Xa),to=Si(Xa);function no(e){if(e===Xa)throw Error(a(174));return e}function ro(e,t){switch(Ti(to,t),Ti(eo,e),Ti(Za,Xa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Za),Ti(Za,t)}function io(){Ei(Za),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no(Za.current),n=ue(t,e.type);t!==n&&(Ti(eo,e),Ti(Za,n))}function oo(e){eo.current===e&&(Ei(Za),Ei(eo))}var so=Si(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=b.ReactCurrentDispatcher,fo=b.ReactCurrentBatchConfig,po=0,vo=null,yo=null,mo=null,go=!1,ko=!1,bo=0,wo=0;function _o(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function So(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,ho.current=cs,e=n(r,i)}while(ko)}if(ho.current=os,t=null!==yo&&null!==yo.next,po=0,mo=yo=vo=null,go=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==bo;return bo=0,e}function To(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?vo.memoizedState=mo=e:mo=mo.next=e,mo}function Io(){if(null===yo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?vo.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?vo.memoizedState=mo=e:mo=mo.next=e}return mo}function Co(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=Io(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=s=null,c=null,l=o;do{var h=l.lane;if((po&h)===h)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=f,s=r):c=c.next=f,vo.lanes|=h,Mu|=h}l=l.next}while(null!==l&&l!==o);null===c?s=r:c.next=u,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Mu|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=Io(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(bs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Po(){}function Ro(e,t){var n=vo,r=Io(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,bs=!0),r=r.queue,Wo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,Uo(9,Do.bind(null,n,r,i,t),void 0,null),null===Nu)throw Error(a(349));0!==(30&po)||Oo(n,t,i)}return i}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Fo(t)&&Mo(e)}function Lo(e,t,n){return n((function(){Fo(t)&&Mo(e)}))}function Fo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Mo(e){var t=Aa(e,1);null!==t&&rc(t,e,1,-1)}function jo(e){var t=To();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,vo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return Io().memoizedState}function qo(e,t,n,r){var i=To();vo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=Io();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}vo.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function zo(e,t){return qo(8390656,8,e,t)}function Wo(e,t){return Bo(2048,8,e,t)}function Ho(e,t){return Bo(4,2,e,t)}function Ko(e,t){return Bo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Go.bind(null,t,e),n)}function $o(){}function Yo(e,t){var n=Io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=Io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),vo.lanes|=n,Mu|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{kt=n,fo.transition=r}}function es(){return Io().memoizedState}function ts(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Ca(e,t,n,r))){rc(n,e,r,tc()),as(n,t,r)}}function ns(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var u=t.interleaved;return null===u?(i.next=i,Ia(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(rc(n,e,r,i=tc()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function is(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var os={readContext:Ea,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},ss={readContext:Ea,useCallback:function(e,t){return To().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:zo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return qo(4194308,4,e,t)},useInsertionEffect:function(e,t){return qo(4,2,e,t)},useMemo:function(e,t){var n=To();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=To();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},To().memoizedState=e},useState:jo,useDebugValue:$o,useDeferredValue:function(e){return To().memoizedState=e},useTransition:function(){var e=jo(!1),t=e[0];return e=Zo.bind(null,e[1]),To().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=To();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Nu)throw Error(a(349));0!==(30&po)||Oo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,zo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=To(),t=Nu.identifierPrefix;if(ia){var n=Ji;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Ea,useCallback:Yo,useContext:Ea,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ho,useLayoutEffect:Ko,useMemo:Jo,useReducer:Ao,useRef:Vo,useState:function(){return Ao(Co)},useDebugValue:$o,useDeferredValue:function(e){return Xo(Io(),yo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],Io().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ro,useId:es,unstable_isNewReconciler:!1},cs={readContext:Ea,useCallback:Yo,useContext:Ea,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ho,useLayoutEffect:Ko,useMemo:Jo,useReducer:No,useRef:Vo,useState:function(){return No(Co)},useDebugValue:$o,useDeferredValue:function(e){var t=Io();return null===yo?t.memoizedState=e:Xo(t,yo.memoizedState,e)},useTransition:function(){return[No(Co)[0],Io().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ro,useId:es,unstable_isNewReconciler:!1};function ls(e,t){try{var n="",r=t;do{n+=q(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function hs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Oa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hu||(Hu=!0,Ku=r),fs(0,t)},n}function vs(e,t,n){(n=Oa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){fs(0,t),"function"!==typeof r&&(null===Gu?Gu=new Set([this]):Gu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ys(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oa(-1,1)).tag=2,Da(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ks=b.ReactCurrentOwner,bs=!1;function ws(e,t,n,r){t.child=null===e?Ja(t,null,n,r):Ya(t,e.child,n,r)}function _s(e,t,n,r,i){n=n.render;var a=t.ref;return Sa(t,i),r=So(e,t,n,r,a,i),n=Eo(),null===e||bs?(ia&&n&&ea(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function xs(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Oc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ss(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Hs(e,t,i)}return t.flags|=1,(e=Dc(a,r)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ur(a,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Hs(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return Is(e,t,n,r,i)}function Es(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Du,Ou),Ou|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Du,Ou),Ou|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ti(Du,Ou),Ou|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ti(Du,Ou),Ou|=r;return ws(e,t,i,n),t.child}function Ts(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Is(e,t,n,r,i){var a=Ri(n)?Ni:Ci.current;return a=Pi(t,a),Sa(t,i),n=So(e,t,n,r,a,i),r=Eo(),null===e||bs?(ia&&r&&ea(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function Cs(e,t,n,r,i){if(Ri(n)){var a=!0;Fi(t)}else a=!1;if(Sa(t,i),null===t.stateNode)Ws(e,t),za(t,n,r),Ha(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Pi(t,c=Ri(n)?Ni:Ci.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&Wa(t,o,r,c),Na=!1;var f=t.memoizedState;o.state=f,Ma(t,r,o,i),u=t.memoizedState,s!==r||f!==u||Ai.current||Na?("function"===typeof l&&(Va(t,n,l,r),u=t.memoizedState),(s=Na||Ba(t,n,s,r,f,u,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ra(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ya(t.type,s),o.props=c,h=t.pendingProps,f=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Ea(u):u=Pi(t,u=Ri(n)?Ni:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||f!==u)&&Wa(t,o,r,u),Na=!1,f=t.memoizedState,o.state=f,Ma(t,r,o,i);var p=t.memoizedState;s!==h||f!==p||Ai.current||Na?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Na||Ba(t,n,c,r,f,p,u)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return As(e,t,n,r,a,i)}function As(e,t,n,r,i,a){Ts(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Mi(t,n,!1),Hs(e,t,a);r=t.stateNode,ks.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ya(t,e.child,null,a),t.child=Ya(t,null,s,a)):ws(e,t,s,a),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Ns(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),ro(e,t.containerInfo)}function Ps(e,t,n,r,i){return da(),pa(i),t.flags|=256,ws(e,t,n,r),t.child}var Rs,Os,Ds,Ls,Fs={dehydrated:null,treeContext:null,retryLane:0};function Ms(e){return{baseLanes:e,cachePool:null,transitions:null}}function js(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(so,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Mc(u,i,0,null),e=Fc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ms(n),t.memoizedState=Fs,e):Us(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Vs(e,t,s,r=hs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Fc(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ya(t,e.child,null,s),t.child.memoizedState=Ms(s),t.memoizedState=Fs,o);if(0===(1&t.mode))return Vs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Vs(e,t,s,r=hs(o=Error(a(419)),r,void 0))}if(u=0!==(s&e.childLanes),bs||u){if(null!==(r=Nu)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Aa(e,i),rc(r,e,i,-1))}return yc(),Vs(e,t,s,r=hs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Gi[Qi++]=Yi,Gi[Qi++]=Ji,Gi[Qi++]=$i,Yi=e.id,Ji=e.overflow,$i=t),t=Us(t,r.children),t.flags|=4096,t)}(e,t,u,i,r,o,n);if(s){s=i.fallback,u=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Dc(r,s):(s=Fc(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?Ms(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Fs,i}return e=(s=e.child).sibling,i=Dc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Us(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vs(e,t,n,r){return null!==r&&pa(r),Ya(t,e.child,null,n),(e=Us(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function qs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function Bs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&qs(e,n,t);else if(19===e.tag)qs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bs(t,!0,n,null,a);break;case"together":Bs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ws(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Mu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ks(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qs(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:case 17:return Ri(t.type)&&Oi(),Gs(t),null;case 3:return r=t.stateNode,io(),Ei(Ai),Ei(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(sc(aa),aa=null))),Os(e,t),Gs(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ds(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Gs(t),null}if(e=no(Za.current),ha(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Y(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var u in ge(n,o),i=null,o)if(o.hasOwnProperty(u)){var c=o[u];"children"===u?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&Ur("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[fi]=t,e[di]=r,Rs(e,t,!1,!1),t.stateNode=e;e:{switch(u=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Y(e,r),i=$(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&he(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&fe(e,l):"number"===typeof l&&fe(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&k(e,o,l,u))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(e&&null!=t.stateNode)Ls(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Gs(t),null;case 13:if(Ei(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))fa(),da(),t.flags|=98560,o=!1;else if(o=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[fi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gs(t),o=!1}else null!==aa&&(sc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Lu&&(Lu=3):yc())),null!==t.updateQueue&&(t.flags|=4),Gs(t),null);case 4:return io(),Os(e,t),null===e&&Br(t.stateNode.containerInfo),Gs(t),null;case 10:return _a(t.type._context),Gs(t),null;case 19:if(Ei(so),null===(o=t.memoizedState))return Gs(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Ks(o,!1);else{if(0!==Lu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Ks(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>zu&&(t.flags|=128,r=!0,Ks(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ks(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ia)return Gs(t),null}else 2*Je()-o.renderingStartTime>zu&&1073741824!==n&&(t.flags|=128,r=!0,Ks(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=so.current,Ti(so,r?1&n|2:1&n),t):(Gs(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ou)&&(Gs(t),6&t.subtreeFlags&&(t.flags|=8192)):Gs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function $s(e,t){switch(ta(t),t.tag){case 1:return Ri(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Ai),Ei(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(so),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Rs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Os=function(){},Ds=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var u=i[l];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||u===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ls=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ys=!1,Js=!1,Xs="function"===typeof WeakSet?WeakSet:Set,Zs=null;function eu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function tu(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var nu=!1;function ru(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&tu(t,n,a)}i=i.next}while(i!==r)}}function iu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function au(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ou(e){var t=e.alternate;null!==t&&(e.alternate=null,ou(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function su(e){return 5===e.tag||3===e.tag||4===e.tag}function uu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||su(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}var hu=null,fu=!1;function du(e,t,n){for(n=n.child;null!==n;)pu(e,t,n),n=n.sibling}function pu(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Js||eu(n,t);case 6:var r=hu,i=fu;hu=null,du(e,t,n),fu=i,null!==(hu=r)&&(fu?(e=hu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hu.removeChild(n.stateNode));break;case 18:null!==hu&&(fu?(e=hu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),Bt(e)):ui(hu,n.stateNode));break;case 4:r=hu,i=fu,hu=n.stateNode.containerInfo,fu=!0,du(e,t,n),hu=r,fu=i;break;case 0:case 11:case 14:case 15:if(!Js&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&tu(n,t,o),i=i.next}while(i!==r)}du(e,t,n);break;case 1:if(!Js&&(eu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Ec(n,t,s)}du(e,t,n);break;case 21:du(e,t,n);break;case 22:1&n.mode?(Js=(r=Js)||null!==n.memoizedState,du(e,t,n),Js=r):du(e,t,n);break;default:du(e,t,n)}}function vu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xs),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function yu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:hu=u.stateNode,fu=!1;break e;case 3:case 4:hu=u.stateNode.containerInfo,fu=!0;break e}u=u.return}if(null===hu)throw Error(a(160));pu(o,s,i),hu=null,fu=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ec(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)mu(t,e),t=t.sibling}function mu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yu(t,e),gu(e),4&r){try{ru(3,e,e.return),iu(3,e)}catch(y){Ec(e,e.return,y)}try{ru(5,e,e.return)}catch(y){Ec(e,e.return,y)}}break;case 1:yu(t,e),gu(e),512&r&&null!==n&&eu(n,n.return);break;case 5:if(yu(t,e),gu(e),512&r&&null!==n&&eu(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(y){Ec(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===o.type&&null!=o.name&&J(i,o),ke(u,s);var l=ke(u,o);for(s=0;s<c.length;s+=2){var h=c[s],f=c[s+1];"style"===h?ye(i,f):"dangerouslySetInnerHTML"===h?he(i,f):"children"===h?fe(i,f):k(i,h,f,l)}switch(u){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){Ec(e,e.return,y)}}break;case 6:if(yu(t,e),gu(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Ec(e,e.return,y)}}break;case 3:if(yu(t,e),gu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(y){Ec(e,e.return,y)}break;case 4:default:yu(t,e),gu(e);break;case 13:yu(t,e),gu(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bu=Je())),4&r&&vu(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Js=(l=Js)||h,yu(t,e),Js=l):yu(t,e),gu(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!h&&0!==(1&e.mode))for(Zs=e,h=e.child;null!==h;){for(f=Zs=h;null!==Zs;){switch(p=(d=Zs).child,d.tag){case 0:case 11:case 14:case 15:ru(4,d,d.return);break;case 1:eu(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){Ec(r,n,y)}}break;case 5:eu(d,d.return);break;case 22:if(null!==d.memoizedState){_u(f);continue}}null!==p?(p.return=d,Zs=p):_u(f)}h=h.sibling}e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=f.stateNode,s=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=ve("display",s))}catch(y){Ec(e,e.return,y)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(y){Ec(e,e.return,y)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:yu(t,e),gu(e),4&r&&vu(e);case 21:}}function gu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(su(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),lu(e,uu(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cu(e,uu(e),o);break;default:throw Error(a(161))}}catch(s){Ec(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ku(e,t,n){Zs=e,bu(e,t,n)}function bu(e,t,n){for(var r=0!==(1&e.mode);null!==Zs;){var i=Zs,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ys;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||Js;s=Ys;var c=Js;if(Ys=o,(Js=u)&&!c)for(Zs=i;null!==Zs;)u=(o=Zs).child,22===o.tag&&null!==o.memoizedState?xu(i):null!==u?(u.return=o,Zs=u):xu(i);for(;null!==a;)Zs=a,bu(a,t,n),a=a.sibling;Zs=i,Ys=s,Js=c}wu(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zs=a):wu(e)}}function wu(e){for(;null!==Zs;){var t=Zs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Js||iu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Js)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ja(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ja(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var h=l.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&Bt(f)}}}break;default:throw Error(a(163))}Js||512&t.flags&&au(t)}catch(d){Ec(t,t.return,d)}}if(t===e){Zs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zs=n;break}Zs=t.return}}function _u(e){for(;null!==Zs;){var t=Zs;if(t===e){Zs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zs=n;break}Zs=t.return}}function xu(e){for(;null!==Zs;){var t=Zs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{iu(4,t)}catch(u){Ec(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){Ec(t,i,u)}}var a=t.return;try{au(t)}catch(u){Ec(t,a,u)}break;case 5:var o=t.return;try{au(t)}catch(u){Ec(t,o,u)}}}catch(u){Ec(t,t.return,u)}if(t===e){Zs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zs=s;break}Zs=t.return}}var Su,Eu=Math.ceil,Tu=b.ReactCurrentDispatcher,Iu=b.ReactCurrentOwner,Cu=b.ReactCurrentBatchConfig,Au=0,Nu=null,Pu=null,Ru=0,Ou=0,Du=Si(0),Lu=0,Fu=null,Mu=0,ju=0,Uu=0,Vu=null,qu=null,Bu=0,zu=1/0,Wu=null,Hu=!1,Ku=null,Gu=null,Qu=!1,$u=null,Yu=0,Ju=0,Xu=null,Zu=-1,ec=0;function tc(){return 0!==(6&Au)?Je():-1!==Zu?Zu:Zu=Je()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Au)&&0!==Ru?Ru&-Ru:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,n,r){if(50<Ju)throw Ju=0,Xu=null,Error(a(185));mt(e,n,r),0!==(2&Au)&&e===Nu||(e===Nu&&(0===(2&Au)&&(ju|=n),4===Lu&&uc(e,Ru)),ic(e,r),1===n&&0===Au&&0===(1&t.mode)&&(zu=Je()+500,Ui&&Bi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=dt(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ft(e,e===Nu?Ru:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,qi(e)}(cc.bind(null,e)):qi(cc.bind(null,e)),oi((function(){0===(6&Au)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zu=-1,ec=0,0!==(6&Au))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ft(e,e===Nu?Ru:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Au;Au|=2;var o=vc();for(Nu===e&&Ru===t||(Wu=null,zu=Je()+500,dc(e,t));;)try{kc();break}catch(u){pc(e,u)}wa(),Tu.current=o,Au=i,null!==Pu?t=0:(Nu=null,Ru=0,t=Lu)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Fu,dc(e,0),uc(e,r),ic(e,Je()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Fu,dc(e,0),uc(e,r),ic(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:_c(e,qu,Wu);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=Bu+500-Je())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,qu,Wu),t);break}_c(e,qu,Wu);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Eu(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,qu,Wu),r);break}_c(e,qu,Wu);break;default:throw Error(a(329))}}}return ic(e,Je()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Vu;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=qu,qu=n,null!==t&&sc(t)),e}function sc(e){null===qu?qu=e:qu.push.apply(qu,e)}function uc(e,t){for(t&=~Uu,t&=~ju,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Au))throw Error(a(327));xc();var t=ft(e,0);if(0===(1&t))return ic(e,Je()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Fu,dc(e,0),uc(e,t),ic(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,qu,Wu),ic(e,Je()),null}function lc(e,t){var n=Au;Au|=1;try{return e(t)}finally{0===(Au=n)&&(zu=Je()+500,Ui&&Bi())}}function hc(e){null!==$u&&0===$u.tag&&0===(6&Au)&&xc();var t=Au;Au|=1;var n=Cu.transition,r=kt;try{if(Cu.transition=null,kt=1,e)return e()}finally{kt=r,Cu.transition=n,0===(6&(Au=t))&&Bi()}}function fc(){Ou=Du.current,Ei(Du)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Pu)for(n=Pu.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:io(),Ei(Ai),Ei(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(so);break;case 10:_a(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Nu=e,Pu=e=Dc(e.current,null),Ru=Ou=t,Lu=0,Fu=null,Uu=ju=Mu=0,qu=Vu=null,null!==Ta){for(t=0;t<Ta.length;t++)if(null!==(r=(n=Ta[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ta=null}return e}function pc(e,t){for(;;){var n=Pu;try{if(wa(),ho.current=os,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,mo=yo=vo=null,ko=!1,bo=0,Iu.current=null,null===n||null===n.return){Lu=1,Fu=t,Pu=null;break}e:{var o=e,s=n.return,u=n,c=t;if(t=Ru,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,h=u,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ms(s);if(null!==p){p.flags&=-257,gs(p,s,u,0,t),1&p.mode&&ys(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){ys(o,l,t),yc();break e}c=Error(a(426))}else if(ia&&1&u.mode){var m=ms(s);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gs(m,s,u,0,t),pa(ls(c,u));break e}}o=c=ls(c,u),4!==Lu&&(Lu=2),null===Vu?Vu=[o]:Vu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Fa(o,ps(0,c,t));break e;case 1:u=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Gu||!Gu.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Fa(o,vs(o,u,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(b){t=b,Pu===n&&null!==n&&(Pu=n=n.return);continue}break}}function vc(){var e=Tu.current;return Tu.current=os,null===e?os:e}function yc(){0!==Lu&&3!==Lu&&2!==Lu||(Lu=4),null===Nu||0===(268435455&Mu)&&0===(268435455&ju)||uc(Nu,Ru)}function mc(e,t){var n=Au;Au|=2;var r=vc();for(Nu===e&&Ru===t||(Wu=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(wa(),Au=n,Tu.current=r,null!==Pu)throw Error(a(261));return Nu=null,Ru=0,Lu}function gc(){for(;null!==Pu;)bc(Pu)}function kc(){for(;null!==Pu&&!$e();)bc(Pu)}function bc(e){var t=Su(e.alternate,e,Ou);e.memoizedProps=e.pendingProps,null===t?wc(e):Pu=t,Iu.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qs(n,t,Ou)))return void(Pu=n)}else{if(null!==(n=$s(n,t)))return n.flags&=32767,void(Pu=n);if(null===e)return Lu=6,void(Pu=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pu=t);Pu=t=e}while(null!==t);0===Lu&&(Lu=5)}function _c(e,t,n){var r=kt,i=Cu.transition;try{Cu.transition=null,kt=1,function(e,t,n,r){do{xc()}while(null!==$u);if(0!==(6&Au))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Nu&&(Pu=Nu=null,Ru=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qu||(Qu=!0,Nc(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cu.transition,Cu.transition=null;var s=kt;kt=1;var u=Au;Au|=4,Iu.current=null,function(e,t){if(ei=Wt,dr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,u=-1,c=-1,l=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(u=s+i),f!==o||0!==r&&3!==f.nodeType||(c=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++l===i&&(u=s),d===o&&++h===r&&(c=s),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Zs=t;null!==Zs;)if(e=(t=Zs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zs=e;else for(;null!==Zs;){t=Zs;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Ec(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zs=e;break}Zs=t.return}v=nu,nu=!1}(e,n),mu(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,ku(n,e,i),Ye(),Au=u,kt=s,Cu.transition=o}else e.current=n;if(Qu&&(Qu=!1,$u=e,Yu=i),o=e.pendingLanes,0===o&&(Gu=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hu)throw Hu=!1,e=Ku,Ku=null,e;0!==(1&Yu)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===Xu?Ju++:(Ju=0,Xu=e):Ju=0,Bi()}(e,t,n,r)}finally{Cu.transition=i,kt=r}return null}function xc(){if(null!==$u){var e=bt(Yu),t=Cu.transition,n=kt;try{if(Cu.transition=null,kt=16>e?16:e,null===$u)var r=!1;else{if(e=$u,$u=null,Yu=0,0!==(6&Au))throw Error(a(331));var i=Au;for(Au|=4,Zs=e.current;null!==Zs;){var o=Zs,s=o.child;if(0!==(16&Zs.flags)){var u=o.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for(Zs=l;null!==Zs;){var h=Zs;switch(h.tag){case 0:case 11:case 15:ru(8,h,o)}var f=h.child;if(null!==f)f.return=h,Zs=f;else for(;null!==Zs;){var d=(h=Zs).sibling,p=h.return;if(ou(h),h===l){Zs=null;break}if(null!==d){d.return=p,Zs=d;break}Zs=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Zs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Zs=s;else e:for(;null!==Zs;){if(0!==(2048&(o=Zs).flags))switch(o.tag){case 0:case 11:case 15:ru(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zs=g;break e}Zs=o.return}}var k=e.current;for(Zs=k;null!==Zs;){var b=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Zs=b;else e:for(s=k;null!==Zs;){if(0!==(2048&(u=Zs).flags))try{switch(u.tag){case 0:case 11:case 15:iu(9,u)}}catch(_){Ec(u,u.return,_)}if(u===s){Zs=null;break e}var w=u.sibling;if(null!==w){w.return=u.return,Zs=w;break e}Zs=u.return}}if(Au=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Cu.transition=t}}return!1}function Sc(e,t,n){e=Da(e,t=ps(0,t=ls(n,t),1),1),t=tc(),null!==e&&(mt(e,1,t),ic(e,t))}function Ec(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gu||!Gu.has(r))){t=Da(t,e=vs(t,e=ls(n,e),1),1),e=tc(),null!==t&&(mt(t,1,e),ic(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Nu===e&&(Ru&n)===n&&(4===Lu||3===Lu&&(130023424&Ru)===Ru&&500>Je()-Bu?dc(e,0):Uu|=n),ic(e,t)}function Ic(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Aa(e,t))&&(mt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ic(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ic(e,n)}function Nc(e,t){return Ge(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Pc(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Oc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case x:return Fc(n.children,i,o,t);case S:s=8,i|=8;break;case E:return(e=Rc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case A:return(e=Rc(13,n,t,i)).elementType=A,e.lanes=o,e;case N:return(e=Rc(19,n,t,i)).elementType=N,e.lanes=o,e;case O:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:s=10;break e;case I:s=9;break e;case C:s=11;break e;case P:s=14;break e;case R:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Rc(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Fc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function jc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function qc(e,t,n,r,i,a,o,s,u){return e=new Vc(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Rc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pa(a),e}function Bc(e){if(!e)return Ii;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function zc(e,t,n,r,i,a,o,s,u){return(e=qc(n,r,!0,e,0,a,0,s,u)).context=Bc(null),n=e.current,(a=Oa(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Da(n,a,i),e.current.lanes=i,mt(e,i,r),ic(e,r),e}function Wc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Da(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}Su=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Ns(t),da();break;case 5:ao(t);break;case 1:Ri(t.type)&&Fi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?js(e,t,n):(Ti(so,1&so.current),null!==(e=Hs(e,t,n))?e.sibling:null);Ti(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,n)}return Hs(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ws(e,t),e=t.pendingProps;var i=Pi(t,Ci.current);Sa(t,n),i=So(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Fi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Pa(t),i.updater=qa,t.stateNode=i,i._reactInternals=t,Ha(t,r,e,n),t=As(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),ws(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ws(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Is(null,t,r,e,n);break e;case 1:t=Cs(null,t,r,e,n);break e;case 11:t=_s(null,t,r,e,n);break e;case 14:t=xs(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Is(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cs(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Ns(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ra(e,t),Ma(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ps(e,t,r,n,i=ls(Error(a(423)),t));break e}if(r!==i){t=Ps(e,t,r,n,i=ls(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ja(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Hs(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Ts(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&ca(t),null;case 13:return js(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ya(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_s(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ti(ma,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ai.current){t=Hs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Oa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var h=(l=l.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),xa(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Sa(t,n),r=r(i=Ea(i)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),xs(e,t,r,i=ya(r.type,i),n);case 15:return Ss(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),Ws(e,t),t.tag=1,Ri(r)?(e=!0,Fi(t)):e=!1,Sa(t,n),za(t,r,i),Ha(t,r,i,n),As(null,t,r,!0,e,n);case 19:return zs(e,t,n);case 22:return Es(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Hc(o);s.call(e)}}Wc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Hc(o);a.call(e)}}var o=zc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),hc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Hc(u);s.call(e)}}var u=qc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=u,e[pi]=u.current,Br(8===e.nodeType?e.parentNode:e),hc((function(){Wc(t,u,n,r)})),u}(n,t,e,i,r);return Hc(o)}Yc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wc(e,t,null,null)},Yc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){Wc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,Je()),0===(6&Au)&&(zu=Je()+500,Bi()))}break;case 13:hc((function(){var t=Aa(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Gc(e,1)}},_t=function(e){if(13===e.tag){var t=Aa(e,134217728);if(null!==t)rc(t,e,134217728,tc());Gc(e,134217728)}},xt=function(e){if(13===e.tag){var t=nc(e),n=Aa(e,t);if(null!==n)rc(n,e,t,tc());Gc(e,t)}},St=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));G(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=lc,Ae=hc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Te,Ie,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=qc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(hc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},372:function(e,t){"use strict";var n=60103,r=60106,i=60107,a=60108,o=60114,s=60109,u=60110,c=60112,l=60113,h=60120,f=60115,d=60116,p=60121,v=60122,y=60117,m=60129,g=60131;if("function"===typeof Symbol&&Symbol.for){var k=Symbol.for;n=k("react.element"),r=k("react.portal"),i=k("react.fragment"),a=k("react.strict_mode"),o=k("react.profiler"),s=k("react.provider"),u=k("react.context"),c=k("react.forward_ref"),l=k("react.suspense"),h=k("react.suspense_list"),f=k("react.memo"),d=k("react.lazy"),p=k("react.block"),v=k("react.server.block"),y=k("react.fundamental"),m=k("react.debug_trace_mode"),g=k("react.legacy_hidden")}function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case o:case a:case l:case h:return e;default:switch(e=e&&e.$$typeof){case u:case c:case d:case f:case s:return e;default:return t}}case r:return t}}}t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===o||e===m||e===a||e===l||e===h||e===g||"object"===typeof e&&null!==e&&(e.$$typeof===d||e.$$typeof===f||e.$$typeof===s||e.$$typeof===u||e.$$typeof===c||e.$$typeof===y||e.$$typeof===p||e[0]===v)},t.typeOf=b},441:function(e,t,n){"use strict";e.exports=n(372)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:s.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=k.prototype=new g;b.constructor=k,v(b,m.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:x.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===a?"."+C(u,0):a,w(o)?(i="",null!=e&&(i=e.replace(I,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+e)),t.push(o)),1;if(u=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(s=e[c],c);u+=A(s,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=A(s=s.value,t,i,l=a+C(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function N(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},O={transition:null},D={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:O,ReactCurrentOwner:x};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)_.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];i.children=u}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],c=s+1,l=e[c];if(0>a(u,n))c<i&&0>a(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[s]=n,r=s);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],h=1,f=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(y=!1,b(e),!v)if(null!==r(c))v=!0,O(_);else{var t=r(l);null!==t&&D(w,t.startTime-e)}}function _(e,n){v=!1,y&&(y=!1,g(T),T=-1),p=!0;var a=d;try{for(b(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!A());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var s=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(c)&&i(c),b(n)}else i(c);f=r(c)}if(null!==f)var u=!0;else{var h=r(l);null!==h&&D(w,h.startTime-n),u=!1}return u}finally{f=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,S=!1,E=null,T=-1,I=5,C=-1;function A(){return!(t.unstable_now()-C<I)}function N(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?x():(S=!1,E=null)}}else S=!1}if("function"===typeof k)x=function(){k(N)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=N,x=function(){R.postMessage(null)}}else x=function(){m(N,0)};function O(e){E=e,S||(S=!0,x())}function D(e,n){T=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,O(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(T),T=-1):y=!0,D(w,a-o))):(e.sortIndex=s,n(c,e),v||p||(v=!0,O(_))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},613:function(e){e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),u=0;u<a.length;u++){var c=a[u];if(!s(c))return!1;var l=e[c],h=t[c];if(!1===(i=n?n.call(r,l,h,c):void 0)||void 0===i&&l!==h)return!1}return!0}},564:function(e){var t=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['\u2019](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,n=function(e){return e.match(t)||[]},r=function(e){return e[0].toUpperCase()+e.slice(1)},i=function(e,t){return n(e).join(t).toLowerCase()},a=function(e){return n(e).reduce((function(e,t){return"".concat(e).concat(e?t[0].toUpperCase()+t.slice(1).toLowerCase():t.toLowerCase())}),"")};e.exports={words:n,upperFirst:r,camelCase:a,pascalCase:function(e){return r(a(e))},snakeCase:function(e){return i(e,"_")},kebabCase:function(e){return i(e,"-")},sentenceCase:function(e){return r(i(e," "))},titleCase:function(e){return n(e).map(r).join(" ")}}},514:function(e){function t(e,t){var n=e.length,r=new Array(n),i={},a=n,o=function(e){for(var t=new Map,n=0,r=e.length;n<r;n++){var i=e[n];t.has(i[0])||t.set(i[0],new Set),t.has(i[1])||t.set(i[1],new Set),t.get(i[0]).add(i[1])}return t}(t),s=function(e){for(var t=new Map,n=0,r=e.length;n<r;n++)t.set(e[n],n);return t}(e);for(t.forEach((function(e){if(!s.has(e[0])||!s.has(e[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")}));a--;)i[a]||u(e[a],a,new Set);return r;function u(e,t,a){if(a.has(e)){var c;try{c=", node was:"+JSON.stringify(e)}catch(f){c=""}throw new Error("Cyclic dependency"+c)}if(!s.has(e))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(e));if(!i[t]){i[t]=!0;var l=o.get(e)||new Set;if(t=(l=Array.from(l)).length){a.add(e);do{var h=l[--t];u(h,s.get(h),a)}while(t);a.delete(e)}r[--n]=e}}}e.exports=function(e){return t(function(e){for(var t=new Set,n=0,r=e.length;n<r;n++){var i=e[n];t.add(i[0]),t.add(i[1])}return Array.from(t)}(e),e)},e.exports.array=t}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".f5079acd.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="cacarrot:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var s,u;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var h=c[l];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+a){s=h;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[i];var f=function(t,n){s.onerror=s.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/Cacarrot/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],s=r[1],u=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(u)u(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkcacarrot=self.webpackChunkcacarrot||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),n.nc=void 0,function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return kr},SDK_VERSION:function(){return Vi},_DEFAULT_ENTRY_NAME:function(){return Ii},_addComponent:function(){return Pi},_addOrOverwriteComponent:function(){return Ri},_apps:function(){return Ai},_clearComponents:function(){return Fi},_components:function(){return Ni},_getProvider:function(){return Di},_registerComponent:function(){return Oi},_removeServiceInstance:function(){return Li},deleteApp:function(){return Wi},getApp:function(){return Bi},getApps:function(){return zi},initializeApp:function(){return qi},onLog:function(){return Gi},registerVersion:function(){return Ki},setLogLevel:function(){return Qi}});var t={};n.r(t),n.d(t,{Decoder:function(){return TH},Encoder:function(){return EH},PacketType:function(){return xH},protocol:function(){return SH}});var r,i=n(791),a=n(250);function o(e){if(Array.isArray(e))return e}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){return o(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||u(e,t)||c()}function h(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function f(e){return function(e){if(Array.isArray(e))return s(e)}(e)||h(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function v(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===p(t)?t:String(t)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function m(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function k(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function w(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){var t=w();return function(){var n,r=b(e);if(t){var i=b(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}(this,n)}}function S(e,t,n){return S=w()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&g(i,n.prototype),i},S.apply(null,arguments)}function E(e){var t="function"===typeof Map?new Map:void 0;return E=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return S(e,arguments,b(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),g(n,e)},E(e)}function T(e){return o(e)||h(e)||u(e)||c()}function I(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));var A,N="popstate";function P(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function R(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function O(e,t){return{usr:e.state,key:e.key,idx:t}}function D(e,t,n,r){return void 0===n&&(n=null),C({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?F(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function L(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function F(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function M(e,t,n,i){void 0===i&&(i={});var a=i,o=a.window,s=void 0===o?document.defaultView:o,u=a.v5Compat,c=void 0!==u&&u,l=s.history,h=r.Pop,f=null,d=p();function p(){return(l.state||{idx:null}).idx}function v(){h=r.Pop;var e=p(),t=null==e?null:e-d;d=e,f&&f({action:h,location:m.location,delta:t})}function y(e){var t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:L(e);return P(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==d&&(d=0,l.replaceState(C({},l.state,{idx:d}),""));var m={get action(){return h},get location(){return e(s,l)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(N,v),f=e,function(){s.removeEventListener(N,v),f=null}},createHref:function(e){return t(s,e)},createURL:y,encodeLocation:function(e){var t=y(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){h=r.Push;var i=D(m.location,e,t);n&&n(i,e);var a=O(i,d=p()+1),o=m.createHref(i);try{l.pushState(a,"",o)}catch(Ma){s.location.assign(o)}c&&f&&f({action:h,location:m.location,delta:1})},replace:function(e,t){h=r.Replace;var i=D(m.location,e,t);n&&n(i,e);var a=O(i,d=p()),o=m.createHref(i);l.replaceState(a,"",o),c&&f&&f({action:h,location:m.location,delta:0})},go:function(e){return l.go(e)}};return m}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(A||(A={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function j(e,t,n){void 0===n&&(n="/");var r=X(("string"===typeof t?F(t):t).pathname||"/",n);if(null==r)return null;var i=U(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=$(i[o],J(r));return a}function U(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(P(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var s=ne([r,o.relativePath]),u=n.concat(o);e.children&&e.children.length>0&&(P(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),U(e.children,t,u,s)),(null!=e.path||e.index)&&t.push({path:s,score:Q(s,e.index),routesMeta:u})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=I(V(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(s){a.e(s)}finally{a.f()}}else i(e,t)})),t}function V(e){var t=e.split("/");if(0===t.length)return[];var n=T(t),r=n[0],i=n.slice(1),a=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===i.length)return a?[o,""]:[o];var s=V(i.join("/")),u=[];return u.push.apply(u,f(s.map((function(e){return""===e?o:[o,e].join("/")})))),a&&u.push.apply(u,f(s)),u.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var q=/^:\w+$/,B=3,z=2,W=1,H=10,K=-2,G=function(e){return"*"===e};function Q(e,t){var n=e.split("/"),r=n.length;return n.some(G)&&(r+=K),t&&(r+=z),n.filter((function(e){return!G(e)})).reduce((function(e,t){return e+(q.test(t)?B:""===t?W:H)}),r)}function $(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=Y({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},c);if(!l)return null;Object.assign(r,l.params);var h=s.route;a.push({params:r,pathname:ne([i,l.pathname]),pathnameBase:re(ne([i,l.pathnameBase])),route:h}),"/"!==l.pathnameBase&&(i=ne([i,l.pathnameBase]))}return a}function Y(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);R("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=l(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var s=o[0],u=s.replace(/(.)\/+$/,"$1"),c=o.slice(1),h=a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";u=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(Ma){return R(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+Ma+")."),e}}(c[n]||"",t),e}),{});return{params:h,pathname:s,pathnameBase:u,pattern:e}}function J(e){try{return decodeURI(e)}catch(Ma){return R(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+Ma+")."),e}}function X(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function Z(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function ee(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function te(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=F(e):(P(!(i=C({},e)).pathname||!i.pathname.includes("?"),Z("?","pathname","search",i)),P(!i.pathname||!i.pathname.includes("#"),Z("#","pathname","hash",i)),P(!i.search||!i.search.includes("#"),Z("#","search","hash",i)));var a,o=""===e||""===i.pathname,s=o?"/":i.pathname;if(r||null==s)a=n;else{var u=t.length-1;if(s.startsWith("..")){for(var c=s.split("/");".."===c[0];)c.shift(),u-=1;i.pathname=c.join("/")}a=u>=0?t[u]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?F(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:ie(a),hash:ae(s)}}(i,a),h=s&&"/"!==s&&s.endsWith("/"),f=(o||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!h&&!f||(l.pathname+="/"),l}var ne=function(e){return e.join("/").replace(/\/\/+/g,"/")},re=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},ie=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},ae=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},oe=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n)}(E(Error));function se(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var ue=["post","put","patch","delete"],ce=(new Set(ue),["get"].concat(ue));new Set(ce),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;Symbol("deferred");function le(){return le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},le.apply(this,arguments)}var he=i.createContext(null);var fe=i.createContext(null);var de=i.createContext(null);var pe=i.createContext(null);var ve=i.createContext(null);var ye=i.createContext({outlet:null,matches:[],isDataRoute:!1});var me=i.createContext(null);function ge(){return null!=i.useContext(ve)}function ke(){return ge()||P(!1),i.useContext(ve).location}function be(e){i.useContext(pe).static||i.useLayoutEffect(e)}function we(){return i.useContext(ye).isDataRoute?function(){var e=Pe(Ee.UseNavigateStable).router,t=Oe(Te.UseNavigateStable),n=i.useRef(!1);be((function(){n.current=!0}));var r=i.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,le({fromRouteId:t},i)))}),[e,t]);return r}():function(){ge()||P(!1);var e=i.useContext(he),t=i.useContext(pe),n=t.basename,r=t.navigator,a=i.useContext(ye).matches,o=ke().pathname,s=JSON.stringify(ee(a).map((function(e){return e.pathnameBase}))),u=i.useRef(!1);be((function(){u.current=!0}));var c=i.useCallback((function(t,i){if(void 0===i&&(i={}),u.current)if("number"!==typeof t){var a=te(t,JSON.parse(s),o,"path"===i.relative);null==e&&"/"!==n&&(a.pathname="/"===a.pathname?n:ne([n,a.pathname])),(i.replace?r.replace:r.push)(a,i.state,i)}else r.go(t)}),[n,r,s,o,e]);return c}()}var _e=i.createContext(null);function xe(e,t,n){ge()||P(!1);var a,o=i.useContext(pe).navigator,s=i.useContext(ye).matches,u=s[s.length-1],c=u?u.params:{},l=(u&&u.pathname,u?u.pathnameBase:"/"),h=(u&&u.route,ke());if(t){var f,d="string"===typeof t?F(t):t;"/"===l||(null==(f=d.pathname)?void 0:f.startsWith(l))||P(!1),a=d}else a=h;var p=a.pathname||"/",v=j(e,{pathname:"/"===l?p:p.slice(l.length)||"/"});var y=Ne(v&&v.map((function(e){return Object.assign({},e,{params:Object.assign({},c,e.params),pathname:ne([l,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:ne([l,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),s,n);return t&&y?i.createElement(ve.Provider,{value:{location:le({pathname:"/",search:"",hash:"",state:null,key:"default"},a),navigationType:r.Pop}},y):y}function Se(){var e=function(){var e,t=i.useContext(me),n=Re(Te.UseRouteError),r=Oe(Te.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=se(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:a},n):null,null)}var Ee,Te,Ie=i.createElement(Se,null),Ce=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},r}return m(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?i.createElement(ye.Provider,{value:this.props.routeContext},i.createElement(me.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),n}(i.Component);function Ae(e){var t=e.routeContext,n=e.match,r=e.children,a=i.useContext(he);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(ye.Provider,{value:t},r)}function Ne(e,t,n){var r;if(void 0===t&&(t=[]),void 0===n&&(n=null),null==e){var a;if(null==(a=n)||!a.errors)return null;e=n.matches}var o=e,s=null==(r=n)?void 0:r.errors;if(null!=s){var u=o.findIndex((function(e){return e.route.id&&(null==s?void 0:s[e.route.id])}));u>=0||P(!1),o=o.slice(0,Math.min(o.length,u+1))}return o.reduceRight((function(e,r,a){var u=r.route.id?null==s?void 0:s[r.route.id]:null,c=null;n&&(c=r.route.errorElement||Ie);var l=t.concat(o.slice(0,a+1)),h=function(){var t;return t=u?c:r.route.Component?i.createElement(r.route.Component,null):r.route.element?r.route.element:e,i.createElement(Ae,{match:r,routeContext:{outlet:e,matches:l,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===a)?i.createElement(Ce,{location:n.location,revalidation:n.revalidation,component:c,error:u,children:h(),routeContext:{outlet:null,matches:l,isDataRoute:!0}}):h()}),null)}function Pe(e){var t=i.useContext(he);return t||P(!1),t}function Re(e){var t=i.useContext(fe);return t||P(!1),t}function Oe(e){var t=function(e){var t=i.useContext(ye);return t||P(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||P(!1),n.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"}(Ee||(Ee={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"}(Te||(Te={}));var De;function Le(e){var t=e.to,n=e.replace,r=e.state,a=e.relative;ge()||P(!1);var o=i.useContext(ye).matches,s=ke().pathname,u=we(),c=te(t,ee(o).map((function(e){return e.pathnameBase})),s,"path"===a),l=JSON.stringify(c);return i.useEffect((function(){return u(JSON.parse(l),{replace:n,state:r,relative:a})}),[u,l,a,n,r]),null}function Fe(e){return function(e){var t=i.useContext(ye).outlet;return t?i.createElement(_e.Provider,{value:e},t):t}(e.context)}function Me(e){P(!1)}function je(e){var t=e.basename,n=void 0===t?"/":t,a=e.children,o=void 0===a?null:a,s=e.location,u=e.navigationType,c=void 0===u?r.Pop:u,l=e.navigator,h=e.static,f=void 0!==h&&h;ge()&&P(!1);var d=n.replace(/^\/*/,"/"),p=i.useMemo((function(){return{basename:d,navigator:l,static:f}}),[d,l,f]);"string"===typeof s&&(s=F(s));var v=s,y=v.pathname,m=void 0===y?"/":y,g=v.search,k=void 0===g?"":g,b=v.hash,w=void 0===b?"":b,_=v.state,x=void 0===_?null:_,S=v.key,E=void 0===S?"default":S,T=i.useMemo((function(){var e=X(m,d);return null==e?null:{location:{pathname:e,search:k,hash:w,state:x,key:E},navigationType:c}}),[d,m,k,w,x,E,c]);return null==T?null:i.createElement(pe.Provider,{value:p},i.createElement(ve.Provider,{children:o,value:T}))}function Ue(e){var t=e.children,n=e.location;return function(e,t){return xe(e,t)}(qe(t),n)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(De||(De={}));var Ve=new Promise((function(){}));i.Component;function qe(e,t){void 0===t&&(t=[]);var n=[];return i.Children.forEach(e,(function(e,r){if(i.isValidElement(e)){var a=[].concat(f(t),[r]);if(e.type!==i.Fragment){e.type!==Me&&P(!1),e.props.index&&e.props.children&&P(!1);var o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=qe(e.props.children,a)),n.push(o)}else n.push.apply(n,qe(e.props.children,a))}})),n}var Be=n(441),ze=n(613),We=n.n(ze);var He=function(e){function t(e,r,u,c,f){for(var d,p,v,y,b,_=0,x=0,S=0,E=0,T=0,R=0,D=v=d=0,F=0,M=0,j=0,U=0,V=u.length,q=V-1,B="",z="",W="",H="";F<V;){if(p=u.charCodeAt(F),F===q&&0!==x+E+S+_&&(0!==x&&(p=47===x?10:47),E=S=_=0,V++,q++),0===x+E+S+_){if(F===q&&(0<M&&(B=B.replace(h,"")),0<B.trim().length)){switch(p){case 32:case 9:case 59:case 13:case 10:break;default:B+=u.charAt(F)}p=59}switch(p){case 123:for(d=(B=B.trim()).charCodeAt(0),v=1,U=++F;F<V;){switch(p=u.charCodeAt(F)){case 123:v++;break;case 125:v--;break;case 47:switch(p=u.charCodeAt(F+1)){case 42:case 47:e:{for(D=F+1;D<q;++D)switch(u.charCodeAt(D)){case 47:if(42===p&&42===u.charCodeAt(D-1)&&F+2!==D){F=D+1;break e}break;case 10:if(47===p){F=D+1;break e}}F=D}}break;case 91:p++;case 40:p++;case 34:case 39:for(;F++<q&&u.charCodeAt(F)!==p;);}if(0===v)break;F++}if(v=u.substring(U,F),0===d&&(d=(B=B.replace(l,"").trim()).charCodeAt(0)),64===d){switch(0<M&&(B=B.replace(h,"")),p=B.charCodeAt(1)){case 100:case 109:case 115:case 45:M=r;break;default:M=P}if(U=(v=t(r,M,v,p,f+1)).length,0<O&&(b=s(3,v,M=n(P,B,j),r,C,I,U,p,f,c),B=M.join(""),void 0!==b&&0===(U=(v=b.trim()).length)&&(p=0,v="")),0<U)switch(p){case 115:B=B.replace(w,o);case 100:case 109:case 45:v=B+"{"+v+"}";break;case 107:v=(B=B.replace(m,"$1 $2"))+"{"+v+"}",v=1===N||2===N&&a("@"+v,3)?"@-webkit-"+v+"@"+v:"@"+v;break;default:v=B+v,112===c&&(z+=v,v="")}else v=""}else v=t(r,n(r,B,j),v,c,f+1);W+=v,v=j=M=D=d=0,B="",p=u.charCodeAt(++F);break;case 125:case 59:if(1<(U=(B=(0<M?B.replace(h,""):B).trim()).length))switch(0===D&&(d=B.charCodeAt(0),45===d||96<d&&123>d)&&(U=(B=B.replace(" ",":")).length),0<O&&void 0!==(b=s(1,B,r,e,C,I,z.length,c,f,c))&&0===(U=(B=b.trim()).length)&&(B="\0\0"),d=B.charCodeAt(0),p=B.charCodeAt(1),d){case 0:break;case 64:if(105===p||99===p){H+=B+u.charAt(F);break}default:58!==B.charCodeAt(U-1)&&(z+=i(B,d,p,B.charCodeAt(2)))}j=M=D=d=0,B="",p=u.charCodeAt(++F)}}switch(p){case 13:case 10:47===x?x=0:0===1+d&&107!==c&&0<B.length&&(M=1,B+="\0"),0<O*L&&s(0,B,r,e,C,I,z.length,c,f,c),I=1,C++;break;case 59:case 125:if(0===x+E+S+_){I++;break}default:switch(I++,y=u.charAt(F),p){case 9:case 32:if(0===E+_+x)switch(T){case 44:case 58:case 9:case 32:y="";break;default:32!==p&&(y=" ")}break;case 0:y="\\0";break;case 12:y="\\f";break;case 11:y="\\v";break;case 38:0===E+x+_&&(M=j=1,y="\f"+y);break;case 108:if(0===E+x+_+A&&0<D)switch(F-D){case 2:112===T&&58===u.charCodeAt(F-3)&&(A=T);case 8:111===R&&(A=R)}break;case 58:0===E+x+_&&(D=F);break;case 44:0===x+S+E+_&&(M=1,y+="\r");break;case 34:case 39:0===x&&(E=E===p?0:0===E?p:E);break;case 91:0===E+x+S&&_++;break;case 93:0===E+x+S&&_--;break;case 41:0===E+x+_&&S--;break;case 40:if(0===E+x+_){if(0===d)if(2*T+3*R===533);else d=1;S++}break;case 64:0===x+S+E+_+D+v&&(v=1);break;case 42:case 47:if(!(0<E+_+S))switch(x){case 0:switch(2*p+3*u.charCodeAt(F+1)){case 235:x=47;break;case 220:U=F,x=42}break;case 42:47===p&&42===T&&U+2!==F&&(33===u.charCodeAt(U+2)&&(z+=u.substring(U,F+1)),y="",x=0)}}0===x&&(B+=y)}R=T,T=p,F++}if(0<(U=z.length)){if(M=r,0<O&&(void 0!==(b=s(2,z,M,e,C,I,U,c,f,c))&&0===(z=b).length))return H+z+W;if(z=M.join(",")+"{"+z+"}",0!==N*A){switch(2!==N||a(z,2)||(A=0),A){case 111:z=z.replace(k,":-moz-$1")+z;break;case 112:z=z.replace(g,"::-webkit-input-$1")+z.replace(g,"::-moz-$1")+z.replace(g,":-ms-input-$1")+z}A=0}}return H+z+W}function n(e,t,n){var i=t.trim().split(v);t=i;var a=i.length,o=e.length;switch(o){case 0:case 1:var s=0;for(e=0===o?"":e[0]+" ";s<a;++s)t[s]=r(e,t[s],n).trim();break;default:var u=s=0;for(t=[];s<a;++s)for(var c=0;c<o;++c)t[u++]=r(e[c]+" ",i[s],n).trim()}return t}function r(e,t,n){var r=t.charCodeAt(0);switch(33>r&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(y,"$1"+e.trim());case 58:return e.trim()+t.replace(y,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(y,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function i(e,t,n,r){var o=e+";",s=2*t+3*n+4*r;if(944===s){e=o.indexOf(":",9)+1;var u=o.substring(e,o.length-1).trim();return u=o.substring(0,e).trim()+u+";",1===N||2===N&&a(u,1)?"-webkit-"+u+u:u}if(0===N||2===N&&!a(o,1))return o;switch(s){case 1015:return 97===o.charCodeAt(10)?"-webkit-"+o+o:o;case 951:return 116===o.charCodeAt(3)?"-webkit-"+o+o:o;case 963:return 110===o.charCodeAt(5)?"-webkit-"+o+o:o;case 1009:if(100!==o.charCodeAt(4))break;case 969:case 942:return"-webkit-"+o+o;case 978:return"-webkit-"+o+"-moz-"+o+o;case 1019:case 983:return"-webkit-"+o+"-moz-"+o+"-ms-"+o+o;case 883:if(45===o.charCodeAt(8))return"-webkit-"+o+o;if(0<o.indexOf("image-set(",11))return o.replace(T,"$1-webkit-$2")+o;break;case 932:if(45===o.charCodeAt(4))switch(o.charCodeAt(5)){case 103:return"-webkit-box-"+o.replace("-grow","")+"-webkit-"+o+"-ms-"+o.replace("grow","positive")+o;case 115:return"-webkit-"+o+"-ms-"+o.replace("shrink","negative")+o;case 98:return"-webkit-"+o+"-ms-"+o.replace("basis","preferred-size")+o}return"-webkit-"+o+"-ms-"+o+o;case 964:return"-webkit-"+o+"-ms-flex-"+o+o;case 1023:if(99!==o.charCodeAt(8))break;return"-webkit-box-pack"+(u=o.substring(o.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+o+"-ms-flex-pack"+u+o;case 1005:return d.test(o)?o.replace(f,":-webkit-")+o.replace(f,":-moz-")+o:o;case 1e3:switch(t=(u=o.substring(13).trim()).indexOf("-")+1,u.charCodeAt(0)+u.charCodeAt(t)){case 226:u=o.replace(b,"tb");break;case 232:u=o.replace(b,"tb-rl");break;case 220:u=o.replace(b,"lr");break;default:return o}return"-webkit-"+o+"-ms-"+u+o;case 1017:if(-1===o.indexOf("sticky",9))break;case 975:switch(t=(o=e).length-10,s=(u=(33===o.charCodeAt(t)?o.substring(0,t):o).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|u.charCodeAt(7))){case 203:if(111>u.charCodeAt(8))break;case 115:o=o.replace(u,"-webkit-"+u)+";"+o;break;case 207:case 102:o=o.replace(u,"-webkit-"+(102<s?"inline-":"")+"box")+";"+o.replace(u,"-webkit-"+u)+";"+o.replace(u,"-ms-"+u+"box")+";"+o}return o+";";case 938:if(45===o.charCodeAt(5))switch(o.charCodeAt(6)){case 105:return u=o.replace("-items",""),"-webkit-"+o+"-webkit-box-"+u+"-ms-flex-"+u+o;case 115:return"-webkit-"+o+"-ms-flex-item-"+o.replace(x,"")+o;default:return"-webkit-"+o+"-ms-flex-line-pack"+o.replace("align-content","").replace(x,"")+o}break;case 973:case 989:if(45!==o.charCodeAt(3)||122===o.charCodeAt(4))break;case 931:case 953:if(!0===E.test(e))return 115===(u=e.substring(e.indexOf(":")+1)).charCodeAt(0)?i(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):o.replace(u,"-webkit-"+u)+o.replace(u,"-moz-"+u.replace("fill-",""))+o;break;case 962:if(o="-webkit-"+o+(102===o.charCodeAt(5)?"-ms-"+o:"")+o,211===n+r&&105===o.charCodeAt(13)&&0<o.indexOf("transform",10))return o.substring(0,o.indexOf(";",27)+1).replace(p,"$1-webkit-$2")+o}return o}function a(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),D(2!==t?r:r.replace(S,"$1"),n,t)}function o(e,t){var n=i(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(_," or ($1)").substring(4):"("+t+")"}function s(e,t,n,r,i,a,o,s,u,l){for(var h,f=0,d=t;f<O;++f)switch(h=R[f].call(c,e,d,n,r,i,a,o,s,u,l)){case void 0:case!1:case!0:case null:break;default:d=h}if(d!==t)return d}function u(e){return void 0!==(e=e.prefix)&&(D=null,e?"function"!==typeof e?N=1:(N=2,D=e):N=0),u}function c(e,n){var r=e;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<O){var i=s(-1,n,r,r,C,I,0,0,0,0);void 0!==i&&"string"===typeof i&&(n=i)}var a=t(P,r,n,0,0);return 0<O&&(void 0!==(i=s(-2,a,r,r,C,I,a.length,0,0,0))&&(a=i)),"",A=0,I=C=1,a}var l=/^\0+/g,h=/[\0\r\f]/g,f=/: */g,d=/zoo|gra/,p=/([,: ])(transform)/g,v=/,\r+?/g,y=/([\t\r\n ])*\f?&/g,m=/@(k\w+)\s*(\S*)\s*/,g=/::(place)/g,k=/:(read-only)/g,b=/[svh]\w+-[tblr]{2}/,w=/\(\s*(.*)\s*\)/g,_=/([\s\S]*?);/g,x=/-self|flex-/g,S=/[^]*?(:[rp][el]a[\w-]+)[^]*/,E=/stretch|:\s*\w+\-(?:conte|avail)/,T=/([^-])(image-set\()/,I=1,C=1,A=0,N=1,P=[],R=[],O=0,D=null,L=0;return c.use=function e(t){switch(t){case void 0:case null:O=R.length=0;break;default:if("function"===typeof t)R[O++]=t;else if("object"===typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else L=0|!!t}return e},c.set=u,void 0!==e&&u(e),c},Ke={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function Ge(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var Qe=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,$e=Ge((function(e){return Qe.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),Ye=n(110),Je=n.n(Ye);function Xe(){return(Xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Ze=function(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n},et=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,Be.typeOf)(e)},tt=Object.freeze([]),nt=Object.freeze({});function rt(e){return"function"==typeof e}function it(e){return e.displayName||e.name||"Component"}function at(e){return e&&"string"==typeof e.styledComponentId}var ot="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&({NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",st="undefined"!=typeof window&&"HTMLElement"in window,ut=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&(void 0!=={NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:void 0!=={NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY)));function ct(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var lt=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)(i<<=1)<0&&ct(16,""+e);this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var a=r;a<i;a++)this.groupSizes[a]=0}for(var o=this.indexOfGroup(e+1),s=0,u=t.length;s<u;s++)this.tag.insertRule(o,t[s])&&(this.groupSizes[e]++,o++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,a=r;a<i;a++)t+=this.tag.getRule(a)+"/*!sc*/\n";return t},e}(),ht=new Map,ft=new Map,dt=1,pt=function(e){if(ht.has(e))return ht.get(e);for(;ft.has(dt);)dt++;var t=dt++;return ht.set(e,t),ft.set(t,e),t},vt=function(e){return ft.get(e)},yt=function(e,t){t>=dt&&(dt=t+1),ht.set(e,t),ft.set(t,e)},mt="style["+ot+'][data-styled-version="5.3.10"]',gt=new RegExp("^"+ot+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),kt=function(e,t,n){for(var r,i=n.split(","),a=0,o=i.length;a<o;a++)(r=i[a])&&e.registerName(t,r)},bt=function(e,t){for(var n=(t.textContent||"").split("/*!sc*/\n"),r=[],i=0,a=n.length;i<a;i++){var o=n[i].trim();if(o){var s=o.match(gt);if(s){var u=0|parseInt(s[1],10),c=s[2];0!==u&&(yt(c,u),kt(e,c,s[3]),e.getTag().insertRules(u,r)),r.length=0}else r.push(o)}}},wt=function(){return n.nc},_t=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var r=t[n];if(r&&1===r.nodeType&&r.hasAttribute(ot))return r}}(n),a=void 0!==i?i.nextSibling:null;r.setAttribute(ot,"active"),r.setAttribute("data-styled-version","5.3.10");var o=wt();return o&&r.setAttribute("nonce",o),n.insertBefore(r,a),r},xt=function(){function e(e){var t=this.element=_t(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}ct(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),St=function(){function e(e){var t=this.element=_t(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),r=this.nodes[e];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),Et=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),Tt=st,It={isServer:!st,useCSSOMInjection:!ut},Ct=function(){function e(e,t,n){void 0===e&&(e=nt),void 0===t&&(t={}),this.options=Xe({},It,{},e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&st&&Tt&&(Tt=!1,function(e){for(var t=document.querySelectorAll(mt),n=0,r=t.length;n<r;n++){var i=t[n];i&&"active"!==i.getAttribute(ot)&&(bt(e,i),i.parentNode&&i.parentNode.removeChild(i))}}(this))}e.registerId=function(e){return pt(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(Xe({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(n=(t=this.options).isServer,r=t.useCSSOMInjection,i=t.target,e=n?new Et(i):r?new xt(i):new St(i),new lt(e)));var e,t,n,r,i},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(pt(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(pt(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(pt(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=0;i<n;i++){var a=vt(i);if(void 0!==a){var o=e.names.get(a),s=t.getGroup(i);if(o&&s&&o.size){var u=ot+".g"+i+'[id="'+a+'"]',c="";void 0!==o&&o.forEach((function(e){e.length>0&&(c+=e+",")})),r+=""+s+u+'{content:"'+c+'"}/*!sc*/\n'}}}return r}(this)},e}(),At=/(a)(d)/gi,Nt=function(e){return String.fromCharCode(e+(e>25?39:97))};function Pt(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=Nt(t%52)+n;return(Nt(t%52)+n).replace(At,"$1-$2")}var Rt=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},Ot=function(e){return Rt(5381,e)};function Dt(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(rt(n)&&!at(n))return!1}return!0}var Lt=Ot("5.3.10"),Ft=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&Dt(e),this.componentId=t,this.baseHash=Rt(Lt,t),this.baseStyle=n,Ct.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.componentId,i=[];if(this.baseStyle&&i.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(r,this.staticRulesId))i.push(this.staticRulesId);else{var a=en(this.rules,e,t,n).join(""),o=Pt(Rt(this.baseHash,a)>>>0);if(!t.hasNameForId(r,o)){var s=n(a,"."+o,void 0,r);t.insertRules(r,o,s)}i.push(o),this.staticRulesId=o}else{for(var u=this.rules.length,c=Rt(this.baseHash,n.hash),l="",h=0;h<u;h++){var f=this.rules[h];if("string"==typeof f)l+=f;else if(f){var d=en(f,e,t,n),p=Array.isArray(d)?d.join(""):d;c=Rt(c,p+h),l+=p}}if(l){var v=Pt(c>>>0);if(!t.hasNameForId(r,v)){var y=n(l,"."+v,void 0,r);t.insertRules(r,v,y)}i.push(v)}}return i.join(" ")},e}(),Mt=/^\s*\/\/.*$/gm,jt=[":","[",".","#"];function Ut(e){var t,n,r,i,a=void 0===e?nt:e,o=a.options,s=void 0===o?nt:o,u=a.plugins,c=void 0===u?tt:u,l=new He(s),h=[],f=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,r,i,a,o,s,u,c,l,h){switch(n){case 1:if(0===l&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===c)return r+"/*|*/";break;case 3:switch(c){case 102:case 112:return e(i[0]+r),"";default:return r+(0===h?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(t)}}}((function(e){h.push(e)})),d=function(e,r,a){return 0===r&&-1!==jt.indexOf(a[n.length])||a.match(i)?e:"."+t};function p(e,a,o,s){void 0===s&&(s="&");var u=e.replace(Mt,""),c=a&&o?o+" "+a+" { "+u+" }":u;return t=s,n=a,r=new RegExp("\\"+n+"\\b","g"),i=new RegExp("(\\"+n+"\\b){2,}"),l(o||!a?"":a,c)}return l.use([].concat(c,[function(e,t,i){2===e&&i.length&&i[0].lastIndexOf(n)>0&&(i[0]=i[0].replace(r,d))},f,function(e){if(-2===e){var t=h;return h=[],t}}])),p.hash=c.length?c.reduce((function(e,t){return t.name||ct(15),Rt(e,t.name)}),5381).toString():"",p}var Vt=i.createContext(),qt=(Vt.Consumer,i.createContext()),Bt=(qt.Consumer,new Ct),zt=Ut();function Wt(){return(0,i.useContext)(Vt)||Bt}function Ht(){return(0,i.useContext)(qt)||zt}function Kt(e){var t=(0,i.useState)(e.stylisPlugins),n=t[0],r=t[1],a=Wt(),o=(0,i.useMemo)((function(){var t=a;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target]),s=(0,i.useMemo)((function(){return Ut({options:{prefix:!e.disableVendorPrefixes},plugins:n})}),[e.disableVendorPrefixes,n]);return(0,i.useEffect)((function(){We()(n,e.stylisPlugins)||r(e.stylisPlugins)}),[e.stylisPlugins]),i.createElement(Vt.Provider,{value:o},i.createElement(qt.Provider,{value:s},e.children))}var Gt=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=zt);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.toString=function(){return ct(12,String(n.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=zt),this.name+e.hash},e}(),Qt=/([A-Z])/,$t=/([A-Z])/g,Yt=/^ms-/,Jt=function(e){return"-"+e.toLowerCase()};function Xt(e){return Qt.test(e)?e.replace($t,Jt).replace(Yt,"-ms-"):e}var Zt=function(e){return null==e||!1===e||""===e};function en(e,t,n,r){if(Array.isArray(e)){for(var i,a=[],o=0,s=e.length;o<s;o+=1)""!==(i=en(e[o],t,n,r))&&(Array.isArray(i)?a.push.apply(a,i):a.push(i));return a}return Zt(e)?"":at(e)?"."+e.styledComponentId:rt(e)?"function"!=typeof(u=e)||u.prototype&&u.prototype.isReactComponent||!t?e:en(e(t),t,n,r):e instanceof Gt?n?(e.inject(n,r),e.getName(r)):e:et(e)?function e(t,n){var r,i,a=[];for(var o in t)t.hasOwnProperty(o)&&!Zt(t[o])&&(Array.isArray(t[o])&&t[o].isCss||rt(t[o])?a.push(Xt(o)+":",t[o],";"):et(t[o])?a.push.apply(a,e(t[o],o)):a.push(Xt(o)+": "+(r=o,(null==(i=t[o])||"boolean"==typeof i||""===i?"":"number"!=typeof i||0===i||r in Ke||r.startsWith("--")?String(i).trim():i+"px")+";")));return n?[n+" {"].concat(a,["}"]):a}(e):e.toString();var u}var tn=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function nn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return rt(e)||et(e)?tn(en(Ze(tt,[e].concat(n)))):0===n.length&&1===e.length&&"string"==typeof e[0]?e:tn(en(Ze(e,n)))}new Set;var rn=function(e,t,n){return void 0===n&&(n=nt),e.theme!==n.theme&&e.theme||t||n.theme},an=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,on=/(^-|-$)/g;function sn(e){return e.replace(an,"-").replace(on,"")}var un=function(e){return Pt(Ot(e)>>>0)};function cn(e){return"string"==typeof e&&!0}var ln=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},hn=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function fn(e,t,n){var r=e[n];ln(t)&&ln(r)?dn(r,t):e[n]=t}function dn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];if(ln(o))for(var s in o)hn(s)&&fn(e,o[s],s)}return e}var pn=i.createContext();pn.Consumer;var vn={};function yn(e,t,n){var r=at(e),a=!cn(e),o=t.attrs,s=void 0===o?tt:o,u=t.componentId,c=void 0===u?function(e,t){var n="string"!=typeof e?"sc":sn(e);vn[n]=(vn[n]||0)+1;var r=n+"-"+un("5.3.10"+n+vn[n]);return t?t+"-"+r:r}(t.displayName,t.parentComponentId):u,l=t.displayName,h=void 0===l?function(e){return cn(e)?"styled."+e:"Styled("+it(e)+")"}(e):l,f=t.displayName&&t.componentId?sn(t.displayName)+"-"+t.componentId:t.componentId||c,d=r&&e.attrs?Array.prototype.concat(e.attrs,s).filter(Boolean):s,p=t.shouldForwardProp;r&&e.shouldForwardProp&&(p=t.shouldForwardProp?function(n,r,i){return e.shouldForwardProp(n,r,i)&&t.shouldForwardProp(n,r,i)}:e.shouldForwardProp);var v,y=new Ft(n,f,r?e.componentStyle:void 0),m=y.isStatic&&0===s.length,g=function(e,t){return function(e,t,n,r){var a=e.attrs,o=e.componentStyle,s=e.defaultProps,u=e.foldedComponentIds,c=e.shouldForwardProp,l=e.styledComponentId,h=e.target,f=function(e,t,n){void 0===e&&(e=nt);var r=Xe({},t,{theme:e}),i={};return n.forEach((function(e){var t,n,a,o=e;for(t in rt(o)&&(o=o(r)),o)r[t]=i[t]="className"===t?(n=i[t],a=o[t],n&&a?n+" "+a:n||a):o[t]})),[r,i]}(rn(t,(0,i.useContext)(pn),s)||nt,t,a),d=f[0],p=f[1],v=function(e,t,n,r){var i=Wt(),a=Ht();return t?e.generateAndInjectStyles(nt,i,a):e.generateAndInjectStyles(n,i,a)}(o,r,d),y=n,m=p.$as||t.$as||p.as||t.as||h,g=cn(m),k=p!==t?Xe({},t,{},p):t,b={};for(var w in k)"$"!==w[0]&&"as"!==w&&("forwardedAs"===w?b.as=k[w]:(c?c(w,$e,m):!g||$e(w))&&(b[w]=k[w]));return t.style&&p.style!==t.style&&(b.style=Xe({},t.style,{},p.style)),b.className=Array.prototype.concat(u,l,v!==l?v:null,t.className,p.className).filter(Boolean).join(" "),b.ref=y,(0,i.createElement)(m,b)}(v,e,t,m)};return g.displayName=h,(v=i.forwardRef(g)).attrs=d,v.componentStyle=y,v.displayName=h,v.shouldForwardProp=p,v.foldedComponentIds=r?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):tt,v.styledComponentId=f,v.target=r?e.target:e,v.withComponent=function(e){var r=t.componentId,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["componentId"]),a=r&&r+"-"+(cn(e)?e:sn(it(e)));return yn(e,Xe({},i,{attrs:d,componentId:a}),n)},Object.defineProperty(v,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=r?dn({},e.defaultProps,t):t}}),Object.defineProperty(v,"toString",{value:function(){return"."+v.styledComponentId}}),a&&Je()(v,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),v}var mn=function(e){return function e(t,n,r){if(void 0===r&&(r=nt),!(0,Be.isValidElementType)(n))return ct(1,String(n));var i=function(){return t(n,r,nn.apply(void 0,arguments))};return i.withConfig=function(i){return e(t,n,Xe({},r,{},i))},i.attrs=function(i){return e(t,n,Xe({},r,{attrs:Array.prototype.concat(r.attrs,i).filter(Boolean)}))},i}(yn,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){mn[e]=mn(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=Dt(e),Ct.registerId(this.componentId+1)}var t=e.prototype;t.createStyles=function(e,t,n,r){var i=r(en(this.rules,t,n,r).join(""),""),a=this.componentId+e;n.insertRules(a,a,i)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,n,r){e>2&&Ct.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)}}();!function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=wt();return"<style "+[n&&'nonce="'+n+'"',ot+'="true"','data-styled-version="5.3.10"'].filter(Boolean).join(" ")+">"+t+"</style>"},this.getStyleTags=function(){return e.sealed?ct(2):e._emitSheetCSS()},this.getStyleElement=function(){var t;if(e.sealed)return ct(2);var n=((t={})[ot]="",t["data-styled-version"]="5.3.10",t.dangerouslySetInnerHTML={__html:e.instance.toString()},t),r=wt();return r&&(n.nonce=r),[i.createElement("style",Xe({},n,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new Ct({isServer:!0}),this.sealed=!1}var t=e.prototype;t.collectStyles=function(e){return this.sealed?ct(2):i.createElement(Kt,{sheet:this.instance},e)},t.interleaveWithNodeStream=function(e){return ct(3)}}();var gn=mn,kn=n(164),bn=gn.div.withConfig({displayName:"baseStyles__BaseModalBackground"})(["display:flex;position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:30;background-color:rgba(0,0,0,0.5);align-items:center;justify-content:center;"]);function wn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return wn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xn(){}function Sn(){}Sn.resetWarningCache=xn;var En,Tn,In=(En=function(e){e.exports=function(){function e(e,t,n,r,i,a){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==a){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Sn,resetWarningCache:xn};return n.PropTypes=n,n}()},En(Tn={exports:{}}),Tn.exports),Cn=In,An=i.createContext({}),Nn=An.Provider,Pn=An.Consumer;function Rn(e){var t=e.backgroundComponent,n=e.children,r=(0,i.useRef)(null),a=_n((0,i.useState)(null),2),o=a[0],s=a[1],u=_n((0,i.useState)(bn),2),c=u[0],l=u[1];return(0,i.useEffect)((function(){t&&l(t)}),[l,t]),(0,i.useEffect)((function(){s(r.current)}),[s,r]),i.createElement(Nn,{value:{modalNode:o,BackgroundComponent:c}},n,i.createElement("div",{ref:r}))}function On(){return On=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},On.apply(this,arguments)}Rn.propTypes={backgroundComponent:Cn.oneOfType([Cn.element,Cn.object])};var Dn=["WrapperComponent","children","onBackgroundClick","onEscapeKeydown","allowScroll","beforeOpen","afterOpen","beforeClose","afterClose","backgroundProps","isOpen"];function Ln(e){var t,n=e.WrapperComponent,r=e.children,a=e.onBackgroundClick,o=e.onEscapeKeydown,s=e.allowScroll,u=e.beforeOpen,c=e.afterOpen,l=e.beforeClose,h=e.afterClose,f=e.backgroundProps,d=e.isOpen,p=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,Dn),v=(0,i.useRef)(null),y=(0,i.useRef)(null),m=(0,i.useRef)(!1),g=_n((0,i.useState)(!1),2),k=g[0],b=g[1];function w(e){v.current===e.target&&a&&a(e)}return(0,i.useEffect)((function(){function e(e){b(e),function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e&&e.apply(void 0,n)}(e?c:h)}k===d||m.current||function(t){if(t){var n=t();"function"==typeof(null==n?void 0:n.then)?(m.current=!0,n.then((function(){e(d),m.current=!1}))):e(d)}else e(d)}(d?u:l)}),[m,k,d,u,l,h,c]),(0,i.useEffect)((function(){function e(e){"Escape"===e.key&&o&&o(e)}return k&&document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[k,o]),(0,i.useEffect)((function(){return k&&!s&&(y.current=document.body.style.overflow,document.body.style.overflow="hidden"),function(){s||(document.body.style.overflow=y.current||"")}}),[k,s]),t=n?i.createElement(n,p,r):r,i.createElement(Pn,null,(function(e){var n=e.modalNode,r=e.BackgroundComponent;return n&&r&&k?kn.createPortal(i.createElement(r,On({},f,{onClick:w,ref:v}),t),n):null}))}Ln.styled=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t?gn.div.withConfig({displayName:"Modal__wrap"}).apply(void 0,t):gn.div.withConfig({displayName:"Modal__wrap"})();return function(e){return i.createElement(Ln,On({WrapperComponent:r},e))}},Ln.defaultProps={backgroundProps:{}},Ln.propTypes={WrapperComponent:Cn.oneOfType([Cn.element,Cn.object]),onBackgroundClick:Cn.func,onEscapeKeydown:Cn.func,allowScroll:Cn.bool,beforeOpen:Cn.func,afterOpen:Cn.func,beforeClose:Cn.func,afterClose:Cn.func,backgroundProps:Cn.object,isOpen:Cn.bool};var Fn,Mn,jn,Un=n(184),Vn=Ln.styled(Fn||(Mn=["\n  width: 30rem;\n  height: 30rem;\n  display: flex;\n  align-items: center;\n  background-color: #fff0a5;\n  flex-direction: column;\n"],jn||(jn=Mn.slice(0)),Fn=Object.freeze(Object.defineProperties(Mn,{raw:{value:Object.freeze(jn)}}))));function qn(e){var t=e.isOpen,n=e.toggleModal,r=e.children,i=e.submitButtonText,a=e.onSubmit,o=e.disableSubmit;return(0,Un.jsxs)(Vn,{isOpen:t,onBackgroundClick:n,onEscapeKeydown:n,children:[r,(0,Un.jsxs)("div",{children:[(0,Un.jsx)("button",{disabled:o,onClick:function(){n(),a()},children:i}),(0,Un.jsx)("button",{onClick:n,children:"Close"})]})]})}function Bn(e){var t=e.template,n=e.templateIndex,r=e.chooseTemplate,i=e.choosenTemplate,a=i&&t.id===i.id?"#468966":"inherit";return(0,Un.jsxs)("p",{style:{backgroundColor:a},className:"template-name",onClick:function(){r(n)},children:[n,". ",t.templateName]})}function zn(e){var t=e.templates,n=e.chooseTemplate,r=e.choosenTemplate;return(0,Un.jsxs)("div",{className:"list-container",children:[(0,Un.jsx)("h2",{style:{textAlign:"center"},children:"Templates"}),t.map((function(e,t){return(0,Un.jsx)(Bn,{template:e,templateIndex:t+1,chooseTemplate:n,choosenTemplate:r},t)}))]})}function Wn(){Wn=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(A){u=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof f?t:f,o=Object.create(a.prototype),s=new T(i||[]);return r(o,"_invoke",{value:_(e,n,s)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}e.wrap=c;var h={};function f(){}function d(){}function v(){}var y={};u(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(I([])));g&&g!==t&&n.call(g,a)&&(y=g);var k=v.prototype=f.prototype=Object.create(y);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(r,a,o,s){var u=l(e[r],e,a);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==p(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,o,s)}),(function(e){i("throw",e,o,s)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,s)}))}s(u.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function _(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return C()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=x(o,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function I(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=v,r(k,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:d,configurable:!0}),d.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(k),u(k,s,"Generator"),u(k,a,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function Hn(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(Ma){return void n(Ma)}s.done?t(u):Promise.resolve(u).then(r,i)}function Kn(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Hn(a,r,i,o,s,"next",e)}function s(e){Hn(a,r,i,o,s,"throw",e)}o(void 0)}))}}function Gn(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qn=!1,$n=!1,Yn="${JSCORE_VERSION}",Jn=function(e,t){if(!e)throw Xn(t)},Xn=function(e){return new Error("Firebase Database ("+Yn+") INTERNAL ASSERT FAILED: "+e)},Zn=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},er={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,h=(3&a)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Zn(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw new tr;var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},tr=function(e){k(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return m(n)}(E(Error)),nr=function(e){var t=Zn(e);return er.encodeByteArray(t,!0)},rr=function(e){return nr(e).replace(/\./g,"")},ir=function(e){try{return er.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function ar(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=ar(e[n],t[n]));return e}var or=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},sr=function(){try{return or()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&ir(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},ur=function(){var e;return null===(e=sr())||void 0===e?void 0:e.config},cr=function(){function e(){var t=this;d(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return m(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function lr(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[rr(JSON.stringify({alg:"none",type:"JWT"})),rr(JSON.stringify(a)),""].join(".")}function hr(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function fr(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hr())}function dr(){var e,t=null===(e=sr())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function pr(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function vr(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function yr(){var e=hr();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function mr(){return!0===Qn||!0===$n}function gr(){try{return"object"===typeof indexedDB}catch(e){return!1}}var kr=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(_(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(_(a),br.prototype.create),a}return m(n)}(E(Error)),br=function(){function e(t,n,r){d(this,e),this.service=t,this.serviceName=n,this.errors=r}return m(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(wr,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new kr(n,a,t)}}]),e}();var wr=/\{\$([^}]+)}/g;function _r(e){return JSON.parse(e)}function xr(e){return JSON.stringify(e)}var Sr=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=_r(ir(a[0])||""),n=_r(ir(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function Er(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Tr(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Ir(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Cr(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Ar(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(Nr(s)&&Nr(u)){if(!Ar(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function Nr(e){return null!==e&&"object"===typeof e}function Pr(e){for(var t=[],n=function(){var e=l(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Rr(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=l(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Or(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var Dr=function(){function e(){d(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return m(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var s,u,c=this.chain_[0],l=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(s=f^l&(h^f),u=1518500249):(s=l^h^f,u=1859775393):p<60?(s=l&h|f&(l|h),u=2400959708):(s=l^h^f,u=3395469782);var v=(c<<5|c>>>27)+s+d+u+n[p]&4294967295;d=f,f=h,h=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function Lr(e,t){var n=new Fr(e,t);return n.subscribe.bind(n)}var Fr=function(){function e(t,n){var r=this;d(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return m(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=I(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Mr),void 0===r.error&&(r.error=Mr),void 0===r.complete&&(r.complete=Mr);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Mr(){}var jr=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function Ur(e,t){return"".concat(e," failed: ").concat(t," argument ")}function Vr(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(Ur(e,t)+"must be a valid function.")}function qr(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(Ur(e,t)+"must be a valid context object.")}var Br=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function zr(e){return e&&e._delegate?e._delegate:e}var Wr=function(){function e(t,n,r){d(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return m(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Hr="[DEFAULT]",Kr=function(){function e(t,n){d(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return m(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new cr;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Hr})}catch(u){}var t,n=I(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=l(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(u){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hr;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Kn(Wn().mark((function e(){var t;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(f(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),f(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hr;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hr;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=I(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=l(i.value,2),u=s[0],c=s[1];r===this.normalizeInstanceIdentifier(u)&&c.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=I(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(FT){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Hr?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(FT){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hr;return this.component?this.component.multipleInstances?e:Hr:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Gr,Qr,$r=function(){function e(t){d(this,e),this.name=t,this.providers=new Map}return m(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Kr(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Yr=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Qr||(Qr={}));var Jr={debug:Qr.DEBUG,verbose:Qr.VERBOSE,info:Qr.INFO,warn:Qr.WARN,error:Qr.ERROR,silent:Qr.SILENT},Xr=Qr.INFO,Zr=(Gn(Gr={},Qr.DEBUG,"log"),Gn(Gr,Qr.VERBOSE,"log"),Gn(Gr,Qr.INFO,"info"),Gn(Gr,Qr.WARN,"warn"),Gn(Gr,Qr.ERROR,"error"),Gr),ei=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Zr[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},ti=function(){function e(t){d(this,e),this.name=t,this._logLevel=Xr,this._logHandler=ei,this._userLogHandler=null,Yr.push(this)}return m(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Qr))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Jr[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Qr.DEBUG].concat(t)),this._logHandler.apply(this,[this,Qr.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Qr.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Qr.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Qr.INFO].concat(t)),this._logHandler.apply(this,[this,Qr.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Qr.WARN].concat(t)),this._logHandler.apply(this,[this,Qr.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Qr.ERROR].concat(t)),this._logHandler.apply(this,[this,Qr.ERROR].concat(t))}}]),e}();function ni(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ri(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ni(Object(n),!0).forEach((function(t){Gn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ni(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ii,ai,oi=function(e,t){return t.some((function(t){return e instanceof t}))};var si=new WeakMap,ui=new WeakMap,ci=new WeakMap,li=new WeakMap,hi=new WeakMap;var fi={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ui.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ci.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vi(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function di(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ai||(ai=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(yi(this),n),vi(si.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return vi(e.apply(yi(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[yi(this),t].concat(r));return ci.set(a,t.sort?t.sort():[t]),vi(a)}}function pi(e){return"function"===typeof e?di(e):(e instanceof IDBTransaction&&function(e){if(!ui.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));ui.set(e,t)}}(e),oi(e,ii||(ii=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,fi):e)}function vi(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(vi(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&si.set(t,e)})).catch((function(){})),hi.set(t,e),t}(e);if(li.has(e))return li.get(e);var t=pi(e);return t!==e&&(li.set(e,t),hi.set(t,e)),t}var yi=function(e){return hi.get(e)};var mi,gi,ki=["get","getKey","getAll","getAllKeys","count"],bi=["put","add","delete","clear"],wi=new Map;function _i(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(wi.get(t))return wi.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=bi.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||ki.includes(n))){var a=function(){var e=Kn(Wn().mark((function e(t){var a,o,s,u,c,l,h=arguments;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),s=o.store,u=h.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=h[l];return r&&(s=s.index(c.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return wi.set(t,a),a}}}fi=function(e){return ri(ri({},e),{},{get:function(t,n,r){return _i(t,n)||e.get(t,n,r)},has:function(t,n){return!!_i(t,n)||e.has(t,n)}})}(fi);var xi=function(){function e(t){d(this,e),this.container=t}return m(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Si="@firebase/app",Ei="0.9.10",Ti=new ti("@firebase/app"),Ii="[DEFAULT]",Ci=(Gn(mi={},Si,"fire-core"),Gn(mi,"@firebase/app-compat","fire-core-compat"),Gn(mi,"@firebase/analytics","fire-analytics"),Gn(mi,"@firebase/analytics-compat","fire-analytics-compat"),Gn(mi,"@firebase/app-check","fire-app-check"),Gn(mi,"@firebase/app-check-compat","fire-app-check-compat"),Gn(mi,"@firebase/auth","fire-auth"),Gn(mi,"@firebase/auth-compat","fire-auth-compat"),Gn(mi,"@firebase/database","fire-rtdb"),Gn(mi,"@firebase/database-compat","fire-rtdb-compat"),Gn(mi,"@firebase/functions","fire-fn"),Gn(mi,"@firebase/functions-compat","fire-fn-compat"),Gn(mi,"@firebase/installations","fire-iid"),Gn(mi,"@firebase/installations-compat","fire-iid-compat"),Gn(mi,"@firebase/messaging","fire-fcm"),Gn(mi,"@firebase/messaging-compat","fire-fcm-compat"),Gn(mi,"@firebase/performance","fire-perf"),Gn(mi,"@firebase/performance-compat","fire-perf-compat"),Gn(mi,"@firebase/remote-config","fire-rc"),Gn(mi,"@firebase/remote-config-compat","fire-rc-compat"),Gn(mi,"@firebase/storage","fire-gcs"),Gn(mi,"@firebase/storage-compat","fire-gcs-compat"),Gn(mi,"@firebase/firestore","fire-fst"),Gn(mi,"@firebase/firestore-compat","fire-fst-compat"),Gn(mi,"fire-js","fire-js"),Gn(mi,"firebase","fire-js-all"),mi),Ai=new Map,Ni=new Map;function Pi(e,t){try{e.container.addComponent(t)}catch(n){Ti.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Ri(e,t){e.container.addOrOverwriteComponent(t)}function Oi(e){var t=e.name;if(Ni.has(t))return Ti.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ni.set(t,e);var n,r=I(Ai.values());try{for(r.s();!(n=r.n()).done;){Pi(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Di(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Li(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ii;Di(e,t).clearInstance(n)}function Fi(){Ni.clear()}var Mi=(Gn(gi={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),Gn(gi,"bad-app-name","Illegal App name: '{$appName}"),Gn(gi,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Gn(gi,"app-deleted","Firebase App named '{$appName}' already deleted"),Gn(gi,"no-options","Need to provide options, when not being deployed to hosting via source."),Gn(gi,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Gn(gi,"invalid-log-argument","First argument to `onLog` must be null or a function."),Gn(gi,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),Gn(gi,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),Gn(gi,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),Gn(gi,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),gi),ji=new br("app","Firebase",Mi),Ui=function(){function e(t,n,r){var i=this;d(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Wr("app",(function(){return i}),"PUBLIC"))}return m(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw ji.create("app-deleted",{appName:this._name})}}]),e}(),Vi="9.22.0";function qi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:Ii,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw ji.create("bad-app-name",{appName:String(i)});if(n||(n=ur()),!n)throw ji.create("no-options");var a=Ai.get(i);if(a){if(Ar(n,a.options)&&Ar(r,a.config))return a;throw ji.create("duplicate-app",{appName:i})}var o,s=new $r(i),u=I(Ni.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(h){u.e(h)}finally{u.f()}var l=new Ui(n,r,s);return Ai.set(i,l),l}function Bi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ii,t=Ai.get(e);if(!t&&e===Ii&&ur())return qi();if(!t)throw ji.create("no-app",{appName:e});return t}function zi(){return Array.from(Ai.values())}function Wi(e){return Hi.apply(this,arguments)}function Hi(){return(Hi=Kn(Wn().mark((function e(t){var n;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Ai.has(n)){e.next=6;break}return Ai.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ki(e,t,n){var r,i=null!==(r=Ci[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ti.warn(s.join(" "))}Oi(new Wr("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Gi(e,t){if(null!==e&&"function"!==typeof e)throw ji.create("invalid-log-argument");!function(e,t){var n,r=I(Yr);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Jr[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var s=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Qr[n].toLowerCase(),message:s,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Qi(e){var t;t=e,Yr.forEach((function(e){e.setLogLevel(t)}))}var $i="firebase-heartbeat-database",Yi=1,Ji="firebase-heartbeat-store",Xi=null;function Zi(){return Xi||(Xi=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=vi(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(vi(s.result),e.oldVersion,e.newVersion,vi(s.transaction),e)})),r&&s.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),u}($i,Yi,{upgrade:function(e,t){if(0===t)e.createObjectStore(Ji)}}).catch((function(e){throw ji.create("idb-open",{originalErrorMessage:e.message})}))),Xi}function ea(e){return ta.apply(this,arguments)}function ta(){return ta=Kn(Wn().mark((function e(t){var n,r,i;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Zi();case 3:return n=e.sent,e.next=6,n.transaction(Ji).objectStore(Ji).get(ia(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof kr?Ti.warn(e.t0.message):(i=ji.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Ti.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),ta.apply(this,arguments)}function na(e,t){return ra.apply(this,arguments)}function ra(){return ra=Kn(Wn().mark((function e(t,n){var r,i,a,o;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Zi();case 3:return r=e.sent,i=r.transaction(Ji,"readwrite"),a=i.objectStore(Ji),e.next=8,a.put(n,ia(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof kr?Ti.warn(e.t0.message):(o=ji.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Ti.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),ra.apply(this,arguments)}function ia(e){return"".concat(e.name,"!").concat(e.options.appId)}var aa=function(){function e(t){var n=this;d(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new la(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return m(e,[{key:"triggerHeartbeat",value:function(){var e=Kn(Wn().mark((function e(){var t,n,r;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=oa(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Kn(Wn().mark((function e(){var t,n,r,i,a;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=oa(),n=sa(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=rr(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function oa(){return(new Date).toISOString().substring(0,10)}function sa(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=I(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),ha(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),ha(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var ua,ca,la=function(){function e(t){d(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return m(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Kn(Wn().mark((function e(){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(gr()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(Ma){t(Ma)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Kn(Wn().mark((function e(){var t;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,ea(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Kn(Wn().mark((function e(t){var n,r;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",na(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Kn(Wn().mark((function e(t){var n,r;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",na(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(f(r.heartbeats),f(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function ha(e){return rr(JSON.stringify({version:2,heartbeats:e})).length}ua="",Oi(new Wr("platform-logger",(function(e){return new xi(e)}),"PRIVATE")),Oi(new Wr("heartbeat",(function(e){return new aa(e)}),"PRIVATE")),Ki(Si,Ei,ua),Ki(Si,Ei,"esm2017"),Ki("fire-js","");var fa=function(){function e(t,n){var r=this;d(this,e),this._delegate=t,this.firebase=n,Pi(t,new Wr("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return m(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Wi(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ii;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ii;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Pi(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Ri(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),da=(Gn(ca={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Gn(ca,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),ca),pa=new br("app-compat","Firebase",da);var va=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=qi(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Er(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Ki,setLogLevel:Qi,onLog:Gi,apps:null,SDK_VERSION:Vi,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Oi(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw pa.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&ar(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Er(n,e=e||Ii))throw pa.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(fa);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){ar(n,e)},createSubscribe:Lr,ErrorFactory:br,deepExtend:ar}),n}(),ya=new ti("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){ya.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var ma=self.firebase.SDK_VERSION;ma&&ma.indexOf("LITE")>=0&&ya.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var ga=va;!function(e){Ki("@firebase/app-compat","0.2.10",e)}();ga.registerVersion("firebase","9.22.0","app-compat");var ka="@firebase/database",ba="0.14.4",wa="";function _a(e){wa=e}var xa=function(){function e(t){d(this,e),this.domStorage_=t,this.prefix_="firebase:"}return m(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),xr(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:_r(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),Sa=function(){function e(){d(this,e),this.cache_={},this.isInMemoryStorage=!0}return m(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return Er(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),Ea=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new xa(t)}}catch(n){}return new Sa},Ta=Ea("localStorage"),Ia=Ea("sessionStorage"),Ca=new ti("@firebase/database"),Aa=function(){var e=1;return function(){return e++}}(),Na=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,Jn(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new Dr;n.update(t);var r=n.digest();return er.encodeByteArray(r)},Pa=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?xr(r):r,t+=" "}return t},Ra=null,Oa=!0,Da=function(e,t){Jn(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(Ca.logLevel=Qr.VERBOSE,Ra=Ca.log.bind(Ca),t&&Ia.set("logging_enabled",!0)):"function"===typeof e?Ra=e:(Ra=null,Ia.remove("logging_enabled"))},La=function(){if(!0===Oa&&(Oa=!1,null===Ra&&!0===Ia.get("logging_enabled")&&Da(!0)),Ra){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Pa.apply(null,t);Ra(r)}},Fa=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];La.apply(void 0,[e].concat(n))}},Ma=function(){var e="FIREBASE INTERNAL ERROR: "+Pa.apply(void 0,arguments);Ca.error(e)},ja=function(){var e="FIREBASE FATAL ERROR: ".concat(Pa.apply(void 0,arguments));throw Ca.error(e),new Error(e)},Ua=function(){var e="FIREBASE WARNING: "+Pa.apply(void 0,arguments);Ca.warn(e)},Va=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},qa="[MIN_NAME]",Ba="[MAX_NAME]",za=function(e,t){if(e===t)return 0;if(e===qa||t===Ba)return-1;if(t===qa||e===Ba)return 1;var n=Ja(e),r=Ja(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},Wa=function(e,t){return e===t?0:e<t?-1:1},Ha=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+xr(t))},Ka=function e(t){if("object"!==typeof t||null===t)return xr(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=xr(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},Ga=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Qa(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var $a=function(e){Jn(!Va(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(u.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var Ya=new RegExp("^-?(0*)\\d{1,10}$"),Ja=function(e){if(Ya.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Xa=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw Ua("Exception was thrown by user callback.",e),t}),Math.floor(0))}},Za=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},eo=function(){function e(t,n){var r=this;d(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return m(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){Ua('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),to=function(){function e(t,n,r){var i=this;d(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return m(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(La("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ua(e)}}]),e}(),no=function(){function e(t){d(this,e),this.accessToken=t}return m(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();no.OWNER="owner";var ro="5",io=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ao="ac",oo="websocket",so="long_polling",uo=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]&&arguments[7];d(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.isUsingEmulator=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ta.get("host:"+t)||this._host}return m(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ta.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function co(e,t,n){var r;if(Jn("string"===typeof t,"typeof type must == string"),Jn("object"===typeof n,"typeof params must == object"),t===oo)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==so)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return Qa(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var lo=function(){function e(){d(this,e),this.counters_={}}return m(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Er(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return function(e){return ar(void 0,e)}(this.counters_)}}]),e}(),ho={},fo={};function po(e){var t=e.toString();return ho[t]||(ho[t]=new lo),ho[t]}var vo=function(){function e(t){d(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return m(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&Xa((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),yo="start",mo=function(){function e(t,n,r,i,a,o,s){var u=this;d(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Fa(t),this.stats_=po(n),this.urlFn=function(e){return u.appCheckToken&&(e[ao]=u.appCheckToken),co(n,so,e)}}return m(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new vo(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(mr()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new go((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===yo)n.id=a,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={};e[yo]="t",e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=ro,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e[ao]=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&io.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=xr(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=nr(t),r=Ga(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!mr()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=xr(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!mr()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),go=function(){function e(t,n,r,i){if(d(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,mr())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=Aa(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(s){La("frame writing exception"),s.stack&&La(s.stack),La(s)}}}return m(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;mr()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){La("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||La("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),ko=null;"undefined"!==typeof MozWebSocket?ko=MozWebSocket:"undefined"!==typeof WebSocket&&(ko=WebSocket);var bo=function(){function e(t,n,r,i,a,o,s){d(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Fa(this.connId),this.stats_=po(n),this.connURL=e.connectionURL_(n,o,s,i,r),this.nodeAdmin=n.nodeAdmin}return m(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ta.set("previous_websocket_failure",!0);try{var r;if(mr()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(ro,"/").concat(wa,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new ko(this.connURL,[],r)}catch(u){this.log_("Error instantiating WebSocket.");var s=u.message||u.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){Ta.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=_r(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(Jn(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=xr(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=Ga(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=ro,!mr()&&"undefined"!==typeof location&&location.hostname&&io.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a[ao]=r),i&&(a.p=i),co(e,oo,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==ko&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return Ta.isInMemoryStorage||!0===Ta.get("previous_websocket_failure")}}]),e}();bo.responsesRequiredToBeHealthy=2,bo.healthyTimeout=3e4;var wo=function(){function e(t){d(this,e),this.initTransports_(t)}return m(e,[{key:"initTransports_",value:function(t){var n=bo&&bo.isAvailable(),r=n&&!bo.previouslyFailed();if(t.webSocketOnly&&(n||Ua("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[bo];else{var i,a=this.transports_=[],o=I(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var s=i.value;s&&s.isAvailable()&&a.push(s)}}catch(u){o.e(u)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[mo,bo]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();wo.globalTransportInitialized_=!1;var _o=function(){function e(t,n,r,i,a,o,s,u,c,l){d(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Fa("c:"+this.id+":"),this.transportManager_=new wo(n),this.log_("Connection created"),this.start_()}return m(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Za((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=Ha("t",e),n=Ha("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=Ha("t",e),n=Ha("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=Ha("t",e);if("d"in e){var n=e.d;if("h"===t){var r=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Ma("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ma("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),ro!==n&&Ua("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Za((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Za((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ta.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),xo=function(){function e(){d(this,e)}return m(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),So=function(){function e(t){d(this,e),this.allowedEvents_=t,this.listeners_={},Jn(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return m(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=f(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){Jn(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),Eo=function(e){k(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||fr()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return m(n,[{key:"getInitialEvent",value:function(e){return Jn("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(So),To=32,Io=768,Co=function(){function e(t,n){if(d(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return m(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function Ao(){return new Co("")}function No(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Po(e){return e.pieces_.length-e.pieceNum_}function Ro(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new Co(e.pieces_,t)}function Oo(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Do(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Lo(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Co(t,0)}function Fo(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Co)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new Co(n,0)}function Mo(e){return e.pieceNum_>=e.pieces_.length}function jo(e,t){var n=No(e),r=No(t);if(null===n)return t;if(n===r)return jo(Ro(e),Ro(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Uo(e,t){for(var n=Do(e,0),r=Do(t,0),i=0;i<n.length&&i<r.length;i++){var a=za(n[i],r[i]);if(0!==a)return a}return n.length===r.length?0:n.length<r.length?-1:1}function Vo(e,t){if(Po(e)!==Po(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function qo(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(Po(e)>Po(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Bo=m((function e(t,n){d(this,e),this.errorPrefix_=n,this.parts_=Do(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=Br(this.parts_[r]);zo(this)}));function zo(e){if(e.byteLength_>Io)throw new Error(e.errorPrefix_+"has a key path longer than "+Io+" bytes ("+e.byteLength_+").");if(e.parts_.length>To)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+To+") or object contains a cycle "+Wo(e))}function Wo(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var Ho=function(e){k(n,e);var t=x(n);function n(){var e,r,i;return d(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return m(n,[{key:"getInitialEvent",value:function(e){return Jn("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(So),Ko=1e3,Go=function(e){k(n,e);var t=x(n);function n(e,r,i,a,o,s,u,c){var l;if(d(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=s,l.appCheckTokenProvider_=u,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=Fa("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=Ko,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!mr())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Ho.getInstance().on("visible",l.onVisible_,_(l)),-1===e.host.indexOf("fblocal")&&Eo.getInstance().on("online",l.onOnline_,_(l)),l}return m(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(xr(i)),Jn(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new cr,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),Jn(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Jn(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var s=o.d,u=o.s;n.warnOnListenWarnings_(s,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==u&&t.removeListen_(i,a),e.onComplete&&e.onComplete(u,s))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=Sr(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=Sr(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Jn(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+xr(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Ma("Unrecognized action received from server: "+xr(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;Jn(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ko,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ko,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ko),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=Kn(Wn().mark((function e(){var t,r,i,a,o,s,u,c,h,f,d,p,v,y,m=this;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,s=!1,u=null,c=function(){u?u.close():(s=!0,i())},h=function(e){Jn(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(e)},this.realtime_={close:c,sendRequest:h},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);case 19:d=e.sent,p=l(d,2),v=p[0],y=p[1],s?La("getToken() completed but was canceled"):(La("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=y&&y.token,u=new _o(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){Ua(e+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),s||(this.repoInfo_.nodeAdmin&&Ua(e.t0),c());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){La("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){La("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Ir(this.interruptReasons_)&&(this.reconnectDelay_=Ko,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return Ka(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new Co(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){La("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){La("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=I(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=I(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(u){r.e(u)}finally{r.f()}}}catch(u){t.e(u)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}},{key:"sendConnectStats_",value:function(){var e={},t="js";mr()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+wa.replace(/\./g,"-")]=1,fr()?e["framework.cordova"]=1:vr()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=Eo.getInstance().currentlyOnline();return Ir(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&Er(e,"w")){var n=Tr(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();Ua("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(xo);Go.nextPersistentConnectionId_=0,Go.nextConnectionId_=0;var Qo,$o=function(){function e(t,n){d(this,e),this.name=t,this.node=n}return m(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),Yo=function(){function e(){d(this,e)}return m(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new $o(qa,e),r=new $o(qa,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return $o.MIN}}]),e}(),Jo=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n,[{key:"compare",value:function(e,t){return za(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw Xn("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return $o.MIN}},{key:"maxPost",value:function(){return new $o(Ba,Qo)}},{key:"makePost",value:function(e,t){return Jn("string"===typeof e,"KeyIndex indexValue must always be a string."),new $o(e,Qo)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return Qo},set:function(e){Qo=e}}]),n}(Yo),Xo=new Jo,Zo=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;d(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return m(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),es=function(){function e(t,n,r,i,a){d(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:rs.EMPTY_NODE,this.right=null!=a?a:rs.EMPTY_NODE}return m(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return rs.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return rs.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();es.RED=!0,es.BLACK=!1;var ts,ns=function(){function e(){d(this,e)}return m(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new es(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),rs=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;d(this,e),this.comparator_=t,this.root_=n}return m(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,es.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,es.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new Zo(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new Zo(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new Zo(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new Zo(this.root_,null,this.comparator_,!0,e)}}]),e}();function is(e,t){return za(e.name,t.name)}function as(e,t){return za(e,t)}rs.EMPTY_NODE=new ns;var os,ss,us,cs=function(e){return"number"===typeof e?"number:"+$a(e):"string:"+e},ls=function(e){if(e.isLeafNode()){var t=e.val();Jn("string"===typeof t||"number"===typeof t||"object"===typeof t&&Er(t,".sv"),"Priority must be a string or number.")}else Jn(e===ts||e.isEmpty(),"priority of unexpected type.");Jn(e===ts||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},hs=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;d(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,Jn(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),ls(this.priorityNode_)}return m(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return Mo(t)?this:".priority"===No(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=No(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Jn(".priority"!==r||1===Po(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ro(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+cs(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?$a(this.value_):this.value_,this.lazyHash_=Na(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(Jn(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return Jn(i>=0,"Unknown leaf type: "+n),Jn(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return os},set:function(e){os=e}}]),e}();hs.VALUE_TYPE_ORDER=["object","boolean","number","string"];var fs,ds,ps=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?za(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return $o.MIN}},{key:"maxPost",value:function(){return new $o(Ba,new hs("[PRIORITY-POST]",us))}},{key:"makePost",value:function(e,t){var n=ss(e);return new $o(t,new hs("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(Yo),vs=new ps,ys=Math.log(2),ms=function(){function e(t){d(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/ys,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return m(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),gs=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,s=i-r;if(0===s)return null;if(1===s)return a=e[r],o=n?n(a):a,new es(o,a.node,es.BLACK,null,null);var u=parseInt(s/2,10)+r,c=t(r,u),l=t(u+1,i);return a=e[u],o=n?n(a):a,new es(o,a.node,es.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,s=function(t,r){var a=o-t,s=o;o-=t;var c=i(a+1,s),l=e[a],h=n?n(l):l;u(new es(h,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?s(h,es.BLACK):(s(h,es.BLACK),s(h,es.RED))}return a}(new ms(e.length));return new rs(r||t,a)},ks={},bs=function(){function e(t,n){d(this,e),this.indexes_=t,this.indexSet_=n}return m(e,[{key:"get",value:function(e){var t=Tr(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof rs?t:null}},{key:"hasIndex",value:function(e){return Er(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){Jn(t!==Xo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator($o.Wrap),s=o.getNext();s;)a=a||t.isDefinedOn(s.node),i.push(s),s=o.getNext();r=a?gs(i,t.getCompare()):ks;var u=t.toString(),c=Object.assign({},this.indexSet_);c[u]=t;var l=Object.assign({},this.indexes_);return l[u]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(Cr(this.indexes_,(function(e,i){var a=Tr(r.indexSet_,i);if(Jn(a,"Missing index implementation for "+i),e===ks){if(a.isDefinedOn(t.node)){for(var o=[],s=n.getIterator($o.Wrap),u=s.getNext();u;)u.name!==t.name&&o.push(u),u=s.getNext();return o.push(t),gs(o,a.getCompare())}return ks}var c=n.get(t.name),l=e;return c&&(l=l.remove(new $o(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(Cr(this.indexes_,(function(e){if(e===ks)return e;var r=n.get(t.name);return r?e.remove(new $o(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return Jn(ks&&vs,"ChildrenNode.ts has not been loaded"),fs=fs||new e({".priority":ks},{".priority":vs})}}]),e}(),ws=function(){function e(t,n,r){d(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&ls(this.priorityNode_),this.children_.isEmpty()&&Jn(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return m(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||ds}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?ds:t}},{key:"getChild",value:function(e){var t=No(e);return null===t?this:this.getImmediateChild(t).getChild(Ro(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(Jn(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new $o(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?ds:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=No(e);if(null===n)return t;Jn(".priority"!==No(e)||1===Po(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(Ro(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(vs,(function(o,s){n[o]=s.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var s in n)o[s]=n[s];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+cs(this.getPriority().val())+":"),this.forEachChild(vs,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":Na(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new $o(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new $o(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new $o(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,$o.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,$o.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===_s?-1:0}},{key:"withIndex",value:function(t){if(t===Xo||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===Xo||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(vs),r=t.getIterator(vs),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===Xo?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return ds||(ds=new e(new rs(as),null,bs.Default))}}]),e}();ws.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var _s=new(function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.call(this,new rs(as),ws.EMPTY_NODE,bs.Default)}return m(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return ws.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(ws));Object.defineProperties($o,{MIN:{value:new $o(qa,ws.EMPTY_NODE)},MAX:{value:new $o(Ba,_s)}}),Jo.__EMPTY_NODE=ws.EMPTY_NODE,hs.__childrenNodeConstructor=ws,ts=_s,function(e){us=e}(_s);var xs=!0;function Ss(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return ws.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Jn(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e)return new hs(e,Ss(t));if(e instanceof Array||!xs){var n=ws.EMPTY_NODE;return Qa(e,(function(t,r){if(Er(e,t)&&"."!==t.substring(0,1)){var i=Ss(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}})),n.updatePriority(Ss(t))}var r=[],i=!1;if(Qa(e,(function(e,t){if("."!==e.substring(0,1)){var n=Ss(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new $o(e,n)))}})),0===r.length)return ws.EMPTY_NODE;var a=gs(r,is,(function(e){return e.name}),as);if(i){var o=gs(r,vs.getCompare());return new ws(a,Ss(t),new bs({".priority":o},{".priority":vs}))}return new ws(a,Ss(t),bs.Default)}!function(e){ss=e}(Ss);var Es=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).indexPath_=e,Jn(!Mo(e)&&".priority"!==No(e),"Can't create PathIndex with empty path or .priority key"),r}return m(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?za(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=Ss(e),r=ws.EMPTY_NODE.updateChild(this.indexPath_,n);return new $o(t,r)}},{key:"maxPost",value:function(){var e=ws.EMPTY_NODE.updateChild(this.indexPath_,_s);return new $o(Ba,e)}},{key:"toString",value:function(){return Do(this.indexPath_,0).join("/")}}]),n}(Yo),Ts=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?za(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return $o.MIN}},{key:"maxPost",value:function(){return $o.MAX}},{key:"makePost",value:function(e,t){var n=Ss(e);return new $o(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(Yo),Is=new Ts;function Cs(e){return{type:"value",snapshotNode:e}}function As(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Ns(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Ps(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var Rs=function(){function e(t){d(this,e),this.index_=t}return m(e,[{key:"updateChild",value:function(e,t,n,r,i,a){Jn(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(Ns(t,o)):Jn(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(As(t,n)):a.trackChildChange(Ps(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(vs,(function(e,r){t.hasChild(e)||n.trackChildChange(Ns(e,r))})),t.isLeafNode()||t.forEachChild(vs,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Ps(t,r,i))}else n.trackChildChange(As(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?ws.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),Os=function(){function e(t){d(this,e),this.indexedFilter_=new Rs(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return m(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){var t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new $o(t,n))||(n=ws.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=ws.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(ws.EMPTY_NODE);var i=this;return t.forEachChild(vs,(function(e,t){i.matches(new $o(e,t))||(r=r.updateImmediateChild(e,ws.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),Ds=function(){function e(t){var n=this;d(this,e),this.withinDirectionalStart=function(e){return n.reverse_?n.withinEndPost(e):n.withinStartPost(e)},this.withinDirectionalEnd=function(e){return n.reverse_?n.withinStartPost(e):n.withinEndPost(e)},this.withinStartPost=function(e){var t=n.index_.compare(n.rangedFilter_.getStartPost(),e);return n.startIsInclusive_?t<=0:t<0},this.withinEndPost=function(e){var t=n.index_.compare(e,n.rangedFilter_.getEndPost());return n.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new Os(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return m(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new $o(t,n))||(n=ws.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=ws.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=ws.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(this.withinDirectionalStart(o)){if(!this.withinDirectionalEnd(o))break;r=r.updateImmediateChild(o.name,o.node),a++}}}else{var s;r=(r=t.withIndex(this.index_)).updatePriority(ws.EMPTY_NODE),s=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);for(var u=0;s.hasNext();){var c=s.getNext();u<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?u++:r=r.updateImmediateChild(c.name,ws.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var s=e;Jn(s.numChildren()===this.limit_,"");var u=new $o(t,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var h=s.getImmediateChild(t),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===t||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:a(f,u);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(Ps(t,n,h)),s.updateImmediateChild(t,n);null!=i&&i.trackChildChange(Ns(t,h));var p=s.updateImmediateChild(t,ws.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(As(f.name,f.node)),p.updateImmediateChild(f.name,f.node)):p}return n.isEmpty()?e:l&&a(c,u)>=0?(null!=i&&(i.trackChildChange(Ns(c.name,c.node)),i.trackChildChange(As(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(c.name,ws.EMPTY_NODE)):e}}]),e}(),Ls=function(){function e(){d(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=vs}return m(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return Jn(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return Jn(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:qa}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return Jn(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return Jn(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ba}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return Jn(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===vs}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function Fs(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Ms(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function js(e,t){var n=e.copy();return n.index_=t,n}function Us(e){var t,n={};if(e.isDefault())return n;if(e.index_===vs?t="$priority":e.index_===Is?t="$value":e.index_===Xo?t="$key":(Jn(e.index_ instanceof Es,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=xr(t),e.startSet_){var r=e.startAfterSet_?"startAfter":"startAt";n[r]=xr(e.indexStartValue_),e.startNameSet_&&(n[r]+=","+xr(e.indexStartName_))}if(e.endSet_){var i=e.endBeforeSet_?"endBefore":"endAt";n[i]=xr(e.indexEndValue_),e.endNameSet_&&(n[i]+=","+xr(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function Vs(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==vs&&(t.i=e.index_.toString()),t}var qs=function(e){k(n,e);var t=x(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=Fa("p:rest:"),o.listens_={},o}return m(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var s=n.getListenId_(e,r),u={};this.listens_[s]=u;var c=Us(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),Tr(a.listens_,s)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=Us(e._queryParams),r=e._path.toString(),i=new cr;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=l(i,2),o=a[0],s=a[1];o&&o.accessToken&&(n.auth=o.accessToken),s&&s.token&&(n.ac=s.token);var u=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+Pr(n);t.log_("Sending REST request for "+u);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+u+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=_r(c.responseText)}catch(n){Ua("Failed to parse JSON response for "+u+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&Ua("Got unsuccessful REST response for "+u+" Status: "+c.status),r(c.status);r=null}},c.open("GET",u,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(Jn(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(xo),Bs=function(){function e(){d(this,e),this.rootNode_=ws.EMPTY_NODE}return m(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function zs(){return{value:null,children:new Map}}function Ws(e,t,n){if(Mo(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=No(t);e.children.has(r)||e.children.set(r,zs()),Ws(e.children.get(r),t=Ro(t),n)}}function Hs(e,t){if(Mo(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(vs,(function(t,n){Ws(e,new Co(t),n)})),Hs(e,t)}if(e.children.size>0){var r=No(t);if(t=Ro(t),e.children.has(r))Hs(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function Ks(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){Ks(r,new Co(t.toString()+"/"+e),n)}))}var Gs,Qs=function(){function e(t){d(this,e),this.collection_=t,this.last_=null}return m(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Qa(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),$s=function(){function e(t,n){d(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new Qs(t);var r=1e4+2e4*Math.random();Za(this.reportStats_.bind(this),Math.floor(r))}return m(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;Qa(t,(function(t,i){i>0&&Er(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),Za(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function Ys(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Gs||(Gs={}));var Js,Xs=function(){function e(t,n,r){d(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=Gs.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return m(e,[{key:"operationForChild",value:function(t){if(Mo(this.path)){if(null!=this.affectedTree.value)return Jn(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Co(t));return new e(Ao(),n,this.revert)}return Jn(No(this.path)===t,"operationForChild called for unrelated child."),new e(Ro(this.path),this.affectedTree,this.revert)}}]),e}(),Zs=function(){function e(t,n){d(this,e),this.source=t,this.path=n,this.type=Gs.LISTEN_COMPLETE}return m(e,[{key:"operationForChild",value:function(t){return Mo(this.path)?new e(this.source,Ao()):new e(this.source,Ro(this.path))}}]),e}(),eu=function(){function e(t,n,r){d(this,e),this.source=t,this.path=n,this.snap=r,this.type=Gs.OVERWRITE}return m(e,[{key:"operationForChild",value:function(t){return Mo(this.path)?new e(this.source,Ao(),this.snap.getImmediateChild(t)):new e(this.source,Ro(this.path),this.snap)}}]),e}(),tu=function(){function e(t,n,r){d(this,e),this.source=t,this.path=n,this.children=r,this.type=Gs.MERGE}return m(e,[{key:"operationForChild",value:function(t){if(Mo(this.path)){var n=this.children.subtree(new Co(t));return n.isEmpty()?null:n.value?new eu(this.source,Ao(),n.value):new e(this.source,Ao(),n)}return Jn(No(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,Ro(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),nu=function(){function e(t,n,r){d(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return m(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(Mo(e))return this.isFullyInitialized()&&!this.filtered_;var t=No(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),ru=m((function e(t){d(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function iu(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw Xn("Should only compare child_ events.");var r=new $o(t.childName,t.snapshotNode),i=new $o(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function au(e,t){return{eventCache:e,serverCache:t}}function ou(e,t,n,r){return au(new nu(t,n,r),e.serverCache)}function su(e,t,n,r){return au(e.eventCache,new nu(t,n,r))}function uu(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function cu(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var lu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(Js||(Js=new rs(Wa)),Js);d(this,e),this.value=t,this.children=n}return m(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:Ao(),value:this.value};if(Mo(e))return null;var n=No(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(Ro(e),t);return null!=i?{path:Fo(new Co(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(Mo(t))return this;var n=No(t),r=this.children.get(n);return null!==r?r.subtree(Ro(t)):new e(null)}},{key:"set",value:function(t,n){if(Mo(t))return new e(n,this.children);var r=No(t),i=(this.children.get(r)||new e(null)).set(Ro(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(Mo(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=No(t),r=this.children.get(n);if(r){var i,a=r.remove(Ro(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(Mo(e))return this.value;var t=No(e),n=this.children.get(t);return n?n.get(Ro(e)):null}},{key:"setTree",value:function(t,n){if(Mo(t))return n;var r,i=No(t),a=(this.children.get(i)||new e(null)).setTree(Ro(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(Ao(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(Fo(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,Ao(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(Mo(e))return null;var i=No(e),a=this.children.get(i);return a?a.findOnPath_(Ro(e),Fo(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,Ao(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(Mo(t))return this;this.value&&r(n,this.value);var i=No(t),a=this.children.get(i);return a?a.foreachOnPath_(Ro(t),Fo(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(Ao(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(Fo(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return Qa(t,(function(e,t){n=n.set(new Co(e),t)})),n}}]),e}(),hu=function(){function e(t){d(this,e),this.writeTree_=t}return m(e,null,[{key:"empty",value:function(){return new e(new lu(null))}}]),e}();function fu(e,t,n){if(Mo(t))return new hu(new lu(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=jo(i,t);return a=a.updateChild(o,n),new hu(e.writeTree_.set(i,a))}var s=new lu(n),u=e.writeTree_.setTree(t,s);return new hu(u)}function du(e,t,n){var r=e;return Qa(n,(function(e,n){r=fu(r,Fo(t,e),n)})),r}function pu(e,t){if(Mo(t))return hu.empty();var n=e.writeTree_.setTree(t,new lu(null));return new hu(n)}function vu(e,t){return null!=yu(e,t)}function yu(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(jo(n.path,t)):null}function mu(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(vs,(function(e,n){t.push(new $o(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new $o(e,n.value))})),t}function gu(e,t){if(Mo(t))return e;var n=yu(e,t);return new hu(null!=n?new lu(n):e.writeTree_.subtree(t))}function ku(e){return e.writeTree_.isEmpty()}function bu(e,t){return wu(Ao(),e.writeTree_,t)}function wu(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(Jn(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=wu(Fo(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Fo(e,".priority"),r)),n}function _u(e,t){return Lu(t,e)}function xu(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));Jn(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var s=e.allWrites[o];s.visible&&(o>=n&&Su(s,r.path)?i=!1:qo(r.path,s.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=Tu(e.allWrites,Eu,Ao()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=pu(e.visibleWrites,r.path):Qa(r.children,(function(t){e.visibleWrites=pu(e.visibleWrites,Fo(r.path,t))}));return!0}return!1}function Su(e,t){if(e.snap)return qo(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&qo(Fo(e.path,n),t))return!0;return!1}function Eu(e){return e.visible}function Tu(e,t,n){for(var r=hu.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,s=void 0;if(a.snap)qo(n,o)?r=fu(r,s=jo(n,o),a.snap):qo(o,n)&&(s=jo(o,n),r=fu(r,Ao(),a.snap.getChild(s)));else{if(!a.children)throw Xn("WriteRecord should have .snap or .children");if(qo(n,o))r=du(r,s=jo(n,o),a.children);else if(qo(o,n))if(Mo(s=jo(o,n)))r=du(r,Ao(),a.children);else{var u=Tr(a.children,No(s));if(u){var c=u.getChild(Ro(s));r=fu(r,Ao(),c)}}}}}return r}function Iu(e,t,n,r,i){if(r||i){var a=gu(e.visibleWrites,t);if(!i&&ku(a))return n;if(i||null!=n||vu(a,Ao())){return bu(Tu(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(qo(e.path,t)||qo(t,e.path))}),t),n||ws.EMPTY_NODE)}return null}var o=yu(e.visibleWrites,t);if(null!=o)return o;var s=gu(e.visibleWrites,t);return ku(s)?n:null!=n||vu(s,Ao())?bu(s,n||ws.EMPTY_NODE):null}function Cu(e,t,n,r){return Iu(e.writeTree,e.treePath,t,n,r)}function Au(e,t){return function(e,t,n){var r=ws.EMPTY_NODE,i=yu(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(vs,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=gu(e.visibleWrites,t);return n.forEachChild(vs,(function(e,t){var n=bu(gu(a,new Co(e)),t);r=r.updateImmediateChild(e,n)})),mu(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return mu(gu(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function Nu(e,t,n,r){return function(e,t,n,r,i){Jn(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=Fo(t,n);if(vu(e.visibleWrites,a))return null;var o=gu(e.visibleWrites,a);return ku(o)?i.getChild(n):bu(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function Pu(e,t){return function(e,t){return yu(e.visibleWrites,t)}(e.writeTree,Fo(e.treePath,t))}function Ru(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var s,u=gu(e.visibleWrites,t),c=yu(u,Ao());if(null!=c)s=c;else{if(null==n)return[];s=bu(u,n)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=o.getCompare(),f=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o),d=f.getNext();d&&l.length<i;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function Ou(e,t,n){return function(e,t,n,r){var i=Fo(t,n),a=yu(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?bu(gu(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function Du(e,t){return Lu(Fo(e.treePath,t),e.writeTree)}function Lu(e,t){return{treePath:e,writeTree:t}}var Fu=function(){function e(){d(this,e),this.changeMap=new Map}return m(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;Jn("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Jn(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Ps(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Ns(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,As(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Xn("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Ps(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),Mu=new(function(){function e(){d(this,e)}return m(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),ju=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;d(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return m(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new nu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ou(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:cu(this.viewCache_),i=Ru(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function Uu(e,t,n,r,i){var a,o,s=new Fu;if(n.type===Gs.OVERWRITE){var u=n;u.source.fromUser?a=Bu(e,t,u.path,u.snap,r,i,s):(Jn(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.serverCache.isFiltered()&&!Mo(u.path),a=qu(e,t,u.path,u.snap,r,i,o,s))}else if(n.type===Gs.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var s=t;return r.foreach((function(r,u){var c=Fo(n,r);zu(t,No(c))&&(s=Bu(e,s,c,u,i,a,o))})),r.foreach((function(r,u){var c=Fo(n,r);zu(t,No(c))||(s=Bu(e,s,c,u,i,a,o))})),s}(e,t,c.path,c.children,r,i,s):(Jn(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=Hu(e,t,c.path,c.children,r,i,o,s))}else if(n.type===Gs.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=Pu(r,n))return t;var s,u=new ju(r,t,i),c=t.eventCache.getNode();if(Mo(n)||".priority"===No(n)){var l;if(t.serverCache.isFullyInitialized())l=Cu(r,cu(t));else{var h=t.serverCache.getNode();Jn(h instanceof ws,"serverChildren would be complete if leaf node"),l=Au(r,h)}s=e.filter.updateFullNode(c,l,a)}else{var f=No(n),d=Ou(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=c.getImmediateChild(f)),(s=null!=d?e.filter.updateChild(c,f,d,Ro(n),u,a):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(c,f,ws.EMPTY_NODE,Ro(n),u,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Cu(r,cu(t))).isLeafNode()&&(s=e.filter.updateFullNode(s,o,a))}return o=t.serverCache.isFullyInitialized()||null!=Pu(r,Ao()),ou(t,s,o,e.filter.filtersNodes())}(e,t,l.path,r,i,s):function(e,t,n,r,i,a,o){if(null!=Pu(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(Mo(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return qu(e,t,n,u.getNode().getChild(n),i,a,s,o);if(Mo(n)){var c=new lu(null);return u.getNode().forEachChild(Xo,(function(e,t){c=c.set(new Co(e),t)})),Hu(e,t,n,c,i,a,s,o)}return t}var l=new lu(null);return r.foreach((function(e,t){var r=Fo(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))})),Hu(e,t,n,l,i,a,s,o)}(e,t,l.path,l.affectedTree,r,i,s)}else{if(n.type!==Gs.LISTEN_COMPLETE)throw Xn("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=su(t,a.getNode(),a.isFullyInitialized()||Mo(n),a.isFiltered());return Vu(e,o,n,r,Mu,i)}(e,t,n.path,r,s)}var h=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=uu(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(Cs(uu(t)))}}(t,a,h),{viewCache:a,changes:h}}function Vu(e,t,n,r,i,a){var o,s,u=t.eventCache;if(null!=Pu(r,n))return t;if(Mo(n))if(Jn(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=cu(t),l=Au(r,c instanceof ws?c:ws.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var h=Cu(r,cu(t));o=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=No(n);if(".priority"===f){Jn(1===Po(n),"Can't have a priority with additional path components");var d=u.getNode(),p=Nu(r,n,d,s=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):u.getNode()}else{var v,y=Ro(n);if(u.isCompleteForChild(f)){s=t.serverCache.getNode();var m=Nu(r,n,u.getNode(),s);v=null!=m?u.getNode().getImmediateChild(f).updateChild(y,m):u.getNode().getImmediateChild(f)}else v=Ou(r,f,t.serverCache);o=null!=v?e.filter.updateChild(u.getNode(),f,v,y,i,a):u.getNode()}}return ou(t,o,u.isFullyInitialized()||Mo(n),e.filter.filtersNodes())}function qu(e,t,n,r,i,a,o,s){var u,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(Mo(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=No(n);if(!c.isCompleteForPath(n)&&Po(n)>1)return t;var d=Ro(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,Mu,null)}var v=su(t,u,c.isFullyInitialized()||Mo(n),l.filtersNodes());return Vu(e,v,n,i,new ju(i,v,a),s)}function Bu(e,t,n,r,i,a,o){var s,u,c=t.eventCache,l=new ju(i,t,a);if(Mo(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),s=ou(t,u,!0,e.filter.filtersNodes());else{var h=No(n);if(".priority"===h)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=ou(t,u,c.isFullyInitialized(),c.isFiltered());else{var f,d=Ro(n),p=c.getNode().getImmediateChild(h);if(Mo(d))f=r;else{var v=l.getCompleteChild(h);f=null!=v?".priority"===Oo(d)&&v.getChild(Lo(d)).isEmpty()?v:v.updateChild(d,r):ws.EMPTY_NODE}if(p.equals(f))s=t;else s=ou(t,e.filter.updateChild(c.getNode(),h,f,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return s}function zu(e,t){return e.eventCache.isCompleteForChild(t)}function Wu(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function Hu(e,t,n,r,i,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,c=t;u=Mo(n)?r:new lu(null).setTree(n,r);var l=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=Wu(0,t.serverCache.getNode().getImmediateChild(n),r);c=qu(e,c,new Co(n),u,i,a,o,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!l.hasChild(n)&&!u){var h=Wu(0,t.serverCache.getNode().getImmediateChild(n),r);c=qu(e,c,new Co(n),h,i,a,o,s)}})),c}var Ku,Gu=function(){function e(t,n){d(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new Rs(i.getIndex()),o=(r=i).loadsAllData()?new Rs(r.getIndex()):r.hasLimit()?new Ds(r):new Os(r);this.processor_=function(e){return{filter:e}}(o);var s=n.serverCache,u=n.eventCache,c=a.updateFullNode(ws.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(ws.EMPTY_NODE,u.getNode(),null),h=new nu(c,s.isFullyInitialized(),a.filtersNodes()),f=new nu(l,u.isFullyInitialized(),o.filtersNodes());this.viewCache_=au(f,h),this.eventGenerator_=new ru(this.query_)}return m(e,[{key:"query",get:function(){return this.query_}}]),e}();function Qu(e,t){var n=cu(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Mo(t)&&!n.getImmediateChild(No(t)).isEmpty())?n.getChild(t):null}function $u(e){return 0===e.eventRegistrations_.length}function Yu(e,t,n){var r=[];if(n){Jn(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var s=e.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(s)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function Ju(e,t,n,r){t.type===Gs.MERGE&&null!==t.source.queryId&&(Jn(cu(e.viewCache_),"We should always have a full cache before handling merges"),Jn(uu(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,s=Uu(e.processor_,o,t,n,r);return i=e.processor_,a=s.viewCache,Jn(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Jn(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Jn(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,Xu(e,s.changes,s.viewCache.eventCache.getNode(),null)}function Xu(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),iu(e,i,"child_removed",t,r,n),iu(e,i,"child_added",t,r,n),iu(e,i,"child_moved",a,r,n),iu(e,i,"child_changed",t,r,n),iu(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var Zu,ec=m((function e(){d(this,e),this.views=new Map}));function tc(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return Jn(null!=a,"SyncTree gave us an op for an invalid query."),Ju(a,t,n,r)}var o,s=[],u=I(e.views.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s=s.concat(Ju(c,t,n,r))}}catch(l){u.e(l)}finally{u.f()}return s}function nc(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var s=Cu(n,i?r:null),u=!1;s?u=!0:r instanceof ws?(s=Au(n,r),u=!1):(s=ws.EMPTY_NODE,u=!1);var c=au(new nu(s,u,!1),new nu(r,i,!1));return new Gu(t,c)}return o}function rc(e,t,n,r,i,a){var o=nc(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(vs,(function(e,t){r.push(As(e,t))})),n.isFullyInitialized()&&r.push(Cs(n.getNode())),Xu(e,r,n.getNode(),t)}(o,n)}function ic(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],s=cc(e);if("default"===i){var u,c=I(e.views.entries());try{for(c.s();!(u=c.n()).done;){var h=l(u.value,2),f=h[0],d=h[1];o=o.concat(Yu(d,n,r)),$u(d)&&(e.views.delete(f),d.query._queryParams.loadsAllData()||a.push(d.query))}}catch(v){c.e(v)}finally{c.f()}}else{var p=e.views.get(i);p&&(o=o.concat(Yu(p,n,r)),$u(p)&&(e.views.delete(i),p.query._queryParams.loadsAllData()||a.push(p.query)))}return s&&!cc(e)&&a.push(new(Jn(Ku,"Reference.ts has not been loaded"),Ku)(t._repo,t._path)),{removed:a,events:o}}function ac(e){var t,n=[],r=I(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function oc(e,t){var n,r=null,i=I(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||Qu(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function sc(e,t){if(t._queryParams.loadsAllData())return lc(e);var n=t._queryIdentifier;return e.views.get(n)}function uc(e,t){return null!=sc(e,t)}function cc(e){return null!=lc(e)}function lc(e){var t,n=I(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var hc=1,fc=m((function e(t){d(this,e),this.listenProvider_=t,this.syncPointTree_=new lu(null),this.pendingWriteTree_={visibleWrites:hu.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function dc(e,t,n,r,i){return function(e,t,n,r,i){Jn(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=fu(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?_c(e,new eu({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function pc(e,t,n,r){!function(e,t,n,r){Jn(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=du(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=lu.fromObject(n);return _c(e,new tu({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function vc(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(xu(e.pendingWriteTree_,t)){var i=new lu(null);return null!=r.snap?i=i.set(Ao(),!0):Qa(r.children,(function(e){i=i.set(new Co(e),!0)})),_c(e,new Xs(r.path,i,n))}return[]}function yc(e,t,n){return _c(e,new eu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function mc(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t._path,o=e.syncPointTree_.get(a),s=[];if(o&&("default"===t._queryIdentifier||uc(o,t))){var u=ic(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(a));var c=u.removed;if(s=u.events,!i){var l=-1!==c.findIndex((function(e){return e._queryParams.loadsAllData()})),h=e.syncPointTree_.findOnPath(a,(function(e,t){return cc(t)}));if(l&&!h){var f=e.syncPointTree_.subtree(a);if(!f.isEmpty())for(var d=function(e){return e.fold((function(e,t,n){if(t&&cc(t))return[lc(t)];var r=[];return t&&(r=ac(t)),Qa(n,(function(e,t){r=r.concat(t)})),r}))}(f),p=0;p<d.length;++p){var v=d[p],y=v.query,m=Ec(e,v);e.listenProvider_.startListening(Pc(y),Tc(e,y),m.hashFn,m.onComplete)}}if(!h&&c.length>0&&!r)if(l){e.listenProvider_.stopListening(Pc(t),null)}else c.forEach((function(t){var n=e.queryToTagMap.get(Ic(t));e.listenProvider_.stopListening(Pc(t),n)}))}!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=Ic(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}(e,c)}return s}function gc(e,t,n,r){var i=Cc(e,r);if(null!=i){var a=Ac(i),o=a.path,s=a.queryId,u=jo(o,t);return Nc(e,o,new eu(Ys(s),u,n))}return[]}function kc(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t._path,a=null,o=!1;e.syncPointTree_.foreachOnPath(i,(function(e,t){var n=jo(e,i);a=a||oc(t,n),o=o||cc(t)}));var s,u=e.syncPointTree_.get(i);(u?(o=o||cc(u),a=a||oc(u,Ao())):(u=new ec,e.syncPointTree_=e.syncPointTree_.set(i,u)),null!=a)?s=!0:(s=!1,a=ws.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((function(e,t){var n=oc(t,Ao());n&&(a=a.updateImmediateChild(e,n))})));var c=uc(u,t);if(!c&&!t._queryParams.loadsAllData()){var l=Ic(t);Jn(!e.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=hc++;e.queryToTagMap.set(l,h),e.tagToQueryMap.set(h,l)}var f=rc(u,t,n,_u(e.pendingWriteTree_,i),a,s);if(!c&&!o&&!r){var d=sc(u,t);f=f.concat(function(e,t,n){var r=t._path,i=Tc(e,t),a=Ec(e,n),o=e.listenProvider_.startListening(Pc(t),i,a.hashFn,a.onComplete),s=e.syncPointTree_.subtree(r);if(i)Jn(!cc(s.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(e,t,n){if(!Mo(e)&&t&&cc(t))return[lc(t).query];var r=[];return t&&(r=r.concat(ac(t).map((function(e){return e.query})))),Qa(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<u.length;++c){var l=u[c];e.listenProvider_.stopListening(Pc(l),Tc(e,l))}return o}(e,t,d))}return f}function bc(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=oc(n,jo(e,t));if(r)return r}));return Iu(r,t,i,n,!0)}function wc(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=jo(e,n);r=r||oc(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||oc(i,Ao()):(i=new ec,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new nu(r,!0,!1):null;return function(e){return uu(e.viewCache_)}(nc(i,t,_u(e.pendingWriteTree_,t._path),a?o.getNode():ws.EMPTY_NODE,a))}function _c(e,t){return xc(t,e.syncPointTree_,null,_u(e.pendingWriteTree_,Ao()))}function xc(e,t,n,r){if(Mo(e.path))return Sc(e,t,n,r);var i=t.get(Ao());null==n&&null!=i&&(n=oc(i,Ao()));var a=[],o=No(e.path),s=e.operationForChild(o),u=t.children.get(o);if(u&&s){var c=n?n.getImmediateChild(o):null,l=Du(r,o);a=a.concat(xc(s,u,c,l))}return i&&(a=a.concat(tc(i,e,r,n))),a}function Sc(e,t,n,r){var i=t.get(Ao());null==n&&null!=i&&(n=oc(i,Ao()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,s=Du(r,t),u=e.operationForChild(t);u&&(a=a.concat(Sc(u,i,o,s)))})),i&&(a=a.concat(tc(i,e,r,n))),a}function Ec(e,t){var n=t.query,r=Tc(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||ws.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=Cc(e,n);if(r){var i=Ac(r),a=i.path,o=i.queryId,s=jo(a,t);return Nc(e,a,new Zs(Ys(o),s))}return[]}(e,n._path,r):function(e,t){return _c(e,new Zs({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return mc(e,n,null,i)}}}function Tc(e,t){var n=Ic(t);return e.queryToTagMap.get(n)}function Ic(e){return e._path.toString()+"$"+e._queryIdentifier}function Cc(e,t){return e.tagToQueryMap.get(t)}function Ac(e){var t=e.indexOf("$");return Jn(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Co(e.substr(0,t))}}function Nc(e,t,n){var r=e.syncPointTree_.get(t);return Jn(r,"Missing sync point for query tag that we're tracking"),tc(r,n,_u(e.pendingWriteTree_,t),null)}function Pc(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Jn(Zu,"Reference.ts has not been loaded"),Zu)(e._repo,e._path):e}var Rc=function(){function e(t){d(this,e),this.node_=t}return m(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),Oc=function(){function e(t,n){d(this,e),this.syncTree_=t,this.path_=n}return m(e,[{key:"getImmediateChild",value:function(t){var n=Fo(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return bc(this.syncTree_,this.path_)}}]),e}(),Dc=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},Lc=function(e,t,n){return e&&"object"===typeof e?(Jn(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?Fc(e[".sv"],t,n):"object"===typeof e[".sv"]?Mc(e[".sv"],t):void Jn(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Fc=function(e,t,n){if("timestamp"===e)return n.timestamp;Jn(!1,"Unexpected server value: "+e)},Mc=function(e,t,n){e.hasOwnProperty("increment")||Jn(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&Jn(!1,"Unexpected increment value: "+r);var i=t.node();if(Jn(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},jc=function(e,t,n,r){return Vc(t,new Oc(n,e),r)},Uc=function(e,t,n){return Vc(e,new Rc(t),n)};function Vc(e,t,n){var r,i=e.getPriority().val(),a=Lc(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,s=Lc(o.getValue(),t,n);return s!==o.getValue()||a!==o.getPriority().val()?new hs(s,Ss(a)):e}var u=e;return r=u,a!==u.getPriority().val()&&(r=r.updatePriority(new hs(a))),u.forEachChild(vs,(function(e,i){var a=Vc(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var qc=m((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};d(this,e),this.name=t,this.parent=n,this.node=r}));function Bc(e,t){for(var n=t instanceof Co?t:new Co(t),r=e,i=No(n);null!==i;){var a=Tr(r.node.children,i)||{children:{},childCount:0};r=new qc(i,r,a),i=No(n=Ro(n))}return r}function zc(e){return e.node.value}function Wc(e,t){e.node.value=t,$c(e)}function Hc(e){return e.node.childCount>0}function Kc(e,t){Qa(e.node.children,(function(n,r){t(new qc(n,e,r))}))}function Gc(e,t,n,r){n&&!r&&t(e),Kc(e,(function(e){Gc(e,t,!0,r)})),n&&r&&t(e)}function Qc(e){return new Co(null===e.parent?e.name:Qc(e.parent)+"/"+e.name)}function $c(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===zc(e)&&!Hc(e)}(n),i=Er(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,$c(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,$c(e))}(e.parent,e.name,e)}var Yc=/[\[\].#$\/\u0000-\u001F\u007F]/,Jc=/[\[\].#$\u0000-\u001F\u007F]/,Xc=10485760,Zc=function(e){return"string"===typeof e&&0!==e.length&&!Yc.test(e)},el=function(e){return"string"===typeof e&&0!==e.length&&!Jc.test(e)},tl=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!Va(e)||e&&"object"===typeof e&&Er(e,".sv")},nl=function(e,t,n,r){r&&void 0===t||rl(Ur(e,"value"),t,n)},rl=function e(t,n,r){var i=r instanceof Co?new Bo(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+Wo(i));if("function"===typeof n)throw new Error(t+"contains a function "+Wo(i)+" with contents = "+n.toString());if(Va(n))throw new Error(t+"contains "+n.toString()+" "+Wo(i));if("string"===typeof n&&n.length>Xc/3&&Br(n)>Xc)throw new Error(t+"contains a string greater than "+Xc+" utf8 bytes "+Wo(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(Qa(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!Zc(n)))throw new Error(t+" contains an invalid key ("+n+") "+Wo(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var s,u;u=n,(s=i).parts_.length>0&&(s.byteLength_+=1),s.parts_.push(u),s.byteLength_+=Br(u),zo(s),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=Br(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+Wo(i)+" in addition to actual children.")}},il=function(e,t,n,r){if(!r||void 0!==t){var i=Ur(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var a=[];Qa(t,(function(e,t){var r=new Co(e);if(rl(i,t,Fo(n,r)),".priority"===Oo(r)&&!tl(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=Do(r=t[n]),a=0;a<i.length;a++)if(".priority"===i[a]&&a===i.length-1);else if(!Zc(i[a]))throw new Error(e+"contains an invalid key ("+i[a]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(Uo);var o=null;for(n=0;n<t.length;n++){if(r=t[n],null!==o&&qo(o,r))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(i,a)}},al=function(e,t,n){if(!n||void 0!==t){if(Va(t))throw new Error(Ur(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!tl(t))throw new Error(Ur(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ol=function(e,t,n,r){if((!r||void 0!==n)&&!Zc(n))throw new Error(Ur(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},sl=function(e,t,n,r){if((!r||void 0!==n)&&!el(n))throw new Error(Ur(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ul=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),sl(e,t,n,r)},cl=function(e,t){if(".info"===No(t))throw new Error(e+" failed = Can't modify data under /.info/")},ll=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Zc(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),el(e)}(n))throw new Error(Ur(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},hl=m((function e(){d(this,e),this.eventLists_=[],this.recursionDepth_=0}));function fl(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||Vo(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function dl(e,t,n){fl(e,n),vl(e,(function(e){return Vo(e,t)}))}function pl(e,t,n){fl(e,n),vl(e,(function(e){return qo(e,t)||qo(t,e)}))}function vl(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(yl(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function yl(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();Ra&&La("event: "+n.toString()),Xa(r)}}}var ml="repo_interrupt",gl=25,kl=function(){function e(t,n,r,i){d(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new hl,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=zs(),this.transactionQueueTree_=new qc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return m(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function bl(e,t,n){if(e.stats_=po(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new qs(e.repoInfo_,(function(t,n,r,i){xl(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return Sl(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{xr(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Go(e.repoInfo_,t,(function(t,n,r,i){xl(e,t,n,r,i)}),(function(t){Sl(e,t)}),(function(t){!function(e,t){Qa(t,(function(t,n){El(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return fo[n]||(fo[n]=t()),fo[n]}(e.repoInfo_,(function(){return new $s(e.stats_,e.server_)})),e.infoData_=new Bs,e.infoSyncTree_=new fc({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=yc(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),El(e,"connected",!1),e.serverSyncTree_=new fc({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);pl(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function wl(e){var t=e.infoData_.getNode(new Co(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function _l(e){return Dc({timestamp:wl(e)})}function xl(e,t,n,r,i){e.dataUpdateCount++;var a=new Co(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var s=Cr(n,(function(e){return Ss(e)}));o=function(e,t,n,r){var i=Cc(e,r);if(i){var a=Ac(i),o=a.path,s=a.queryId,u=jo(o,t),c=lu.fromObject(n);return Nc(e,o,new tu(Ys(s),u,c))}return[]}(e.serverSyncTree_,a,s,i)}else{var u=Ss(n);o=gc(e.serverSyncTree_,a,u,i)}else if(r){var c=Cr(n,(function(e){return Ss(e)}));o=function(e,t,n){var r=lu.fromObject(n);return _c(e,new tu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=Ss(n);o=yc(e.serverSyncTree_,a,l)}var h=a;o.length>0&&(h=Fl(e,a)),pl(e.eventQueue_,h,o)}function Sl(e,t){El(e,"connected",t),!1===t&&function(e){Rl(e,"onDisconnectEvents");var t=_l(e),n=zs();Ks(e.onDisconnect_,Ao(),(function(r,i){var a=jc(r,i,e.serverSyncTree_,t);Ws(n,r,a)}));var r=[];Ks(n,Ao(),(function(t,n){r=r.concat(yc(e.serverSyncTree_,t,n));var i=ql(e,t);Fl(e,i)})),e.onDisconnect_=zs(),pl(e.eventQueue_,Ao(),r)}(e)}function El(e,t,n){var r=new Co("/.info/"+t),i=Ss(n);e.infoData_.updateSnapshot(r,i);var a=yc(e.infoSyncTree_,r,i);pl(e.eventQueue_,r,a)}function Tl(e){return e.nextWriteId_++}function Il(e,t,n,r,i){Rl(e,"set",{path:t.toString(),value:n,priority:r});var a=_l(e),o=Ss(n,r),s=bc(e.serverSyncTree_,t),u=Uc(o,s,a),c=Tl(e),l=dc(e.serverSyncTree_,t,u,c,!0);fl(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||Ua("set at "+t+" failed: "+n);var o=vc(e.serverSyncTree_,c,!a);pl(e.eventQueue_,t,o),Ol(e,i,n,r)}));var h=ql(e,t);Fl(e,h),pl(e.eventQueue_,h,[])}function Cl(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&Hs(e.onDisconnect_,t),Ol(e,n,r,i)}))}function Al(e,t,n,r){var i=Ss(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,a){"ok"===n&&Ws(e.onDisconnect_,t,i),Ol(e,r,n,a)}))}function Nl(e,t,n){var r;r=".info"===No(t._path)?mc(e.infoSyncTree_,t,n):mc(e.serverSyncTree_,t,n),dl(e.eventQueue_,t._path,r)}function Pl(e){e.persistentConnection_&&e.persistentConnection_.interrupt(ml)}function Rl(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];La.apply(void 0,[t].concat(r))}function Ol(e,t,n,r){t&&Xa((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function Dl(e,t,n){return bc(e.serverSyncTree_,t,n)||ws.EMPTY_NODE}function Ll(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||Vl(e,t),zc(t)){var n=jl(e,t);Jn(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return 0===e.status}))&&function(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=Dl(e,t,r),a=i,o=i.hash(),s=0;s<n.length;s++){var u=n[s];Jn(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var c=jo(t,u.path);a=a.updateChild(c,u.currentOutputSnapshotRaw)}var l=a.val(!0),h=t;e.server_.put(h.toString(),l,(function(r){Rl(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(vc(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)o(s);Vl(e,Bc(e.transactionQueueTree_,t)),Ll(e,e.transactionQueueTree_),pl(e.eventQueue_,t,i);for(var u=0;u<a.length;u++)Xa(a[u])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{Ua("transaction at "+h.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}Fl(e,t)}}),o)}(e,Qc(t),n)}else Hc(t)&&Kc(t,(function(t){Ll(e,t)}))}function Fl(e,t){var n=Ml(e,t),r=Qc(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),s=function(a){var s,u,c=t[a],l=jo(n,c.path),h=!1;if(Jn(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,s=c.abortReason,i=i.concat(vc(e.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=gl)h=!0,s="maxretry",i=i.concat(vc(e.serverSyncTree_,c.currentWriteId,!0));else{var f=Dl(e,c.path,o);c.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){rl("transaction failed: Data returned ",d,c.path);var p=Ss(d);"object"===typeof d&&null!=d&&Er(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=c.currentWriteId,y=_l(e),m=Uc(p,f,y);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=m,c.currentWriteId=Tl(e),o.splice(o.indexOf(v),1),i=(i=i.concat(dc(e.serverSyncTree_,c.path,m,c.currentWriteId,c.applyLocally))).concat(vc(e.serverSyncTree_,v,!0))}else h=!0,s="nodata",i=i.concat(vc(e.serverSyncTree_,c.currentWriteId,!0))}pl(e.eventQueue_,n,i),i=[],h&&(t[a].status=2,u=t[a].unwatcher,setTimeout(u,Math.floor(0)),t[a].onComplete&&("nodata"===s?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(s),!1,null)}))))},u=0;u<t.length;u++)s(u);Vl(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)Xa(r[c]);Ll(e,e.transactionQueueTree_)}(e,jl(e,n),r),r}function Ml(e,t){var n,r=e.transactionQueueTree_;for(n=No(t);null!==n&&void 0===zc(r);)r=Bc(r,n),n=No(t=Ro(t));return r}function jl(e,t){var n=[];return Ul(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function Ul(e,t,n){var r=zc(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Kc(t,(function(t){Ul(e,t,n)}))}function Vl(e,t){var n=zc(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Wc(t,n.length>0?n:void 0)}Kc(t,(function(t){Vl(e,t)}))}function ql(e,t){var n=Qc(Ml(e,t)),r=Bc(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){Bl(e,t)})),Bl(e,r),Gc(r,(function(t){Bl(e,t)})),n}function Bl(e,t){var n=zc(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(Jn(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(Jn(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(vc(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Wc(t,void 0):n.length=a+1,pl(e.eventQueue_,Qc(t),i);for(var s=0;s<r.length;s++)Xa(r[s])}}var zl=function(e,t){var n=Wl(e),r=n.namespace;"firebase.com"===n.domain&&ja(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||ja("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ua("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new uo(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Co(n.pathString)}},Wl=function(e){var t="",n="",r="",i="",a="",o=!0,s="https",u=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,h)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=I(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Ua("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(o="https"===s||"wss"===s,u=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in f&&(a=f.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}},Hl="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Kl=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=Hl.charAt(n%64),n=Math.floor(n/64);Jn(0===n,"Cannot push at time == 0");var o=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=Hl.charAt(t[r]);return Jn(20===o.length,"nextPushId: Length should be 20."),o}}(),Gl=function(){function e(t,n,r,i){d(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return m(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+xr(this.snapshot.exportVal())}}]),e}(),Ql=function(){function e(t,n,r){d(this,e),this.eventRegistration=t,this.error=n,this.path=r}return m(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),$l=function(){function e(t,n){d(this,e),this.snapshotCallback=t,this.cancelCallback=n}return m(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return Jn(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),Yl=function(){function e(t,n){d(this,e),this._repo=t,this._path=n}return m(e,[{key:"cancel",value:function(){var e=new cr;return Cl(this._repo,this._path,e.wrapCallback((function(){}))),e.promise}},{key:"remove",value:function(){cl("OnDisconnect.remove",this._path);var e=new cr;return Al(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise}},{key:"set",value:function(e){cl("OnDisconnect.set",this._path),nl("OnDisconnect.set",e,this._path,!1);var t=new cr;return Al(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}},{key:"setWithPriority",value:function(e,t){cl("OnDisconnect.setWithPriority",this._path),nl("OnDisconnect.setWithPriority",e,this._path,!1),al("OnDisconnect.setWithPriority",t,!1);var n=new cr;return function(e,t,n,r,i){var a=Ss(n,r);e.server_.onDisconnectPut(t.toString(),a.val(!0),(function(n,r){"ok"===n&&Ws(e.onDisconnect_,t,a),Ol(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise}},{key:"update",value:function(e){cl("OnDisconnect.update",this._path),il("OnDisconnect.update",e,this._path,!1);var t=new cr;return function(e,t,n,r){if(Ir(n))return La("onDisconnect().update() called with empty data.  Don't do anything."),void Ol(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,a){"ok"===i&&Qa(n,(function(n,r){var i=Ss(r);Ws(e.onDisconnect_,Fo(t,n),i)})),Ol(0,r,i,a)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}}]),e}(),Jl=function(){function e(t,n,r,i){d(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return m(e,[{key:"key",get:function(){return Mo(this._path)?null:Oo(this._path)}},{key:"ref",get:function(){return new th(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=Vs(this._queryParams),t=Ka(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return Vs(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=zr(t))instanceof e))return!1;var n=this._repo===t._repo,r=Vo(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();function Xl(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Zl(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Xo){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==qa)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==Ba)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===vs){if(null!=t&&!tl(t)||null!=n&&!tl(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Jn(e.getIndex()instanceof Es||e.getIndex()===Is,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function eh(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var th=function(e){k(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,r,new Ls,!1)}return m(n,[{key:"parent",get:function(){var e=Lo(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(Jl),nh=function(){function e(t,n,r){d(this,e),this._node=t,this.ref=n,this._index=r}return m(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new Co(t),r=ah(this.ref,t);return new e(this._node.getChild(n),r,vs)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,ah(n.ref,r),vs))}))}},{key:"hasChild",value:function(e){var t=new Co(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function rh(e,t){return(e=zr(e))._checkNotDeleted("ref"),void 0!==t?ah(e._root,t):e._root}function ih(e,t){(e=zr(e))._checkNotDeleted("refFromURL");var n=zl(t,e._repo.repoInfo_.nodeAdmin);ll("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||ja("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),rh(e,n.path.toString())}function ah(e,t){return null===No((e=zr(e))._path)?ul("child","path",t,!1):sl("child","path",t,!1),new th(e._repo,Fo(e._path,t))}function oh(e,t){e=zr(e),cl("set",e._path),nl("set",t,e._path,!1);var n=new cr;return Il(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function sh(e,t){il("update",t,e._path,!1);var n=new cr;return function(e,t,n,r){Rl(e,"update",{path:t.toString(),value:n});var i=!0,a=_l(e),o={};if(Qa(n,(function(n,r){i=!1,o[n]=jc(Fo(t,n),Ss(r),e.serverSyncTree_,a)})),i)La("update() called with empty data.  Don't do anything."),Ol(0,r,"ok",void 0);else{var s=Tl(e),u=pc(e.serverSyncTree_,t,o,s);fl(e.eventQueue_,u),e.server_.merge(t.toString(),n,(function(n,i){var a="ok"===n;a||Ua("update at "+t+" failed: "+n);var o=vc(e.serverSyncTree_,s,!a),u=o.length>0?Fl(e,t):t;pl(e.eventQueue_,u,o),Ol(0,r,n,i)})),Qa(n,(function(n){var r=ql(e,Fo(t,n));Fl(e,r)})),pl(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function uh(e){e=zr(e);var t=new $l((function(){})),n=new ch(t);return function(e,t,n){var r=wc(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((function(r){var i,a=Ss(r).withIndex(t._queryParams.getIndex());if(kc(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())i=yc(e.serverSyncTree_,t._path,a);else{var o=Tc(e.serverSyncTree_,t);i=gc(e.serverSyncTree_,t._path,a,o)}return pl(e.eventQueue_,t._path,i),mc(e.serverSyncTree_,t,n,null,!0),a}),(function(n){return Rl(e,"get for query "+xr(t)+" failed: "+n),Promise.reject(new Error(n))}))}(e._repo,e,n).then((function(t){return new nh(t,new th(e._repo,e._path),e._queryParams.getIndex())}))}var ch=function(){function e(t){d(this,e),this.callbackContext=t}return m(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new Gl("value",this,new nh(e.snapshotNode,new th(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new Ql(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),lh=function(){function e(t,n){d(this,e),this.eventType=t,this.callbackContext=n}return m(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new Ql(this,e,t):null}},{key:"createEvent",value:function(e,t){Jn(null!=e.childName,"Child events should have a childName.");var n=ah(new th(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new Gl(e.type,this,new nh(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function hh(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,s=function(t,n){Nl(e._repo,e,c),o(t,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new $l(n,a||void 0),c="value"===t?new ch(u):new lh(t,u);return function(e,t,n){var r;r=".info"===No(t._path)?kc(e.infoSyncTree_,t,n):kc(e.serverSyncTree_,t,n),dl(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return Nl(e._repo,e,c)}}function fh(e,t,n,r){return hh(e,"value",t,n,r)}function dh(e,t,n,r){return hh(e,"child_added",t,n,r)}function ph(e,t,n,r){return hh(e,"child_changed",t,n,r)}function vh(e,t,n,r){return hh(e,"child_moved",t,n,r)}function yh(e,t,n,r){return hh(e,"child_removed",t,n,r)}function mh(e,t,n){var r=null,i=n?new $l(n):null;"value"===t?r=new ch(i):t&&(r=new lh(t,i)),Nl(e._repo,e,r)}var gh=m((function e(){d(this,e)})),kh=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._value=e,i._key=r,i}return m(n,[{key:"_apply",value:function(e){nl("endAt",this._value,e._path,!0);var t=Ms(e._queryParams,this._value,this._key);if(eh(t),Zl(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Jl(e._repo,e._path,t,e._orderByCalled)}}]),n}(gh);var bh=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._value=e,i._key=r,i}return m(n,[{key:"_apply",value:function(e){nl("endBefore",this._value,e._path,!1);var t=function(e,t,n){var r;return(r=e.index_===Xo||n?Ms(e,t,n):Ms(e,t,qa)).endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(eh(t),Zl(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Jl(e._repo,e._path,t,e._orderByCalled)}}]),n}(gh);var wh=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._value=e,i._key=r,i}return m(n,[{key:"_apply",value:function(e){nl("startAt",this._value,e._path,!0);var t=Fs(e._queryParams,this._value,this._key);if(eh(t),Zl(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Jl(e._repo,e._path,t,e._orderByCalled)}}]),n}(gh);var _h=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._value=e,i._key=r,i}return m(n,[{key:"_apply",value:function(e){nl("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;return(r=e.index_===Xo||n?Fs(e,t,n):Fs(e,t,Ba)).startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(eh(t),Zl(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Jl(e._repo,e._path,t,e._orderByCalled)}}]),n}(gh);var xh=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this))._limit=e,r}return m(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Jl(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(gh);var Sh=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this))._limit=e,r}return m(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Jl(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(gh);var Eh=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this))._path=e,r}return m(n,[{key:"_apply",value:function(e){Xl(e,"orderByChild");var t=new Co(this._path);if(Mo(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new Es(t),r=js(e._queryParams,n);return Zl(r),new Jl(e._repo,e._path,r,!0)}}]),n}(gh);var Th=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n,[{key:"_apply",value:function(e){Xl(e,"orderByKey");var t=js(e._queryParams,Xo);return Zl(t),new Jl(e._repo,e._path,t,!0)}}]),n}(gh);var Ih=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n,[{key:"_apply",value:function(e){Xl(e,"orderByPriority");var t=js(e._queryParams,vs);return Zl(t),new Jl(e._repo,e._path,t,!0)}}]),n}(gh);var Ch=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n,[{key:"_apply",value:function(e){Xl(e,"orderByValue");var t=js(e._queryParams,Is);return Zl(t),new Jl(e._repo,e._path,t,!0)}}]),n}(gh);var Ah=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._value=e,i._key=r,i}return m(n,[{key:"_apply",value:function(e){if(nl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new kh(this._value,this._key)._apply(new wh(this._value,this._key)._apply(e))}}]),n}(gh);function Nh(e){for(var t=zr(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0,o=r;a<o.length;a++){t=o[a]._apply(t)}return t}!function(e){Jn(!Ku,"__referenceConstructor has already been defined"),Ku=e}(th),function(e){Jn(!Zu,"__referenceConstructor has already been defined"),Zu=e}(th);var Ph="FIREBASE_DATABASE_EMULATOR_HOST",Rh={},Oh=!1;function Dh(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||ja("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),La("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,s=zl(a,i),u=s.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}[Ph]),c?(o=!0,a="http://".concat(c,"?ns=").concat(u.namespace),u=(s=zl(a,i)).repoInfo):o=!s.repoInfo.secure;var l=i&&o?new no(no.OWNER):new to(e.name,e.options,t);ll("Invalid Firebase Database URL",s),Mo(s.path)||ja("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=Rh[t.name];i||(i={},Rh[t.name]=i);var a=i[e.toURLString()];a&&ja("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new kl(e,Oh,n,r),i[e.toURLString()]=a,a}(u,e,l,new eo(e.name,n));return new Lh(h,e)}var Lh=function(){function e(t,n){d(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return m(e,[{key:"_repo",get:function(){return this._instanceStarted||(bl(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new th(this._repo,Ao())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=Rh[t];n&&n[e.key]===e||ja("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),Pl(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&ja("Cannot call "+e+" on a deleted database.")}}]),e}();function Fh(){wo.IS_TRANSPORT_INITIALIZED&&Ua("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Mh(){Fh(),mo.forceDisallow()}function jh(){Fh(),bo.forceDisallow(),mo.forceAllow()}function Uh(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=zr(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&ja("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ja('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new no(no.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:lr(r.mockUserToken,e.app.options.projectId);a=new no(o)}!function(e,t,n,r){e.repoInfo_=new uo("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,a)}function Vh(e){var t;(e=zr(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(ml)}function qh(e,t){Da(e,t)}var Bh={".sv":"timestamp"};var zh=function(){function e(t,n){d(this,e),this.committed=t,this.snapshot=n}return m(e,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}();function Wh(e,t,n){var r;if(e=zr(e),cl("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new cr,o=fh(e,(function(){}));return function(e,t,n,r,i,a){Rl(e,"transaction on "+t);var o={path:t,update:n,onComplete:r,status:null,order:Aa(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=Dl(e,t,void 0);o.currentInputSnapshot=s;var u=o.update(s.val());if(void 0===u)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{rl("transaction failed: Data returned ",u,o.path),o.status=0;var c,l=Bc(e.transactionQueueTree_,t),h=zc(l)||[];h.push(o),Wc(l,h),"object"===typeof u&&null!==u&&Er(u,".priority")?(c=Tr(u,".priority"),Jn(tl(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(bc(e.serverSyncTree_,t)||ws.EMPTY_NODE).getPriority().val();var f=_l(e),d=Ss(u,c),p=Uc(d,s,f);o.currentOutputSnapshotRaw=d,o.currentOutputSnapshotResolved=p,o.currentWriteId=Tl(e);var v=dc(e.serverSyncTree_,t,p,o.currentWriteId,o.applyLocally);pl(e.eventQueue_,t,v),Ll(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?a.reject(t):(i=new nh(r,new th(e._repo,e._path),vs),a.resolve(new zh(n,i)))}),o,i),a.promise}Go.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Go.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){_a(Vi),Oi(new Wr("database",(function(e,t){var n=t.instanceIdentifier;return Dh(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Ki(ka,ba,e),Ki(ka,ba,"esm2017")}();var Hh=new ti("@firebase/database-compat"),Kh=function(e){var t="FIREBASE WARNING: "+e;Hh.warn(t)},Gh=function(){function e(t){d(this,e),this._delegate=t}return m(e,[{key:"cancel",value:function(e){jr("OnDisconnect.cancel",0,1,arguments.length),Vr("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"remove",value:function(e){jr("OnDisconnect.remove",0,1,arguments.length),Vr("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"set",value:function(e,t){jr("OnDisconnect.set",1,2,arguments.length),Vr("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"setWithPriority",value:function(e,t,n){jr("OnDisconnect.setWithPriority",2,3,arguments.length),Vr("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"update",value:function(e,t){if(jr("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,Kh("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Vr("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}}]),e}(),Qh=function(){function e(t,n){d(this,e),this.committed=t,this.snapshot=n}return m(e,[{key:"toJSON",value:function(){return jr("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}(),$h=function(){function e(t,n){d(this,e),this._database=t,this._delegate=n}return m(e,[{key:"val",value:function(){return jr("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return jr("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return jr("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return jr("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(t){return jr("DataSnapshot.child",0,1,arguments.length),t=String(t),sl("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}},{key:"hasChild",value:function(e){return jr("DataSnapshot.hasChild",1,1,arguments.length),sl("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}},{key:"getPriority",value:function(){return jr("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(t){var n=this;return jr("DataSnapshot.forEach",1,1,arguments.length),Vr("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))}},{key:"hasChildren",value:function(){return jr("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return jr("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return jr("DataSnapshot.ref",0,0,arguments.length),new Jh(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),e}(),Yh=function(){function e(t,n){d(this,e),this.database=t,this._delegate=n}return m(e,[{key:"on",value:function(t,n,r,i){var a,o=this;jr("Query.on",2,4,arguments.length),Vr("Query.on","callback",n,!1);var s=e.getCancelAndContextArgs_("Query.on",r,i),u=function(e,t){n.call(s.context,new $h(o.database,e),t)};u.userCallback=n,u.context=s.context;var c=null===(a=s.cancel)||void 0===a?void 0:a.bind(s.context);switch(t){case"value":return fh(this._delegate,u,c),n;case"child_added":return dh(this._delegate,u,c),n;case"child_removed":return yh(this._delegate,u,c),n;case"child_changed":return ph(this._delegate,u,c),n;case"child_moved":return vh(this._delegate,u,c),n;default:throw new Error(Ur("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(e,t,n){if(jr("Query.off",0,3,arguments.length),function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Ur(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}("Query.off",e,!0),Vr("Query.off","callback",t,!0),qr("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,mh(this._delegate,e,r)}else mh(this._delegate,e)}},{key:"get",value:function(){var e=this;return uh(this._delegate).then((function(t){return new $h(e.database,t)}))}},{key:"once",value:function(t,n,r,i){var a=this;jr("Query.once",1,4,arguments.length),Vr("Query.once","callback",n,!0);var o=e.getCancelAndContextArgs_("Query.once",r,i),s=new cr,u=function(e,t){var r=new $h(a.database,e);n&&n.call(o.context,r,t),s.resolve(r)};u.userCallback=n,u.context=o.context;var c=function(e){o.cancel&&o.cancel.call(o.context,e),s.reject(e)};switch(t){case"value":fh(this._delegate,u,c,{onlyOnce:!0});break;case"child_added":dh(this._delegate,u,c,{onlyOnce:!0});break;case"child_removed":yh(this._delegate,u,c,{onlyOnce:!0});break;case"child_changed":ph(this._delegate,u,c,{onlyOnce:!0});break;case"child_moved":vh(this._delegate,u,c,{onlyOnce:!0});break;default:throw new Error(Ur("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}},{key:"limitToFirst",value:function(t){return jr("Query.limitToFirst",1,1,arguments.length),new e(this.database,Nh(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new xh(e)}(t)))}},{key:"limitToLast",value:function(t){return jr("Query.limitToLast",1,1,arguments.length),new e(this.database,Nh(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Sh(e)}(t)))}},{key:"orderByChild",value:function(t){return jr("Query.orderByChild",1,1,arguments.length),new e(this.database,Nh(this._delegate,function(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return sl("orderByChild","path",e,!1),new Eh(e)}(t)))}},{key:"orderByKey",value:function(){return jr("Query.orderByKey",0,0,arguments.length),new e(this.database,Nh(this._delegate,new Th))}},{key:"orderByPriority",value:function(){return jr("Query.orderByPriority",0,0,arguments.length),new e(this.database,Nh(this._delegate,new Ih))}},{key:"orderByValue",value:function(){return jr("Query.orderByValue",0,0,arguments.length),new e(this.database,Nh(this._delegate,new Ch))}},{key:"startAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return jr("Query.startAt",0,2,arguments.length),new e(this.database,Nh(this._delegate,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return ol("startAt","key",t,!0),new wh(e,t)}(t,n)))}},{key:"startAfter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return jr("Query.startAfter",0,2,arguments.length),new e(this.database,Nh(this._delegate,function(e,t){return ol("startAfter","key",t,!0),new _h(e,t)}(t,n)))}},{key:"endAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return jr("Query.endAt",0,2,arguments.length),new e(this.database,Nh(this._delegate,function(e,t){return ol("endAt","key",t,!0),new kh(e,t)}(t,n)))}},{key:"endBefore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return jr("Query.endBefore",0,2,arguments.length),new e(this.database,Nh(this._delegate,function(e,t){return ol("endBefore","key",t,!0),new bh(e,t)}(t,n)))}},{key:"equalTo",value:function(t,n){return jr("Query.equalTo",1,2,arguments.length),new e(this.database,Nh(this._delegate,function(e,t){return ol("equalTo","key",t,!0),new Ah(e,t)}(t,n)))}},{key:"toString",value:function(){return jr("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return jr("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(t){if(jr("Query.isEqual",1,1,arguments.length),!(t instanceof e)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}return this._delegate.isEqual(t._delegate)}},{key:"ref",get:function(){return new Jh(this.database,new th(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,Vr(e,"cancel",r.cancel,!0),r.context=n,qr(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(Ur(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}}]),e}(),Jh=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,new Jl(r._repo,r._path,new Ls,!1))).database=e,i._delegate=r,i}return m(n,[{key:"getKey",value:function(){return jr("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(e){return jr("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new n(this.database,ah(this._delegate,e))}},{key:"getParent",value:function(){jr("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new n(this.database,e):null}},{key:"getRoot",value:function(){return jr("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(e,t){jr("Reference.set",1,2,arguments.length),Vr("Reference.set","onComplete",t,!0);var n=oh(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"update",value:function(e,t){if(jr("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,Kh("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}cl("Reference.update",this._delegate._path),Vr("Reference.update","onComplete",t,!0);var i=sh(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}},{key:"setWithPriority",value:function(e,t,n){jr("Reference.setWithPriority",2,3,arguments.length),Vr("Reference.setWithPriority","onComplete",n,!0);var r=function(e,t,n){if(cl("setWithPriority",e._path),nl("setWithPriority",t,e._path,!1),al("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new cr;return Il(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"remove",value:function(e){jr("Reference.remove",0,1,arguments.length),Vr("Reference.remove","onComplete",e,!0);var t,n=(t=this._delegate,cl("remove",t._path),oh(t,null));return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n}},{key:"transaction",value:function(e,t,n){var r=this;jr("Reference.transaction",1,3,arguments.length),Vr("Reference.transaction","transactionUpdate",e,!1),Vr("Reference.transaction","onComplete",t,!0),function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(Ur(e,t)+"must be a boolean.")}("Reference.transaction","applyLocally",n,!0);var i=Wh(this._delegate,e,{applyLocally:n}).then((function(e){return new Qh(e.committed,new $h(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i}},{key:"setPriority",value:function(e,t){jr("Reference.setPriority",1,2,arguments.length),Vr("Reference.setPriority","onComplete",t,!0);var n=function(e,t){e=zr(e),cl("setPriority",e._path),al("setPriority",t,!1);var n=new cr;return Il(e._repo,Fo(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"push",value:function(e,t){var r=this;jr("Reference.push",0,2,arguments.length),Vr("Reference.push","onComplete",t,!0);var i=function(e,t){e=zr(e),cl("push",e._path),nl("push",t,e._path,!0);var n,r=wl(e._repo),i=Kl(r),a=ah(e,i),o=ah(e,i);return n=null!=t?oh(o,t).then((function(){return o})):Promise.resolve(o),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}(this._delegate,e),a=i.then((function(e){return new n(r.database,e)}));t&&a.then((function(){return t(null)}),(function(e){return t(e)}));var o=new n(this.database,i);return o.then=a.then.bind(a),o.catch=a.catch.bind(a,void 0),o}},{key:"onDisconnect",value:function(){return cl("Reference.onDisconnect",this._delegate._path),new Gh(new Yl(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}(Yh),Xh=function(){function e(t,n){var r=this;d(this,e),this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()},forceWebSockets:Mh,forceLongPolling:jh}}return m(e,[{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Uh(this._delegate,e,t,n)}},{key:"ref",value:function(e){if(jr("database.ref",0,1,arguments.length),e instanceof Jh){var t=ih(this._delegate,e.toString());return new Jh(this,t)}var n=rh(this._delegate,e);return new Jh(this,n)}},{key:"refFromURL",value:function(e){jr("database.refFromURL",1,1,arguments.length);var t=ih(this._delegate,e);return new Jh(this,t)}},{key:"goOffline",value:function(){return jr("database.goOffline",0,0,arguments.length),function(e){(e=zr(e))._checkNotDeleted("goOffline"),Pl(e._repo)}(this._delegate)}},{key:"goOnline",value:function(){return jr("database.goOnline",0,0,arguments.length),Vh(this._delegate)}}]),e}();Xh.ServerValue={TIMESTAMP:Bh,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}};var Zh,ef=Object.freeze({__proto__:null,initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,a=e.namespace,o=e.nodeAdmin,s=void 0!==o&&o;_a(r);var u=new Kr("auth-internal",new $r("database-standalone"));return u.setComponent(new Wr("auth-internal",(function(){return i}),"PRIVATE")),{instance:new Xh(Dh(t,u,void 0,n,s),t),namespace:a}}}),tf=Xh.ServerValue;function nf(){return nf="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},nf.apply(this,arguments)}(Zh=ga).INTERNAL.registerComponent(new Wr("database-compat",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new Xh(i,r)}),"PUBLIC").setServiceProps({Reference:Jh,Query:Yh,Database:Xh,DataSnapshot:$h,enableLogging:qh,INTERNAL:ef,ServerValue:tf}).setMultipleInstances(!0)),Zh.registerVersion("@firebase/database-compat","0.3.4");var rf,af="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},of={},sf=sf||{},uf=af||self;function cf(){}function lf(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function hf(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var ff="closure_uid_"+(1e9*Math.random()>>>0),df=0;function pf(e,t,n){return e.call.apply(e.bind,arguments)}function vf(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function yf(e,t,n){return(yf=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?pf:vf).apply(null,arguments)}function mf(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function gf(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function kf(){this.s=this.s,this.o=this.o}kf.prototype.s=!1,kf.prototype.ra=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,ff)&&e[ff]||(e[ff]=++df))},kf.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var bf=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function wf(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function _f(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(lf(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function xf(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}xf.prototype.h=function(){this.defaultPrevented=!0};var Sf=function(){if(!uf.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{uf.addEventListener("test",cf,t),uf.removeEventListener("test",cf,t)}catch(n){}return e}();function Ef(e){return/^[\s\xa0]*$/.test(e)}var Tf=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function If(e,t){return e<t?-1:e>t?1:0}function Cf(){var e=uf.navigator;return e&&(e=e.userAgent)?e:""}function Af(e){return-1!=Cf().indexOf(e)}function Nf(e){return Nf[" "](e),e}function Pf(e,t,n){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:e[t]=n(t)}Nf[" "]=cf;var Rf,Of=Af("Opera"),Df=Af("Trident")||Af("MSIE"),Lf=Af("Edge"),Ff=Lf||Df,Mf=Af("Gecko")&&!(-1!=Cf().toLowerCase().indexOf("webkit")&&!Af("Edge"))&&!(Af("Trident")||Af("MSIE"))&&!Af("Edge"),jf=-1!=Cf().toLowerCase().indexOf("webkit")&&!Af("Edge");function Uf(){var e=uf.document;return e?e.documentMode:void 0}e:{var Vf="",qf=function(){var e=Cf();return Mf?/rv:([^\);]+)(\)|;)/.exec(e):Lf?/Edge\/([\d\.]+)/.exec(e):Df?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):jf?/WebKit\/(\S+)/.exec(e):Of?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(qf&&(Vf=qf?qf[1]:""),Df){var Bf=Uf();if(null!=Bf&&Bf>parseFloat(Vf)){Rf=String(Bf);break e}}Rf=Vf}var zf,Wf={};if(uf.document&&Df){var Hf=Uf();zf=Hf||(parseInt(Rf,10)||void 0)}else zf=void 0;var Kf=zf;function Gf(e,t){if(xf.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Mf){e:{try{Nf(t.nodeName);var i=!0;break e}catch(En){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Qf[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Gf.$.h.call(this)}}gf(Gf,xf);var Qf={2:"touch",3:"pen",4:"mouse"};Gf.prototype.h=function(){Gf.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var $f="closure_listenable_"+(1e6*Math.random()|0),Yf=0;function Jf(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Yf,this.fa=this.ia=!1}function Xf(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Zf(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function ed(e){var t={};for(var n in e)t[n]=e[n];return t}var td="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function nd(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<td.length;a++)n=td[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function rd(e){this.src=e,this.g={},this.h=0}function id(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=bf(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Xf(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ad(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}rd.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=ad(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Jf(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var od="closure_lm_"+(1e6*Math.random()|0),sd={};function ud(e,t,n,r,i){if(r&&r.once)return ld(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)ud(e,t[a],n,r,i);return null}return n=md(n),e&&e[$f]?e.O(t,n,hf(r)?!!r.capture:!!r,i):cd(e,t,n,!1,r,i)}function cd(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=hf(i)?!!i.capture:!!i,s=vd(e);if(s||(e[od]=s=new rd(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=pd;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Sf||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(dd(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ld(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)ld(e,t[a],n,r,i);return null}return n=md(n),e&&e[$f]?e.P(t,n,hf(r)?!!r.capture:!!r,i):cd(e,t,n,!0,r,i)}function hd(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)hd(e,t[a],n,r,i);else r=hf(r)?!!r.capture:!!r,n=md(n),e&&e[$f]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=ad(a=e.g[t],n,r,i))&&(Xf(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=vd(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ad(t,n,r,i)),(n=-1<e?t[e]:null)&&fd(n))}function fd(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[$f])id(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(dd(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=vd(t))?(id(n,e),0==n.h&&(n.src=null,t[od]=null)):Xf(e)}}}function dd(e){return e in sd?sd[e]:sd[e]="on"+e}function pd(e,t){if(e.fa)e=!0;else{t=new Gf(t,this);var n=e.listener,r=e.la||e.src;e.ia&&fd(e),e=n.call(r,t)}return e}function vd(e){return(e=e[od])instanceof rd?e:null}var yd="__closure_events_fn_"+(1e9*Math.random()>>>0);function md(e){return"function"===typeof e?e:(e[yd]||(e[yd]=function(t){return e.handleEvent(t)}),e[yd])}function gd(){kf.call(this),this.i=new rd(this),this.S=this,this.J=null}function kd(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new xf(t,e);else if(t instanceof xf)t.target=t.target||e;else{var i=t;nd(t=new xf(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=bd(o,r,!0,t)&&i}if(i=bd(o=t.g=e,r,!0,t)&&i,i=bd(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=bd(o=t.g=n[a],r,!1,t)&&i}function bd(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var s=o.listener,u=o.la||o.src;o.ia&&id(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}gf(gd,kf),gd.prototype[$f]=!0,gd.prototype.removeEventListener=function(e,t,n,r){hd(this,e,t,n,r)},gd.prototype.N=function(){if(gd.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Xf(n[r]);delete t.g[e],t.h--}}this.J=null},gd.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},gd.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var wd=uf.JSON.stringify;function _d(){var e=Nd,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var xd,Sd=function(){function e(){d(this,e),this.h=this.g=null}return m(e,[{key:"add",value:function(e,t){var n=Ed.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Ed=new(function(){function e(t,n){d(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return m(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Td}),(function(e){return e.reset()})),Td=function(){function e(){d(this,e),this.next=this.g=this.h=null}return m(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Id(e){uf.setTimeout((function(){throw e}),0)}function Cd(e,t){xd||function(){var e=uf.Promise.resolve(void 0);xd=function(){e.then(Pd)}}(),Ad||(xd(),Ad=!0),Nd.add(e,t)}var Ad=!1,Nd=new Sd;function Pd(){for(var e;e=_d();){try{e.h.call(e.g)}catch(n){Id(n)}var t=Ed;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ad=!1}function Rd(e,t){gd.call(this),this.h=e||1,this.g=t||uf,this.j=yf(this.qb,this),this.l=Date.now()}function Od(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Dd(e,t,n){if("function"===typeof e)n&&(e=yf(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=yf(e.handleEvent,e)}return 2147483647<Number(t)?-1:uf.setTimeout(e,t||0)}function Ld(e){e.g=Dd((function(){e.g=null,e.i&&(e.i=!1,Ld(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}gf(Rd,gd),(rf=Rd.prototype).ga=!1,rf.T=null,rf.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),kd(this,"tick"),this.ga&&(Od(this),this.start()))}},rf.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},rf.N=function(){Rd.$.N.call(this),Od(this),delete this.g};var Fd=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return m(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Ld(this)}},{key:"N",value:function(){nf(b(n.prototype),"N",this).call(this),this.g&&(uf.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(kf);function Md(e){kf.call(this),this.h=e,this.g={}}gf(Md,kf);var jd=[];function Ud(e,t,n,r){Array.isArray(n)||(n&&(jd[0]=n.toString()),n=jd);for(var i=0;i<n.length;i++){var a=ud(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Vd(e){Zf(e.g,(function(e,t){this.g.hasOwnProperty(t)&&fd(e)}),e),e.g={}}function qd(){this.g=!0}function Bd(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return wd(n)}catch(Cn){return t}}(e,n)+(r?" "+r:"")}))}Md.prototype.N=function(){Md.$.N.call(this),Vd(this)},Md.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},qd.prototype.Ea=function(){this.g=!1},qd.prototype.info=function(){};var zd={},Wd=null;function Hd(){return Wd=Wd||new gd}function Kd(e){xf.call(this,zd.Ta,e)}function Gd(e){var t=Hd();kd(t,new Kd(t))}function Qd(e,t){xf.call(this,zd.STAT_EVENT,e),this.stat=t}function $d(e){var t=Hd();kd(t,new Qd(t,e))}function Yd(e,t){xf.call(this,zd.Ua,e),this.size=t}function Jd(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return uf.setTimeout((function(){e()}),t)}zd.Ta="serverreachability",gf(Kd,xf),zd.STAT_EVENT="statevent",gf(Qd,xf),zd.Ua="timingevent",gf(Yd,xf);var Xd={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Zd={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ep(){}function tp(e){return e.h||(e.h=e.i())}function np(){}ep.prototype.h=null;var rp,ip={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ap(){xf.call(this,"d")}function op(){xf.call(this,"c")}function sp(){}function up(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Md(this),this.P=lp,e=Ff?125:void 0,this.V=new Rd(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new cp}function cp(){this.i=null,this.g="",this.h=!1}gf(ap,xf),gf(op,xf),gf(sp,ep),sp.prototype.g=function(){return new XMLHttpRequest},sp.prototype.i=function(){return{}},rp=new sp;var lp=45e3,hp={},fp={};function dp(e,t,n){e.L=1,e.v=Rp(Ip(t)),e.s=n,e.S=!0,pp(e,null)}function pp(e,t){e.G=Date.now(),gp(e),e.A=Ip(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),Hp(n.i,"t",r),e.C=0,n=e.l.I,e.h=new cp,e.g=Kv(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Fd(yf(e.Pa,e,e.g),e.O)),Ud(e.U,e.g,"readystatechange",e.nb),t=e.I?ed(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Gd(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function vp(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function yp(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=mp(e,n))==fp){4==t&&(e.o=4,$d(14),i=!1),Bd(e.j,e.m,null,"[Incomplete Response]");break}if(r==hp){e.o=4,$d(15),Bd(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Bd(e.j,e.m,r,null),xp(e,r)}vp(e)&&r!=fp&&r!=hp&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,$d(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ca&&(e.ca=!0,(t=e.l).g==e&&t.ca&&!t.L&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),jv(t),t.L=!0,$d(11))):(Bd(e.j,e.m,n,"[Invalid Chunked Response]"),_p(e),wp(e))}function mp(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?fp:(n=Number(t.substring(n,r)),isNaN(n)?hp:(r+=1)+n>t.length?fp:(t=t.substr(r,n),e.C=r+n,t))}function gp(e){e.Y=Date.now()+e.P,kp(e,e.P)}function kp(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Jd(yf(e.lb,e),t)}function bp(e){e.B&&(uf.clearTimeout(e.B),e.B=null)}function wp(e){0==e.l.H||e.J||qv(e.l,e)}function _p(e){bp(e);var t=e.M;t&&"function"==typeof t.ra&&t.ra(),e.M=null,Od(e.V),Vd(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ra())}function xp(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Zp(n.h,e)))if(!e.K&&Zp(n.h,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Vv(n),Nv(n)}Mv(n),$d(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.M&&0==n.A&&!n.v&&(n.v=Jd(yf(n.ib,n),6e3));if(1>=Xp(n.h)&&n.na){try{n.na()}catch(a){}n.na=void 0}}else zv(n,11)}else if((e.K||n.g==e)&&Vv(n),!Ef(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.J=a[1],n.oa=a[2];var o=a[3];null!=o&&(n.qa=o,n.j.info("VER="+n.qa));var s=a[4];null!=s&&(n.Ga=s,n.j.info("SVER="+n.Ga));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.h;h.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(h.j=h.l,h.g=new Set,h.h&&(ev(h,h.h),h.h=null))}if(r.F){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.Da=f,Pp(r.G,r.F,f))}}n.H=3,n.l&&n.l.Ba(),n.ca&&(n.S=Date.now()-e.G,n.j.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=Hv(r,r.I?r.oa:null,r.Y),d.K){tv(r.h,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(bp(p),gp(p)),r.g=d}else Fv(r);0<n.i.length&&Rv(n)}else"stop"!=a[0]&&"close"!=a[0]||zv(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?zv(n,7):Av(n):"noop"!=a[0]&&n.l&&n.l.Aa(a),n.A=0)}Gd()}catch(a){}}function Sp(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(lf(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.sa&&"function"==typeof e.sa)return e.sa();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(lf(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(lf(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(rf=up.prototype).setTimeout=function(e){this.P=e},rf.nb=function(e){e=e.target;var t=this.M;t&&3==xv(e)?t.l():this.Pa(e)},rf.Pa=function(e){try{if(e==this.g)e:{var t=xv(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||Ff||this.g&&(this.h.h||this.g.ja()||Sv(this.g)))){this.J||4!=t||7==n||Gd(),bp(this);var r=this.g.da();this.aa=r;t:if(vp(this)){var i=Sv(this.g);e="";var a=i.length,o=4==xv(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){_p(this),wp(this);var s="";break t}this.h.i=new uf.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.ba&&!this.K){t:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ef(u)){var l=u;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,$d(12),_p(this),wp(this);break e}Bd(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xp(this,r)}this.S?(yp(this,t,s),Ff&&this.i&&3==t&&(Ud(this.U,this.V,"tick",this.mb),this.V.start())):(Bd(this.j,this.m,s,null),xp(this,s)),4==t&&_p(this),this.i&&!this.J&&(4==t?qv(this.l,this):(this.i=!1,gp(this)))}else 400==r&&0<s.indexOf("Unknown SID")?(this.o=3,$d(12)):(this.o=0,$d(13)),_p(this),wp(this)}}}catch(t){}},rf.mb=function(){if(this.g){var e=xv(this.g),t=this.g.ja();this.C<t.length&&(bp(this),yp(this,e,t),this.i&&4!=e&&gp(this))}},rf.cancel=function(){this.J=!0,_p(this)},rf.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(Gd(),$d(17)),_p(this),this.o=2,wp(this)):kp(this,this.Y-e)};var Ep=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Tp(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Tp){this.h=void 0!==t?t:e.h,Cp(this,e.j),this.s=e.s,this.g=e.g,Ap(this,e.m),this.l=e.l,t=e.i;var n=new qp;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Np(this,n),this.o=e.o}else e&&(n=String(e).match(Ep))?(this.h=!!t,Cp(this,n[1]||"",!0),this.s=Op(n[2]||""),this.g=Op(n[3]||"",!0),Ap(this,n[4]),this.l=Op(n[5]||"",!0),Np(this,n[6]||"",!0),this.o=Op(n[7]||"")):(this.h=!!t,this.i=new qp(null,this.h))}function Ip(e){return new Tp(e)}function Cp(e,t,n){e.j=n?Op(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ap(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Np(e,t,n){t instanceof qp?(e.i=t,function(e,t){t&&!e.j&&(Bp(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(zp(this,t),Hp(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Dp(t,Up)),e.i=new qp(t,e.h))}function Pp(e,t,n){e.i.set(t,n)}function Rp(e){return Pp(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Op(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Dp(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Lp),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Lp(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Tp.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Dp(t,Fp,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Dp(t,Fp,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Dp(n,"/"==n.charAt(0)?jp:Mp,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Dp(n,Vp)),e.join("")};var Fp=/[#\/\?@]/g,Mp=/[#\?:]/g,jp=/[#\?]/g,Up=/[#\?@]/g,Vp=/#/g;function qp(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Bp(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function zp(e,t){Bp(e),t=Kp(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Wp(e,t){return Bp(e),t=Kp(e,t),e.g.has(t)}function Hp(e,t,n){zp(e,t),0<n.length&&(e.i=null,e.g.set(Kp(e,t),wf(n)),e.h+=n.length)}function Kp(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(rf=qp.prototype).add=function(e,t){Bp(this),this.i=null,e=Kp(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},rf.forEach=function(e,t){Bp(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},rf.sa=function(){Bp(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},rf.Z=function(e){Bp(this);var t=[];if("string"===typeof e)Wp(this,e)&&(t=t.concat(this.g.get(Kp(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},rf.set=function(e,t){return Bp(this),this.i=null,Wp(this,e=Kp(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},rf.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},rf.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Gp=m((function e(t,n){d(this,e),this.h=t,this.g=n}));function Qp(e){this.l=e||Yp,uf.PerformanceNavigationTiming?e=0<(e=uf.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(uf.g&&uf.g.Ka&&uf.g.Ka()&&uf.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var $p,Yp=10;function Jp(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Xp(e){return e.h?1:e.g?e.g.size:0}function Zp(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ev(e,t){e.g?e.g.add(t):e.h=t}function tv(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nv(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=I(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return wf(e.i)}function rv(){}function iv(){this.g=new rv}function av(e,t,n){var r=n||"";try{Sp(e,(function(e,n){var i=e;hf(e)&&(i=wd(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function ov(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(En){}}function sv(e){this.l=e.fc||null,this.j=e.ob||!1}function uv(e,t){gd.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=cv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Qp.prototype.cancel=function(){if(this.i=nv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=I(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},rv.prototype.stringify=function(e){return uf.JSON.stringify(e,void 0)},rv.prototype.parse=function(e){return uf.JSON.parse(e,void 0)},gf(sv,ep),sv.prototype.g=function(){return new uv(this.l,this.j)},sv.prototype.i=($p={},function(){return $p}),gf(uv,gd);var cv=0;function lv(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function hv(e){e.readyState=4,e.l=null,e.j=null,e.A=null,fv(e)}function fv(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(rf=uv.prototype).open=function(e,t){if(this.readyState!=cv)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,fv(this)},rf.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||uf).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},rf.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,hv(this)),this.readyState=cv},rf.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,fv(this)),this.g&&(this.readyState=3,fv(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof uf.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;lv(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},rf.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?hv(this):fv(this),3==this.readyState&&lv(this)}},rf.Za=function(e){this.g&&(this.response=this.responseText=e,hv(this))},rf.Ya=function(e){this.g&&(this.response=e,hv(this))},rf.ka=function(){this.g&&hv(this)},rf.setRequestHeader=function(e,t){this.v.append(e,t)},rf.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},rf.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(uv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var dv=uf.JSON.parse;function pv(e){gd.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=vv,this.L=this.M=!1}gf(pv,gd);var vv="",yv=/^https?$/i,mv=["POST","PUT"];function gv(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,kv(e),wv(e)}function kv(e){e.F||(e.F=!0,kd(e,"complete"),kd(e,"error"))}function bv(e){if(e.h&&"undefined"!=typeof sf&&(!e.C[1]||4!=xv(e)||2!=e.da()))if(e.v&&4==xv(e))Dd(e.La,0,e);else if(kd(e,"readystatechange"),4==xv(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(Ep)[1]||null;if(!a&&uf.self&&uf.self.location){var o=uf.self.location.protocol;a=o.substr(0,o.length-1)}i=!yv.test(a?a.toLowerCase():"")}t=i}if(t)kd(e,"complete"),kd(e,"success");else{e.m=6;try{var s=2<xv(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.da()+"]",kv(e)}}finally{wv(e)}}}function wv(e,t){if(e.g){_v(e);var n=e.g,r=e.C[0]?cf:null;e.g=null,e.C=null,t||kd(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function _v(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(uf.clearTimeout(e.A),e.A=null)}function xv(e){return e.g?e.g.readyState:0}function Sv(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case vv:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(rt){return null}}function Ev(e){var t="";return Zf(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Tv(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ev(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Pp(e,t,n))}function Iv(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Cv(e){this.Ga=0,this.i=[],this.j=new qd,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Iv("failFast",!1,e),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Iv("baseRetryDelayMs",5e3,e),this.hb=Iv("retryDelaySeedMs",1e4,e),this.eb=Iv("forwardChannelMaxRetries",2,e),this.xa=Iv("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.K=void 0,this.I=e&&e.supportsCrossDomainXhr||!1,this.J="",this.h=new Qp(e&&e.concurrentRequestLimit),this.Ja=new iv,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.j.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function Av(e){if(Pv(e),3==e.H){var t=e.W++,n=Ip(e.G);Pp(n,"SID",e.J),Pp(n,"RID",t),Pp(n,"TYPE","terminate"),Dv(e,n),(t=new up(e,e.j,t,void 0)).L=2,t.v=Rp(Ip(n)),n=!1,uf.navigator&&uf.navigator.sendBeacon&&(n=uf.navigator.sendBeacon(t.v.toString(),"")),!n&&uf.Image&&((new Image).src=t.v,n=!0),n||(t.g=Kv(t.l,null),t.g.ha(t.v)),t.G=Date.now(),gp(t)}Wv(e)}function Nv(e){e.g&&(jv(e),e.g.cancel(),e.g=null)}function Pv(e){Nv(e),e.u&&(uf.clearTimeout(e.u),e.u=null),Vv(e),e.h.cancel(),e.m&&("number"===typeof e.m&&uf.clearTimeout(e.m),e.m=null)}function Rv(e){Jp(e.h)||e.m||(e.m=!0,Cd(e.Na,e),e.C=0)}function Ov(e,t){var n;n=t?t.m:e.W++;var r=Ip(e.G);Pp(r,"SID",e.J),Pp(r,"RID",n),Pp(r,"AID",e.V),Dv(e,r),e.o&&e.s&&Tv(r,e.o,e.s),n=new up(e,e.j,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.i=t.F.concat(e.i)),t=Lv(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),ev(e.h,n),dp(n,r,t)}function Dv(e,t){e.ma&&Zf(e.ma,(function(e,n){Pp(t,n,e)})),e.l&&Sp({},(function(e,n){Pp(t,n,e)}))}function Lv(e,t,n){n=Math.min(e.i.length,n);var r=e.l?yf(e.l.Va,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=a))a=Math.max(0,i[u].h-100),s=!1;else try{av(l,o,"req"+c+"_")}catch(gt){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.i.splice(0,n),t.F=e,r}function Fv(e){e.g||e.u||(e.ba=1,Cd(e.Ma,e),e.A=0)}function Mv(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Jd(yf(e.Ma,e),Bv(e,e.A)),e.A++,!0)}function jv(e){null!=e.B&&(uf.clearTimeout(e.B),e.B=null)}function Uv(e){e.g=new up(e,e.j,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Ip(e.wa);Pp(t,"RID","rpc"),Pp(t,"SID",e.J),Pp(t,"CI",e.M?"0":"1"),Pp(t,"AID",e.V),Pp(t,"TYPE","xmlhttp"),Dv(e,t),e.o&&e.s&&Tv(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.oa,n.L=1,n.v=Rp(Ip(t)),n.s=null,n.S=!0,pp(n,e)}function Vv(e){null!=e.v&&(uf.clearTimeout(e.v),e.v=null)}function qv(e,t){var n=null;if(e.g==t){Vv(e),jv(e),e.g=null;var r=2}else{if(!Zp(e.h,t))return;n=t.F,tv(e.h,t),r=1}if(0!=e.H)if(e.ta=t.aa,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;kd(r=Hd(),new Yd(r,n)),Rv(e)}else Fv(e);else if(3==(i=t.o)||0==i&&0<e.ta||!(1==r&&function(e,t){return!(Xp(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.F.concat(e.i),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Jd(yf(e.Na,e,t),Bv(e,e.C)),e.C++,!0))}(e,t)||2==r&&Mv(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:zv(e,5);break;case 4:zv(e,10);break;case 3:zv(e,6);break;default:zv(e,2)}}function Bv(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.l||(n*=2),n*t}function zv(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=yf(e.pb,e);n||(n=new Tp("//www.google.com/images/cleardot.gif"),uf.location&&"http"==uf.location.protocol||Cp(n,"https"),Rp(n)),function(e,t){var n=new qd;if(uf.Image){var r=new Image;r.onload=mf(ov,n,r,"TestLoadImage: loaded",!0,t),r.onerror=mf(ov,n,r,"TestLoadImage: error",!1,t),r.onabort=mf(ov,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=mf(ov,n,r,"TestLoadImage: timeout",!1,t),uf.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else $d(2);e.H=0,e.l&&e.l.za(t),Wv(e),Pv(e)}function Wv(e){if(e.H=0,e.pa=[],e.l){var t=nv(e.h);0==t.length&&0==e.i.length||(_f(e.pa,t),_f(e.pa,e.i),e.h.i.length=0,wf(e.i),e.i.length=0),e.l.ya()}}function Hv(e,t,n){var r=n instanceof Tp?Ip(n):new Tp(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),Ap(r,r.m);else{var i=uf.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Tp(null,void 0);r&&Cp(a,r),t&&(a.g=t),i&&Ap(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&Pp(r,n,t),Pp(r,"VER",e.qa),Dv(e,r),r}function Kv(e,t,n){if(t&&!e.I)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new pv(new sv({ob:!0})):new pv(e.va)).Oa(e.I),t}function Gv(){}function Qv(){if(Df&&!(10<=Number(Kf)))throw Error("Environmental error: no available transport.")}function $v(e,t){gd.call(this),this.g=new Cv(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Ef(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ef(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Xv(this)}function Yv(e){ap.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Jv(){op.call(this),this.status=1}function Xv(e){this.g=e}function Zv(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function ey(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function ty(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(rf=pv.prototype).Oa=function(e){this.M=e},rf.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():rp.g(),this.C=this.u?tp(this.u):tp(rp),this.g.onreadystatechange=yf(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void gv(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=I(r.keys());try{for(o.s();!(a=o.n()).done;){var s=a.value;n.set(s,r.get(s))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=uf.FormData&&e instanceof uf.FormData,!(0<=bf(mv,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var u,c=I(n);try{for(c.s();!(u=c.n()).done;){var h=l(u.value,2),f=h[0],d=h[1];this.g.setRequestHeader(f,d)}}catch(p){c.e(p)}finally{c.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{_v(this),0<this.B&&((this.L=function(e){return Df&&Pf(Wf,9,(function(){for(var e=0,t=Tf(String(Rf)).split("."),n=Tf("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=If(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||If(0==a[2].length,0==o[2].length)||If(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=yf(this.ua,this)):this.A=Dd(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){gv(this,s)}},rf.ua=function(){"undefined"!=typeof sf&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,kd(this,"timeout"),this.abort(8))},rf.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,kd(this,"complete"),kd(this,"abort"),wv(this))},rf.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),wv(this,!0)),pv.$.N.call(this)},rf.La=function(){this.s||(this.G||this.v||this.l?bv(this):this.kb())},rf.kb=function(){bv(this)},rf.da=function(){try{return 2<xv(this)?this.g.status:-1}catch($p){return-1}},rf.ja=function(){try{return this.g?this.g.responseText:""}catch($p){return""}},rf.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),dv(t)}},rf.Ia=function(){return this.m},rf.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(rf=Cv.prototype).qa=8,rf.H=1,rf.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new up(this,this.j,e,void 0),n=this.s;if(this.U&&(n?nd(n=ed(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Lv(this,t,r),Pp(i=Ip(this.G),"RID",e),Pp(i,"CVER",22),this.F&&Pp(i,"X-HTTP-Session-Id",this.F),Dv(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(Ev(n)))+"&"+r:this.o&&Tv(i,this.o,n)),ev(this.h,t),this.bb&&Pp(i,"TYPE","init"),this.P?(Pp(i,"$req",r),Pp(i,"SID","null"),t.ba=!0,dp(t,i,null)):dp(t,i,r),this.H=2}}else 3==this.H&&(e?Ov(this,e):0==this.i.length||Jp(this.h)||Ov(this))},rf.Ma=function(){if(this.u=null,Uv(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var e=2*this.S;this.j.info("BP detection timer enabled: "+e),this.B=Jd(yf(this.jb,this),e)}},rf.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,$d(10),Nv(this),Uv(this))},rf.ib=function(){null!=this.v&&(this.v=null,Nv(this),Mv(this),$d(19))},rf.pb=function(e){e?(this.j.info("Successfully pinged google.com"),$d(2)):(this.j.info("Failed to ping google.com"),$d(1))},(rf=Gv.prototype).Ba=function(){},rf.Aa=function(){},rf.za=function(){},rf.ya=function(){},rf.Va=function(){},Qv.prototype.g=function(e,t){return new $v(e,t)},gf($v,gd),$v.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var e=this.g,t=this.l,n=this.h||void 0;$d(0),e.Y=t,e.ma=n||{},e.M=e.aa,e.G=Hv(e,null,e.Y),Rv(e)},$v.prototype.close=function(){Av(this.g)},$v.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=wd(e),e=n);t.i.push(new Gp(t.fb++,e)),3==t.H&&Rv(t)},$v.prototype.N=function(){this.g.l=null,delete this.j,Av(this.g),delete this.g,$v.$.N.call(this)},gf(Yv,ap),gf(Jv,op),gf(Xv,Gv),Xv.prototype.Ba=function(){kd(this.g,"a")},Xv.prototype.Aa=function(e){kd(this.g,new Yv(e))},Xv.prototype.za=function(e){kd(this.g,new Jv)},Xv.prototype.ya=function(){kd(this.g,"b")},gf(Zv,(function(){this.blockSize=-1})),Zv.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Zv.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)ey(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){ey(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){ey(this,r),i=0;break}}this.h=i,this.i+=t},Zv.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var ny={};function ry(e){return-128<=e&&128>e?Pf(ny,e,(function(e){return new ty([0|e],0>e?-1:0)})):new ty([0|e],0>e?-1:0)}function iy(e){if(isNaN(e)||!isFinite(e))return oy;if(0>e)return hy(iy(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=ay;return new ty(t,0)}var ay=4294967296,oy=ry(0),sy=ry(1),uy=ry(16777216);function cy(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function ly(e){return-1==e.h}function hy(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new ty(n,~e.h).add(sy)}function fy(e,t){return e.add(hy(t))}function dy(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function py(e,t){this.g=e,this.h=t}function vy(e,t){if(cy(t))throw Error("division by zero");if(cy(e))return new py(oy,oy);if(ly(e))return t=vy(hy(e),t),new py(hy(t.g),hy(t.h));if(ly(t))return t=vy(e,hy(t)),new py(hy(t.g),t.h);if(30<e.g.length){if(ly(e)||ly(t))throw Error("slowDivide_ only works with positive integers.");for(var n=sy,r=t;0>=r.X(e);)n=yy(n),r=yy(r);var i=my(n,1),a=my(r,1);for(r=my(r,2),n=my(n,2);!cy(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=my(r,1),n=my(n,1)}return t=fy(e,i.R(t)),new py(i,t)}for(i=oy;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=iy(n)).R(t);ly(o)||0<o.X(e);)o=(a=iy(n-=r)).R(t);cy(a)&&(a=sy),i=i.add(a),e=fy(e,o)}return new py(i,e)}function yy(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new ty(n,e.h)}function my(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new ty(i,e.h)}(rf=ty.prototype).ea=function(){if(ly(this))return-hy(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:ay+r)*t,t*=ay}return e},rf.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(cy(this))return"0";if(ly(this))return"-"+hy(this).toString(e);for(var t=iy(Math.pow(e,6)),n=this,r="";;){var i=vy(n,t).g,a=((0<(n=fy(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(cy(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},rf.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},rf.X=function(e){return ly(e=fy(this,e))?-1:cy(e)?0:1},rf.abs=function(){return ly(this)?hy(this):this},rf.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new ty(n,-2147483648&n[n.length-1]?-1:0)},rf.R=function(e){if(cy(this)||cy(e))return oy;if(ly(this))return ly(e)?hy(this).R(hy(e)):hy(hy(this).R(e));if(ly(e))return hy(this.R(hy(e)));if(0>this.X(uy)&&0>e.X(uy))return iy(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),s=e.D(i)>>>16,u=65535&e.D(i);n[2*r+2*i]+=o*u,dy(n,2*r+2*i),n[2*r+2*i+1]+=a*u,dy(n,2*r+2*i+1),n[2*r+2*i+1]+=o*s,dy(n,2*r+2*i+1),n[2*r+2*i+2]+=a*s,dy(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new ty(n,0)},rf.gb=function(e){return vy(this,e).h},rf.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new ty(n,this.h&e.h)},rf.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new ty(n,this.h|e.h)},rf.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new ty(n,this.h^e.h)},Qv.prototype.createWebChannel=Qv.prototype.g,$v.prototype.send=$v.prototype.u,$v.prototype.open=$v.prototype.m,$v.prototype.close=$v.prototype.close,Xd.NO_ERROR=0,Xd.TIMEOUT=8,Xd.HTTP_ERROR=6,Zd.COMPLETE="complete",np.EventType=ip,ip.OPEN="a",ip.CLOSE="b",ip.ERROR="c",ip.MESSAGE="d",gd.prototype.listen=gd.prototype.O,pv.prototype.listenOnce=pv.prototype.P,pv.prototype.getLastError=pv.prototype.Sa,pv.prototype.getLastErrorCode=pv.prototype.Ia,pv.prototype.getStatus=pv.prototype.da,pv.prototype.getResponseJson=pv.prototype.Wa,pv.prototype.getResponseText=pv.prototype.ja,pv.prototype.send=pv.prototype.ha,pv.prototype.setWithCredentials=pv.prototype.Oa,Zv.prototype.digest=Zv.prototype.l,Zv.prototype.reset=Zv.prototype.reset,Zv.prototype.update=Zv.prototype.j,ty.prototype.add=ty.prototype.add,ty.prototype.multiply=ty.prototype.R,ty.prototype.modulo=ty.prototype.gb,ty.prototype.compare=ty.prototype.X,ty.prototype.toNumber=ty.prototype.ea,ty.prototype.toString=ty.prototype.toString,ty.prototype.getBits=ty.prototype.D,ty.fromNumber=iy,ty.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return hy(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=iy(Math.pow(n,8)),i=oy,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),s=parseInt(t.substring(a,a+o),n);8>o?(o=iy(Math.pow(n,o)),i=i.R(o).add(iy(s))):i=(i=i.R(r)).add(iy(s))}return i};var gy=of.createWebChannelTransport=function(){return new Qv},ky=of.getStatEventTarget=function(){return Hd()},by=of.ErrorCode=Xd,wy=of.EventType=Zd,_y=of.Event=zd,xy=of.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Sy=of.FetchXmlHttpFactory=sv,Ey=of.WebChannel=np,Ty=of.XhrIo=pv,Iy=of.Md5=Zv,Cy=of.Integer=ty,Ay="@firebase/firestore",Ny=function(){function e(t){d(this,e),this.uid=t}return m(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Ny.UNAUTHENTICATED=new Ny(null),Ny.GOOGLE_CREDENTIALS=new Ny("google-credentials-uid"),Ny.FIRST_PARTY=new Ny("first-party-uid"),Ny.MOCK_USER=new Ny("mock-user");var Py="9.22.0",Ry=new ti("@firebase/firestore");function Oy(){return Ry.logLevel}function Dy(e){if(Ry.logLevel<=Qr.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(My);Ry.debug.apply(Ry,["Firestore (".concat(Py,"): ").concat(e)].concat(f(i)))}}function Ly(e){if(Ry.logLevel<=Qr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(My);Ry.error.apply(Ry,["Firestore (".concat(Py,"): ").concat(e)].concat(f(i)))}}function Fy(e){if(Ry.logLevel<=Qr.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(My);Ry.warn.apply(Ry,["Firestore (".concat(Py,"): ").concat(e)].concat(f(i)))}}function My(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function jy(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Py,") INTERNAL ASSERTION FAILED: ")+e;throw Ly(t),new Error(t)}function Uy(e,t){e||jy()}function Vy(e,t){return e}var qy={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},By=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return m(n)}(kr),zy=m((function e(){var t=this;d(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Wy=m((function e(t,n){d(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Hy=function(){function e(){d(this,e)}return m(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ny.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Ky=function(){function e(t){d(this,e),this.token=t,this.changeListener=null}return m(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Gy=function(){function e(t){d(this,e),this.t=t,this.currentUser=Ny.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return m(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new zy;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new zy,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Kn(Wn().mark((function e(){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){Dy("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(Dy("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new zy)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Dy("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Uy("string"==typeof n.accessToken),new Wy(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Uy(null===e||"string"==typeof e),new Ny(e)}}]),e}(),Qy=function(){function e(t,n,r){d(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=Ny.FIRST_PARTY,this.g=new Map}return m(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),$y=function(){function e(t,n,r){d(this,e),this.h=t,this.l=n,this.m=r}return m(e,[{key:"getToken",value:function(){return Promise.resolve(new Qy(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ny.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Yy=m((function e(t){d(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Jy=function(){function e(t){d(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return m(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Dy("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,Dy("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Dy("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?i(e):Dy("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Uy("string"==typeof t.token),e.T=t.token,new Yy(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Xy(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Zy=function(){function e(){d(this,e)}return m(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=Xy(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function em(e,t){return e<t?-1:e>t?1:0}function tm(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function nm(e){return e+"\0"}var rm=function(){function e(t,n){if(d(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new By(qy.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new By(qy.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new By(qy.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new By(qy.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return m(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?em(this.nanoseconds,e.nanoseconds):em(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),im=function(){function e(t){d(this,e),this.timestamp=t}return m(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new rm(0,0))}},{key:"max",value:function(){return new e(new rm(253402300799,999999999))}}]),e}(),am=function(){function e(t,n,r){d(this,e),void 0===n?n=0:n>t.length&&jy(),void 0===r?r=t.length-n:r>t.length-n&&jy(),this.segments=t,this.offset=n,this.len=r}return m(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),om=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new By(qy.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,f(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(am),sm=/^[_a-zA-Z][_a-zA-Z0-9]*$/,um=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return sm.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new By(qy.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new By(qy.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new By(qy.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new By(qy.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(am),cm=function(){function e(t){d(this,e),this.path=t}return m(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===om.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(om.fromString(t))}},{key:"fromName",value:function(t){return new e(om.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(om.emptyPath())}},{key:"comparator",value:function(e,t){return om.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new om(t.slice()))}}]),e}(),lm=m((function e(t,n,r,i){d(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function hm(e){return e.fields.find((function(e){return 2===e.kind}))}function fm(e){return e.fields.filter((function(e){return 2!==e.kind}))}lm.UNKNOWN_ID=-1;var dm=m((function e(t,n){d(this,e),this.fieldPath=t,this.kind=n}));var pm=function(){function e(t,n){d(this,e),this.sequenceNumber=t,this.offset=n}return m(e,null,[{key:"empty",value:function(){return new e(0,mm.min())}}]),e}();function vm(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=im.fromTimestamp(1e9===r?new rm(n+1,0):new rm(n,r));return new mm(i,cm.empty(),t)}function ym(e){return new mm(e.readTime,e.key,-1)}var mm=function(){function e(t,n,r){d(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return m(e,null,[{key:"min",value:function(){return new e(im.min(),cm.empty(),-1)}},{key:"max",value:function(){return new e(im.max(),cm.empty(),-1)}}]),e}();function gm(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=cm.comparator(e.documentKey,t.documentKey))?n:em(e.largestBatchId,t.largestBatchId)}var km="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",bm=function(){function e(){d(this,e),this.onCommittedListeners=[]}return m(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function wm(e){return _m.apply(this,arguments)}function _m(){return(_m=Kn(Wn().mark((function e(t){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===qy.FAILED_PRECONDITION&&t.message===km){e.next=2;break}throw t;case 2:Dy("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xm=function(){function e(t){var n=this;d(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return m(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&jy(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=I(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,s=function(){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},u=0;u<i;u++)s()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Sm=function(){function e(t,n){var r=this;d(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.v=new zy,this.transaction.oncomplete=function(){r.v.resolve()},this.transaction.onabort=function(){n.error?r.v.reject(new Im(t,n.error)):r.v.resolve()},this.transaction.onerror=function(e){var n=Rm(e.target.error);r.v.reject(new Im(t,n))}}return m(e,[{key:"R",get:function(){return this.v.promise}},{key:"abort",value:function(e){e&&this.v.reject(e),this.aborted||(Dy("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"P",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Am(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Im(n,t)}}}]),e}(),Em=function(){function e(t,n,r){d(this,e),this.name=t,this.version=n,this.V=r,12.2===e.S(hr())&&Ly("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return m(e,[{key:"$",value:function(){var e=Kn(Wn().mark((function e(t){var n=this;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Dy("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Im(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new By(qy.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new By(qy.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Im(t,n))},i.onupgradeneeded=function(e){Dy("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.V.O(t,i.transaction,e.oldVersion,n.version).next((function(){Dy("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.F&&(this.db.onversionchange=function(e){return n.F(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"B",value:function(e){this.F=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Kn(Wn().mark((function e(t,n,r,i){var a,o,s,u,c=this;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,s=Wn().mark((function e(){var n,s,u,l;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.$(t);case 4:return c.db=e.sent,n=Sm.open(c.db,t,a?"readonly":"readwrite",r),s=i(n).next((function(e){return n.P(),e})).catch((function(e){return n.abort(e),xm.reject(e)})).toPromise(),s.catch((function(){})),e.next=9,n.R;case 9:return e.t0=s,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),u=e.t1,l="FirebaseError"!==u.name&&o<3,Dy("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(u)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(s(),"t0",4);case 4:if("object"!==typeof(u=e.t0)){e.next=7;break}return e.abrupt("return",u.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Dy("SimpleDb","Removing database:",e),Nm(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!gr())return!1;if(e.C())return!0;var t=hr(),n=e.S(t),r=0<n&&n<10,i=e.N(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"N",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Tm=function(){function e(t){d(this,e),this.L=t,this.q=!1,this.U=null}return m(e,[{key:"isDone",get:function(){return this.q}},{key:"K",get:function(){return this.U}},{key:"cursor",set:function(e){this.L=e}},{key:"done",value:function(){this.q=!0}},{key:"G",value:function(e){this.U=e}},{key:"delete",value:function(){return Nm(this.L.delete())}}]),e}(),Im=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,qy.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return m(n)}(By);function Cm(e){return"IndexedDbTransactionError"===e.name}var Am=function(){function e(t){d(this,e),this.store=t}return m(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Dy("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Dy("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Nm(n)}},{key:"add",value:function(e){return Dy("SimpleDb","ADD",this.store.name,e,e),Nm(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Nm(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Dy("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Dy("SimpleDb","DELETE",this.store.name,e),Nm(this.store.delete(e))}},{key:"count",value:function(){return Dy("SimpleDb","COUNT",this.store.name),Nm(this.store.count())}},{key:"j",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.W(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new xm((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new xm((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){Dy("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.W(r,(function(e,t,n){return n.delete()}))}},{key:"X",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.W(r,t)}},{key:"Z",value:function(e){var t=this.cursor({});return new xm((function(n,r){t.onerror=function(e){var t=Rm(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"W",value:function(e,t){var n=[];return new xm((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Tm(i),o=t(i.primaryKey,i.value,a);if(o instanceof xm){var s=o.catch((function(e){return a.done(),xm.reject(e)}));n.push(s)}a.isDone?r():null===a.K?i.continue():i.continue(a.K)}else r()}})).next((function(){return xm.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Nm(e){return new xm((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Rm(e.target.error);n(t)}}))}var Pm=!1;function Rm(e){var t=Em.S(hr());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new By("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Pm||(Pm=!0,setTimeout((function(){throw r}),0)),r}}return e}var Om=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.tt=n,this.task=null}return m(e,[{key:"start",value:function(){this.et(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"et",value:function(e){var t=this;Dy("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,Kn(Wn().mark((function e(){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=Dy,e.t1="Documents written: ",e.next=6,t.tt.nt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Cm(e.t4)){e.next=17;break}Dy("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,wm(e.t4);case 19:return e.next=21,t.et(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),Dm=function(){function e(t,n){d(this,e),this.localStore=t,this.persistence=n}return m(e,[{key:"nt",value:function(){var e=Kn(Wn().mark((function e(){var t,n=this,r=arguments;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.st(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"st",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return xm.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return Dy("IndexBackiller","Processing collection: ".concat(t)),n.it(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"it",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.rt(i,n)})).next((function(n){return Dy("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"rt",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=ym(t);gm(r,n)>0&&(n=r)})),new mm(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Lm=function(){function e(t,n){var r=this;d(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return m(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function Fm(e){return null==e}function Mm(e){return 0===e&&1/e==-1/0}function jm(e){return"number"==typeof e&&Number.isInteger(e)&&!Mm(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Um(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=qm(t)),t=Vm(e.get(n),t);return qm(t)}function Vm(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function qm(e){return e+"\x01\x01"}function Bm(e){var t=e.length;if(Uy(t>=2),2===t)return Uy("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),om.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&jy(),e.charAt(o+1)){case"\x01":var s=e.substring(a,o),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:jy()}a=o+2}return new om(r)}Lm.ct=-1;var zm=["userId","batchId"];function Wm(e,t){return[e,Um(t)]}function Hm(e,t,n){return[e,Um(t),n]}var Km={},Gm=["prefixPath","collectionGroup","readTime","documentId"],Qm=["prefixPath","collectionGroup","documentId"],$m=["collectionGroup","readTime","prefixPath","documentId"],Ym=["canonicalId","targetId"],Jm=["targetId","path"],Xm=["path","targetId"],Zm=["collectionId","parent"],eg=["indexId","uid"],tg=["uid","sequenceNumber"],ng=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],rg=["indexId","uid","orderedDocumentKey"],ig=["userId","collectionPath","documentId"],ag=["userId","collectionPath","largestBatchId"],og=["userId","collectionGroup","largestBatchId"],sg=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),ug=[].concat(f(sg),["documentOverlays"]),cg=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],lg=cg,hg=[].concat(lg,["indexConfiguration","indexState","indexEntries"]),fg=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).ht=e,i.currentSequenceNumber=r,i}return m(n)}(bm);function dg(e,t){var n=Vy(e);return Em.M(n.ht,t)}function pg(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function vg(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function yg(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var mg=function(){function e(t,n){d(this,e),this.comparator=t,this.root=n||kg.EMPTY}return m(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,kg.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,kg.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new gg(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new gg(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new gg(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new gg(this.root,e,this.comparator,!0)}}]),e}(),gg=function(){function e(t,n,r,i){d(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return m(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),kg=function(){function e(t,n,r,i,a){d(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return m(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw jy();if(this.right.isRed())throw jy();var e=this.left.check();if(e!==this.right.check())throw jy();return e+(this.isRed()?0:1)}}]),e}();kg.EMPTY=null,kg.RED=!0,kg.BLACK=!1,kg.EMPTY=new(function(){function e(){d(this,e),this.size=0}return m(e,[{key:"key",get:function(){throw jy()}},{key:"value",get:function(){throw jy()}},{key:"color",get:function(){throw jy()}},{key:"left",get:function(){throw jy()}},{key:"right",get:function(){throw jy()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new kg(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var bg=function(){function e(t){d(this,e),this.comparator=t,this.data=new mg(this.comparator)}return m(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new wg(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new wg(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),wg=function(){function e(t){d(this,e),this.iter=t}return m(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function _g(e){return e.hasNext()?e.getNext():void 0}var xg=function(){function e(t){d(this,e),this.fields=t,t.sort(um.comparator)}return m(e,[{key:"unionWith",value:function(t){var n,r=new bg(um.comparator),i=I(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,s=I(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;r=r.add(u)}}catch(c){s.e(c)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=I(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return tm(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Sg=function(e){k(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return m(n)}(E(Error));var Eg=function(e){function t(e){d(this,t),this.binaryString=e}return m(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return em(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Sg("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Eg.EMPTY_BYTE_STRING=new Eg("");var Tg=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ig(e){if(Uy(!!e),"string"==typeof e){var t=0,n=Tg.exec(e);if(Uy(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Cg(e.seconds),nanos:Cg(e.nanos)}}function Cg(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Ag(e){return"string"==typeof e?Eg.fromBase64String(e):Eg.fromUint8Array(e)}function Ng(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Pg(e){var t=e.mapValue.fields.__previous_value__;return Ng(t)?Pg(t):t}function Rg(e){var t=Ig(e.mapValue.fields.__local_write_time__.timestampValue);return new rm(t.seconds,t.nanos)}var Og=m((function e(t,n,r,i,a,o,s,u,c){d(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=u,this.useFetchStreams=c})),Dg=function(){function e(t,n){d(this,e),this.projectId=t,this.database=n||"(default)"}return m(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),Lg={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Fg={nullValue:"NULL_VALUE"};function Mg(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ng(e)?4:Jg(e)?9007199254740991:10:jy()}function jg(e,t){if(e===t)return!0;var n=Mg(e);if(n!==Mg(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Rg(e).isEqual(Rg(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Ig(e.timestampValue),r=Ig(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Ag(e.bytesValue).isEqual(Ag(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Cg(e.geoPointValue.latitude)===Cg(t.geoPointValue.latitude)&&Cg(e.geoPointValue.longitude)===Cg(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Cg(e.integerValue)===Cg(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Cg(e.doubleValue),r=Cg(t.doubleValue);return n===r?Mm(n)===Mm(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return tm(e.arrayValue.values||[],t.arrayValue.values||[],jg);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(pg(n)!==pg(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!jg(n[i],r[i])))return!1;return!0}(e,t);default:return jy()}}function Ug(e,t){return void 0!==(e.values||[]).find((function(e){return jg(e,t)}))}function Vg(e,t){if(e===t)return 0;var n=Mg(e),r=Mg(t);if(n!==r)return em(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return em(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Cg(e.integerValue||e.doubleValue),r=Cg(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return qg(e.timestampValue,t.timestampValue);case 4:return qg(Rg(e),Rg(t));case 5:return em(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Ag(e),r=Ag(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=em(n[i],r[i]);if(0!==a)return a}return em(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=em(Cg(e.latitude),Cg(t.latitude));return 0!==n?n:em(Cg(e.longitude),Cg(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Vg(n[i],r[i]);if(a)return a}return em(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Lg.mapValue&&t===Lg.mapValue)return 0;if(e===Lg.mapValue)return 1;if(t===Lg.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=em(r[o],a[o]);if(0!==s)return s;var u=Vg(n[r[o]],i[a[o]]);if(0!==u)return u}return em(r.length,a.length)}(e.mapValue,t.mapValue);default:throw jy()}}function qg(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return em(e,t);var n=Ig(e),r=Ig(t),i=em(n.seconds,r.seconds);return 0!==i?i:em(n.nanos,r.nanos)}function Bg(e){return zg(e)}function zg(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Ig(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Ag(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,cm.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=I(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=zg(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=I(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(zg(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):jy();var t,n}function Wg(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Hg(e){return!!e&&"integerValue"in e}function Kg(e){return!!e&&"arrayValue"in e}function Gg(e){return!!e&&"nullValue"in e}function Qg(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function $g(e){return!!e&&"mapValue"in e}function Yg(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return vg(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Yg(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Yg(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Jg(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Xg(e){return"nullValue"in e?Fg:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Wg(Dg.empty(),cm.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:jy()}function Zg(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Wg(Dg.empty(),cm.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Lg:jy()}function ek(e,t){var n=Vg(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function tk(e,t){var n=Vg(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var nk=function(){function e(t){d(this,e),this.value=t}return m(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!$g(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yg(t)}},{key:"setAll",value:function(e){var t=this,n=um.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Yg(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());$g(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return jg(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];$g(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){vg(t,(function(t,n){return e[t]=n}));var r,i=I(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Yg(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function rk(e){var t=[];return vg(e.fields,(function(e,n){var r=new um([e]);if($g(n)){var i=rk(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=I(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new xg(t)}var ik=function(){function e(t,n,r,i,a,o,s){d(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=s}return m(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(im.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=nk.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=nk.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=im.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,im.min(),im.min(),im.min(),nk.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,im.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,im.min(),im.min(),nk.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,im.min(),im.min(),nk.empty(),2)}}]),e}(),ak=m((function e(t,n){d(this,e),this.position=t,this.inclusive=n}));function ok(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?cm.comparator(cm.fromName(o.referenceValue),n.key):Vg(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function sk(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!jg(e.position[n],t.position[n]))return!1;return!0}var uk=m((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";d(this,e),this.field=t,this.dir=n}));function ck(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var lk=m((function e(){d(this,e)})),hk=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return m(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Vg(t,this.value)):null!==t&&Mg(this.value)===Mg(t)&&this.matchesComparison(Vg(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return jy()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new wk(e,t,r):"array-contains"===t?new Ek(e,r):"in"===t?new Tk(e,r):"not-in"===t?new Ik(e,r):"array-contains-any"===t?new Ck(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new _k(e,n):new xk(e,n)}}]),n}(lk),fk=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).filters=e,i.op=r,i.lt=null,i}return m(n,[{key:"matches",value:function(e){return dk(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.lt||(this.lt=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.lt}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.ft((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"ft",value:function(e){var t,n=I(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(lk);function dk(e){return"and"===e.op}function pk(e){return"or"===e.op}function vk(e){return yk(e)&&dk(e)}function yk(e){var t,n=I(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof fk)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function mk(e){if(e instanceof hk)return e.field.canonicalString()+e.op.toString()+Bg(e.value);if(vk(e))return e.filters.map((function(e){return mk(e)})).join(",");var t=e.filters.map((function(e){return mk(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function gk(e,t){return e instanceof hk?function(e,t){return t instanceof hk&&e.op===t.op&&e.field.isEqual(t.field)&&jg(e.value,t.value)}(e,t):e instanceof fk?function(e,t){return t instanceof fk&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&gk(n,t.filters[r])}),!0)}(e,t):void jy()}function kk(e,t){var n=e.filters.concat(t);return fk.create(n,e.op)}function bk(e){return e instanceof hk?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Bg(e.value))}(e):e instanceof fk?function(e){return e.op.toString()+" {"+e.getFilters().map(bk).join(" ,")+"}"}(e):"Filter"}var wk=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,i)).key=cm.fromName(i.referenceValue),a}return m(n,[{key:"matches",value:function(e){var t=cm.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(hk),_k=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"in",r)).keys=Sk("in",r),i}return m(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(hk),xk=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"not-in",r)).keys=Sk("not-in",r),i}return m(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(hk);function Sk(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return cm.fromName(e.referenceValue)}))}var Ek=function(e){k(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains",r)}return m(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Kg(t)&&Ug(t.arrayValue,this.value)}}]),n}(hk),Tk=function(e){k(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"in",r)}return m(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Ug(this.value.arrayValue,t)}}]),n}(hk),Ik=function(e){k(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"not-in",r)}return m(n,[{key:"matches",value:function(e){if(Ug(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Ug(this.value.arrayValue,t)}}]),n}(hk),Ck=function(e){k(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains-any",r)}return m(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Kg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Ug(t.value.arrayValue,e)}))}}]),n}(hk),Ak=m((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;d(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.dt=null}));function Nk(e){return new Ak(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Pk(e){var t=Vy(e);if(null===t.dt){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return mk(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Fm(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Bg(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Bg(e)})).join(",")),t.dt=n}return t.dt}function Rk(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!ck(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!gk(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!sk(e.startAt,t.startAt)&&sk(e.endAt,t.endAt)}function Ok(e){return cm.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Dk(e,t){return e.filters.filter((function(e){return e instanceof hk&&e.field.isEqual(t)}))}function Lk(e,t,n){var r,i=Fg,a=!0,o=I(Dk(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=Fg,c=!0;switch(s.op){case"<":case"<=":u=Xg(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,c=!1;break;case"!=":case"not-in":u=Fg}ek({value:i,inclusive:a},{value:u,inclusive:c})<0&&(i=u,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];ek({value:i,inclusive:a},{value:h,inclusive:n.inclusive})<0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}function Fk(e,t,n){var r,i=Lg,a=!0,o=I(Dk(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=Lg,c=!0;switch(s.op){case">=":case">":u=Zg(s.value),c=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,c=!1;break;case"!=":case"not-in":u=Lg}tk({value:i,inclusive:a},{value:u,inclusive:c})>0&&(i=u,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];tk({value:i,inclusive:a},{value:h,inclusive:n.inclusive})>0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}var Mk=m((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;d(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.wt=null,this._t=null,this.startAt,this.endAt}));function jk(e,t,n,r,i,a,o,s){return new Mk(e,t,n,r,i,a,o,s)}function Uk(e){return new Mk(e)}function Vk(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function qk(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Bk(e){var t,n=I(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function zk(e){return null!==e.collectionGroup}function Wk(e){var t=Vy(e);if(null===t.wt){t.wt=[];var n=Bk(t),r=qk(t);if(null!==n&&null===r)n.isKeyField()||t.wt.push(new uk(n)),t.wt.push(new uk(um.keyField(),"asc"));else{var i,a=!1,o=I(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.wt.push(s),s.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new uk(um.keyField(),u))}}}return t.wt}function Hk(e){var t=Vy(e);if(!t._t)if("F"===t.limitType)t._t=Nk(t.path,t.collectionGroup,Wk(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=I(Wk(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new uk(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var s=t.endAt?new ak(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new ak(t.startAt.position,t.startAt.inclusive):null;t._t=Nk(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t._t}function Kk(e,t){t.getFirstInequalityField(),Bk(e);var n=e.filters.concat([t]);return new Mk(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Gk(e,t,n){return new Mk(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Qk(e,t){return Rk(Hk(e),Hk(t))&&e.limitType===t.limitType}function $k(e){return"".concat(Pk(Hk(e)),"|lt:").concat(e.limitType)}function Yk(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return bk(e)})).join(", "),"]")),Fm(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Bg(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Bg(e)})).join(",")),"Target(".concat(t,")")}(Hk(e)),"; limitType=").concat(e.limitType,")")}function Jk(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):cm.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=I(Wk(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=I(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=ok(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Wk(e),t))&&!(e.endAt&&!function(e,t,n){var r=ok(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Wk(e),t))}(e,t)}function Xk(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Zk(e){return function(t,n){var r,i=!1,a=I(Wk(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=eb(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function eb(e,t,n){var r=e.field.isKeyField()?cm.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Vg(r,i):jy()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return jy()}}var tb=function(){function e(t,n){d(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return m(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=I(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(u){i.e(u)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){vg(this.inner,(function(t,n){var r,i=I(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(u){i.e(u)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return yg(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),nb=new mg(cm.comparator);function rb(){return nb}var ib=new mg(cm.comparator);function ab(){for(var e=ib,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function ob(e){var t=ib;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function sb(){return cb()}function ub(){return cb()}function cb(){return new tb((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var lb=new mg(cm.comparator),hb=new bg(cm.comparator);function fb(){for(var e=hb,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var db=new bg(em);function pb(){return db}function vb(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mm(t)?"-0":t}}function yb(e){return{integerValue:""+e}}function mb(e,t){return jm(t)?yb(t):vb(e,t)}var gb=m((function e(){d(this,e),this._=void 0}));function kb(e,t,n){return e instanceof _b?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Ng(t)&&(t=Pg(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof xb?Sb(e,t):e instanceof Eb?Tb(e,t):function(e,t){var n=wb(e,t),r=Cb(n)+Cb(e.gt);return Hg(n)&&Hg(e.gt)?yb(r):vb(e.serializer,r)}(e,t)}function bb(e,t,n){return e instanceof xb?Sb(e,t):e instanceof Eb?Tb(e,t):n}function wb(e,t){return e instanceof Ib?Hg(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var _b=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n)}(gb),xb=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return m(n)}(gb);function Sb(e,t){var n,r=Ab(t),i=I(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return jg(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Eb=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return m(n)}(gb);function Tb(e,t){var n,r=Ab(t),i=I(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!jg(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Ib=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).serializer=e,i.gt=r,i}return m(n)}(gb);function Cb(e){return Cg(e.integerValue||e.doubleValue)}function Ab(e){return Kg(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Nb=m((function e(t,n){d(this,e),this.field=t,this.transform=n}));var Pb=m((function e(t,n){d(this,e),this.version=t,this.transformResults=n})),Rb=function(){function e(t,n){d(this,e),this.updateTime=t,this.exists=n}return m(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Ob(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Db=m((function e(){d(this,e)}));function Lb(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Gb(e.key,Rb.none()):new Vb(e.key,e.data,Rb.none());var n,r=e.data,i=nk.empty(),a=new bg(um.comparator),o=I(t.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!a.has(s)){var u=r.field(s);null===u&&s.length>1&&(s=s.popLast(),u=r.field(s)),null===u?i.delete(s):i.set(s,u),a=a.add(s)}}}catch(c){o.e(c)}finally{o.f()}return new qb(e.key,i,new xg(a.toArray()),Rb.none())}function Fb(e,t,n){e instanceof Vb?function(e,t,n){var r=e.value.clone(),i=zb(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof qb?function(e,t,n){if(Ob(e.precondition,t)){var r=zb(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Bb(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Mb(e,t,n,r){return e instanceof Vb?function(e,t,n,r){if(!Ob(e.precondition,t))return n;var i=e.value.clone(),a=Wb(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof qb?function(e,t,n,r){if(!Ob(e.precondition,t))return n;var i=Wb(e.fieldTransforms,r,t),a=t.data;return a.setAll(Bb(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Ob(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function jb(e,t){var n,r=null,i=I(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=wb(a.transform,o||null);null!=s&&(null===r&&(r=nk.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function Ub(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&tm(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof xb&&t instanceof xb||e instanceof Eb&&t instanceof Eb?tm(e.elements,t.elements,jg):e instanceof Ib&&t instanceof Ib?jg(e.gt,t.gt):e instanceof _b&&t instanceof _b}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Vb=function(e){k(n,e);var t=x(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return d(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return m(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Db),qb=function(e){k(n,e);var t=x(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return d(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return m(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Db);function Bb(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function zb(e,t,n){var r=new Map;Uy(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,bb(o,s,n[i]))}return r}function Wb(e,t,n){var r,i=new Map,a=I(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,kb(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Hb,Kb,Gb=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return m(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Db),Qb=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return m(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Db),$b=function(){function e(t,n,r,i){d(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return m(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Fb(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=I(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Mb(i,e,t,this.localWriteTime))}}catch(u){r.e(u)}finally{r.f()}var a,o=I(this.mutations);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.key.isEqual(e.key)&&(t=Mb(s,e,t,this.localWriteTime))}}catch(u){o.e(u)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=ub();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,s=n.applyToLocalView(o,a.mutatedFields),u=Lb(o,s=t.has(i.key)?null:s);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(im.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),fb())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&tm(this.mutations,e.mutations,(function(e,t){return Ub(e,t)}))&&tm(this.baseMutations,e.baseMutations,(function(e,t){return Ub(e,t)}))}}]),e}(),Yb=function(){function e(t,n,r,i){d(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return m(e,null,[{key:"from",value:function(t,n,r){Uy(t.mutations.length===r.length);for(var i=lb,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Jb=function(){function e(t,n){d(this,e),this.largestBatchId=t,this.mutation=n}return m(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Xb=m((function e(t,n){d(this,e),this.count=t,this.unchangedNames=n}));function Zb(e){switch(e){default:return jy();case qy.CANCELLED:case qy.UNKNOWN:case qy.DEADLINE_EXCEEDED:case qy.RESOURCE_EXHAUSTED:case qy.INTERNAL:case qy.UNAVAILABLE:case qy.UNAUTHENTICATED:return!1;case qy.INVALID_ARGUMENT:case qy.NOT_FOUND:case qy.ALREADY_EXISTS:case qy.PERMISSION_DENIED:case qy.FAILED_PRECONDITION:case qy.ABORTED:case qy.OUT_OF_RANGE:case qy.UNIMPLEMENTED:case qy.DATA_LOSS:return!0}}function ew(e){if(void 0===e)return Ly("GRPC error has no .code"),qy.UNKNOWN;switch(e){case Hb.OK:return qy.OK;case Hb.CANCELLED:return qy.CANCELLED;case Hb.UNKNOWN:return qy.UNKNOWN;case Hb.DEADLINE_EXCEEDED:return qy.DEADLINE_EXCEEDED;case Hb.RESOURCE_EXHAUSTED:return qy.RESOURCE_EXHAUSTED;case Hb.INTERNAL:return qy.INTERNAL;case Hb.UNAVAILABLE:return qy.UNAVAILABLE;case Hb.UNAUTHENTICATED:return qy.UNAUTHENTICATED;case Hb.INVALID_ARGUMENT:return qy.INVALID_ARGUMENT;case Hb.NOT_FOUND:return qy.NOT_FOUND;case Hb.ALREADY_EXISTS:return qy.ALREADY_EXISTS;case Hb.PERMISSION_DENIED:return qy.PERMISSION_DENIED;case Hb.FAILED_PRECONDITION:return qy.FAILED_PRECONDITION;case Hb.ABORTED:return qy.ABORTED;case Hb.OUT_OF_RANGE:return qy.OUT_OF_RANGE;case Hb.UNIMPLEMENTED:return qy.UNIMPLEMENTED;case Hb.DATA_LOSS:return qy.DATA_LOSS;default:return jy()}}(Kb=Hb||(Hb={}))[Kb.OK=0]="OK",Kb[Kb.CANCELLED=1]="CANCELLED",Kb[Kb.UNKNOWN=2]="UNKNOWN",Kb[Kb.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kb[Kb.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kb[Kb.NOT_FOUND=5]="NOT_FOUND",Kb[Kb.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kb[Kb.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kb[Kb.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kb[Kb.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kb[Kb.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kb[Kb.ABORTED=10]="ABORTED",Kb[Kb.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kb[Kb.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kb[Kb.INTERNAL=13]="INTERNAL",Kb[Kb.UNAVAILABLE=14]="UNAVAILABLE",Kb[Kb.DATA_LOSS=15]="DATA_LOSS";var tw=function(){function e(){d(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return m(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return nw}},{key:"getOrCreateInstance",value:function(){return null===nw&&(nw=new e),nw}}]),e}(),nw=null;function rw(){return new TextEncoder}var iw=new Cy([4294967295,4294967295],0);function aw(e){var t=rw().encode(e),n=new Iy;return n.update(t),new Uint8Array(n.digest())}function ow(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Cy([n,r],0),new Cy([i,a],0)]}var sw=function(){function e(t,n,r){if(d(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new uw("Invalid padding: ".concat(n));if(r<0)throw new uw("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new uw("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new uw("Invalid padding when bitmap length is 0: ".concat(n));this.It=8*t.length-n,this.Tt=Cy.fromNumber(this.It)}return m(e,[{key:"Et",value:function(e,t,n){var r=e.add(t.multiply(Cy.fromNumber(n)));return 1===r.compare(iw)&&(r=new Cy([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}},{key:"At",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"vt",value:function(e){if(0===this.It)return!1;for(var t=l(ow(aw(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Et(n,r,i);if(!this.At(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.It)for(var t=l(ow(aw(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Et(n,r,i);this.Rt(a)}}},{key:"Rt",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),uw=function(e){k(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return m(n)}(E(Error)),cw=function(){function e(t,n,r,i,a){d(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return m(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,lw.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(im.min(),i,new mg(em),rb(),fb())}}]),e}(),lw=function(){function e(t,n,r,i,a){d(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return m(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,fb(),fb(),fb())}}]),e}(),hw=m((function e(t,n,r,i){d(this,e),this.Pt=t,this.removedTargetIds=n,this.key=r,this.bt=i})),fw=m((function e(t,n){d(this,e),this.targetId=t,this.Vt=n})),dw=m((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Eg.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;d(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),pw=function(){function e(){d(this,e),this.St=0,this.Dt=mw(),this.Ct=Eg.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}return m(e,[{key:"current",get:function(){return this.xt}},{key:"resumeToken",get:function(){return this.Ct}},{key:"kt",get:function(){return 0!==this.St}},{key:"Mt",get:function(){return this.Nt}},{key:"$t",value:function(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}},{key:"Ot",value:function(){var e=fb(),t=fb(),n=fb();return this.Dt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:jy()}})),new lw(this.Ct,this.xt,e,t,n)}},{key:"Ft",value:function(){this.Nt=!1,this.Dt=mw()}},{key:"Bt",value:function(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}},{key:"Lt",value:function(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}},{key:"qt",value:function(){this.St+=1}},{key:"Ut",value:function(){this.St-=1}},{key:"Kt",value:function(){this.Nt=!0,this.xt=!0}}]),e}(),vw=function(){function e(t){d(this,e),this.Gt=t,this.Qt=new Map,this.jt=rb(),this.zt=yw(),this.Wt=new mg(em)}return m(e,[{key:"Ht",value:function(e){var t,n=I(e.Pt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.bt&&e.bt.isFoundDocument()?this.Jt(r,e.bt):this.Yt(r,e.key,e.bt)}}catch(s){n.e(s)}finally{n.f()}var i,a=I(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Yt(o,e.key,e.bt)}}catch(s){a.e(s)}finally{a.f()}}},{key:"Xt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Zt(n);switch(e.state){case 0:t.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||t.removeTarget(n);break;case 3:t.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:t.te(n)&&(t.ee(n),r.$t(e.resumeToken));break;default:jy()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((function(e,r){n.te(r)&&t(r)}))}},{key:"ne",value:function(e){var t,n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){var a=i.target;if(Ok(a))if(0===r){var o=new cm(a.path);this.Yt(n,o,ik.newNoDocument(o,im.min()))}else Uy(1===r);else{var s=this.ie(n);if(s!==r){var u=this.re(e,s);if(0!==u){this.ee(n);var c=2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,c)}null===(t=tw.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,a,o,s,u,c={localCacheCount:t,existenceFilterCount:n.count},l=n.unchangedNames;return l&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==l?void 0:l.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(a=null===(i=null==l?void 0:l.bits)||void 0===i?void 0:i.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(u=null===(s=null==l?void 0:l.bits)||void 0===s?void 0:s.padding)&&void 0!==u?u:0}),c}(u,s,e.Vt))}}}}},{key:"re",value:function(e,t){var n=e.Vt,r=n.unchangedNames,i=n.count;if(!r||!r.bits)return 1;var a,o,s=r.bits,u=s.bitmap,c=void 0===u?"":u,l=s.padding,h=void 0===l?0:l,f=r.hashCount,d=void 0===f?0:f;try{a=Ag(c).toUint8Array()}catch(e){if(e instanceof Sg)return Fy("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{o=new sw(a,h,d)}catch(e){return Fy(e instanceof uw?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===o.It?1:i!==t-this.oe(e.targetId,o)?2:0}},{key:"oe",value:function(e,t){var n=this,r=this.Gt.getRemoteKeysForTarget(e),i=0;return r.forEach((function(r){var a=n.Gt.ue(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());t.vt(o)||(n.Yt(e,r,null),i++)})),i}},{key:"ce",value:function(e){var t=this,n=new Map;this.Qt.forEach((function(r,i){var a=t.se(i);if(a){if(r.current&&Ok(a.target)){var o=new cm(a.target.path);null!==t.jt.get(o)||t.ae(i,o)||t.Yt(i,o,ik.newNoDocument(o,e))}r.Mt&&(n.set(i,r.Ot()),r.Ft())}}));var r=fb();this.zt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.se(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.jt.forEach((function(t,n){return n.setReadTime(e)}));var i=new cw(e,n,this.Wt,this.jt,r);return this.jt=rb(),this.zt=yw(),this.Wt=new mg(em),i}},{key:"Jt",value:function(e,t){if(this.te(e)){var n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}}},{key:"Yt",value:function(e,t,n){if(this.te(e)){var r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Qt.delete(e)}},{key:"ie",value:function(e){var t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"qt",value:function(e){this.Zt(e).qt()}},{key:"Zt",value:function(e){var t=this.Qt.get(e);return t||(t=new pw,this.Qt.set(e,t)),t}},{key:"he",value:function(e){var t=this.zt.get(e);return t||(t=new bg(em),this.zt=this.zt.insert(e,t)),t}},{key:"te",value:function(e){var t=null!==this.se(e);return t||Dy("WatchChangeAggregator","Detected inactive target",e),t}},{key:"se",value:function(e){var t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}},{key:"ee",value:function(e){var t=this;this.Qt.set(e,new pw),this.Gt.getRemoteKeysForTarget(e).forEach((function(n){t.Yt(e,n,null)}))}},{key:"ae",value:function(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}]),e}();function yw(){return new mg(cm.comparator)}function mw(){return new mg(cm.comparator)}var gw={asc:"ASCENDING",desc:"DESCENDING"},kw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bw={and:"AND",or:"OR"},ww=m((function e(t,n){d(this,e),this.databaseId=t,this.useProto3Json=n}));function _w(e,t){return e.useProto3Json||Fm(t)?t:{value:t}}function xw(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Sw(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Ew(e,t){return xw(e,t.toTimestamp())}function Tw(e){return Uy(!!e),im.fromTimestamp(function(e){var t=Ig(e);return new rm(t.seconds,t.nanos)}(e))}function Iw(e,t){return function(e){return new om(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Cw(e){var t=om.fromString(e);return Uy(Jw(t)),t}function Aw(e,t){return Iw(e.databaseId,t.path)}function Nw(e,t){var n=Cw(t);if(n.get(1)!==e.databaseId.projectId)throw new By(qy.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new By(qy.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new cm(Dw(n))}function Pw(e,t){return Iw(e.databaseId,t)}function Rw(e){var t=Cw(e);return 4===t.length?om.emptyPath():Dw(t)}function Ow(e){return new om(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Dw(e){return Uy(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Lw(e,t,n){return{name:Aw(e,t),fields:n.value.mapValue.fields}}function Fw(e,t,n){var r=Nw(e,t.name),i=Tw(t.updateTime),a=t.createTime?Tw(t.createTime):im.min(),o=new nk({mapValue:{fields:t.fields}}),s=ik.newFoundDocument(r,i,a,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function Mw(e,t){return"found"in t?function(e,t){Uy(!!t.found),t.found.name,t.found.updateTime;var n=Nw(e,t.found.name),r=Tw(t.found.updateTime),i=t.found.createTime?Tw(t.found.createTime):im.min(),a=new nk({mapValue:{fields:t.found.fields}});return ik.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){Uy(!!t.missing),Uy(!!t.readTime);var n=Nw(e,t.missing),r=Tw(t.readTime);return ik.newNoDocument(n,r)}(e,t):jy()}function jw(e,t){var n;if(t instanceof Vb)n={update:Lw(e,t.key,t.value)};else if(t instanceof Gb)n={delete:Aw(e,t.key)};else if(t instanceof qb)n={update:Lw(e,t.key,t.data),updateMask:Yw(t.fieldMask)};else{if(!(t instanceof Qb))return jy();n={verify:Aw(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof _b)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof xb)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Eb)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ib)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw jy()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ew(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:jy()}(e,t.precondition)),n}function Uw(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Rb.updateTime(Tw(e.updateTime)):void 0!==e.exists?Rb.exists(e.exists):Rb.none()}(t.currentDocument):Rb.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Uy("REQUEST_TIME"===t.setToServerValue),n=new _b;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new xb(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Eb(i)}else"increment"in t?n=new Ib(e,t.increment):jy();var a=um.fromServerFormat(t.fieldPath);return new Nb(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Nw(e,t.update.name),a=new nk({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new xg(t.map((function(e){return um.fromServerFormat(e)})))}(t.updateMask);return new qb(i,a,o,n,r)}return new Vb(i,a,n,r)}if(t.delete){var s=Nw(e,t.delete);return new Gb(s,n)}if(t.verify){var u=Nw(e,t.verify);return new Qb(u,n)}return jy()}function Vw(e,t){return{documents:[Pw(e,t.path)]}}function qw(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Pw(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Pw(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return $w(fk.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Gw(e.field),direction:Ww(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=_w(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Bw(e){var t=Rw(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Uy(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=zw(e);return t instanceof fk&&vk(t)?t.getFilters():[t]}(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new uk(Qw(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return Fm(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new ak(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new ak(n,t)}(n.endAt)),jk(t,i,s,o,u,"F",c,l)}function zw(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Qw(e.unaryFilter.field);return hk.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Qw(e.unaryFilter.field);return hk.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Qw(e.unaryFilter.field);return hk.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Qw(e.unaryFilter.field);return hk.create(i,"!=",{nullValue:"NULL_VALUE"});default:return jy()}}(e):void 0!==e.fieldFilter?function(e){return hk.create(Qw(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return jy()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return fk.create(e.compositeFilter.filters.map((function(e){return zw(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return jy()}}(e.compositeFilter.op))}(e):jy()}function Ww(e){return gw[e]}function Hw(e){return kw[e]}function Kw(e){return bw[e]}function Gw(e){return{fieldPath:e.canonicalString()}}function Qw(e){return um.fromServerFormat(e.fieldPath)}function $w(e){return e instanceof hk?function(e){if("=="===e.op){if(Qg(e.value))return{unaryFilter:{field:Gw(e.field),op:"IS_NAN"}};if(Gg(e.value))return{unaryFilter:{field:Gw(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Qg(e.value))return{unaryFilter:{field:Gw(e.field),op:"IS_NOT_NAN"}};if(Gg(e.value))return{unaryFilter:{field:Gw(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gw(e.field),op:Hw(e.op),value:e.value}}}(e):e instanceof fk?function(e){var t=e.getFilters().map((function(e){return $w(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Kw(e.op),filters:t}}}(e):jy()}function Yw(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Jw(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var Xw=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:im.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:im.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Eg.EMPTY_BYTE_STRING,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;d(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=u}return m(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),Zw=m((function e(t){d(this,e),this.fe=t}));function e_(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:t_(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Aw(e,t.key),fields:t.data.value.mapValue.fields,updateTime:xw(e,t.version.toTimestamp()),createTime:xw(e,t.createTime.toTimestamp())}}(e.fe,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:n_(t.version)};else{if(!t.isUnknownDocument())return jy();r.unknownDocument={path:n.path.toArray(),version:n_(t.version)}}return r}function t_(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function n_(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function r_(e){var t=new rm(e.seconds,e.nanoseconds);return im.fromTimestamp(t)}function i_(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Uw(e.fe,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Uw(e.fe,t)})),s=rm.fromMillis(t.localWriteTimeMs);return new $b(t.batchId,s,n,o)}function a_(e){var t,n,r=r_(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?r_(e.lastLimboFreeSnapshotVersion):im.min();return void 0!==e.query.documents?(Uy(1===(n=e.query).documents.length),t=Hk(Uk(Rw(n.documents[0])))):t=function(e){return Hk(Bw(e))}(e.query),new Xw(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,r,i,Eg.fromBase64String(e.resumeToken))}function o_(e,t){var n,r=n_(t.snapshotVersion),i=n_(t.lastLimboFreeSnapshotVersion);n=Ok(t.target)?Vw(e.fe,t.target):qw(e.fe,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Pk(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function s_(e){var t=Bw({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Gk(t,t.limit,"L"):t}function u_(e,t){return new Jb(t.largestBatchId,Uw(e.fe,t.overlayMutation))}function c_(e,t){var n=t.path.lastSegment();return[e,Um(t.path.popLast()),n]}function l_(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:n_(r.readTime),documentKey:Um(r.documentKey.path),largestBatchId:r.largestBatchId}}var h_=function(){function e(){d(this,e)}return m(e,[{key:"getBundleMetadata",value:function(e,t){return f_(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:r_(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return f_(e).put({bundleId:(n=t).id,createTime:n_(Tw(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return d_(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:s_(t.bundledQuery),readTime:r_(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return d_(e).put(function(e){return{name:e.name,readTime:n_(Tw(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function f_(e){return dg(e,"bundles")}function d_(e){return dg(e,"namedQueries")}var p_=function(){function e(t,n){d(this,e),this.serializer=t,this.userId=n}return m(e,[{key:"getOverlay",value:function(e,t){var n=this;return v_(e).get(c_(this.userId,t)).next((function(e){return e?u_(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=sb();return xm.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Jb(t,a);i.push(r.we(e,o))})),xm.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Um(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(v_(e).J("collectionPathOverlayIndex",i))})),xm.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=sb(),a=Um(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return v_(e).j("collectionPathOverlayIndex",o).next((function(e){var t,n=I(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=u_(r.serializer,a);i.set(o.getKey(),o)}}catch(s){n.e(s)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=sb(),s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return v_(e).X({index:"collectionGroupOverlayIndex",range:s},(function(e,t,n){var s=u_(a.serializer,t);o.size()<r||s.largestBatchId===i?(o.set(s.getKey(),s),i=s.largestBatchId):n.done()})).next((function(){return o}))}},{key:"we",value:function(e,t){return v_(e).put(function(e,t,n){var r=l(c_(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:jw(e.fe,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"de",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function v_(e){return dg(e,"documentOverlays")}var y_=function(){function e(){d(this,e)}return m(e,[{key:"_e",value:function(e,t){this.me(e,t),t.ge()}},{key:"me",value:function(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Cg(e.integerValue));else if("doubleValue"in e){var n=Cg(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),Mm(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie("".concat(r.seconds||"")),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Ag(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ye(t,45),t.pe(i.latitude||0),t.pe(i.longitude||0)}else"mapValue"in e?Jg(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):jy()}},{key:"Te",value:function(e,t){this.ye(t,25),this.be(e,t)}},{key:"be",value:function(e,t){t.Ie(e)}},{key:"Re",value:function(e,t){var n=e.fields||{};this.ye(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Te(a,t),this.me(n[a],t)}}},{key:"Pe",value:function(e,t){var n=e.values||[];this.ye(t,50);var r,i=I(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.me(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ve",value:function(e,t){var n=this;this.ye(t,37),cm.fromName(e).path.forEach((function(e){n.ye(t,60),n.be(e,t)}))}},{key:"ye",value:function(e,t){e.pe(t)}},{key:"Ee",value:function(e){e.pe(2)}}]),e}();function m_(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function g_(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=m_(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}y_.Ve=new y_;var k_=function(){function e(){d(this,e),this.buffer=new Uint8Array(1024),this.position=0}return m(e,[{key:"Se",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.De(n.value),n=t.next();this.Ce()}},{key:"xe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ne(n.value),n=t.next();this.ke()}},{key:"Me",value:function(e){var t,n=I(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.De(i);else if(i<2048)this.De(960|i>>>6),this.De(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.De(480|i>>>12),this.De(128|63&i>>>6),this.De(128|63&i);else{var a=r.codePointAt(0);this.De(240|a>>>18),this.De(128|63&a>>>12),this.De(128|63&a>>>6),this.De(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ce()}},{key:"$e",value:function(e){var t,n=I(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ne(i);else if(i<2048)this.Ne(960|i>>>6),this.Ne(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ne(480|i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i);else{var a=r.codePointAt(0);this.Ne(240|a>>>18),this.Ne(128|63&a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ke()}},{key:"Oe",value:function(e){var t=this.Fe(e),n=g_(t);this.Be(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Le",value:function(e){var t=this.Fe(e),n=g_(t);this.Be(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"qe",value:function(){this.Ue(255),this.Ue(255)}},{key:"Ke",value:function(){this.Ge(255),this.Ge(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Qe",value:function(){return this.buffer.slice(0,this.position)}},{key:"Fe",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"De",value:function(e){var t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}},{key:"Ne",value:function(e){var t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}},{key:"Ce",value:function(){this.Ue(0),this.Ue(1)}},{key:"ke",value:function(){this.Ge(0),this.Ge(1)}},{key:"Ue",value:function(e){this.Be(1),this.buffer[this.position++]=e}},{key:"Ge",value:function(e){this.Be(1),this.buffer[this.position++]=~e}},{key:"Be",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),b_=function(){function e(t){d(this,e),this.je=t}return m(e,[{key:"Ae",value:function(e){this.je.Se(e)}},{key:"Ie",value:function(e){this.je.Me(e)}},{key:"pe",value:function(e){this.je.Oe(e)}},{key:"ge",value:function(){this.je.qe()}}]),e}(),w_=function(){function e(t){d(this,e),this.je=t}return m(e,[{key:"Ae",value:function(e){this.je.xe(e)}},{key:"Ie",value:function(e){this.je.$e(e)}},{key:"pe",value:function(e){this.je.Le(e)}},{key:"ge",value:function(){this.je.Ke()}}]),e}(),__=function(){function e(){d(this,e),this.je=new k_,this.ze=new b_(this.je),this.We=new w_(this.je)}return m(e,[{key:"seed",value:function(e){this.je.seed(e)}},{key:"He",value:function(e){return 0===e?this.ze:this.We}},{key:"Qe",value:function(){return this.je.Qe()}},{key:"reset",value:function(){this.je.reset()}}]),e}(),x_=function(){function e(t,n,r,i){d(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return m(e,[{key:"Je",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function S_(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=E_(e.arrayValue,t.arrayValue))?n:0!==(n=E_(e.directionalValue,t.directionalValue))?n:cm.comparator(e.documentKey,t.documentKey)}function E_(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var T_=function(){function e(t){d(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ye=t.orderBy,this.Xe=[];var n,r=I(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Ze=i:this.Xe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return m(e,[{key:"tn",value:function(e){Uy(e.collectionGroup===this.collectionId);var t=hm(e);if(void 0!==t&&!this.en(t))return!1;for(var n=fm(e),r=0,i=0;r<n.length&&this.en(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Ze){var a=n[r];if(!this.nn(this.Ze,a)||!this.sn(this.Ye[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ye.length||!this.sn(this.Ye[i++],o))return!1}return!0}},{key:"en",value:function(e){var t,n=I(this.Xe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.nn(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"nn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"sn",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function I_(e){var t,n;if(Uy(e instanceof hk||e instanceof fk),e instanceof hk){if(e instanceof Tk){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return hk.create(e.field,"==",t)})))||[];return fk.create(r,"or")}return e}var i=e.filters.map((function(e){return I_(e)}));return fk.create(i,e.op)}function C_(e){if(0===e.getFilters().length)return[];var t=R_(I_(e));return Uy(P_(t)),A_(t)||N_(t)?[t]:t.getFilters()}function A_(e){return e instanceof hk}function N_(e){return e instanceof fk&&vk(e)}function P_(e){return A_(e)||N_(e)||function(e){if(e instanceof fk&&pk(e)){var t,n=I(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!A_(r)&&!N_(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function R_(e){if(Uy(e instanceof hk||e instanceof fk),e instanceof hk)return e;if(1===e.filters.length)return R_(e.filters[0]);var t=e.filters.map((function(e){return R_(e)})),n=fk.create(t,e.op);return P_(n=L_(n))?n:(Uy(n instanceof fk),Uy(dk(n)),Uy(n.filters.length>1),n.filters.reduce((function(e,t){return O_(e,t)})))}function O_(e,t){var n;return Uy(e instanceof hk||e instanceof fk),Uy(t instanceof hk||t instanceof fk),n=e instanceof hk?t instanceof hk?function(e,t){return fk.create([e,t],"and")}(e,t):D_(e,t):t instanceof hk?D_(t,e):function(e,t){if(Uy(e.filters.length>0&&t.filters.length>0),dk(e)&&dk(t))return kk(e,t.getFilters());var n=pk(e)?e:t,r=pk(e)?t:e,i=n.filters.map((function(e){return O_(e,r)}));return fk.create(i,"or")}(e,t),L_(n)}function D_(e,t){if(dk(t))return kk(t,e.getFilters());var n=t.filters.map((function(t){return O_(e,t)}));return fk.create(n,"or")}function L_(e){if(Uy(e instanceof hk||e instanceof fk),e instanceof hk)return e;var t=e.getFilters();if(1===t.length)return L_(t[0]);if(yk(e))return e;var n=t.map((function(e){return L_(e)})),r=[];return n.forEach((function(t){t instanceof hk?r.push(t):t instanceof fk&&(t.op===e.op?r.push.apply(r,f(t.filters)):r.push(t))})),1===r.length?r[0]:fk.create(r,e.op)}var F_=function(){function e(){d(this,e),this.rn=new M_}return m(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.rn.add(t),xm.resolve()}},{key:"getCollectionParents",value:function(e,t){return xm.resolve(this.rn.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return xm.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return xm.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return xm.resolve(null)}},{key:"getIndexType",value:function(e,t){return xm.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return xm.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return xm.resolve(null)}},{key:"getMinOffset",value:function(e,t){return xm.resolve(mm.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return xm.resolve(mm.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return xm.resolve()}},{key:"updateIndexEntries",value:function(e,t){return xm.resolve()}}]),e}(),M_=function(){function e(){d(this,e),this.index={}}return m(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new bg(om.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new bg(om.comparator)).toArray()}}]),e}(),j_=new Uint8Array(0),U_=function(){function e(t,n){d(this,e),this.user=t,this.databaseId=n,this.on=new M_,this.un=new tb((function(e){return Pk(e)}),(function(e,t){return Rk(e,t)})),this.uid=t.uid||""}return m(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.on.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.on.add(t)}));var a={collectionId:r,parent:Um(i)};return V_(e).put(a)}return xm.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[nm(t),""],!1,!0);return V_(e).j(r).next((function(e){var r,i=I(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Bm(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=B_(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=z_(e);return a.next((function(e){o.put(l_(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=B_(e),r=z_(e),i=q_(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=q_(e),i=!0,a=new Map;return xm.forEach(this.cn(t),(function(t){return n.an(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=fb(),o=[];return xm.forEach(a,(function(i,a){var s;Dy("IndexedDbIndexManager","Using index ".concat((s=i,"id=".concat(s.indexId,"|cg=").concat(s.collectionGroup,"|f=").concat(s.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Pk(t)));var u=function(e,t){var n=hm(t);if(void 0===n)return null;var r,i=I(Dk(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=I(fm(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,s=I(Dk(e,o.fieldPath));try{for(s.s();!(a=s.n()).done;){var u=a.value;switch(u.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),u.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),u.value),Array.from(r.values())}}}catch(c){s.e(c)}finally{s.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=I(fm(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?Lk(e,o.fieldPath,e.startAt):Fk(e,o.fieldPath,e.startAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new ak(r,i)}(a,i),h=function(e,t){var n,r=[],i=!0,a=I(fm(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?Fk(e,o.fieldPath,e.endAt):Lk(e,o.fieldPath,e.endAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new ak(r,i)}(a,i),f=n.hn(i,a,l),d=n.hn(i,a,h),p=n.ln(i,a,c),v=n.fn(i.indexId,u,f,l.inclusive,d,h.inclusive,p);return xm.forEach(v,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=cm.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return xm.resolve(null)}))}},{key:"cn",value:function(e){var t=this.un.get(e);return t||(t=0===e.filters.length?[e]:C_(fk.create(e.filters,"and")).map((function(t){return Nk(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.un.set(e,t),t)}},{key:"fn",value:function(e,t,n,r,i,a,o){for(var s=this,u=(null!=t?t.length:1)*Math.max(n.length,i.length),c=u/(null!=t?t.length:1),l=[],h=function(){var u=t?s.dn(t[d/c]):j_,h=s.wn(e,u,n[d%c],r),p=s._n(e,u,i[d%c],a),v=o.map((function(t){return s.wn(e,u,t,!0)}));l.push.apply(l,f(s.createRange(h,p,v)))},d=0;d<u;++d)h();return l}},{key:"wn",value:function(e,t,n,r){var i=new x_(e,cm.empty(),t,n);return r?i:i.Je()}},{key:"_n",value:function(e,t,n,r){var i=new x_(e,cm.empty(),t,n);return r?i.Je():i}},{key:"an",value:function(e,t){var n=new T_(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=I(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.tn(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.cn(t);return xm.forEach(i,(function(t){return n.an(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new bg(um.comparator),r=!1,i=I(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=I(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var s=a.value;s.field.isKeyField()||("array-contains"===s.op||"array-contains-any"===s.op?r=!0:n=n.add(s.field))}}catch(h){o.e(h)}finally{o.f()}}}catch(h){i.e(h)}finally{i.f()}var u,c=I(e.orderBy);try{for(c.s();!(u=c.n()).done;){var l=u.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(h){c.e(h)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"mn",value:function(e,t){var n,r=new __,i=I(fm(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var s=r.He(a.kind);y_.Ve._e(o,s)}}catch(u){i.e(u)}finally{i.f()}return r.Qe()}},{key:"dn",value:function(e){var t=new __;return y_.Ve._e(e,t.He(0)),t.Qe()}},{key:"gn",value:function(e,t){var n=new __;return y_.Ve._e(Wg(this.databaseId,t),n.He(function(e){var t=fm(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Qe()}},{key:"ln",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new __);var i,a=0,o=I(fm(e));try{for(o.s();!(i=o.n()).done;){var s,u=i.value,c=n[a++],l=I(r);try{for(l.s();!(s=l.n()).done;){var h=s.value;if(this.yn(t,u.fieldPath)&&Kg(c))r=this.pn(r,u,c);else{var f=h.He(u.kind);y_.Ve._e(c,f)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.In(r)}},{key:"hn",value:function(e,t,n){return this.ln(e,t,n.position)}},{key:"In",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Qe();return t}},{key:"pn",value:function(e,t,n){var r,i=f(e),a=[],o=I(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var s,u=r.value,c=I(i);try{for(c.s();!(s=c.n()).done;){var l=s.value,h=new __;h.seed(l.Qe()),y_.Ve._e(u,h.He(t.kind)),a.push(h)}}catch(d){c.e(d)}finally{c.f()}}}catch(d){o.e(d)}finally{o.f()}return a}},{key:"yn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof hk&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=B_(e),i=z_(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next((function(e){var t=[];return xm.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new pm(t.sequenceNumber,new mm(r_(t.readTime),new cm(Bm(t.documentKey)),t.largestBatchId)):pm.empty(),r=e.fields.map((function(e){var t=l(e,2),n=t[0],r=t[1];return new dm(um.fromServerFormat(n),r)}));return new lm(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:em(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=B_(e),a=z_(e);return this.Tn(e).next((function(e){return i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return xm.forEach(t,(function(t){return a.put(l_(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return xm.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?xm.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),xm.forEach(a,(function(r){return n.En(e,t,r).next((function(t){var a=n.An(i,r);return t.isEqual(a)?xm.resolve():n.vn(e,i,r,t,a)}))}))}))}))}},{key:"Rn",value:function(e,t,n,r){return q_(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"Pn",value:function(e,t,n,r){return q_(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(n,t.key),t.key.path.toArray()])}},{key:"En",value:function(e,t,n){var r=q_(e),i=new bg(S_);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,t)])},(function(e,r){i=i.add(new x_(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"An",value:function(e,t){var n=new bg(S_),r=this.mn(t,e);if(null==r)return n;var i=hm(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Kg(a)){var o,s=I(a.arrayValue.values||[]);try{for(s.s();!(o=s.n()).done;){var u=o.value;n=n.add(new x_(t.indexId,e.key,this.dn(u),r))}}catch(c){s.e(c)}finally{s.f()}}}else n=n.add(new x_(t.indexId,e.key,j_,r));return n}},{key:"vn",value:function(e,t,n,r,i){var a=this;Dy("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),s=_g(a),u=_g(o);s||u;){var c=!1,l=!1;if(s&&u){var h=n(s,u);h<0?l=!0:h>0&&(c=!0)}else null!=s?l=!0:c=!0;c?(r(u),u=_g(o)):l?(i(s),s=_g(a)):(s=_g(a),u=_g(o))}}(r,i,S_,(function(r){o.push(a.Rn(e,t,n,r))}),(function(r){o.push(a.Pn(e,t,n,r))})),xm.waitFor(o)}},{key:"Tn",value:function(e){var t=1;return z_(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return S_(e,t)})).filter((function(e,t,n){return!t||0!==S_(e,n[t-1])}));var r=[];r.push(e);var i,a=I(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=S_(o,e),u=S_(o,t);if(0===s)r[0]=e.Je();else if(s>0&&u<0)r.push(o),r.push(o.Je());else if(u>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.bn(r[l],r[l+1]))return[];var h=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,j_,[]],f=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,j_,[]];c.push(IDBKeyRange.bound(h,f))}return c}},{key:"bn",value:function(e,t){return S_(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(W_)}},{key:"getMinOffset",value:function(e,t){var n=this;return xm.mapArray(this.cn(t),(function(t){return n.an(e,t).next((function(e){return e||jy()}))})).next(W_)}}]),e}();function V_(e){return dg(e,"collectionParents")}function q_(e){return dg(e,"indexEntries")}function B_(e){return dg(e,"indexConfiguration")}function z_(e){return dg(e,"indexState")}function W_(e){Uy(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;gm(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new mm(t.readTime,t.documentKey,n)}var H_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},K_=function(){function e(t,n,r){d(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return m(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function G_(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),s=0,u=r.X({range:o},(function(e,t,n){return s++,n.delete()}));a.push(u.next((function(){Uy(1===s)})));var c,l=[],h=I(n.mutations);try{for(h.s();!(c=h.n()).done;){var f=c.value,d=Hm(t,f.key.path,n.batchId);a.push(i.delete(d)),l.push(f.key)}}catch(p){h.e(p)}finally{h.f()}return xm.waitFor(a).next((function(){return l}))}function Q_(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw jy();t=e.noDocument}return JSON.stringify(t).length}K_.DEFAULT_COLLECTION_PERCENTILE=10,K_.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,K_.DEFAULT=new K_(41943040,K_.DEFAULT_COLLECTION_PERCENTILE,K_.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),K_.DISABLED=new K_(-1,0,0);var $_=function(){function e(t,n,r,i){d(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}return m(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return J_(e).X({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=X_(e),o=J_(e);return o.add({}).next((function(s){Uy("number"==typeof s);var u,c=new $b(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return jw(e.fe,t)})),i=n.mutations.map((function(t){return jw(e.fe,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),h=[],f=new bg((function(e,t){return em(e.canonicalString(),t.canonicalString())})),d=I(r);try{for(d.s();!(u=d.n()).done;){var p=u.value,v=Hm(i.userId,p.key.path,s);f=f.add(p.key.path.popLast()),h.push(o.put(l)),h.push(a.put(v,Km))}}catch(y){d.e(y)}finally{d.f()}return f.forEach((function(t){h.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Vn[s]=c.keys()})),xm.waitFor(h).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return J_(e).get(t).next((function(e){return e?(Uy(e.userId===n.userId),i_(n.serializer,e)):null}))}},{key:"Sn",value:function(e,t){var n=this;return this.Vn[t]?xm.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Vn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return J_(e).X({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Uy(t.batchId>=r),a=i_(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return J_(e).X({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return J_(e).j("userMutationsIndex",n).next((function(e){return e.map((function(e){return i_(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Wm(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return X_(e).X({range:i},(function(r,i,o){var s=l(r,3),u=s[0],c=s[1],h=s[2],f=Bm(c);if(u===n.userId&&t.path.isEqual(f))return J_(e).get(h).next((function(e){if(!e)throw jy();Uy(e.userId===n.userId),a.push(i_(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new bg(em),i=[];return t.forEach((function(t){var a=Wm(n.userId,t.path),o=IDBKeyRange.lowerBound(a),s=X_(e).X({range:o},(function(e,i,a){var o=l(e,3),s=o[0],u=o[1],c=o[2],h=Bm(u);s===n.userId&&t.path.isEqual(h)?r=r.add(c):a.done()}));i.push(s)})),xm.waitFor(i).next((function(){return n.Dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Wm(this.userId,r),o=IDBKeyRange.lowerBound(a),s=new bg(em);return X_(e).X({range:o},(function(e,t,a){var o=l(e,3),u=o[0],c=o[1],h=o[2],f=Bm(c);u===n.userId&&r.isPrefixOf(f)?f.length===i&&(s=s.add(h)):a.done()})).next((function(){return n.Dn(e,s)}))}},{key:"Dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(J_(e).get(t).next((function(e){if(null===e)throw jy();Uy(e.userId===n.userId),r.push(i_(n.serializer,e))})))})),xm.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return G_(e.ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Cn(t.batchId)})),xm.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Cn",value:function(e){delete this.Vn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return xm.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return X_(e).X({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Bm(e[1]);i.push(a)}else r.done()})).next((function(){Uy(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Y_(e,this.userId,t)}},{key:"xn",value:function(e){var t=this;return Z_(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"de",value:function(t,n,r,i){return Uy(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Y_(e,t,n){var r=Wm(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return X_(e).X({range:a,Y:!0},(function(e,n,r){var a=l(e,3),s=a[0],u=a[1];a[2];s===t&&u===i&&(o=!0),r.done()})).next((function(){return o}))}function J_(e){return dg(e,"mutations")}function X_(e){return dg(e,"documentMutations")}function Z_(e){return dg(e,"mutationQueues")}var ex=function(){function e(t){d(this,e),this.Nn=t}return m(e,[{key:"next",value:function(){return this.Nn+=2,this.Nn}}],[{key:"kn",value:function(){return new e(0)}},{key:"Mn",value:function(){return new e(-1)}}]),e}(),tx=function(){function e(t,n){d(this,e),this.referenceDelegate=t,this.serializer=n}return m(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.$n(e).next((function(n){var r=new ex(n.highestTargetId);return n.highestTargetId=r.next(),t.On(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.$n(e).next((function(e){return im.fromTimestamp(new rm(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.$n(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.$n(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.On(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Fn(e,t).next((function(){return n.$n(e).next((function(r){return r.targetCount+=1,n.Bn(t,r),n.On(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Fn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return nx(e).delete(t.targetId)})).next((function(){return n.$n(e)})).next((function(t){return Uy(t.targetCount>0),t.targetCount-=1,n.On(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return nx(e).X((function(o,s){var u=a_(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,a.push(r.removeTargetData(e,u)))})).next((function(){return xm.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return nx(e).X((function(e,n){var r=a_(n);t(r)}))}},{key:"$n",value:function(e){return rx(e).get("targetGlobalKey").next((function(e){return Uy(null!==e),e}))}},{key:"On",value:function(e,t){return rx(e).put("targetGlobalKey",t)}},{key:"Fn",value:function(e,t){return nx(e).put(o_(this.serializer,t))}},{key:"Bn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.$n(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Pk(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return nx(e).X({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=a_(n);Rk(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=ix(e);return t.forEach((function(t){var o=Um(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),xm.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=ix(e);return xm.forEach(t,(function(t){var a=Um(t.path);return xm.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=ix(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=ix(e),i=fb();return r.X({range:n,Y:!0},(function(e,t,n){var r=Bm(e[1]),a=new cm(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Um(t.path),r=IDBKeyRange.bound([n],[nm(n)],!1,!0),i=0;return ix(e).X({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=l(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"le",value:function(e,t){return nx(e).get(t).next((function(e){return e?a_(e):null}))}}]),e}();function nx(e){return dg(e,"targets")}function rx(e){return dg(e,"targetGlobal")}function ix(e){return dg(e,"targetDocuments")}function ax(e,t){var n=l(e,2),r=n[0],i=n[1],a=l(t,2),o=a[0],s=a[1],u=em(r,o);return 0===u?em(i,s):u}var ox=function(){function e(t){d(this,e),this.Ln=t,this.buffer=new bg(ax),this.qn=0}return m(e,[{key:"Un",value:function(){return++this.qn}},{key:"Kn",value:function(e){var t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();ax(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),sx=function(){function e(t,n,r){d(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Gn=null}return m(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}},{key:"stop",value:function(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}},{key:"started",get:function(){return null!==this.Gn}},{key:"Qn",value:function(e){var t=this;Dy("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,Kn(Wn().mark((function e(){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Gn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Cm(e.t0)){e.next=12;break}Dy("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,wm(e.t0);case 14:return e.next=16,t.Qn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),ux=function(){function e(t,n){d(this,e),this.jn=t,this.params=n}return m(e,[{key:"calculateTargetCount",value:function(e,t){return this.jn.zn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return xm.resolve(Lm.ct);var r=new ox(t);return this.jn.forEachTarget(e,(function(e){return r.Kn(e.sequenceNumber)})).next((function(){return n.jn.Wn(e,(function(e){return r.Kn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.jn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.jn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Dy("LruGarbageCollector","Garbage collection skipped; disabled"),xm.resolve(H_)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Dy("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),H_):n.Hn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.jn.getCacheSize(e)}},{key:"Hn",value:function(e,t){var n,r,i,a,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Dy("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),Oy()<=Qr.DEBUG&&Dy("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),xm.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function cx(e,t){return new ux(e,t)}var lx=function(){function e(t,n){d(this,e),this.db=t,this.garbageCollector=cx(this,n)}return m(e,[{key:"zn",value:function(e){var t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Jn",value:function(e){var t=0;return this.Wn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Wn",value:function(e,t){return this.Yn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return hx(e,n)}},{key:"removeReference",value:function(e,t,n){return hx(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return hx(e,t)}},{key:"Xn",value:function(e,t){return function(e,t){var n=!1;return Z_(e).Z((function(r){return Y_(e,r,t).next((function(e){return e&&(n=!0),xm.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Yn(e,(function(o,s){if(s<=t){var u=n.Xn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,im.min()),ix(e).delete([0,Um(o.path)])}))}));i.push(u)}})).next((function(){return xm.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return hx(e,t)}},{key:"Yn",value:function(e,t){var n,r=ix(e),i=Lm.ct;return r.X({index:"documentTargetsIndex"},(function(e,r){var a=l(e,2),o=a[0],s=(a[1],r.path),u=r.sequenceNumber;0===o?(i!==Lm.ct&&t(new cm(Bm(n)),i),i=u,n=s):i=Lm.ct})).next((function(){i!==Lm.ct&&t(new cm(Bm(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function hx(e,t){return ix(e).put(function(e,t){return{targetId:0,path:Um(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var fx=function(){function e(){d(this,e),this.changes=new tb((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return m(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,ik.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?xm.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),dx=function(){function e(t){d(this,e),this.serializer=t}return m(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return mx(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return mx(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],t_(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Zn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=ik.newInvalidDocument(t);return mx(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(gx(t))},(function(e,i){r=n.ts(t,i)})).next((function(){return r}))}},{key:"es",value:function(e,t){var n=this,r={size:0,document:ik.newInvalidDocument(t)};return mx(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(gx(t))},(function(e,i){r={document:n.ts(t,i),size:Q_(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=rb();return this.ns(e,t,(function(e,t){var i=n.ts(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"ss",value:function(e,t){var n=this,r=rb(),i=new mg(cm.comparator);return this.ns(e,t,(function(e,t){var a=n.ts(e,t);r=r.insert(e,a),i=i.insert(e,Q_(t))})).next((function(){return{documents:r,rs:i}}))}},{key:"ns",value:function(e,t,n){if(t.isEmpty())return xm.resolve();var r=new bg(bx);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(gx(r.first()),gx(r.last())),a=r.getIterator(),o=a.getNext();return mx(e).X({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=cm.fromSegments([].concat(f(t.prefixPath),[t.collectionGroup,t.documentId]));o&&bx(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.G(gx(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),t_(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],s=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return mx(e).j(IDBKeyRange.bound(o,s,!0)).next((function(e){var n,a=rb(),o=I(e);try{for(o.s();!(n=o.n()).done;){var s=n.value,u=i.ts(cm.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);u.isFoundDocument()&&(Jk(t,u)||r.has(u.key))&&(a=a.insert(u.key,u))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=rb(),o=kx(t,n),s=kx(t,mm.max());return mx(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},(function(e,t,n){var o=i.ts(cm.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new vx(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return yx(e).get("remoteDocumentGlobalKey").next((function(e){return Uy(!!e),e}))}},{key:"Zn",value:function(e,t){return yx(e).put("remoteDocumentGlobalKey",t)}},{key:"ts",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Fw(e.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=cm.fromSegments(t.noDocument.path),i=r_(t.noDocument.readTime);n=ik.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return jy();var a=cm.fromSegments(t.unknownDocument.path),o=r_(t.unknownDocument.version);n=ik.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new rm(e[0],e[1]);return im.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(im.min()))return n}return ik.newInvalidDocument(e)}}]),e}();function px(e){return new dx(e)}var vx=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).os=e,i.trackRemovals=r,i.us=new tb((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return m(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new bg((function(e,t){return em(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var s=t.us.get(a);if(n.push(t.os.removeEntry(e,a,s.readTime)),o.isValidDocument()){var u=e_(t.os.serializer,o);i=i.add(a.path.popLast());var c=Q_(u);r+=c-s.size,n.push(t.os.addEntry(e,a,u))}else if(r-=s.size,t.trackRemovals){var l=e_(t.os.serializer,o.convertToNoDocument(im.min()));n.push(t.os.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.os.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.os.updateMetadata(e,r)),xm.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.os.es(e,t).next((function(e){return n.us.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.os.ss(e,t).next((function(e){var t=e.documents;return e.rs.forEach((function(e,r){n.us.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(fx);function yx(e){return dg(e,"remoteDocumentGlobal")}function mx(e){return dg(e,"remoteDocumentsV14")}function gx(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function kx(e,t){var n=t.documentKey.path.toArray();return[e,t_(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function bx(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=em(n[a],r[a]))return i;return(i=em(n.length,r.length))||((i=em(n[n.length-2],r[r.length-2]))||em(n[n.length-1],r[r.length-1]))}var wx=m((function e(t,n){d(this,e),this.overlayedDocument=t,this.mutatedFields=n})),_x=function(){function e(t,n,r,i){d(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return m(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&Mb(r.mutation,e,xg.empty(),rm.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,fb()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fb(),i=sb();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=ab();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=sb();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,fb())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=rb(),a=cb(),o=cb();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof qb)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),Mb(o.mutation,t,o.mutation.getFieldMask(),rm.now())):a.set(t.key,xg.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new wx(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=cb(),i=new mg((function(e,t){return e-t})),a=fb();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=I(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||xg.empty();o=e.applyToLocalView(a,o),r.set(n,o);var s=(i.get(e.batchId)||fb()).add(n);i=i.insert(e.batchId,s)}}))};for(a.s();!(n=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}})).next((function(){for(var o=[],s=i.getReverseIterator(),u=function(){var i=s.getNext(),u=i.key,c=i.value,l=ub();c.forEach((function(e){if(!a.has(e)){var n=Lb(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,u,l))};s.hasNext();)u();return xm.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return cm.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):zk(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):xm.resolve(sb()),s=-1,u=a;return o.next((function(t){return xm.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),a.get(t)?xm.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){u=u.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,u,t,fb())})).next((function(e){return{batchId:s,changes:ob(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new cm(t)).next((function(e){var t=ab();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=ab();return this.indexManager.getCollectionParents(e,i).next((function(o){return xm.forEach(o,(function(o){var s=function(e,t){return new Mk(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,ik.newInvalidDocument(r)))}));var n=ab();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&Mb(a.mutation,i,xg.empty(),rm.now()),Jk(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),xx=function(){function e(t){d(this,e),this.serializer=t,this.cs=new Map,this.hs=new Map}return m(e,[{key:"getBundleMetadata",value:function(e,t){return xm.resolve(this.cs.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:Tw(n.createTime)}),xm.resolve()}},{key:"getNamedQuery",value:function(e,t){return xm.resolve(this.hs.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:s_(e.bundledQuery),readTime:Tw(e.readTime)}}(t)),xm.resolve()}}]),e}(),Sx=function(){function e(){d(this,e),this.overlays=new mg(cm.comparator),this.ls=new Map}return m(e,[{key:"getOverlay",value:function(e,t){return xm.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=sb();return xm.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.we(e,t,i)})),xm.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ls.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ls.delete(n)),xm.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=sb(),i=t.length+1,a=new cm(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return xm.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new mg((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=sb(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=sb(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return xm.resolve(u)}},{key:"we",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Jb(t,n));var a=this.ls.get(t);void 0===a&&(a=fb(),this.ls.set(t,a)),this.ls.set(t,a.add(n.key))}}]),e}(),Ex=function(){function e(){d(this,e),this.fs=new bg(Tx.ds),this.ws=new bg(Tx._s)}return m(e,[{key:"isEmpty",value:function(){return this.fs.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Tx(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}},{key:"gs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.ys(new Tx(e,t))}},{key:"ps",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Is",value:function(e){var t=this,n=new cm(new om([])),r=new Tx(n,e),i=new Tx(n,e+1),a=[];return this.ws.forEachInRange([r,i],(function(e){t.ys(e),a.push(e.key)})),a}},{key:"Ts",value:function(){var e=this;this.fs.forEach((function(t){return e.ys(t)}))}},{key:"ys",value:function(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}},{key:"Es",value:function(e){var t=new cm(new om([])),n=new Tx(t,e),r=new Tx(t,e+1),i=fb();return this.ws.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Tx(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Tx=function(){function e(t,n){d(this,e),this.key=t,this.As=n}return m(e,null,[{key:"ds",value:function(e,t){return cm.comparator(e.key,t.key)||em(e.As,t.As)}},{key:"_s",value:function(e,t){return em(e.As,t.As)||cm.comparator(e.key,t.key)}}]),e}(),Ix=function(){function e(t,n){d(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new bg(Tx.ds)}return m(e,[{key:"checkEmpty",value:function(e){return xm.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new $b(i,t,n,r);this.mutationQueue.push(a);var o,s=I(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.Rs=this.Rs.add(new Tx(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return xm.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return xm.resolve(this.Ps(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.bs(n),i=r<0?0:r;return xm.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return xm.resolve(0===this.mutationQueue.length?-1:this.vs-1)}},{key:"getAllMutationBatches",value:function(e){return xm.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Tx(t,0),i=new Tx(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],(function(e){var t=n.Ps(e.As);a.push(t)})),xm.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new bg(em);return t.forEach((function(e){var t=new Tx(e,0),i=new Tx(e,Number.POSITIVE_INFINITY);n.Rs.forEachInRange([t,i],(function(e){r=r.add(e.As)}))})),xm.resolve(this.Vs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;cm.isDocumentKey(i)||(i=i.child(""));var a=new Tx(new cm(i),0),o=new bg(em);return this.Rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.As)),!0)}),a),xm.resolve(this.Vs(o))}},{key:"Vs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Ps(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Uy(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();var r=this.Rs;return xm.forEach(t.mutations,(function(i){var a=new Tx(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Rs=r}))}},{key:"Cn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Tx(t,0),r=this.Rs.firstAfterOrEqual(n);return xm.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,xm.resolve()}},{key:"Ss",value:function(e,t){return this.bs(e)}},{key:"bs",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"Ps",value:function(e){var t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Cx=function(){function e(t){d(this,e),this.Ds=t,this.docs=new mg(cm.comparator),this.size=0}return m(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return xm.resolve(n?n.document.mutableCopy():ik.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=rb();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():ik.newInvalidDocument(e))})),xm.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=rb(),a=t.path,o=new cm(a.child("")),s=this.docs.getIteratorFrom(o);s.hasNext();){var u=s.getNext(),c=u.key,l=u.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||gm(ym(l),n)<=0||(r.has(l.key)||Jk(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return xm.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){jy()}},{key:"Cs",value:function(e,t){return xm.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Ax(this)}},{key:"getSize",value:function(e){return xm.resolve(this.size)}}]),e}(),Ax=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).os=e,r}return m(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.os.addEntry(e,i)):t.os.removeEntry(r)})),xm.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.os.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.os.getEntries(e,t)}}]),n}(fx),Nx=function(){function e(t){d(this,e),this.persistence=t,this.xs=new tb((function(e){return Pk(e)}),Rk),this.lastRemoteSnapshotVersion=im.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Ex,this.targetCount=0,this.Ms=ex.kn()}return m(e,[{key:"forEachTarget",value:function(e,t){return this.xs.forEach((function(e,n){return t(n)})),xm.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return xm.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return xm.resolve(this.Ns)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ms.next(),xm.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),xm.resolve()}},{key:"Fn",value:function(e){this.xs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ms=new ex(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Fn(t),this.targetCount+=1,xm.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Fn(t),xm.resolve()}},{key:"removeTargetData",value:function(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,xm.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.xs.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.xs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),xm.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return xm.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.xs.get(t)||null;return xm.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.ks.gs(t,n),xm.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.ks.ps(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),xm.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.ks.Is(t),xm.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.ks.Es(t);return xm.resolve(n)}},{key:"containsKey",value:function(e,t){return xm.resolve(this.ks.containsKey(t))}}]),e}(),Px=function(){function e(t,n){var r=this;d(this,e),this.$s={},this.overlays={},this.Os=new Lm(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=t(this),this.Bs=new Nx(this),this.indexManager=new F_,this.remoteDocumentCache=new Cx((function(e){return r.referenceDelegate.Ls(e)})),this.serializer=new Zw(n),this.qs=new xx(this.serializer)}return m(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Fs=!1,Promise.resolve()}},{key:"started",get:function(){return this.Fs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Sx,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.$s[e.toKey()];return n||(n=new Ix(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;Dy("MemoryPersistence","Starting transaction:",e);var i=new Rx(this.Os.next());return this.referenceDelegate.Us(),n(i).next((function(e){return r.referenceDelegate.Ks(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Gs",value:function(e,t){return xm.or(Object.values(this.$s).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Rx=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return m(n)}(bm),Ox=function(){function e(t){d(this,e),this.persistence=t,this.Qs=new Ex,this.js=null}return m(e,[{key:"Ws",get:function(){if(this.js)return this.js;throw jy()}},{key:"addReference",value:function(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),xm.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),xm.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ws.add(t.toString()),xm.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Qs.Is(t.targetId).forEach((function(e){return n.Ws.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ws.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Us",value:function(){this.js=new Set}},{key:"Ks",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xm.forEach(this.Ws,(function(r){var i=cm.fromPath(r);return t.Hs(e,i).next((function(e){e||n.removeEntry(i,im.min())}))})).next((function(){return t.js=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hs(e,t).next((function(e){e?n.Ws.delete(t.toString()):n.Ws.add(t.toString())}))}},{key:"Ls",value:function(e){return 0}},{key:"Hs",value:function(e,t){var n=this;return xm.or([function(){return xm.resolve(n.Qs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Gs(e,t)}])}}],[{key:"zs",value:function(t){return new e(t)}}]),e}(),Dx=function(){function e(t){d(this,e),this.serializer=t}return m(e,[{key:"O",value:function(e,t,n,r){var i=this,a=new Sm("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zm,{unique:!0}),e.createObjectStore("documentMutations")}(e),Lx(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=xm.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Lx(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:im.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").j().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zm,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return xm.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Ys(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Xs(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Zs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ti(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ei(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:ig});t.createIndex("collectionPathOverlayIndex",ag,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",og,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Gm});t.createIndex("documentKeyIndex",Qm),t.createIndex("collectionGroupIndex",$m)}(e)})).next((function(){return i.ni(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.si(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:eg}).createIndex("sequenceNumberIndex",tg,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:ng}).createIndex("documentKeyIndex",rg,{unique:!1})}(e)}))),o}},{key:"Xs",value:function(e){var t=0;return e.store("remoteDocuments").X((function(e,n){t+=Q_(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Ys",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next((function(n){return xm.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",i).next((function(r){return xm.forEach(r,(function(r){Uy(r.userId===n.userId);var i=i_(t.serializer,r);return G_(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Zs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.X((function(n,i){var a=new om(n),o=function(e){return[0,Um(e)]}(a);r.push(t.get(o).next((function(n){return n?xm.resolve():function(n){return t.put({targetId:0,path:Um(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return xm.waitFor(r)}))}))}},{key:"ti",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Zm});var n=t.store("collectionParents"),r=new M_,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Um(i)})}};return t.store("remoteDocuments").X({Y:!0},(function(e,t){var n=new om(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").X({Y:!0},(function(e,t){var n=l(e,3),r=(n[0],n[1]),a=(n[2],Bm(r));return i(a.popLast())}))}))}},{key:"ei",value:function(e){var t=this,n=e.store("targets");return n.X((function(e,r){var i=a_(r),a=o_(t.serializer,i);return n.put(a)}))}},{key:"ni",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.X((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new cm(om.fromString(i.document.name).popFirst(5)):i.noDocument?cm.fromSegments(i.noDocument.path):i.unknownDocument?cm.fromSegments(i.unknownDocument.path):jy()).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(s))})).next((function(){return xm.waitFor(r)}))}},{key:"si",value:function(e,t){var n=this,r=t.store("mutations"),i=px(this.serializer),a=new Px(Ox.zs,this.serializer.fe);return r.j().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:fb();i_(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),xm.forEach(r,(function(e,r){var o=new Ny(r),s=p_.de(n.serializer,o),u=a.getIndexManager(o),c=$_.de(o,n.serializer,u,a.referenceDelegate);return new _x(i,c,s,u).recalculateAndSaveOverlaysForDocumentKeys(new fg(t,Lm.ct),e).next()}))}))}}]),e}();function Lx(e){e.createObjectStore("targetDocuments",{keyPath:Jm}).createIndex("documentTargetsIndex",Xm,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ym,{unique:!0}),e.createObjectStore("targetGlobal")}var Fx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Mx=function(){function e(t,n,r,i,a,o,s,u,c,l){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(d(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.ii=a,this.window=o,this.document=s,this.ri=c,this.oi=l,this.ui=h,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=function(e){return Promise.resolve()},!e.D())throw new By(qy.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new lx(this,i),this.di=n+"main",this.serializer=new Zw(u),this.wi=new Em(this.di,this.ui,new Dx(this.serializer)),this.Bs=new tx(this.referenceDelegate,this.serializer),this.remoteDocumentCache=px(this.serializer),this.qs=new h_,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===l&&Ly("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return m(e,[{key:"start",value:function(){var e=this;return this.mi().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new By(qy.FAILED_PRECONDITION,Fx);return e.gi(),e.yi(),e.pi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Bs.getHighestSequenceNumber(t)}))})).then((function(t){e.Os=new Lm(t,e.ri)})).then((function(){e.Fs=!0})).catch((function(t){return e.wi&&e.wi.close(),Promise.reject(t)}))}},{key:"Ii",value:function(e){var t=this;return this.fi=function(){var n=Kn(Wn().mark((function n(r){return Wn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.wi.B(function(){var t=Kn(Wn().mark((function t(n){return Wn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget(Kn(Wn().mark((function e(){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.mi();case 4:case"end":return e.stop()}}),e)})))))}},{key:"mi",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Ux(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Ti(t).next((function(t){t||(e.isPrimary=!1,e.ii.enqueueRetryable((function(){return e.fi(!1)})))}))})).next((function(){return e.Ei(t)})).next((function(n){return e.isPrimary&&!n?e.Ai(t).next((function(){return!1})):!!n&&e.vi(t).next((function(){return!0}))}))})).catch((function(t){if(Cm(t))return Dy("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Dy("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.ii.enqueueRetryable((function(){return e.fi(t)})),e.isPrimary=t}))}},{key:"Ti",value:function(e){var t=this;return jx(e).get("owner").next((function(e){return xm.resolve(t.Ri(e))}))}},{key:"Pi",value:function(e){return Ux(e).delete(this.clientId)}},{key:"bi",value:function(){var e=Kn(Wn().mark((function e(){var t,n,r,i,a=this;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Vi(this.li,18e5)){e.next=6;break}return this.li=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=dg(e,"clientMetadata");return t.j().next((function(e){var n=a.Si(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return xm.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this._i){n=I(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this._i.removeItem(this.Di(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pi",value:function(){var e=this;this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.mi().then((function(){return e.bi()})).then((function(){return e.pi()}))}))}},{key:"Ri",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Ei",value:function(e){var t=this;return this.oi?xm.resolve(!0):jx(e).get("owner").next((function(n){if(null!==n&&t.Vi(n.leaseTimestampMs,5e3)&&!t.Ci(n.ownerId)){if(t.Ri(n)&&t.networkEnabled)return!0;if(!t.Ri(n)){if(!n.allowTabSynchronization)throw new By(qy.FAILED_PRECONDITION,Fx);return!1}}return!(!t.networkEnabled||!t.inForeground)||Ux(e).j().next((function(e){return void 0===t.Si(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Dy("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Kn(Wn().mark((function e(){var t=this;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),e.next=7,this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new fg(e,Lm.ct);return t.Ai(n).next((function(){return t.Pi(n)}))}));case 7:this.wi.close(),this.Mi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Si",value:function(e,t){var n=this;return e.filter((function(e){return n.Vi(e.updateTimeMs,t)&&!n.Ci(e.clientId)}))}},{key:"$i",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Ux(t).j().next((function(t){return e.Si(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Fs}},{key:"getMutationQueue",value:function(e,t){return $_.de(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new U_(e,this.serializer.fe.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return p_.de(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;Dy("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",s=15===(i=this.ui)?hg:14===i?lg:13===i?cg:12===i?ug:11===i?sg:void jy();return this.wi.runTransaction(e,o,s,(function(i){return a=new fg(i,r.Os?r.Os.next():Lm.ct),"readwrite-primary"===t?r.Ti(a).next((function(e){return!!e||r.Ei(a)})).next((function(t){if(!t)throw Ly("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.ii.enqueueRetryable((function(){return r.fi(!1)})),new By(qy.FAILED_PRECONDITION,km);return n(a)})).next((function(e){return r.vi(a).next((function(){return e}))})):r.Oi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Oi",value:function(e){var t=this;return jx(e).get("owner").next((function(e){if(null!==e&&t.Vi(e.leaseTimestampMs,5e3)&&!t.Ci(e.ownerId)&&!t.Ri(e)&&!(t.oi||t.allowTabSynchronization&&e.allowTabSynchronization))throw new By(qy.FAILED_PRECONDITION,Fx)}))}},{key:"vi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return jx(e).put("owner",t)}},{key:"Ai",value:function(e){var t=this,n=jx(e);return n.get("owner").next((function(e){return t.Ri(e)?(Dy("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):xm.resolve()}))}},{key:"Vi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Ly("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"gi",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=function(){e.ii.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.mi()}))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ni",value:function(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}},{key:"yi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=function(){t.xi();var e=/(?:Version|Mobile)\/1[456]/;!dr()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.ii.enterRestrictedMode(!0),t.ii.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ci))}},{key:"ki",value:function(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}},{key:"Ci",value:function(e){var t;try{var n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Dy("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Ly("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"xi",value:function(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Ly("Failed to set zombie client id.",e)}}},{key:"Mi",value:function(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(e){}}},{key:"Di",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return Em.D()}}]),e}();function jx(e){return dg(e,"owner")}function Ux(e){return dg(e,"clientMetadata")}function Vx(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var qx=function(){function e(t,n,r,i){d(this,e),this.targetId=t,this.fromCache=n,this.Fi=r,this.Bi=i}return m(e,null,[{key:"Li",value:function(t,n){var r,i=fb(),a=fb(),o=I(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Bx=function(){function e(){d(this,e),this.qi=!1}return m(e,[{key:"initialize",value:function(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ki(e,t).next((function(a){return a||i.Gi(e,t,r,n)})).next((function(n){return n||i.Qi(e,t)}))}},{key:"Ki",value:function(e,t){var n=this;if(Vk(t))return xm.resolve(null);var r=Hk(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Gk(t,null,"F"),r=Hk(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=fb.apply(void 0,f(i));return n.Ui.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.ji(t,i);return n.zi(t,o,a,r.readTime)?n.Ki(e,Gk(t,null,"F")):n.Wi(e,o,t,r)}))}))})))}))}},{key:"Gi",value:function(e,t,n,r){var i=this;return Vk(t)||r.isEqual(im.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((function(a){var o=i.ji(t,a);return i.zi(t,o,n,r)?i.Qi(e,t):(Oy()<=Qr.DEBUG&&Dy("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Yk(t)),i.Wi(e,o,t,vm(r,-1)))}))}},{key:"ji",value:function(e,t){var n=new bg(Zk(e));return t.forEach((function(t,r){Jk(e,r)&&(n=n.add(r))})),n}},{key:"zi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Qi",value:function(e,t){return Oy()<=Qr.DEBUG&&Dy("QueryEngine","Using full collection scan to execute query:",Yk(t)),this.Ui.getDocumentsMatchingQuery(e,t,mm.min())}},{key:"Wi",value:function(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),zx=function(){function e(t,n,r,i){d(this,e),this.persistence=t,this.Hi=n,this.serializer=i,this.Ji=new mg(em),this.Yi=new tb((function(e){return Pk(e)}),Rk),this.Xi=new Map,this.Zi=t.getRemoteDocumentCache(),this.Bs=t.getTargetCache(),this.qs=t.getBundleCache(),this.tr(r)}return m(e,[{key:"tr",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _x(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ji)}))}}]),e}();function Wx(e,t,n,r){return new zx(e,t,n,r)}function Hx(e,t){return Kx.apply(this,arguments)}function Kx(){return(Kx=Kn(Wn().mark((function e(t,n){var r;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vy(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.tr(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=fb(),u=I(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;a.push(c.batchId);var l,h=I(c.mutations);try{for(h.s();!(l=h.n()).done;){var f=l.value;s=s.add(f.key)}}catch(k){h.e(k)}finally{h.f()}}}catch(k){u.e(k)}finally{u.f()}var d,p=I(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=I(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;s=s.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,s).next((function(e){return{er:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gx(e,t){var n=Vy(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=xm.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Uy(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=fb(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Qx(e){var t=Vy(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Bs.getLastRemoteSnapshotVersion(e)}))}function $x(e,t){var n=Vy(e),r=t.snapshotVersion,i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.Bs.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.Bs.addMatchingKeys(e,a.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?c=c.withResumeToken(Eg.EMPTY_BYTE_STRING,im.min()).withLastLimboFreeSnapshotVersion(im.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,a)&&o.push(n.Bs.updateTargetData(e,c))}}));var s=rb(),u=fb();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Yx(e,a,t.documentUpdates).next((function(e){s=e.nr,u=e.sr}))),!r.isEqual(im.min())){var c=n.Bs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return xm.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.Ji=i,e}))}function Yx(e,t,n){var r=fb(),i=fb();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=rb();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(im.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Dy("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{nr:r,sr:i}}))}function Jx(e,t){var n=Vy(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Xx(e,t){var n=Vy(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Bs.getTargetData(e,t).next((function(i){return i?(r=i,xm.resolve(r)):n.Bs.allocateTargetId(e).next((function(i){return r=new Xw(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}function Zx(e,t,n){return eS.apply(this,arguments)}function eS(){return(eS=Kn(Wn().mark((function e(t,n,r){var i,a,o;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Vy(t),a=i.Ji.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Cm(e.t1)){e.next=12;break}throw e.t1;case 12:Dy("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ji=i.Ji.remove(n),i.Yi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function tS(e,t,n){var r=Vy(e),i=im.min(),a=fb();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Vy(e),i=r.Yi.get(n);return void 0!==i?xm.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,Hk(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Hi.getDocumentsMatchingQuery(e,t,n?i:im.min(),n?a:fb())})).next((function(e){return iS(r,Xk(t),e),{documents:e,ir:a}}))}))}function nS(e,t){var n=Vy(e),r=Vy(n.Bs),i=n.Ji.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.le(e,t).next((function(e){return e?e.target:null}))}))}function rS(e,t){var n=Vy(e),r=n.Xi.get(t)||im.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Zi.getAllFromCollectionGroup(e,t,vm(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return iS(n,t,e),e}))}function iS(e,t,n){var r=e.Xi.get(t)||im.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}function aS(e,t,n,r){return oS.apply(this,arguments)}function oS(){return oS=Kn(Wn().mark((function e(t,n,r,i){var a,o,s,u,c,l,h,f,d,p;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Vy(t),o=fb(),s=rb(),u=I(r);try{for(u.s();!(c=u.n()).done;)l=c.value,h=n.rr(l.metadata.name),l.document&&(o=o.add(h)),(f=n.ur(l)).setReadTime(n.cr(l.metadata.readTime)),s=s.insert(h,f)}catch(v){u.e(v)}finally{u.f()}return d=a.Zi.newChangeBuffer({trackRemovals:!0}),e.next=7,Xx(a,function(e){return Hk(Uk(om.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Yx(e,d,s).next((function(t){return d.apply(e),t})).next((function(t){return a.Bs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Bs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.nr,t.sr)})).next((function(){return t.nr}))}))})));case 9:case"end":return e.stop()}}),e)}))),oS.apply(this,arguments)}function sS(e,t){return uS.apply(this,arguments)}function uS(){return uS=Kn(Wn().mark((function e(t,n){var r,i,a,o=arguments;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:fb(),e.next=3,Xx(t,Hk(s_(n.bundledQuery)));case 3:return i=e.sent,a=Vy(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Tw(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.qs.saveNamedQuery(e,n);var o=i.withResumeToken(Eg.EMPTY_BYTE_STRING,t);return a.Ji=a.Ji.insert(o.targetId,o),a.Bs.updateTargetData(e,o).next((function(){return a.Bs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Bs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.qs.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),uS.apply(this,arguments)}function cS(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function lS(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function hS(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var fS=function(){function e(t,n,r,i){d(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return m(e,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new By(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Ly("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),dS=function(){function e(t,n,r){d(this,e),this.targetId=t,this.state=n,this.error=r}return m(e,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new By(i.error.code,i.error.message))),a?new e(t,i.state,r):(Ly("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),pS=function(){function e(t,n){d(this,e),this.clientId=t,this.activeTargetIds=n}return m(e,null,[{key:"ar",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=pb(),o=0;i&&o<r.activeTargetIds.length;++o)i=jm(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Ly("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),vS=function(){function e(t,n){d(this,e),this.clientId=t,this.onlineState=n}return m(e,null,[{key:"ar",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Ly("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),yS=function(){function e(){d(this,e),this.activeTargetIds=pb()}return m(e,[{key:"lr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"dr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"hr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),mS=function(){function e(t,n,r,i,a){d(this,e),this.window=t,this.ii=n,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new mg(em),this.started=!1,this.yr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=cS(this.persistenceKey,this.wr),this.Ir=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gr=this.gr.insert(this.wr,new yS),this.Tr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Er=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Ar=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.vr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Rr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this._r)}return m(e,[{key:"start",value:function(){var e=Kn(Wn().mark((function e(){var t,n,r,i,a,o,s,u,c,l,h,f=this;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.$i();case 2:t=e.sent,n=I(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.wr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(cS(this.persistenceKey,i)))&&(o=pS.ar(i,a))&&(this.gr=this.gr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Pr(),(s=this.storage.getItem(this.vr))&&(u=this.br(s))&&this.Vr(u),c=I(this.yr);try{for(c.s();!(l=c.n()).done;)h=l.value,this.mr(h)}catch(d){c.e(d)}finally{c.f()}this.yr=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Ir,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Sr(this.gr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.gr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Dr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Dr(e,t,n),this.Cr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(hS(this.persistenceKey,e));if(n){var r=dS.ar(e,n);r&&(t=r.state)}}return this.Nr.lr(e),this.Pr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Nr.dr(e),this.Pr()}},{key:"isLocalQueryTarget",value:function(e){return this.Nr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(hS(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.kr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Cr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Mr(e)}},{key:"notifyBundleLoaded",value:function(e){this.$r(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Dy("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Dy("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Dy("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"mr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Dy("SharedClientState","EVENT",n.key,n.newValue),n.key===this.pr)return void Ly("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable(Kn(Wn().mark((function e(){var r,i,a,o,s,u,c;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.Tr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Or(n.key),e.abrupt("return",t.Fr(r,null));case 6:if(!(i=t.Br(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Fr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.Er.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Lr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.qr(a));case 16:e.next=41;break;case 18:if(!t.Ar.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Ur(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Kr(o));case 23:e.next=41;break;case 25:if(n.key!==t.vr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.br(n.newValue))){e.next=30;break}return e.abrupt("return",t.Vr(s));case 30:e.next=41;break;case 32:if(n.key!==t.Ir){e.next=37;break}u=function(e){var t=Lm.ct;if(null!=e)try{var n=JSON.parse(e);Uy("number"==typeof n),t=n}catch(e){Ly("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),u!==Lm.ct&&t.sequenceNumberHandler(u),e.next=41;break;case 37:if(n.key!==t.Rr){e.next=41;break}return c=t.Gr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Qr(e)})));case 41:e.next=44;break;case 43:t.yr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Nr",get:function(){return this.gr.get(this.wr)}},{key:"Pr",value:function(){this.setItem(this.pr,this.Nr.hr())}},{key:"Dr",value:function(e,t,n){var r=new fS(this.currentUser,e,t,n),i=lS(this.persistenceKey,this.currentUser,e);this.setItem(i,r.hr())}},{key:"Cr",value:function(e){var t=lS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Mr",value:function(e){var t={clientId:this.wr,onlineState:e};this.storage.setItem(this.vr,JSON.stringify(t))}},{key:"kr",value:function(e,t,n){var r=hS(this.persistenceKey,e),i=new dS(e,t,n);this.setItem(r,i.hr())}},{key:"$r",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}},{key:"Or",value:function(e){var t=this.Tr.exec(e);return t?t[1]:null}},{key:"Br",value:function(e,t){var n=this.Or(e);return pS.ar(n,t)}},{key:"Lr",value:function(e,t){var n=this.Er.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return fS.ar(new Ny(i),r,t)}},{key:"Ur",value:function(e,t){var n=this.Ar.exec(e),r=Number(n[1]);return dS.ar(r,t)}},{key:"br",value:function(e){return vS.ar(e)}},{key:"Gr",value:function(e){return JSON.parse(e)}},{key:"qr",value:function(){var e=Kn(Wn().mark((function e(t){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.jr(t.batchId,t.state,t.error));case 2:Dy("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Kr",value:function(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}},{key:"Fr",value:function(e,t){var n=this,r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),o=[],s=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||s.push(e)})),this.syncEngine.Wr(o,s).then((function(){n.gr=r}))}},{key:"Vr",value:function(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Sr",value:function(e){var t=pb();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),e}(),gS=function(){function e(){d(this,e),this.Hr=new yS,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return m(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Jr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Hr.dr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Jr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Hr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Hr=new yS,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),kS=function(){function e(){d(this,e)}return m(e,[{key:"Yr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),bS=function(){function e(){var t=this;d(this,e),this.Xr=function(){return t.Zr()},this.eo=function(){return t.no()},this.so=[],this.io()}return m(e,[{key:"Yr",value:function(e){this.so.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}},{key:"io",value:function(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}},{key:"Zr",value:function(){Dy("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=I(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"no",value:function(){Dy("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=I(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),wS=null;function _S(){return null===wS?wS=268435456+Math.round(2147483648*Math.random()):wS++,"0x"+wS.toString(16)}var xS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},SS=function(){function e(t){d(this,e),this.ro=t.ro,this.oo=t.oo}return m(e,[{key:"uo",value:function(e){this.co=e}},{key:"ao",value:function(e){this.ho=e}},{key:"onMessage",value:function(e){this.lo=e}},{key:"close",value:function(){this.oo()}},{key:"send",value:function(e){this.ro(e)}},{key:"fo",value:function(){this.co()}},{key:"wo",value:function(e){this.ho(e)}},{key:"_o",value:function(e){this.lo(e)}}]),e}(),ES="WebChannelConnection",TS=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return m(n,[{key:"Ao",value:function(e,t,n,r){var i=_S();return new Promise((function(a,o){var s=new Ty;s.setWithCredentials(!0),s.listenOnce(wy.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case by.NO_ERROR:var t=s.getResponseJson();Dy(ES,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case by.TIMEOUT:Dy(ES,"RPC '".concat(e,"' ").concat(i," timed out")),o(new By(qy.DEADLINE_EXCEEDED,"Request time out"));break;case by.HTTP_ERROR:var n=s.getStatus();if(Dy(ES,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson();Array.isArray(r)&&(r=r[0]);var u=null==r?void 0:r.error;if(u&&u.status&&u.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(qy).indexOf(t)>=0?t:qy.UNKNOWN}(u.status);o(new By(c,u.message))}else o(new By(qy.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new By(qy.UNAVAILABLE,"Connection failed."));break;default:jy()}}finally{Dy(ES,"RPC '".concat(e,"' ").concat(i," completed."))}}));var u=JSON.stringify(r);Dy(ES,"RPC '".concat(e,"' ").concat(i," sending request:"),r),s.send(t,"POST",u,n,15)}))}},{key:"Ro",value:function(e,t,n){var r=_S(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=gy(),o=ky(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(s.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(s.xmlHttpFactory=new Sy({})),this.Eo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;var c=i.join("");Dy(ES,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),s);var l=a.createWebChannel(c,s),h=!1,f=!1,d=new SS({ro:function(t){f?Dy(ES,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Dy(ES,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),h=!0),Dy(ES,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},oo:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,Ey.EventType.OPEN,(function(){f||Dy(ES,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,Ey.EventType.CLOSE,(function(){f||(f=!0,Dy(ES,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.wo())})),p(l,Ey.EventType.ERROR,(function(t){f||(f=!0,Fy(ES,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.wo(new By(qy.UNAVAILABLE,"The operation could not be completed")))})),p(l,Ey.EventType.MESSAGE,(function(t){var n;if(!f){var i=t.data[0];Uy(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){Dy(ES,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var s=o.status,u=function(e){var t=Hb[e];if(void 0!==t)return ew(t)}(s),c=o.message;void 0===u&&(u=qy.INTERNAL,c="Unknown error status: "+s+" with message "+o.message),f=!0,d.wo(new By(u,c)),l.close()}else Dy(ES,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d._o(i)}})),p(o,_y.STAT_EVENT,(function(t){t.stat===xy.PROXY?Dy(ES,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===xy.NOPROXY&&Dy(ES,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.fo()}),0),d}}]),n}(function(){function e(t){d(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.mo=n+"://"+t.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return m(e,[{key:"po",get:function(){return!1}},{key:"Io",value:function(e,t,n,r,i){var a=_S(),o=this.To(e,t);Dy("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var s={};return this.Eo(s,r,i),this.Ao(e,o,s,n).then((function(t){return Dy("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw Fy("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"vo",value:function(e,t,n,r,i,a){return this.Io(e,t,n,r,i)}},{key:"Eo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Py,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"To",value:function(e,t){var n=xS[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}]),e}());function IS(){return"undefined"!=typeof window?window:null}function CS(){return"undefined"!=typeof document?document:null}function AS(e){return new ww(e,!0)}var NS=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;d(this,e),this.ii=t,this.timerId=n,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}return m(e,[{key:"reset",value:function(){this.So=0}},{key:"xo",value:function(){this.So=this.Vo}},{key:"No",value:function(e){var t=this;this.cancel();var n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&Dy("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,(function(){return t.Co=Date.now(),e()})),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}},{key:"Mo",value:function(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}},{key:"cancel",value:function(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"ko",value:function(){return(Math.random()-.5)*this.So}}]),e}(),PS=function(){function e(t,n,r,i,a,o,s,u){d(this,e),this.ii=t,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new NS(t,n)}return m(e,[{key:"Uo",value:function(){return 1===this.state||5===this.state||this.Ko()}},{key:"Ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Go()}},{key:"stop",value:function(){var e=Kn(Wn().mark((function e(){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Uo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Qo",value:function(){this.state=0,this.qo.reset()}},{key:"jo",value:function(){var e=this;this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(function(){return e.zo()})))}},{key:"Wo",value:function(e){this.Ho(),this.stream.send(e)}},{key:"zo",value:function(){var e=Kn(Wn().mark((function e(){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ho",value:function(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}},{key:"Jo",value:function(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}},{key:"close",value:function(){var e=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==t?this.qo.reset():n&&n.code===qy.RESOURCE_EXHAUSTED?(Ly(n.toString()),Ly("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===qy.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.ao(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Yo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=l(t,2),i=r[0],a=r[1];e.Fo===n&&e.Zo(i,a)}),(function(n){t((function(){var t=new By(qy.UNKNOWN,"Fetching auth token failed: "+n.message);return e.tu(t)}))}))}},{key:"Zo",value:function(e,t){var n=this,r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((function(){r((function(){return n.state=2,n.Lo=n.ii.enqueueAfterDelay(n.Oo,1e4,(function(){return n.Ko()&&(n.state=3),Promise.resolve()})),n.listener.uo()}))})),this.stream.ao((function(e){r((function(){return n.tu(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Go",value:function(){var e=this;this.state=5,this.qo.No(Kn(Wn().mark((function t(){return Wn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"tu",value:function(e){return Dy("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Xo",value:function(e){var t=this;return function(n){t.ii.enqueueAndForget((function(){return t.Fo===e?n():(Dy("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),RS=function(e){k(n,e);var t=x(n);function n(e,r,i,a,o,s){var u;return d(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).serializer=o,u}return m(n,[{key:"eu",value:function(e,t){return this.connection.Ro("Listen",e,t)}},{key:"onMessage",value:function(e){this.qo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:jy()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(Uy(void 0===t||"string"==typeof t),Eg.fromBase64String(t||"")):(Uy(void 0===t||t instanceof Uint8Array),Eg.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?qy.UNKNOWN:ew(e.code);return new By(t,e.message||"")}(o);n=new dw(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=Nw(e,u.document.name),l=Tw(u.document.updateTime),h=u.document.createTime?Tw(u.document.createTime):im.min(),f=new nk({mapValue:{fields:u.document.fields}}),d=ik.newFoundDocument(c,l,h,f),p=u.targetIds||[],v=u.removedTargetIds||[];n=new hw(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var y=t.documentDelete;y.document;var m=Nw(e,y.document),g=y.readTime?Tw(y.readTime):im.min(),k=ik.newNoDocument(m,g),b=y.removedTargetIds||[];n=new hw([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var _=Nw(e,w.document),x=w.removedTargetIds||[];n=new hw([],x,_,null)}else{if(!("filter"in t))return jy();t.filter;var S=t.filter;S.targetId;var E=S.count,T=void 0===E?0:E,I=S.unchangedNames,C=new Xb(T,I),A=S.targetId;n=new fw(A,C)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return im.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?im.min():t.readTime?Tw(t.readTime):im.min()}(e);return this.listener.nu(t,n)}},{key:"su",value:function(e){var t={};t.database=Ow(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=Ok(r)?{documents:Vw(e,r)}:{query:qw(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Sw(e,t.resumeToken);var i=_w(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(im.min())>0){n.readTime=xw(e,t.snapshotVersion.toTimestamp());var a=_w(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return jy()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}},{key:"iu",value:function(e){var t={};t.database=Ow(this.serializer),t.removeTarget=e,this.Wo(t)}}]),n}(PS),OS=function(e){k(n,e);var t=x(n);function n(e,r,i,a,o,s){var u;return d(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).serializer=o,u.ru=!1,u}return m(n,[{key:"ou",get:function(){return this.ru}},{key:"start",value:function(){this.ru=!1,this.lastStreamToken=void 0,nf(b(n.prototype),"start",this).call(this)}},{key:"Yo",value:function(){this.ru&&this.uu([])}},{key:"eu",value:function(e,t){return this.connection.Ro("Write",e,t)}},{key:"onMessage",value:function(e){if(Uy(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();var t=function(e,t){return e&&e.length>0?(Uy(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Tw(e.updateTime):Tw(t);return n.isEqual(im.min())&&(n=Tw(t)),new Pb(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Tw(e.commitTime);return this.listener.cu(n,t)}return Uy(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}},{key:"hu",value:function(){var e={};e.database=Ow(this.serializer),this.Wo(e)}},{key:"uu",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return jw(t.serializer,e)}))};this.Wo(n)}}]),n}(PS),DS=function(e){k(n,e);var t=x(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.lu=!1,o}return m(n,[{key:"fu",value:function(){if(this.lu)throw new By(qy.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Io",value:function(e,t,n){var r=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=l(i,2),o=a[0],s=a[1];return r.connection.Io(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===qy.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new By(qy.UNKNOWN,e.toString())}))}},{key:"vo",value:function(e,t,n,r){var i=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=l(a,2),s=o[0],u=o[1];return i.connection.vo(e,t,n,s,u,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===qy.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new By(qy.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.lu=!0}}]),n}(function(){return m((function e(){d(this,e)}))}());var LS=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}return m(e,[{key:"gu",value:function(){var e=this;0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e._u=null,e.pu("Backend didn't respond within 10 seconds."),e.yu("Offline"),Promise.resolve()})))}},{key:"Iu",value:function(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}},{key:"set",value:function(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}},{key:"yu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"pu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(Ly(t),this.mu=!1):Dy("OnlineStateTracker",t)}},{key:"Tu",value:function(){null!==this._u&&(this._u.cancel(),this._u=null)}}]),e}(),FS=m((function e(t,n,r,i,a){var o=this;d(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr((function(e){r.enqueueAndForget(Kn(Wn().mark((function e(){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=GS(o),!e.t0){e.next=5;break}return Dy("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Kn(Wn().mark((function e(t){var n;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Vy(t)).vu.add(4),e.next=4,US(n);case 4:return n.bu.set("Unknown"),n.vu.delete(4),e.next=8,MS(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.bu=new LS(r,i)}));function MS(e){return jS.apply(this,arguments)}function jS(){return(jS=Kn(Wn().mark((function e(t){var n,r,i;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!GS(t)){e.next=18;break}n=I(t.Ru),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function US(e){return VS.apply(this,arguments)}function VS(){return(VS=Kn(Wn().mark((function e(t){var n,r,i;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=I(t.Ru),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function qS(e,t){var n=Vy(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),KS(n)?HS(n):_E(n).Ko()&&zS(n,t))}function BS(e,t){var n=Vy(e),r=_E(n);n.Au.delete(t),r.Ko()&&WS(n,t),0===n.Au.size&&(r.Ko()?r.jo():GS(n)&&n.bu.set("Unknown"))}function zS(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(im.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}_E(e).su(t)}function WS(e,t){e.Vu.qt(t),_E(e).iu(t)}function HS(e){e.Vu=new vw({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},le:function(t){return e.Au.get(t)||null},ue:function(){return e.datastore.serializer.databaseId}}),_E(e).start(),e.bu.gu()}function KS(e){return GS(e)&&!_E(e).Uo()&&e.Au.size>0}function GS(e){return 0===Vy(e).vu.size}function QS(e){e.Vu=void 0}function $S(e){return YS.apply(this,arguments)}function YS(){return(YS=Kn(Wn().mark((function e(t){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Au.forEach((function(e,n){zS(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function JS(e,t){return XS.apply(this,arguments)}function XS(){return(XS=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:QS(t),KS(t)?(t.bu.Iu(n),HS(t)):t.bu.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ZS(e,t,n){return eE.apply(this,arguments)}function eE(){return eE=Kn(Wn().mark((function e(t,n,r){var i;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.bu.set("Online"),!(n instanceof dw&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Kn(Wn().mark((function e(t,n){var r,i,a,o;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=I(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.Au.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.Au.delete(o),t.Vu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Dy("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,tE(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof hw?t.Vu.Ht(n):n instanceof fw?t.Vu.ne(n):t.Vu.Xt(n),r.isEqual(im.min())){e.next=29;break}return e.prev=14,e.next=17,Qx(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Vu.ce(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.Au.get(t);if(r){e.Au.set(t,r.withResumeToken(Eg.EMPTY_BYTE_STRING,r.snapshotVersion)),WS(e,t);var i=new Xw(r.target,t,n,r.sequenceNumber);zS(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Dy("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,tE(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),eE.apply(this,arguments)}function tE(e,t,n){return nE.apply(this,arguments)}function nE(){return(nE=Kn(Wn().mark((function e(t,n,r){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Cm(n)){e.next=2;break}throw n;case 2:return t.vu.add(1),e.next=5,US(t);case 5:t.bu.set("Offline"),r||(r=function(){return Qx(t.localStore)}),t.asyncQueue.enqueueRetryable(Kn(Wn().mark((function e(){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Dy("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.vu.delete(1),e.next=6,MS(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rE(e,t){return t().catch((function(n){return tE(e,n,t)}))}function iE(e){return aE.apply(this,arguments)}function aE(){return(aE=Kn(Wn().mark((function e(t){var n,r,i,a;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Vy(t),r=xE(n),i=n.Eu.length>0?n.Eu[n.Eu.length-1].batchId:-1;case 2:if(!oE(n)){e.next=19;break}return e.prev=3,e.next=6,Jx(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Eu.length&&r.jo(),e.abrupt("break",19);case 10:i=a.batchId,sE(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,tE(n,e.t0);case 17:e.next=2;break;case 19:uE(n)&&cE(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function oE(e){return GS(e)&&e.Eu.length<10}function sE(e,t){e.Eu.push(t);var n=xE(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function uE(e){return GS(e)&&!xE(e).Uo()&&e.Eu.length>0}function cE(e){xE(e).start()}function lE(e){return hE.apply(this,arguments)}function hE(){return(hE=Kn(Wn().mark((function e(t){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:xE(t).hu();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fE(e){return dE.apply(this,arguments)}function dE(){return(dE=Kn(Wn().mark((function e(t){var n,r,i,a;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=xE(t),r=I(t.Eu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.uu(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pE(e,t,n){return vE.apply(this,arguments)}function vE(){return(vE=Kn(Wn().mark((function e(t,n,r){var i,a;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Eu.shift(),a=Yb.from(i,n,r),e.next=3,rE(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,iE(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yE(e,t){return mE.apply(this,arguments)}function mE(){return mE=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&xE(t).ou,!e.t0){e.next=4;break}return e.next=4,function(){var e=Kn(Wn().mark((function e(t,n){var r,i;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Zb(i=n.code)||i===qy.ABORTED){e.next=7;break}return r=t.Eu.shift(),xE(t).Qo(),e.next=5,rE(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,iE(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:uE(t)&&cE(t);case 5:case"end":return e.stop()}}),e)}))),mE.apply(this,arguments)}function gE(e,t){return kE.apply(this,arguments)}function kE(){return(kE=Kn(Wn().mark((function e(t,n){var r,i;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Vy(t)).asyncQueue.verifyOperationInProgress(),Dy("RemoteStore","RemoteStore received new credentials"),i=GS(r),r.vu.add(3),e.next=6,US(r);case 6:return i&&r.bu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.vu.delete(3),e.next=12,MS(r);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bE(e,t){return wE.apply(this,arguments)}function wE(){return(wE=Kn(Wn().mark((function e(t,n){var r;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Vy(t),!n){e.next=7;break}return r.vu.delete(2),e.next=5,MS(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.vu.add(2),e.next=12,US(r);case 12:r.bu.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _E(e){return e.Su||(e.Su=function(e,t,n){var r=Vy(e);return r.fu(),new RS(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:$S.bind(null,e),ao:JS.bind(null,e),nu:ZS.bind(null,e)}),e.Ru.push(function(){var t=Kn(Wn().mark((function t(n){return Wn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Su.Qo(),KS(e)?HS(e):e.bu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Su.stop();case 6:QS(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Su}function xE(e){return e.Du||(e.Du=function(e,t,n){var r=Vy(e);return r.fu(),new OS(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:lE.bind(null,e),ao:yE.bind(null,e),au:fE.bind(null,e),cu:pE.bind(null,e)}),e.Ru.push(function(){var t=Kn(Wn().mark((function t(n){return Wn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Du.Qo(),t.next=4,iE(e);case 4:t.next=9;break;case 6:return t.next=8,e.Du.stop();case 8:e.Eu.length>0&&(Dy("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Du}var SE=function(){function e(t,n,r,i,a){d(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new zy,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return m(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new By(qy.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function EE(e,t){if(Ly("AsyncQueue","".concat(t,": ").concat(e)),Cm(e))return new By(qy.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var TE=function(){function e(t){d(this,e),this.comparator=t?function(e,n){return t(e,n)||cm.comparator(e.key,n.key)}:function(e,t){return cm.comparator(e.key,t.key)},this.keyedMap=ab(),this.sortedSet=new mg(this.comparator)}return m(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),IE=function(){function e(){d(this,e),this.Cu=new mg(cm.comparator)}return m(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):jy():this.Cu=this.Cu.insert(t,e)}},{key:"xu",value:function(){var e=[];return this.Cu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),CE=function(){function e(t,n,r,i,a,o,s,u,c){d(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u,this.hasCachedResults=c}return m(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qk(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,TE.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),AE=m((function e(){d(this,e),this.Nu=void 0,this.listeners=[]})),NE=m((function e(){d(this,e),this.queries=new tb((function(e){return $k(e)}),Qk),this.onlineState="Unknown",this.ku=new Set}));function PE(e,t){return RE.apply(this,arguments)}function RE(){return(RE=Kn(Wn().mark((function e(t,n){var r,i,a,o,s;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Vy(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new AE),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Nu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=EE(e.t0,"Initialization of query '".concat(Yk(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.Mu(r.onlineState),o.Nu&&n.$u(o.Nu)&&ME(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}function OE(e,t){return DE.apply(this,arguments)}function DE(){return(DE=Kn(Wn().mark((function e(t,n){var r,i,a,o,s;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Vy(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function LE(e,t){var n,r=Vy(e),i=!1,a=I(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=I(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.$u(o)&&(i=!0)}}catch(h){l.e(h)}finally{l.f()}u.Nu=o}}}catch(h){a.e(h)}finally{a.f()}i&&ME(r)}function FE(e,t,n){var r=Vy(e),i=r.queries.get(t);if(i){var a,o=I(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function ME(e){e.ku.forEach((function(e){e.next()}))}var jE=function(){function e(t,n,r){d(this,e),this.query=t,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}return m(e,[{key:"$u",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=I(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new CE(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),a=!0):this.qu(e,this.onlineState)&&(this.Uu(e),a=!0),this.Bu=e,a}},{key:"onError",value:function(e){this.Ou.error(e)}},{key:"Mu",value:function(e){this.onlineState=e;var t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}},{key:"qu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Lu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Uu",value:function(e){e=CE.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}]),e}(),UE=function(){function e(t,n){d(this,e),this.Gu=t,this.byteLength=n}return m(e,[{key:"Qu",value:function(){return"metadata"in this.Gu}}]),e}(),VE=function(){function e(t){d(this,e),this.serializer=t}return m(e,[{key:"rr",value:function(e){return Nw(this.serializer,e)}},{key:"ur",value:function(e){return e.metadata.exists?Fw(this.serializer,e.document,!1):ik.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}},{key:"cr",value:function(e){return Tw(e)}}]),e}(),qE=function(){function e(t,n,r){d(this,e),this.ju=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=BE(t)}return m(e,[{key:"zu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;var n=om.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Wu",value:function(e){var t,n=new Map,r=new VE(this.serializer),i=I(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,s=r.rr(a.metadata.name),u=I(a.metadata.queries);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=(n.get(c)||fb()).add(s);n.set(c,l)}}catch(h){u.e(h)}finally{u.f()}}}}catch(h){i.e(h)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Kn(Wn().mark((function e(){var t,n,r,i,a;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,aS(this.localStore,new VE(this.serializer),this.documents,this.ju.id);case 2:t=e.sent,n=this.Wu(this.documents),r=I(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,sS(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Hu:this.collectionGroups,Ju:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function BE(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var zE=m((function e(t){d(this,e),this.key=t})),WE=m((function e(t){d(this,e),this.key=t})),HE=function(){function e(t,n){d(this,e),this.query=t,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=fb(),this.mutatedKeys=fb(),this.tc=Zk(t),this.ec=new TE(this.tc)}return m(e,[{key:"nc",get:function(){return this.Yu}},{key:"sc",value:function(e,t){var n=this,r=t?t.ic:new IE,i=t?t.ec:this.ec,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=Jk(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.rc(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.tc(h,u)>0||c&&n.tc(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{ec:o,ic:r,zi:s,mutatedKeys:a}}},{key:"rc",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;var a=e.ic.xu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return jy()}};return n(e)-n(t)}(e.type,t.type)||r.tc(e.doc,t.doc)})),this.oc(n);var o=t?this.uc():[],s=0===this.Zu.size&&this.current?1:0,u=s!==this.Xu;return this.Xu=s,0!==a.length||u?{snapshot:new CE(this.query,e.ec,i,a,e.mutatedKeys,0===s,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}},{key:"Mu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new IE,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}},{key:"ac",value:function(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}},{key:"oc",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Yu=t.Yu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Yu=t.Yu.delete(e)})),this.current=e.current)}},{key:"uc",value:function(){var e=this;if(!this.current)return[];var t=this.Zu;this.Zu=fb(),this.ec.forEach((function(t){e.ac(t.key)&&(e.Zu=e.Zu.add(t.key))}));var n=[];return t.forEach((function(t){e.Zu.has(t)||n.push(new WE(t))})),this.Zu.forEach((function(e){t.has(e)||n.push(new zE(e))})),n}},{key:"hc",value:function(e){this.Yu=e.ir,this.Zu=fb();var t=this.sc(e.documents);return this.applyChanges(t,!0)}},{key:"lc",value:function(){return CE.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}]),e}(),KE=m((function e(t,n,r){d(this,e),this.query=t,this.targetId=n,this.view=r})),GE=m((function e(t){d(this,e),this.key=t,this.fc=!1})),QE=function(){function e(t,n,r,i,a,o){d(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new tb((function(e){return $k(e)}),Qk),this._c=new Map,this.mc=new Set,this.gc=new mg(cm.comparator),this.yc=new Map,this.Ic=new Ex,this.Tc={},this.Ec=new Map,this.Ac=ex.Mn(),this.onlineState="Unknown",this.vc=void 0}return m(e,[{key:"isPrimaryClient",get:function(){return!0===this.vc}}]),e}();function $E(e,t){return YE.apply(this,arguments)}function YE(){return(YE=Kn(Wn().mark((function e(t,n){var r,i,a,o,s,u;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=BT(t),!(o=r.wc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.lc(),e.next=15;break;case 6:return e.next=8,Xx(r.localStore,Hk(n));case 8:return s=e.sent,u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=13,JE(r,n,i,"current"===u,s.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&qS(r.remoteStore,s);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function JE(e,t,n,r,i){return XE.apply(this,arguments)}function XE(){return XE=Kn(Wn().mark((function e(t,n,r,i,a){var o,s,u,c,l,h;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Rc=function(e,n,r){return function(){var e=Kn(Wn().mark((function e(t,n,r,i){var a,o,s;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.sc(r),e.t0=a.zi,!e.t0){e.next=6;break}return e.next=5,tS(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.sc(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(gT(t,n.targetId,s.cc),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,tS(t.localStore,n,!0);case 3:return o=e.sent,s=new HE(n,o.ir),u=s.sc(o.documents),c=lw.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=s.applyChanges(u,t.isPrimaryClient,c),gT(t,r,l.cc),h=new KE(n,r,s),e.abrupt("return",(t.wc.set(n,h),t._c.has(r)?t._c.get(r).push(n):t._c.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),XE.apply(this,arguments)}function ZE(e,t){return eT.apply(this,arguments)}function eT(){return(eT=Kn(Wn().mark((function e(t,n){var r,i,a;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Vy(t),i=r.wc.get(n),!((a=r._c.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r._c.set(i.targetId,a.filter((function(e){return!Qk(e,n)}))),void r.wc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Zx(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),BS(r.remoteStore,i.targetId),yT(r,i.targetId)})).catch(wm);case 9:e.next=14;break;case 11:return yT(r,i.targetId),e.next=14,Zx(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tT(e,t,n){return nT.apply(this,arguments)}function nT(){return nT=Kn(Wn().mark((function e(t,n,r){var i,a,o;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=zT(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Vy(e),a=rm.now(),o=t.reduce((function(e,t){return e.add(t.key)}),fb());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=rb(),u=fb();return i.Zi.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(u=u.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var o,s=[],u=I(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=jb(c,n.get(c.key).overlayedDocument);null!=l&&s.push(new qb(c.key,l,rk(l.value.mapValue),Rb.exists(!0)))}}catch(h){u.e(h)}finally{u.f()}return i.mutationQueue.addMutationBatch(e,a,s,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,u);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:ob(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Tc[e.currentUser.toKey()];r||(r=new mg(em)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,wT(i,a.changes);case 9:return e.next=11,iE(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=EE(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),nT.apply(this,arguments)}function rT(e,t){return iT.apply(this,arguments)}function iT(){return(iT=Kn(Wn().mark((function e(t,n){var r,i;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vy(t),e.prev=1,e.next=4,$x(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.yc.get(t);n&&(Uy(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.fc=!0:e.modifiedDocuments.size>0?Uy(n.fc):e.removedDocuments.size>0&&(Uy(n.fc),n.fc=!1))})),e.next=8,wT(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,wm(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function aT(e,t,n){var r=Vy(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.wc.forEach((function(e,n){var r=n.view.Mu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Vy(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=I(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Mu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&ME(n)}(r.eventManager,t),i.length&&r.dc.nu(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function oT(e,t,n){return sT.apply(this,arguments)}function sT(){return(sT=Kn(Wn().mark((function e(t,n,r){var i,a,o,s,u,c;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Vy(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.yc.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new mg(cm.comparator)).insert(o,ik.newNoDocument(o,im.min())),u=fb().add(o),c=new cw(im.min(),new Map,new mg(em),s,u),e.next=9,rT(i,c);case 9:i.gc=i.gc.remove(o),i.yc.delete(n),bT(i),e.next=16;break;case 14:return e.next=16,Zx(i.localStore,n,!1).then((function(){return yT(i,n,r)})).catch(wm);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uT(e,t){return cT.apply(this,arguments)}function cT(){return(cT=Kn(Wn().mark((function e(t,n){var r,i,a;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vy(t),i=n.batch.batchId,e.prev=1,e.next=4,Gx(r.localStore,n);case 4:return a=e.sent,vT(r,i,null),pT(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,wT(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,wm(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function lT(e,t,n){return hT.apply(this,arguments)}function hT(){return(hT=Kn(Wn().mark((function e(t,n,r){var i,a;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Vy(t),e.prev=1,e.next=4,function(e,t){var n=Vy(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Uy(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,vT(i,n,r),pT(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,wT(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,wm(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function fT(e,t){return dT.apply(this,arguments)}function dT(){return(dT=Kn(Wn().mark((function e(t,n){var r,i,a,o;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return GS((r=Vy(t)).remoteStore)||Dy("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Vy(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Ec.get(i)||[]).push(n),r.Ec.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=EE(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}function pT(e,t){(e.Ec.get(t)||[]).forEach((function(e){e.resolve()})),e.Ec.delete(t)}function vT(e,t,n){var r=Vy(e),i=r.Tc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function yT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=I(e._c.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.wc.delete(a),n&&e.dc.Pc(a,n)}}catch(o){i.e(o)}finally{i.f()}e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((function(t){e.Ic.containsKey(t)||mT(e,t)}))}function mT(e,t){e.mc.delete(t.path.canonicalString());var n=e.gc.get(t);null!==n&&(BS(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),bT(e))}function gT(e,t,n){var r,i=I(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof zE?(e.Ic.addReference(a.key,t),kT(e,a)):a instanceof WE?(Dy("SyncEngine","Document no longer in limbo: "+a.key),e.Ic.removeReference(a.key,t),e.Ic.containsKey(a.key)||mT(e,a.key)):jy()}}catch(o){i.e(o)}finally{i.f()}}function kT(e,t){var n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(Dy("SyncEngine","New document in limbo: "+n),e.mc.add(r),bT(e))}function bT(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){var t=e.mc.values().next().value;e.mc.delete(t);var n=new cm(om.fromString(t)),r=e.Ac.next();e.yc.set(r,new GE(n)),e.gc=e.gc.insert(n,r),qS(e.remoteStore,new Xw(Hk(Uk(n.path)),r,"TargetPurposeLimboResolution",Lm.ct))}}function wT(e,t,n){return _T.apply(this,arguments)}function _T(){return _T=Kn(Wn().mark((function e(t,n,r){var i,a,o,s;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Vy(t),a=[],o=[],s=[],e.t0=i.wc.isEmpty(),e.t0){e.next=9;break}return i.wc.forEach((function(e,t){s.push(i.Rc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=qx.Li(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.dc.nu(a),e.next=9,function(){var e=Kn(Wn().mark((function e(t,n){var r,i,a,o,s,u,c,l;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vy(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return xm.forEach(n,(function(t){return xm.forEach(t.Fi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return xm.forEach(t.Bi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Cm(e.t0)){e.next=10;break}throw e.t0;case 10:Dy("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=I(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.Ji.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.Ji=r.Ji.insert(s,l))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),_T.apply(this,arguments)}function xT(e,t){return ST.apply(this,arguments)}function ST(){return(ST=Kn(Wn().mark((function e(t,n){var r,i;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Vy(t)).currentUser.isEqual(n)){e.next=11;break}return Dy("SyncEngine","User change. New user:",n.toKey()),e.next=5,Hx(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Ec.forEach((function(e){e.forEach((function(e){e.reject(new By(qy.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,wT(r,i.er);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ET(e,t){var n=Vy(e),r=n.yc.get(t);if(r&&r.fc)return fb().add(r.key);var i=fb(),a=n._c.get(t);if(!a)return i;var o,s=I(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.wc.get(u);i=i.unionWith(c.view.nc)}}catch(l){s.e(l)}finally{s.f()}return i}function TT(e,t){return IT.apply(this,arguments)}function IT(){return(IT=Kn(Wn().mark((function e(t,n){var r,i,a;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vy(t),e.next=3,tS(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.hc(i),e.abrupt("return",(r.isPrimaryClient&&gT(r,n.targetId,a.cc),a));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function CT(e,t){return AT.apply(this,arguments)}function AT(){return(AT=Kn(Wn().mark((function e(t,n){var r;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vy(t),e.abrupt("return",rS(r.localStore,n).then((function(e){return wT(r,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function NT(e,t,n,r){return PT.apply(this,arguments)}function PT(){return(PT=Kn(Wn().mark((function e(t,n,r,i){var a,o;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Vy(t),e.next=3,function(e,t){var n=Vy(e),r=Vy(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Sn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):xm.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,iE(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(vT(a,n,i||null),pT(a,n),function(e,t){Vy(Vy(e).mutationQueue).Cn(t)}(a.localStore,n)):jy();case 11:return e.next=13,wT(a,o);case 13:e.next=16;break;case 15:Dy("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function RT(e,t){return OT.apply(this,arguments)}function OT(){return(OT=Kn(Wn().mark((function e(t,n){var r,i,a,o,s,u,c,l;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(BT(r=Vy(t)),zT(r),!0!==n||!0===r.vc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,DT(r,i.toArray());case 5:return a=e.sent,r.vc=!0,e.next=9,bE(r.remoteStore,!0);case 9:o=I(a);try{for(o.s();!(s=o.n()).done;)u=s.value,qS(r.remoteStore,u)}catch(h){o.e(h)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.vc){e.next=25;break}return c=[],l=Promise.resolve(),r._c.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return yT(r,t),Zx(r.localStore,t,!0)})),BS(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,DT(r,c);case 21:return function(e){var t=Vy(e);t.yc.forEach((function(e,n){BS(t.remoteStore,n)})),t.Ic.Ts(),t.yc=new Map,t.gc=new mg(cm.comparator)}(r),r.vc=!1,e.next=25,bE(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function DT(e,t,n){return LT.apply(this,arguments)}function LT(){return(LT=Kn(Wn().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f,d,p,v,y,m;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Vy(t),a=[],o=[],s=I(n),e.prev=2,s.s();case 4:if((u=s.n()).done){e.next=45;break}if(c=u.value,l=void 0,!(h=i._c.get(c))||0===h.length){e.next=34;break}return e.next=11,Xx(i.localStore,Hk(h[0]));case 11:l=e.sent,f=I(h),e.prev=13,f.s();case 15:if((d=f.n()).done){e.next=24;break}return p=d.value,v=i.wc.get(p),e.next=20,TT(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),f.e(e.t0);case 29:return e.prev=29,f.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,nS(i.localStore,c);case 36:return m=e.sent,e.next=39,Xx(i.localStore,m);case 39:return l=e.sent,e.next=42,JE(i,FT(m),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.dc.nu(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])})))).apply(this,arguments)}function FT(e){return jk(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function MT(e){var t=Vy(e);return Vy(Vy(t.localStore).persistence).$i()}function jT(e,t,n,r){return UT.apply(this,arguments)}function UT(){return(UT=Kn(Wn().mark((function e(t,n,r,i){var a,o,s,u;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Vy(t)).vc){e.next=3;break}return e.abrupt("return",void Dy("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a._c.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,rS(a.localStore,Xk(o[0]));case 10:return s=e.sent,u=cw.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,Eg.EMPTY_BYTE_STRING),e.next=14,wT(a,s,u);case 14:return e.abrupt("break",20);case 15:return e.next=17,Zx(a.localStore,n,!0);case 17:return yT(a,n,i),e.abrupt("break",20);case 19:jy();case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function VT(e,t,n){return qT.apply(this,arguments)}function qT(){return(qT=Kn(Wn().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=BT(t)).vc){e.next=45;break}a=I(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(s=o.value,!i._c.has(s)){e.next=10;break}return Dy("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,nS(i.localStore,s);case 12:return u=e.sent,e.next=15,Xx(i.localStore,u);case 15:return c=e.sent,e.next=18,JE(i,FT(u),c.targetId,!1,c.resumeToken);case 18:qS(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=I(r),e.prev=30,f=Wn().mark((function e(){var t;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i._c.has(t),!e.t0){e.next=5;break}return e.next=5,Zx(i.localStore,t,!1).then((function(){BS(i.remoteStore,t),yT(i,t)})).catch(wm);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((h=l.n()).done){e.next=37;break}return e.delegateYield(f(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])})))).apply(this,arguments)}function BT(e){var t=Vy(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=rT.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ET.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=oT.bind(null,t),t.dc.nu=LE.bind(null,t.eventManager),t.dc.Pc=FE.bind(null,t.eventManager),t}function zT(e){var t=Vy(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=uT.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=lT.bind(null,t),t}function WT(e,t,n){var r=Vy(e);(function(){var e=Kn(Wn().mark((function e(t,n,r){var i,a,o,s,u;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Vy(e),r=Tw(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.qs.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(BE(i)),a=new qE(i,t.localStore,n.serializer),e.next=15,n.bc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.zu(o);case 19:return(s=e.sent)&&r._updateProgress(s),e.next=23,n.bc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return u=e.sent,e.next=31,wT(t,u.Ju,void 0);case 31:return e.next=33,function(e,t){var n=Vy(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.qs.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(u.progress),e.abrupt("return",Promise.resolve(u.Hu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Fy("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var HT=function(){function e(){d(this,e),this.synchronizeTabs=!1}return m(e,[{key:"initialize",value:function(){var e=Kn(Wn().mark((function e(t){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=AS(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return Wx(this.persistence,new Bx,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new Px(Ox.zs,this.serializer)}},{key:"createSharedClientState",value:function(e){return new gS}},{key:"terminate",value:function(){var e=Kn(Wn().mark((function e(){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),KT=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).Vc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return m(n,[{key:"initialize",value:function(){var e=Kn(Wn().mark((function e(t){var r=this;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nf(b(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Vc.initialize(this,t);case 4:return e.next=6,zT(this.Vc.syncEngine);case 6:return e.next=8,iE(this.Vc.remoteStore);case 8:return e.next=10,this.persistence.Ii((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return Wx(this.persistence,new Bx,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new sx(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new Dm(t,this.persistence);return new Om(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=Vx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?K_.withCacheSize(this.cacheSizeBytes):K_.DEFAULT;return new Mx(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,IS(),CS(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new gS}}]),n}(HT),GT=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r,!1)).Vc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return m(n,[{key:"initialize",value:function(){var e=Kn(Wn().mark((function e(t){var r,i=this;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nf(b(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Vc.syncEngine,e.t0=this.sharedClientState instanceof mS,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={jr:NT.bind(null,r),zr:jT.bind(null,r),Wr:VT.bind(null,r),$i:MT.bind(null,r),Qr:CT.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ii(function(){var e=Kn(Wn().mark((function e(t){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,RT(i.Vc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=IS();if(!mS.D(t))throw new By(qy.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Vx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new mS(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(KT),QT=function(){function e(){d(this,e)}return m(e,[{key:"initialize",value:function(){var e=Kn(Wn().mark((function e(t,n){var r=this;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return aT(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=xT.bind(null,this.syncEngine),e.next=12,bE(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new NE}},{key:"createDatastore",value:function(e){var t,n=AS(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new TS(t));return function(e,t,n,r){return new DS(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return aT(o.syncEngine,e,0)},a=bS.D()?new bS:new kS,new FS(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new QE(e,t,n,r,i,a);return o&&(s.vc=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Kn(Wn().mark((function e(t){var n;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Vy(t),Dy("RemoteStore","RemoteStore shutting down."),n.vu.add(5),e.next=5,US(n);case 5:n.Pu.shutdown(),n.bu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function $T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Kn(Wn().mark((function r(){var i;return Wn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Kn(Wn().mark((function e(){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var YT=function(){function e(t){d(this,e),this.observer=t,this.muted=!1}return m(e,[{key:"next",value:function(e){this.observer.next&&this.Sc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Sc(this.observer.error,e):Ly("Uncaught Error in snapshot listener:",e.toString())}},{key:"Dc",value:function(){this.muted=!0}},{key:"Sc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),JT=function(){function e(t,n){var r=this;d(this,e),this.Cc=t,this.serializer=n,this.metadata=new zy,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then((function(e){e&&e.Qu()?r.metadata.resolve(e.Gu.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Gu))))}),(function(e){return r.metadata.reject(e)}))}return m(e,[{key:"close",value:function(){return this.Cc.cancel()}},{key:"getMetadata",value:function(){var e=Kn(Wn().mark((function e(){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bc",value:function(){var e=Kn(Wn().mark((function e(){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Nc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Nc",value:function(){var e=Kn(Wn().mark((function e(){var t,n,r,i;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.kc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.xc.decode(t),r=Number(n),isNaN(r)&&this.Mc("length string (".concat(n,") is not valid number")),e.next=9,this.$c(r);case 9:return i=e.sent,e.abrupt("return",new UE(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"kc",value:function(){var e=Kn(Wn().mark((function e(){var t,n;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Oc()<0)){e.next=7;break}return e.next=3,this.Fc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Oc())<0&&this.Mc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"$c",value:function(){var e=Kn(Wn().mark((function e(t){var n;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Fc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Mc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.xc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mc",value:function(e){throw this.Cc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Fc",value:function(){var e=Kn(Wn().mark((function e(){var t,n;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Cc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),XT=function(){function e(t){d(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return m(e,[{key:"lookup",value:function(){var e=Kn(Wn().mark((function e(t){var n,r=this;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new By(qy.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Kn(Wn().mark((function e(t,n){var r,i,a,o,s,u;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vy(t),i=Ow(r.serializer)+"/documents",a={documents:n.map((function(e){return Aw(r.serializer,e)}))},e.next=5,r.vo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,s=new Map,o.forEach((function(e){var t=Mw(r.serializer,e);s.set(t.key.toString(),t)})),u=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());Uy(!!t),u.push(t)})),u));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Gb(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Kn(Wn().mark((function e(){var t,n=this;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=cm.fromPath(t);n.mutations.push(new Qb(r,n.precondition(r)))})),e.next=7,function(){var e=Kn(Wn().mark((function e(t,n){var r,i,a;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vy(t),i=Ow(r.serializer)+"/documents",a={writes:n.map((function(e){return jw(r.serializer,e)}))},e.next=3,r.Io("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw jy();t=im.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new By(qy.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(im.min())?Rb.exists(!1):Rb.updateTime(t):Rb.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(im.min()))throw new By(qy.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Rb.updateTime(t)}return Rb.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),ZT=function(){function e(t,n,r,i,a){d(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Bc=r.maxAttempts,this.qo=new NS(this.asyncQueue,"transaction_retry")}return m(e,[{key:"run",value:function(){this.Bc-=1,this.Lc()}},{key:"Lc",value:function(){var e=this;this.qo.No(Kn(Wn().mark((function t(){var n,r;return Wn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new XT(e.datastore),(r=e.qc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Uc(t)}))}))})).catch((function(t){e.Uc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"qc",value:function(e){try{var t=this.updateFunction(e);return!Fm(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Uc",value:function(e){var t=this;this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Lc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Zb(t)}return!1}}]),e}(),eI=function(){function e(t,n,r,i){var a=this;d(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ny.UNAUTHENTICATED,this.clientId=Zy.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Kn(Wn().mark((function e(t){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Dy("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Dy("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return m(e,[{key:"getConfiguration",value:function(){var e=Kn(Wn().mark((function e(){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new By(qy.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new zy;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Kn(Wn().mark((function n(){var r;return Wn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=EE(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function tI(e,t){return nI.apply(this,arguments)}function nI(){return nI=Kn(Wn().mark((function e(t,n){var r,i;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Dy("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Kn(Wn().mark((function e(t){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Hx(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),nI.apply(this,arguments)}function rI(e,t){return iI.apply(this,arguments)}function iI(){return(iI=Kn(Wn().mark((function e(t,n){var r,i;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,oI(t);case 3:return r=e.sent,Dy("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return gE(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return gE(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function aI(e){return"FirebaseError"===e.name?e.code===qy.FAILED_PRECONDITION||e.code===qy.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function oI(e){return sI.apply(this,arguments)}function sI(){return(sI=Kn(Wn().mark((function e(t){var n;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return Dy("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,tI(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),aI(n=e.t0)){e.next=13;break}throw n;case 13:return Fy("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,tI(t,new HT);case 16:e.next=21;break;case 18:return Dy("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,tI(t,new HT);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function uI(e){return cI.apply(this,arguments)}function cI(){return(cI=Kn(Wn().mark((function e(t){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return Dy("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,rI(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return Dy("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,rI(t,new QT);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lI(e){return oI(e).then((function(e){return e.persistence}))}function hI(e){return oI(e).then((function(e){return e.localStore}))}function fI(e){return uI(e).then((function(e){return e.remoteStore}))}function dI(e){return uI(e).then((function(e){return e.syncEngine}))}function pI(e){return uI(e).then((function(e){return e.datastore}))}function vI(e){return yI.apply(this,arguments)}function yI(){return(yI=Kn(Wn().mark((function e(t){var n,r;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uI(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=$E.bind(null,n.syncEngine),r.onUnlisten=ZE.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new zy;return e.asyncQueue.enqueueAndForget(Kn(Wn().mark((function i(){return Wn().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new YT({next:function(a){t.enqueueAndForget((function(){return OE(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new By(qy.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new By(qy.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new jE(Uk(n.path),a,{includeMetadataChanges:!0,Ku:!0});return PE(e,o)},i.next=3,vI(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function gI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new zy;return e.asyncQueue.enqueueAndForget(Kn(Wn().mark((function i(){return Wn().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new YT({next:function(n){t.enqueueAndForget((function(){return OE(e,o)})),n.fromCache&&"server"===r.source?i.reject(new By(qy.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new jE(n,a,{includeMetadataChanges:!0,Ku:!0});return PE(e,o)},i.next=3,vI(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function kI(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var bI=new Map;function wI(e,t,n){if(!n)throw new By(qy.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function _I(e,t,n,r){if(!0===t&&!0===r)throw new By(qy.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function xI(e){if(!cm.isDocumentKey(e))throw new By(qy.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function SI(e){if(cm.isDocumentKey(e))throw new By(qy.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function EI(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":jy()}function TI(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new By(qy.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=EI(e);throw new By(qy.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function II(e,t){if(t<=0)throw new By(qy.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var CI=function(){function e(t){var n,r;if(d(this,e),void 0===t.host){if(void 0!==t.ssl)throw new By(qy.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new By(qy.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}_I("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kI(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new By(qy.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new By(qy.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new By(qy.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return m(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}]),e}(),AI=function(){function e(t,n,r,i){d(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new CI({}),this._settingsFrozen=!1}return m(e,[{key:"app",get:function(){if(!this._app)throw new By(qy.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new By(qy.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new CI(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Hy;switch(e.type){case"firstParty":return new $y(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new By(qy.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=bI.get(e);t&&(Dy("ComponentProvider","Removing Datastore"),bI.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function NI(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=TI(e,AI))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Fy("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,s;if("string"==typeof i.mockUserToken)o=i.mockUserToken,s=Ny.MOCK_USER;else{o=lr(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new By(qy.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new Ny(u)}e._authCredentials=new Ky(new Wy(o,s))}}var PI=function(){function e(t,n,r){d(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return m(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new OI(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),RI=function(){function e(t,n,r){d(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return m(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),OI=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,Uk(i)))._path=i,a.type="collection",a}return m(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new PI(this.firestore,null,new cm(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(RI);function DI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=zr(e),wI("collection","path",t),e instanceof AI){var a=om.fromString.apply(om,[t].concat(r));return SI(a),new OI(e,null,a)}if(!(e instanceof PI||e instanceof OI))throw new By(qy.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(om.fromString.apply(om,[t].concat(r)));return SI(o),new OI(e.firestore,null,o)}function LI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=zr(e),1===arguments.length&&(t=Zy.A()),wI("doc","path",t),e instanceof AI){var a=om.fromString.apply(om,[t].concat(r));return xI(a),new PI(e,null,new cm(a))}if(!(e instanceof PI||e instanceof OI))throw new By(qy.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(om.fromString.apply(om,[t].concat(r)));return xI(o),new PI(e.firestore,e instanceof OI?e.converter:null,new cm(o))}function FI(e,t){return e=zr(e),t=zr(t),(e instanceof PI||e instanceof OI)&&(t instanceof PI||t instanceof OI)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function MI(e,t){return e=zr(e),t=zr(t),e instanceof RI&&t instanceof RI&&e.firestore===t.firestore&&Qk(e._query,t._query)&&e.converter===t.converter}var jI=function(){function e(){var t=this;d(this,e),this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new NS(this,"async_queue_retry"),this.Xc=function(){var e=CS();e&&Dy("AsyncQueue","Visibility state changed to "+e.visibilityState),t.qo.Mo()};var n=CS();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Xc)}return m(e,[{key:"isShuttingDown",get:function(){return this.jc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Zc(),this.ta(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;var t=CS();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Zc(),this.jc)return new Promise((function(){}));var n=new zy;return this.ta((function(){return t.jc&&t.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Qc.push(e),t.ea()}))}},{key:"ea",value:function(){var e=Kn(Wn().mark((function e(){var t=this;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Qc.length){e.next=14;break}return e.prev=1,e.next=4,this.Qc[0]();case 4:this.Qc.shift(),this.qo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Cm(e.t0)){e.next=12;break}throw e.t0;case 12:Dy("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Qc.length>0&&this.qo.No((function(){return t.ea()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"ta",value:function(e){var t=this,n=this.Gc.then((function(){return t.Hc=!0,e().catch((function(e){t.Wc=e,t.Hc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ly("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Hc=!1,e}))}));return this.Gc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);var i=SE.createAndSchedule(this,e,t,n,(function(e){return r.na(e)}));return this.zc.push(i),i}},{key:"Zc",value:function(){this.Wc&&jy()}},{key:"verifyOperationInProgress",value:function(){}},{key:"sa",value:function(){var e=Kn(Wn().mark((function e(){var t;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Gc,e.next=3,t;case 3:if(t!==this.Gc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ia",value:function(e){var t,n=I(this.zc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ra",value:function(e){var t=this;return this.sa().then((function(){t.zc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=I(t.zc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.sa()}))}},{key:"oa",value:function(e){this.Yc.push(e)}},{key:"na",value:function(e){var t=this.zc.indexOf(e);this.zc.splice(t,1)}}]),e}();function UI(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=I(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var VI=function(){function e(){d(this,e),this._progressObserver={},this._taskCompletionResolver=new zy,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return m(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),qI=function(e){k(n,e);var t=x(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new jI,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return m(n,[{key:"_terminate",value:function(){return this._firestoreClient||zI(this),this._firestoreClient.terminate()}}]),n}(AI);function BI(e){return e._firestoreClient||zI(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function zI(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new Og(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,kI(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new eI(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function WI(e,t,n){var r=new zy;return e.asyncQueue.enqueue(Kn(Wn().mark((function i(){var a;return Wn().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,tI(e,n);case 3:return i.next=5,rI(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),aI(a=i.t0)){i.next=13;break}throw a;case 13:Fy("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function HI(e){return function(e){return e.asyncQueue.enqueue(Kn(Wn().mark((function t(){var n,r;return Wn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,lI(e);case 2:return n=t.sent,t.next=5,fI(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Vy(e);return t.vu.delete(0),MS(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(BI(e=TI(e,qI)))}function KI(e){return function(e){return e.asyncQueue.enqueue(Kn(Wn().mark((function t(){var n,r;return Wn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,lI(e);case 2:return n=t.sent,t.next=5,fI(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Kn(Wn().mark((function e(t){var n;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Vy(t)).vu.add(0),e.next=4,US(n);case 4:n.bu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(BI(e=TI(e,qI)))}function GI(e,t){var n=BI(e=TI(e,qI)),r=new VI;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new JT(e,t)}(function(e,t){if(e instanceof Uint8Array)return $T(e,t);if(e instanceof ArrayBuffer)return $T(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?rw().encode(e):e),t)}(n,AS(t));e.asyncQueue.enqueueAndForget(Kn(Wn().mark((function t(){return Wn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=WT,t.next=3,dI(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function QI(e,t){return function(e,t){return e.asyncQueue.enqueue(Kn(Wn().mark((function n(){return Wn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Vy(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.qs.getNamedQuery(e,t)}))},n.next=3,hI(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(BI(e=TI(e,qI)),t).then((function(t){return t?new RI(e,null,t.query):null}))}function $I(e){if(e._initialized||e._terminated)throw new By(qy.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var YI=function(){function e(t){d(this,e),this._byteString=t}return m(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Eg.fromBase64String(t))}catch(t){throw new By(qy.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Eg.fromUint8Array(t))}}]),e}(),JI=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new By(qy.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new um(n)}return m(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var XI=m((function e(t){d(this,e),this._methodName=t})),ZI=function(){function e(t,n){if(d(this,e),!isFinite(t)||t<-90||t>90)throw new By(qy.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new By(qy.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return m(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return em(this._lat,e._lat)||em(this._long,e._long)}}]),e}(),eC=/^__.*__$/,tC=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return m(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new qb(e,this.data,this.fieldMask,t,this.fieldTransforms):new Vb(e,this.data,t,this.fieldTransforms)}}]),e}(),nC=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return m(e,[{key:"toMutation",value:function(e,t){return new qb(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function rC(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw jy()}}var iC=function(){function e(t,n,r,i,a,o){d(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return m(e,[{key:"path",get:function(){return this.settings.path}},{key:"ca",get:function(){return this.settings.ca}},{key:"aa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ha",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}},{key:"da",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}},{key:"wa",value:function(e){return this.aa({path:void 0,la:!0})}},{key:"_a",value:function(e){return SC(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ua",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.fa(this.path.get(e))}},{key:"fa",value:function(e){if(0===e.length)throw this._a("Document fields must not be empty");if(rC(this.ca)&&eC.test(e))throw this._a('Document fields cannot begin and end with "__"')}}]),e}(),aC=function(){function e(t,n,r){d(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||AS(t)}return m(e,[{key:"ya",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new iC({ca:e,methodName:t,ga:n,path:um.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function oC(e){var t=e._freezeSettings(),n=AS(e._databaseId);return new aC(e._databaseId,!!t.ignoreUndefinedProperties,n)}function sC(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ya(a.merge||a.mergeFields?2:0,t,n,i);bC("Data must be an object, but it was:",o,r);var s,u,c=gC(r,o);if(a.merge)s=new xg(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,h=[],f=I(a.mergeFields);try{for(f.s();!(l=f.n()).done;){var d=wC(t,l.value,n);if(!o.contains(d))throw new By(qy.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));EC(h,d)||h.push(d)}}catch(p){f.e(p)}finally{f.f()}s=new xg(h),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new tC(new nk(c),s,u)}var uC=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(XI);function cC(e,t,n){return new iC({ca:3,ga:t.settings.ga,methodName:e._methodName,la:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var lC=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n,[{key:"_toFieldTransform",value:function(e){return new Nb(e.path,new _b)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(XI),hC=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).pa=r,i}return m(n,[{key:"_toFieldTransform",value:function(e){var t=cC(this,e,!0),n=this.pa.map((function(e){return mC(e,t)})),r=new xb(n);return new Nb(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(XI),fC=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).pa=r,i}return m(n,[{key:"_toFieldTransform",value:function(e){var t=cC(this,e,!0),n=this.pa.map((function(e){return mC(e,t)})),r=new Eb(n);return new Nb(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(XI),dC=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).Ia=r,i}return m(n,[{key:"_toFieldTransform",value:function(e){var t=new Ib(e.serializer,mb(e.serializer,this.Ia));return new Nb(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(XI);function pC(e,t,n,r){var i=e.ya(1,t,n);bC("Data must be an object, but it was:",i,r);var a=[],o=nk.empty();vg(r,(function(e,r){var s=xC(t,e,n);r=zr(r);var u=i.da(s);if(r instanceof uC)a.push(s);else{var c=mC(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new xg(a);return new nC(o,s,i.fieldTransforms)}function vC(e,t,n,r,i,a){var o=e.ya(1,t,n),s=[wC(t,r,n)],u=[i];if(a.length%2!=0)throw new By(qy.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(wC(t,a[c])),u.push(a[c+1]);for(var l=[],h=nk.empty(),f=s.length-1;f>=0;--f)if(!EC(l,s[f])){var d=s[f],p=u[f];p=zr(p);var v=o.da(d);if(p instanceof uC)l.push(d);else{var y=mC(p,v);null!=y&&(l.push(d),h.set(d,y))}}var m=new xg(l);return new nC(h,m,o.fieldTransforms)}function yC(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return mC(n,e.ya(r?4:3,t))}function mC(e,t){if(kC(e=zr(e)))return bC("Unsupported field value:",t,e),gC(e,t);if(e instanceof XI)return function(e,t){if(!rC(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=I(e);try{for(a.s();!(n=a.n()).done;){var o=mC(n.value,t.wa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=zr(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return mb(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=rm.fromDate(e);return{timestampValue:xw(t.serializer,n)}}if(e instanceof rm){var r=new rm(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:xw(t.serializer,r)}}if(e instanceof ZI)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof YI)return{bytesValue:Sw(t.serializer,e._byteString)};if(e instanceof PI){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t._a("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Iw(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(EI(e)))}(e,t)}function gC(e,t){var n={};return yg(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):vg(e,(function(e,r){var i=mC(r,t.ha(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function kC(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof rm||e instanceof ZI||e instanceof YI||e instanceof PI||e instanceof XI)}function bC(e,t,n){if(!kC(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=EI(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function wC(e,t,n){if((t=zr(t))instanceof JI)return t._internalPath;if("string"==typeof t)return xC(e,t);throw SC("Field path arguments must be of type string or ",e,!1,void 0,n)}var _C=new RegExp("[~\\*/\\[\\]]");function xC(e,t,n){if(t.search(_C)>=0)throw SC("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return S(JI,f(t.split(".")))._internalPath}catch(r){throw SC("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function SC(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new By(qy.INVALID_ARGUMENT,s+e+u)}function EC(e,t){return e.some((function(e){return e.isEqual(t)}))}var TC=function(){function e(t,n,r,i,a){d(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return m(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new PI(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new IC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(CC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),IC=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n,[{key:"data",value:function(){return nf(b(n.prototype),"data",this).call(this)}}]),n}(TC);function CC(e,t){return"string"==typeof t?xC(e,t):t instanceof JI?t._internalPath:t._delegate._internalPath}function AC(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new By(qy.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var NC=m((function e(){d(this,e)})),PC=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n)}(NC);function RC(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof NC&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof DC})).length,n=e.filter((function(e){return e instanceof OC})).length;if(t>1||t>0&&n>0)throw new By(qy.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,s=I(n);try{for(s.s();!(o=s.n()).done;){e=o.value._apply(e)}}catch(u){s.e(u)}finally{s.f()}return e}var OC=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return m(n,[{key:"_apply",value:function(e){var t=this._parse(e);return KC(e._query,t),new RI(e.firestore,e.converter,Kk(e._query,t))}},{key:"_parse",value:function(e){var t=oC(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new By(qy.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){HC(o,a);var u,c=[],l=I(o);try{for(l.s();!(u=l.n()).done;){var h=u.value;c.push(WC(r,e,h))}}catch(f){l.e(f)}finally{l.f()}s={arrayValue:{values:c}}}else s=WC(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||HC(o,a),s=yC(n,"where",o,"in"===a||"not-in"===a);return hk.create(i,a,s)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(PC);var DC=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return m(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:fk.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=I(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;KC(r,a),r=Kk(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new RI(e.firestore,e.converter,Kk(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(NC);var LC=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return m(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new By(qy.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new By(qy.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new uk(t,n);return function(e,t){if(null===qk(e)){var n=Bk(e);null!==n&&GC(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new RI(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Mk(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(PC);var FC=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return m(n,[{key:"_apply",value:function(e){return new RI(e.firestore,e.converter,Gk(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(PC);var MC=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return m(n,[{key:"_apply",value:function(e){var t=zC(e,this.type,this._docOrFields,this._inclusive);return new RI(e.firestore,e.converter,function(e,t){return new Mk(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(PC);function jC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return MC._create("startAt",t,!0)}function UC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return MC._create("startAfter",t,!1)}var VC=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return m(n,[{key:"_apply",value:function(e){var t=zC(e,this.type,this._docOrFields,this._inclusive);return new RI(e.firestore,e.converter,function(e,t){return new Mk(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(PC);function qC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return VC._create("endBefore",t,!1)}function BC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return VC._create("endAt",t,!0)}function zC(e,t,n,r){if(n[0]=zr(n[0]),n[0]instanceof TC)return function(e,t,n,r,i){if(!r)throw new By(qy.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],s=I(Wk(e));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.field.isKeyField())o.push(Wg(t,r.key));else{var c=r.data.field(u.field);if(Ng(c))throw new By(qy.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new By(qy.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(h){s.e(h)}finally{s.f()}return new ak(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=oC(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new By(qy.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new By(qy.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!zk(e)&&-1!==c.indexOf("/"))throw new By(qy.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(om.fromString(c));if(!cm.isDocumentKey(l))throw new By(qy.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var h=new cm(l);s.push(Wg(t,h))}else{var f=yC(n,r,c);s.push(f)}}return new ak(s,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function WC(e,t,n){if("string"==typeof(n=zr(n))){if(""===n)throw new By(qy.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zk(t)&&-1!==n.indexOf("/"))throw new By(qy.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(om.fromString(n));if(!cm.isDocumentKey(r))throw new By(qy.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Wg(e,new cm(r))}if(n instanceof PI)return Wg(e,n._key);throw new By(qy.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(EI(n),"."))}function HC(e,t){if(!Array.isArray(e)||0===e.length)throw new By(qy.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function KC(e,t){if(t.isInequality()){var n=Bk(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new By(qy.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=qk(e);null!==i&&GC(e,r,i)}var a=function(e,t){var n,r=I(e);try{for(r.s();!(n=r.n()).done;){var i,a=I(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(s){a.e(s)}finally{a.f()}}}catch(s){r.e(s)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new By(qy.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new By(qy.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function GC(e,t,n){if(!n.isEqual(t))throw new By(qy.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var QC=function(){function e(){d(this,e)}return m(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Mg(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Cg(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ag(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw jy()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return vg(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new ZI(Cg(e.latitude),Cg(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Pg(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Rg(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Ig(e);return new rm(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=om.fromString(e);Uy(Jw(n));var r=new Dg(n.get(1),n.get(3)),i=new cm(n.popFirst(5));return r.isEqual(t)||Ly("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function $C(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var YC=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return m(n,[{key:"convertBytes",value:function(e){return new YI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new PI(this.firestore,null,t)}}]),n}(QC);var JC=function(){function e(t,n){d(this,e),this.hasPendingWrites=t,this.fromCache=n}return m(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),XC=function(e){k(n,e);var t=x(n);function n(e,r,i,a,o,s){var u;return d(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return m(n,[{key:"exists",value:function(){return nf(b(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new ZC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(CC("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(TC),ZC=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return nf(b(n.prototype),"data",this).call(this,e)}}]),n}(XC),eA=function(){function e(t,n,r,i){d(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new JC(i.hasPendingWrites,i.fromCache),this.query=r}return m(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new ZC(n._firestore,n._userDataWriter,r.key,r,new JC(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new By(qy.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new ZC(e._firestore,e._userDataWriter,t.doc.key,t.doc,new JC(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new ZC(e._firestore,e._userDataWriter,t.doc.key,t.doc,new JC(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:tA(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function tA(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return jy()}}function nA(e,t){return e instanceof XC&&t instanceof XC?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof eA&&t instanceof eA&&e._firestore===t._firestore&&MI(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var rA=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return m(n,[{key:"convertBytes",value:function(e){return new YI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new PI(this.firestore,null,t)}}]),n}(QC);function iA(e){e=TI(e,PI);var t=TI(e.firestore,qI),n=BI(t),r=new rA(t);return function(e,t){var n=new zy;return e.asyncQueue.enqueueAndForget(Kn(Wn().mark((function r(){return Wn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Kn(Wn().mark((function e(t,n,r){var i,a;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Vy(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new By(qy.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=EE(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,hI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new XC(t,r,e._key,n,new JC(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function aA(e){e=TI(e,RI);var t=TI(e.firestore,qI),n=BI(t),r=new rA(t);return function(e,t){var n=new zy;return e.asyncQueue.enqueueAndForget(Kn(Wn().mark((function r(){return Wn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Kn(Wn().mark((function e(t,n,r){var i,a,o,s,u;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,tS(t,n,!0);case 3:i=e.sent,a=new HE(n,i.ir),o=a.sc(i.documents),s=a.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=EE(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(u);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,hI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new eA(t,r,e,n)}))}function oA(e,t,n){e=TI(e,PI);var r=TI(e.firestore,qI),i=$C(e.converter,t,n);return lA(r,[sC(oC(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Rb.none())])}function sA(e,t,n){e=TI(e,PI);for(var r=TI(e.firestore,qI),i=oC(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return lA(r,[("string"==typeof(t=zr(t))||t instanceof JI?vC(i,"updateDoc",e._key,t,n,o):pC(i,"updateDoc",e._key,t)).toMutation(e._key,Rb.exists(!0))])}function uA(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=zr(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||UI(n[u])||(s=n[u],u++);var c,l,h,f={includeMetadataChanges:s.includeMetadataChanges};if(UI(n[u])){var d=n[u];n[u]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[u+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[u+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof PI)l=TI(e.firestore,qI),h=Uk(e._key.path),c={next:function(t){n[u]&&n[u](hA(l,e,t))},error:n[u+1],complete:n[u+2]};else{var p=TI(e,RI);l=TI(p.firestore,qI),h=p._query;var v=new rA(l);c={next:function(e){n[u]&&n[u](new eA(l,v,p,e))},error:n[u+1],complete:n[u+2]},AC(e._query)}return function(e,t,n,r){var i=new YT(r),a=new jE(t,i,n);return e.asyncQueue.enqueueAndForget(Kn(Wn().mark((function t(){return Wn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=PE,t.next=3,vI(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Dc(),e.asyncQueue.enqueueAndForget(Kn(Wn().mark((function t(){return Wn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=OE,t.next=3,vI(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(BI(l),h,f,c)}function cA(e,t){return function(e,t){var n=new YT(t);return e.asyncQueue.enqueueAndForget(Kn(Wn().mark((function t(){return Wn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Vy(e).ku.add(t),t.next()},t.next=3,vI(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Dc(),e.asyncQueue.enqueueAndForget(Kn(Wn().mark((function t(){return Wn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Vy(e).ku.delete(t)},t.next=3,vI(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(BI(e=TI(e,qI)),UI(t)?t:{next:t})}function lA(e,t){return function(e,t){var n=new zy;return e.asyncQueue.enqueueAndForget(Kn(Wn().mark((function r(){return Wn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=tT,r.next=3,dI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(BI(e),t)}function hA(e,t,n){var r=n.docs.get(t._key),i=new rA(e);return new XC(e,i,t._key,r,new JC(n.hasPendingWrites,n.fromCache),t.converter)}var fA={maxAttempts:5},dA=function(){function e(t,n){d(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=oC(t)}return m(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=pA(e,this._firestore),i=$C(r.converter,t,n),a=sC(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Rb.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=pA(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=zr(t))||t instanceof JI?vC(this._dataReader,"WriteBatch.update",i._key,t,n,o):pC(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Rb.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=pA(e,this._firestore);return this._mutations=this._mutations.concat(new Gb(t._key,Rb.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new By(qy.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function pA(e,t){if((e=zr(e)).firestore!==t)throw new By(qy.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var vA=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r))._firestore=e,i}return m(n,[{key:"get",value:function(e){var t=this,r=pA(e,this._firestore),i=new rA(this._firestore);return nf(b(n.prototype),"get",this).call(this,e).then((function(e){return new XC(t._firestore,i,r._key,e._document,new JC(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){d(this,e),this._firestore=t,this._transaction=n,this._dataReader=oC(t)}return m(e,[{key:"get",value:function(e){var t=this,n=pA(e,this._firestore),r=new YC(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return jy();var i=e[0];if(i.isFoundDocument())return new TC(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new TC(t._firestore,r,n._key,null,n.converter);throw jy()}))}},{key:"set",value:function(e,t,n){var r=pA(e,this._firestore),i=$C(r.converter,t,n),a=sC(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=pA(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=zr(t))||t instanceof JI?vC(this._dataReader,"Transaction.update",i._key,t,n,o):pC(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=pA(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function yA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new hC("arrayUnion",t)}function mA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new fC("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Py=e}(Vi),Oi(new Wr("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new qI(new Gy(e.getProvider("auth-internal")),new Jy(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new By(qy.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dg(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Ki(Ay,"3.12.0",e),Ki(Ay,"3.12.0","esm2017")}();function gA(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new By("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function kA(){if("undefined"===typeof Uint8Array)throw new By("unimplemented","Uint8Arrays are not available in this environment.")}function bA(){if("undefined"==typeof atob)throw new By("unimplemented","Blobs are unavailable in Firestore in this environment.")}var wA=function(){function e(t){d(this,e),this._delegate=t}return m(e,[{key:"toBase64",value:function(){return bA(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return kA(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return bA(),new e(YI.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return kA(),new e(YI.fromUint8Array(t))}}]),e}();function _A(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=I(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var xA=function(){function e(){d(this,e)}return m(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){$I(e=TI(e,qI));var n=BI(e);if(n._uninitializedComponentsProvider)throw new By(qy.FAILED_PRECONDITION,"SDK cache is already specified.");Fy("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new QT;return WI(n,i,new KT(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){$I(e=TI(e,qI));var t=BI(e);if(t._uninitializedComponentsProvider)throw new By(qy.FAILED_PRECONDITION,"SDK cache is already specified.");Fy("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new QT;return WI(t,r,new GT(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new By(qy.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new zy;return e._queue.enqueueAndForgetEvenWhileRestricted(Kn(Wn().mark((function n(){return Wn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Kn(Wn().mark((function e(t){var n;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Em.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Em.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Vx(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),SA=function(){function e(t,n,r){var i=this;d(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Dg||(this._appCompat=t)}return m(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Fy("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};NI(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return HI(this._delegate)}},{key:"disableNetwork",value:function(){return KI(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&_I("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){var t=new zy;return e.asyncQueue.enqueueAndForget(Kn(Wn().mark((function n(){return Wn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=fT,n.next=3,dI(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(BI(TI(this._delegate,qI)))}},{key:"onSnapshotsInSync",value:function(e){return cA(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new By("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new jA(this,DI(this._delegate,e))}catch(t){throw NA(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new AA(this,LI(this._delegate,e))}catch(t){throw NA(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new LA(this,function(e,t){if(e=TI(e,AI),wI("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new By(qy.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new RI(e,null,function(e){return new Mk(om.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw NA(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=TI(e,qI);var r=Object.assign(Object.assign({},fA),n);return function(e){if(e.maxAttempts<1)throw new By(qy.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new zy;return e.asyncQueue.enqueueAndForget(Kn(Wn().mark((function i(){var a;return Wn().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,pI(e);case 2:a=i.sent,new ZT(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(BI(e),(function(n){return t(new vA(e,n))}),r)}(this._delegate,(function(n){return e(new TA(t,n))}))}},{key:"batch",value:function(){var e=this;return BI(this._delegate),new IA(new dA(this._delegate,(function(t){return lA(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return GI(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return QI(this._delegate,e).then((function(e){return e?new LA(t,e):null}))}}]),e}(),EA=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return m(n,[{key:"convertBytes",value:function(e){return new wA(new YI(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return AA.forKey(t,this.firestore,null)}}]),n}(QC);var TA=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new EA(t)}return m(e,[{key:"get",value:function(e){var t=this,n=UA(e);return this._delegate.get(n).then((function(e){return new OA(t._firestore,new XC(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=UA(e);return n?(gA("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=UA(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=UA(e);return this._delegate.delete(t),this}}]),e}(),IA=function(){function e(t){d(this,e),this._delegate=t}return m(e,[{key:"set",value:function(e,t,n){var r=UA(e);return n?(gA("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=UA(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=UA(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),CA=function(){function e(t,n,r){d(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return m(e,[{key:"fromFirestore",value:function(e,t){var n=new ZC(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new DA(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new EA(t),n),i.set(n,a)),a}}]),e}();CA.INSTANCES=new WeakMap;var AA=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new EA(t)}return m(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new jA(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new jA(this.firestore,DI(this._delegate,e))}catch(t){throw NA(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=zr(e))instanceof PI&&FI(this._delegate,e)}},{key:"set",value:function(e,t){t=gA("DocumentReference.set",t);try{return t?oA(this._delegate,e,t):oA(this._delegate,e)}catch(n){throw NA(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?sA(this._delegate,e):sA.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw NA(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return lA(TI((e=this._delegate).firestore,qI),[new Gb(e._key,Rb.none())]);var e}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=PA(n),a=RA(n,(function(t){return new OA(e.firestore,new XC(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return uA(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?iA(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=TI(e,PI);var t=TI(e.firestore,qI);return mI(BI(t),e._key,{source:"server"}).then((function(n){return hA(t,e,n)}))}(this._delegate):function(e){e=TI(e,PI);var t=TI(e.firestore,qI);return mI(BI(t),e._key).then((function(n){return hA(t,e,n)}))}(this._delegate)).then((function(e){return new OA(t.firestore,new XC(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(CA.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new By("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new PI(n._delegate,r,new cm(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new PI(n._delegate,r,t))}}]),e}();function NA(e,t,n){return e.message=e.message.replace(t,n),e}function PA(e){var t,n=I(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!_A(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function RA(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=_A(e[0])?e[0]:_A(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var OA=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return m(e,[{key:"ref",get:function(){return new AA(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return nA(this._delegate,e._delegate)}}]),e}(),DA=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return void 0!==t||jy(),t}}]),n}(OA),LA=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new EA(t)}return m(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,RC(this._delegate,function(e,t,n){var r=t,i=CC("where",e);return OC._create(i,r,n)}(t,n,r)))}catch(i){throw NA(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,RC(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=CC("orderBy",e);return LC._create(n,t)}(t,n)))}catch(r){throw NA(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,RC(this._delegate,(II("limit",n=t),FC._create("limit",n,"F"))))}catch(r){throw NA(r,"limit()","Query.limit()")}var n}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,RC(this._delegate,(II("limitToLast",n=t),FC._create("limitToLast",n,"L"))))}catch(r){throw NA(r,"limitToLast()","Query.limitToLast()")}var n}},{key:"startAt",value:function(){try{return new e(this.firestore,RC(this._delegate,jC.apply(void 0,arguments)))}catch(t){throw NA(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,RC(this._delegate,UC.apply(void 0,arguments)))}catch(t){throw NA(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,RC(this._delegate,qC.apply(void 0,arguments)))}catch(t){throw NA(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,RC(this._delegate,BC.apply(void 0,arguments)))}catch(t){throw NA(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return MI(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?aA(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=TI(e,RI);var t=TI(e.firestore,qI),n=BI(t),r=new rA(t);return gI(n,e._query,{source:"server"}).then((function(n){return new eA(t,r,e,n)}))}(this._delegate):function(e){e=TI(e,RI);var t=TI(e.firestore,qI),n=BI(t),r=new rA(t);return AC(e._query),gI(n,e._query).then((function(n){return new eA(t,r,e,n)}))}(this._delegate)).then((function(e){return new MA(t.firestore,new eA(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=PA(n),a=RA(n,(function(t){return new MA(e.firestore,new eA(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return uA(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(CA.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),FA=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return m(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new DA(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),MA=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return m(e,[{key:"query",get:function(){return new LA(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new DA(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new FA(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new DA(n._firestore,r))}))}},{key:"isEqual",value:function(e){return nA(this._delegate,e._delegate)}}]),e}(),jA=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return m(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new AA(this.firestore,e):null}},{key:"doc",value:function(e){try{return new AA(this.firestore,void 0===e?LI(this._delegate):LI(this._delegate,e))}catch(t){throw NA(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=TI(e.firestore,qI),r=LI(e),i=$C(e.converter,t);return lA(n,[sC(oC(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Rb.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new AA(t.firestore,e)}))}},{key:"isEqual",value:function(e){return FI(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(CA.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(LA);function UA(e){return TI(e,PI)}var VA=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=S(JI,n)}return m(e,[{key:"isEqual",value:function(e){return(e=zr(e))instanceof JI&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(um.keyField().canonicalString())}}]),e}(),qA=function(){function e(t){d(this,e),this._delegate=t}return m(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new lC("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new uC("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=yA.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=mA.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=new dC("increment",t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),BA={Firestore:SA,GeoPoint:ZI,Timestamp:rm,Blob:wA,Transaction:TA,WriteBatch:IA,DocumentReference:AA,DocumentSnapshot:OA,Query:LA,QueryDocumentSnapshot:DA,QuerySnapshot:MA,CollectionReference:jA,FieldPath:VA,FieldValue:qA,setLogLevel:function(e){var t;t=e,Ry.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Wr("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},BA)))}(e,(function(e,t){return new SA(e,t,new xA)})),e.registerVersion("@firebase/firestore-compat","0.3.9")}(ga);function zA(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;var WA,HA={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},KA="EMAIL_SIGNIN",GA="PASSWORD_RESET",QA="RECOVER_EMAIL",$A="REVERT_SECOND_FACTOR_ADDITION",YA="VERIFY_AND_CHANGE_EMAIL",JA="VERIFY_EMAIL";function XA(){return Gn({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var ZA=function(){var e;return Gn(e={},"admin-restricted-operation","This operation is restricted to administrators only."),Gn(e,"argument-error",""),Gn(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),Gn(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),Gn(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),Gn(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),Gn(e,"cordova-not-ready","Cordova framework is not ready."),Gn(e,"cors-unsupported","This browser is not supported."),Gn(e,"credential-already-in-use","This credential is already associated with a different user account."),Gn(e,"custom-token-mismatch","The custom token corresponds to a different audience."),Gn(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),Gn(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),Gn(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),Gn(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),Gn(e,"email-already-in-use","The email address is already in use by another account."),Gn(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),Gn(e,"expired-action-code","The action code has expired."),Gn(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),Gn(e,"internal-error","An internal AuthError has occurred."),Gn(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),Gn(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),Gn(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),Gn(e,"invalid-auth-event","An internal AuthError has occurred."),Gn(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),Gn(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),Gn(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),Gn(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),Gn(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),Gn(e,"invalid-email","The email address is badly formatted."),Gn(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),Gn(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),Gn(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),Gn(e,"invalid-credential","The supplied auth credential is malformed or has expired."),Gn(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),Gn(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),Gn(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),Gn(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),Gn(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),Gn(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),Gn(e,"wrong-password","The password is invalid or the user does not have a password."),Gn(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),Gn(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),Gn(e,"invalid-provider-id","The specified provider ID is invalid."),Gn(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),Gn(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),Gn(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),Gn(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),Gn(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),Gn(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),Gn(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),Gn(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),Gn(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),Gn(e,"missing-continue-uri","A continue URL must be provided in the request."),Gn(e,"missing-iframe-start","An internal AuthError has occurred."),Gn(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),Gn(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),Gn(e,"missing-password","A non-empty password must be provided"),Gn(e,"missing-multi-factor-info","No second factor identifier is provided."),Gn(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),Gn(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),Gn(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),Gn(e,"app-deleted","This instance of FirebaseApp has been deleted."),Gn(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),Gn(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),Gn(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),Gn(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),Gn(e,"no-auth-event","An internal AuthError has occurred."),Gn(e,"no-such-provider","User was not linked to an account with the given provider."),Gn(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),Gn(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),Gn(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),Gn(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),Gn(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),Gn(e,"provider-already-linked","User can only be linked to one identity for the given provider."),Gn(e,"quota-exceeded","The project's quota for this operation has been exceeded."),Gn(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),Gn(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),Gn(e,"rejected-credential","The request contains malformed or mismatching credentials."),Gn(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),Gn(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),Gn(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),Gn(e,"timeout","The operation has timed out."),Gn(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),Gn(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),Gn(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),Gn(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),Gn(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),Gn(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),Gn(e,"unverified-email","The operation requires a verified email."),Gn(e,"user-cancelled","The user did not grant your application the permissions it requested."),Gn(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),Gn(e,"user-disabled","The user account has been disabled by an administrator."),Gn(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),Gn(e,"user-signed-out",""),Gn(e,"weak-password","The password must be 6 characters long or more."),Gn(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),Gn(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),Gn(e,"missing-recaptcha-token","The reCAPTCHA token is missing when sending request to the backend."),Gn(e,"invalid-recaptcha-token","The reCAPTCHA token is invalid when sending request to the backend."),Gn(e,"invalid-recaptcha-action","The reCAPTCHA action is invalid when sending request to the backend."),Gn(e,"recaptcha-not-enabled","reCAPTCHA Enterprise integration is not enabled for this project."),Gn(e,"missing-client-type","The reCAPTCHA client type is missing when sending request to the backend."),Gn(e,"missing-recaptcha-version","The reCAPTCHA version is missing when sending request to the backend."),Gn(e,"invalid-req-type","Invalid request parameters."),Gn(e,"invalid-recaptcha-version","The reCAPTCHA version is invalid when sending request to the backend."),e},eN=XA,tN=new br("auth","Firebase",XA()),nN=new ti("@firebase/auth");function rN(e){if(nN.logLevel<=Qr.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];nN.warn.apply(nN,["Auth (".concat(Vi,"): ").concat(e)].concat(n))}}function iN(e){if(nN.logLevel<=Qr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];nN.error.apply(nN,["Auth (".concat(Vi,"): ").concat(e)].concat(n))}}function aN(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw cN.apply(void 0,[e].concat(n))}function oN(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return cN.apply(void 0,[e].concat(n))}function sN(e,t,n){var r=Object.assign(Object.assign({},eN()),Gn({},t,n));return new br("auth","Firebase",r).create(t,{appName:e.name})}function uN(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&aN(e,"argument-error"),sN(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function cN(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=f(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(f(o)))}return tN.create.apply(tN,[e].concat(n))}function lN(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw cN.apply(void 0,[t].concat(r))}}function hN(e){var t="INTERNAL ASSERTION FAILED: "+e;throw iN(t),new Error(t)}function fN(e,t){e||hN(t)}function dN(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function pN(){return"http:"===vN()||"https:"===vN()}function vN(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var yN=function(){function e(t,n){d(this,e),this.shortDelay=t,this.longDelay=n,fN(n>t,"Short delay should be less than long delay!"),this.isMobile=fr()||vr()}return m(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(pN()||pr()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function mN(e,t){fN(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var gN=function(){function e(){d(this,e)}return m(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void hN("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void hN("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void hN("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),kN=(Gn(WA={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),Gn(WA,"MISSING_CUSTOM_TOKEN","internal-error"),Gn(WA,"INVALID_IDENTIFIER","invalid-email"),Gn(WA,"MISSING_CONTINUE_URI","internal-error"),Gn(WA,"INVALID_PASSWORD","wrong-password"),Gn(WA,"MISSING_PASSWORD","missing-password"),Gn(WA,"EMAIL_EXISTS","email-already-in-use"),Gn(WA,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Gn(WA,"INVALID_IDP_RESPONSE","invalid-credential"),Gn(WA,"INVALID_PENDING_TOKEN","invalid-credential"),Gn(WA,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Gn(WA,"MISSING_REQ_TYPE","internal-error"),Gn(WA,"EMAIL_NOT_FOUND","user-not-found"),Gn(WA,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Gn(WA,"EXPIRED_OOB_CODE","expired-action-code"),Gn(WA,"INVALID_OOB_CODE","invalid-action-code"),Gn(WA,"MISSING_OOB_CODE","internal-error"),Gn(WA,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Gn(WA,"INVALID_ID_TOKEN","invalid-user-token"),Gn(WA,"TOKEN_EXPIRED","user-token-expired"),Gn(WA,"USER_NOT_FOUND","user-token-expired"),Gn(WA,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Gn(WA,"INVALID_CODE","invalid-verification-code"),Gn(WA,"INVALID_SESSION_INFO","invalid-verification-id"),Gn(WA,"INVALID_TEMPORARY_PROOF","invalid-credential"),Gn(WA,"MISSING_SESSION_INFO","missing-verification-id"),Gn(WA,"SESSION_EXPIRED","code-expired"),Gn(WA,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Gn(WA,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Gn(WA,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Gn(WA,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Gn(WA,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Gn(WA,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Gn(WA,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Gn(WA,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Gn(WA,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Gn(WA,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Gn(WA,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Gn(WA,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),Gn(WA,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),Gn(WA,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),Gn(WA,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),Gn(WA,"MISSING_CLIENT_TYPE","missing-client-type"),Gn(WA,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),Gn(WA,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),Gn(WA,"INVALID_REQ_TYPE","invalid-req-type"),WA),bN=new yN(3e4,6e4);function wN(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function _N(e,t,n,r){return xN.apply(this,arguments)}function xN(){return xN=Kn(Wn().mark((function e(t,n,r,i){var a,o=arguments;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",SN(t,a,Kn(Wn().mark((function e(){var a,o,s,u;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=Pr(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",gN.fetch()(CN(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),xN.apply(this,arguments)}function SN(e,t,n){return EN.apply(this,arguments)}function EN(){return EN=Kn(Wn().mark((function e(t,n,r){var i,a,o,s,u,c,h,f,d,p;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},kN),n),e.prev=2,a=new AN(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw NN(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(u=o.ok?s.errorMessage:s.error.message,c=u.split(" : "),h=l(c,2),f=h[0],d=h[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw NN(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw NN(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw NN(t,"user-disabled",s);case 29:if(p=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw sN(t,p,d);case 34:aN(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof kr)){e.next=41;break}throw e.t0;case 41:aN(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),EN.apply(this,arguments)}function TN(e,t,n,r){return IN.apply(this,arguments)}function IN(){return IN=Kn(Wn().mark((function e(t,n,r,i){var a,o,s=arguments;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,_N(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&aN(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),IN.apply(this,arguments)}function CN(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?mN(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var AN=function(){function e(t){var n=this;d(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(oN(n.auth,"network-request-failed"))}),bN.get())}))}return m(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function NN(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=oN(e,t,r);return i.customData._tokenResponse=n,i}function PN(e,t){return RN.apply(this,arguments)}function RN(){return(RN=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_N(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ON(e,t){return DN.apply(this,arguments)}function DN(){return(DN=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_N(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function LN(e,t){return FN.apply(this,arguments)}function FN(){return(FN=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_N(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function MN(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function jN(){return jN=Kn(Wn().mark((function e(t){var n,r,i,a,o,s,u=arguments;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=zr(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,lN((a=VN(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:MN(UN(a.auth_time)),issuedAtTime:MN(UN(a.iat)),expirationTime:MN(UN(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),jN.apply(this,arguments)}function UN(e){return 1e3*Number(e)}function VN(e){var t=l(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return iN("JWT malformed, contained fewer than 3 sections"),null;try{var a=ir(r);return a?JSON.parse(a):(iN("Failed to decode base64 JWT payload"),null)}catch(o){return iN("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function qN(e,t){return BN.apply(this,arguments)}function BN(){return BN=Kn(Wn().mark((function e(t,n){var r=arguments;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof kr&&zN(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),BN.apply(this,arguments)}function zN(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var WN=function(){function e(t){d(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return m(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Kn(Wn().mark((function t(){return Wn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Kn(Wn().mark((function e(){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),HN=function(){function e(t,n){d(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return m(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=MN(this.lastLoginAt),this.creationTime=MN(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function KN(e){return GN.apply(this,arguments)}function GN(){return GN=Kn(Wn().mark((function e(t){var n,r,i,a,o,s,u,c,l,h,f;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,qN(t,LN(r,{idToken:i}));case 6:lN(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=zA(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],u=$N(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),h=!!c&&l,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new HN(o.createdAt,o.lastLoginAt),isAnonymous:h},Object.assign(t,f);case 17:case"end":return e.stop()}}),e)}))),GN.apply(this,arguments)}function QN(){return(QN=Kn(Wn().mark((function e(t){var n;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=zr(t),e.next=3,KN(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $N(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(f(n),f(t))}function YN(e,t){return JN.apply(this,arguments)}function JN(){return JN=Kn(Wn().mark((function e(t,n){var r;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,SN(t,{},Kn(Wn().mark((function e(){var r,i,a,o,s,u;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Pr({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=CN(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",gN.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),JN.apply(this,arguments)}var XN=function(){function e(){d(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return m(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){lN(e.idToken,"internal-error"),lN("undefined"!==typeof e.idToken,"internal-error"),lN("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=VN(e);return lN(t,"internal-error"),lN("undefined"!==typeof t.exp,"internal-error"),lN("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Kn(Wn().mark((function e(t){var n,r=arguments;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],lN(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Kn(Wn().mark((function e(t,n){var r,i,a,o;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,YN(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return hN("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(lN("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(lN("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(lN("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function ZN(e,t){lN("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var eP=function(){function e(t){d(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=zA(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new WN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?f(a.providerData):[],this.metadata=new HN(a.createdAt||void 0,a.lastLoginAt||void 0)}return m(e,[{key:"getIdToken",value:function(){var e=Kn(Wn().mark((function e(t){var n;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qN(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(lN(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return jN.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return QN.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(lN(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){lN(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Kn(Wn().mark((function e(t){var n,r,i=arguments;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,KN(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Kn(Wn().mark((function e(){var t;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,qN(this,PN(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,y=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;lN(k&&x,t,"internal-error");var S=XN.fromJSON(this.name,x);lN("string"===typeof k,t,"internal-error"),ZN(h,t.name),ZN(f,t.name),lN("boolean"===typeof b,t,"internal-error"),lN("boolean"===typeof w,t,"internal-error"),ZN(d,t.name),ZN(p,t.name),ZN(v,t.name),ZN(y,t.name),ZN(m,t.name),ZN(g,t.name);var E=new e({uid:k,auth:t,email:f,emailVerified:b,displayName:h,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:S,createdAt:m,lastLoginAt:g});return _&&Array.isArray(_)&&(E.providerData=_.map((function(e){return Object.assign({},e)}))),y&&(E._redirectEventId=y),E}},{key:"_fromIdTokenResponse",value:function(){var t=Kn(Wn().mark((function t(n,r){var i,a,o,s=arguments;return Wn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new XN).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,KN(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),tP=new Map;function nP(e){fN(e instanceof Function,"Expected a class definition");var t=tP.get(e);return t?(fN(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,tP.set(e,t),t)}var rP=function(){function e(){d(this,e),this.type="NONE",this.storage={}}return m(e,[{key:"_isAvailable",value:function(){var e=Kn(Wn().mark((function e(){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Kn(Wn().mark((function e(t){var n;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Kn(Wn().mark((function e(t){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();rP.type="NONE";var iP=rP;function aP(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var oP=function(){function e(t,n,r){d(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=aP(this.userKey,a.apiKey,o),this.fullPersistenceKey=aP("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return m(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Kn(Wn().mark((function e(){var t;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?eP._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Kn(Wn().mark((function e(t){var n;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Kn(Wn().mark((function t(n,r){var i,a,o,s,u,c,l,h,f,d,p,v=arguments;return Wn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(nP(iP),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Kn(Wn().mark((function e(t){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||nP(iP),s=aP(i,n.config.apiKey,n.name),u=null,c=I(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return h=l.value,t.prev=14,t.next=17,h._get(s);case 17:if(!(f=t.sent)){t.next=23;break}return d=eP._fromJSON(n,f),h!==o&&(u=d),o=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Kn(Wn().mark((function e(t){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function sP(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(hP(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(uP(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(dP(t))return"Blackberry";if(pP(t))return"Webos";if(cP(t))return"Safari";if((t.includes("chrome/")||lP(t))&&!t.includes("edge/"))return"Chrome";if(fP(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function uP(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hr();return/firefox\//i.test(e)}function cP(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:hr()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lP(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hr();return/crios\//i.test(e)}function hP(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hr();return/iemobile/i.test(e)}function fP(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hr();return/android/i.test(e)}function dP(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hr();return/blackberry/i.test(e)}function pP(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hr();return/webos/i.test(e)}function vP(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hr();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function yP(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hr();return vP(e)||fP(e)||pP(e)||dP(e)||/windows phone/i.test(e)||hP(e)}function mP(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=sP(hr());break;case"Worker":t="".concat(sP(hr()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Vi,"/").concat(r)}function gP(e){return kP.apply(this,arguments)}function kP(){return(kP=Kn(Wn().mark((function e(t){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_N(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bP(e,t){return wP.apply(this,arguments)}function wP(){return(wP=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_N(t,"GET","/v2/recaptchaConfig",wN(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _P(e){return void 0!==e&&void 0!==e.getResponse}function xP(e){return void 0!==e&&void 0!==e.enterprise}var SP=m((function e(t){if(d(this,e),this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((function(e){return"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState}))}));function EP(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=oN("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function TP(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var IP=function(){function e(t){d(this,e),this.type="recaptcha-enterprise",this.auth=RP(t)}return m(e,[{key:"verify",value:function(){var e=Kn(Wn().mark((function e(){var t,n,r,i,a,o=this,s=arguments;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n,r){var i=window.grecaptcha;xP(i)?i.enterprise.ready((function(){i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=Kn(Wn().mark((function e(t){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=Kn(Wn().mark((function e(n,r){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:bP(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new SP(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=s.length>0&&void 0!==s[0]?s[0]:"verify",n=s.length>1&&void 0!==s[1]&&s[1],e.abrupt("return",new Promise((function(e,t){r(o.auth).then((function(r){if(!n&&xP(window.grecaptcha))a(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));EP("https://www.google.com/recaptcha/enterprise.js?render="+r).then((function(){a(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function CP(e,t,n){return AP.apply(this,arguments)}function AP(){return AP=Kn(Wn().mark((function e(t,n,r){var i,a,o,s,u=arguments;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u.length>3&&void 0!==u[3]&&u[3],a=new IP(t),e.prev=2,e.next=5,a.verify(r);case 5:o=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,a.verify(r,!0);case 12:o=e.sent;case 13:return s=Object.assign({},n),i?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",s);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),AP.apply(this,arguments)}var NP=function(){function e(t){d(this,e),this.auth=t,this.queue=[]}return m(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=Kn(Wn().mark((function e(t){var n,r,i,a,o,s,u;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=I(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=I(n);try{for(o.s();!(s=o.n()).done;){u=s.value;try{u()}catch(it){}}}catch(c){o.e(c)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),PP=function(){function e(t,n,r,i){d(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new OP(this),this.idTokenSubscription=new OP(this),this.beforeStateQueue=new NP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}return m(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=nP(t)),this._initializationPromise=this.queue(Kn(Wn().mark((function r(){var i,a;return Wn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,oP.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Kn(Wn().mark((function e(){var t;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Kn(Wn().mark((function e(t){var n,r,i,a,o,s,u;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:u=e.sent,o&&o!==s||!(null===u||void 0===u?void 0:u.user)||(i=u.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return lN(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Kn(Wn().mark((function e(t){var n;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Kn(Wn().mark((function e(t){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,KN(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Kn(Wn().mark((function e(){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Kn(Wn().mark((function e(t){var n;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?zr(t):null)&&lN(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Kn(Wn().mark((function e(t){var n,r=this,i=arguments;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&lN(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(Kn(Wn().mark((function e(){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Kn(Wn().mark((function e(){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Kn(Wn().mark((function n(){return Wn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(nP(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"initializeRecaptchaConfig",value:function(){var e=Kn(Wn().mark((function e(){var t,n;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bP(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"});case 2:t=e.sent,n=new SP(t),null==this.tenantId?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new IP(this).verify();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new br("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Kn(Wn().mark((function e(t,n){var r;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Kn(Wn().mark((function e(t){var n;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return lN(n=t&&nP(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,oP.create(this,[nP(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Kn(Wn().mark((function e(t){var n,r;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Kn(Wn().mark((function e(){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Kn(Wn().mark((function e(t){var n=this;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Kn(Wn().mark((function e(){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return lN(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Kn(Wn().mark((function e(t){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return lN(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mP(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Kn(Wn().mark((function e(){var t,n,r,i;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Gn({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.next=8,this._getAppCheckToken();case 8:return(i=e.sent)&&(n["X-Firebase-AppCheck"]=i),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=Kn(Wn().mark((function e(){var t,n;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&rN("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function RP(e){return zr(e)}var OP=function(){function e(t){var n=this;d(this,e),this.auth=t,this.observer=null,this.addObserver=Lr((function(e){return n.observer=e}))}return m(e,[{key:"next",get:function(){return lN(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function DP(e,t,n){var r=RP(e);lN(r._canInitEmulator,r,"emulator-config-failed"),lN(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=LP(t),o=function(e){var t=LP(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:FP(r.substr(a.length+1))}}var o=l(r.split(":"),2);return{host:o[0],port:FP(o[1])}}(t),s=o.host,u=o.port,c=null===u?"":":".concat(u);r.config.emulator={url:"".concat(a,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function LP(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function FP(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var MP=function(){function e(t,n){d(this,e),this.providerId=t,this.signInMethod=n}return m(e,[{key:"toJSON",value:function(){return hN("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return hN("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return hN("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return hN("not implemented")}}]),e}();function jP(e,t){return UP.apply(this,arguments)}function UP(){return(UP=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_N(t,"POST","/v1/accounts:resetPassword",wN(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function VP(e,t){return qP.apply(this,arguments)}function qP(){return(qP=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_N(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function BP(e,t){return zP.apply(this,arguments)}function zP(){return(zP=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_N(t,"POST","/v1/accounts:update",wN(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function WP(e,t){return HP.apply(this,arguments)}function HP(){return(HP=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",TN(t,"POST","/v1/accounts:signInWithPassword",wN(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function KP(e,t){return GP.apply(this,arguments)}function GP(){return(GP=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_N(t,"POST","/v1/accounts:sendOobCode",wN(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function QP(e,t){return $P.apply(this,arguments)}function $P(){return($P=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",KP(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function YP(e,t){return JP.apply(this,arguments)}function JP(){return(JP=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",KP(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function XP(e,t){return ZP.apply(this,arguments)}function ZP(){return(ZP=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",KP(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eR(e,t){return tR.apply(this,arguments)}function tR(){return(tR=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",KP(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nR(e,t){return rR.apply(this,arguments)}function rR(){return(rR=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",TN(t,"POST","/v1/accounts:signInWithEmailLink",wN(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function iR(e,t){return aR.apply(this,arguments)}function aR(){return(aR=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",TN(t,"POST","/v1/accounts:signInWithEmailLink",wN(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var oR=function(e){k(n,e);var t=x(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return d(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return m(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Kn(Wn().mark((function e(t){var n,r,i;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?12:13;break;case 3:if(r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},!(null===(n=t._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled)){e.next=11;break}return e.next=7,CP(t,r,"signInWithPassword");case 7:return i=e.sent,e.abrupt("return",WP(t,i));case 11:return e.abrupt("return",WP(t,r).catch(function(){var e=Kn(Wn().mark((function e(n){var i;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,CP(t,r,"signInWithPassword");case 4:return i=e.sent,e.abrupt("return",WP(t,i));case 8:return e.abrupt("return",Promise.reject(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.abrupt("return",nR(t,{email:this._email,oobCode:this._password}));case 13:aN(t,"internal-error");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",VP(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",iR(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:aN(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(MP);function sR(e,t){return uR.apply(this,arguments)}function uR(){return(uR=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",TN(t,"POST","/v1/accounts:signInWithIdp",wN(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var cR=function(e){k(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return m(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return sR(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,sR(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,sR(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Pr(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):aN("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=zA(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(MP);function lR(e,t){return hR.apply(this,arguments)}function hR(){return(hR=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_N(t,"POST","/v1/accounts:sendVerificationCode",wN(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fR(){return(fR=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",TN(t,"POST","/v1/accounts:signInWithPhoneNumber",wN(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dR(){return(dR=Kn(Wn().mark((function e(t,n){var r;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,TN(t,"POST","/v1/accounts:signInWithPhoneNumber",wN(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw NN(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pR=Gn({},"USER_NOT_FOUND","user-not-found");function vR(){return(vR=Kn(Wn().mark((function e(t,n){var r;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",TN(t,"POST","/v1/accounts:signInWithPhoneNumber",wN(t,r),pR));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var yR=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone","phone")).params=e,r}return m(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return fR.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return dR.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return vR.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(MP);var mR=function(){function e(t){var n,r,i,a,o,s;d(this,e);var u=Rr(Or(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);lN(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return m(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Rr(Or(e)).link,n=t?Rr(Or(t)).deep_link_id:null,r=Rr(Or(e)).deep_link_id;return(r?Rr(Or(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(FT){return null}}}]),e}();var gR=function(){function e(){d(this,e),this.providerId=e.PROVIDER_ID}return m(e,null,[{key:"credential",value:function(e,t){return oR._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=mR.parseLink(t);return lN(n,"argument-error"),oR._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();gR.PROVIDER_ID="password",gR.EMAIL_PASSWORD_SIGN_IN_METHOD="password",gR.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var kR=function(){function e(t){d(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return m(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),bR=function(e){k(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).scopes=[],e}return m(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return f(this.scopes)}}]),n}(kR),wR=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return lN(e.idToken||e.accessToken,"argument-error"),cR._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return lN("providerId"in t&&"signInMethod"in t,"argument-error"),cR._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,s=t.nonce,u=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!u)return null;try{return new n(u)._credential({idToken:r,accessToken:i,nonce:s,pendingToken:o})}catch(c){return null}}}]),n}(bR),_R=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.call(this,"facebook.com")}return m(n,null,[{key:"credential",value:function(e){return cR._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(FT){return null}}}]),n}(bR);_R.FACEBOOK_SIGN_IN_METHOD="facebook.com",_R.PROVIDER_ID="facebook.com";var xR=function(e){k(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return m(n,null,[{key:"credential",value:function(e,t){return cR._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(FT){return null}}}]),n}(bR);xR.GOOGLE_SIGN_IN_METHOD="google.com",xR.PROVIDER_ID="google.com";var SR=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.call(this,"github.com")}return m(n,null,[{key:"credential",value:function(e){return cR._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(FT){return null}}}]),n}(bR);SR.GITHUB_SIGN_IN_METHOD="github.com",SR.PROVIDER_ID="github.com";var ER=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return m(n,[{key:"_getIdTokenResponse",value:function(e){return sR(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,sR(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,sR(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(MP),TR=function(e){k(n,e);var t=x(n);function n(e){return d(this,n),lN(e.startsWith("saml."),"argument-error"),t.call(this,e)}return m(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=ER.fromJSON(e);return lN(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return ER._create(r,n)}catch(i){return null}}}]),n}(kR),IR=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.call(this,"twitter.com")}return m(n,null,[{key:"credential",value:function(e,t){return cR._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(FT){return null}}}]),n}(bR);function CR(e,t){return AR.apply(this,arguments)}function AR(){return(AR=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",TN(t,"POST","/v1/accounts:signUp",wN(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}IR.TWITTER_SIGN_IN_METHOD="twitter.com",IR.PROVIDER_ID="twitter.com";var NR=function(){function e(t){d(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return m(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Kn(Wn().mark((function t(n,r,i){var a,o,s,u,c=arguments;return Wn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,eP._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=PR(i),u=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Kn(Wn().mark((function t(n,r,i){var a;return Wn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=PR(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function PR(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function RR(){return RR=Kn(Wn().mark((function e(t){var n,r,i,a;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=RP(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new NR({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,CR(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,NR._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),RR.apply(this,arguments)}var OR=function(e){k(n,e);var t=x(n);function n(e,r,i,a){var o,s;return d(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(_(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return m(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(kr);function DR(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw OR._fromErrorAndOperation(e,n,t,r);throw n}))}function LR(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function FR(e,t){return MR.apply(this,arguments)}function MR(){return MR=Kn(Wn().mark((function e(t,n){var r,i,a,o;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zr(t),e.next=3,VR(!0,r,n);case 3:return e.t0=ON,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=LR(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),MR.apply(this,arguments)}function jR(e,t){return UR.apply(this,arguments)}function UR(){return UR=Kn(Wn().mark((function e(t,n){var r,i,a=arguments;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=qN,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",NR._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),UR.apply(this,arguments)}function VR(e,t,n){return qR.apply(this,arguments)}function qR(){return(qR=Kn(Wn().mark((function e(t,n,r){var i,a;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,KN(n);case 2:i=LR(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",lN(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function BR(e,t){return zR.apply(this,arguments)}function zR(){return zR=Kn(Wn().mark((function e(t,n){var r,i,a,o,s,u,c=arguments;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,qN(t,DR(i,a,n,t),r);case 6:return lN((o=e.sent).idToken,i,"internal-error"),lN(s=VN(o.idToken),i,"internal-error"),u=s.sub,lN(t.uid===u,i,"user-mismatch"),e.abrupt("return",NR._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&aN(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),zR.apply(this,arguments)}function WR(e,t){return HR.apply(this,arguments)}function HR(){return HR=Kn(Wn().mark((function e(t,n){var r,i,a,o,s=arguments;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,DR(t,i,n);case 4:return a=e.sent,e.next=7,NR._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),HR.apply(this,arguments)}function KR(e,t){return GR.apply(this,arguments)}function GR(){return(GR=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",WR(RP(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function QR(e,t){return $R.apply(this,arguments)}function $R(){return($R=Kn(Wn().mark((function e(t,n){var r;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zr(t),e.next=3,VR(!1,r,n.providerId);case 3:return e.abrupt("return",jR(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function YR(e,t){return JR.apply(this,arguments)}function JR(){return(JR=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",BR(zr(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function XR(e,t){return ZR.apply(this,arguments)}function ZR(){return(ZR=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",TN(t,"POST","/v1/accounts:signInWithCustomToken",wN(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eO(){return(eO=Kn(Wn().mark((function e(t,n){var r,i,a;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=RP(t),e.next=3,XR(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,NR._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var tO=function(){function e(t,n){d(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return m(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?nO._fromServerResponse(e,t):"totpInfo"in t?rO._fromServerResponse(e,t):aN(e,"internal-error")}}]),e}(),nO=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return m(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(tO),rO=function(e){k(n,e);var t=x(n);function n(e){return d(this,n),t.call(this,"totp",e)}return m(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(tO);function iO(e,t,n){var r;lN((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),lN("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(lN(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(lN(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function aO(){return aO=Kn(Wn().mark((function e(t,n,r){var i,a,o,s;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=RP(t),o={requestType:"PASSWORD_RESET",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=11;break}return e.next=5,CP(a,o,"getOobCode",!0);case 5:return s=e.sent,r&&iO(a,s,r),e.next=9,YP(a,s);case 9:e.next=14;break;case 11:return r&&iO(a,o,r),e.next=14,YP(a,o).catch(function(){var e=Kn(Wn().mark((function e(t){var n;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow."),e.next=4,CP(a,o,"getOobCode",!0);case 4:return n=e.sent,r&&iO(a,n,r),e.next=8,YP(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)}))),aO.apply(this,arguments)}function oO(){return(oO=Kn(Wn().mark((function e(t,n,r){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jP(zr(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sO(){return(sO=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,BP(zr(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uO(e,t){return cO.apply(this,arguments)}function cO(){return(cO=Kn(Wn().mark((function e(t,n){var r,i,a,o;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zr(t),e.next=3,jP(r,{oobCode:n});case 3:i=e.sent,lN(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return lN(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:lN(i.mfaInfo,r,"internal-error");case 13:lN(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=tO._fromServerResponse(RP(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lO(){return(lO=Kn(Wn().mark((function e(t,n){var r,i;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uO(zr(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hO(e,t,n){return fO.apply(this,arguments)}function fO(){return fO=Kn(Wn().mark((function e(t,n,r){var i,a,o,s,u,c,l;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=RP(t),o={returnSecureToken:!0,email:n,password:r,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=9;break}return e.next=5,CP(a,o,"signUpPassword");case 5:u=e.sent,s=CR(a,u),e.next=10;break;case 9:s=CR(a,o).catch(function(){var e=Kn(Wn().mark((function e(t){var n;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow."),e.next=4,CP(a,o,"signUpPassword");case 4:return n=e.sent,e.abrupt("return",CR(a,n));case 8:return e.abrupt("return",Promise.reject(t));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:return e.next=12,s.catch((function(e){return Promise.reject(e)}));case 12:return c=e.sent,e.next=15,NR._fromIdTokenResponse(a,"signIn",c);case 15:return l=e.sent,e.next=18,a._updateCurrentUser(l.user);case 18:return e.abrupt("return",l);case 19:case"end":return e.stop()}}),e)}))),fO.apply(this,arguments)}function dO(){return dO=Kn(Wn().mark((function e(t,n,r){var i,a,o,s,u;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=function(e,t){lN(t.handleCodeInApp,a,"argument-error"),t&&iO(a,e,t)},a=RP(t),o={requestType:"EMAIL_SIGNIN",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=12;break}return e.next=6,CP(a,o,"getOobCode",!0);case 6:return u=e.sent,s(u,r),e.next=10,XP(a,u);case 10:e.next=15;break;case 12:return s(o,r),e.next=15,XP(a,o).catch(function(){var e=Kn(Wn().mark((function e(t){var n;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,CP(a,o,"getOobCode",!0);case 4:return n=e.sent,s(n,r),e.next=8,XP(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}}),e)}))),dO.apply(this,arguments)}function pO(){return(pO=Kn(Wn().mark((function e(t,n,r){var i,a;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=zr(t),lN((a=gR.credentialWithLink(n,r||dN()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",KR(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vO(e,t){return yO.apply(this,arguments)}function yO(){return(yO=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_N(t,"POST","/v1/accounts:createAuthUri",wN(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mO(){return(mO=Kn(Wn().mark((function e(t,n){var r,i,a,o;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pN()?dN():"http://localhost",i={identifier:n,continueUri:r},e.next=4,vO(zr(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gO(){return(gO=Kn(Wn().mark((function e(t,n){var r,i,a,o;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zr(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&iO(r.auth,a,n),e.next=8,QP(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kO(){return(kO=Kn(Wn().mark((function e(t,n,r){var i,a,o,s;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=zr(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&iO(i.auth,o,r),e.next=8,eR(i.auth,o);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bO(e,t){return wO.apply(this,arguments)}function wO(){return(wO=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_N(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _O(){return(_O=Kn(Wn().mark((function e(t,n){var r,i,a,o,s,u,c;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=zr(t),e.next=6,a.getIdToken();case 6:return o=e.sent,s={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,qN(a,bO(a.auth,s));case 10:return u=e.sent,a.displayName=u.displayName||null,a.photoURL=u.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(u);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xO(e,t,n){return SO.apply(this,arguments)}function SO(){return(SO=Kn(Wn().mark((function e(t,n,r){var i,a,o,s;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,qN(t,VP(i,o));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var EO=m((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};d(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),TO=function(e){k(n,e);var t=x(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this,e,r,i)).username=a,o}return m(n)}(EO),IO=function(e){k(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"facebook.com",r)}return m(n)}(EO),CO=function(e){k(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return m(n)}(TO),AO=function(e){k(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"google.com",r)}return m(n)}(EO),NO=function(e){k(n,e);var t=x(n);function n(e,r,i){return d(this,n),t.call(this,e,"twitter.com",r,i)}return m(n)}(TO);function PO(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=VN(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new EO(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new IO(a,i);case"github.com":return new CO(a,i);case"google.com":return new AO(a,i);case"twitter.com":return new NO(a,i,e.screenName||null);case"custom":case"anonymous":return new EO(a,null);default:return new EO(a,r,i)}}(n)}var RO=function(){function e(t,n,r){d(this,e),this.type=t,this.credential=n,this.auth=r}return m(e,[{key:"toJSON",value:function(){return{multiFactorSession:Gn({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),OO=function(){function e(t,n,r){d(this,e),this.session=t,this.hints=n,this.signInResolver=r}return m(e,[{key:"resolveSignIn",value:function(){var e=Kn(Wn().mark((function e(t){var n;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=RP(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return tO._fromServerResponse(r,e)}));lN(i.mfaPendingCredential,r,"internal-error");var o=RO._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=Kn(Wn().mark((function e(t){var a,s,u;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,s=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,NR._fromIdTokenResponse(r,n.operationType,s);case 11:return u=e.sent,e.next=14,r._updateCurrentUser(u.user);case 14:return e.abrupt("return",u);case 15:return lN(n.user,r,"internal-error"),e.abrupt("return",NR._forOperation(n.user,n.operationType,s));case 17:aN(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function DO(e,t){return _N(e,"POST","/v2/accounts/mfaEnrollment:start",wN(e,t))}function LO(e,t){return _N(e,"POST","/v2/accounts/mfaEnrollment:finalize",wN(e,t))}var FO=function(){function e(t){var n=this;d(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return tO._fromServerResponse(t.auth,e)})))}))}return m(e,[{key:"getSession",value:function(){var e=Kn(Wn().mark((function e(){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=RO,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=Kn(Wn().mark((function e(t,n){var r,i,a;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,qN(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=Kn(Wn().mark((function e(t){var n,r,i;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,qN(this.user,_N(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",wN(a,{idToken:r,mfaEnrollmentId:n})));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}var a}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),MO=new WeakMap;var jO="__sak",UO=function(){function e(t,n){d(this,e),this.storageRetriever=t,this.type=n}return m(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(jO,"1"),this.storage.removeItem(jO),Promise.resolve(!0)):Promise.resolve(!1)}catch(FT){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var VO=function(e){k(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=hr();return cP(e)||vP(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=yP(),e._shouldAllowMigration=!0,e}return m(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);yr()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Kn(Wn().mark((function e(t,r){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nf(b(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Kn(Wn().mark((function e(t){var r;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nf(b(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Kn(Wn().mark((function e(t){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nf(b(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(UO);VO.type="LOCAL";var qO=VO,BO=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return m(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(UO);BO.type="SESSION";var zO=BO;function WO(e){return Promise.all(e.map(function(){var e=Kn(Wn().mark((function e(t){var n;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var HO=function(){function e(t){d(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return m(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Kn(Wn().mark((function e(t){var n,r,i,a,o,s,u,c;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(s=this.handlersMap[a])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(s).map(function(){var e=Kn(Wn().mark((function e(t){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,WO(u);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function KO(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}HO.receivers=[];var GO=function(){function e(t){d(this,e),this.target=t,this.handlers=new Set}return m(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Kn(Wn().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=KO("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function QO(){return window}function $O(e){QO().location.href=e}function YO(){return"undefined"!==typeof QO().WorkerGlobalScope&&"function"===typeof QO().importScripts}function JO(){return XO.apply(this,arguments)}function XO(){return(XO=Kn(Wn().mark((function e(){var t;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function ZO(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var eD="firebaseLocalStorageDb",tD="firebaseLocalStorage",nD="fbase_key",rD=function(){function e(t){d(this,e),this.request=t}return m(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function iD(e,t){return e.transaction([tD],t?"readwrite":"readonly").objectStore(tD)}function aD(){var e=indexedDB.deleteDatabase(eD);return new rD(e).toPromise()}function oD(){var e=indexedDB.open(eD,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(tD,{keyPath:nD})}catch(r){n(r)}})),e.addEventListener("success",Kn(Wn().mark((function n(){var r;return Wn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(tD)){n.next=12;break}return r.close(),n.next=5,aD();case 5:return n.t0=t,n.next=8,oD();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function sD(e,t,n){return uD.apply(this,arguments)}function uD(){return uD=Kn(Wn().mark((function e(t,n,r){var i,a;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=iD(t,!0).put((Gn(i={},nD,n),Gn(i,"value",r),i)),e.abrupt("return",new rD(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),uD.apply(this,arguments)}function cD(e,t){return lD.apply(this,arguments)}function lD(){return lD=Kn(Wn().mark((function e(t,n){var r,i;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=iD(t,!1).get(n),e.next=3,new rD(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),lD.apply(this,arguments)}function hD(e,t){var n=iD(e,!0).delete(t);return new rD(n).toPromise()}var fD=function(){function e(){d(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return m(e,[{key:"_openDb",value:function(){var e=Kn(Wn().mark((function e(){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,oD();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Kn(Wn().mark((function e(t){var n,r;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Kn(Wn().mark((function e(){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",YO()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Kn(Wn().mark((function e(){var t=this;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=HO._getInstance(YO()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Kn(Wn().mark((function e(n,r){var i;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Kn(Wn().mark((function e(){var t,n,r;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,JO();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new GO(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Kn(Wn().mark((function e(t){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&ZO()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Kn(Wn().mark((function e(){var t;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,oD();case 5:return t=e.sent,e.next=8,sD(t,jO,"1");case 8:return e.next=10,hD(t,jO);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Kn(Wn().mark((function e(t){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Kn(Wn().mark((function e(t,n){var r=this;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Kn(Wn().mark((function e(){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return sD(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Kn(Wn().mark((function e(t){var n;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return cD(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Kn(Wn().mark((function e(t){var n=this;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Kn(Wn().mark((function e(){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return hD(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Kn(Wn().mark((function e(){var t,n,r,i,a,o,s,u,c,l,h;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=iD(e,!1).getAll();return new rD(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=I(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(f){i.e(f)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)h=l[c],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Kn(Wn().mark((function t(){return Wn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();fD.type="LOCAL";var dD=fD;function pD(e,t){return _N(e,"POST","/v2/accounts/mfaSignIn:start",wN(e,t))}function vD(e,t){return _N(e,"POST","/v2/accounts/mfaSignIn:finalize",wN(e,t))}var yD=1e12,mD=function(){function e(t){d(this,e),this.auth=t,this.counter=yD,this._widgets=new Map}return m(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new gD(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||yD;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||yD;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=Kn(Wn().mark((function e(t){var n,r;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||yD,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),gD=function(){function e(t,n,r){var i=this;d(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;lN(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return m(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var kD=TP("rcb"),bD=new yN(3e4,6e4),wD=function(){function e(){var t;d(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=QO().grecaptcha)||void 0===t?void 0:t.render)}return m(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return lN(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)&&_P(QO().grecaptcha)?Promise.resolve(QO().grecaptcha):new Promise((function(r,i){var a=QO().setTimeout((function(){i(oN(e,"network-request-failed"))}),bD.get());QO()[kD]=function(){QO().clearTimeout(a),delete QO()[kD];var o=QO().grecaptcha;if(o&&_P(o)){var s=o.render;o.render=function(e,n){var r=s(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(oN(e,"internal-error"))},EP("".concat("https://www.google.com/recaptcha/api.js?","?").concat(Pr({onload:kD,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(oN(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=QO().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var _D=function(){function e(){d(this,e)}return m(e,[{key:"load",value:function(){var e=Kn(Wn().mark((function e(t){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new mD(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),xD="recaptcha",SD={theme:"light",type:"image"},ED=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},SD),r=arguments.length>2?arguments[2]:void 0;d(this,e),this.parameters=n,this.type=xD,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=RP(r),this.isInvisible="invisible"===this.parameters.size,lN("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;lN(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new _D:new wD,this.validateStartingState()}return m(e,[{key:"verify",value:function(){var e=Kn(Wn().mark((function e(){var t,n,r,i=this;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){lN(!this.parameters.sitekey,this.auth,"argument-error"),lN(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),lN("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=QO()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){lN(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=Kn(Wn().mark((function e(){var t,n;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Kn(Wn().mark((function e(){var t;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return lN(pN()&&!YO(),this.auth,"internal-error"),e.next=3,TD();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,gP(this.auth);case 8:lN(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return lN(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function TD(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var ID=function(){function e(t,n){d(this,e),this.verificationId=t,this.onConfirmation=n}return m(e,[{key:"confirm",value:function(e){var t=yR._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function CD(){return(CD=Kn(Wn().mark((function e(t,n,r){var i,a;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=RP(t),e.next=3,RD(i,n,zr(r));case 3:return a=e.sent,e.abrupt("return",new ID(a,(function(e){return KR(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function AD(e,t,n){return ND.apply(this,arguments)}function ND(){return(ND=Kn(Wn().mark((function e(t,n,r){var i,a;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=zr(t),e.next=3,VR(!1,i,"phone");case 3:return e.next=5,RD(i.auth,n,zr(r));case 5:return a=e.sent,e.abrupt("return",new ID(a,(function(e){return QR(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function PD(){return(PD=Kn(Wn().mark((function e(t,n,r){var i,a;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=zr(t),e.next=3,RD(i.auth,n,zr(r));case 3:return a=e.sent,e.abrupt("return",new ID(a,(function(e){return YR(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function RD(e,t,n){return OD.apply(this,arguments)}function OD(){return OD=Kn(Wn().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,lN("string"===typeof a,t,"argument-error"),lN(r.type===xD,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return lN("enroll"===s.type,t,"internal-error"),e.next=13,DO(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return lN("signin"===s.type,t,"internal-error"),lN(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,pD(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,lR(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,f=h.sessionInfo,e.abrupt("return",f);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),OD.apply(this,arguments)}function DD(){return(DD=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jR(zr(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var LD=function(){function e(t){d(this,e),this.providerId=e.PROVIDER_ID,this.auth=RP(t)}return m(e,[{key:"verifyPhoneNumber",value:function(e,t){return RD(this.auth,e,zr(t))}}],[{key:"credential",value:function(e,t){return yR._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?yR._fromTokenResponse(n,r):null}}]),e}();function FD(e,t){return t?nP(t):(lN(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}LD.PROVIDER_ID="phone",LD.PHONE_SIGN_IN_METHOD="phone";var MD=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,"custom","custom")).params=e,r}return m(n,[{key:"_getIdTokenResponse",value:function(e){return sR(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return sR(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return sR(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(MP);function jD(e){return WR(e.auth,new MD(e),e.bypassAuthState)}function UD(e){var t=e.auth,n=e.user;return lN(n,t,"internal-error"),BR(n,new MD(e),e.bypassAuthState)}function VD(e){return qD.apply(this,arguments)}function qD(){return(qD=Kn(Wn().mark((function e(t){var n,r;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,lN(r=t.user,n,"internal-error"),e.abrupt("return",jR(r,new MD(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var BD=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];d(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return m(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Kn(Wn().mark((function t(n,r){return Wn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Kn(Wn().mark((function e(t){var n,r,i,a,o,s,u;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jD;case"linkViaPopup":case"linkViaRedirect":return VD;case"reauthViaPopup":case"reauthViaRedirect":return UD;default:aN(this.auth,"internal-error")}}},{key:"resolve",value:function(e){fN(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){fN(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),zD=new yN(2e3,1e4);function WD(e,t,n){return HD.apply(this,arguments)}function HD(){return(HD=Kn(Wn().mark((function e(t,n,r){var i,a,o;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=RP(t),uN(t,n,kR),a=FD(i,r),o=new $D(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function KD(){return(KD=Kn(Wn().mark((function e(t,n,r){var i,a,o;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return uN((i=zr(t)).auth,n,kR),a=FD(i.auth,r),o=new $D(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function GD(e,t,n){return QD.apply(this,arguments)}function QD(){return(QD=Kn(Wn().mark((function e(t,n,r){var i,a,o;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return uN((i=zr(t)).auth,n,kR),a=FD(i.auth,r),o=new $D(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $D=function(e){k(n,e);var t=x(n);function n(e,r,i,a,o){var s;return d(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=_(s),s}return m(n,[{key:"executeNotNull",value:function(){var e=Kn(Wn().mark((function e(){var t;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return lN(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Kn(Wn().mark((function e(){var t,n=this;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fN(1===this.filter.length,"Popup operations only handle one event"),t=KO(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(oN(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(oN(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(oN(e.auth,"popup-closed-by-user"))}),8e3):e.pollId=window.setTimeout(t,zD.get())}()}}]),n}(BD);$D.currentPopupAction=null;var YD="pendingRedirect",JD=new Map,XD=function(e){k(n,e);var t=x(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return d(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return m(n,[{key:"execute",value:function(){var e=Kn(Wn().mark((function e(){var t,r;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=JD.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,ZD(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,nf(b(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:JD.set(this.auth._key(),t);case 21:return this.bypassAuthState||JD.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Kn(Wn().mark((function e(t){var r;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",nf(b(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",nf(b(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Kn(Wn().mark((function e(){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(BD);function ZD(e,t){return eL.apply(this,arguments)}function eL(){return(eL=Kn(Wn().mark((function e(t,n){var r,i,a;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=aL(n),i=iL(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tL(e,t){return nL.apply(this,arguments)}function nL(){return(nL=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",iL(t)._set(aL(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rL(e,t){JD.set(e._key(),t)}function iL(e){return nP(e._redirectPersistence)}function aL(e){return aP(YD,e.config.apiKey,e.name)}function oL(e,t,n){return function(e,t,n){return sL.apply(this,arguments)}(e,t,n)}function sL(){return(sL=Kn(Wn().mark((function e(t,n,r){var i,a;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=RP(t),uN(t,n,kR),e.next=4,i._initializationPromise;case 4:return a=FD(i,r),e.next=7,tL(a,i);case 7:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uL(e,t,n){return function(e,t,n){return cL.apply(this,arguments)}(e,t,n)}function cL(){return(cL=Kn(Wn().mark((function e(t,n,r){var i,a,o;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return uN((i=zr(t)).auth,n,kR),e.next=4,i.auth._initializationPromise;case 4:return a=FD(i.auth,r),e.next=7,tL(a,i.auth);case 7:return e.next=9,yL(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lL(e,t,n){return function(e,t,n){return hL.apply(this,arguments)}(e,t,n)}function hL(){return(hL=Kn(Wn().mark((function e(t,n,r){var i,a,o;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return uN((i=zr(t)).auth,n,kR),e.next=4,i.auth._initializationPromise;case 4:return a=FD(i.auth,r),e.next=7,VR(!1,i,n.providerId);case 7:return e.next=9,tL(a,i.auth);case 9:return e.next=11,yL(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fL(e,t){return dL.apply(this,arguments)}function dL(){return(dL=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,RP(t)._initializationPromise;case 2:return e.abrupt("return",pL(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pL(e,t){return vL.apply(this,arguments)}function vL(){return vL=Kn(Wn().mark((function e(t,n){var r,i,a,o,s,u=arguments;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=RP(t),a=FD(i,n),o=new XD(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),vL.apply(this,arguments)}function yL(e){return mL.apply(this,arguments)}function mL(){return(mL=Kn(Wn().mark((function e(t){var n;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=KO("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var gL=function(){function e(t){d(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return m(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bL(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!bL(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(oN(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(kL(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(kL(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function kL(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function bL(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function wL(e){return _L.apply(this,arguments)}function _L(){return _L=Kn(Wn().mark((function e(t){var n,r=arguments;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",_N(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),_L.apply(this,arguments)}var xL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,SL=/^https?/;function EL(){return(EL=Kn(Wn().mark((function e(t){var n,r,i,a,o;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,wL(t);case 4:n=e.sent,r=n.authorizedDomains,i=I(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!TL(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:aN(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function TL(e){var t=dN(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!SL.test(r))return!1;if(xL.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var IL=new yN(3e4,6e4);function CL(){var e=QO().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=f(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var AL=null;function NL(e){return AL=AL||function(e){return new Promise((function(t,n){var r,i,a;function o(){CL(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){CL(),n(oN(e,"network-request-failed"))},timeout:IL.get()})}if(null===(i=null===(r=QO().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=QO().gapi)||void 0===a?void 0:a.load)){var s=TP("iframefcb");return QO()[s]=function(){gapi.load?o():n(oN(e,"network-request-failed"))},EP("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw AL=null,e}))}(e),AL}var PL=new yN(5e3,15e3),RL="__/auth/iframe",OL="emulator/auth/iframe",DL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function FL(e){var t=e.config;lN(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?mN(t,OL):"https://".concat(e.config.authDomain,"/").concat(RL),r={apiKey:t.apiKey,appName:e.name,v:Vi},i=LL.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Pr(r).slice(1))}function ML(e){return jL.apply(this,arguments)}function jL(){return jL=Kn(Wn().mark((function e(t){var n,r;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,NL(t);case 2:return n=e.sent,lN(r=QO().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:FL(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:DL,dontclear:!0},(function(e){return new Promise(function(){var n=Kn(Wn().mark((function n(r,i){var a,o,s;return Wn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){QO().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=oN(t,"network-request-failed"),o=QO().setTimeout((function(){i(a)}),PL.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),jL.apply(this,arguments)}var UL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},VL=function(){function e(t){d(this,e),this.window=t,this.associatedEvent=null}return m(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function qL(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",u=Object.assign(Object.assign({},UL),{width:r.toString(),height:i.toString(),top:a,left:o}),c=hr().toLowerCase();n&&(s=lP(c)?"_blank":n),uP(c)&&(t=t||"http://localhost",u.scrollbars="yes");var h=Object.entries(u).reduce((function(e,t){var n=l(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return vP(arguments.length>0&&void 0!==arguments[0]?arguments[0]:hr())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==s)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new VL(null);var f=window.open(t||"",s,h);lN(f,e,"popup-blocked");try{f.focus()}catch(d){}return new VL(f)}var BL="__/auth/handler",zL="emulator/auth/handler",WL=encodeURIComponent("fac");function HL(e,t,n,r,i,a){return KL.apply(this,arguments)}function KL(){return KL=Kn(Wn().mark((function e(t,n,r,i,a,o){var s,u,c,h,f,d,p,v,y,m,g,k,b;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(lN(t.config.authDomain,t,"auth-domain-config-required"),lN(t.config.apiKey,t,"invalid-api-key"),s={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:Vi,eventId:a},n instanceof kR)for(n.setDefaultLanguage(t.languageCode),s.providerId=n.providerId||"",Ir(n.getCustomParameters())||(s.customParameters=JSON.stringify(n.getCustomParameters())),u=0,c=Object.entries(o||{});u<c.length;u++)h=l(c[u],2),f=h[0],d=h[1],s[f]=d;for(n instanceof bR&&(p=n.getScopes().filter((function(e){return""!==e}))).length>0&&(s.scopes=p.join(",")),t.tenantId&&(s.tid=t.tenantId),v=s,y=0,m=Object.keys(v);y<m.length;y++)g=m[y],void 0===v[g]&&delete v[g];return e.next=10,t._getAppCheckToken();case 10:return k=e.sent,b=k?"#".concat(WL,"=").concat(encodeURIComponent(k)):"",e.abrupt("return","".concat(GL(t),"?").concat(Pr(v).slice(1)).concat(b));case 13:case"end":return e.stop()}}),e)}))),KL.apply(this,arguments)}function GL(e){var t=e.config;return t.emulator?mN(t,zL):"https://".concat(t.authDomain,"/").concat(BL)}var QL="webStorageSupport",$L=function(){function e(){d(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zO,this._completeRedirectFn=pL,this._overrideRedirectResult=rL}return m(e,[{key:"_openPopup",value:function(){var e=Kn(Wn().mark((function e(t,n,r,i){var a,o;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fN(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),e.next=3,HL(t,n,r,dN(),i);case 3:return o=e.sent,e.abrupt("return",qL(t,o,KO()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Kn(Wn().mark((function e(t,n,r,i){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,HL(t,n,r,dN(),i);case 4:return $O(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(fN(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Kn(Wn().mark((function e(t){var n,r;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ML(t);case 2:return n=e.sent,r=new gL(t),n.register("authEvent",(function(e){return lN(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(QL,{type:QL},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[QL];void 0!==i&&t(!!i),aN(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return EL.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return yP()||cP()||vP()}}]),e}(),YL=$L,JL=function(){function e(t){d(this,e),this.factorId=t}return m(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return hN("unexpected MultiFactorSessionType")}}}]),e}(),XL=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone")).credential=e,r}return m(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return _N(e,"POST","/v2/accounts/mfaEnrollment:finalize",wN(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return _N(e,"POST","/v2/accounts/mfaSignIn:finalize",wN(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(JL),ZL=function(){function e(){d(this,e)}return m(e,null,[{key:"assertion",value:function(e){return XL._fromCredential(e)}}]),e}();ZL.FACTOR_ID="phone";var eF=function(){function e(){d(this,e)}return m(e,null,[{key:"assertionForEnrollment",value:function(e,t){return tF._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return tF._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=Kn(Wn().mark((function e(t){var n,r;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return lN("undefined"!==typeof(n=t).auth,"internal-error"),e.next=4,i=n.auth,a={idToken:n.credential,totpEnrollmentInfo:{}},_N(i,"POST","/v2/accounts/mfaEnrollment:start",wN(i,a));case 4:return r=e.sent,e.abrupt("return",nF._fromStartTotpMfaEnrollmentResponse(r,n.auth));case 6:case"end":return e.stop()}var i,a}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();eF.FACTOR_ID="totp";var tF=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return m(n,[{key:"_finalizeEnroll",value:function(){var e=Kn(Wn().mark((function e(t,n,r){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return lN("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",LO(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=Kn(Wn().mark((function e(t,n){var r;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return lN(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",vD(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(JL),nF=function(){function e(t,n,r,i,a,o,s){d(this,e),this.sessionInfo=o,this.auth=s,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return m(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(rF(e)||rF(t))&&(r=!0),r&&(rF(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),rF(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function rF(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var iF="@firebase/auth",aF="0.23.2",oF=function(){function e(t){d(this,e),this.auth=t,this.internalListeners=new Map}return m(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Kn(Wn().mark((function e(t){var n;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){lN(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var sF;!function(e){var t;null===(t=sr())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function uF(){return window}sF="Browser",Oi(new Wr("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,s=o.apiKey,u=o.authDomain;lN(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});var c={apiKey:s,authDomain:u,clientPlatform:sF,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mP(sF)},l=new PP(r,i,a,c);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(nP);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Oi(new Wr("auth-internal",(function(e){return function(e){return new oF(e)}(RP(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Ki(iF,aF,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(sF)),Ki(iF,aF,"esm2017");var cF=2e3;function lF(e,t,n){return hF.apply(this,arguments)}function hF(){return hF=Kn(Wn().mark((function e(t,n,r){var i,a,o,s,u;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=uF(),o=a.BuildInfo,fN(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,mF(n.sessionId);case 4:return s=e.sent,u={},vP()?u.ibi=o.packageName:fP()?u.apn=o.packageName:aN(t,"operation-not-supported-in-this-environment"),o.displayName&&(u.appDisplayName=o.displayName),u.sessionId=s,e.abrupt("return",HL(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,u));case 10:case"end":return e.stop()}}),e)}))),hF.apply(this,arguments)}function fF(){return(fF=Kn(Wn().mark((function e(t){var n,r,i;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=uF(),r=n.BuildInfo,i={},vP()?i.iosBundleId=r.packageName:fP()?i.androidPackageName=r.packageName:aN(t,"operation-not-supported-in-this-environment"),e.next=5,wL(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dF(e){var t=uF().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hr();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function pF(e,t,n){return vF.apply(this,arguments)}function vF(){return vF=Kn(Wn().mark((function e(t,n,r){var i,a,o;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=uF(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var s=null;function u(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){s||(s=window.setTimeout((function(){i(oN(t,"redirect-cancelled-by-user"))}),cF))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(u),document.addEventListener("resume",c,!1),fP()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),s&&window.clearTimeout(s)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),vF.apply(this,arguments)}function yF(e){var t,n,r,i,a,o,s,u,c,l,h=uF();lN("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),lN("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),lN("function"===typeof(null===(a=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),lN("function"===typeof(null===(u=null===(s=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===s?void 0:s.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),lN("function"===typeof(null===(l=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function mF(e){return gF.apply(this,arguments)}function gF(){return(gF=Kn(Wn().mark((function e(t){var n,r,i;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=kF(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kF(e){if(fN(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var bF=20,wF=function(e){k(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return m(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),nf(b(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=Kn(Wn().mark((function e(){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(gL);function _F(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:IF(),postBody:null,tenantId:e.tenantId,error:oN(e,"no-auth-event")}}function xF(e,t){return CF()._set(AF(e),t)}function SF(e){return EF.apply(this,arguments)}function EF(){return(EF=Kn(Wn().mark((function e(t){var n;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,CF()._get(AF(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,CF()._remove(AF(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function TF(e,t){var n,r,i=function(e){var t=NF(e),n=t.link?decodeURIComponent(t.link):void 0,r=NF(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return NF(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=NF(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,s=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=s?oN(s):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function IF(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<bF;n++){var r=Math.floor(62*Math.random());e.push(t.charAt(r))}return e.join("")}function CF(){return nP(qO)}function AF(e){return aP("authEvent",e.config.apiKey,e.name)}function NF(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t=T(e.split("?"));t[0];return Rr(t.slice(1).join("?"))}var PF=function(){function e(){d(this,e),this._redirectPersistence=zO,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=pL,this._overrideRedirectResult=rL}return m(e,[{key:"_initialize",value:function(){var e=Kn(Wn().mark((function e(t){var n,r;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new wF(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){aN(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=Kn(Wn().mark((function e(t,n,r,i){var a,o,s,u;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yF(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),JD.clear(),e.next=10,this._originValidation(t);case 10:return o=_F(t,r,i),e.next=13,xF(t,o);case 13:return e.next=15,lF(t,o,n);case 15:return s=e.sent,e.next=18,dF(s);case 18:return u=e.sent,e.abrupt("return",pF(t,a,u));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return fF.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=uF(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(Kn(Wn().mark((function n(){return Wn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,SF(e);case 2:t.onEvent(OF());case 3:case"end":return n.stop()}}),n)}))),500),s=function(){var n=Kn(Wn().mark((function n(r){var i,a;return Wn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,SF(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=TF(i,r.url)),t.onEvent(a||OF());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,s);var u=i,c="".concat(a.packageName.toLowerCase(),"://");uF().handleOpenURL=function(){var e=Kn(Wn().mark((function e(t){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&s({url:t}),"function"===typeof u)try{u(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),RF=PF;function OF(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:oN("no-auth-event")}}var DF=1e3;function LF(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function FF(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hr();return!("file:"!==LF()&&"ionic:"!==LF()&&"capacitor:"!==LF()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function MF(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hr();return yr()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hr();return/Edge\/\d+/.test(e)}(e)}function jF(){try{var e=self.localStorage,t=KO();if(e)return e.setItem(t,"1"),e.removeItem(t),!MF()||gr()}catch(n){return UF()&&gr()}return!1}function UF(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function VF(){return("http:"===LF()||"https:"===LF()||pr()||FF())&&!(vr()||dr())&&jF()&&!UF()}function qF(){return FF()&&"undefined"!==typeof document}function BF(){return zF.apply(this,arguments)}function zF(){return(zF=Kn(Wn().mark((function e(){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(qF()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),DF);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var WF={LOCAL:"local",NONE:"none",SESSION:"session"},HF=lN,KF="persistence";function GF(e,t){HF(Object.values(WF).includes(t),e,"invalid-persistence-type"),vr()?HF(t!==WF.SESSION,e,"unsupported-persistence-type"):dr()?HF(t===WF.NONE,e,"unsupported-persistence-type"):UF()?HF(t===WF.NONE||t===WF.LOCAL&&gr(),e,"unsupported-persistence-type"):HF(t===WF.NONE||jF(),e,"unsupported-persistence-type")}function QF(e){return $F.apply(this,arguments)}function $F(){return($F=Kn(Wn().mark((function e(t){var n,r;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=YF(),r=aP(KF,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function YF(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var JF=lN,XF=function(){function e(){d(this,e),this.browserResolver=nP(YL),this.cordovaResolver=nP(RF),this.underlyingResolver=null,this._redirectPersistence=zO,this._completeRedirectFn=pL,this._overrideRedirectResult=rL}return m(e,[{key:"_initialize",value:function(){var e=Kn(Wn().mark((function e(t){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=Kn(Wn().mark((function e(t,n,r,i){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Kn(Wn().mark((function e(t,n,r,i){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return qF()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return JF(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=Kn(Wn().mark((function e(){var t;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,BF();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ZF(e){return e.unwrap()}function eM(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new aM(e,function(e,t){var n,r=zr(e),i=t;return lN(t.customData.operationType,r,"argument-error"),lN(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),OO._fromError(r,i)}(e,t));else if(r){var i=tM(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function tM(e){var t=(e instanceof kr?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof kr)&&"temporaryProof"in t&&"phoneNumber"in t)return LD.credentialFromResult(e);var n,r=t.providerId;if(!r||r===HA.PASSWORD)return null;switch(r){case HA.GOOGLE:n=xR;break;case HA.FACEBOOK:n=_R;break;case HA.GITHUB:n=SR;break;case HA.TWITTER:n=IR;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,s=t.pendingToken,u=t.nonce;return a||o||i||s?s?r.startsWith("saml.")?ER._create(r,s):cR._fromParams({providerId:r,signInMethod:r,pendingToken:s,idToken:i,accessToken:a}):new wR(r).credential({idToken:i,accessToken:a,rawNonce:u}):null}return e instanceof kr?n.credentialFromError(e):n.credentialFromResult(e)}function nM(e,t){return t.catch((function(t){throw t instanceof kr&&eM(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,tM(t)),additionalUserInfo:PO(e),user:oM.getOrCreate(r)}}))}function rM(e,t){return iM.apply(this,arguments)}function iM(){return(iM=Kn(Wn().mark((function e(t,n){var r;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return nM(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var aM=function(){function e(t,n){d(this,e),this.resolver=n,this.auth=function(e){return e.wrapped()}(t)}return m(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return nM(ZF(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),oM=function(){function e(t){d(this,e),this._delegate=t,this.multiFactor=function(e){var t=zr(e);return MO.has(t)||MO.set(t,FO._fromUser(t)),MO.get(t)}(t)}return m(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=Kn(Wn().mark((function e(t){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nM(this.auth,QR(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rM(this.auth,AD(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=Kn(Wn().mark((function e(t){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nM(this.auth,GD(this._delegate,t,XF)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=Kn(Wn().mark((function e(t){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,QF(RP(this.auth));case 2:return e.abrupt("return",lL(this._delegate,t,XF));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=Kn(Wn().mark((function e(t){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nM(this.auth,YR(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return rM(this.auth,function(e,t,n){return PD.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return nM(this.auth,function(e,t,n){return KD.apply(this,arguments)}(this._delegate,e,XF))}},{key:"reauthenticateWithRedirect",value:function(){var e=Kn(Wn().mark((function e(t){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,QF(RP(this.auth));case 2:return e.abrupt("return",uL(this._delegate,t,XF));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return gO.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=Kn(Wn().mark((function e(t){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,FR(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return xO(zr(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return xO(zr(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return DD.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return _O.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return kO.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();oM.USER_MAP=new WeakMap;var sM=lN,uM=function(){function e(t,n){if(d(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;sM(r,"invalid-api-key",{appName:t.name}),sM(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?XF:void 0;this._delegate=n.initialize({options:{persistence:lM(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(ZA),this.linkUnderlyingAuth()}return m(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?oM.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){DP(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return sO.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return uO(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return oO.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nM(this._delegate,hO(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return mO.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=mR.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=Kn(Wn().mark((function e(){var t;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sM(VF(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,fL(this._delegate,XF);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",nM(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){RP(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=cM(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=cM(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return dO.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return aO.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=Kn(Wn().mark((function e(t){var n,r;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:GF(this._delegate,t),e.t0=t,e.next=e.t0===WF.SESSION?4:e.t0===WF.LOCAL?6:e.t0===WF.NONE?11:13;break;case 4:return n=zO,e.abrupt("break",14);case 6:return e.next=8,nP(dD)._isAvailable();case 8:return r=e.sent,n=r?dD:qO,e.abrupt("break",14);case 11:return n=iP,e.abrupt("break",14);case 13:return e.abrupt("return",aN("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return nM(this._delegate,function(e){return RR.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return nM(this._delegate,KR(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return nM(this._delegate,function(e,t){return eO.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return nM(this._delegate,function(e,t,n){return KR(zr(e),gR.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return nM(this._delegate,function(e,t,n){return pO.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return rM(this._delegate,function(e,t,n){return CD.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=Kn(Wn().mark((function e(t){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sM(VF(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",nM(this._delegate,WD(this._delegate,t,XF)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=Kn(Wn().mark((function e(t){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sM(VF(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,QF(this._delegate);case 3:return e.abrupt("return",oL(this._delegate,t,XF));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return lO.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function cM(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&oM.getOrCreate(e))},error:t,complete:n}}function lM(e,t){var n=function(e,t){var n=YF();if(!n)return[];var r=aP(KF,e,t);switch(n.getItem(r)){case WF.NONE:return[iP];case WF.LOCAL:return[dD,zO];case WF.SESSION:return[zO];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(dD)||n.push(dD),"undefined"!==typeof window)for(var r=0,i=[qO,zO];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(iP)||n.push(iP),n}uM.Persistence=WF;var hM=function(){function e(){d(this,e),this.providerId="phone",this._delegate=new LD(ZF(ga.auth()))}return m(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return LD.credential(e,t)}}]),e}();hM.PHONE_SIGN_IN_METHOD=LD.PHONE_SIGN_IN_METHOD,hM.PROVIDER_ID=LD.PROVIDER_ID;var fM=lN,dM=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ga.app();d(this,e),fM(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new ED(t,n,i.auth()),this.type=this._delegate.type}return m(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new Wr("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new uM(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:KA,PASSWORD_RESET:GA,RECOVER_EMAIL:QA,REVERT_SECOND_FACTOR_ADDITION:$A,VERIFY_AND_CHANGE_EMAIL:YA,VERIFY_EMAIL:JA}},EmailAuthProvider:gR,FacebookAuthProvider:_R,GithubAuthProvider:SR,GoogleAuthProvider:xR,OAuthProvider:wR,SAMLAuthProvider:TR,PhoneAuthProvider:hM,PhoneMultiFactorGenerator:ZL,RecaptchaVerifier:dM,TwitterAuthProvider:IR,Auth:uM,AuthCredential:MP,Error:kr}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.4.2")}(ga);ga.initializeApp({apiKey:"AIzaSyDusTR62nXSXyjblgvFNIFGepxtzYxHVF8",authDomain:"kakoot-d06ff.firebaseapp.com",databaseURL:"https://kakoot-d06ff-default-rtdb.firebaseio.com",projectId:"kakoot-d06ff",storageBucket:"kakoot-d06ff.appspot.com",messagingSenderId:"594818848188",appId:"1:594818848188:web:331461933f89b9bcb707b9"});var pM=ga.database(),vM=ga.database().ref(),yM=vM.child("users"),mM=vM.child("games"),gM=rh(pM,".info/connected");ga.firestore();function kM(){return(kM=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yM.child(t).child("templates").child(n.id).set(n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bM(){return bM=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yM.once("value",(function(e){var r=e.val();Object.keys(r).forEach((function(e){e==t&&yM.child(t).child("templates").once("value",(function(e){var t=e.val(),r=[];t&&Object.values(t).forEach((function(e){var t=null!==e&&void 0!==e?e:{},n={allQuestions:t.allQuestions,id:t.id,questionTime:t.questionTime,templateName:t.templateName};r.push(n)})),n(r)}),(function(e){console.error("Error retrieving data ",e)}))}))}));case 2:case"end":return e.stop()}}),e)}))),bM.apply(this,arguments)}var wM="".concat("/Cacarrot");function _M(e){var t=e.answerSign,n=e.answerRef,r=e.characterLimit,i=e.handleInput,a=e.onQuestionChange,o=e.answer,s=e.checkboxNumber,u=e.checkboxes,c=e.handleCheckboxChange;return(0,Un.jsxs)("span",{id:"answer-".concat(t),className:"answer",children:[(0,Un.jsx)("div",{ref:n,className:"my-input editable-div",contentEditable:!0,onInput:function(){i(n.current,r),a("answer".concat(t),n.current.innerText)},children:o}),(0,Un.jsx)("input",{checked:u[s].checked,className:"answer-checkbox",type:"checkbox",onChange:function(e){c(s),a("correctAnswer",t)}})]})}function xM(e){var t=e.question,n=e.questionNumber,r=e.setQuestions,a=(0,i.useRef)(null),o=(0,i.useRef)(null),s=(0,i.useRef)(null),u=(0,i.useRef)(null),c=(0,i.useRef)(null),h=l((0,i.useState)([{id:0,checked:!1},{id:1,checked:!1},{id:2,checked:!1},{id:3,checked:!1}]),2),f=h[0],d=h[1];function p(e,t){r((function(r){return r.forEach((function(r){return r.questionNumber===n&&("question"===e?r.question=t:"answerA"===e?r.answerA=t:"answerB"===e?r.answerB=t:"answerC"===e?r.answerC=t:"answerD"===e?r.answerD=t:"correctAnswer"===e&&(r.correctAnswer=t)),r})),r}))}(0,i.useEffect)((function(){var e=f.map((function(e){return 0===e.id&&"A"===t.correctAnswer||1===e.id&&"B"===t.correctAnswer||2===e.id&&"C"===t.correctAnswer||3===e.id&&"D"===t.correctAnswer?ri(ri({},e),{},{checked:!0}):ri(ri({},e),{},{checked:!1})}));d(e)}),[n]);var v=function(e,t){if(e.innerHTML){var n=e.innerHTML;n.length>t&&(e.innerHTML=n.slice(0,t))}};function y(e){if(f[e].checked){var t=f.map((function(t){return t.id===e?ri(ri({},t),{},{checked:!1}):ri({},t)}));d(t)}else{var n=f.map((function(t){return t.id===e?ri(ri({},t),{},{checked:!0}):ri(ri({},t),{},{checked:!1})}));d(n)}}var m=[{answerSign:"A",answerRef:o,answer:t.answerA,checkboxNumber:0},{answerSign:"B",answerRef:s,answer:t.answerB,checkboxNumber:1},{answerSign:"C",answerRef:u,answer:t.answerC,checkboxNumber:2},{answerSign:"D",answerRef:c,answer:t.answerD,checkboxNumber:3}];return(0,Un.jsxs)("section",{className:"question-template",children:[(0,Un.jsx)("div",{ref:a,className:"my-input question-input",placeholder:"Write your question here",contentEditable:!0,onInput:function(){v(a.current,40),p("question",a.current.innerText)},children:t.question}),(0,Un.jsx)("img",{className:"question-image",src:"".concat(wM,"/landscape-image.jpg"),alt:"Beautiful"}),(0,Un.jsx)("div",{className:"answers-placeholder",children:m.map((function(e){return(0,Un.jsx)(_M,{answerSign:e.answerSign,answerRef:e.answerRef,answer:e.answer,checkboxNumber:e.checkboxNumber,characterLimit:70,handleInput:v,onQuestionChange:p,checkboxes:f,handleCheckboxChange:y})}))})]})}function SM(e){var t=e.value,n=e.setValue,r=e.placeholder,a=e.characterLimit,o=e.visibleWarning,s=(0,i.useRef)(null),u=l((0,i.useState)(""),2),c=u[0],h=u[1];return(0,Un.jsxs)(Un.Fragment,{children:[(0,Un.jsx)("input",{ref:s,className:"my-input",style:{margin:"1rem",fontSize:"1.5rem"},placeholder:r,value:t,onChange:function(e){!function(e){var t=e.current.value;t.length>a?(e.current.value=t.slice(0,a),o&&h("Template name can only have ".concat(a," characters length."))):h("")}(s),n(e.target.value)}}),(0,Un.jsx)("div",{className:"error",style:{padding:"10px"},children:c})]})}var EM=function(){var e=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n((function(e){return e.length>1?e.filter((function(n){return n!==e[t-1]})):e}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),TM=function(){var e=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n((function(e){return[].concat(f(e),[t])}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function IM(e){var t=e.toggleModal,n=e.questionTime,r=e.setQuestionTime,i=e.timesForAnswer;return(0,Un.jsxs)("div",{className:"bar right-bar",children:[(0,Un.jsx)("button",{onClick:t,children:"Save template"}),(0,Un.jsx)("label",{children:"Time for answer"}),(0,Un.jsx)("select",{value:n,onChange:function(e){r(parseInt(e.target.value))},children:i.map((function(e){return(0,Un.jsxs)("option",{value:e,children:[e," sec"]},e)}))})]})}function CM(e){var t=e.slideNumber,n=e.questions,r=(e.setQuestions,e.choosenQuestion),a=e.setChoosenQuestion,o=e.removeSlide;(0,i.useEffect)((function(){n[t-1].questionNumber=t}),[t]);var s=t===r?{background:"#b64926"}:{};return(0,Un.jsxs)("div",{className:"slide",style:s,children:[(0,Un.jsx)("div",{style:{position:"relative",left:"25%"},children:t}),(0,Un.jsx)("img",{className:"small-image",src:"".concat(wM,"/bin-image.png"),alt:"Bin",onClick:function(){o()}}),(0,Un.jsx)("img",{className:"slide-image",src:"".concat(wM,"/question-image.png"),alt:"Slide",onClick:function(){a(t)}})]})}function AM(e){var t=e.questions,n=e.setQuestions,r=e.choosenQuestion,i=e.setChoosenQuestion,a=e.deleteQuestion;return(0,Un.jsxs)("div",{className:"bar question-bar",children:[t&&t.map((function(e,o){return(0,Un.jsx)(CM,{slideNumber:o+1,questions:t,setQuestions:n,choosenQuestion:r,setChoosenQuestion:i,removeSlide:function(){a(o+1)}},e.questionNumber)})),(0,Un.jsx)("button",{onClick:function(){TM({questionNumber:t.length+1,question:"",answerA:"",answerB:"",answerC:"",answerD:"",correctAnswer:""},n)},children:"Add question"})]})}var NM=function(){var e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()};function PM(e,t,n,r){var i=localStorage.getItem("id"),a=[];e.forEach((function(e){(function(e){if(e.answerA&&e.answerB&&e.answerC&&e.answerD&&e.question&&e.correctAnswer)return!0;return!1})(e)&&a.push(e)}));var o={id:r||NM(),templateName:t,allQuestions:a,questionTime:n};return!(a.length<1)&&(function(e,t){kM.apply(this,arguments)}(i,o),!0)}function RM(e){var t=e.time,n=e.bonusStyling;return(0,Un.jsx)("div",{className:"timer",style:n,children:(0,Un.jsx)("span",{style:{fontSize:"2.5em"},children:t})})}function OM(e){return DM.apply(this,arguments)}function DM(){return DM=Kn(Wn().mark((function e(t){var n;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=mM.orderByChild("name").equalTo(t.gamecode),e.next=3,n.once("value",(function(e){e.exists()&&mM.child(t.gamecode).remove(),mM.child(t.gamecode).set(t)}),(function(e){console.error("Error checking record existence: ",e)}));case 3:case"end":return e.stop()}}),e)}))),DM.apply(this,arguments)}function LM(){return(LM=Kn(Wn().mark((function e(t,n,r){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mM.once("value",(function(e){var i=e.val();Object.keys(i).forEach((function(e){var a=i[e];t==e&&"waiting"==a.started&&((a.players?Object.keys(a.players).length:0)<10?n(!0):r("Maximum amount of players reached!"))})),r("Wrong code!")}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function FM(){return(FM=Kn(Wn().mark((function e(t,n,r,i){var a;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!0,e.next=3,mM.child(t).child("players").once("value",(function(e){var t=e.val();t&&Object.values(t).forEach((function(e){e.name==n&&(a=!1)}))}));case 3:a?r(!0):i("There is player with that name");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function MM(e,t){return jM.apply(this,arguments)}function jM(){return jM=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:mM.child(t).on("value",(function(e){var t=e.val();if(t){var r=null!==t&&void 0!==t?t:{},i=r.gameTemplate,a=r.gamecode,o=r.players,s=r.started,u=r.currentQuestion,c=r.gamePhase,l=r.time,h=r.startingTime,f=r.hostConnection,d=r.hostId,p=r.winners,v=[];o&&Object.values(o).forEach((function(e){var t=null!==e&&void 0!==e?e:{},n=t.id,r=t.name,i=t.points,a=t.answers,o=t.shownComponent;if(a){var s={id:n,name:r,points:i,answers:a,shownComponent:o};v.push(s)}else{var u={id:n,name:r,points:i,answers:[],shownComponent:"answers"};null===v||void 0===v||v.push(u)}})),n({gameTemplate:i,gamecode:a,players:v,started:s,currentQuestion:u,gamePhase:c,time:l,startingTime:h,hostConnection:f,hostId:d,winners:p})}}));case 1:case"end":return e.stop()}}),e)}))),jM.apply(this,arguments)}function UM(){return(UM=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:mM.child(t).child("started").on("value",(function(e){var t=e.val();n(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function VM(){return(VM=Kn(Wn().mark((function e(t,n,r){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:mM.child(t).child("players").once("value",(function(e){e.val().forEach((function(e){e.name==n&&r(e)}))}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qM(e,t,n){return BM.apply(this,arguments)}function BM(){return(BM=Kn(Wn().mark((function e(t,n,r){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:mM.child(t).child("players").child("".concat(n)).child("shownComponent").on("value",(function(e){var t=e.val();t&&r(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zM(e,t,n){return WM.apply(this,arguments)}function WM(){return(WM=Kn(Wn().mark((function e(t,n,r){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:mM.child(t).child("players").child("".concat(n)).on("value",(function(e){var t=e.val();t&&r(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function HM(){return(HM=Kn(Wn().mark((function e(t,n){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:mM.child(t).child("startingTime").on("value",(function(e){var t=e.val();n((function(e){return ri(ri({},e),{},{startingTime:t})}))}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var KM=function(){var e=Kn(Wn().mark((function e(t,n,r,i){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("game"!=r){e.next=5;break}return e.next=3,mM.child(t).set(n);case 3:case 8:case 13:case 18:case 23:case 28:case 33:case 38:case 43:case 48:case 53:case 58:case 63:e.next=68;break;case 5:if("currentQuestion"!=r){e.next=10;break}return e.next=8,mM.child(t).child("currentQuestion").set(n);case 10:if("time"!=r){e.next=15;break}return e.next=13,mM.child(t).child("time").set(n);case 15:if("questionDone"!=r){e.next=20;break}return e.next=18,mM.child(t).child("currentQuestion").set(n);case 20:if("points"!=r){e.next=25;break}return e.next=23,mM.child(t).child("players").child("".concat(i)).child("points").set(n);case 25:if("game"!=r){e.next=30;break}return e.next=28,mM.child(t).set(n);case 30:if("shownComponent"!=r){e.next=35;break}return e.next=33,mM.child(t).child("players").child("".concat(i)).child("shownComponent").set(n);case 35:if("players"!=r){e.next=40;break}return e.next=38,mM.child(t).child("players").set(n);case 40:if("gamePhase"!=r){e.next=45;break}return e.next=43,mM.child(t).child("gamePhase").set(n);case 45:if("lastAnswer"!=r){e.next=50;break}return e.next=48,mM.child(t).child("players").child("".concat(i)).child("lastAnswer").set(n);case 50:if("gameStarted"!=r){e.next=55;break}return e.next=53,mM.child(t).child("started").set(n);case 55:if("startingTime"!=r){e.next=60;break}return e.next=58,mM.child(t).child("startingTime").set(n);case 60:if("winners"!=r){e.next=65;break}return e.next=63,mM.child(t).child("winners").set(n);case 65:if("hostShowing"!=r){e.next=68;break}return e.next=68,mM.child(t).child("hostShowing").set(n);case 68:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),GM=function(){var e=Kn(Wn().mark((function e(t,n,r,i){var a,o;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,QM(i,t);case 2:a=e.sent,o=a.val(),"players"==i?r((function(e){return ri(ri({},e),{},{players:o})})):"time"==i?r((function(e){return ri(ri({},e),{},{time:o})})):"startingTime"==i?r((function(e){return ri(ri({},e),{},{startingTime:o})})):"hostConnection"==i?r((function(e){return ri(ri({},e),{},{hostConnection:o})})):"winners"==i?r((function(e){return ri(ri({},e),{},{winners:o})})):"gamePhase"==i?r((function(e){return ri(ri({},e),{},{gamePhase:o})})):"currentQuestion"==i&&r((function(e){return ri(ri({},e),{},{currentQuestion:o})}));case 5:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}();function QM(e,t,n){return $M.apply(this,arguments)}function $M(){return($M=Kn(Wn().mark((function e(t,n,r){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("currentQuestion"!=t){e.next=6;break}return e.next=3,mM.child(n).child("currentQuestion").once("value");case 3:case 9:case 15:case 21:case 27:case 33:case 39:case 45:case 51:case 57:case 63:return e.abrupt("return",e.sent);case 6:if("time"!=t){e.next=12;break}return e.next=9,mM.child(n).child("time").once("value");case 12:if("questionDone"!=t){e.next=18;break}return e.next=15,mM.child(n).child("currentQuestion").once("value");case 18:if("points"!=t){e.next=24;break}return e.next=21,mM.child(n).child("players").child("".concat(r)).child("points").once("value");case 24:if("shownComponent"!=t){e.next=30;break}return e.next=27,mM.child(n).child("players").child("".concat(r)).child("shownComponent").once("value");case 30:if("game"!=t){e.next=36;break}return e.next=33,mM.child(n).once("value");case 36:if("players"!=t){e.next=42;break}return e.next=39,mM.child(n).child("players").once("value");case 42:if("gamePhase"!=t){e.next=48;break}return e.next=45,mM.child(n).child("gamePhase").once("value");case 48:if("startingTime"!=t){e.next=54;break}return e.next=51,mM.child(n).child("startingTime").once("value");case 54:if("winners"!=t){e.next=60;break}return e.next=57,mM.child(n).child("winners").once("value");case 60:if("hostConnection"!=t){e.next=64;break}return e.next=63,mM.child("".concat(n,"/hostConnection")).once("value");case 64:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var YM=function(){var e=Kn(Wn().mark((function e(t,n,r,i,a){var o,s;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,QM(i,t,a);case 2:o=e.sent,s=o.val(),r("number"==typeof n?"number"==typeof s?s:n:s||n);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a){return e.apply(this,arguments)}}();function JM(e,t,n){return XM.apply(this,arguments)}function XM(){return(XM=Kn(Wn().mark((function e(t,n,r){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:mM.child(t).child("players").child("".concat(n)).child("points").on("value",(function(e){var t=e.val();r(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ZM(e){var t=e.currentQuestion,n=e.time,r=e.gamecode,a=e.game,o=e.setGame,s=l((0,i.useState)(!1),2),u=s[0],c=s[1];return(0,i.useEffect)((function(){GM(r,3,o,"startingTime")}),[]),(0,i.useEffect)((function(){0==a.startingTime&&c(!0)}),[a.startingTime]),(0,Un.jsxs)(Un.Fragment,{children:[!u&&(0,Un.jsx)(Un.Fragment,{children:(0,Un.jsxs)("div",{style:{position:"absolute",top:"45%"},children:[(0,Un.jsx)("div",{className:"my-input shown-question",children:t.question}),(0,Un.jsx)(RM,{time:a.startingTime,bonusStyling:{display:"none"}})]})}),u&&(0,Un.jsxs)(Un.Fragment,{children:[(0,Un.jsx)(RM,{time:n,bonusStyling:{left:"90%"}}),(0,Un.jsx)("div",{className:"my-input shown-question",children:t.question}),(0,Un.jsx)("img",{className:"question-image",src:"".concat(wM,"/landscape-image.jpg"),style:{width:"40%"}}),(0,Un.jsxs)("div",{className:"answers-placeholder",style:{width:"80%",marginBottom:"2em"},children:[(0,Un.jsx)("span",{id:"answer-A",className:"answer",children:t.answerA}),(0,Un.jsx)("span",{id:"answer-B",className:"answer",children:t.answerB}),(0,Un.jsx)("span",{id:"answer-C",className:"answer",children:t.answerC}),(0,Un.jsx)("span",{id:"answer-D",className:"answer",children:t.answerD})]})]})]})}function ej(e){var t=e.player;return(0,Un.jsxs)("div",{className:"player-stats",children:[(0,Un.jsx)("span",{children:t.name}),(0,Un.jsx)("span",{children:t.points})]})}function tj(e){var t=e.time,n=e.players,r=e.setPlayers,a=e.gamecode;return(0,i.useEffect)((function(){r(n.sort((function(e,t){return t.points-e.points})))}),[]),(0,i.useEffect)((function(){t<1&&KM(a,3,"startingTime")}),[t]),(0,Un.jsxs)(Un.Fragment,{children:[(0,Un.jsx)(RM,{time:t,bonusStyling:{top:"1%"}}),(0,Un.jsxs)("div",{className:"player-stats-list column-shaped-container",children:[(0,Un.jsxs)("p",{style:{display:"flex",justifyContent:"space-between",width:"80%"},children:[(0,Un.jsx)("span",{style:{backgroundColor:"#fafafa",borderRadius:"30px",padding:"10px"},children:"Name"}),(0,Un.jsx)("span",{style:{backgroundColor:"#fafafa",borderRadius:"30px",padding:"10px"},children:"Score"})]}),n.map((function(e){return(0,Un.jsx)(ej,{player:e},e.id)}))]})]})}function nj(e){var t=e.name,n=e.points,r=e.statsColor,i=e.winImage;return(0,Un.jsxs)("div",{className:"player-stats",style:{backgroundColor:r},children:[(0,Un.jsxs)("div",{className:"img-name-container",style:{height:"100%"},children:[(0,Un.jsx)("img",{className:"winners-image",src:"".concat(wM,"/").concat(i)}),(0,Un.jsx)("span",{children:t})]}),(0,Un.jsxs)("span",{style:{marginLeft:"2rem"},children:["Score: ",n]})]})}function rj(e){var t,n=e.winners,r=we();return n&&(t=[{name:n[0].name,points:n[0].points,statsColor:"#ffd700",winImage:"first-place.png"},{name:n[1]?n[1].name:null,points:n[1]?n[1].points:0,statsColor:"#C0C0C0",winImage:"second-place.jpg"},{name:n[2]?n[2].name:null,points:n[2]?n[2].points:0,statsColor:"#CD7F32",winImage:"third-place.jpg"}]),(0,Un.jsx)(Un.Fragment,{children:(0,Un.jsxs)("div",{className:"player-stats-list column-shaped-container",style:{margin:"10% 0 0 0",maxHeight:"40%",overflow:"visible"},children:[(0,Un.jsx)("h1",{children:"Winners"}),t&&t.map((function(e){return e.name&&(0,Un.jsx)(nj,{name:e.name,points:e.points,statsColor:e.statsColor,winImage:e.winImage},e.name)})),(0,Un.jsx)("button",{style:{marginTop:"10%"},onClick:function(){r("/")},children:"Go back to menu"})]})})}var ij=function(){return(0,i.useEffect)((function(){var e=function(e){e.preventDefault(),e.returnValue=""};return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}),[]),null};function aj(){FH.emit("start-game")}var oj=function(){var e=Kn(Wn().mark((function e(t,n){var r,i,a,o,s,u,c,l,h,f,d,p,v,y,m,g;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mM.child(t.gamecode).once("value");case 2:if(r=e.sent,i=r.val(),a={gameTemplate:t.template,players:[],gamecode:t.gamecode,started:"waiting",currentQuestion:0,time:t.template.questionTime,gamePhase:1,startingTime:3,winners:[],hostConnection:!0,hostId:FH.id},!i){e.next=12;break}s=(o=null!==i&&void 0!==i?i:{}).gameTemplate,u=o.gamecode,c=o.players,l=o.started,h=o.currentQuestion,f=o.time,d=o.gamePhase,p=o.startingTime,v=o.winners,y=o.hostConnection,m=o.hostId,g=c?Object.values(c).map((function(e){var t=null!==e&&void 0!==e?e:{};return{id:t.id,name:t.name,points:t.points,answers:t.answers,shownComponent:t.shownComponent}})):[],n(a={gameTemplate:s,gamecode:u,players:g,started:l,currentQuestion:h,time:f,gamePhase:d,startingTime:p,winners:v,hostConnection:y,hostId:m}),e.next=14;break;case 12:return e.next=14,OM(a);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function sj(){var e=we();return(0,Un.jsxs)(Un.Fragment,{children:[(0,Un.jsx)("h1",{children:"Game has been abandoned"}),(0,Un.jsx)("button",{onClick:function(){return e("/")},children:"Return back to menu"})]})}function uj(e){var t=e.time,n=e.setTime,r=e.bonusStyling;return(0,i.useEffect)((function(){var e=setInterval((function(){t>0&&(n((function(e){return e-1})),localStorage.setItem("time","".concat(t-1)))}),1e3);return function(){return clearInterval(e)}}),[t]),(0,Un.jsx)("div",{className:"timer",style:r,children:(0,Un.jsx)("span",{style:{fontSize:"2.5em"},children:t})})}function cj(e){var t=e.message,n=e.time,r=e.setTime,a=e.possibleLeave,o=e.eventMessage,s=we(),u=l((0,i.useState)(!0),2),c=u[0],h=u[1];return(0,i.useEffect)((function(){localStorage.setItem("time","".concat(n)),n<1&&c&&h(!1)}),[n]),(0,Un.jsx)(Un.Fragment,{children:c?(0,Un.jsxs)(Un.Fragment,{children:[(0,Un.jsxs)("div",{children:[(0,Un.jsxs)("div",{className:"loader",children:[(0,Un.jsx)("span",{className:"loader__element"}),(0,Un.jsx)("span",{className:"loader__element"}),(0,Un.jsx)("span",{className:"loader__element"})]}),(0,Un.jsx)("h1",{children:t}),o&&(0,Un.jsx)("h2",{className:"event-message",children:o}),(0,Un.jsx)(uj,{time:n,setTime:r,bonusStyling:{display:"none"}})]}),a&&(0,Un.jsx)("button",{onClick:function(){s("/")},children:"Leave game"})]}):(0,Un.jsx)(sj,{})})}function lj(e){var t=e.gameState,n=e.setGame,r=e.setShownComponent,a=e.player,o=l((0,i.useState)({}),2),s=o[0],u=o[1];(0,i.useEffect)((function(){!function(e,t){HM.apply(this,arguments)}(t.gamecode,n)}),[]);var c=function(e){return Kn(Wn().mark((function n(){var i,o;return Wn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=t.gameTemplate.questionTime-t.time,o={choosenAnswer:e,sendingTime:i,questionNumber:t.currentQuestion,pointsFor:0},FH.emit("send-answer",{playerName:a.name,answer:o,bonuses:a.activeBonuses}),setTimeout((function(){r("between")}),350);case 4:case"end":return n.stop()}}),n)})))};return(0,i.useEffect)((function(){var e;(t.startingTime||0==t.startingTime)&&(e=3-t.startingTime,u({transform:"rotate(".concat(90*e,"deg)")}))}),[t.startingTime]),(0,Un.jsxs)(Un.Fragment,{children:[t.startingTime>0&&(0,Un.jsxs)("div",{className:"circle",style:{position:"absolute",top:"45%"},children:[(0,Un.jsx)("div",{className:"rolling-square",style:s}),(0,Un.jsx)(RM,{time:t.startingTime,bonusStyling:{marginTop:"0",position:"absolute"}})]}),0==t.startingTime&&(0,Un.jsxs)(Un.Fragment,{children:[(0,Un.jsx)(RM,{time:t.time,bonusStyling:{top:"0%"}}),(0,Un.jsxs)("div",{className:"grid-container",children:[(0,Un.jsx)("div",{id:"answer-A",onClick:c("A")}),(0,Un.jsx)("div",{id:"answer-B",onClick:c("B")}),(0,Un.jsx)("div",{id:"answer-C",onClick:c("C")}),(0,Un.jsx)("div",{id:"answer-D",onClick:c("D")})]})]})]})}function hj(e){var t=e.ability,n=e.playerPoints,r=e.gameState,a=e.player,o=e.setComponentState,s=e.setLastUsedAbility,u=(0,i.useRef)(null),c="EraseEnemyPoints"==t.name,h=r.players.filter((function(e){return e.name!=a.name})),f=!!(n<500||c&&0==h.length),d=l((0,i.useState)(h.length>0?h[0].name:""),2),p=d[0],v=d[1];return(0,Un.jsxs)("div",{ref:u,className:"ability-card",style:{},"aria-disabled":f,children:[(0,Un.jsx)("div",{className:"ability-card-name",children:t.name}),(0,Un.jsx)("div",{className:"ability-card-image",children:(0,Un.jsx)("img",{src:"".concat(wM,"/").concat(t.representingImage),style:{height:"100%",width:"100%"}})}),(0,Un.jsx)("div",{className:"ability-card-text",children:t.explanation}),(0,Un.jsx)("div",{className:"ability-card-options",children:c&&(0,Un.jsx)("select",{value:p,onChange:function(e){return v(e.target.value)},children:h.map((function(e,t){return(0,Un.jsx)("option",{value:e.name,children:e.name},t)}))})}),(0,Un.jsx)("div",{className:"ability-card-submit",children:(0,Un.jsx)("button",{disabled:f,onClick:function(){c?p&&t.onChoose(a.name,p):t.onChoose(a.name),s("You have used ".concat(t.name,"!")),o("waitingForOthers")},children:"Use ability"})})]})}var fj=[{name:"DoubleNext",cost:500,onChoose:function(e){FH.emit("used-bonus",{playerName:e,bonusName:"DoubleNext"})},representingImage:"2x-image.jpg",explanation:"You sacrifice your 500 points to double your next answer points"},{name:"EraseEnemyPoints",cost:500,onChoose:function(e,t){FH.emit("used-bonus",{playerName:e,bonusName:"EraseEnemyPoints",enemyName:t})},representingImage:"thief-stealing.jpg",explanation:"You sacrifice your 500 points to erase 700 points from choosen player"}];function dj(e){var t=e.gameState,n=e.player,r=e.setComponentState,i=e.setLastUsedAbility;return(0,Un.jsxs)(Un.Fragment,{children:[(0,Un.jsx)("div",{className:"abilities-placeholder",children:fj.map((function(e,a){return(0,Un.jsx)(hj,{ability:e,playerPoints:n.points,gameState:t,player:n,setComponentState:r,setLastUsedAbility:i},a)}))}),(0,Un.jsx)("button",{style:{marginTop:"2rem"},onClick:function(){return r("waitingForOthers")},children:"Skip using abilities"})]})}function pj(e){var t=e.gameState,n=e.lastQuestionPoints,r=e.player,a=l((0,i.useState)("showingAnswer"),2),o=a[0],s=a[1],u=l((0,i.useState)(""),2),c=u[0],h=u[1];(0,i.useEffect)((function(){h(""),t.gamePhase%2==0&&t.gamePhase<2*t.gameTemplate.allQuestions.length-1?s("choosingAbility"):s("showingAnswer")}),[t.gamePhase]);var f=0!=n?"good-answer.png":"wrong-answer.png",d=0!=n?"Good answer!":"Wrong answer!";return(0,Un.jsxs)(Un.Fragment,{children:["showingAnswer"==o&&(0,Un.jsx)(Un.Fragment,{children:(0,Un.jsxs)("div",{className:"answer-result-container",style:{position:"relative",top:"20%"},children:[(0,Un.jsx)("img",{className:"circle-image",src:"".concat(wM,"/").concat(f),alt:"Answer",style:{width:"50%",aspectRatio:1}}),(0,Un.jsx)("h2",{children:d}),(0,Un.jsxs)("h4",{children:["+ ",n," points"]})]})}),"choosingAbility"==o&&(0,Un.jsx)(dj,{gameState:t,player:r,setComponentState:s,setLastUsedAbility:h}),"waitingForOthers"==o&&(0,Un.jsx)(cj,{message:"Wait for other players",setTime:function(){},possibleLeave:!1,eventMessage:c})]})}function vj(e){var t=e.player,n=e.points;return(0,Un.jsxs)("div",{className:"navbar",style:{zIndex:"20",position:"fixed",top:"0"},children:[(0,Un.jsx)("h3",{style:{margin:"0 30px"},children:t.name}),(0,Un.jsxs)("h3",{style:{margin:"0 30px"},children:["Points: ",n]})]})}function yj(e){var t=e.player,n=e.image;return(0,Un.jsxs)("div",{className:"player-container",children:[(0,Un.jsx)("div",{className:"player",style:{backgroundImage:n}}),(0,Un.jsx)("span",{children:t.name})]},t.id)}var mj=i.createContext({claims:[],update:function(){}});function gj(e){var t=l((0,i.useState)(!1),2),n=t[0],r=t[1],a=(0,i.useContext)(mj).claims;return(0,i.useEffect)((function(){if(e.role){var t=a.findIndex((function(t){return"role"===t.name&&t.value===e.role}));r(t>-1)}else r(a.length>0)}),[a,e.role]),(0,Un.jsx)(Un.Fragment,{children:n?e.isAuthorized:e.notAuthorized})}function kj(){var e=we(),t=l((0,i.useState)(""),2),n=t[0],r=t[1],a=l((0,i.useState)(!1),2),o=a[0],s=a[1],u=l((0,i.useState)(""),2),c=u[0],h=u[1],f=l((0,i.useState)(window.innerWidth),2),d=f[0],p=f[1];(0,i.useEffect)((function(){window.addEventListener("resize",(function(){p(window.innerWidth)}))}),[]),(0,i.useEffect)((function(){p(window.innerWidth)}),[window.innerWidth]);var v=d>550;function y(){!function(e,t,n){LM.apply(this,arguments)}(n,s,h)}return(0,i.useEffect)((function(){o&&e("/input-name/".concat(n),{state:n})}),[o]),(0,Un.jsxs)(Un.Fragment,{children:[v&&(0,Un.jsxs)(Un.Fragment,{children:[(0,Un.jsx)("h1",{children:"Cacarrot"}),(0,Un.jsx)("div",{className:"paragraph",children:(0,Un.jsx)(gj,{isAuthorized:(0,Un.jsx)("button",{className:"my-button",onClick:function(){e("create")},children:"Start your own Cacarrot"}),notAuthorized:(0,Un.jsxs)(Un.Fragment,{children:[(0,Un.jsx)("div",{children:(0,Un.jsx)("button",{className:"my-button",onClick:function(){localStorage.setItem("id","examples"),e("create")},children:"Start with example templates"})}),(0,Un.jsxs)("div",{children:[(0,Un.jsx)("button",{onClick:function(){return e("/login")},children:"Login"}),(0,Un.jsx)("button",{onClick:function(){return e("/register")},children:"Register"})]})]})})})]}),(0,Un.jsxs)("div",{className:"paragraph",style:{marginTop:"30px"},children:[(0,Un.jsx)("div",{children:"Join game with code"}),(0,Un.jsx)(SM,{value:n,setValue:r,placeholder:"Put in game code",characterLimit:6,visibleWarning:!1}),c&&(0,Un.jsx)("div",{className:"error",children:c}),(0,Un.jsx)("button",{className:"my-button",onClick:function(){y()},children:"Join"})]})]})}var bj=n(457),wj=n.n(bj),_j=function(e){return function(e){return!!e&&"object"===typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===xj}(e)}(e)};var xj="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function Sj(e,t){return!1!==t.clone&&t.isMergeableObject(e)?Tj(function(e){return Array.isArray(e)?[]:{}}(e),e,t):e}function Ej(e,t,n){return e.concat(t).map((function(e){return Sj(e,n)}))}function Tj(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||Ej,n.isMergeableObject=n.isMergeableObject||_j;var r=Array.isArray(t);return r===Array.isArray(e)?r?n.arrayMerge(e,t,n):function(e,t,n){var r={};return n.isMergeableObject(e)&&Object.keys(e).forEach((function(t){r[t]=Sj(e[t],n)})),Object.keys(t).forEach((function(i){n.isMergeableObject(t[i])&&e[i]?r[i]=Tj(e[i],t[i],n):r[i]=Sj(t[i],n)})),r}(e,t,n):Sj(t,n)}Tj.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return Tj(e,n,t)}),{})};var Ij=Tj,Cj="object"==typeof global&&global&&global.Object===Object&&global,Aj="object"==typeof self&&self&&self.Object===Object&&self,Nj=Cj||Aj||Function("return this")(),Pj=Nj.Symbol,Rj=Object.prototype,Oj=Rj.hasOwnProperty,Dj=Rj.toString,Lj=Pj?Pj.toStringTag:void 0;var Fj=function(e){var t=Oj.call(e,Lj),n=e[Lj];try{e[Lj]=void 0;var r=!0}catch(a){}var i=Dj.call(e);return r&&(t?e[Lj]=n:delete e[Lj]),i},Mj=Object.prototype.toString;var jj=function(e){return Mj.call(e)},Uj=Pj?Pj.toStringTag:void 0;var Vj=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Uj&&Uj in Object(e)?Fj(e):jj(e)};var qj=function(e,t){return function(n){return e(t(n))}},Bj=qj(Object.getPrototypeOf,Object);var zj=function(e){return null!=e&&"object"==typeof e},Wj=Function.prototype,Hj=Object.prototype,Kj=Wj.toString,Gj=Hj.hasOwnProperty,Qj=Kj.call(Object);var $j=function(e){if(!zj(e)||"[object Object]"!=Vj(e))return!1;var t=Bj(e);if(null===t)return!0;var n=Gj.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Kj.call(n)==Qj};var Yj=function(){this.__data__=[],this.size=0};var Jj=function(e,t){return e===t||e!==e&&t!==t};var Xj=function(e,t){for(var n=e.length;n--;)if(Jj(e[n][0],t))return n;return-1},Zj=Array.prototype.splice;var eU=function(e){var t=this.__data__,n=Xj(t,e);return!(n<0)&&(n==t.length-1?t.pop():Zj.call(t,n,1),--this.size,!0)};var tU=function(e){var t=this.__data__,n=Xj(t,e);return n<0?void 0:t[n][1]};var nU=function(e){return Xj(this.__data__,e)>-1};var rU=function(e,t){var n=this.__data__,r=Xj(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function iU(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}iU.prototype.clear=Yj,iU.prototype.delete=eU,iU.prototype.get=tU,iU.prototype.has=nU,iU.prototype.set=rU;var aU=iU;var oU=function(){this.__data__=new aU,this.size=0};var sU=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var uU=function(e){return this.__data__.get(e)};var cU=function(e){return this.__data__.has(e)};var lU=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var hU=function(e){if(!lU(e))return!1;var t=Vj(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},fU=Nj["__core-js_shared__"],dU=function(){var e=/[^.]+$/.exec(fU&&fU.keys&&fU.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var pU=function(e){return!!dU&&dU in e},vU=Function.prototype.toString;var yU=function(e){if(null!=e){try{return vU.call(e)}catch(t){}try{return e+""}catch(t){}}return""},mU=/^\[object .+?Constructor\]$/,gU=Function.prototype,kU=Object.prototype,bU=gU.toString,wU=kU.hasOwnProperty,_U=RegExp("^"+bU.call(wU).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var xU=function(e){return!(!lU(e)||pU(e))&&(hU(e)?_U:mU).test(yU(e))};var SU=function(e,t){return null==e?void 0:e[t]};var EU=function(e,t){var n=SU(e,t);return xU(n)?n:void 0},TU=EU(Nj,"Map"),IU=EU(Object,"create");var CU=function(){this.__data__=IU?IU(null):{},this.size=0};var AU=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},NU=Object.prototype.hasOwnProperty;var PU=function(e){var t=this.__data__;if(IU){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return NU.call(t,e)?t[e]:void 0},RU=Object.prototype.hasOwnProperty;var OU=function(e){var t=this.__data__;return IU?void 0!==t[e]:RU.call(t,e)};var DU=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=IU&&void 0===t?"__lodash_hash_undefined__":t,this};function LU(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}LU.prototype.clear=CU,LU.prototype.delete=AU,LU.prototype.get=PU,LU.prototype.has=OU,LU.prototype.set=DU;var FU=LU;var MU=function(){this.size=0,this.__data__={hash:new FU,map:new(TU||aU),string:new FU}};var jU=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var UU=function(e,t){var n=e.__data__;return jU(t)?n["string"==typeof t?"string":"hash"]:n.map};var VU=function(e){var t=UU(this,e).delete(e);return this.size-=t?1:0,t};var qU=function(e){return UU(this,e).get(e)};var BU=function(e){return UU(this,e).has(e)};var zU=function(e,t){var n=UU(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function WU(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}WU.prototype.clear=MU,WU.prototype.delete=VU,WU.prototype.get=qU,WU.prototype.has=BU,WU.prototype.set=zU;var HU=WU;var KU=function(e,t){var n=this.__data__;if(n instanceof aU){var r=n.__data__;if(!TU||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new HU(r)}return n.set(e,t),this.size=n.size,this};function GU(e){var t=this.__data__=new aU(e);this.size=t.size}GU.prototype.clear=oU,GU.prototype.delete=sU,GU.prototype.get=uU,GU.prototype.has=cU,GU.prototype.set=KU;var QU=GU;var $U=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},YU=function(){try{var e=EU(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();var JU=function(e,t,n){"__proto__"==t&&YU?YU(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},XU=Object.prototype.hasOwnProperty;var ZU=function(e,t,n){var r=e[t];XU.call(e,t)&&Jj(r,n)&&(void 0!==n||t in e)||JU(e,t,n)};var eV=function(e,t,n,r){var i=!n;n||(n={});for(var a=-1,o=t.length;++a<o;){var s=t[a],u=r?r(n[s],e[s],s,n,e):void 0;void 0===u&&(u=e[s]),i?JU(n,s,u):ZU(n,s,u)}return n};var tV=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};var nV=function(e){return zj(e)&&"[object Arguments]"==Vj(e)},rV=Object.prototype,iV=rV.hasOwnProperty,aV=rV.propertyIsEnumerable,oV=nV(function(){return arguments}())?nV:function(e){return zj(e)&&iV.call(e,"callee")&&!aV.call(e,"callee")},sV=oV,uV=Array.isArray;var cV=function(){return!1},lV="object"==typeof exports&&exports&&!exports.nodeType&&exports,hV=lV&&"object"==typeof module&&module&&!module.nodeType&&module,fV=hV&&hV.exports===lV?Nj.Buffer:void 0,dV=(fV?fV.isBuffer:void 0)||cV,pV=/^(?:0|[1-9]\d*)$/;var vV=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&pV.test(e))&&e>-1&&e%1==0&&e<t};var yV=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},mV={};mV["[object Float32Array]"]=mV["[object Float64Array]"]=mV["[object Int8Array]"]=mV["[object Int16Array]"]=mV["[object Int32Array]"]=mV["[object Uint8Array]"]=mV["[object Uint8ClampedArray]"]=mV["[object Uint16Array]"]=mV["[object Uint32Array]"]=!0,mV["[object Arguments]"]=mV["[object Array]"]=mV["[object ArrayBuffer]"]=mV["[object Boolean]"]=mV["[object DataView]"]=mV["[object Date]"]=mV["[object Error]"]=mV["[object Function]"]=mV["[object Map]"]=mV["[object Number]"]=mV["[object Object]"]=mV["[object RegExp]"]=mV["[object Set]"]=mV["[object String]"]=mV["[object WeakMap]"]=!1;var gV=function(e){return zj(e)&&yV(e.length)&&!!mV[Vj(e)]};var kV=function(e){return function(t){return e(t)}},bV="object"==typeof exports&&exports&&!exports.nodeType&&exports,wV=bV&&"object"==typeof module&&module&&!module.nodeType&&module,_V=wV&&wV.exports===bV&&Cj.process,xV=function(){try{var e=wV&&wV.require&&wV.require("util").types;return e||_V&&_V.binding&&_V.binding("util")}catch(t){}}(),SV=xV&&xV.isTypedArray,EV=SV?kV(SV):gV,TV=Object.prototype.hasOwnProperty;var IV=function(e,t){var n=uV(e),r=!n&&sV(e),i=!n&&!r&&dV(e),a=!n&&!r&&!i&&EV(e),o=n||r||i||a,s=o?tV(e.length,String):[],u=s.length;for(var c in e)!t&&!TV.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||vV(c,u))||s.push(c);return s},CV=Object.prototype;var AV=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||CV)},NV=qj(Object.keys,Object),PV=Object.prototype.hasOwnProperty;var RV=function(e){if(!AV(e))return NV(e);var t=[];for(var n in Object(e))PV.call(e,n)&&"constructor"!=n&&t.push(n);return t};var OV=function(e){return null!=e&&yV(e.length)&&!hU(e)};var DV=function(e){return OV(e)?IV(e):RV(e)};var LV=function(e,t){return e&&eV(t,DV(t),e)};var FV=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},MV=Object.prototype.hasOwnProperty;var jV=function(e){if(!lU(e))return FV(e);var t=AV(e),n=[];for(var r in e)("constructor"!=r||!t&&MV.call(e,r))&&n.push(r);return n};var UV=function(e){return OV(e)?IV(e,!0):jV(e)};var VV=function(e,t){return e&&eV(t,UV(t),e)},qV="object"==typeof exports&&exports&&!exports.nodeType&&exports,BV=qV&&"object"==typeof module&&module&&!module.nodeType&&module,zV=BV&&BV.exports===qV?Nj.Buffer:void 0,WV=zV?zV.allocUnsafe:void 0;var HV=function(e,t){if(t)return e.slice();var n=e.length,r=WV?WV(n):new e.constructor(n);return e.copy(r),r};var KV=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t};var GV=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a};var QV=function(){return[]},$V=Object.prototype.propertyIsEnumerable,YV=Object.getOwnPropertySymbols,JV=YV?function(e){return null==e?[]:(e=Object(e),GV(YV(e),(function(t){return $V.call(e,t)})))}:QV,XV=JV;var ZV=function(e,t){return eV(e,XV(e),t)};var eq=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},tq=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)eq(t,XV(e)),e=Bj(e);return t}:QV,nq=tq;var rq=function(e,t){return eV(e,nq(e),t)};var iq=function(e,t,n){var r=t(e);return uV(e)?r:eq(r,n(e))};var aq=function(e){return iq(e,DV,XV)};var oq=function(e){return iq(e,UV,nq)},sq=EU(Nj,"DataView"),uq=EU(Nj,"Promise"),cq=EU(Nj,"Set"),lq=EU(Nj,"WeakMap"),hq="[object Map]",fq="[object Promise]",dq="[object Set]",pq="[object WeakMap]",vq="[object DataView]",yq=yU(sq),mq=yU(TU),gq=yU(uq),kq=yU(cq),bq=yU(lq),wq=Vj;(sq&&wq(new sq(new ArrayBuffer(1)))!=vq||TU&&wq(new TU)!=hq||uq&&wq(uq.resolve())!=fq||cq&&wq(new cq)!=dq||lq&&wq(new lq)!=pq)&&(wq=function(e){var t=Vj(e),n="[object Object]"==t?e.constructor:void 0,r=n?yU(n):"";if(r)switch(r){case yq:return vq;case mq:return hq;case gq:return fq;case kq:return dq;case bq:return pq}return t});var _q=wq,xq=Object.prototype.hasOwnProperty;var Sq=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&xq.call(e,"index")&&(n.index=e.index,n.input=e.input),n},Eq=Nj.Uint8Array;var Tq=function(e){var t=new e.constructor(e.byteLength);return new Eq(t).set(new Eq(e)),t};var Iq=function(e,t){var n=t?Tq(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},Cq=/\w*$/;var Aq=function(e){var t=new e.constructor(e.source,Cq.exec(e));return t.lastIndex=e.lastIndex,t},Nq=Pj?Pj.prototype:void 0,Pq=Nq?Nq.valueOf:void 0;var Rq=function(e){return Pq?Object(Pq.call(e)):{}};var Oq=function(e,t){var n=t?Tq(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)};var Dq=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return Tq(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return Iq(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Oq(e,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return Aq(e);case"[object Symbol]":return Rq(e)}},Lq=Object.create,Fq=function(){function e(){}return function(t){if(!lU(t))return{};if(Lq)return Lq(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),Mq=Fq;var jq=function(e){return"function"!=typeof e.constructor||AV(e)?{}:Mq(Bj(e))};var Uq=function(e){return zj(e)&&"[object Map]"==_q(e)},Vq=xV&&xV.isMap,qq=Vq?kV(Vq):Uq;var Bq=function(e){return zj(e)&&"[object Set]"==_q(e)},zq=xV&&xV.isSet,Wq=zq?kV(zq):Bq,Hq="[object Arguments]",Kq="[object Function]",Gq="[object Object]",Qq={};Qq[Hq]=Qq["[object Array]"]=Qq["[object ArrayBuffer]"]=Qq["[object DataView]"]=Qq["[object Boolean]"]=Qq["[object Date]"]=Qq["[object Float32Array]"]=Qq["[object Float64Array]"]=Qq["[object Int8Array]"]=Qq["[object Int16Array]"]=Qq["[object Int32Array]"]=Qq["[object Map]"]=Qq["[object Number]"]=Qq[Gq]=Qq["[object RegExp]"]=Qq["[object Set]"]=Qq["[object String]"]=Qq["[object Symbol]"]=Qq["[object Uint8Array]"]=Qq["[object Uint8ClampedArray]"]=Qq["[object Uint16Array]"]=Qq["[object Uint32Array]"]=!0,Qq["[object Error]"]=Qq[Kq]=Qq["[object WeakMap]"]=!1;var $q=function e(t,n,r,i,a,o){var s,u=1&n,c=2&n,l=4&n;if(r&&(s=a?r(t,i,a,o):r(t)),void 0!==s)return s;if(!lU(t))return t;var h=uV(t);if(h){if(s=Sq(t),!u)return KV(t,s)}else{var f=_q(t),d=f==Kq||"[object GeneratorFunction]"==f;if(dV(t))return HV(t,u);if(f==Gq||f==Hq||d&&!a){if(s=c||d?{}:jq(t),!u)return c?rq(t,VV(s,t)):ZV(t,LV(s,t))}else{if(!Qq[f])return a?t:{};s=Dq(t,f,u)}}o||(o=new QU);var p=o.get(t);if(p)return p;o.set(t,s),Wq(t)?t.forEach((function(i){s.add(e(i,n,r,i,t,o))})):qq(t)&&t.forEach((function(i,a){s.set(a,e(i,n,r,a,t,o))}));var v=h?void 0:(l?c?oq:aq:c?UV:DV)(t);return $U(v||t,(function(i,a){v&&(i=t[a=i]),ZU(s,a,e(i,n,r,a,t,o))})),s};var Yq=function(e){return $q(e,4)};var Jq=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i};var Xq=function(e){return"symbol"==typeof e||zj(e)&&"[object Symbol]"==Vj(e)};function Zq(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(Zq.Cache||HU),n}Zq.Cache=HU;var eB=Zq;var tB=function(e){var t=eB(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t},nB=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rB=/\\(\\)?/g,iB=tB((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(nB,(function(e,n,r,i){t.push(r?i.replace(rB,"$1"):n||e)})),t})),aB=iB;var oB=function(e){if("string"==typeof e||Xq(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t},sB=Pj?Pj.prototype:void 0,uB=sB?sB.toString:void 0;var cB=function e(t){if("string"==typeof t)return t;if(uV(t))return Jq(t,e)+"";if(Xq(t))return uB?uB.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n};var lB=function(e){return null==e?"":cB(e)};var hB=function(e){return uV(e)?Jq(e,oB):Xq(e)?[e]:KV(aB(lB(e)))};var fB=function(e,t){};var dB=function(e){return $q(e,5)};function pB(){return pB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pB.apply(this,arguments)}function vB(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function yB(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function mB(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var gB=function(e){return Array.isArray(e)&&0===e.length},kB=function(e){return"function"===typeof e},bB=function(e){return null!==e&&"object"===typeof e},wB=function(e){return String(Math.floor(Number(e)))===e},_B=function(e){return"[object String]"===Object.prototype.toString.call(e)},xB=function(e){return 0===i.Children.count(e)},SB=function(e){return bB(e)&&kB(e.then)};function EB(e,t,n,r){void 0===r&&(r=0);for(var i=hB(t);e&&r<i.length;)e=e[i[r++]];return void 0===e?n:e}function TB(e,t,n){for(var r=Yq(e),i=r,a=0,o=hB(t);a<o.length-1;a++){var s=o[a],u=EB(e,o.slice(0,a+1));if(u&&(bB(u)||Array.isArray(u)))i=i[s]=Yq(u);else{var c=o[a+1];i=i[s]=wB(c)&&Number(c)>=0?[]:{}}}return(0===a?e:i)[o[a]]===n?e:(void 0===n?delete i[o[a]]:i[o[a]]=n,0===a&&void 0===n&&delete r[o[a]],r)}function IB(e,t,n,r){void 0===n&&(n=new WeakMap),void 0===r&&(r={});for(var i=0,a=Object.keys(e);i<a.length;i++){var o=a[i],s=e[o];bB(s)?n.get(s)||(n.set(s,!0),r[o]=Array.isArray(s)?[]:{},IB(s,t,n,r[o])):r[o]=t}return r}var CB=(0,i.createContext)(void 0);CB.displayName="FormikContext";CB.Provider,CB.Consumer;function AB(){var e=(0,i.useContext)(CB);return e||fB(!1),e}function NB(e,t){switch(t.type){case"SET_VALUES":return pB({},e,{values:t.payload});case"SET_TOUCHED":return pB({},e,{touched:t.payload});case"SET_ERRORS":return wj()(e.errors,t.payload)?e:pB({},e,{errors:t.payload});case"SET_STATUS":return pB({},e,{status:t.payload});case"SET_ISSUBMITTING":return pB({},e,{isSubmitting:t.payload});case"SET_ISVALIDATING":return pB({},e,{isValidating:t.payload});case"SET_FIELD_VALUE":return pB({},e,{values:TB(e.values,t.payload.field,t.payload.value)});case"SET_FIELD_TOUCHED":return pB({},e,{touched:TB(e.touched,t.payload.field,t.payload.value)});case"SET_FIELD_ERROR":return pB({},e,{errors:TB(e.errors,t.payload.field,t.payload.value)});case"RESET_FORM":return pB({},e,t.payload);case"SET_FORMIK_STATE":return t.payload(e);case"SUBMIT_ATTEMPT":return pB({},e,{touched:IB(e.values,!0),isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":case"SUBMIT_SUCCESS":return pB({},e,{isSubmitting:!1});default:return e}}var PB={},RB={};function OB(e){var t=e.validateOnChange,n=void 0===t||t,r=e.validateOnBlur,a=void 0===r||r,o=e.validateOnMount,s=void 0!==o&&o,u=e.isInitialValid,c=e.enableReinitialize,l=void 0!==c&&c,h=e.onSubmit,f=yB(e,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),d=pB({validateOnChange:n,validateOnBlur:a,validateOnMount:s,onSubmit:h},f),p=(0,i.useRef)(d.initialValues),v=(0,i.useRef)(d.initialErrors||PB),y=(0,i.useRef)(d.initialTouched||RB),m=(0,i.useRef)(d.initialStatus),g=(0,i.useRef)(!1),k=(0,i.useRef)({});(0,i.useEffect)((function(){return g.current=!0,function(){g.current=!1}}),[]);var b=(0,i.useReducer)(NB,{values:d.initialValues,errors:d.initialErrors||PB,touched:d.initialTouched||RB,status:d.initialStatus,isSubmitting:!1,isValidating:!1,submitCount:0}),w=b[0],_=b[1],x=(0,i.useCallback)((function(e,t){return new Promise((function(n,r){var i=d.validate(e,t);null==i?n(PB):SB(i)?i.then((function(e){n(e||PB)}),(function(e){r(e)})):n(i)}))}),[d.validate]),S=(0,i.useCallback)((function(e,t){var n=d.validationSchema,r=kB(n)?n(t):n,i=t&&r.validateAt?r.validateAt(t,e):function(e,t,n,r){void 0===n&&(n=!1);void 0===r&&(r={});var i=DB(e);return t[n?"validateSync":"validate"](i,{abortEarly:!1,context:r})}(e,r);return new Promise((function(e,t){i.then((function(){e(PB)}),(function(n){"ValidationError"===n.name?e(function(e){var t={};if(e.inner){if(0===e.inner.length)return TB(t,e.path,e.message);var n=e.inner,r=Array.isArray(n),i=0;for(n=r?n:n[Symbol.iterator]();;){var a;if(r){if(i>=n.length)break;a=n[i++]}else{if((i=n.next()).done)break;a=i.value}var o=a;EB(t,o.path)||(t=TB(t,o.path,o.message))}}return t}(n)):t(n)}))}))}),[d.validationSchema]),E=(0,i.useCallback)((function(e,t){return new Promise((function(n){return n(k.current[e].validate(t))}))}),[]),T=(0,i.useCallback)((function(e){var t=Object.keys(k.current).filter((function(e){return kB(k.current[e].validate)})),n=t.length>0?t.map((function(t){return E(t,EB(e,t))})):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(n).then((function(e){return e.reduce((function(e,n,r){return"DO_NOT_DELETE_YOU_WILL_BE_FIRED"===n||n&&(e=TB(e,t[r],n)),e}),{})}))}),[E]),I=(0,i.useCallback)((function(e){return Promise.all([T(e),d.validationSchema?S(e):{},d.validate?x(e):{}]).then((function(e){var t=e[0],n=e[1],r=e[2];return Ij.all([t,n,r],{arrayMerge:LB})}))}),[d.validate,d.validationSchema,T,x,S]),C=MB((function(e){return void 0===e&&(e=w.values),_({type:"SET_ISVALIDATING",payload:!0}),I(e).then((function(e){return g.current&&(_({type:"SET_ISVALIDATING",payload:!1}),_({type:"SET_ERRORS",payload:e})),e}))}));(0,i.useEffect)((function(){s&&!0===g.current&&wj()(p.current,d.initialValues)&&C(p.current)}),[s,C]);var A=(0,i.useCallback)((function(e){var t=e&&e.values?e.values:p.current,n=e&&e.errors?e.errors:v.current?v.current:d.initialErrors||{},r=e&&e.touched?e.touched:y.current?y.current:d.initialTouched||{},i=e&&e.status?e.status:m.current?m.current:d.initialStatus;p.current=t,v.current=n,y.current=r,m.current=i;var a=function(){_({type:"RESET_FORM",payload:{isSubmitting:!!e&&!!e.isSubmitting,errors:n,touched:r,status:i,values:t,isValidating:!!e&&!!e.isValidating,submitCount:e&&e.submitCount&&"number"===typeof e.submitCount?e.submitCount:0}})};if(d.onReset){var o=d.onReset(w.values,Q);SB(o)?o.then(a):a()}else a()}),[d.initialErrors,d.initialStatus,d.initialTouched]);(0,i.useEffect)((function(){!0!==g.current||wj()(p.current,d.initialValues)||(l&&(p.current=d.initialValues,A()),s&&C(p.current))}),[l,d.initialValues,A,s,C]),(0,i.useEffect)((function(){l&&!0===g.current&&!wj()(v.current,d.initialErrors)&&(v.current=d.initialErrors||PB,_({type:"SET_ERRORS",payload:d.initialErrors||PB}))}),[l,d.initialErrors]),(0,i.useEffect)((function(){l&&!0===g.current&&!wj()(y.current,d.initialTouched)&&(y.current=d.initialTouched||RB,_({type:"SET_TOUCHED",payload:d.initialTouched||RB}))}),[l,d.initialTouched]),(0,i.useEffect)((function(){l&&!0===g.current&&!wj()(m.current,d.initialStatus)&&(m.current=d.initialStatus,_({type:"SET_STATUS",payload:d.initialStatus}))}),[l,d.initialStatus,d.initialTouched]);var N=MB((function(e){if(k.current[e]&&kB(k.current[e].validate)){var t=EB(w.values,e),n=k.current[e].validate(t);return SB(n)?(_({type:"SET_ISVALIDATING",payload:!0}),n.then((function(e){return e})).then((function(t){_({type:"SET_FIELD_ERROR",payload:{field:e,value:t}}),_({type:"SET_ISVALIDATING",payload:!1})}))):(_({type:"SET_FIELD_ERROR",payload:{field:e,value:n}}),Promise.resolve(n))}return d.validationSchema?(_({type:"SET_ISVALIDATING",payload:!0}),S(w.values,e).then((function(e){return e})).then((function(t){_({type:"SET_FIELD_ERROR",payload:{field:e,value:t[e]}}),_({type:"SET_ISVALIDATING",payload:!1})}))):Promise.resolve()})),P=(0,i.useCallback)((function(e,t){var n=t.validate;k.current[e]={validate:n}}),[]),R=(0,i.useCallback)((function(e){delete k.current[e]}),[]),O=MB((function(e,t){return _({type:"SET_TOUCHED",payload:e}),(void 0===t?a:t)?C(w.values):Promise.resolve()})),D=(0,i.useCallback)((function(e){_({type:"SET_ERRORS",payload:e})}),[]),L=MB((function(e,t){var r=kB(e)?e(w.values):e;return _({type:"SET_VALUES",payload:r}),(void 0===t?n:t)?C(r):Promise.resolve()})),F=(0,i.useCallback)((function(e,t){_({type:"SET_FIELD_ERROR",payload:{field:e,value:t}})}),[]),M=MB((function(e,t,r){return _({type:"SET_FIELD_VALUE",payload:{field:e,value:t}}),(void 0===r?n:r)?C(TB(w.values,e,t)):Promise.resolve()})),j=(0,i.useCallback)((function(e,t){var n,r=t,i=e;if(!_B(e)){e.persist&&e.persist();var a=e.target?e.target:e.currentTarget,o=a.type,s=a.name,u=a.id,c=a.value,l=a.checked,h=(a.outerHTML,a.options),f=a.multiple;r=t||(s||u),i=/number|range/.test(o)?(n=parseFloat(c),isNaN(n)?"":n):/checkbox/.test(o)?function(e,t,n){if("boolean"===typeof e)return Boolean(t);var r=[],i=!1,a=-1;if(Array.isArray(e))r=e,i=(a=e.indexOf(n))>=0;else if(!n||"true"==n||"false"==n)return Boolean(t);if(t&&n&&!i)return r.concat(n);if(!i)return r;return r.slice(0,a).concat(r.slice(a+1))}(EB(w.values,r),l,c):h&&f?function(e){return Array.from(e).filter((function(e){return e.selected})).map((function(e){return e.value}))}(h):c}r&&M(r,i)}),[M,w.values]),U=MB((function(e){if(_B(e))return function(t){return j(t,e)};j(e)})),V=MB((function(e,t,n){return void 0===t&&(t=!0),_({type:"SET_FIELD_TOUCHED",payload:{field:e,value:t}}),(void 0===n?a:n)?C(w.values):Promise.resolve()})),q=(0,i.useCallback)((function(e,t){e.persist&&e.persist();var n=e.target,r=n.name,i=n.id,a=(n.outerHTML,t||(r||i));V(a,!0)}),[V]),B=MB((function(e){if(_B(e))return function(t){return q(t,e)};q(e)})),z=(0,i.useCallback)((function(e){kB(e)?_({type:"SET_FORMIK_STATE",payload:e}):_({type:"SET_FORMIK_STATE",payload:function(){return e}})}),[]),W=(0,i.useCallback)((function(e){_({type:"SET_STATUS",payload:e})}),[]),H=(0,i.useCallback)((function(e){_({type:"SET_ISSUBMITTING",payload:e})}),[]),K=MB((function(){return _({type:"SUBMIT_ATTEMPT"}),C().then((function(e){var t=e instanceof Error;if(!t&&0===Object.keys(e).length){var n;try{if(void 0===(n=$()))return}catch(Ma){throw Ma}return Promise.resolve(n).then((function(e){return g.current&&_({type:"SUBMIT_SUCCESS"}),e})).catch((function(e){if(g.current)throw _({type:"SUBMIT_FAILURE"}),e}))}if(g.current&&(_({type:"SUBMIT_FAILURE"}),t))throw e}))})),G=MB((function(e){e&&e.preventDefault&&kB(e.preventDefault)&&e.preventDefault(),e&&e.stopPropagation&&kB(e.stopPropagation)&&e.stopPropagation(),K().catch((function(e){console.warn("Warning: An unhandled error was caught from submitForm()",e)}))})),Q={resetForm:A,validateForm:C,validateField:N,setErrors:D,setFieldError:F,setFieldTouched:V,setFieldValue:M,setStatus:W,setSubmitting:H,setTouched:O,setValues:L,setFormikState:z,submitForm:K},$=MB((function(){return h(w.values,Q)})),Y=MB((function(e){e&&e.preventDefault&&kB(e.preventDefault)&&e.preventDefault(),e&&e.stopPropagation&&kB(e.stopPropagation)&&e.stopPropagation(),A()})),J=(0,i.useCallback)((function(e){return{value:EB(w.values,e),error:EB(w.errors,e),touched:!!EB(w.touched,e),initialValue:EB(p.current,e),initialTouched:!!EB(y.current,e),initialError:EB(v.current,e)}}),[w.errors,w.touched,w.values]),X=(0,i.useCallback)((function(e){return{setValue:function(t,n){return M(e,t,n)},setTouched:function(t,n){return V(e,t,n)},setError:function(t){return F(e,t)}}}),[M,V,F]),Z=(0,i.useCallback)((function(e){var t=bB(e),n=t?e.name:e,r=EB(w.values,n),i={name:n,value:r,onChange:U,onBlur:B};if(t){var a=e.type,o=e.value,s=e.as,u=e.multiple;"checkbox"===a?void 0===o?i.checked=!!r:(i.checked=!(!Array.isArray(r)||!~r.indexOf(o)),i.value=o):"radio"===a?(i.checked=r===o,i.value=o):"select"===s&&u&&(i.value=i.value||[],i.multiple=!0)}return i}),[B,U,w.values]),ee=(0,i.useMemo)((function(){return!wj()(p.current,w.values)}),[p.current,w.values]),te=(0,i.useMemo)((function(){return"undefined"!==typeof u?ee?w.errors&&0===Object.keys(w.errors).length:!1!==u&&kB(u)?u(d):u:w.errors&&0===Object.keys(w.errors).length}),[u,ee,w.errors,d]);return pB({},w,{initialValues:p.current,initialErrors:v.current,initialTouched:y.current,initialStatus:m.current,handleBlur:B,handleChange:U,handleReset:Y,handleSubmit:G,resetForm:A,setErrors:D,setFormikState:z,setFieldTouched:V,setFieldValue:M,setFieldError:F,setStatus:W,setSubmitting:H,setTouched:O,setValues:L,submitForm:K,validateForm:C,validateField:N,isValid:te,dirty:ee,unregisterField:R,registerField:P,getFieldProps:Z,getFieldMeta:J,getFieldHelpers:X,validateOnBlur:a,validateOnChange:n,validateOnMount:s})}function DB(e){var t=Array.isArray(e)?[]:{};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=String(n);!0===Array.isArray(e[r])?t[r]=e[r].map((function(e){return!0===Array.isArray(e)||$j(e)?DB(e):""!==e?e:void 0})):$j(e[r])?t[r]=DB(e[r]):t[r]=""!==e[r]?e[r]:void 0}return t}function LB(e,t,n){var r=e.slice();return t.forEach((function(t,i){if("undefined"===typeof r[i]){var a=!1!==n.clone&&n.isMergeableObject(t);r[i]=a?Ij(Array.isArray(t)?[]:{},t,n):t}else n.isMergeableObject(t)?r[i]=Ij(e[i],t,n):-1===e.indexOf(t)&&r.push(t)})),r}var FB="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?i.useLayoutEffect:i.useEffect;function MB(e){var t=(0,i.useRef)(e);return FB((function(){t.current=e})),(0,i.useCallback)((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.current.apply(void 0,n)}),[])}(0,i.forwardRef)((function(e,t){var n=e.action,r=yB(e,["action"]),a=null!=n?n:"#",o=AB(),s=o.handleReset,u=o.handleSubmit;return(0,i.createElement)("form",Object.assign({onSubmit:u,ref:t,onReset:s,action:a},r))})).displayName="Form";var jB=function(e,t,n){var r=UB(e);return r.splice(t,0,n),r},UB=function(e){if(e){if(Array.isArray(e))return[].concat(e);var t=Object.keys(e).map((function(e){return parseInt(e)})).reduce((function(e,t){return t>e?t:e}),0);return Array.from(pB({},e,{length:t+1}))}return[]},VB=function(e){function t(t){var n;return(n=e.call(this,t)||this).updateArrayField=function(e,t,r){var i=n.props,a=i.name;(0,i.formik.setFormikState)((function(n){var i="function"===typeof r?r:e,o="function"===typeof t?t:e,s=TB(n.values,a,e(EB(n.values,a))),u=r?i(EB(n.errors,a)):void 0,c=t?o(EB(n.touched,a)):void 0;return gB(u)&&(u=void 0),gB(c)&&(c=void 0),pB({},n,{values:s,errors:r?TB(n.errors,a,u):n.errors,touched:t?TB(n.touched,a,c):n.touched})}))},n.push=function(e){return n.updateArrayField((function(t){return[].concat(UB(t),[dB(e)])}),!1,!1)},n.handlePush=function(e){return function(){return n.push(e)}},n.swap=function(e,t){return n.updateArrayField((function(n){return function(e,t,n){var r=UB(e),i=r[t];return r[t]=r[n],r[n]=i,r}(n,e,t)}),!0,!0)},n.handleSwap=function(e,t){return function(){return n.swap(e,t)}},n.move=function(e,t){return n.updateArrayField((function(n){return function(e,t,n){var r=UB(e),i=r[t];return r.splice(t,1),r.splice(n,0,i),r}(n,e,t)}),!0,!0)},n.handleMove=function(e,t){return function(){return n.move(e,t)}},n.insert=function(e,t){return n.updateArrayField((function(n){return jB(n,e,t)}),(function(t){return jB(t,e,null)}),(function(t){return jB(t,e,null)}))},n.handleInsert=function(e,t){return function(){return n.insert(e,t)}},n.replace=function(e,t){return n.updateArrayField((function(n){return function(e,t,n){var r=UB(e);return r[t]=n,r}(n,e,t)}),!1,!1)},n.handleReplace=function(e,t){return function(){return n.replace(e,t)}},n.unshift=function(e){var t=-1;return n.updateArrayField((function(n){var r=n?[e].concat(n):[e];return t<0&&(t=r.length),r}),(function(e){var n=e?[null].concat(e):[null];return t<0&&(t=n.length),n}),(function(e){var n=e?[null].concat(e):[null];return t<0&&(t=n.length),n})),t},n.handleUnshift=function(e){return function(){return n.unshift(e)}},n.handleRemove=function(e){return function(){return n.remove(e)}},n.handlePop=function(){return function(){return n.pop()}},n.remove=n.remove.bind(mB(n)),n.pop=n.pop.bind(mB(n)),n}vB(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){this.props.validateOnChange&&this.props.formik.validateOnChange&&!wj()(EB(e.formik.values,e.name),EB(this.props.formik.values,this.props.name))&&this.props.formik.validateForm(this.props.formik.values)},n.remove=function(e){var t;return this.updateArrayField((function(n){var r=n?UB(n):[];return t||(t=r[e]),kB(r.splice)&&r.splice(e,1),r}),!0,!0),t},n.pop=function(){var e;return this.updateArrayField((function(t){var n=t;return e||(e=n&&n.pop&&n.pop()),n}),!0,!0),e},n.render=function(){var e={push:this.push,pop:this.pop,swap:this.swap,move:this.move,insert:this.insert,replace:this.replace,unshift:this.unshift,remove:this.remove,handlePush:this.handlePush,handlePop:this.handlePop,handleSwap:this.handleSwap,handleMove:this.handleMove,handleInsert:this.handleInsert,handleReplace:this.handleReplace,handleUnshift:this.handleUnshift,handleRemove:this.handleRemove},t=this.props,n=t.component,r=t.render,a=t.children,o=t.name,s=pB({},e,{form:yB(t.formik,["validate","validationSchema"]),name:o});return n?(0,i.createElement)(n,s):r?r(s):a?"function"===typeof a?a(s):xB(a)?null:i.Children.only(a):null},t}(i.Component);VB.defaultProps={validateOnChange:!0};var qB=n(758),BB=n(564),zB=n(514),WB=n.n(zB),HB=Object.prototype.toString,KB=Error.prototype.toString,GB=RegExp.prototype.toString,QB="undefined"!==typeof Symbol?Symbol.prototype.toString:function(){return""},$B=/^Symbol\((.*)\)(.*)$/;function YB(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==e||!0===e||!1===e)return""+e;var n=typeof e;if("number"===n)return function(e){return e!=+e?"NaN":0===e&&1/e<0?"-0":""+e}(e);if("string"===n)return t?'"'.concat(e,'"'):e;if("function"===n)return"[Function "+(e.name||"anonymous")+"]";if("symbol"===n)return QB.call(e).replace($B,"Symbol($1)");var r=HB.call(e).slice(8,-1);return"Date"===r?isNaN(e.getTime())?""+e:e.toISOString(e):"Error"===r||e instanceof Error?"["+KB.call(e)+"]":"RegExp"===r?GB.call(e):null}function JB(e,t){var n=YB(e,t);return null!==n?n:JSON.stringify(e,(function(e,n){var r=YB(this[e],t);return null!==r?r:n}),2)}function XB(e){return null==e?[]:[].concat(e)}var ZB=/\$\{\s*(\w+)\s*\}/g,ez=function(e){k(n,e);var t=x(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this)).value=void 0,o.path=void 0,o.type=void 0,o.errors=void 0,o.params=void 0,o.inner=void 0,o.name="ValidationError",o.value=r,o.path=i,o.type=a,o.errors=[],o.inner=[],XB(e).forEach((function(e){var t;n.isError(e)?((t=o.errors).push.apply(t,f(e.errors)),o.inner=o.inner.concat(e.inner.length?e.inner:e)):o.errors.push(e)})),o.message=o.errors.length>1?"".concat(o.errors.length," errors occurred"):o.errors[0],Error.captureStackTrace&&Error.captureStackTrace(_(o),n),o}return m(n,null,[{key:"formatError",value:function(e,t){var n=t.label||t.path||"this";return n!==t.path&&(t=Object.assign({},t,{path:n})),"string"===typeof e?e.replace(ZB,(function(e,n){return JB(t[n])})):"function"===typeof e?e(t):e}},{key:"isError",value:function(e){return e&&"ValidationError"===e.name}}]),n}(E(Error)),tz={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:function(e){var t=e.path,n=e.type,r=e.value,i=e.originalValue,a=null!=i&&i!==r?" (cast from the value `".concat(JB(i,!0),"`)."):".";return"mixed"!==n?"".concat(t," must be a `").concat(n,"` type, ")+"but the final value was: `".concat(JB(r,!0),"`")+a:"".concat(t," must match the configured type. ")+"The validated value was: `".concat(JB(r,!0),"`")+a}},nz={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},rz={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},iz={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},az={isValue:"${path} field must be ${value}"},oz={noUnknown:"${path} field has unspecified keys: ${unknown}"},sz={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},uz=function(e){var t=e.path,n=e.value,r=e.spec.types.length;if(Array.isArray(n)){if(n.length<r)return"".concat(t," tuple value has too few items, expected a length of ").concat(r," but got ").concat(n.length," for value: `").concat(JB(n,!0),"`");if(n.length>r)return"".concat(t," tuple value has too many items, expected a length of ").concat(r," but got ").concat(n.length," for value: `").concat(JB(n,!0),"`")}return ez.formatError(tz.notType,e)},cz=(Object.assign(Object.create(null),{mixed:tz,string:nz,number:rz,date:iz,object:oz,array:sz,boolean:az}),function(e){return e&&e.__isYupSchema__}),lz=function(){function e(t,n){d(this,e),this.fn=void 0,this.refs=t,this.refs=t,this.fn=n}return m(e,[{key:"resolve",value:function(e,t){var n=this.refs.map((function(e){return e.getValue(null==t?void 0:t.value,null==t?void 0:t.parent,null==t?void 0:t.context)})),r=this.fn(n,e,t);if(void 0===r||r===e)return e;if(!cz(r))throw new TypeError("conditions must return a schema object");return r.resolve(t)}}],[{key:"fromOptions",value:function(t,n){if(!n.then&&!n.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");var r=n.is,i=n.then,a=n.otherwise,o="function"===typeof r?r:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every((function(e){return e===r}))};return new e(t,(function(e,t){var n,r=o.apply(void 0,f(e))?i:a;return null!=(n=null==r?void 0:r(t))?n:t}))}}]),e}(),hz="$",fz=".";var dz=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(d(this,e),this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,"string"!==typeof t)throw new TypeError("ref must be a string, got: "+t);if(this.key=t.trim(),""===t)throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===hz,this.isValue=this.key[0]===fz,this.isSibling=!this.isContext&&!this.isValue;var r=this.isContext?hz:this.isValue?fz:"";this.path=this.key.slice(r.length),this.getter=this.path&&(0,qB.getter)(this.path,!0),this.map=n.map}return m(e,[{key:"getValue",value:function(e,t,n){var r=this.isContext?n:this.isValue?e:t;return this.getter&&(r=this.getter(r||{})),this.map&&(r=this.map(r)),r}},{key:"cast",value:function(e,t){return this.getValue(e,null==t?void 0:t.parent,null==t?void 0:t.context)}},{key:"resolve",value:function(){return this}},{key:"describe",value:function(){return{type:"ref",key:this.key}}},{key:"toString",value:function(){return"Ref(".concat(this.key,")")}}],[{key:"isRef",value:function(e){return e&&e.__isYupRef}}]),e}();dz.prototype.__isYupRef=!0;var pz=function(e){return null==e};function vz(e){function t(t,n,r){var i=t.value,a=t.path,o=void 0===a?"":a,s=t.options,u=t.originalValue,c=t.schema,l=e.name,h=e.test,f=e.params,d=e.message,p=e.skipAbsent,v=s.parent,y=s.context,m=s.abortEarly;function g(e){return dz.isRef(e)?e.getValue(i,v,y):e}function k(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({value:i,originalValue:u,label:c.spec.label,path:e.path||o,spec:c.spec},f,e.params),n=0,r=Object.keys(t);n<r.length;n++){var a=r[n];t[a]=g(t[a])}var s=new ez(ez.formatError(e.message||d,t),i,t.path,e.type||l);return s.params=t,s}var b=(void 0===m?c.spec.abortEarly:m)?n:r,w={path:o,parent:v,type:l,from:s.from,createError:k,resolve:g,options:s,originalValue:u,schema:c},_=function(e){ez.isError(e)?b(e):e?r(null):b(k())},x=function(e){ez.isError(e)?b(e):n(e)},S=p&&pz(i);if(s.sync){var E;try{var T;if("function"===typeof(null==(T=E=!!S||h.call(w,i,w))?void 0:T.then))throw new Error('Validation test of type: "'.concat(w.type,'" returned a Promise during a synchronous validate. ')+"This test will finish after the validate call has returned")}catch(I){return void x(I)}_(E)}else try{Promise.resolve(!!S||h.call(w,i,w)).then(_,x)}catch(I){x(I)}}return t.OPTIONS=e,t}function yz(e,t,n){var r,i,a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return t?((0,qB.forEach)(t,(function(s,u,c){var l=u?s.slice(1,s.length-1):s,h="tuple"===(e=e.resolve({context:o,parent:r,value:n})).type,f=c?parseInt(l,10):0;if(e.innerType||h){if(h&&!c)throw new Error('Yup.reach cannot implicitly index into a tuple type. the path part "'.concat(a,'" must contain an index to the tuple element, e.g. "').concat(a,'[0]"'));if(n&&f>=n.length)throw new Error("Yup.reach cannot resolve an array item at index: ".concat(s,", in the path: ").concat(t,". ")+"because there is no value at that index. ");r=n,n=n&&n[f],e=h?e.spec.types[f]:e.innerType}if(!c){if(!e.fields||!e.fields[l])throw new Error("The schema does not contain the path: ".concat(t,". ")+"(failed at: ".concat(a,' which is a type: "').concat(e.type,'")'));r=n,n=n&&n[l],e=e.fields[l]}i=l,a=u?"["+s+"]":"."+s})),{schema:e,parent:r,parentPath:i}):{parent:r,parentPath:t,schema:e}}var mz=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n,[{key:"describe",value:function(){var e,t=[],n=I(this.values());try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(dz.isRef(r)?r.describe():r)}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"resolveAll",value:function(e){var t,n=[],r=I(this.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n.push(e(i))}}catch(a){r.e(a)}finally{r.f()}return n}},{key:"clone",value:function(){return new n(this.values())}},{key:"merge",value:function(e,t){var n=this.clone();return e.forEach((function(e){return n.add(e)})),t.forEach((function(e){return n.delete(e)})),n}}]),n}(E(Set));function gz(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;if(cz(e)||!e||"object"!==typeof e)return e;if(n.has(e))return n.get(e);if(e instanceof Date)t=new Date(e.getTime()),n.set(e,t);else if(e instanceof RegExp)t=new RegExp(e),n.set(e,t);else if(Array.isArray(e)){t=new Array(e.length),n.set(e,t);for(var r=0;r<e.length;r++)t[r]=gz(e[r],n)}else if(e instanceof Map){t=new Map,n.set(e,t);var i,a=I(e.entries());try{for(a.s();!(i=a.n()).done;){var o=l(i.value,2),s=o[0],u=o[1];t.set(s,gz(u,n))}}catch(g){a.e(g)}finally{a.f()}}else if(e instanceof Set){t=new Set,n.set(e,t);var c,h=I(e);try{for(h.s();!(c=h.n()).done;){var f=c.value;t.add(gz(f,n))}}catch(g){h.e(g)}finally{h.f()}}else{if(!(e instanceof Object))throw Error("Unable to clone ".concat(e));t={},n.set(e,t);for(var d=0,p=Object.entries(e);d<p.length;d++){var v=l(p[d],2),y=v[0],m=v[1];t[y]=gz(m,n)}}return t}var kz=function(){function e(t){var n=this;d(this,e),this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new mz,this._blacklist=new mz,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation((function(){n.typeError(tz.notType)})),this.type=t.type,this._typeCheck=t.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,nullable:!1,optional:!0,coerce:!0},null==t?void 0:t.spec),this.withMutation((function(e){e.nonNullable()}))}return m(e,[{key:"_type",get:function(){return this.type}},{key:"clone",value:function(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;var t=Object.create(Object.getPrototypeOf(this));return t.type=this.type,t._typeCheck=this._typeCheck,t._whitelist=this._whitelist.clone(),t._blacklist=this._blacklist.clone(),t.internalTests=Object.assign({},this.internalTests),t.exclusiveTests=Object.assign({},this.exclusiveTests),t.deps=f(this.deps),t.conditions=f(this.conditions),t.tests=f(this.tests),t.transforms=f(this.transforms),t.spec=gz(Object.assign({},this.spec,e)),t}},{key:"label",value:function(e){var t=this.clone();return t.spec.label=e,t}},{key:"meta",value:function(){if(0===arguments.length)return this.spec.meta;var e=this.clone();return e.spec.meta=Object.assign(e.spec.meta||{},arguments.length<=0?void 0:arguments[0]),e}},{key:"withMutation",value:function(e){var t=this._mutate;this._mutate=!0;var n=e(this);return this._mutate=t,n}},{key:"concat",value:function(e){if(!e||e===this)return this;if(e.type!==this.type&&"mixed"!==this.type)throw new TypeError("You cannot `concat()` schema's of different types: ".concat(this.type," and ").concat(e.type));var t=this,n=e.clone(),r=Object.assign({},t.spec,n.spec);return n.spec=r,n.internalTests=Object.assign({},t.internalTests,n.internalTests),n._whitelist=t._whitelist.merge(e._whitelist,e._blacklist),n._blacklist=t._blacklist.merge(e._blacklist,e._whitelist),n.tests=t.tests,n.exclusiveTests=t.exclusiveTests,n.withMutation((function(t){e.tests.forEach((function(e){t.test(e.OPTIONS)}))})),n.transforms=[].concat(f(t.transforms),f(n.transforms)),n}},{key:"isType",value:function(e){return null==e?!(!this.spec.nullable||null!==e)||!(!this.spec.optional||void 0!==e):this._typeCheck(e)}},{key:"resolve",value:function(e){var t=this;if(t.conditions.length){var n=t.conditions;(t=t.clone()).conditions=[],t=(t=n.reduce((function(t,n){return n.resolve(t,e)}),t)).resolve(e)}return t}},{key:"resolveOptions",value:function(e){var t,n,r;return Object.assign({},e,{from:e.from||[],strict:null!=(t=e.strict)?t:this.spec.strict,abortEarly:null!=(n=e.abortEarly)?n:this.spec.abortEarly,recursive:null!=(r=e.recursive)?r:this.spec.recursive})}},{key:"cast",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.resolve(Object.assign({value:e},t)),r="ignore-optionality"===t.assert,i=n._cast(e,t);if(!1!==t.assert&&!n.isType(i)){if(r&&pz(i))return i;var a=JB(e),o=JB(i);throw new TypeError("The value of ".concat(t.path||"field"," could not be cast to a value ")+'that satisfies the schema type: "'.concat(n.type,'". \n\n')+"attempted value: ".concat(a," \n")+(o!==a?"result of cast: ".concat(o):""))}return i}},{key:"_cast",value:function(e,t){var n=this,r=void 0===e?e:this.transforms.reduce((function(t,r){return r.call(n,t,e,n)}),e);return void 0===r&&(r=this.getDefault(t)),r}},{key:"_validate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=n.path,o=n.originalValue,s=void 0===o?e:o,u=n.strict,c=void 0===u?this.spec.strict:u,l=e;c||(l=this._cast(l,Object.assign({assert:!1},n)));for(var h=[],f=0,d=Object.values(this.internalTests);f<d.length;f++){var p=d[f];p&&h.push(p)}this.runTests({path:a,value:l,originalValue:s,options:n,tests:h},r,(function(e){if(e.length)return i(e,l);t.runTests({path:a,value:l,originalValue:s,options:n,tests:t.tests},r,i)}))}},{key:"runTests",value:function(e,t,n){var r=!1,i=e.tests,a=e.value,o=e.originalValue,s=e.path,u=e.options,c=function(e){r||(r=!0,t(e,a))},l=function(e){r||(r=!0,n(e,a))},h=i.length,f=[];if(!h)return l([]);for(var d={value:a,originalValue:o,path:s,options:u,schema:this},p=0;p<i.length;p++){(0,i[p])(d,c,(function(e){e&&(f=f.concat(e)),--h<=0&&l(f)}))}}},{key:"asNestedTest",value:function(e){var t,n=this,r=e.key,i=e.index,a=e.parent,o=e.parentPath,s=e.originalParent,u=e.options,c=null!=r?r:i;if(null==c)throw TypeError("Must include `key` or `index` for nested validations");var l="number"===typeof c,h=a[c],f=Object.assign({},u,(Gn(t={strict:!0,parent:a,value:h,originalValue:s[c],key:void 0},l?"index":"key",c),Gn(t,"path",l||c.includes(".")?"".concat(o||"","[").concat(h?c:'"'.concat(c,'"'),"]"):(o?"".concat(o,"."):"")+r),t));return function(e,t,r){return n.resolve(f)._validate(h,f,t,r)}}},{key:"validate",value:function(e,t){var n=this.resolve(Object.assign({},t,{value:e}));return new Promise((function(r,i){return n._validate(e,t,(function(e,t){ez.isError(e)&&(e.value=t),i(e)}),(function(e,t){e.length?i(new ez(e,t)):r(t)}))}))}},{key:"validateSync",value:function(e,t){var n;return this.resolve(Object.assign({},t,{value:e}))._validate(e,Object.assign({},t,{sync:!0}),(function(e,t){throw ez.isError(e)&&(e.value=t),e}),(function(t,r){if(t.length)throw new ez(t,e);n=r})),n}},{key:"isValid",value:function(e,t){return this.validate(e,t).then((function(){return!0}),(function(e){if(ez.isError(e))return!1;throw e}))}},{key:"isValidSync",value:function(e,t){try{return this.validateSync(e,t),!0}catch(n){if(ez.isError(n))return!1;throw n}}},{key:"_getDefault",value:function(e){var t=this.spec.default;return null==t?t:"function"===typeof t?t.call(this):gz(t)}},{key:"getDefault",value:function(e){return this.resolve(e||{})._getDefault(e)}},{key:"default",value:function(e){return 0===arguments.length?this._getDefault():this.clone({default:e})}},{key:"strict",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.clone({strict:e})}},{key:"nullability",value:function(e,t){var n=this.clone({nullable:e});return n.internalTests.nullable=vz({message:t,name:"nullable",test:function(e){return null!==e||this.schema.spec.nullable}}),n}},{key:"optionality",value:function(e,t){var n=this.clone({optional:e});return n.internalTests.optionality=vz({message:t,name:"optionality",test:function(e){return void 0!==e||this.schema.spec.optional}}),n}},{key:"optional",value:function(){return this.optionality(!0)}},{key:"defined",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tz.defined;return this.optionality(!1,e)}},{key:"nullable",value:function(){return this.nullability(!0)}},{key:"nonNullable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tz.notNull;return this.nullability(!1,e)}},{key:"required",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tz.required;return this.clone().withMutation((function(t){return t.nonNullable(e).defined(e)}))}},{key:"notRequired",value:function(){return this.clone().withMutation((function(e){return e.nullable().optional()}))}},{key:"transform",value:function(e){var t=this.clone();return t.transforms.push(e),t}},{key:"test",value:function(){var e;if(void 0===(e=1===arguments.length?"function"===typeof(arguments.length<=0?void 0:arguments[0])?{test:arguments.length<=0?void 0:arguments[0]}:arguments.length<=0?void 0:arguments[0]:2===arguments.length?{name:arguments.length<=0?void 0:arguments[0],test:arguments.length<=1?void 0:arguments[1]}:{name:arguments.length<=0?void 0:arguments[0],message:arguments.length<=1?void 0:arguments[1],test:arguments.length<=2?void 0:arguments[2]}).message&&(e.message=tz.default),"function"!==typeof e.test)throw new TypeError("`test` is a required parameters");var t=this.clone(),n=vz(e),r=e.exclusive||e.name&&!0===t.exclusiveTests[e.name];if(e.exclusive&&!e.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return e.name&&(t.exclusiveTests[e.name]=!!e.exclusive),t.tests=t.tests.filter((function(t){if(t.OPTIONS.name===e.name){if(r)return!1;if(t.OPTIONS.test===n.OPTIONS.test)return!1}return!0})),t.tests.push(n),t}},{key:"when",value:function(e,t){Array.isArray(e)||"string"===typeof e||(t=e,e=".");var n=this.clone(),r=XB(e).map((function(e){return new dz(e)}));return r.forEach((function(e){e.isSibling&&n.deps.push(e.key)})),n.conditions.push("function"===typeof t?new lz(r,t):lz.fromOptions(r,t)),n}},{key:"typeError",value:function(e){var t=this.clone();return t.internalTests.typeError=vz({message:e,name:"typeError",skipAbsent:!0,test:function(e){return!!this.schema._typeCheck(e)||this.createError({params:{type:this.schema.type}})}}),t}},{key:"oneOf",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tz.oneOf,n=this.clone();return e.forEach((function(e){n._whitelist.add(e),n._blacklist.delete(e)})),n.internalTests.whiteList=vz({message:t,name:"oneOf",skipAbsent:!0,test:function(e){var t=this.schema._whitelist,n=t.resolveAll(this.resolve);return!!n.includes(e)||this.createError({params:{values:Array.from(t).join(", "),resolved:n}})}}),n}},{key:"notOneOf",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tz.notOneOf,n=this.clone();return e.forEach((function(e){n._blacklist.add(e),n._whitelist.delete(e)})),n.internalTests.blacklist=vz({message:t,name:"notOneOf",test:function(e){var t=this.schema._blacklist,n=t.resolveAll(this.resolve);return!n.includes(e)||this.createError({params:{values:Array.from(t).join(", "),resolved:n}})}}),n}},{key:"strip",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.clone();return t.spec.strip=e,t}},{key:"describe",value:function(e){var t=(e?this.resolve(e):this).clone(),n=t.spec,r=n.label,i={meta:n.meta,label:r,optional:n.optional,nullable:n.nullable,default:t.getDefault(e),type:t.type,oneOf:t._whitelist.describe(),notOneOf:t._blacklist.describe(),tests:t.tests.map((function(e){return{name:e.OPTIONS.name,params:e.OPTIONS.params}})).filter((function(e,t,n){return n.findIndex((function(t){return t.name===e.name}))===t}))};return i}}]),e}();kz.prototype.__isYupSchema__=!0;for(var bz=function(){var e=_z[wz];kz.prototype["".concat(e,"At")]=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=yz(this,t,n,r.context),a=i.parent,o=i.parentPath;return i.schema[e](a&&a[o],Object.assign({},r,{parent:a,path:t}))}},wz=0,_z=["validate","validateSync"];wz<_z.length;wz++)bz();for(var xz=0,Sz=["equals","is"];xz<Sz.length;xz++){var Ez=Sz[xz];kz.prototype[Ez]=kz.prototype.oneOf}for(var Tz=0,Iz=["not","nope"];Tz<Iz.length;Tz++){var Cz=Iz[Tz];kz.prototype[Cz]=kz.prototype.notOneOf}var Az=function(){return!0};var Nz=function(e){k(n,e);var t=x(n);function n(e){return d(this,n),t.call(this,"function"===typeof e?{type:"mixed",check:e}:Object.assign({type:"mixed",check:Az},e))}return m(n)}(kz);Nz.prototype;var Pz=function(e){k(n,e);var t=x(n);function n(){var e;return d(this,n),e=t.call(this,{type:"boolean",check:function(e){return e instanceof Boolean&&(e=e.valueOf()),"boolean"===typeof e}}),e.withMutation((function(){e.transform((function(e,t,n){if(n.spec.coerce&&!n.isType(e)){if(/^(true|1)$/i.test(String(e)))return!0;if(/^(false|0)$/i.test(String(e)))return!1}return e}))})),e}return m(n,[{key:"isTrue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:az.isValue;return this.test({message:e,name:"is-value",exclusive:!0,params:{value:"true"},test:function(e){return pz(e)||!0===e}})}},{key:"isFalse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:az.isValue;return this.test({message:e,name:"is-value",exclusive:!0,params:{value:"false"},test:function(e){return pz(e)||!1===e}})}},{key:"default",value:function(e){return nf(b(n.prototype),"default",this).call(this,e)}},{key:"defined",value:function(e){return nf(b(n.prototype),"defined",this).call(this,e)}},{key:"optional",value:function(){return nf(b(n.prototype),"optional",this).call(this)}},{key:"required",value:function(e){return nf(b(n.prototype),"required",this).call(this,e)}},{key:"notRequired",value:function(){return nf(b(n.prototype),"notRequired",this).call(this)}},{key:"nullable",value:function(){return nf(b(n.prototype),"nullable",this).call(this)}},{key:"nonNullable",value:function(e){return nf(b(n.prototype),"nonNullable",this).call(this,e)}},{key:"strip",value:function(e){return nf(b(n.prototype),"strip",this).call(this,e)}}]),n}(kz);Pz.prototype;var Rz=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Oz=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,Dz=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Lz=function(e){return pz(e)||e===e.trim()},Fz={}.toString();function Mz(){return new jz}var jz=function(e){k(n,e);var t=x(n);function n(){var e;return d(this,n),e=t.call(this,{type:"string",check:function(e){return e instanceof String&&(e=e.valueOf()),"string"===typeof e}}),e.withMutation((function(){e.transform((function(e,t,n){if(!n.spec.coerce||n.isType(e))return e;if(Array.isArray(e))return e;var r=null!=e&&e.toString?e.toString():e;return r===Fz?e:r}))})),e}return m(n,[{key:"required",value:function(e){return nf(b(n.prototype),"required",this).call(this,e).withMutation((function(t){return t.test({message:e||tz.required,name:"required",skipAbsent:!0,test:function(e){return!!e.length}})}))}},{key:"notRequired",value:function(){return nf(b(n.prototype),"notRequired",this).call(this).withMutation((function(e){return e.tests=e.tests.filter((function(e){return"required"!==e.OPTIONS.name})),e}))}},{key:"length",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nz.length;return this.test({message:t,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test:function(t){return t.length===this.resolve(e)}})}},{key:"min",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nz.min;return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test:function(t){return t.length>=this.resolve(e)}})}},{key:"max",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nz.max;return this.test({name:"max",exclusive:!0,message:t,params:{max:e},skipAbsent:!0,test:function(t){return t.length<=this.resolve(e)}})}},{key:"matches",value:function(e,t){var n,r,i=!1;if(t)if("object"===typeof t){var a=t.excludeEmptyString;i=void 0!==a&&a,n=t.message,r=t.name}else n=t;return this.test({name:r||"matches",message:n||nz.matches,params:{regex:e},skipAbsent:!0,test:function(t){return""===t&&i||-1!==t.search(e)}})}},{key:"email",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nz.email;return this.matches(Rz,{name:"email",message:e,excludeEmptyString:!0})}},{key:"url",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nz.url;return this.matches(Oz,{name:"url",message:e,excludeEmptyString:!0})}},{key:"uuid",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nz.uuid;return this.matches(Dz,{name:"uuid",message:e,excludeEmptyString:!1})}},{key:"ensure",value:function(){return this.default("").transform((function(e){return null===e?"":e}))}},{key:"trim",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nz.trim;return this.transform((function(e){return null!=e?e.trim():e})).test({message:e,name:"trim",test:Lz})}},{key:"lowercase",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nz.lowercase;return this.transform((function(e){return pz(e)?e:e.toLowerCase()})).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:function(e){return pz(e)||e===e.toLowerCase()}})}},{key:"uppercase",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nz.uppercase;return this.transform((function(e){return pz(e)?e:e.toUpperCase()})).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:function(e){return pz(e)||e===e.toUpperCase()}})}}]),n}(kz);Mz.prototype=jz.prototype;var Uz=function(e){k(n,e);var t=x(n);function n(){var e;return d(this,n),e=t.call(this,{type:"number",check:function(e){return e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&!function(e){return e!=+e}(e)}}),e.withMutation((function(){e.transform((function(e,t,n){if(!n.spec.coerce)return e;var r=e;if("string"===typeof r){if(""===(r=r.replace(/\s/g,"")))return NaN;r=+r}return n.isType(r)||null===r?r:parseFloat(r)}))})),e}return m(n,[{key:"min",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rz.min;return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test:function(t){return t>=this.resolve(e)}})}},{key:"max",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rz.max;return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test:function(t){return t<=this.resolve(e)}})}},{key:"lessThan",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rz.lessThan;return this.test({message:t,name:"max",exclusive:!0,params:{less:e},skipAbsent:!0,test:function(t){return t<this.resolve(e)}})}},{key:"moreThan",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rz.moreThan;return this.test({message:t,name:"min",exclusive:!0,params:{more:e},skipAbsent:!0,test:function(t){return t>this.resolve(e)}})}},{key:"positive",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rz.positive;return this.moreThan(0,e)}},{key:"negative",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rz.negative;return this.lessThan(0,e)}},{key:"integer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rz.integer;return this.test({name:"integer",message:e,skipAbsent:!0,test:function(e){return Number.isInteger(e)}})}},{key:"truncate",value:function(){return this.transform((function(e){return pz(e)?e:0|e}))}},{key:"round",value:function(e){var t,n=["ceil","floor","round","trunc"];if("trunc"===(e=(null==(t=e)?void 0:t.toLowerCase())||"round"))return this.truncate();if(-1===n.indexOf(e.toLowerCase()))throw new TypeError("Only valid options for round() are: "+n.join(", "));return this.transform((function(t){return pz(t)?t:Math[e](t)}))}}]),n}(kz);Uz.prototype;var Vz=/^(\d{4}|[+\-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;var qz=new Date("");function Bz(){return new zz}var zz=function(e){k(n,e);var t=x(n);function n(){var e;return d(this,n),e=t.call(this,{type:"date",check:function(e){return t=e,"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(e.getTime());var t}}),e.withMutation((function(){e.transform((function(e,t,r){return!r.spec.coerce||r.isType(e)||null===e?e:(e=function(e){var t,n,r=[1,4,5,6,7,10,11],i=0;if(n=Vz.exec(e)){for(var a,o=0;a=r[o];++o)n[a]=+n[a]||0;n[2]=(+n[2]||1)-1,n[3]=+n[3]||1,n[7]=n[7]?String(n[7]).substr(0,3):0,void 0!==n[8]&&""!==n[8]||void 0!==n[9]&&""!==n[9]?("Z"!==n[8]&&void 0!==n[9]&&(i=60*n[10]+n[11],"+"===n[9]&&(i=0-i)),t=Date.UTC(n[1],n[2],n[3],n[4],n[5]+i,n[6],n[7])):t=+new Date(n[1],n[2],n[3],n[4],n[5],n[6],n[7])}else t=Date.parse?Date.parse(e):NaN;return t}(e),isNaN(e)?n.INVALID_DATE:new Date(e))}))})),e}return m(n,[{key:"prepareParam",value:function(e,t){var n;if(dz.isRef(e))n=e;else{var r=this.cast(e);if(!this._typeCheck(r))throw new TypeError("`".concat(t,"` must be a Date or a value that can be `cast()` to a Date"));n=r}return n}},{key:"min",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:iz.min,n=this.prepareParam(e,"min");return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test:function(e){return e>=this.resolve(n)}})}},{key:"max",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:iz.max,n=this.prepareParam(e,"max");return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test:function(e){return e<=this.resolve(n)}})}}]),n}(kz);function Wz(e,t){var n=1/0;return e.some((function(e,r){var i;if(null!=(i=t.path)&&i.includes(e))return n=r,!0})),n}function Hz(e){return function(t,n){return Wz(e,t)-Wz(e,n)}}zz.INVALID_DATE=qz,Bz.prototype=zz.prototype,Bz.INVALID_DATE=qz;var Kz=function(e,t,n){if("string"!==typeof e)return e;var r=e;try{r=JSON.parse(e)}catch(i){}return n.isType(r)?r:e};function Gz(e){if("fields"in e){for(var t={},n=0,r=Object.entries(e.fields);n<r.length;n++){var i=l(r[n],2),a=i[0],o=i[1];t[a]=Gz(o)}return e.setFields(t)}if("array"===e.type){var s=e.optional();return s.innerType&&(s.innerType=Gz(s.innerType)),s}return"tuple"===e.type?e.optional().clone({types:e.spec.types.map(Gz)}):"optional"in e?e.optional():e}var Qz=function(e){return"[object Object]"===Object.prototype.toString.call(e)};var $z=Hz([]);function Yz(e){return new Jz(e)}var Jz=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),r=t.call(this,{type:"object",check:function(e){return Qz(e)||"function"===typeof e}}),r.fields=Object.create(null),r._sortErrors=$z,r._nodes=[],r._excludedEdges=[],r.withMutation((function(){e&&r.shape(e)})),r}return m(n,[{key:"_cast",value:function(e){var t,r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=nf(b(n.prototype),"_cast",this).call(this,e,i);if(void 0===a)return this.getDefault(i);if(!this._typeCheck(a))return a;var o,s=this.fields,u=null!=(t=i.stripUnknown)?t:this.spec.noUnknown,c=[].concat(this._nodes,Object.keys(a).filter((function(e){return!r._nodes.includes(e)}))),l={},h=Object.assign({},i,{parent:l,__validating:i.__validating||!1}),f=!1,d=I(c);try{for(d.s();!(o=d.n()).done;){var p=o.value,v=s[p],y=p in a;if(v){var m,g=a[p];h.path=(i.path?"".concat(i.path,"."):"")+p;var k=(v=v.resolve({value:g,context:i.context,parent:l}))instanceof kz?v.spec:void 0,w=null==k?void 0:k.strict;if(null!=k&&k.strip){f=f||p in a;continue}void 0!==(m=i.__validating&&w?a[p]:v.cast(a[p],h))&&(l[p]=m)}else y&&!u&&(l[p]=a[p]);y===p in l&&l[p]===a[p]||(f=!0)}}catch(_){d.e(_)}finally{d.f()}return f?l:a}},{key:"_validate",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=r.from,s=void 0===o?[]:o,u=r.originalValue,c=void 0===u?e:u,l=r.recursive,h=void 0===l?this.spec.recursive:l;r.from=[{schema:this,value:c}].concat(f(s)),r.__validating=!0,r.originalValue=c,nf(b(n.prototype),"_validate",this).call(this,e,r,i,(function(e,n){if(h&&Qz(n)){c=c||n;var o,s=[],u=I(t._nodes);try{for(u.s();!(o=u.n()).done;){var l=o.value,f=t.fields[l];f&&!dz.isRef(f)&&s.push(f.asNestedTest({options:r,key:l,parent:n,parentPath:r.path,originalParent:c}))}}catch(d){u.e(d)}finally{u.f()}t.runTests({tests:s,value:n,originalValue:c,options:r},i,(function(r){a(r.sort(t._sortErrors).concat(e),n)}))}else a(e,n)}))}},{key:"clone",value:function(e){var t=nf(b(n.prototype),"clone",this).call(this,e);return t.fields=Object.assign({},this.fields),t._nodes=this._nodes,t._excludedEdges=this._excludedEdges,t._sortErrors=this._sortErrors,t}},{key:"concat",value:function(e){for(var t=this,r=nf(b(n.prototype),"concat",this).call(this,e),i=r.fields,a=0,o=Object.entries(this.fields);a<o.length;a++){var s=l(o[a],2),u=s[0],c=s[1],h=i[u];i[u]=void 0===h?c:h}return r.withMutation((function(n){return n.setFields(i,[].concat(f(t._excludedEdges),f(e._excludedEdges)))}))}},{key:"_getDefault",value:function(e){var t=this;if("default"in this.spec)return nf(b(n.prototype),"_getDefault",this).call(this,e);if(this._nodes.length){var r={};return this._nodes.forEach((function(n){var i,a=t.fields[n],o=e;null!=(i=o)&&i.value&&(o=Object.assign({},o,{parent:o.value,value:o.value[n]})),r[n]=a&&"getDefault"in a?a.getDefault(o):void 0})),r}}},{key:"setFields",value:function(e,t){var n=this.clone();return n.fields=e,n._nodes=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=new Set,i=new Set(t.map((function(e){var t=l(e,2),n=t[0],r=t[1];return"".concat(n,"-").concat(r)})));function a(e,t){var a=(0,qB.split)(e)[0];r.add(a),i.has("".concat(t,"-").concat(a))||n.push([t,a])}for(var o=function(){var t=u[s],n=e[t];r.add(t),dz.isRef(n)&&n.isSibling?a(n.path,t):cz(n)&&"deps"in n&&n.deps.forEach((function(e){return a(e,t)}))},s=0,u=Object.keys(e);s<u.length;s++)o();return WB().array(Array.from(r),n).reverse()}(e,t),n._sortErrors=Hz(Object.keys(e)),t&&(n._excludedEdges=t),n}},{key:"shape",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.clone().withMutation((function(n){var r=n._excludedEdges;return t.length&&(Array.isArray(t[0])||(t=[t]),r=[].concat(f(n._excludedEdges),f(t))),n.setFields(Object.assign(n.fields,e),r)}))}},{key:"partial",value:function(){for(var e={},t=0,n=Object.entries(this.fields);t<n.length;t++){var r=l(n[t],2),i=r[0],a=r[1];e[i]="optional"in a&&a.optional instanceof Function?a.optional():a}return this.setFields(e)}},{key:"deepPartial",value:function(){return Gz(this)}},{key:"pick",value:function(e){var t,n={},r=I(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;this.fields[i]&&(n[i]=this.fields[i])}}catch(a){r.e(a)}finally{r.f()}return this.setFields(n)}},{key:"omit",value:function(e){var t,n=Object.assign({},this.fields),r=I(e);try{for(r.s();!(t=r.n()).done;){delete n[t.value]}}catch(i){r.e(i)}finally{r.f()}return this.setFields(n)}},{key:"from",value:function(e,t,n){var r=(0,qB.getter)(e,!0);return this.transform((function(i){if(!i)return i;var a=i;return function(e,t){var n=f((0,qB.normalizePath)(t));if(1===n.length)return n[0]in e;var r=n.pop(),i=(0,qB.getter)((0,qB.join)(n),!0)(e);return!(!i||!(r in i))}(i,e)&&(a=Object.assign({},i),n||delete a[e],a[t]=r(i)),a}))}},{key:"json",value:function(){return this.transform(Kz)}},{key:"noUnknown",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oz.noUnknown;"boolean"!==typeof e&&(t=e,e=!0);var n=this.test({name:"noUnknown",exclusive:!0,message:t,test:function(t){if(null==t)return!0;var n=function(e,t){var n=Object.keys(e.fields);return Object.keys(t).filter((function(e){return-1===n.indexOf(e)}))}(this.schema,t);return!e||0===n.length||this.createError({params:{unknown:n.join(", ")}})}});return n.spec.noUnknown=e,n}},{key:"unknown",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oz.noUnknown;return this.noUnknown(!e,t)}},{key:"transformKeys",value:function(e){return this.transform((function(t){if(!t)return t;for(var n={},r=0,i=Object.keys(t);r<i.length;r++){var a=i[r];n[e(a)]=t[a]}return n}))}},{key:"camelCase",value:function(){return this.transformKeys(BB.camelCase)}},{key:"snakeCase",value:function(){return this.transformKeys(BB.snakeCase)}},{key:"constantCase",value:function(){return this.transformKeys((function(e){return(0,BB.snakeCase)(e).toUpperCase()}))}},{key:"describe",value:function(e){var t=nf(b(n.prototype),"describe",this).call(this,e);t.fields={};for(var r=0,i=Object.entries(this.fields);r<i.length;r++){var a,o=l(i[r],2),s=o[0],u=o[1],c=e;null!=(a=c)&&a.value&&(c=Object.assign({},c,{parent:c.value,value:c.value[s]})),t.fields[s]=u.describe(c)}return t}}]),n}(kz);Yz.prototype=Jz.prototype;var Xz=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),r=t.call(this,{type:"array",spec:{types:e},check:function(e){return Array.isArray(e)}}),r.innerType=void 0,r.innerType=e,r}return m(n,[{key:"_cast",value:function(e,t){var r=this,i=nf(b(n.prototype),"_cast",this).call(this,e,t);if(!this._typeCheck(i)||!this.innerType)return i;var a=!1,o=i.map((function(e,n){var i=r.innerType.cast(e,Object.assign({},t,{path:"".concat(t.path||"","[").concat(n,"]")}));return i!==e&&(a=!0),i}));return a?o:i}},{key:"_validate",value:function(e){var t,r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,s=this.innerType,u=null!=(t=i.recursive)?t:this.spec.recursive;null!=i.originalValue&&i.originalValue,nf(b(n.prototype),"_validate",this).call(this,e,i,a,(function(t,n){var c;if(u&&s&&r._typeCheck(n)){for(var l=new Array(n.length),h=0;h<n.length;h++){var f;l[h]=s.asNestedTest({options:i,index:h,parent:n,parentPath:i.path,originalParent:null!=(f=i.originalValue)?f:e})}r.runTests({value:n,tests:l,originalValue:null!=(c=i.originalValue)?c:e,options:i},a,(function(e){return o(e.concat(t),n)}))}else o(t,n)}))}},{key:"clone",value:function(e){var t=nf(b(n.prototype),"clone",this).call(this,e);return t.innerType=this.innerType,t}},{key:"json",value:function(){return this.transform(Kz)}},{key:"concat",value:function(e){var t=nf(b(n.prototype),"concat",this).call(this,e);return t.innerType=this.innerType,e.innerType&&(t.innerType=t.innerType?t.innerType.concat(e.innerType):e.innerType),t}},{key:"of",value:function(e){var t=this.clone();if(!cz(e))throw new TypeError("`array.of()` sub-schema must be a valid yup schema not: "+JB(e));return t.innerType=e,t.spec=Object.assign({},t.spec,{types:e}),t}},{key:"length",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sz.length;return this.test({message:t,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test:function(t){return t.length===this.resolve(e)}})}},{key:"min",value:function(e,t){return t=t||sz.min,this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test:function(t){return t.length>=this.resolve(e)}})}},{key:"max",value:function(e,t){return t=t||sz.max,this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test:function(t){return t.length<=this.resolve(e)}})}},{key:"ensure",value:function(){var e=this;return this.default((function(){return[]})).transform((function(t,n){return e._typeCheck(t)?t:null==n?[]:[].concat(n)}))}},{key:"compact",value:function(e){var t=e?function(t,n,r){return!e(t,n,r)}:function(e){return!!e};return this.transform((function(e){return null!=e?e.filter(t):e}))}},{key:"describe",value:function(e){var t=nf(b(n.prototype),"describe",this).call(this,e);if(this.innerType){var r,i=e;null!=(r=i)&&r.value&&(i=Object.assign({},i,{parent:i.value,value:i.value[0]})),t.innerType=this.innerType.describe(i)}return t}}]),n}(kz);Xz.prototype;var Zz=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),r=t.call(this,{type:"tuple",spec:{types:e},check:function(e){var t=this.spec.types;return Array.isArray(e)&&e.length===t.length}}),r.withMutation((function(){r.typeError(uz)})),r}return m(n,[{key:"_cast",value:function(e,t){var r=this.spec.types,i=nf(b(n.prototype),"_cast",this).call(this,e,t);if(!this._typeCheck(i))return i;var a=!1,o=r.map((function(e,n){var r=e.cast(i[n],Object.assign({},t,{path:"".concat(t.path||"","[").concat(n,"]")}));return r!==i[n]&&(a=!0),r}));return a?o:i}},{key:"_validate",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=this.spec.types;nf(b(n.prototype),"_validate",this).call(this,e,r,i,(function(n,s){var u;if(t._typeCheck(s)){var c,h=[],f=I(o.entries());try{for(f.s();!(c=f.n()).done;){var d,p=l(c.value,2),v=p[0],y=p[1];h[v]=y.asNestedTest({options:r,index:v,parent:s,parentPath:r.path,originalParent:null!=(d=r.originalValue)?d:e})}}catch(m){f.e(m)}finally{f.f()}t.runTests({value:s,tests:h,originalValue:null!=(u=r.originalValue)?u:e,options:r},i,(function(e){return a(e.concat(n),s)}))}else a(n,s)}))}},{key:"describe",value:function(e){var t=nf(b(n.prototype),"describe",this).call(this,e);return t.innerType=this.spec.types.map((function(t,n){var r,i=e;return null!=(r=i)&&r.value&&(i=Object.assign({},i,{parent:i.value,value:i.value[n]})),t.describe(i)})),t}}]),n}(kz);Zz.prototype;var eW=Yz().shape({email:Mz().email("Enter valid email").required("Required"),password:Mz().min(5).max(20).matches(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{5,20}$/,{message:"Create stronger password"}).required("Required")});function tW(e,t){var n=l((0,i.useState)(!1),2),r=n[0],a=n[1],o=OB({initialValues:{email:"",password:""},validationSchema:eW,onSubmit:function(t,n){e.onSubmit(t),a(!0),setTimeout((function(){a(!1)}),3e3)}}),s=o.values,u=o.errors,c=o.touched,h=o.handleBlur,f=o.handleChange,d=o.handleSubmit;return(0,Un.jsxs)("form",{autoComplete:"off",onSubmit:d,children:[(0,Un.jsx)("label",{htmlFor:"email",children:"Email"}),(0,Un.jsx)("input",{style:{textAlign:"left"},className:"my-input",value:s.email,onChange:f,onBlur:h,id:"email",type:"email",placeholder:"Enter your email"}),c.email&&u.email&&(0,Un.jsx)("div",{className:"error",children:u.email}),(0,Un.jsx)("label",{htmlFor:"password",children:"Password"}),(0,Un.jsx)("input",{style:{textAlign:"left"},className:"my-input",value:s.password,onChange:f,onBlur:h,id:"password",type:"password",placeholder:"Enter your password"}),c.password&&u.password&&(0,Un.jsx)("div",{className:"error",children:u.password}),(0,Un.jsx)("button",{disabled:r,type:"submit",children:"Submit"})]})}var nW="token";function rW(e){console.log(e),localStorage.setItem(nW,e)}function iW(){var e=localStorage.getItem(nW);if(!e||"null"==e)return[];var t=JSON.parse(atob(e.split(".")[1])),n=[];for(var r in t)n.push({name:r,value:t[r]});return n}function aW(e,t){localStorage.setItem("id",e),localStorage.setItem("email",t)}var oW="https://cacarrot-server.herokuapp.com/",sW=function(e,t){var n=new Request("".concat(oW).concat(t),{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST","Access-Control-Allow-Headers":"Content-Type"},mode:"cors",body:JSON.stringify({credentials:e})});return fetch(n).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){console.error("Error:",e)}))};function uW(e){return(0,Un.jsx)(Un.Fragment,{children:e.errors?(0,Un.jsx)("ul",{style:{color:"red"},children:e.errors.map((function(e,t){return(0,Un.jsx)("li",{children:e},t)}))}):null})}var cW=[{path:"/login",component:function(){var e=l((0,i.useState)([]),2),t=e[0],n=e[1],r=(0,i.useContext)(mj).update,a=we();function o(e){return s.apply(this,arguments)}function s(){return(s=Kn(Wn().mark((function e(t){var i;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n([]),e.next=4,sW(t,"login");case 4:rW((i=e.sent).token),r(iW()),aW(i.user.id,i.user.email),i&&(a("/"),a(0)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),n(["Your login or password was wrong!"]);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}return(0,Un.jsxs)(Un.Fragment,{children:[(0,Un.jsx)("h1",{style:{fontSize:"3em"},children:"Login"}),(0,Un.jsx)(tW,{model:{email:"",password:""},onSubmit:function(){var e=Kn(Wn().mark((function e(t){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),submitButtonName:"Login"}),(0,Un.jsx)("span",{style:{color:"red"},children:t})]})}},{path:"/register",component:function(){var e=l((0,i.useState)([]),2),t=e[0],n=e[1],r=(0,i.useContext)(mj).update,a=we();function o(e){return s.apply(this,arguments)}function s(){return(s=Kn(Wn().mark((function e(t){var i;return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n([]),e.next=4,sW(t,"register");case 4:rW((i=e.sent).token),r(iW()),aW(i.user.id,i.user.email),i&&(a("/"),a(0)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),n(["The name is already taken"]);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}return(0,Un.jsxs)(Un.Fragment,{children:[(0,Un.jsx)("h1",{children:"Register"}),(0,Un.jsx)(uW,{errors:t}),(0,Un.jsx)(tW,{model:{email:"",password:""},onSubmit:function(){var e=Kn(Wn().mark((function e(t){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),submitButtonName:"Register"})]})}},{path:"create",component:function(){var e=we(),t=l((0,i.useState)(!1),2),n=t[0],r=t[1],a=l((0,i.useState)(!1),2),o=a[0],s=a[1];function u(e,t,n){n(!t)}var c=l((0,i.useState)([]),2),h=c[0],f=c[1];(0,i.useEffect)((function(){!function(e,t){bM.apply(this,arguments)}(localStorage.getItem("id"),f)}),[]),(0,i.useEffect)((function(){v(h[0])}),[h]);var d=l((0,i.useState)(h[0]),2),p=d[0],v=d[1];function y(e){v(h[e-1])}function m(){for(var e,t,n="",r=0;r<6;r++){var i=(e=0,t=9,Math.floor(Math.random()*(t-e+1))+e);n+="".concat(i)}return n}var g=!p;return(0,Un.jsx)(Un.Fragment,{children:(0,Un.jsxs)("section",{className:"flex-section",children:[(0,Un.jsxs)("article",{className:"half-article",children:[(0,Un.jsx)("button",{className:"my-button",onClick:function(e){u(0,n,r)},style:{height:"100%",aspectRatio:"1"},children:"Choose game template"}),(0,Un.jsx)(qn,{isOpen:n,toggleModal:function(e){u(0,n,r)},children:(0,Un.jsx)(Un.Fragment,{children:(0,Un.jsx)(zn,{templates:h,chooseTemplate:y,choosenTemplate:p})}),disableSubmit:g,submitButtonText:"Choose",onSubmit:function(){var t={template:p,gamecode:m()};e("/game-code/".concat(t.gamecode),{state:t}),localStorage.setItem("gameTemplate",JSON.stringify(p))}})]}),(0,Un.jsxs)("article",{className:"half-article",children:[(0,Un.jsx)("button",{className:"my-button",onClick:function(e){u(0,o,s)},style:{height:"100%",aspectRatio:"1"},children:"Edit game templates"}),(0,Un.jsx)(qn,{isOpen:o,toggleModal:function(e){u(0,o,s)},children:(0,Un.jsx)(Un.Fragment,{children:(0,Un.jsx)(zn,{templates:h,chooseTemplate:y,choosenTemplate:p})}),disableSubmit:g,submitButtonText:"Choose",onSubmit:function(){e("/edit-template",{state:p})}})]}),(0,Un.jsx)("article",{className:"half-article",children:(0,Un.jsx)("button",{className:"my-button",onClick:function(){e("/create-template")},style:{height:"100%",aspectRatio:"1"},children:"Create new game template"})})]})})}},{path:"create-template",component:function(){var e=we(),t=l((0,i.useState)(!1),2),n=t[0],r=t[1];function a(e){r(!n)}var o=l((0,i.useState)([{questionNumber:1,question:"",answerA:"",answerB:"",answerC:"",answerD:"",correctAnswer:""},{questionNumber:2,question:"",answerA:"",answerB:"",answerC:"",answerD:"",correctAnswer:""}]),2),s=o[0],u=o[1],c=l((0,i.useState)(1),2),h=c[0],f=c[1],d=l((0,i.useState)(10),2),p=d[0],v=d[1],y=l((0,i.useState)(""),2),m=y[0],g=y[1],k=l((0,i.useState)(""),2),b=k[0],w=k[1],_=function(){var e=Kn(Wn().mark((function e(t){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t>=s.length||t<h)&&h>1?f(h-1):f(1),EM(t,u);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,i.useEffect)((function(){console.log(s)}),[s]),(0,Un.jsxs)("main",{className:"question-placeholder",children:[(0,Un.jsx)(AM,{questions:s,setQuestions:u,choosenQuestion:h,setChoosenQuestion:f,deleteQuestion:_}),(0,Un.jsx)(xM,{question:s[h-1],questionNumber:h,setQuestions:u}),(0,Un.jsx)(IM,{toggleModal:a,questionTime:p,setQuestionTime:v,timesForAnswer:[5,10,20,30,40]}),(0,Un.jsx)(qn,{isOpen:n,toggleModal:a,children:(0,Un.jsxs)("div",{style:{width:"100%",height:"100%",textAlign:"center"},children:[(0,Un.jsx)("h2",{children:"Template name"}),(0,Un.jsx)(SM,{value:m,setValue:g,placeholder:"Enter template name",characterLimit:20,visibleWarning:!0}),b&&(0,Un.jsx)("span",{className:"error",children:b})]}),submitButtonText:"Save template",onSubmit:function(){PM(s,m,p)?e("/create"):w("You have to have at least 1 full question!")}})]})}},{path:"/edit-template",component:function(){var e=ke().state,t=we(),n=l((0,i.useState)(!1),2),r=n[0],a=n[1];function o(e){a(!r)}var s=l((0,i.useState)(e.allQuestions),2),u=s[0],c=s[1],h=l((0,i.useState)(1),2),f=h[0],d=h[1],p=l((0,i.useState)(e.questionTime),2),v=p[0],y=p[1],m=l((0,i.useState)(e.templateName),2),g=m[0],k=m[1],b=l((0,i.useState)(""),2),w=b[0],_=b[1],x=function(){var e=Kn(Wn().mark((function e(t){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t>=u.length||t<f)&&f>1?d(f-1):d(1),EM(t,c);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,Un.jsxs)("main",{className:"question-placeholder",children:[(0,Un.jsx)(AM,{questions:u,setQuestions:c,choosenQuestion:f,setChoosenQuestion:d,deleteQuestion:x}),(0,Un.jsx)(xM,{question:u[f-1],questionNumber:f,setQuestions:c}),(0,Un.jsx)(IM,{toggleModal:o,questionTime:v,setQuestionTime:y,timesForAnswer:[5,10,20,30,40]}),(0,Un.jsx)(qn,{isOpen:r,toggleModal:o,children:(0,Un.jsxs)("div",{style:{width:"100%",height:"100%",textAlign:"center"},children:[(0,Un.jsx)("h2",{children:"Template name"}),(0,Un.jsx)(SM,{value:g,setValue:k,placeholder:"Enter template name",characterLimit:20,visibleWarning:!0}),w&&(0,Un.jsx)("span",{className:"error",children:w})]}),submitButtonText:"Save template",onSubmit:function(){PM(u,g,v,e.id)?t("/create"):_("You have to have at least 1 full question!")}})]})}},{path:"/waiting-room/:code",component:function(){var e=ke().state,t=we(),n=l((0,i.useState)("waiting"),2),r=n[0],a=n[1],o=mM.child(e.game.gamecode).child("players").child("".concat(e.playerId)).onDisconnect();return(0,i.useEffect)((function(){!function(e,t){UM.apply(this,arguments)}(e.game.gamecode,a),function(){var e=localStorage.getItem("token"),t=localStorage.getItem("email"),n=localStorage.getItem("id"),r=localStorage.getItem("profileImage"),i=localStorage.getItem("username");localStorage.clear(),localStorage.setItem("token",e),localStorage.setItem("email",t),localStorage.setItem("id",n),localStorage.setItem("profileImage",r),localStorage.setItem("username",i)}(),o.remove()}),[]),(0,i.useEffect)((function(){if("started"==r){o.cancel();var n={game:e.game,username:e.username,playerNumber:e.playerId+1};localStorage.setItem("username/".concat(e.playerId+1),e.username),t("/game-player/".concat(e.game.gamecode),{state:n})}}),[r]),(0,Un.jsxs)(Un.Fragment,{children:[(0,Un.jsx)(ij,{}),(0,Un.jsx)("div",{style:{fontSize:"2em",alignItems:"center",justifyContent:"center",padding:"20px"},children:"Wait for start of game..."})]})}},{path:"/input-name/:code",component:function(){var e=ke().state,t=we(),n=l((0,i.useState)(""),2),r=n[0],a=n[1],o=l((0,i.useState)(),2),s=(o[0],o[1],l((0,i.useState)(),2)),u=s[0],c=s[1],h=l((0,i.useState)(),2),f=h[0],d=h[1],p=l((0,i.useState)(),2);return p[0],p[1],(0,i.useEffect)((function(){FH.emit("gamecode",e),FH.on("joined/".concat(e,"/").concat(FH.id),(function(n){var r={game:n.game,username:n.playerName,playerId:n.playerId};t("/waiting-room/".concat(e),{state:r})}))}),[]),(0,i.useEffect)((function(){u&&r&&(FH.emit("player-join",{socketId:FH.id,playerName:r}),c(void 0))}),[u]),(0,Un.jsxs)(Un.Fragment,{children:[(0,Un.jsx)(SM,{value:r,setValue:a,placeholder:"Input your name",characterLimit:15,visibleWarning:!0}),(0,Un.jsx)("div",{className:"error",children:f}),(0,Un.jsx)("button",{onClick:function(){!function(e,t,n,r){FM.apply(this,arguments)}(e,r,c,d)},children:"Submit name"})]})}},{path:"/game-code/:code",component:function(){var e=ke().state,t=we(),n=l((0,i.useState)({gameTemplate:e.template,players:[],gamecode:e.gamecode,started:"waiting",currentQuestion:0,time:e.template.questionTime,gamePhase:1,startingTime:3,winners:[],hostConnection:!0,hostId:FH.id}),2),r=n[0],a=n[1],o=l((0,i.useState)(!0),2),s=o[0],u=o[1];return(0,i.useEffect)((function(){oj(e,a),MM(r.gamecode,a),FH.emit("host",{code:r.gamecode,hostId:FH.id})}),[]),(0,i.useEffect)((function(){r.players.length>=1?u(!1):u(!0)}),[r.players]),(0,i.useEffect)((function(){if("started"==r.started){var e={gamestate:r};t("/game-host/".concat(r.gamecode),{state:e})}}),[r]),(0,Un.jsx)("div",{className:"column-shaped-container",children:r&&(0,Un.jsxs)(Un.Fragment,{children:[(0,Un.jsx)("h2",{children:"Your game code"}),(0,Un.jsxs)("span",{className:"column-shaped-container",children:[(0,Un.jsx)("h2",{children:e.gamecode}),r.players&&(0,Un.jsxs)("h3",{children:["Number of players in game: ",r.players.length,"/10"]})]}),(0,Un.jsx)("div",{className:"player-list",children:r.players&&0!=r.players.length&&r.players.map((function(e){return(0,Un.jsx)(yj,{player:e,image:""},e.id)}))}),(0,Un.jsx)("button",{disabled:s,className:"start-game-btn",onClick:aj,children:"Start game"})]})})}},{path:"/game-host/:code",component:function(){var e=ke().state.gamestate,t=l((0,i.useState)(e),2),n=t[0],r=t[1],a=e.gamecode,o=l((0,i.useState)("question"),2),s=o[0],u=o[1],c=l((0,i.useState)(n.gameTemplate.allQuestions[0]),2),h=c[0],f=c[1],d=l((0,i.useState)(n.players),2),p=d[0],v=d[1],y=l((0,i.useState)(!1),2),m=y[0],g=y[1],k=l((0,i.useState)(!0),2),b=k[0],w=k[1];return(0,i.useEffect)((function(){FH.emit("host-reconnect",{code:a,hostId:FH.id}),function(e){mM.child(e).child("hostConnection").onDisconnect().set(!1),fh(gM,(function(t){!0===t.val()?mM.child(e).child("hostConnection").set(!0):mM.child(e).child("hostConnection").set(!1)}))}(a),MM(a,r),setTimeout((function(){w(!1)}),1e3)}),[]),(0,i.useEffect)((function(){if(a){var e=function(){var e=Kn(Wn().mark((function e(){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GM(a,n.time,r,"time");case 2:return e.next=4,GM(a,n.hostConnection,r,"hostConnection");case 4:return e.next=6,GM(a,n.winners,r,"winners");case 6:return e.next=8,GM(a,n.gamePhase,r,"gamePhase");case 8:return e.next=10,GM(a,n.currentQuestion,r,"currentQuestion");case 10:g(!0);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}}),[a]),(0,i.useEffect)((function(){n.gamePhase&&(n.gamePhase==2*n.gameTemplate.allQuestions.length+1?u("winners"):n.gamePhase%2==0?u("statistics"):n.gamePhase%2==1&&setTimeout((function(){u("question")}),200))}),[n.gamePhase]),(0,i.useEffect)((function(){n.currentQuestion&&f(n.gameTemplate.allQuestions[n.currentQuestion])}),[n.currentQuestion]),(0,i.useEffect)((function(){!function(e,t){t(e.sort((function(e,t){return t.points-e.points})))}(n.players,v)}),[n.players]),(0,Un.jsxs)(Un.Fragment,{children:[(0,Un.jsx)(ij,{}),m&&n.hostConnection?(0,Un.jsxs)("div",{className:"column-shaped-container",style:{justifyContent:"space-between",width:"100%",height:"100%"},children:["question"==s&&(0,Un.jsx)(ZM,{currentQuestion:h,time:n.time,gamecode:n.gamecode,game:n,setGame:r}),"statistics"==s&&(0,Un.jsx)(tj,{time:n.time,players:p,setPlayers:v,gamecode:n.gamecode}),"winners"==s&&(0,Un.jsx)(rj,{winners:n.winners})]}):(0,Un.jsx)(Un.Fragment,{children:b?(0,Un.jsx)(Un.Fragment,{}):(0,Un.jsx)(cj,{message:"Waiting for connection",setTime:function(){},possibleLeave:!1})})]})}},{path:"/game-player/:code",component:function(){var e=ke().state,t=l((0,i.useState)(e.game),2),n=t[0],r=t[1],a=l((0,i.useState)(null),2),o=a[0],s=a[1],u=l((0,i.useState)(0),2),c=u[0],h=u[1],f=l((0,i.useState)(),2),d=f[0],p=f[1],v=l((0,i.useState)(0),2),y=v[0],m=v[1],g=l((0,i.useState)(!1),2),k=g[0],b=g[1],w=l((0,i.useState)((function(){var e=localStorage.getItem("time");return e&&"undefined"!=e?parseInt(JSON.parse(e)):15})),2),_=w[0],x=w[1],S=e.username?e.username:localStorage.getItem("username/".concat(e.playerNumber));return(0,i.useEffect)((function(){FH.emit("gamecode",e.game.gamecode),MM(e.game.gamecode,r)}),[]),(0,i.useEffect)((function(){if(n.gamecode&&S&&(d||function(e,t,n){VM.apply(this,arguments)}(n.gamecode,S,p),d)){var e=function(){var e=Kn(Wn().mark((function e(){return Wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GM(n.gamecode,n.players,r,"players");case 2:return e.next=4,GM(n.gamecode,n.time,r,"time");case 4:return e.next=6,GM(n.gamecode,n.startingTime,r,"startingTime");case 6:return e.next=8,GM(n.gamecode,n.hostConnection,r,"hostConnection");case 8:return e.next=10,YM(n.gamecode,c,h,"points",d.id);case 10:return e.next=12,YM(n.gamecode,o,s,"shownComponent",d.id);case 12:zM(n.gamecode,d.id,p),qM(n.gamecode,d.id,s),JM(n.gamecode,d.id,h),b(!0);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}}),[n.gamecode,S,d]),(0,i.useEffect)((function(){n.gamePhase==2*n.gameTemplate.allQuestions.length+1?(GM(n.gamecode,n.winners,r,"winners"),s("winners")):n.gamePhase%2==0?s("between"):n.gamePhase%2==1&&s("answers")}),[n.gamePhase]),(0,i.useEffect)((function(){d&&o&&KM(n.gamecode,o,"shownComponent",null===d||void 0===d?void 0:d.id)}),[o]),(0,i.useEffect)((function(){d&&n.players&&m(function(e,t){var n=0;return e.players[t].answers&&e.players[t].answers.forEach((function(t){t.questionNumber==e.currentQuestion&&(n=t.pointsFor)})),n}(n,d.id))}),[n.players,n.gamePhase]),(0,Un.jsxs)(Un.Fragment,{children:[d&&(0,Un.jsx)(vj,{player:d,points:c}),k&&n.hostConnection?(0,Un.jsx)(Un.Fragment,{children:(0,Un.jsxs)("div",{className:"column-shaped-container",style:{justifyContent:"space-between",width:"100%",height:"100%"},children:[d&&"answers"==o&&"started"==n.started&&(0,Un.jsx)(lj,{gameState:n,setGame:r,setShownComponent:s,player:d}),d&&"between"==o&&"started"==n.started&&(0,Un.jsx)(pj,{gameState:n,lastQuestionPoints:y,player:d}),"winners"==o&&"winners"==n.started&&n.winners&&(0,Un.jsx)(rj,{winners:n.winners})]})}):(0,Un.jsx)(cj,{message:"Waiting for host to reconnect",time:_,setTime:x,possibleLeave:!0})]})}},{path:"/",component:kj},{path:"*",component:kj}],lW=[],hW=cW;function fW(){var e=we();return(0,Un.jsx)("button",{className:"go-back-button",style:{height:"fit-content"},onClick:function(){e("/")},children:"Cacarrot"})}function dW(){var e=we(),t=(0,i.useContext)(mj).update;return(0,Un.jsx)("button",{onClick:function(){localStorage.removeItem(nW),localStorage.removeItem("email"),localStorage.removeItem("id"),localStorage.removeItem("profileImage"),localStorage.removeItem("username"),localStorage.removeItem("username"),t([]),e("/"),e(0)},style:{height:"fit-content"},children:"Logout"})}function pW(){return(0,Un.jsxs)("div",{className:"navbar",children:[(0,Un.jsx)(fW,{}),(0,Un.jsx)(gj,{isAuthorized:(0,Un.jsx)(Un.Fragment,{children:(0,Un.jsx)(dW,{})}),notAuthorized:(0,Un.jsx)(Un.Fragment,{})})]})}function vW(){return(0,Un.jsx)("div",{className:"landing-page",style:{height:"100%"},children:(0,Un.jsx)("h2",{children:"You have lost your internet connection. Try to reconnect"})})}function yW(e){var t=e.isAuthenticated;return(0,Un.jsx)(Un.Fragment,{children:t?(0,Un.jsx)(Fe,{}):(0,Un.jsx)(Le,{to:"/"})})}var mW=Object.create(null);mW.open="0",mW.close="1",mW.ping="2",mW.pong="3",mW.message="4",mW.upgrade="5",mW.noop="6";var gW=Object.create(null);Object.keys(mW).forEach((function(e){gW[mW[e]]=e}));for(var kW={type:"error",data:"parser error"},bW="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),wW="function"===typeof ArrayBuffer,_W=function(e,t){var n=new FileReader;return n.onload=function(){var e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)},xW=function(e,t,n){var r,i=e.type,a=e.data;return bW&&a instanceof Blob?t?n(a):_W(a,n):wW&&(a instanceof ArrayBuffer||(r=a,"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer))?t?n(a):_W(new Blob([a]),n):n(mW[i]+(a||""))},SW="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",EW="undefined"===typeof Uint8Array?[]:new Uint8Array(256),TW=0;TW<64;TW++)EW[SW.charCodeAt(TW)]=TW;var IW="function"===typeof ArrayBuffer,CW=function(e,t){if(IW){var n=function(e){var t,n,r,i,a,o=.75*e.length,s=e.length,u=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var c=new ArrayBuffer(o),l=new Uint8Array(c);for(t=0;t<s;t+=4)n=EW[e.charCodeAt(t)],r=EW[e.charCodeAt(t+1)],i=EW[e.charCodeAt(t+2)],a=EW[e.charCodeAt(t+3)],l[u++]=n<<2|r>>4,l[u++]=(15&r)<<4|i>>2,l[u++]=(3&i)<<6|63&a;return c}(e);return AW(n,t)}return{base64:!0,data:e}},AW=function(e,t){return"blob"===t&&e instanceof ArrayBuffer?new Blob([e]):e},NW=function(e,t){if("string"!==typeof e)return{type:"message",data:AW(e,t)};var n=e.charAt(0);return"b"===n?{type:"message",data:CW(e.substring(1),t)}:gW[n]?e.length>1?{type:gW[n],data:e.substring(1)}:{type:gW[n]}:kW},PW=String.fromCharCode(30);function RW(e){if(e)return function(e){for(var t in RW.prototype)e[t]=RW.prototype[t];return e}(e)}RW.prototype.on=RW.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},RW.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},RW.prototype.off=RW.prototype.removeListener=RW.prototype.removeAllListeners=RW.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},RW.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t)}return this},RW.prototype.emitReserved=RW.prototype.emit,RW.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},RW.prototype.hasListeners=function(e){return!!this.listeners(e).length};var OW="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")();function DW(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(t,n){return e.hasOwnProperty(n)&&(t[n]=e[n]),t}),{})}var LW=OW.setTimeout,FW=OW.clearTimeout;function MW(e,t){t.useNativeTimers?(e.setTimeoutFn=LW.bind(OW),e.clearTimeoutFn=FW.bind(OW)):(e.setTimeoutFn=OW.setTimeout.bind(OW),e.clearTimeoutFn=OW.clearTimeout.bind(OW))}var jW,UW=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e)).description=r,a.context=i,a.type="TransportError",a}return m(n)}(E(Error)),VW=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).writable=!1,MW(_(r),e),r.opts=e,r.query=e.query,r.socket=e.socket,r}return m(n,[{key:"onError",value:function(e,t,r){return nf(b(n.prototype),"emitReserved",this).call(this,"error",new UW(e,t,r)),this}},{key:"open",value:function(){return this.readyState="opening",this.doOpen(),this}},{key:"close",value:function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}},{key:"send",value:function(e){"open"===this.readyState&&this.write(e)}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,nf(b(n.prototype),"emitReserved",this).call(this,"open")}},{key:"onData",value:function(e){var t=NW(e,this.socket.binaryType);this.onPacket(t)}},{key:"onPacket",value:function(e){nf(b(n.prototype),"emitReserved",this).call(this,"packet",e)}},{key:"onClose",value:function(e){this.readyState="closed",nf(b(n.prototype),"emitReserved",this).call(this,"close",e)}},{key:"pause",value:function(e){}}]),n}(RW),qW="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),BW=64,zW={},WW=0,HW=0;function KW(e){var t="";do{t=qW[e%BW]+t,e=Math.floor(e/BW)}while(e>0);return t}function GW(){var e=KW(+new Date);return e!==jW?(WW=0,jW=e):e+"."+KW(WW++)}for(;HW<BW;HW++)zW[qW[HW]]=HW;function QW(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}var $W=!1;try{$W="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(BH){}var YW=$W;function JW(e){var t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||YW))return new XMLHttpRequest}catch(n){}if(!t)try{return new(OW[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(n){}}function XW(){}var ZW=null!=new JW({xdomain:!1}).responseType,eH=function(e){k(n,e);var t=x(n);function n(e){var r;if(d(this,n),(r=t.call(this,e)).polling=!1,"undefined"!==typeof location){var i="https:"===location.protocol,a=location.port;a||(a=i?"443":"80"),r.xd="undefined"!==typeof location&&e.hostname!==location.hostname||a!==e.port,r.xs=e.secure!==i}var o=e&&e.forceBase64;return r.supportsBinary=ZW&&!o,r}return m(n,[{key:"name",get:function(){return"polling"}},{key:"doOpen",value:function(){this.poll()}},{key:"pause",value:function(e){var t=this;this.readyState="pausing";var n=function(){t.readyState="paused",e()};if(this.polling||!this.writable){var r=0;this.polling&&(r++,this.once("pollComplete",(function(){--r||n()}))),this.writable||(r++,this.once("drain",(function(){--r||n()})))}else n()}},{key:"poll",value:function(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}},{key:"onData",value:function(e){var t=this;(function(e,t){for(var n=e.split(PW),r=[],i=0;i<n.length;i++){var a=NW(n[i],t);if(r.push(a),"error"===a.type)break}return r})(e,this.socket.binaryType).forEach((function(e){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose({description:"transport closed by the server"}),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}},{key:"doClose",value:function(){var e=this,t=function(){e.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}},{key:"write",value:function(e){var t=this;this.writable=!1,function(e,t){var n=e.length,r=new Array(n),i=0;e.forEach((function(e,a){xW(e,!1,(function(e){r[a]=e,++i===n&&t(r.join(PW))}))}))}(e,(function(e){t.doWrite(e,(function(){t.writable=!0,t.emitReserved("drain")}))}))}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"https":"http",n="";!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=GW()),this.supportsBinary||e.sid||(e.b64=1),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port);var r=QW(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}},{key:"request",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new tH(this.uri(),e)}},{key:"doWrite",value:function(e,t){var n=this,r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(function(e,t){n.onError("xhr post error",e,t)}))}},{key:"doPoll",value:function(){var e=this,t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(function(t,n){e.onError("xhr poll error",t,n)})),this.pollXhr=t}}]),n}(VW),tH=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),MW(_(i=t.call(this)),r),i.opts=r,i.method=r.method||"GET",i.uri=e,i.async=!1!==r.async,i.data=void 0!==r.data?r.data:null,i.create(),i}return m(n,[{key:"create",value:function(){var e=this,t=DW(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;var r=this.xhr=new JW(t);try{r.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders)for(var i in r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this.opts.extraHeaders[i])}catch(a){}if("POST"===this.method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(a){}try{r.setRequestHeader("Accept","*/*")}catch(a){}"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=function(){4===r.readyState&&(200===r.status||1223===r.status?e.onLoad():e.setTimeoutFn((function(){e.onError("number"===typeof r.status?r.status:0)}),0))},r.send(this.data)}catch(a){return void this.setTimeoutFn((function(){e.onError(a)}),0)}"undefined"!==typeof document&&(this.index=n.requestsCount++,n.requests[this.index]=this)}},{key:"onError",value:function(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}},{key:"cleanup",value:function(e){if("undefined"!==typeof this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=XW,e)try{this.xhr.abort()}catch(t){}"undefined"!==typeof document&&delete n.requests[this.index],this.xhr=null}}},{key:"onLoad",value:function(){var e=this.xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}},{key:"abort",value:function(){this.cleanup()}}]),n}(RW);if(tH.requestsCount=0,tH.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",nH);else if("function"===typeof addEventListener){addEventListener("onpagehide"in OW?"pagehide":"unload",nH,!1)}function nH(){for(var e in tH.requests)tH.requests.hasOwnProperty(e)&&tH.requests[e].abort()}var rH="function"===typeof Promise&&"function"===typeof Promise.resolve?function(e){return Promise.resolve().then(e)}:function(e,t){return t(e,0)},iH=OW.WebSocket||OW.MozWebSocket,aH="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),oH=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).supportsBinary=!e.forceBase64,r}return m(n,[{key:"name",get:function(){return"websocket"}},{key:"doOpen",value:function(){if(this.check()){var e=this.uri(),t=this.opts.protocols,n=aH?{}:DW(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=aH?new iH(e,t,n):t?new iH(e,t):new iH(e)}catch(BH){return this.emitReserved("error",BH)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}}},{key:"addEventListeners",value:function(){var e=this;this.ws.onopen=function(){e.opts.autoUnref&&e.ws._socket.unref(),e.onOpen()},this.ws.onclose=function(t){return e.onClose({description:"websocket connection closed",context:t})},this.ws.onmessage=function(t){return e.onData(t.data)},this.ws.onerror=function(t){return e.onError("websocket error",t)}}},{key:"write",value:function(e){var t=this;this.writable=!1;for(var n=function(){var n=e[r],i=r===e.length-1;xW(n,t.supportsBinary,(function(e){try{t.ws.send(e)}catch(n){}i&&rH((function(){t.writable=!0,t.emitReserved("drain")}),t.setTimeoutFn)}))},r=0;r<e.length;r++)n()}},{key:"doClose",value:function(){"undefined"!==typeof this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"wss":"ws",n="";this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=GW()),this.supportsBinary||(e.b64=1);var r=QW(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}},{key:"check",value:function(){return!!iH}}]),n}(VW),sH={websocket:oH,polling:eH},uH=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,cH=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function lH(e){var t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));for(var i=uH.exec(e||""),a={},o=14;o--;)a[cH[o]]=i[o]||"";return-1!=n&&-1!=r&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=function(e,t){var n=/\/{2,9}/g,r=t.replace(n,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||r.splice(0,1);"/"==t.slice(-1)&&r.splice(r.length-1,1);return r}(0,a.path),a.queryKey=function(e,t){var n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(n[t]=r)})),n}(0,a.query),a}var hH=function(e){k(n,e);var t=x(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return d(this,n),(r=t.call(this)).writeBuffer=[],e&&"object"===typeof e&&(i=e,e=null),e?(e=lH(e),i.hostname=e.host,i.secure="https"===e.protocol||"wss"===e.protocol,i.port=e.port,e.query&&(i.query=e.query)):i.host&&(i.hostname=lH(i.host).host),MW(_(r),i),r.secure=null!=i.secure?i.secure:"undefined"!==typeof location&&"https:"===location.protocol,i.hostname&&!i.port&&(i.port=r.secure?"443":"80"),r.hostname=i.hostname||("undefined"!==typeof location?location.hostname:"localhost"),r.port=i.port||("undefined"!==typeof location&&location.port?location.port:r.secure?"443":"80"),r.transports=i.transports||["polling","websocket"],r.writeBuffer=[],r.prevBufferLen=0,r.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},i),r.opts.path=r.opts.path.replace(/\/$/,"")+(r.opts.addTrailingSlash?"/":""),"string"===typeof r.opts.query&&(r.opts.query=function(e){for(var t={},n=e.split("&"),r=0,i=n.length;r<i;r++){var a=n[r].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return t}(r.opts.query)),r.id=null,r.upgrades=null,r.pingInterval=null,r.pingTimeout=null,r.pingTimeoutTimer=null,"function"===typeof addEventListener&&(r.opts.closeOnBeforeunload&&(r.beforeunloadEventListener=function(){r.transport&&(r.transport.removeAllListeners(),r.transport.close())},addEventListener("beforeunload",r.beforeunloadEventListener,!1)),"localhost"!==r.hostname&&(r.offlineEventListener=function(){r.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",r.offlineEventListener,!1))),r.open(),r}return m(n,[{key:"createTransport",value:function(e){var t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);var n=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new sH[e](n)}},{key:"open",value:function(){var e,t=this;if(this.opts.rememberUpgrade&&n.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((function(){t.emitReserved("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(r){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}},{key:"setTransport",value:function(e){var t=this;this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(function(e){return t.onClose("transport close",e)}))}},{key:"probe",value:function(e){var t=this,r=this.createTransport(e),i=!1;n.priorWebsocketSuccess=!1;var a=function(){i||(r.send([{type:"ping",data:"probe"}]),r.once("packet",(function(e){if(!i)if("pong"===e.type&&"probe"===e.data){if(t.upgrading=!0,t.emitReserved("upgrading",r),!r)return;n.priorWebsocketSuccess="websocket"===r.name,t.transport.pause((function(){i||"closed"!==t.readyState&&(h(),t.setTransport(r),r.send([{type:"upgrade"}]),t.emitReserved("upgrade",r),r=null,t.upgrading=!1,t.flush())}))}else{var a=new Error("probe error");a.transport=r.name,t.emitReserved("upgradeError",a)}})))};function o(){i||(i=!0,h(),r.close(),r=null)}var s=function(e){var n=new Error("probe error: "+e);n.transport=r.name,o(),t.emitReserved("upgradeError",n)};function u(){s("transport closed")}function c(){s("socket closed")}function l(e){r&&e.name!==r.name&&o()}var h=function(){r.removeListener("open",a),r.removeListener("error",s),r.removeListener("close",u),t.off("close",c),t.off("upgrading",l)};r.once("open",a),r.once("error",s),r.once("close",u),this.once("close",c),this.once("upgrading",l),r.open()}},{key:"onOpen",value:function(){if(this.readyState="open",n.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade)for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},{key:"onPacket",value:function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}},{key:"onHandshake",value:function(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var e=this;this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((function(){e.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}},{key:"flush",value:function(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){var e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}},{key:"getWritablePackets",value:function(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;for(var e,t=1,n=0;n<this.writeBuffer.length;n++){var r=this.writeBuffer[n].data;if(r&&(t+="string"===typeof(e=r)?function(e){for(var t=0,n=0,r=0,i=e.length;r<i;r++)(t=e.charCodeAt(r))<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(e):Math.ceil(1.33*(e.byteLength||e.size))),n>0&&t>this.maxPayload)return this.writeBuffer.slice(0,n);t+=2}return this.writeBuffer}},{key:"write",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"send",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"sendPacket",value:function(e,t,n,r){if("function"===typeof t&&(r=t,t=void 0),"function"===typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var i={type:e,data:t,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}}},{key:"close",value:function(){var e=this,t=function(){e.onClose("forced close"),e.transport.close()},n=function n(){e.off("upgrade",n),e.off("upgradeError",n),t()},r=function(){e.once("upgrade",n),e.once("upgradeError",n)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(function(){e.upgrading?r():t()})):this.upgrading?r():t()),this}},{key:"onError",value:function(e){n.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}},{key:"onClose",value:function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"===typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}},{key:"filterUpgrades",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}]),n}(RW);hH.protocol=4;hH.protocol;var fH="function"===typeof ArrayBuffer,dH=function(e){return"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer},pH=Object.prototype.toString,vH="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===pH.call(Blob),yH="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===pH.call(File);function mH(e){return fH&&(e instanceof ArrayBuffer||dH(e))||vH&&e instanceof Blob||yH&&e instanceof File}function gH(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(var n=0,r=e.length;n<r;n++)if(gH(e[n]))return!0;return!1}if(mH(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return gH(e.toJSON(),!0);for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&gH(e[i]))return!0;return!1}function kH(e){var t=[],n=e.data,r=e;return r.data=bH(n,t),r.attachments=t.length,{packet:r,buffers:t}}function bH(e,t){if(!e)return e;if(mH(e)){var n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){for(var r=new Array(e.length),i=0;i<e.length;i++)r[i]=bH(e[i],t);return r}if("object"===typeof e&&!(e instanceof Date)){var a={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(a[o]=bH(e[o],t));return a}return e}function wH(e,t){return e.data=_H(e.data,t),delete e.attachments,e}function _H(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"===typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(var n=0;n<e.length;n++)e[n]=_H(e[n],t);else if("object"===typeof e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=_H(e[r],t));return e}var xH,SH=5;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(xH||(xH={}));var EH=function(){function e(t){d(this,e),this.replacer=t}return m(e,[{key:"encode",value:function(e){return e.type!==xH.EVENT&&e.type!==xH.ACK||!gH(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===xH.EVENT?xH.BINARY_EVENT:xH.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}},{key:"encodeAsString",value:function(e){var t=""+e.type;return e.type!==xH.BINARY_EVENT&&e.type!==xH.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}},{key:"encodeAsBinary",value:function(e){var t=kH(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}]),e}(),TH=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).reviver=e,r}return m(n,[{key:"add",value:function(e){var t;if("string"===typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");var r=(t=this.decodeString(e)).type===xH.BINARY_EVENT;r||t.type===xH.BINARY_ACK?(t.type=r?xH.EVENT:xH.ACK,this.reconstructor=new IH(t),0===t.attachments&&nf(b(n.prototype),"emitReserved",this).call(this,"decoded",t)):nf(b(n.prototype),"emitReserved",this).call(this,"decoded",t)}else{if(!mH(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,nf(b(n.prototype),"emitReserved",this).call(this,"decoded",t))}}},{key:"decodeString",value:function(e){var t=0,r={type:Number(e.charAt(0))};if(void 0===xH[r.type])throw new Error("unknown packet type "+r.type);if(r.type===xH.BINARY_EVENT||r.type===xH.BINARY_ACK){for(var i=t+1;"-"!==e.charAt(++t)&&t!=e.length;);var a=e.substring(i,t);if(a!=Number(a)||"-"!==e.charAt(t))throw new Error("Illegal attachments");r.attachments=Number(a)}if("/"===e.charAt(t+1)){for(var o=t+1;++t;){if(","===e.charAt(t))break;if(t===e.length)break}r.nsp=e.substring(o,t)}else r.nsp="/";var s=e.charAt(t+1);if(""!==s&&Number(s)==s){for(var u=t+1;++t;){var c=e.charAt(t);if(null==c||Number(c)!=c){--t;break}if(t===e.length)break}r.id=Number(e.substring(u,t+1))}if(e.charAt(++t)){var l=this.tryParse(e.substr(t));if(!n.isPayloadValid(r.type,l))throw new Error("invalid payload");r.data=l}return r}},{key:"tryParse",value:function(e){try{return JSON.parse(e,this.reviver)}catch(t){return!1}}},{key:"destroy",value:function(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}],[{key:"isPayloadValid",value:function(e,t){switch(e){case xH.CONNECT:return"object"===typeof t;case xH.DISCONNECT:return void 0===t;case xH.CONNECT_ERROR:return"string"===typeof t||"object"===typeof t;case xH.EVENT:case xH.BINARY_EVENT:return Array.isArray(t)&&("string"===typeof t[0]||"number"===typeof t[0]);case xH.ACK:case xH.BINARY_ACK:return Array.isArray(t)}}}]),n}(RW),IH=function(){function e(t){d(this,e),this.packet=t,this.buffers=[],this.reconPack=t}return m(e,[{key:"takeBinaryData",value:function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=wH(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}]),e}();function CH(e,t,n){return e.on(t,n),function(){e.off(t,n)}}var AH=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),NH=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).connected=!1,a.recovered=!1,a.receiveBuffer=[],a.sendBuffer=[],a._queue=[],a._queueSeq=0,a.ids=0,a.acks={},a.flags={},a.io=e,a.nsp=r,i&&i.auth&&(a.auth=i.auth),a._opts=Object.assign({},i),a.io._autoConnect&&a.open(),a}return m(n,[{key:"disconnected",get:function(){return!this.connected}},{key:"subEvents",value:function(){if(!this.subs){var e=this.io;this.subs=[CH(e,"open",this.onopen.bind(this)),CH(e,"packet",this.onpacket.bind(this)),CH(e,"error",this.onerror.bind(this)),CH(e,"close",this.onclose.bind(this))]}}},{key:"active",get:function(){return!!this.subs}},{key:"connect",value:function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}},{key:"emit",value:function(e){if(AH.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;var i={type:xH.EVENT,data:n,options:{}};if(i.options.compress=!1!==this.flags.compress,"function"===typeof n[n.length-1]){var a=this.ids++,o=n.pop();this._registerAckCallback(a,o),i.id=a}var s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!s||!this.connected)||(this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}},{key:"_registerAckCallback",value:function(e,t){var n,r=this,i=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0!==i){var a=this.io.setTimeoutFn((function(){delete r.acks[e];for(var n=0;n<r.sendBuffer.length;n++)r.sendBuffer[n].id===e&&r.sendBuffer.splice(n,1);t.call(r,new Error("operation has timed out"))}),i);this.acks[e]=function(){r.io.clearTimeoutFn(a);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.apply(r,[null].concat(n))}}else this.acks[e]=t}},{key:"emitWithAck",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=void 0!==this.flags.timeout||void 0!==this._opts.ackTimeout;return new Promise((function(n,i){r.push((function(e,t){return a?e?i(e):n(t):n(e)})),t.emit.apply(t,[e].concat(r))}))}},{key:"_addToQueue",value:function(e){var t,n=this;"function"===typeof e[e.length-1]&&(t=e.pop());var r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((function(e){if(r===n._queue[0]){if(null!==e)r.tryCount>n._opts.retries&&(n._queue.shift(),t&&t(e));else if(n._queue.shift(),t){for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];t.apply(void 0,[null].concat(a))}return r.pending=!1,n._drainQueue()}})),this._queue.push(r),this._drainQueue()}},{key:"_drainQueue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.connected&&0!==this._queue.length){var t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}}},{key:"packet",value:function(e){e.nsp=this.nsp,this.io._packet(e)}},{key:"onopen",value:function(){var e=this;"function"==typeof this.auth?this.auth((function(t){e._sendConnectPacket(t)})):this._sendConnectPacket(this.auth)}},{key:"_sendConnectPacket",value:function(e){this.packet({type:xH.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}},{key:"onerror",value:function(e){this.connected||this.emitReserved("connect_error",e)}},{key:"onclose",value:function(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}},{key:"onpacket",value:function(e){if(e.nsp===this.nsp)switch(e.type){case xH.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case xH.EVENT:case xH.BINARY_EVENT:this.onevent(e);break;case xH.ACK:case xH.BINARY_ACK:this.onack(e);break;case xH.DISCONNECT:this.ondisconnect();break;case xH.CONNECT_ERROR:this.destroy();var t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}},{key:"onevent",value:function(e){var t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}},{key:"emitEvent",value:function(e){if(this._anyListeners&&this._anyListeners.length){var t,r=I(this._anyListeners.slice());try{for(r.s();!(t=r.n()).done;){t.value.apply(this,e)}}catch(BH){r.e(BH)}finally{r.f()}}nf(b(n.prototype),"emit",this).apply(this,e),this._pid&&e.length&&"string"===typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}},{key:"ack",value:function(e){var t=this,n=!1;return function(){if(!n){n=!0;for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];t.packet({type:xH.ACK,id:e,data:i})}}}},{key:"onack",value:function(e){var t=this.acks[e.id];"function"===typeof t&&(t.apply(this,e.data),delete this.acks[e.id])}},{key:"onconnect",value:function(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}},{key:"emitBuffered",value:function(){var e=this;this.receiveBuffer.forEach((function(t){return e.emitEvent(t)})),this.receiveBuffer=[],this.sendBuffer.forEach((function(t){e.notifyOutgoingListeners(t),e.packet(t)})),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach((function(e){return e()})),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&this.packet({type:xH.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(e){return this.flags.compress=e,this}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}},{key:"timeout",value:function(e){return this.flags.timeout=e,this}},{key:"onAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}},{key:"prependAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}},{key:"offAny",value:function(e){if(!this._anyListeners)return this;if(e){for(var t=this._anyListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}},{key:"onAnyOutgoing",value:function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}},{key:"prependAnyOutgoing",value:function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}},{key:"offAnyOutgoing",value:function(e){if(!this._anyOutgoingListeners)return this;if(e){for(var t=this._anyOutgoingListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}},{key:"listenersAnyOutgoing",value:function(){return this._anyOutgoingListeners||[]}},{key:"notifyOutgoingListeners",value:function(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){var t,n=I(this._anyOutgoingListeners.slice());try{for(n.s();!(t=n.n()).done;){t.value.apply(this,e.data)}}catch(BH){n.e(BH)}finally{n.f()}}}}]),n}(RW);function PH(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}PH.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},PH.prototype.reset=function(){this.attempts=0},PH.prototype.setMin=function(e){this.ms=e},PH.prototype.setMax=function(e){this.max=e},PH.prototype.setJitter=function(e){this.jitter=e};var RH=function(e){k(r,e);var n=x(r);function r(e,i){var a,o;d(this,r),(a=n.call(this)).nsps={},a.subs=[],e&&"object"===typeof e&&(i=e,e=void 0),(i=i||{}).path=i.path||"/socket.io",a.opts=i,MW(_(a),i),a.reconnection(!1!==i.reconnection),a.reconnectionAttempts(i.reconnectionAttempts||1/0),a.reconnectionDelay(i.reconnectionDelay||1e3),a.reconnectionDelayMax(i.reconnectionDelayMax||5e3),a.randomizationFactor(null!==(o=i.randomizationFactor)&&void 0!==o?o:.5),a.backoff=new PH({min:a.reconnectionDelay(),max:a.reconnectionDelayMax(),jitter:a.randomizationFactor()}),a.timeout(null==i.timeout?2e4:i.timeout),a._readyState="closed",a.uri=e;var s=i.parser||t;return a.encoder=new s.Encoder,a.decoder=new s.Decoder,a._autoConnect=!1!==i.autoConnect,a._autoConnect&&a.open(),a}return m(r,[{key:"reconnection",value:function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}},{key:"reconnectionAttempts",value:function(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}},{key:"reconnectionDelay",value:function(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}},{key:"randomizationFactor",value:function(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}},{key:"reconnectionDelayMax",value:function(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}},{key:"timeout",value:function(e){return arguments.length?(this._timeout=e,this):this._timeout}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(e){var t=this;if(~this._readyState.indexOf("open"))return this;this.engine=new hH(this.uri,this.opts);var n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;var i=CH(n,"open",(function(){r.onopen(),e&&e()})),a=CH(n,"error",(function(n){r.cleanup(),r._readyState="closed",t.emitReserved("error",n),e?e(n):r.maybeReconnectOnOpen()}));if(!1!==this._timeout){var o=this._timeout;0===o&&i();var s=this.setTimeoutFn((function(){i(),n.close(),n.emit("error",new Error("timeout"))}),o);this.opts.autoUnref&&s.unref(),this.subs.push((function(){clearTimeout(s)}))}return this.subs.push(i),this.subs.push(a),this}},{key:"connect",value:function(e){return this.open(e)}},{key:"onopen",value:function(){this.cleanup(),this._readyState="open",this.emitReserved("open");var e=this.engine;this.subs.push(CH(e,"ping",this.onping.bind(this)),CH(e,"data",this.ondata.bind(this)),CH(e,"error",this.onerror.bind(this)),CH(e,"close",this.onclose.bind(this)),CH(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}},{key:"ondecoded",value:function(e){var t=this;rH((function(){t.emitReserved("packet",e)}),this.setTimeoutFn)}},{key:"onerror",value:function(e){this.emitReserved("error",e)}},{key:"socket",value:function(e,t){var n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new NH(this,e,t),this.nsps[e]=n),n}},{key:"_destroy",value:function(e){for(var t=0,n=Object.keys(this.nsps);t<n.length;t++){var r=n[t];if(this.nsps[r].active)return}this._close()}},{key:"_packet",value:function(e){for(var t=this.encoder.encode(e),n=0;n<t.length;n++)this.engine.write(t[n],e.options)}},{key:"cleanup",value:function(){this.subs.forEach((function(e){return e()})),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var e=this;if(this._reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var n=this.backoff.duration();this._reconnecting=!0;var r=this.setTimeoutFn((function(){t.skipReconnect||(e.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((function(n){n?(t._reconnecting=!1,t.reconnect(),e.emitReserved("reconnect_error",n)):t.onreconnect()})))}),n);this.opts.autoUnref&&r.unref(),this.subs.push((function(){clearTimeout(r)}))}}},{key:"onreconnect",value:function(){var e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}]),r}(RW),OH={};function DH(e,t){"object"===typeof e&&(t=e,e=void 0);var n,r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=e;n=n||"undefined"!==typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof n?n.protocol+"//"+e:"https://"+e),r=lH(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var i=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+t,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),i=r.source,a=r.id,o=r.path,s=OH[a]&&o in OH[a].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||s?n=new RH(i,t):(OH[a]||(OH[a]=new RH(i,t)),n=OH[a]),r.query&&!t.query&&(t.query=r.queryKey),n.socket(r.path,t)}function LH(){return(0,Un.jsx)("div",{className:"hero",children:(0,Un.jsx)("div",{className:"snow",children:(0,Un.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1536",preserveAspectRatio:"xMidYMax slice",children:[(0,Un.jsx)("g",{fill:"#b64926","fill-opacity":".45",transform:"translate(55 42)",children:(0,Un.jsxs)("g",{id:"snow-bottom-layer",children:[(0,Un.jsx)("ellipse",{cx:"6",cy:"1009.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"138",cy:"1110.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"398",cy:"1055.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"719",cy:"1284.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"760",cy:"1155.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"635",cy:"1459.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"478",cy:"1335.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"322",cy:"1414.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"247",cy:"1234.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"154",cy:"1425.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"731",cy:"773.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"599",cy:"874.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"339",cy:"819.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"239",cy:"1004.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"113",cy:"863.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"102",cy:"1223.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"395",cy:"1155.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"826",cy:"943.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"626",cy:"1054.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"887",cy:"1366.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"6",cy:"241.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"138",cy:"342.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"398",cy:"287.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"719",cy:"516.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"760",cy:"387.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"635",cy:"691.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"478",cy:"567.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"322",cy:"646.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"247",cy:"466.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"154",cy:"657.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"731",cy:"5.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"599",cy:"106.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"339",cy:"51.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"239",cy:"236.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"113",cy:"95.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"102",cy:"455.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"395",cy:"387.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"826",cy:"175.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"626",cy:"286.5",rx:"6",ry:"5.5"}),(0,Un.jsx)("ellipse",{cx:"887",cy:"598.5",rx:"6",ry:"5.5"})]})}),(0,Un.jsx)("g",{fill:"#b64926","fill-opacity":".15",transform:"translate(65 63)",children:(0,Un.jsxs)("g",{id:"snow-top-layer",children:[(0,Un.jsx)("circle",{cx:"8",cy:"776",r:"8"}),(0,Un.jsx)("circle",{cx:"189",cy:"925",r:"8"}),(0,Un.jsx)("circle",{cx:"548",cy:"844",r:"8"}),(0,Un.jsx)("circle",{cx:"685",cy:"1115",r:"8"}),(0,Un.jsx)("circle",{cx:"858",cy:"909",r:"8"}),(0,Un.jsx)("circle",{cx:"874",cy:"1438",r:"8",transform:"rotate(180 874 1438)"}),(0,Un.jsx)("circle",{cx:"657",cy:"1256",r:"8",transform:"rotate(180 657 1256)"}),(0,Un.jsx)("circle",{cx:"443",cy:"1372",r:"8",transform:"rotate(180 443 1372)"}),(0,Un.jsx)("circle",{cx:"339",cy:"1107",r:"8",transform:"rotate(180 339 1107)"}),(0,Un.jsx)("circle",{cx:"24",cy:"1305",r:"8",transform:"rotate(180 24 1305)"}),(0,Un.jsx)("circle",{cx:"8",cy:"8",r:"8"}),(0,Un.jsx)("circle",{cx:"189",cy:"157",r:"8"}),(0,Un.jsx)("circle",{cx:"548",cy:"76",r:"8"}),(0,Un.jsx)("circle",{cx:"685",cy:"347",r:"8"}),(0,Un.jsx)("circle",{cx:"858",cy:"141",r:"8"}),(0,Un.jsx)("circle",{cx:"874",cy:"670",r:"8",transform:"rotate(180 874 670)"}),(0,Un.jsx)("circle",{cx:"657",cy:"488",r:"8",transform:"rotate(180 657 488)"}),(0,Un.jsx)("circle",{cx:"443",cy:"604",r:"8",transform:"rotate(180 443 604)"}),(0,Un.jsx)("circle",{cx:"339",cy:"339",r:"8",transform:"rotate(180 339 339)"}),(0,Un.jsx)("circle",{cx:"24",cy:"537",r:"8",transform:"rotate(180 24 537)"})]})})]})})})}Object.assign(DH,{Manager:RH,Socket:NH,io:DH,connect:DH});var FH=DH(oW);var MH=function(){var e=l((0,i.useState)([]),2),t=e[0],n=e[1],r=l((0,i.useState)(!0),2),a=r[0],o=r[1],s=l((0,i.useState)(!1),2),u=s[0],c=s[1];return(0,i.useEffect)((function(){n(iW()),o(navigator.onLine),function(e){var t=function(){console.log("online"),e(!0)},n=function(){console.log("ofline"),e(!1)};window.addEventListener("online",t),window.addEventListener("offline",n)}(o)}),[]),(0,i.useEffect)((function(){n(iW()),c(!0)}),[localStorage]),(0,Un.jsx)(mj.Provider,{value:{claims:t,update:n},children:(0,Un.jsx)(Rn,{children:(0,Un.jsx)("div",{className:"App",children:(0,Un.jsx)("main",{className:"wrapper",children:a?(0,Un.jsxs)(Un.Fragment,{children:[(0,Un.jsx)(pW,{}),(0,Un.jsx)(LH,{}),(0,Un.jsx)("section",{className:"landing-page",children:(0,Un.jsxs)(Ue,{children:[hW.map((function(e){return(0,Un.jsx)(Me,{path:e.path,Component:e.component},e.path)})),u&&lW.map((function(e){return(0,Un.jsx)(Me,{element:(0,Un.jsx)(yW,{isAuthenticated:t.length>0}),children:(0,Un.jsx)(Me,{Component:e.component,path:e.path})},e.path)}))]})})]}):(0,Un.jsx)(vW,{})})})})})},jH=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};function UH(e){var t,n=e.basename,r=e.children,a=e.window,o=i.useRef();null==o.current&&(o.current=(void 0===(t={window:a,v5Compat:!0})&&(t={}),M((function(e,t){var n=F(e.location.hash.substr(1)),r=n.pathname,i=void 0===r?"/":r,a=n.search,o=void 0===a?"":a,s=n.hash;return D("",{pathname:i,search:o,hash:void 0===s?"":s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){var n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){var i=e.location.href,a=i.indexOf("#");r=-1===a?i:i.slice(0,a)}return r+"#"+("string"===typeof t?t:L(t))}),(function(e,t){R("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),t)));var s=o.current,u=l(i.useState({action:s.action,location:s.location}),2),c=u[0],h=u[1];return i.useLayoutEffect((function(){return s.listen(h)}),[s]),i.createElement(je,{basename:n,children:r,location:c.location,navigationType:c.action,navigator:s})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var VH,qH;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(VH||(VH={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(qH||(qH={}));a.createRoot(document.getElementById("root")).render((0,Un.jsx)(i.StrictMode,{children:(0,Un.jsx)(UH,{children:(0,Un.jsx)(MH,{})})})),jH()}()}();
//# sourceMappingURL=main.1cd0bb26.js.map