/*! For license information please see main.76026616.js.LICENSE.txt */
!function(){var e={457:function(e){"use strict";var t=Array.isArray,n=Object.keys,r=Object.prototype.hasOwnProperty,i="undefined"!==typeof Element;function a(e,o){if(e===o)return!0;if(e&&o&&"object"==typeof e&&"object"==typeof o){var u,s,c,l=t(e),h=t(o);if(l&&h){if((s=e.length)!=o.length)return!1;for(u=s;0!==u--;)if(!a(e[u],o[u]))return!1;return!0}if(l!=h)return!1;var f=e instanceof Date,d=o instanceof Date;if(f!=d)return!1;if(f&&d)return e.getTime()==o.getTime();var p=e instanceof RegExp,v=o instanceof RegExp;if(p!=v)return!1;if(p&&v)return e.toString()==o.toString();var m=n(e);if((s=m.length)!==n(o).length)return!1;for(u=s;0!==u--;)if(!r.call(o,m[u]))return!1;if(i&&e instanceof Element&&o instanceof Element)return e===o;for(u=s;0!==u--;)if(("_owner"!==(c=m[u])||!e.$$typeof)&&!a(e[c],o[c]))return!1;return!0}return e!==e&&o!==o}e.exports=function(e,t){try{return a(e,t)}catch(n){if(n.message&&n.message.match(/stack|recursion/i)||-2146828260===n.number)return console.warn("Warning: react-fast-compare does not handle circular references.",n.name,n.message),!1;throw n}}},110:function(e,t,n){"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);h&&(o=o.concat(h(n)));for(var u=s(t),v=s(n),m=0;m<o.length;++m){var y=o[m];if(!a[y]&&(!r||!r[y])&&(!v||!v[y])&&(!u||!u[y])){var g=f(n,y);try{c(t,y,g)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case h:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case f:case m:case v:case s:return e;default:return t}}case i:return t}}}function _(e){return w(e)===h}t.AsyncMode=l,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=f,t.Fragment=a,t.Lazy=m,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return _(e)||w(e)===l},t.isConcurrentMode=_,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===f},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===m},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===h||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===f||e.$$typeof===g||e.$$typeof===k||e.$$typeof===b||e.$$typeof===y)},t.typeOf=w},309:function(e,t,n){"use strict";e.exports=n(746)},758:function(e){"use strict";function t(e){this._maxSize=e,this.clear()}t.prototype.clear=function(){this._size=0,this._values=Object.create(null)},t.prototype.get=function(e){return this._values[e]},t.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var n=/[^.^\]^[]+|(?=\[\]|\.\.)/g,r=/^\d+$/,i=/^\d/,a=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,o=/^\s*(['"]?)(.*?)(\1)\s*$/,u=new t(512),s=new t(512),c=new t(512);function l(e){return u.get(e)||u.set(e,h(e).map((function(e){return e.replace(o,"$2")})))}function h(e){return e.match(n)||[""]}function f(e){return"string"===typeof e&&e&&-1!==["'",'"'].indexOf(e.charAt(0))}function d(e){return!f(e)&&(function(e){return e.match(i)&&!e.match(r)}(e)||function(e){return a.test(e)}(e))}e.exports={Cache:t,split:h,normalizePath:l,setter:function(e){var t=l(e);return s.get(e)||s.set(e,(function(e,n){for(var r=0,i=t.length,a=e;r<i-1;){var o=t[r];if("__proto__"===o||"constructor"===o||"prototype"===o)return e;a=a[t[r++]]}a[t[r]]=n}))},getter:function(e,t){var n=l(e);return c.get(e)||c.set(e,(function(e){for(var r=0,i=n.length;r<i;){if(null==e&&t)return;e=e[n[r++]]}return e}))},join:function(e){return e.reduce((function(e,t){return e+(f(t)||r.test(t)?"["+t+"]":(e?".":"")+t)}),"")},forEach:function(e,t,n){!function(e,t,n){var r,i,a,o,u=e.length;for(i=0;i<u;i++)(r=e[i])&&(d(r)&&(r='"'+r+'"'),a=!(o=f(r))&&/^\d+$/.test(r),t.call(n,r,o,a,i,e))}(Array.isArray(e)?e:h(e),t,n)}}},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),I=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var F,M=Object.assign;function j(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function q(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case E:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){J(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,he=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Se=null;function Ee(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Te(e){xe?Se?Se.push(e):Se=[e]:xe=e}function Ie(){if(xe){var e=xe,t=Se;if(Se=xe=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var Ne=!1;function Pe(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ce(e,t,n)}finally{Ne=!1,(null!==xe||null!==Se)&&(Ae(),Ie())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(l)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(le){Oe=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Fe=!1,Me=null,je=!1,Ue=null,Ve={onError:function(e){Fe=!0,Me=e}};function qe(e,t,n,r,i,a,o,u,s){Fe=!1,Me=null,Le.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(ze(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ht(u):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,xt,St,Et,Tt=!1,It=[],Ct=null,At=null,Nt=null,Pt=new Map,Rt=new Map,Ot=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Ft(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void Et(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){jt(e)&&n.delete(t)}function Vt(){Tt=!1,null!==Ct&&jt(Ct)&&(Ct=null),null!==At&&jt(At)&&(At=null),null!==Nt&&jt(Nt)&&(Nt=null),Pt.forEach(Ut),Rt.forEach(Ut)}function qt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function zt(e){function t(t){return qt(t,e)}if(0<It.length){qt(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&qt(Ct,e),null!==At&&qt(At,e),null!==Nt&&qt(Nt,e),Pt.forEach(t),Rt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Mt(n),null===n.blockedOn&&Ot.shift()}var Bt=b.ReactCurrentBatchConfig,Wt=!0;function Kt(e,t,n,r){var i=kt,a=Bt.transition;Bt.transition=null;try{kt=1,Gt(e,t,n,r)}finally{kt=i,Bt.transition=a}}function Ht(e,t,n,r){var i=kt,a=Bt.transition;Bt.transition=null;try{kt=4,Gt(e,t,n,r)}finally{kt=i,Bt.transition=a}}function Gt(e,t,n,r){if(Wt){var i=$t(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Ft(Ct,e,t,n,r,i),!0;case"dragenter":return At=Ft(At,e,t,n,r,i),!0;case"mouseover":return Nt=Ft(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pt.set(a,Ft(Pt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,Ft(Rt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=$t(e,t,n,r))&&Wr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function $t(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),hn=M({},cn,{view:0,detail:0}),fn=an(hn),dn=M({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(M({},dn,{dataTransfer:0})),mn=an(M({},hn,{relatedTarget:0})),yn=an(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(M({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function En(){return Sn}var Tn=M({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=an(Tn),Cn=an(M({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(M({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Nn=an(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=M({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(Pn),On=[9,13,27,32],Dn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Fn=l&&"TextEvent"in window&&!Ln,Mn=l&&(!Dn||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Kn(e,t,n,r){Te(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Gn=null;function Qn(e){jr(e,0)}function $n(e){if(G(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var Jn=!1;if(l){var Xn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Gn=Hn=null)}function nr(e){if("value"===e.propertyName&&$n(Gn)){var t=[];Kn(t,Gn,e,we(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Gn)}function ar(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Hr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Sr={};function Er(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return xr[e]=n[t];return e}l&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Tr=Er("animationend"),Ir=Er("animationiteration"),Cr=Er("animationstart"),Ar=Er("transitionend"),Nr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Nr.set(e,t),s(t,[e])}for(var Or=0;Or<Pr.length;Or++){var Dr=Pr[Or];Rr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Rr(Tr,"onAnimationEnd"),Rr(Ir,"onAnimationIteration"),Rr(Cr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(qe.apply(this,arguments),Fe){if(!Fe)throw Error(a(198));var l=Me;Fe=!1,Me=null,je||(je=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Mr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Mr(i,u,c),a=s}}}if(je)throw e=Ue,je=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var qr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[qr]){e[qr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Fr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[qr]||(t[qr]=!0,Vr("selectionchange",!1,t))}}function Br(e,t,n,r){switch(Yt(t)){case 1:var i=Kt;break;case 4:i=Ht;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Pe((function(){var r=a,i=we(n),o=[];e:{var u=Nr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=In;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=An;break;case Tr:case Ir:case Cr:s=yn;break;case Ar:s=Nn;break;case"scroll":s=fn;break;case"wheel":s=Rn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),h=!l&&"scroll"===e,f=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=Re(p,f))&&l.push(Kr(p,v,d)))),h)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(h=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=h,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(f,p+"enter",c,n,i)).target=d,l.relatedTarget=h,v=l),h=v,s&&c)e:{for(f=c,p=0,d=l=s;d;d=Gr(d))p++;for(d=0,v=f;v;v=Gr(v))d++;for(;0<p-d;)l=Gr(l),p--;for(;0<d-p;)f=Gr(f),d--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=Gr(l),f=Gr(f)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==h&&Qr(o,h,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Yn;else if(Wn(u))if(Jn)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Kn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?bi(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(Dn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Mn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(g=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,zn=!0)),0<(y=Hr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=qn(n))&&(k.data=g))),(g=Fn?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(Un=!0,jn);case"textInput":return(e=t.data)===jn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Zt=Xt=Jt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}jr(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(Kr(e,a,i)),null!=(a=Re(e,t))&&r.push(Kr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Re(n,a))&&o.unshift(Kr(n,s,u)):i||null!=(s=Re(n,a))&&o.push(Kr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $r=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Yr,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,di="__reactProps$"+hi,pi="__reactContainer$"+hi,vi="__reactEvents$"+hi,mi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function gi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[fi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[fi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var _i=[],xi=-1;function Si(e){return{current:e}}function Ei(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Ti(e,t){xi++,_i[xi]=e.current,e.current=t}var Ii={},Ci=Si(Ii),Ai=Si(!1),Ni=Ii;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ei(Ai),Ei(Ci)}function Di(e,t,n){if(Ci.current!==Ii)throw Error(a(168));Ti(Ci,t),Ti(Ai,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,B(e)||"Unknown",i));return M({},n,r)}function Fi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,Ni=Ci.current,Ti(Ci,e),Ti(Ai,Ai.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ai),Ei(Ci),Ti(Ci,e)):Ei(Ai),Ti(Ai,n)}var ji=null,Ui=!1,Vi=!1;function qi(e){null===ji?ji=[e]:ji.push(e)}function zi(){if(!Vi&&null!==ji){Vi=!0;var e=0,t=kt;try{var n=ji;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Ui=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),Ge(Ze,zi),i}finally{kt=t,Vi=!1}}return null}var Bi=[],Wi=0,Ki=null,Hi=0,Gi=[],Qi=0,$i=null,Yi=1,Ji="";function Xi(e,t){Bi[Wi++]=Hi,Bi[Wi++]=Ki,Ki=e,Hi=t}function Zi(e,t,n){Gi[Qi++]=Yi,Gi[Qi++]=Ji,Gi[Qi++]=$i,$i=e;var r=Yi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Ji=a+e}else Yi=1<<a|n<<i|r,Ji=e}function ea(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ta(e){for(;e===Ki;)Ki=Bi[--Wi],Bi[Wi]=null,Hi=Bi[--Wi],Bi[Wi]=null;for(;e===$i;)$i=Gi[--Qi],Gi[Qi]=null,Ji=Gi[--Qi],Gi[Qi]=null,Yi=Gi[--Qi],Gi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Yi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw fa(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function fa(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Si(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function _a(e){var t=ya.current;Ei(ya),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ta=null;function Ia(e){null===Ta?Ta=[e]:Ta.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ia(t)):(n.next=i.next,i.next=n),t.interleaved=n,Aa(e,r)}function Aa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Na=!1;function Pa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Da(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&As)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Aa(e,n)}return null===(i=r.interleaved)?(t.next=t,Ia(r)):(t.next=i.next,i.next=t),r.interleaved=t,Aa(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Fa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ma(e,t,n,r){var i=e.updateQueue;Na=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var h=i.baseState;for(o=0,l=c=s=null,u=a;;){var f=u.lane,d=u.eventTime;if((r&f)===f){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(f=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=v.payload)?p.call(d,h,f):p)||void 0===f)break e;h=M({},h,f);break e;case 2:Na=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[u]:f.push(u))}else d={eventTime:d,lane:f,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=h):l=l.next=d,o|=f;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(f=u).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===l&&(s=h),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ms|=o,e.lanes=o,e.memoizedState=h}}function ja(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var qa={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Oa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Oa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Oa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Da(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function Ba(e,t,n){var r=!1,i=Ii,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Ri(t)?Ni:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ii),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=qa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&qa.enqueueReplaceState(t,t.state,null)}function Ka(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Pa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Ri(t)?Ni:Ci.current,i.context=Pi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&qa.enqueueReplaceState(i,i.state,null),Ma(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function $a(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Fc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case _:return(t=Uc(t,e.mode,n)).return=e,t;case R:return f(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Fc(t,e.mode,n,null)).return=e,t;Ga(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Ga(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Ga(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,h=a,v=a=0,m=null;null!==h&&v<u.length;v++){h.index>v?(m=h,h=null):m=h.sibling;var y=d(i,h,u[v],s);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(i,h),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,h=m}if(v===u.length)return n(i,h),ia&&Xi(i,v),c;if(null===h){for(;v<u.length;v++)null!==(h=f(i,u[v],s))&&(a=o(h,a,v),null===l?c=h:l.sibling=h,l=h);return ia&&Xi(i,v),c}for(h=r(i,h);v<u.length;v++)null!==(m=p(h,i,v,u[v],s))&&(e&&null!==m.alternate&&h.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&h.forEach((function(e){return t(i,e)})),ia&&Xi(i,v),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var h=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,m),null===h?l=k:h.sibling=k,h=k,v=y}if(g.done)return n(i,v),ia&&Xi(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=f(i,g.value,c))&&(u=o(g,u,m),null===h?l=g:h.sibling=g,h=g);return ia&&Xi(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===h?l=g:h.sibling=g,h=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Xi(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ha(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Fc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Lc(o.type,o.key,o.props,null,r.mode,s)).ref=Ha(r,a,o),s.return=r,r=s)}return u(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,s)).return=r,r=a}return u(r);case R:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return m(r,a,o,s);Ga(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=jc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ya=$a(!0),Ja=$a(!1),Xa={},Za=Si(Xa),eo=Si(Xa),to=Si(Xa);function no(e){if(e===Xa)throw Error(a(174));return e}function ro(e,t){switch(Ti(to,t),Ti(eo,e),Ti(Za,Xa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Za),Ti(Za,t)}function io(){Ei(Za),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ti(eo,e),Ti(Za,n))}function oo(e){eo.current===e&&(Ei(Za),Ei(eo))}var uo=Si(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=b.ReactCurrentDispatcher,fo=b.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,ko=!1,bo=0,wo=0;function _o(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function So(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,ho.current=cu,e=n(r,i)}while(ko)}if(ho.current=ou,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==bo;return bo=0,e}function To(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function Io(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=Io(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var h=l.lane;if((po&h)===h)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=f,u=r):c=c.next=f,vo.lanes|=h,Ms|=h}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Ms|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=Io(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Po(){}function Ro(e,t){var n=vo,r=Io(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Wo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Uo(9,Do.bind(null,n,r,i,t),void 0,null),null===Ns)throw Error(a(349));0!==(30&po)||Oo(n,t,i)}return i}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Fo(t)&&Mo(e)}function Lo(e,t,n){return n((function(){Fo(t)&&Mo(e)}))}function Fo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Mo(e){var t=Aa(e,1);null!==t&&rc(t,e,1,-1)}function jo(e){var t=To();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return Io().memoizedState}function qo(e,t,n,r){var i=To();vo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=Io();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}vo.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function Bo(e,t){return qo(8390656,8,e,t)}function Wo(e,t){return zo(2048,8,e,t)}function Ko(e,t){return zo(4,2,e,t)}function Ho(e,t){return zo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Go.bind(null,t,e),n)}function $o(){}function Yo(e,t){var n=Io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=Io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Ms|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{kt=n,fo.transition=r}}function eu(){return Io().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ia(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ea,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},uu={readContext:Ea,useCallback:function(e,t){return To().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:Bo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return qo(4194308,4,e,t)},useInsertionEffect:function(e,t){return qo(4,2,e,t)},useMemo:function(e,t){var n=To();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=To();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},To().memoizedState=e},useState:jo,useDebugValue:$o,useDeferredValue:function(e){return To().memoizedState=e},useTransition:function(){var e=jo(!1),t=e[0];return e=Zo.bind(null,e[1]),To().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=To();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ns)throw Error(a(349));0!==(30&po)||Oo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Bo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=To(),t=Ns.identifierPrefix;if(ia){var n=Ji;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ea,useCallback:Yo,useContext:Ea,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:Jo,useReducer:Ao,useRef:Vo,useState:function(){return Ao(Co)},useDebugValue:$o,useDeferredValue:function(e){return Xo(Io(),mo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],Io().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ea,useCallback:Yo,useContext:Ea,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:Jo,useReducer:No,useRef:Vo,useState:function(){return No(Co)},useDebugValue:$o,useDeferredValue:function(e){var t=Io();return null===mo?t.memoizedState=e:Xo(t,mo.memoizedState,e)},useTransition:function(){return[No(Co)[0],Io().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=q(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function hu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Oa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ks||(Ks=!0,Hs=r),fu(0,t)},n}function vu(e,t,n){(n=Oa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){fu(0,t),"function"!==typeof r&&(null===Gs?Gs=new Set([this]):Gs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oa(-1,1)).tag=2,Da(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?Ja(t,null,n,r):Ya(t,e.child,n,r)}function _u(e,t,n,r,i){n=n.render;var a=t.ref;return Sa(t,i),r=So(e,t,n,r,a,i),n=Eo(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function xu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Oc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Su(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Ku(e,t,i)}return t.flags|=1,(e=Dc(a,r)).ref=t.ref,e.return=t,t.child=e}function Su(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ku(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Iu(e,t,n,r,i)}function Eu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Ds,Os),Os|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Ds,Os),Os|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ti(Ds,Os),Os|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ti(Ds,Os),Os|=r;return wu(e,t,i,n),t.child}function Tu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Iu(e,t,n,r,i){var a=Ri(n)?Ni:Ci.current;return a=Pi(t,a),Sa(t,i),n=So(e,t,n,r,a,i),r=Eo(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function Cu(e,t,n,r,i){if(Ri(n)){var a=!0;Fi(t)}else a=!1;if(Sa(t,i),null===t.stateNode)Wu(e,t),Ba(t,n,r),Ka(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Pi(t,c=Ri(n)?Ni:Ci.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Wa(t,o,r,c),Na=!1;var f=t.memoizedState;o.state=f,Ma(t,r,o,i),s=t.memoizedState,u!==r||f!==s||Ai.current||Na?("function"===typeof l&&(Va(t,n,l,r),s=t.memoizedState),(u=Na||za(t,n,u,r,f,s,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ra(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ma(t.type,u),o.props=c,h=t.pendingProps,f=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ea(s):s=Pi(t,s=Ri(n)?Ni:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==h||f!==s)&&Wa(t,o,r,s),Na=!1,f=t.memoizedState,o.state=f,Ma(t,r,o,i);var p=t.memoizedState;u!==h||f!==p||Ai.current||Na?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Na||za(t,n,c,r,f,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Au(e,t,n,r,a,i)}function Au(e,t,n,r,i,a){Tu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Mi(t,n,!1),Ku(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ya(t,e.child,null,a),t.child=Ya(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Nu(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),ro(e,t.containerInfo)}function Pu(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Ru,Ou,Du,Lu,Fu={dehydrated:null,treeContext:null,retryLane:0};function Mu(e){return{baseLanes:e,cachePool:null,transitions:null}}function ju(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Mc(s,i,0,null),e=Fc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Mu(n),t.memoizedState=Fu,e):Uu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Vu(e,t,u,r=hu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Fc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ya(t,e.child,null,u),t.child.memoizedState=Mu(u),t.memoizedState=Fu,o);if(0===(1&t.mode))return Vu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Vu(e,t,u,r=hu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=Ns)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Aa(e,i),rc(r,e,i,-1))}return mc(),Vu(e,t,u,r=hu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Gi[Qi++]=Yi,Gi[Qi++]=Ji,Gi[Qi++]=$i,Yi=e.id,Ji=e.overflow,$i=t),t=Uu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Dc(r,u):(u=Fc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Mu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Fu,i}return e=(u=e.child).sibling,i=Dc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uu(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vu(e,t,n,r){return null!==r&&pa(r),Ya(t,e.child,null,n),(e=Uu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function qu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function zu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Bu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&qu(e,n,t);else if(19===e.tag)qu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zu(t,!0,n,null,a);break;case"together":zu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ku(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ms|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Hu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gu(t),null;case 1:case 17:return Ri(t.type)&&Oi(),Gu(t),null;case 3:return r=t.stateNode,io(),Ei(Ai),Ei(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Ou(e,t),Gu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Du(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Gu(t),null}if(e=no(Za.current),ha(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Y(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Ur("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[fi]=t,e[di]=r,Ru(e,t,!1,!1),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Y(e,r),i=$(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&he(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&fe(e,l):"number"===typeof l&&fe(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gu(t),null;case 6:if(e&&null!=t.stateNode)Lu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Gu(t),null;case 13:if(Ei(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))fa(),da(),t.flags|=98560,o=!1;else if(o=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[fi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gu(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ls&&(Ls=3):mc())),null!==t.updateQueue&&(t.flags|=4),Gu(t),null);case 4:return io(),Ou(e,t),null===e&&zr(t.stateNode.containerInfo),Gu(t),null;case 10:return _a(t.type._context),Gu(t),null;case 19:if(Ei(uo),null===(o=t.memoizedState))return Gu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Hu(o,!1);else{if(0!==Ls||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Hu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>Bs&&(t.flags|=128,r=!0,Hu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Hu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Gu(t),null}else 2*Je()-o.renderingStartTime>Bs&&1073741824!==n&&(t.flags|=128,r=!0,Hu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=uo.current,Ti(uo,r?1&n|2:1&n),t):(Gu(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Os)&&(Gu(t),6&t.subtreeFlags&&(t.flags|=8192)):Gu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function $u(e,t){switch(ta(t),t.tag){case 1:return Ri(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Ai),Ei(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(uo),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Ru=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ou=function(){},Du=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yu=!1,Ju=!1,Xu="function"===typeof WeakSet?WeakSet:Set,Zu=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var hs=null,fs=!1;function ds(e,t,n){for(n=n.child;null!==n;)ps(e,t,n),n=n.sibling}function ps(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Ju||es(n,t);case 6:var r=hs,i=fs;hs=null,ds(e,t,n),fs=i,null!==(hs=r)&&(fs?(e=hs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hs.removeChild(n.stateNode));break;case 18:null!==hs&&(fs?(e=hs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),zt(e)):si(hs,n.stateNode));break;case 4:r=hs,i=fs,hs=n.stateNode.containerInfo,fs=!0,ds(e,t,n),hs=r,fs=i;break;case 0:case 11:case 14:case 15:if(!Ju&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!Ju&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ec(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?(Ju=(r=Ju)||null!==n.memoizedState,ds(e,t,n),Ju=r):ds(e,t,n);break;default:ds(e,t,n)}}function vs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xu),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ms(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:hs=s.stateNode,fs=!1;break e;case 3:case 4:hs=s.stateNode.containerInfo,fs=!0;break e}s=s.return}if(null===hs)throw Error(a(160));ps(o,u,i),hs=null,fs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ec(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ms(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(m){Ec(e,e.return,m)}try{rs(5,e,e.return)}catch(m){Ec(e,e.return,m)}}break;case 1:ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(m){Ec(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&J(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var h=c[u],f=c[u+1];"style"===h?me(i,f):"dangerouslySetInnerHTML"===h?he(i,f):"children"===h?fe(i,f):k(i,h,f,l)}switch(s){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Ec(e,e.return,m)}}break;case 6:if(ms(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Ec(e,e.return,m)}}break;case 3:if(ms(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){Ec(e,e.return,m)}break;case 4:default:ms(t,e),gs(e);break;case 13:ms(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zs=Je())),4&r&&vs(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ju=(l=Ju)||h,ms(t,e),Ju=l):ms(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!h&&0!==(1&e.mode))for(Zu=e,h=e.child;null!==h;){for(f=Zu=h;null!==Zu;){switch(p=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Ec(r,n,m)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){_s(f);continue}}null!==p?(p.return=d,Zu=p):_s(f)}h=h.sibling}e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=f.stateNode,u=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(m){Ec(e,e.return,m)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Ec(e,e.return,m)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ms(t,e),gs(e),4&r&&vs(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){Ec(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ks(e,t,n){Zu=e,bs(e,t,n)}function bs(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Yu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Ju;u=Yu;var c=Ju;if(Yu=o,(Ju=s)&&!c)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?xs(i):null!==s?(s.return=o,Zu=s):xs(i);for(;null!==a;)Zu=a,bs(a,t,n),a=a.sibling;Zu=i,Yu=u,Ju=c}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):ws(e)}}function ws(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ju||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ju)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ja(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ja(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var h=l.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&zt(f)}}}break;default:throw Error(a(163))}Ju||512&t.flags&&as(t)}catch(d){Ec(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function _s(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function xs(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){Ec(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ec(t,i,s)}}var a=t.return;try{as(t)}catch(s){Ec(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Ec(t,o,s)}}}catch(s){Ec(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var Ss,Es=Math.ceil,Ts=b.ReactCurrentDispatcher,Is=b.ReactCurrentOwner,Cs=b.ReactCurrentBatchConfig,As=0,Ns=null,Ps=null,Rs=0,Os=0,Ds=Si(0),Ls=0,Fs=null,Ms=0,js=0,Us=0,Vs=null,qs=null,zs=0,Bs=1/0,Ws=null,Ks=!1,Hs=null,Gs=null,Qs=!1,$s=null,Ys=0,Js=0,Xs=null,Zs=-1,ec=0;function tc(){return 0!==(6&As)?Je():-1!==Zs?Zs:Zs=Je()}function nc(e){return 0===(1&e.mode)?1:0!==(2&As)&&0!==Rs?Rs&-Rs:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,n,r){if(50<Js)throw Js=0,Xs=null,Error(a(185));yt(e,n,r),0!==(2&As)&&e===Ns||(e===Ns&&(0===(2&As)&&(js|=n),4===Ls&&sc(e,Rs)),ic(e,r),1===n&&0===As&&0===(1&t.mode)&&(Bs=Je()+500,Ui&&zi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ft(e,e===Ns?Rs:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,qi(e)}(cc.bind(null,e)):qi(cc.bind(null,e)),oi((function(){0===(6&As)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zs=-1,ec=0,0!==(6&As))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ft(e,e===Ns?Rs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=As;As|=2;var o=vc();for(Ns===e&&Rs===t||(Ws=null,Bs=Je()+500,dc(e,t));;)try{kc();break}catch(s){pc(e,s)}wa(),Ts.current=o,As=i,null!==Ps?t=0:(Ns=null,Rs=0,t=Ls)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Fs,dc(e,0),sc(e,r),ic(e,Je()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Fs,dc(e,0),sc(e,r),ic(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:_c(e,qs,Ws);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=zs+500-Je())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,qs,Ws),t);break}_c(e,qs,Ws);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Es(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,qs,Ws),r);break}_c(e,qs,Ws);break;default:throw Error(a(329))}}}return ic(e,Je()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Vs;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=qs,qs=n,null!==t&&uc(t)),e}function uc(e){null===qs?qs=e:qs.push.apply(qs,e)}function sc(e,t){for(t&=~Us,t&=~js,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&As))throw Error(a(327));xc();var t=ft(e,0);if(0===(1&t))return ic(e,Je()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Fs,dc(e,0),sc(e,t),ic(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,qs,Ws),ic(e,Je()),null}function lc(e,t){var n=As;As|=1;try{return e(t)}finally{0===(As=n)&&(Bs=Je()+500,Ui&&zi())}}function hc(e){null!==$s&&0===$s.tag&&0===(6&As)&&xc();var t=As;As|=1;var n=Cs.transition,r=kt;try{if(Cs.transition=null,kt=1,e)return e()}finally{kt=r,Cs.transition=n,0===(6&(As=t))&&zi()}}function fc(){Os=Ds.current,Ei(Ds)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ps)for(n=Ps.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:io(),Ei(Ai),Ei(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(uo);break;case 10:_a(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Ns=e,Ps=e=Dc(e.current,null),Rs=Os=t,Ls=0,Fs=null,Us=js=Ms=0,qs=Vs=null,null!==Ta){for(t=0;t<Ta.length;t++)if(null!==(r=(n=Ta[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ta=null}return e}function pc(e,t){for(;;){var n=Ps;try{if(wa(),ho.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,ko=!1,bo=0,Is.current=null,null===n||null===n.return){Ls=1,Fs=t,Ps=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Rs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,h=s,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=yu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&mu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){mu(o,l,t),mc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var y=yu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gu(y,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Ls&&(Ls=2),null===Vs?Vs=[o]:Vs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Fa(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Gs||!Gs.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Fa(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(b){t=b,Ps===n&&null!==n&&(Ps=n=n.return);continue}break}}function vc(){var e=Ts.current;return Ts.current=ou,null===e?ou:e}function mc(){0!==Ls&&3!==Ls&&2!==Ls||(Ls=4),null===Ns||0===(268435455&Ms)&&0===(268435455&js)||sc(Ns,Rs)}function yc(e,t){var n=As;As|=2;var r=vc();for(Ns===e&&Rs===t||(Ws=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(wa(),As=n,Ts.current=r,null!==Ps)throw Error(a(261));return Ns=null,Rs=0,Ls}function gc(){for(;null!==Ps;)bc(Ps)}function kc(){for(;null!==Ps&&!$e();)bc(Ps)}function bc(e){var t=Ss(e.alternate,e,Os);e.memoizedProps=e.pendingProps,null===t?wc(e):Ps=t,Is.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qu(n,t,Os)))return void(Ps=n)}else{if(null!==(n=$u(n,t)))return n.flags&=32767,void(Ps=n);if(null===e)return Ls=6,void(Ps=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ps=t);Ps=t=e}while(null!==t);0===Ls&&(Ls=5)}function _c(e,t,n){var r=kt,i=Cs.transition;try{Cs.transition=null,kt=1,function(e,t,n,r){do{xc()}while(null!==$s);if(0!==(6&As))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ns&&(Ps=Ns=null,Rs=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qs||(Qs=!0,Nc(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cs.transition,Cs.transition=null;var u=kt;kt=1;var s=As;As|=4,Is.current=null,function(e,t){if(ei=Wt,dr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(s=u+i),f!==o||0!==r&&3!==f.nodeType||(c=u+r),3===f.nodeType&&(u+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++h===r&&(c=u),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Ec(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}v=ns,ns=!1}(e,n),ys(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,ks(n,e,i),Ye(),As=s,kt=u,Cs.transition=o}else e.current=n;if(Qs&&(Qs=!1,$s=e,Ys=i),o=e.pendingLanes,0===o&&(Gs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ks)throw Ks=!1,e=Hs,Hs=null,e;0!==(1&Ys)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===Xs?Js++:(Js=0,Xs=e):Js=0,zi()}(e,t,n,r)}finally{Cs.transition=i,kt=r}return null}function xc(){if(null!==$s){var e=bt(Ys),t=Cs.transition,n=kt;try{if(Cs.transition=null,kt=16>e?16:e,null===$s)var r=!1;else{if(e=$s,$s=null,Ys=0,0!==(6&As))throw Error(a(331));var i=As;for(As|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Zu=l;null!==Zu;){var h=Zu;switch(h.tag){case 0:case 11:case 15:rs(8,h,o)}var f=h.child;if(null!==f)f.return=h,Zu=f;else for(;null!==Zu;){var d=(h=Zu).sibling,p=h.return;if(os(h),h===l){Zu=null;break}if(null!==d){d.return=p,Zu=d;break}Zu=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var k=e.current;for(Zu=k;null!==Zu;){var b=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Zu=b;else e:for(u=k;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(_){Ec(s,s.return,_)}if(s===u){Zu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Zu=w;break e}Zu=s.return}}if(As=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Cs.transition=t}}return!1}function Sc(e,t,n){e=Da(e,t=pu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Ec(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gs||!Gs.has(r))){t=Da(t,e=vu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Ns===e&&(Rs&n)===n&&(4===Ls||3===Ls&&(130023424&Rs)===Rs&&500>Je()-zs?dc(e,0):Us|=n),ic(e,t)}function Ic(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Aa(e,t))&&(yt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ic(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ic(e,n)}function Nc(e,t){return Ge(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Pc(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Oc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Fc(n.children,i,o,t);case S:u=8,i|=8;break;case E:return(e=Rc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case A:return(e=Rc(13,n,t,i)).elementType=A,e.lanes=o,e;case N:return(e=Rc(19,n,t,i)).elementType=N,e.lanes=o,e;case O:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:u=10;break e;case I:u=9;break e;case C:u=11;break e;case P:u=14;break e;case R:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Rc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Fc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function jc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function qc(e,t,n,r,i,a,o,u,s){return e=new Vc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Rc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pa(a),e}function zc(e){if(!e)return Ii;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function Bc(e,t,n,r,i,a,o,u,s){return(e=qc(n,r,!0,e,0,a,0,u,s)).context=zc(null),n=e.current,(a=Oa(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Da(n,a,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Wc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Da(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Ss=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Nu(t),da();break;case 5:ao(t);break;case 1:Ri(t.type)&&Fi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?ju(e,t,n):(Ti(uo,1&uo.current),null!==(e=Ku(e,t,n))?e.sibling:null);Ti(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Eu(e,t,n)}return Ku(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wu(e,t),e=t.pendingProps;var i=Pi(t,Ci.current);Sa(t,n),i=So(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Fi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Pa(t),i.updater=qa,t.stateNode=i,i._reactInternals=t,Ka(t,r,e,n),t=Au(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Iu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=_u(null,t,r,e,n);break e;case 14:t=xu(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Iu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Nu(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ra(e,t),Ma(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Pu(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Pu(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ja(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ku(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Tu(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return ju(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ya(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_u(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ti(ya,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ai.current){t=Ku(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Oa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var h=(l=l.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),xa(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Sa(t,n),r=r(i=Ea(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),xu(e,t,r,i=ma(r.type,i),n);case 15:return Su(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Wu(e,t),t.tag=1,Ri(r)?(e=!0,Fi(t)):e=!1,Sa(t,n),Ba(t,r,i),Ka(t,r,i,n),Au(null,t,r,!0,e,n);case 19:return Bu(e,t,n);case 22:return Eu(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Kc(o);u.call(e)}}Wc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Kc(o);a.call(e)}}var o=Bc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),hc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Kc(s);u.call(e)}}var s=qc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,zr(8===e.nodeType?e.parentNode:e),hc((function(){Wc(t,s,n,r)})),s}(n,t,e,i,r);return Kc(o)}Yc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wc(e,t,null,null)},Yc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){Wc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,Je()),0===(6&As)&&(Bs=Je()+500,zi()))}break;case 13:hc((function(){var t=Aa(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Gc(e,1)}},_t=function(e){if(13===e.tag){var t=Aa(e,134217728);if(null!==t)rc(t,e,134217728,tc());Gc(e,134217728)}},xt=function(e){if(13===e.tag){var t=nc(e),n=Aa(e,t);if(null!==n)rc(n,e,t,tc());Gc(e,t)}},St=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));G(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=lc,Ae=hc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Te,Ie,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=qc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(hc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},372:function(e,t){"use strict";var n=60103,r=60106,i=60107,a=60108,o=60114,u=60109,s=60110,c=60112,l=60113,h=60120,f=60115,d=60116,p=60121,v=60122,m=60117,y=60129,g=60131;if("function"===typeof Symbol&&Symbol.for){var k=Symbol.for;n=k("react.element"),r=k("react.portal"),i=k("react.fragment"),a=k("react.strict_mode"),o=k("react.profiler"),u=k("react.provider"),s=k("react.context"),c=k("react.forward_ref"),l=k("react.suspense"),h=k("react.suspense_list"),f=k("react.memo"),d=k("react.lazy"),p=k("react.block"),v=k("react.server.block"),m=k("react.fundamental"),y=k("react.debug_trace_mode"),g=k("react.legacy_hidden")}function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case o:case a:case l:case h:return e;default:switch(e=e&&e.$$typeof){case s:case c:case d:case f:case u:return e;default:return t}}case r:return t}}}t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===o||e===y||e===a||e===l||e===h||e===g||"object"===typeof e&&null!==e&&(e.$$typeof===d||e.$$typeof===f||e.$$typeof===u||e.$$typeof===s||e.$$typeof===c||e.$$typeof===m||e.$$typeof===p||e[0]===v)},t.typeOf=b},441:function(e,t,n){"use strict";e.exports=n(372)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var b=k.prototype=new g;b.constructor=k,v(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(I,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=A(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=A(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function N(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},O={transition:null},D={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:O,ReactCurrentOwner:x};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)_.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],h=1,f=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,b(e),!v)if(null!==r(c))v=!0,O(_);else{var t=r(l);null!==t&&D(w,t.startTime-e)}}function _(e,n){v=!1,m&&(m=!1,g(T),T=-1),p=!0;var a=d;try{for(b(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!A());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var u=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?f.callback=u:f===r(c)&&i(c),b(n)}else i(c);f=r(c)}if(null!==f)var s=!0;else{var h=r(l);null!==h&&D(w,h.startTime-n),s=!1}return s}finally{f=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,S=!1,E=null,T=-1,I=5,C=-1;function A(){return!(t.unstable_now()-C<I)}function N(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?x():(S=!1,E=null)}}else S=!1}if("function"===typeof k)x=function(){k(N)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=N,x=function(){R.postMessage(null)}}else x=function(){y(N,0)};function O(e){E=e,S||(S=!0,x())}function D(e,n){T=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,O(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(T),T=-1):m=!0,D(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,O(_))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},613:function(e){e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return!1;for(var u=Object.prototype.hasOwnProperty.bind(t),s=0;s<a.length;s++){var c=a[s];if(!u(c))return!1;var l=e[c],h=t[c];if(!1===(i=n?n.call(r,l,h,c):void 0)||void 0===i&&l!==h)return!1}return!0}},564:function(e){var t=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['\u2019](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,n=function(e){return e.match(t)||[]},r=function(e){return e[0].toUpperCase()+e.slice(1)},i=function(e,t){return n(e).join(t).toLowerCase()},a=function(e){return n(e).reduce((function(e,t){return"".concat(e).concat(e?t[0].toUpperCase()+t.slice(1).toLowerCase():t.toLowerCase())}),"")};e.exports={words:n,upperFirst:r,camelCase:a,pascalCase:function(e){return r(a(e))},snakeCase:function(e){return i(e,"_")},kebabCase:function(e){return i(e,"-")},sentenceCase:function(e){return r(i(e," "))},titleCase:function(e){return n(e).map(r).join(" ")}}},514:function(e){function t(e,t){var n=e.length,r=new Array(n),i={},a=n,o=function(e){for(var t=new Map,n=0,r=e.length;n<r;n++){var i=e[n];t.has(i[0])||t.set(i[0],new Set),t.has(i[1])||t.set(i[1],new Set),t.get(i[0]).add(i[1])}return t}(t),u=function(e){for(var t=new Map,n=0,r=e.length;n<r;n++)t.set(e[n],n);return t}(e);for(t.forEach((function(e){if(!u.has(e[0])||!u.has(e[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")}));a--;)i[a]||s(e[a],a,new Set);return r;function s(e,t,a){if(a.has(e)){var c;try{c=", node was:"+JSON.stringify(e)}catch(f){c=""}throw new Error("Cyclic dependency"+c)}if(!u.has(e))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(e));if(!i[t]){i[t]=!0;var l=o.get(e)||new Set;if(t=(l=Array.from(l)).length){a.add(e);do{var h=l[--t];s(h,u.get(h),a)}while(t);a.delete(e)}r[--n]=e}}}e.exports=function(e){return t(function(e){for(var t=new Set,n=0,r=e.length;n<r;n++){var i=e[n];t.add(i[0]),t.add(i[1])}return Array.from(t)}(e),e)},e.exports.array=t}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".f5079acd.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="cacarrot:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var h=c[l];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+a){u=h;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var f=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=f.bind(null,u.onerror),u.onload=f.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/Cacarrot/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkcacarrot=self.webpackChunkcacarrot||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),n.nc=void 0,function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return gr},SDK_VERSION:function(){return Ui},_DEFAULT_ENTRY_NAME:function(){return Ti},_addComponent:function(){return Ni},_addOrOverwriteComponent:function(){return Pi},_apps:function(){return Ci},_clearComponents:function(){return Li},_components:function(){return Ai},_getProvider:function(){return Oi},_registerComponent:function(){return Ri},_removeServiceInstance:function(){return Di},deleteApp:function(){return Bi},getApp:function(){return qi},getApps:function(){return zi},initializeApp:function(){return Vi},onLog:function(){return Hi},registerVersion:function(){return Ki},setLogLevel:function(){return Gi}});var t,r=n(791),i=n(250);function a(e){if(Array.isArray(e))return e}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return a(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||u(e,t)||s()}function l(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function h(e){return function(e){if(Array.isArray(e))return o(e)}(e)||l(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e){var t=function(e,t){if("object"!==d(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===d(t)?t:String(t)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function m(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){var t=b();return function(){var n,r=k(e);if(t){var i=k(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===d(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}(this,n)}}function x(e,t,n){return x=b()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&y(i,n.prototype),i},x.apply(null,arguments)}function S(e){var t="function"===typeof Map?new Map:void 0;return S=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return x(e,arguments,k(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),y(n,e)},S(e)}function E(e){return a(e)||l(e)||u(e)||s()}function T(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function I(){return I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var C,A="popstate";function N(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function P(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function R(e,t){return{usr:e.state,key:e.key,idx:t}}function O(e,t,n,r){return void 0===n&&(n=null),I({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?L(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function D(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function L(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function F(e,n,r,i){void 0===i&&(i={});var a=i,o=a.window,u=void 0===o?document.defaultView:o,s=a.v5Compat,c=void 0!==s&&s,l=u.history,h=t.Pop,f=null,d=p();function p(){return(l.state||{idx:null}).idx}function v(){h=t.Pop;var e=p(),n=null==e?null:e-d;d=e,f&&f({action:h,location:y.location,delta:n})}function m(e){var t="null"!==u.location.origin?u.location.origin:u.location.href,n="string"===typeof e?e:D(e);return N(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==d&&(d=0,l.replaceState(I({},l.state,{idx:d}),""));var y={get action(){return h},get location(){return e(u,l)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return u.addEventListener(A,v),f=e,function(){u.removeEventListener(A,v),f=null}},createHref:function(e){return n(u,e)},createURL:m,encodeLocation:function(e){var t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){h=t.Push;var i=O(y.location,e,n);r&&r(i,e);var a=R(i,d=p()+1),o=y.createHref(i);try{l.pushState(a,"",o)}catch(Fa){u.location.assign(o)}c&&f&&f({action:h,location:y.location,delta:1})},replace:function(e,n){h=t.Replace;var i=O(y.location,e,n);r&&r(i,e);var a=R(i,d=p()),o=y.createHref(i);l.replaceState(a,"",o),c&&f&&f({action:h,location:y.location,delta:0})},go:function(e){return l.go(e)}};return y}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(C||(C={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function M(e,t,n){void 0===n&&(n="/");var r=J(("string"===typeof t?L(t):t).pathname||"/",n);if(null==r)return null;var i=j(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=Q(i[o],Y(r));return a}function j(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(N(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var u=te([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(N(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+u+'".'),j(e.children,t,s,u)),(null!=e.path||e.index)&&t.push({path:u,score:G(u,e.index),routesMeta:s})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=T(U(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(u){a.e(u)}finally{a.f()}}else i(e,t)})),t}function U(e){var t=e.split("/");if(0===t.length)return[];var n=E(t),r=n[0],i=n.slice(1),a=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===i.length)return a?[o,""]:[o];var u=U(i.join("/")),s=[];return s.push.apply(s,h(u.map((function(e){return""===e?o:[o,e].join("/")})))),a&&s.push.apply(s,h(u)),s.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var V=/^:\w+$/,q=3,z=2,B=1,W=10,K=-2,H=function(e){return"*"===e};function G(e,t){var n=e.split("/"),r=n.length;return n.some(H)&&(r+=K),t&&(r+=z),n.filter((function(e){return!H(e)})).reduce((function(e,t){return e+(V.test(t)?q:""===t?B:W)}),r)}function Q(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=$({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var h=u.route;a.push({params:r,pathname:te([i,l.pathname]),pathnameBase:ne(te([i,l.pathnameBase])),route:h}),"/"!==l.pathnameBase&&(i=te([i,l.pathnameBase]))}return a}function $(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);P("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=c(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),l=o.slice(1),h=a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(Fa){return P(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+Fa+")."),e}}(l[n]||"",t),e}),{});return{params:h,pathname:u,pathnameBase:s,pattern:e}}function Y(e){try{return decodeURI(e)}catch(Fa){return P(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+Fa+")."),e}}function J(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function X(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function Z(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function ee(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=L(e):(N(!(i=I({},e)).pathname||!i.pathname.includes("?"),X("?","pathname","search",i)),N(!i.pathname||!i.pathname.includes("#"),X("#","pathname","hash",i)),N(!i.search||!i.search.includes("#"),X("#","search","hash",i)));var a,o=""===e||""===i.pathname,u=o?"/":i.pathname;if(r||null==u)a=n;else{var s=t.length-1;if(u.startsWith("..")){for(var c=u.split("/");".."===c[0];)c.shift(),s-=1;i.pathname=c.join("/")}a=s>=0?t[s]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?L(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:re(a),hash:ie(u)}}(i,a),h=u&&"/"!==u&&u.endsWith("/"),f=(o||"."===u)&&n.endsWith("/");return l.pathname.endsWith("/")||!h&&!f||(l.pathname+="/"),l}var te=function(e){return e.join("/").replace(/\/\/+/g,"/")},ne=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},re=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},ie=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},ae=function(e){g(n,e);var t=_(n);function n(){return f(this,n),t.apply(this,arguments)}return m(n)}(S(Error));function oe(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var ue=["post","put","patch","delete"],se=(new Set(ue),["get"].concat(ue));new Set(se),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;Symbol("deferred");function ce(){return ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ce.apply(this,arguments)}var le=r.createContext(null);var he=r.createContext(null);var fe=r.createContext(null);var de=r.createContext(null);var pe=r.createContext(null);var ve=r.createContext({outlet:null,matches:[],isDataRoute:!1});var me=r.createContext(null);function ye(){return null!=r.useContext(pe)}function ge(){return ye()||N(!1),r.useContext(pe).location}function ke(e){r.useContext(de).static||r.useLayoutEffect(e)}function be(){return r.useContext(ve).isDataRoute?function(){var e=Ne(Se.UseNavigateStable).router,t=Re(Ee.UseNavigateStable),n=r.useRef(!1);ke((function(){n.current=!0}));var i=r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,ce({fromRouteId:t},i)))}),[e,t]);return i}():function(){ye()||N(!1);var e=r.useContext(le),t=r.useContext(de),n=t.basename,i=t.navigator,a=r.useContext(ve).matches,o=ge().pathname,u=JSON.stringify(Z(a).map((function(e){return e.pathnameBase}))),s=r.useRef(!1);ke((function(){s.current=!0}));var c=r.useCallback((function(t,r){if(void 0===r&&(r={}),s.current)if("number"!==typeof t){var a=ee(t,JSON.parse(u),o,"path"===r.relative);null==e&&"/"!==n&&(a.pathname="/"===a.pathname?n:te([n,a.pathname])),(r.replace?i.replace:i.push)(a,r.state,r)}else i.go(t)}),[n,i,u,o,e]);return c}()}var we=r.createContext(null);function _e(e,n,i){ye()||N(!1);var a,o=r.useContext(de).navigator,u=r.useContext(ve).matches,s=u[u.length-1],c=s?s.params:{},l=(s&&s.pathname,s?s.pathnameBase:"/"),h=(s&&s.route,ge());if(n){var f,d="string"===typeof n?L(n):n;"/"===l||(null==(f=d.pathname)?void 0:f.startsWith(l))||N(!1),a=d}else a=h;var p=a.pathname||"/",v=M(e,{pathname:"/"===l?p:p.slice(l.length)||"/"});var m=Ae(v&&v.map((function(e){return Object.assign({},e,{params:Object.assign({},c,e.params),pathname:te([l,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:te([l,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),u,i);return n&&m?r.createElement(pe.Provider,{value:{location:ce({pathname:"/",search:"",hash:"",state:null,key:"default"},a),navigationType:t.Pop}},m):m}function xe(){var e=function(){var e,t=r.useContext(me),n=Pe(Ee.UseRouteError),i=Re(Ee.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=oe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:a},n):null,null)}var Se,Ee,Te=r.createElement(xe,null),Ie=function(e){g(n,e);var t=_(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},r}return m(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?r.createElement(ve.Provider,{value:this.props.routeContext},r.createElement(me.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),n}(r.Component);function Ce(e){var t=e.routeContext,n=e.match,i=e.children,a=r.useContext(le);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(ve.Provider,{value:t},i)}function Ae(e,t,n){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),null==e){var a;if(null==(a=n)||!a.errors)return null;e=n.matches}var o=e,u=null==(i=n)?void 0:i.errors;if(null!=u){var s=o.findIndex((function(e){return e.route.id&&(null==u?void 0:u[e.route.id])}));s>=0||N(!1),o=o.slice(0,Math.min(o.length,s+1))}return o.reduceRight((function(e,i,a){var s=i.route.id?null==u?void 0:u[i.route.id]:null,c=null;n&&(c=i.route.errorElement||Te);var l=t.concat(o.slice(0,a+1)),h=function(){var t;return t=s?c:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(Ce,{match:i,routeContext:{outlet:e,matches:l,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?r.createElement(Ie,{location:n.location,revalidation:n.revalidation,component:c,error:s,children:h(),routeContext:{outlet:null,matches:l,isDataRoute:!0}}):h()}),null)}function Ne(e){var t=r.useContext(le);return t||N(!1),t}function Pe(e){var t=r.useContext(he);return t||N(!1),t}function Re(e){var t=function(e){var t=r.useContext(ve);return t||N(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||N(!1),n.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"}(Se||(Se={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"}(Ee||(Ee={}));var Oe;function De(e){var t=e.to,n=e.replace,i=e.state,a=e.relative;ye()||N(!1);var o=r.useContext(ve).matches,u=ge().pathname,s=be(),c=ee(t,Z(o).map((function(e){return e.pathnameBase})),u,"path"===a),l=JSON.stringify(c);return r.useEffect((function(){return s(JSON.parse(l),{replace:n,state:i,relative:a})}),[s,l,a,n,i]),null}function Le(e){return function(e){var t=r.useContext(ve).outlet;return t?r.createElement(we.Provider,{value:e},t):t}(e.context)}function Fe(e){N(!1)}function Me(e){var n=e.basename,i=void 0===n?"/":n,a=e.children,o=void 0===a?null:a,u=e.location,s=e.navigationType,c=void 0===s?t.Pop:s,l=e.navigator,h=e.static,f=void 0!==h&&h;ye()&&N(!1);var d=i.replace(/^\/*/,"/"),p=r.useMemo((function(){return{basename:d,navigator:l,static:f}}),[d,l,f]);"string"===typeof u&&(u=L(u));var v=u,m=v.pathname,y=void 0===m?"/":m,g=v.search,k=void 0===g?"":g,b=v.hash,w=void 0===b?"":b,_=v.state,x=void 0===_?null:_,S=v.key,E=void 0===S?"default":S,T=r.useMemo((function(){var e=J(y,d);return null==e?null:{location:{pathname:e,search:k,hash:w,state:x,key:E},navigationType:c}}),[d,y,k,w,x,E,c]);return null==T?null:r.createElement(de.Provider,{value:p},r.createElement(pe.Provider,{children:o,value:T}))}function je(e){var t=e.children,n=e.location;return function(e,t){return _e(e,t)}(Ve(t),n)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(Oe||(Oe={}));var Ue=new Promise((function(){}));r.Component;function Ve(e,t){void 0===t&&(t=[]);var n=[];return r.Children.forEach(e,(function(e,i){if(r.isValidElement(e)){var a=[].concat(h(t),[i]);if(e.type!==r.Fragment){e.type!==Fe&&N(!1),e.props.index&&e.props.children&&N(!1);var o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Ve(e.props.children,a)),n.push(o)}else n.push.apply(n,Ve(e.props.children,a))}})),n}var qe=n(441),ze=n(613),Be=n.n(ze);var We=function(e){function t(e,r,s,c,f){for(var d,p,v,m,b,_=0,x=0,S=0,E=0,T=0,R=0,D=v=d=0,F=0,M=0,j=0,U=0,V=s.length,q=V-1,z="",B="",W="",K="";F<V;){if(p=s.charCodeAt(F),F===q&&0!==x+E+S+_&&(0!==x&&(p=47===x?10:47),E=S=_=0,V++,q++),0===x+E+S+_){if(F===q&&(0<M&&(z=z.replace(h,"")),0<z.trim().length)){switch(p){case 32:case 9:case 59:case 13:case 10:break;default:z+=s.charAt(F)}p=59}switch(p){case 123:for(d=(z=z.trim()).charCodeAt(0),v=1,U=++F;F<V;){switch(p=s.charCodeAt(F)){case 123:v++;break;case 125:v--;break;case 47:switch(p=s.charCodeAt(F+1)){case 42:case 47:e:{for(D=F+1;D<q;++D)switch(s.charCodeAt(D)){case 47:if(42===p&&42===s.charCodeAt(D-1)&&F+2!==D){F=D+1;break e}break;case 10:if(47===p){F=D+1;break e}}F=D}}break;case 91:p++;case 40:p++;case 34:case 39:for(;F++<q&&s.charCodeAt(F)!==p;);}if(0===v)break;F++}if(v=s.substring(U,F),0===d&&(d=(z=z.replace(l,"").trim()).charCodeAt(0)),64===d){switch(0<M&&(z=z.replace(h,"")),p=z.charCodeAt(1)){case 100:case 109:case 115:case 45:M=r;break;default:M=P}if(U=(v=t(r,M,v,p,f+1)).length,0<O&&(b=u(3,v,M=n(P,z,j),r,C,I,U,p,f,c),z=M.join(""),void 0!==b&&0===(U=(v=b.trim()).length)&&(p=0,v="")),0<U)switch(p){case 115:z=z.replace(w,o);case 100:case 109:case 45:v=z+"{"+v+"}";break;case 107:v=(z=z.replace(y,"$1 $2"))+"{"+v+"}",v=1===N||2===N&&a("@"+v,3)?"@-webkit-"+v+"@"+v:"@"+v;break;default:v=z+v,112===c&&(B+=v,v="")}else v=""}else v=t(r,n(r,z,j),v,c,f+1);W+=v,v=j=M=D=d=0,z="",p=s.charCodeAt(++F);break;case 125:case 59:if(1<(U=(z=(0<M?z.replace(h,""):z).trim()).length))switch(0===D&&(d=z.charCodeAt(0),45===d||96<d&&123>d)&&(U=(z=z.replace(" ",":")).length),0<O&&void 0!==(b=u(1,z,r,e,C,I,B.length,c,f,c))&&0===(U=(z=b.trim()).length)&&(z="\0\0"),d=z.charCodeAt(0),p=z.charCodeAt(1),d){case 0:break;case 64:if(105===p||99===p){K+=z+s.charAt(F);break}default:58!==z.charCodeAt(U-1)&&(B+=i(z,d,p,z.charCodeAt(2)))}j=M=D=d=0,z="",p=s.charCodeAt(++F)}}switch(p){case 13:case 10:47===x?x=0:0===1+d&&107!==c&&0<z.length&&(M=1,z+="\0"),0<O*L&&u(0,z,r,e,C,I,B.length,c,f,c),I=1,C++;break;case 59:case 125:if(0===x+E+S+_){I++;break}default:switch(I++,m=s.charAt(F),p){case 9:case 32:if(0===E+_+x)switch(T){case 44:case 58:case 9:case 32:m="";break;default:32!==p&&(m=" ")}break;case 0:m="\\0";break;case 12:m="\\f";break;case 11:m="\\v";break;case 38:0===E+x+_&&(M=j=1,m="\f"+m);break;case 108:if(0===E+x+_+A&&0<D)switch(F-D){case 2:112===T&&58===s.charCodeAt(F-3)&&(A=T);case 8:111===R&&(A=R)}break;case 58:0===E+x+_&&(D=F);break;case 44:0===x+S+E+_&&(M=1,m+="\r");break;case 34:case 39:0===x&&(E=E===p?0:0===E?p:E);break;case 91:0===E+x+S&&_++;break;case 93:0===E+x+S&&_--;break;case 41:0===E+x+_&&S--;break;case 40:if(0===E+x+_){if(0===d)if(2*T+3*R===533);else d=1;S++}break;case 64:0===x+S+E+_+D+v&&(v=1);break;case 42:case 47:if(!(0<E+_+S))switch(x){case 0:switch(2*p+3*s.charCodeAt(F+1)){case 235:x=47;break;case 220:U=F,x=42}break;case 42:47===p&&42===T&&U+2!==F&&(33===s.charCodeAt(U+2)&&(B+=s.substring(U,F+1)),m="",x=0)}}0===x&&(z+=m)}R=T,T=p,F++}if(0<(U=B.length)){if(M=r,0<O&&(void 0!==(b=u(2,B,M,e,C,I,U,c,f,c))&&0===(B=b).length))return K+B+W;if(B=M.join(",")+"{"+B+"}",0!==N*A){switch(2!==N||a(B,2)||(A=0),A){case 111:B=B.replace(k,":-moz-$1")+B;break;case 112:B=B.replace(g,"::-webkit-input-$1")+B.replace(g,"::-moz-$1")+B.replace(g,":-ms-input-$1")+B}A=0}}return K+B+W}function n(e,t,n){var i=t.trim().split(v);t=i;var a=i.length,o=e.length;switch(o){case 0:case 1:var u=0;for(e=0===o?"":e[0]+" ";u<a;++u)t[u]=r(e,t[u],n).trim();break;default:var s=u=0;for(t=[];u<a;++u)for(var c=0;c<o;++c)t[s++]=r(e[c]+" ",i[u],n).trim()}return t}function r(e,t,n){var r=t.charCodeAt(0);switch(33>r&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(m,"$1"+e.trim());case 58:return e.trim()+t.replace(m,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(m,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function i(e,t,n,r){var o=e+";",u=2*t+3*n+4*r;if(944===u){e=o.indexOf(":",9)+1;var s=o.substring(e,o.length-1).trim();return s=o.substring(0,e).trim()+s+";",1===N||2===N&&a(s,1)?"-webkit-"+s+s:s}if(0===N||2===N&&!a(o,1))return o;switch(u){case 1015:return 97===o.charCodeAt(10)?"-webkit-"+o+o:o;case 951:return 116===o.charCodeAt(3)?"-webkit-"+o+o:o;case 963:return 110===o.charCodeAt(5)?"-webkit-"+o+o:o;case 1009:if(100!==o.charCodeAt(4))break;case 969:case 942:return"-webkit-"+o+o;case 978:return"-webkit-"+o+"-moz-"+o+o;case 1019:case 983:return"-webkit-"+o+"-moz-"+o+"-ms-"+o+o;case 883:if(45===o.charCodeAt(8))return"-webkit-"+o+o;if(0<o.indexOf("image-set(",11))return o.replace(T,"$1-webkit-$2")+o;break;case 932:if(45===o.charCodeAt(4))switch(o.charCodeAt(5)){case 103:return"-webkit-box-"+o.replace("-grow","")+"-webkit-"+o+"-ms-"+o.replace("grow","positive")+o;case 115:return"-webkit-"+o+"-ms-"+o.replace("shrink","negative")+o;case 98:return"-webkit-"+o+"-ms-"+o.replace("basis","preferred-size")+o}return"-webkit-"+o+"-ms-"+o+o;case 964:return"-webkit-"+o+"-ms-flex-"+o+o;case 1023:if(99!==o.charCodeAt(8))break;return"-webkit-box-pack"+(s=o.substring(o.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+o+"-ms-flex-pack"+s+o;case 1005:return d.test(o)?o.replace(f,":-webkit-")+o.replace(f,":-moz-")+o:o;case 1e3:switch(t=(s=o.substring(13).trim()).indexOf("-")+1,s.charCodeAt(0)+s.charCodeAt(t)){case 226:s=o.replace(b,"tb");break;case 232:s=o.replace(b,"tb-rl");break;case 220:s=o.replace(b,"lr");break;default:return o}return"-webkit-"+o+"-ms-"+s+o;case 1017:if(-1===o.indexOf("sticky",9))break;case 975:switch(t=(o=e).length-10,u=(s=(33===o.charCodeAt(t)?o.substring(0,t):o).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|s.charCodeAt(7))){case 203:if(111>s.charCodeAt(8))break;case 115:o=o.replace(s,"-webkit-"+s)+";"+o;break;case 207:case 102:o=o.replace(s,"-webkit-"+(102<u?"inline-":"")+"box")+";"+o.replace(s,"-webkit-"+s)+";"+o.replace(s,"-ms-"+s+"box")+";"+o}return o+";";case 938:if(45===o.charCodeAt(5))switch(o.charCodeAt(6)){case 105:return s=o.replace("-items",""),"-webkit-"+o+"-webkit-box-"+s+"-ms-flex-"+s+o;case 115:return"-webkit-"+o+"-ms-flex-item-"+o.replace(x,"")+o;default:return"-webkit-"+o+"-ms-flex-line-pack"+o.replace("align-content","").replace(x,"")+o}break;case 973:case 989:if(45!==o.charCodeAt(3)||122===o.charCodeAt(4))break;case 931:case 953:if(!0===E.test(e))return 115===(s=e.substring(e.indexOf(":")+1)).charCodeAt(0)?i(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):o.replace(s,"-webkit-"+s)+o.replace(s,"-moz-"+s.replace("fill-",""))+o;break;case 962:if(o="-webkit-"+o+(102===o.charCodeAt(5)?"-ms-"+o:"")+o,211===n+r&&105===o.charCodeAt(13)&&0<o.indexOf("transform",10))return o.substring(0,o.indexOf(";",27)+1).replace(p,"$1-webkit-$2")+o}return o}function a(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),D(2!==t?r:r.replace(S,"$1"),n,t)}function o(e,t){var n=i(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(_," or ($1)").substring(4):"("+t+")"}function u(e,t,n,r,i,a,o,u,s,l){for(var h,f=0,d=t;f<O;++f)switch(h=R[f].call(c,e,d,n,r,i,a,o,u,s,l)){case void 0:case!1:case!0:case null:break;default:d=h}if(d!==t)return d}function s(e){return void 0!==(e=e.prefix)&&(D=null,e?"function"!==typeof e?N=1:(N=2,D=e):N=0),s}function c(e,n){var r=e;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<O){var i=u(-1,n,r,r,C,I,0,0,0,0);void 0!==i&&"string"===typeof i&&(n=i)}var a=t(P,r,n,0,0);return 0<O&&(void 0!==(i=u(-2,a,r,r,C,I,a.length,0,0,0))&&(a=i)),"",A=0,I=C=1,a}var l=/^\0+/g,h=/[\0\r\f]/g,f=/: */g,d=/zoo|gra/,p=/([,: ])(transform)/g,v=/,\r+?/g,m=/([\t\r\n ])*\f?&/g,y=/@(k\w+)\s*(\S*)\s*/,g=/::(place)/g,k=/:(read-only)/g,b=/[svh]\w+-[tblr]{2}/,w=/\(\s*(.*)\s*\)/g,_=/([\s\S]*?);/g,x=/-self|flex-/g,S=/[^]*?(:[rp][el]a[\w-]+)[^]*/,E=/stretch|:\s*\w+\-(?:conte|avail)/,T=/([^-])(image-set\()/,I=1,C=1,A=0,N=1,P=[],R=[],O=0,D=null,L=0;return c.use=function e(t){switch(t){case void 0:case null:O=R.length=0;break;default:if("function"===typeof t)R[O++]=t;else if("object"===typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else L=0|!!t}return e},c.set=s,void 0!==e&&s(e),c},Ke={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function He(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var Ge=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Qe=He((function(e){return Ge.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),$e=n(110),Ye=n.n($e);function Je(){return(Je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Xe=function(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n},Ze=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,qe.typeOf)(e)},et=Object.freeze([]),tt=Object.freeze({});function nt(e){return"function"==typeof e}function rt(e){return e.displayName||e.name||"Component"}function it(e){return e&&"string"==typeof e.styledComponentId}var at="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&({NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",ot="undefined"!=typeof window&&"HTMLElement"in window,ut=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&(void 0!=={NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:void 0!=={NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY)));function st(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var ct=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)(i<<=1)<0&&st(16,""+e);this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var a=r;a<i;a++)this.groupSizes[a]=0}for(var o=this.indexOfGroup(e+1),u=0,s=t.length;u<s;u++)this.tag.insertRule(o,t[u])&&(this.groupSizes[e]++,o++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,a=r;a<i;a++)t+=this.tag.getRule(a)+"/*!sc*/\n";return t},e}(),lt=new Map,ht=new Map,ft=1,dt=function(e){if(lt.has(e))return lt.get(e);for(;ht.has(ft);)ft++;var t=ft++;return lt.set(e,t),ht.set(t,e),t},pt=function(e){return ht.get(e)},vt=function(e,t){t>=ft&&(ft=t+1),lt.set(e,t),ht.set(t,e)},mt="style["+at+'][data-styled-version="5.3.10"]',yt=new RegExp("^"+at+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),gt=function(e,t,n){for(var r,i=n.split(","),a=0,o=i.length;a<o;a++)(r=i[a])&&e.registerName(t,r)},kt=function(e,t){for(var n=(t.textContent||"").split("/*!sc*/\n"),r=[],i=0,a=n.length;i<a;i++){var o=n[i].trim();if(o){var u=o.match(yt);if(u){var s=0|parseInt(u[1],10),c=u[2];0!==s&&(vt(c,s),gt(e,c,u[3]),e.getTag().insertRules(s,r)),r.length=0}else r.push(o)}}},bt=function(){return n.nc},wt=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var r=t[n];if(r&&1===r.nodeType&&r.hasAttribute(at))return r}}(n),a=void 0!==i?i.nextSibling:null;r.setAttribute(at,"active"),r.setAttribute("data-styled-version","5.3.10");var o=bt();return o&&r.setAttribute("nonce",o),n.insertBefore(r,a),r},_t=function(){function e(e){var t=this.element=wt(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}st(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),xt=function(){function e(e){var t=this.element=wt(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),r=this.nodes[e];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),St=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),Et=ot,Tt={isServer:!ot,useCSSOMInjection:!ut},It=function(){function e(e,t,n){void 0===e&&(e=tt),void 0===t&&(t={}),this.options=Je({},Tt,{},e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&ot&&Et&&(Et=!1,function(e){for(var t=document.querySelectorAll(mt),n=0,r=t.length;n<r;n++){var i=t[n];i&&"active"!==i.getAttribute(at)&&(kt(e,i),i.parentNode&&i.parentNode.removeChild(i))}}(this))}e.registerId=function(e){return dt(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(Je({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(n=(t=this.options).isServer,r=t.useCSSOMInjection,i=t.target,e=n?new St(i):r?new _t(i):new xt(i),new ct(e)));var e,t,n,r,i},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(dt(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(dt(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(dt(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=0;i<n;i++){var a=pt(i);if(void 0!==a){var o=e.names.get(a),u=t.getGroup(i);if(o&&u&&o.size){var s=at+".g"+i+'[id="'+a+'"]',c="";void 0!==o&&o.forEach((function(e){e.length>0&&(c+=e+",")})),r+=""+u+s+'{content:"'+c+'"}/*!sc*/\n'}}}return r}(this)},e}(),Ct=/(a)(d)/gi,At=function(e){return String.fromCharCode(e+(e>25?39:97))};function Nt(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=At(t%52)+n;return(At(t%52)+n).replace(Ct,"$1-$2")}var Pt=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},Rt=function(e){return Pt(5381,e)};function Ot(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(nt(n)&&!it(n))return!1}return!0}var Dt=Rt("5.3.10"),Lt=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&Ot(e),this.componentId=t,this.baseHash=Pt(Dt,t),this.baseStyle=n,It.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.componentId,i=[];if(this.baseStyle&&i.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(r,this.staticRulesId))i.push(this.staticRulesId);else{var a=Zt(this.rules,e,t,n).join(""),o=Nt(Pt(this.baseHash,a)>>>0);if(!t.hasNameForId(r,o)){var u=n(a,"."+o,void 0,r);t.insertRules(r,o,u)}i.push(o),this.staticRulesId=o}else{for(var s=this.rules.length,c=Pt(this.baseHash,n.hash),l="",h=0;h<s;h++){var f=this.rules[h];if("string"==typeof f)l+=f;else if(f){var d=Zt(f,e,t,n),p=Array.isArray(d)?d.join(""):d;c=Pt(c,p+h),l+=p}}if(l){var v=Nt(c>>>0);if(!t.hasNameForId(r,v)){var m=n(l,"."+v,void 0,r);t.insertRules(r,v,m)}i.push(v)}}return i.join(" ")},e}(),Ft=/^\s*\/\/.*$/gm,Mt=[":","[",".","#"];function jt(e){var t,n,r,i,a=void 0===e?tt:e,o=a.options,u=void 0===o?tt:o,s=a.plugins,c=void 0===s?et:s,l=new We(u),h=[],f=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,r,i,a,o,u,s,c,l,h){switch(n){case 1:if(0===l&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===c)return r+"/*|*/";break;case 3:switch(c){case 102:case 112:return e(i[0]+r),"";default:return r+(0===h?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(t)}}}((function(e){h.push(e)})),d=function(e,r,a){return 0===r&&-1!==Mt.indexOf(a[n.length])||a.match(i)?e:"."+t};function p(e,a,o,u){void 0===u&&(u="&");var s=e.replace(Ft,""),c=a&&o?o+" "+a+" { "+s+" }":s;return t=u,n=a,r=new RegExp("\\"+n+"\\b","g"),i=new RegExp("(\\"+n+"\\b){2,}"),l(o||!a?"":a,c)}return l.use([].concat(c,[function(e,t,i){2===e&&i.length&&i[0].lastIndexOf(n)>0&&(i[0]=i[0].replace(r,d))},f,function(e){if(-2===e){var t=h;return h=[],t}}])),p.hash=c.length?c.reduce((function(e,t){return t.name||st(15),Pt(e,t.name)}),5381).toString():"",p}var Ut=r.createContext(),Vt=(Ut.Consumer,r.createContext()),qt=(Vt.Consumer,new It),zt=jt();function Bt(){return(0,r.useContext)(Ut)||qt}function Wt(){return(0,r.useContext)(Vt)||zt}function Kt(e){var t=(0,r.useState)(e.stylisPlugins),n=t[0],i=t[1],a=Bt(),o=(0,r.useMemo)((function(){var t=a;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target]),u=(0,r.useMemo)((function(){return jt({options:{prefix:!e.disableVendorPrefixes},plugins:n})}),[e.disableVendorPrefixes,n]);return(0,r.useEffect)((function(){Be()(n,e.stylisPlugins)||i(e.stylisPlugins)}),[e.stylisPlugins]),r.createElement(Ut.Provider,{value:o},r.createElement(Vt.Provider,{value:u},e.children))}var Ht=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=zt);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.toString=function(){return st(12,String(n.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=zt),this.name+e.hash},e}(),Gt=/([A-Z])/,Qt=/([A-Z])/g,$t=/^ms-/,Yt=function(e){return"-"+e.toLowerCase()};function Jt(e){return Gt.test(e)?e.replace(Qt,Yt).replace($t,"-ms-"):e}var Xt=function(e){return null==e||!1===e||""===e};function Zt(e,t,n,r){if(Array.isArray(e)){for(var i,a=[],o=0,u=e.length;o<u;o+=1)""!==(i=Zt(e[o],t,n,r))&&(Array.isArray(i)?a.push.apply(a,i):a.push(i));return a}return Xt(e)?"":it(e)?"."+e.styledComponentId:nt(e)?"function"!=typeof(s=e)||s.prototype&&s.prototype.isReactComponent||!t?e:Zt(e(t),t,n,r):e instanceof Ht?n?(e.inject(n,r),e.getName(r)):e:Ze(e)?function e(t,n){var r,i,a=[];for(var o in t)t.hasOwnProperty(o)&&!Xt(t[o])&&(Array.isArray(t[o])&&t[o].isCss||nt(t[o])?a.push(Jt(o)+":",t[o],";"):Ze(t[o])?a.push.apply(a,e(t[o],o)):a.push(Jt(o)+": "+(r=o,(null==(i=t[o])||"boolean"==typeof i||""===i?"":"number"!=typeof i||0===i||r in Ke||r.startsWith("--")?String(i).trim():i+"px")+";")));return n?[n+" {"].concat(a,["}"]):a}(e):e.toString();var s}var en=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function tn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return nt(e)||Ze(e)?en(Zt(Xe(et,[e].concat(n)))):0===n.length&&1===e.length&&"string"==typeof e[0]?e:en(Zt(Xe(e,n)))}new Set;var nn=function(e,t,n){return void 0===n&&(n=tt),e.theme!==n.theme&&e.theme||t||n.theme},rn=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,an=/(^-|-$)/g;function on(e){return e.replace(rn,"-").replace(an,"")}var un=function(e){return Nt(Rt(e)>>>0)};function sn(e){return"string"==typeof e&&!0}var cn=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},ln=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function hn(e,t,n){var r=e[n];cn(t)&&cn(r)?fn(r,t):e[n]=t}function fn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];if(cn(o))for(var u in o)ln(u)&&hn(e,o[u],u)}return e}var dn=r.createContext();dn.Consumer;var pn={};function vn(e,t,n){var i=it(e),a=!sn(e),o=t.attrs,u=void 0===o?et:o,s=t.componentId,c=void 0===s?function(e,t){var n="string"!=typeof e?"sc":on(e);pn[n]=(pn[n]||0)+1;var r=n+"-"+un("5.3.10"+n+pn[n]);return t?t+"-"+r:r}(t.displayName,t.parentComponentId):s,l=t.displayName,h=void 0===l?function(e){return sn(e)?"styled."+e:"Styled("+rt(e)+")"}(e):l,f=t.displayName&&t.componentId?on(t.displayName)+"-"+t.componentId:t.componentId||c,d=i&&e.attrs?Array.prototype.concat(e.attrs,u).filter(Boolean):u,p=t.shouldForwardProp;i&&e.shouldForwardProp&&(p=t.shouldForwardProp?function(n,r,i){return e.shouldForwardProp(n,r,i)&&t.shouldForwardProp(n,r,i)}:e.shouldForwardProp);var v,m=new Lt(n,f,i?e.componentStyle:void 0),y=m.isStatic&&0===u.length,g=function(e,t){return function(e,t,n,i){var a=e.attrs,o=e.componentStyle,u=e.defaultProps,s=e.foldedComponentIds,c=e.shouldForwardProp,l=e.styledComponentId,h=e.target,f=function(e,t,n){void 0===e&&(e=tt);var r=Je({},t,{theme:e}),i={};return n.forEach((function(e){var t,n,a,o=e;for(t in nt(o)&&(o=o(r)),o)r[t]=i[t]="className"===t?(n=i[t],a=o[t],n&&a?n+" "+a:n||a):o[t]})),[r,i]}(nn(t,(0,r.useContext)(dn),u)||tt,t,a),d=f[0],p=f[1],v=function(e,t,n,r){var i=Bt(),a=Wt();return t?e.generateAndInjectStyles(tt,i,a):e.generateAndInjectStyles(n,i,a)}(o,i,d),m=n,y=p.$as||t.$as||p.as||t.as||h,g=sn(y),k=p!==t?Je({},t,{},p):t,b={};for(var w in k)"$"!==w[0]&&"as"!==w&&("forwardedAs"===w?b.as=k[w]:(c?c(w,Qe,y):!g||Qe(w))&&(b[w]=k[w]));return t.style&&p.style!==t.style&&(b.style=Je({},t.style,{},p.style)),b.className=Array.prototype.concat(s,l,v!==l?v:null,t.className,p.className).filter(Boolean).join(" "),b.ref=m,(0,r.createElement)(y,b)}(v,e,t,y)};return g.displayName=h,(v=r.forwardRef(g)).attrs=d,v.componentStyle=m,v.displayName=h,v.shouldForwardProp=p,v.foldedComponentIds=i?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):et,v.styledComponentId=f,v.target=i?e.target:e,v.withComponent=function(e){var r=t.componentId,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["componentId"]),a=r&&r+"-"+(sn(e)?e:on(rt(e)));return vn(e,Je({},i,{attrs:d,componentId:a}),n)},Object.defineProperty(v,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=i?fn({},e.defaultProps,t):t}}),Object.defineProperty(v,"toString",{value:function(){return"."+v.styledComponentId}}),a&&Ye()(v,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),v}var mn=function(e){return function e(t,n,r){if(void 0===r&&(r=tt),!(0,qe.isValidElementType)(n))return st(1,String(n));var i=function(){return t(n,r,tn.apply(void 0,arguments))};return i.withConfig=function(i){return e(t,n,Je({},r,{},i))},i.attrs=function(i){return e(t,n,Je({},r,{attrs:Array.prototype.concat(r.attrs,i).filter(Boolean)}))},i}(vn,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){mn[e]=mn(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=Ot(e),It.registerId(this.componentId+1)}var t=e.prototype;t.createStyles=function(e,t,n,r){var i=r(Zt(this.rules,t,n,r).join(""),""),a=this.componentId+e;n.insertRules(a,a,i)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,n,r){e>2&&It.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)}}();!function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=bt();return"<style "+[n&&'nonce="'+n+'"',at+'="true"','data-styled-version="5.3.10"'].filter(Boolean).join(" ")+">"+t+"</style>"},this.getStyleTags=function(){return e.sealed?st(2):e._emitSheetCSS()},this.getStyleElement=function(){var t;if(e.sealed)return st(2);var n=((t={})[at]="",t["data-styled-version"]="5.3.10",t.dangerouslySetInnerHTML={__html:e.instance.toString()},t),i=bt();return i&&(n.nonce=i),[r.createElement("style",Je({},n,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new It({isServer:!0}),this.sealed=!1}var t=e.prototype;t.collectStyles=function(e){return this.sealed?st(2):r.createElement(Kt,{sheet:this.instance},e)},t.interleaveWithNodeStream=function(e){return st(3)}}();var yn=mn,gn=n(164),kn=yn.div.withConfig({displayName:"baseStyles__BaseModalBackground"})(["display:flex;position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:30;background-color:rgba(0,0,0,0.5);align-items:center;justify-content:center;"]);function bn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){u=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return bn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _n(){}function xn(){}xn.resetWarningCache=_n;var Sn,En,Tn=(Sn=function(e){e.exports=function(){function e(e,t,n,r,i,a){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==a){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:xn,resetWarningCache:_n};return n.PropTypes=n,n}()},Sn(En={exports:{}}),En.exports),In=Tn,Cn=r.createContext({}),An=Cn.Provider,Nn=Cn.Consumer;function Pn(e){var t=e.backgroundComponent,n=e.children,i=(0,r.useRef)(null),a=wn((0,r.useState)(null),2),o=a[0],u=a[1],s=wn((0,r.useState)(kn),2),c=s[0],l=s[1];return(0,r.useEffect)((function(){t&&l(t)}),[l,t]),(0,r.useEffect)((function(){u(i.current)}),[u,i]),r.createElement(An,{value:{modalNode:o,BackgroundComponent:c}},n,r.createElement("div",{ref:i}))}function Rn(){return Rn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rn.apply(this,arguments)}Pn.propTypes={backgroundComponent:In.oneOfType([In.element,In.object])};var On=["WrapperComponent","children","onBackgroundClick","onEscapeKeydown","allowScroll","beforeOpen","afterOpen","beforeClose","afterClose","backgroundProps","isOpen"];function Dn(e){var t,n=e.WrapperComponent,i=e.children,a=e.onBackgroundClick,o=e.onEscapeKeydown,u=e.allowScroll,s=e.beforeOpen,c=e.afterOpen,l=e.beforeClose,h=e.afterClose,f=e.backgroundProps,d=e.isOpen,p=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,On),v=(0,r.useRef)(null),m=(0,r.useRef)(null),y=(0,r.useRef)(!1),g=wn((0,r.useState)(!1),2),k=g[0],b=g[1];function w(e){v.current===e.target&&a&&a(e)}return(0,r.useEffect)((function(){function e(e){b(e),function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e&&e.apply(void 0,n)}(e?c:h)}k===d||y.current||function(t){if(t){var n=t();"function"==typeof(null==n?void 0:n.then)?(y.current=!0,n.then((function(){e(d),y.current=!1}))):e(d)}else e(d)}(d?s:l)}),[y,k,d,s,l,h,c]),(0,r.useEffect)((function(){function e(e){"Escape"===e.key&&o&&o(e)}return k&&document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[k,o]),(0,r.useEffect)((function(){return k&&!u&&(m.current=document.body.style.overflow,document.body.style.overflow="hidden"),function(){u||(document.body.style.overflow=m.current||"")}}),[k,u]),t=n?r.createElement(n,p,i):i,r.createElement(Nn,null,(function(e){var n=e.modalNode,i=e.BackgroundComponent;return n&&i&&k?gn.createPortal(r.createElement(i,Rn({},f,{onClick:w,ref:v}),t),n):null}))}Dn.styled=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t?yn.div.withConfig({displayName:"Modal__wrap"}).apply(void 0,t):yn.div.withConfig({displayName:"Modal__wrap"})();return function(e){return r.createElement(Dn,Rn({WrapperComponent:i},e))}},Dn.defaultProps={backgroundProps:{}},Dn.propTypes={WrapperComponent:In.oneOfType([In.element,In.object]),onBackgroundClick:In.func,onEscapeKeydown:In.func,allowScroll:In.bool,beforeOpen:In.func,afterOpen:In.func,beforeClose:In.func,afterClose:In.func,backgroundProps:In.object,isOpen:In.bool};var Ln,Fn,Mn,jn=n(184),Un=Dn.styled(Ln||(Fn=["\n  width: 30rem;\n  height: 30rem;\n  display: flex;\n  align-items: center;\n  background-color: #ffffff;\n  flex-direction: column;\n"],Mn||(Mn=Fn.slice(0)),Ln=Object.freeze(Object.defineProperties(Fn,{raw:{value:Object.freeze(Mn)}}))));function Vn(e){var t=e.isOpen,n=e.toggleModal,r=e.children,i=e.submitButtonText,a=e.onSubmit,o=e.disableSubmit;return(0,jn.jsxs)(Un,{isOpen:t,onBackgroundClick:n,onEscapeKeydown:n,children:[r,(0,jn.jsxs)("div",{children:[(0,jn.jsx)("button",{disabled:o,onClick:function(){n(),a()},children:i}),(0,jn.jsx)("button",{onClick:n,children:"Close"})]})]})}function qn(e){var t=e.template,n=e.templateIndex,r=e.chooseTemplate,i=e.choosenTemplate,a=i&&t.id===i.id?"#c4c1e0":"inherit";return(0,jn.jsxs)("p",{style:{backgroundColor:a},className:"template-name",onClick:function(){r(n)},children:[n,". ",t.templateName]})}function zn(e){var t=e.templates,n=e.chooseTemplate,r=e.choosenTemplate;return(0,jn.jsxs)("div",{className:"list-container",children:[(0,jn.jsx)("h2",{style:{textAlign:"center"},children:"Templates"}),t.map((function(e,t){return(0,jn.jsx)(qn,{template:e,templateIndex:t+1,chooseTemplate:n,choosenTemplate:r},t)}))]})}function Bn(){Bn=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(A){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof f?t:f,o=Object.create(a.prototype),u=new T(i||[]);return r(o,"_invoke",{value:_(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}e.wrap=c;var h={};function f(){}function p(){}function v(){}var m={};s(m,a,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(I([])));g&&g!==t&&n.call(g,a)&&(m=g);var k=v.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(r,a,o,u){var s=l(e[r],e,a);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"==d(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function _(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return C()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=x(o,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function I(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=v,r(k,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:p,configurable:!0}),p.displayName=s(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},b(w.prototype),s(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(k),s(k,u,"Generator"),s(k,a,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function Wn(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(Fa){return void n(Fa)}u.done?t(s):Promise.resolve(s).then(r,i)}function Kn(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Wn(a,r,i,o,u,"next",e)}function u(e){Wn(a,r,i,o,u,"throw",e)}o(void 0)}))}}function Hn(e,t,n){return(t=p(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Gn=!1,Qn=!1,$n="${JSCORE_VERSION}",Yn=function(e,t){if(!e)throw Jn(t)},Jn=function(e){return new Error("Firebase Database ("+$n+") INTERNAL ASSERT FAILED: "+e)},Xn=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Zn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,h=(3&a)<<4|u>>4,f=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Xn(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new er;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var h=u<<6&192|s;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},er=function(e){g(n,e);var t=_(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return m(n)}(S(Error)),tr=function(e){var t=Xn(e);return Zn.encodeByteArray(t,!0)},nr=function(e){return tr(e).replace(/\./g,"")},rr=function(e){try{return Zn.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function ir(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=ir(e[n],t[n]));return e}var ar=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},or=function(){try{return ar()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&rr(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},ur=function(){var e;return null===(e=or())||void 0===e?void 0:e.config},sr=function(){function e(){var t=this;f(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return m(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function cr(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[nr(JSON.stringify({alg:"none",type:"JWT"})),nr(JSON.stringify(a)),""].join(".")}function lr(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function hr(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(lr())}function fr(){var e,t=null===(e=or())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function dr(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function pr(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function vr(){var e=lr();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function mr(){return!0===Gn||!0===Qn}function yr(){try{return"object"===typeof indexedDB}catch(e){return!1}}var gr=function(e){g(n,e);var t=_(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(w(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(w(a),kr.prototype.create),a}return m(n)}(S(Error)),kr=function(){function e(t,n,r){f(this,e),this.service=t,this.serviceName=n,this.errors=r}return m(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(br,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new gr(n,a,t)}}]),e}();var br=/\{\$([^}]+)}/g;function wr(e){return JSON.parse(e)}function _r(e){return JSON.stringify(e)}var xr=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=wr(rr(a[0])||""),n=wr(rr(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function Sr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Er(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Tr(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ir(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Cr(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Ar(u)&&Ar(s)){if(!Cr(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function Ar(e){return null!==e&&"object"===typeof e}function Nr(e){for(var t=[],n=function(){var e=c(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Pr(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=c(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Rr(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var Or=function(){function e(){f(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return m(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var u,s,c=this.chain_[0],l=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(u=f^l&(h^f),s=1518500249):(u=l^h^f,s=1859775393):p<60?(u=l&h|f&(l|h),s=2400959708):(u=l^h^f,s=3395469782);var v=(c<<5|c>>>27)+u+d+s+n[p]&4294967295;d=f,f=h,h=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function Dr(e,t){var n=new Lr(e,t);return n.subscribe.bind(n)}var Lr=function(){function e(t,n){var r=this;f(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return m(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=T(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Fr),void 0===r.error&&(r.error=Fr),void 0===r.complete&&(r.complete=Fr);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Fr(){}var Mr=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function jr(e,t){return"".concat(e," failed: ").concat(t," argument ")}function Ur(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(jr(e,t)+"must be a valid function.")}function Vr(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(jr(e,t)+"must be a valid context object.")}var qr=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function zr(e){return e&&e._delegate?e._delegate:e}var Br=function(){function e(t,n,r){f(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return m(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Wr="[DEFAULT]",Kr=function(){function e(t,n){f(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return m(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new sr;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Wr})}catch(s){}var t,n=T(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=c(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wr;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Kn(Bn().mark((function e(){var t;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(h(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),h(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wr;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wr;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=T(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=c(i.value,2),s=u[0],l=u[1];r===this.normalizeInstanceIdentifier(s)&&l.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(LT){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Wr?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(LT){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wr;return this.component?this.component.multipleInstances?e:Wr:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Hr,Gr,Qr=function(){function e(t){f(this,e),this.name=t,this.providers=new Map}return m(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Kr(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),$r=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Gr||(Gr={}));var Yr={debug:Gr.DEBUG,verbose:Gr.VERBOSE,info:Gr.INFO,warn:Gr.WARN,error:Gr.ERROR,silent:Gr.SILENT},Jr=Gr.INFO,Xr=(Hn(Hr={},Gr.DEBUG,"log"),Hn(Hr,Gr.VERBOSE,"log"),Hn(Hr,Gr.INFO,"info"),Hn(Hr,Gr.WARN,"warn"),Hn(Hr,Gr.ERROR,"error"),Hr),Zr=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Xr[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},ei=function(){function e(t){f(this,e),this.name=t,this._logLevel=Jr,this._logHandler=Zr,this._userLogHandler=null,$r.push(this)}return m(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Gr))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Yr[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Gr.DEBUG].concat(t)),this._logHandler.apply(this,[this,Gr.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Gr.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Gr.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Gr.INFO].concat(t)),this._logHandler.apply(this,[this,Gr.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Gr.WARN].concat(t)),this._logHandler.apply(this,[this,Gr.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Gr.ERROR].concat(t)),this._logHandler.apply(this,[this,Gr.ERROR].concat(t))}}]),e}();function ti(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ni(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ti(Object(n),!0).forEach((function(t){Hn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ti(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ri,ii,ai=function(e,t){return t.some((function(t){return e instanceof t}))};var oi=new WeakMap,ui=new WeakMap,si=new WeakMap,ci=new WeakMap,li=new WeakMap;var hi={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ui.get(e);if("objectStoreNames"===t)return e.objectStoreNames||si.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return pi(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function fi(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ii||(ii=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(vi(this),n),pi(oi.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return pi(e.apply(vi(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[vi(this),t].concat(r));return si.set(a,t.sort?t.sort():[t]),pi(a)}}function di(e){return"function"===typeof e?fi(e):(e instanceof IDBTransaction&&function(e){if(!ui.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));ui.set(e,t)}}(e),ai(e,ri||(ri=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,hi):e)}function pi(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(pi(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&oi.set(t,e)})).catch((function(){})),li.set(t,e),t}(e);if(ci.has(e))return ci.get(e);var t=di(e);return t!==e&&(ci.set(e,t),li.set(t,e)),t}var vi=function(e){return li.get(e)};var mi,yi,gi=["get","getKey","getAll","getAllKeys","count"],ki=["put","add","delete","clear"],bi=new Map;function wi(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(bi.get(t))return bi.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=ki.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||gi.includes(n))){var a=function(){var e=Kn(Bn().mark((function e(t){var a,o,u,s,c,l,h=arguments;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=h.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=h[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return bi.set(t,a),a}}}hi=function(e){return ni(ni({},e),{},{get:function(t,n,r){return wi(t,n)||e.get(t,n,r)},has:function(t,n){return!!wi(t,n)||e.has(t,n)}})}(hi);var _i=function(){function e(t){f(this,e),this.container=t}return m(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var xi="@firebase/app",Si="0.9.10",Ei=new ei("@firebase/app"),Ti="[DEFAULT]",Ii=(Hn(mi={},xi,"fire-core"),Hn(mi,"@firebase/app-compat","fire-core-compat"),Hn(mi,"@firebase/analytics","fire-analytics"),Hn(mi,"@firebase/analytics-compat","fire-analytics-compat"),Hn(mi,"@firebase/app-check","fire-app-check"),Hn(mi,"@firebase/app-check-compat","fire-app-check-compat"),Hn(mi,"@firebase/auth","fire-auth"),Hn(mi,"@firebase/auth-compat","fire-auth-compat"),Hn(mi,"@firebase/database","fire-rtdb"),Hn(mi,"@firebase/database-compat","fire-rtdb-compat"),Hn(mi,"@firebase/functions","fire-fn"),Hn(mi,"@firebase/functions-compat","fire-fn-compat"),Hn(mi,"@firebase/installations","fire-iid"),Hn(mi,"@firebase/installations-compat","fire-iid-compat"),Hn(mi,"@firebase/messaging","fire-fcm"),Hn(mi,"@firebase/messaging-compat","fire-fcm-compat"),Hn(mi,"@firebase/performance","fire-perf"),Hn(mi,"@firebase/performance-compat","fire-perf-compat"),Hn(mi,"@firebase/remote-config","fire-rc"),Hn(mi,"@firebase/remote-config-compat","fire-rc-compat"),Hn(mi,"@firebase/storage","fire-gcs"),Hn(mi,"@firebase/storage-compat","fire-gcs-compat"),Hn(mi,"@firebase/firestore","fire-fst"),Hn(mi,"@firebase/firestore-compat","fire-fst-compat"),Hn(mi,"fire-js","fire-js"),Hn(mi,"firebase","fire-js-all"),mi),Ci=new Map,Ai=new Map;function Ni(e,t){try{e.container.addComponent(t)}catch(n){Ei.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Pi(e,t){e.container.addOrOverwriteComponent(t)}function Ri(e){var t=e.name;if(Ai.has(t))return Ei.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ai.set(t,e);var n,r=T(Ci.values());try{for(r.s();!(n=r.n()).done;){Ni(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Oi(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Di(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ti;Oi(e,t).clearInstance(n)}function Li(){Ai.clear()}var Fi=(Hn(yi={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),Hn(yi,"bad-app-name","Illegal App name: '{$appName}"),Hn(yi,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Hn(yi,"app-deleted","Firebase App named '{$appName}' already deleted"),Hn(yi,"no-options","Need to provide options, when not being deployed to hosting via source."),Hn(yi,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Hn(yi,"invalid-log-argument","First argument to `onLog` must be null or a function."),Hn(yi,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),Hn(yi,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),Hn(yi,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),Hn(yi,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),yi),Mi=new kr("app","Firebase",Fi),ji=function(){function e(t,n,r){var i=this;f(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Br("app",(function(){return i}),"PUBLIC"))}return m(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Mi.create("app-deleted",{appName:this._name})}}]),e}(),Ui="9.22.0";function Vi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:Ti,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Mi.create("bad-app-name",{appName:String(i)});if(n||(n=ur()),!n)throw Mi.create("no-options");var a=Ci.get(i);if(a){if(Cr(n,a.options)&&Cr(r,a.config))return a;throw Mi.create("duplicate-app",{appName:i})}var o,u=new Qr(i),s=T(Ai.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(h){s.e(h)}finally{s.f()}var l=new ji(n,r,u);return Ci.set(i,l),l}function qi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ti,t=Ci.get(e);if(!t&&e===Ti&&ur())return Vi();if(!t)throw Mi.create("no-app",{appName:e});return t}function zi(){return Array.from(Ci.values())}function Bi(e){return Wi.apply(this,arguments)}function Wi(){return(Wi=Kn(Bn().mark((function e(t){var n;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Ci.has(n)){e.next=6;break}return Ci.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ki(e,t,n){var r,i=null!==(r=Ii[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ei.warn(u.join(" "))}Ri(new Br("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Hi(e,t){if(null!==e&&"function"!==typeof e)throw Mi.create("invalid-log-argument");!function(e,t){var n,r=T($r);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Yr[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Gr[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Gi(e){var t;t=e,$r.forEach((function(e){e.setLogLevel(t)}))}var Qi="firebase-heartbeat-database",$i=1,Yi="firebase-heartbeat-store",Ji=null;function Xi(){return Ji||(Ji=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=pi(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(pi(u.result),e.oldVersion,e.newVersion,pi(u.transaction),e)})),r&&u.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),s}(Qi,$i,{upgrade:function(e,t){if(0===t)e.createObjectStore(Yi)}}).catch((function(e){throw Mi.create("idb-open",{originalErrorMessage:e.message})}))),Ji}function Zi(e){return ea.apply(this,arguments)}function ea(){return ea=Kn(Bn().mark((function e(t){var n,r,i;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Xi();case 3:return n=e.sent,e.next=6,n.transaction(Yi).objectStore(Yi).get(ra(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof gr?Ei.warn(e.t0.message):(i=Mi.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Ei.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),ea.apply(this,arguments)}function ta(e,t){return na.apply(this,arguments)}function na(){return na=Kn(Bn().mark((function e(t,n){var r,i,a,o;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Xi();case 3:return r=e.sent,i=r.transaction(Yi,"readwrite"),a=i.objectStore(Yi),e.next=8,a.put(n,ra(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof gr?Ei.warn(e.t0.message):(o=Mi.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Ei.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),na.apply(this,arguments)}function ra(e){return"".concat(e.name,"!").concat(e.options.appId)}var ia=function(){function e(t){var n=this;f(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new ca(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return m(e,[{key:"triggerHeartbeat",value:function(){var e=Kn(Bn().mark((function e(){var t,n,r;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=aa(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Kn(Bn().mark((function e(){var t,n,r,i,a;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=aa(),n=oa(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=nr(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function aa(){return(new Date).toISOString().substring(0,10)}function oa(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=T(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),la(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),la(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var ua,sa,ca=function(){function e(t){f(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return m(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Kn(Bn().mark((function e(){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(yr()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(Fa){t(Fa)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Kn(Bn().mark((function e(){var t;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Zi(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Kn(Bn().mark((function e(t){var n,r;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",ta(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Kn(Bn().mark((function e(t){var n,r;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",ta(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(h(r.heartbeats),h(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function la(e){return nr(JSON.stringify({version:2,heartbeats:e})).length}ua="",Ri(new Br("platform-logger",(function(e){return new _i(e)}),"PRIVATE")),Ri(new Br("heartbeat",(function(e){return new ia(e)}),"PRIVATE")),Ki(xi,Si,ua),Ki(xi,Si,"esm2017"),Ki("fire-js","");var ha=function(){function e(t,n){var r=this;f(this,e),this._delegate=t,this.firebase=n,Ni(t,new Br("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return m(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Bi(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ti;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ti;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Ni(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Pi(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),fa=(Hn(sa={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Hn(sa,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),sa),da=new kr("app-compat","Firebase",fa);var pa=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Vi(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Sr(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Ki,setLogLevel:Gi,onLog:Hi,apps:null,SDK_VERSION:Ui,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Ri(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw da.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&ir(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Sr(n,e=e||Ti))throw da.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(ha);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){ir(n,e)},createSubscribe:Dr,ErrorFactory:kr,deepExtend:ir}),n}(),va=new ei("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){va.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var ma=self.firebase.SDK_VERSION;ma&&ma.indexOf("LITE")>=0&&va.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var ya=pa;!function(e){Ki("@firebase/app-compat","0.2.10",e)}();ya.registerVersion("firebase","9.22.0","app-compat");var ga="@firebase/database",ka="0.14.4",ba="";function wa(e){ba=e}var _a=function(){function e(t){f(this,e),this.domStorage_=t,this.prefix_="firebase:"}return m(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),_r(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:wr(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),xa=function(){function e(){f(this,e),this.cache_={},this.isInMemoryStorage=!0}return m(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return Sr(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),Sa=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new _a(t)}}catch(n){}return new xa},Ea=Sa("localStorage"),Ta=Sa("sessionStorage"),Ia=new ei("@firebase/database"),Ca=function(){var e=1;return function(){return e++}}(),Aa=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,Yn(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new Or;n.update(t);var r=n.digest();return Zn.encodeByteArray(r)},Na=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?_r(r):r,t+=" "}return t},Pa=null,Ra=!0,Oa=function(e,t){Yn(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(Ia.logLevel=Gr.VERBOSE,Pa=Ia.log.bind(Ia),t&&Ta.set("logging_enabled",!0)):"function"===typeof e?Pa=e:(Pa=null,Ta.remove("logging_enabled"))},Da=function(){if(!0===Ra&&(Ra=!1,null===Pa&&!0===Ta.get("logging_enabled")&&Oa(!0)),Pa){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Na.apply(null,t);Pa(r)}},La=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Da.apply(void 0,[e].concat(n))}},Fa=function(){var e="FIREBASE INTERNAL ERROR: "+Na.apply(void 0,arguments);Ia.error(e)},Ma=function(){var e="FIREBASE FATAL ERROR: ".concat(Na.apply(void 0,arguments));throw Ia.error(e),new Error(e)},ja=function(){var e="FIREBASE WARNING: "+Na.apply(void 0,arguments);Ia.warn(e)},Ua=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Va="[MIN_NAME]",qa="[MAX_NAME]",za=function(e,t){if(e===t)return 0;if(e===Va||t===qa)return-1;if(t===Va||e===qa)return 1;var n=Ya(e),r=Ya(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},Ba=function(e,t){return e===t?0:e<t?-1:1},Wa=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+_r(t))},Ka=function e(t){if("object"!==typeof t||null===t)return _r(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=_r(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},Ha=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Ga(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var Qa=function(e){Yn(!Ua(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var u=[];for(a=52;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(t?1:0),u.reverse();var s=u.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(s.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var $a=new RegExp("^-?(0*)\\d{1,10}$"),Ya=function(e){if($a.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Ja=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw ja("Exception was thrown by user callback.",e),t}),Math.floor(0))}},Xa=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},Za=function(){function e(t,n){var r=this;f(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return m(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){ja('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),eo=function(){function e(t,n,r){var i=this;f(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return m(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(Da("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ja(e)}}]),e}(),to=function(){function e(t){f(this,e),this.accessToken=t}return m(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();to.OWNER="owner";var no="5",ro=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,io="ac",ao="websocket",oo="long_polling",uo=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];f(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=u,this.isUsingEmulator=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ea.get("host:"+t)||this._host}return m(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ea.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function so(e,t,n){var r;if(Yn("string"===typeof t,"typeof type must == string"),Yn("object"===typeof n,"typeof params must == object"),t===ao)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==oo)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return Ga(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var co=function(){function e(){f(this,e),this.counters_={}}return m(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Sr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return ir(void 0,this.counters_)}}]),e}(),lo={},ho={};function fo(e){var t=e.toString();return lo[t]||(lo[t]=new co),lo[t]}var po=function(){function e(t){f(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return m(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&Ja((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),vo="start",mo=function(){function e(t,n,r,i,a,o,u){var s=this;f(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=La(t),this.stats_=fo(n),this.urlFn=function(e){return s.appCheckToken&&(e[io]=s.appCheckToken),so(n,oo,e)}}return m(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new po(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(mr()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new yo((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===vo)n.id=a,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={};e[vo]="t",e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=no,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e[io]=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&ro.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=_r(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=tr(t),r=Ha(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!mr()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=_r(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!mr()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),yo=function(){function e(t,n,r,i){if(f(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,mr())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=Ca(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(u){Da("frame writing exception"),u.stack&&Da(u.stack),Da(u)}}}return m(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;mr()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){Da("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Da("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),go=null;"undefined"!==typeof MozWebSocket?go=MozWebSocket:"undefined"!==typeof WebSocket&&(go=WebSocket);var ko=function(){function e(t,n,r,i,a,o,u){f(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=La(this.connId),this.stats_=fo(n),this.connURL=e.connectionURL_(n,o,u,i,r),this.nodeAdmin=n.nodeAdmin}return m(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ea.set("previous_websocket_failure",!0);try{var r;if(mr()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(no,"/").concat(ba,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new go(this.connURL,[],r)}catch(s){this.log_("Error instantiating WebSocket.");var u=s.message||s.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){Ea.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=wr(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(Yn(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=_r(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=Ha(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=no,!mr()&&"undefined"!==typeof location&&location.hostname&&ro.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a[io]=r),i&&(a.p=i),so(e,ao,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==go&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return Ea.isInMemoryStorage||!0===Ea.get("previous_websocket_failure")}}]),e}();ko.responsesRequiredToBeHealthy=2,ko.healthyTimeout=3e4;var bo=function(){function e(t){f(this,e),this.initTransports_(t)}return m(e,[{key:"initTransports_",value:function(t){var n=ko&&ko.isAvailable(),r=n&&!ko.previouslyFailed();if(t.webSocketOnly&&(n||ja("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ko];else{var i,a=this.transports_=[],o=T(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var u=i.value;u&&u.isAvailable()&&a.push(u)}}catch(s){o.e(s)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[mo,ko]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();bo.globalTransportInitialized_=!1;var wo=function(){function e(t,n,r,i,a,o,u,s,c,l){f(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=u,this.onDisconnect_=s,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=La("c:"+this.id+":"),this.transportManager_=new bo(n),this.log_("Connection created"),this.start_()}return m(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Xa((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=Wa("t",e),n=Wa("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=Wa("t",e),n=Wa("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=Wa("t",e);if("d"in e){var n=e.d;if("h"===t){var r=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Fa("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Fa("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),no!==n&&ja("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Xa((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Xa((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ea.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),_o=function(){function e(){f(this,e)}return m(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),xo=function(){function e(t){f(this,e),this.allowedEvents_=t,this.listeners_={},Yn(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return m(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=h(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){Yn(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),So=function(e){g(n,e);var t=_(n);function n(){var e;return f(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||hr()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return m(n,[{key:"getInitialEvent",value:function(e){return Yn("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(xo),Eo=32,To=768,Io=function(){function e(t,n){if(f(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return m(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function Co(){return new Io("")}function Ao(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function No(e){return e.pieces_.length-e.pieceNum_}function Po(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new Io(e.pieces_,t)}function Ro(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Oo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Do(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Io(t,0)}function Lo(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Io)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new Io(n,0)}function Fo(e){return e.pieceNum_>=e.pieces_.length}function Mo(e,t){var n=Ao(e),r=Ao(t);if(null===n)return t;if(n===r)return Mo(Po(e),Po(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function jo(e,t){for(var n=Oo(e,0),r=Oo(t,0),i=0;i<n.length&&i<r.length;i++){var a=za(n[i],r[i]);if(0!==a)return a}return n.length===r.length?0:n.length<r.length?-1:1}function Uo(e,t){if(No(e)!==No(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Vo(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(No(e)>No(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var qo=m((function e(t,n){f(this,e),this.errorPrefix_=n,this.parts_=Oo(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=qr(this.parts_[r]);zo(this)}));function zo(e){if(e.byteLength_>To)throw new Error(e.errorPrefix_+"has a key path longer than "+To+" bytes ("+e.byteLength_+").");if(e.parts_.length>Eo)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Eo+") or object contains a cycle "+Bo(e))}function Bo(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var Wo=function(e){g(n,e);var t=_(n);function n(){var e,r,i;return f(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return m(n,[{key:"getInitialEvent",value:function(e){return Yn("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(xo),Ko=1e3,Ho=function(e){g(n,e);var t=_(n);function n(e,r,i,a,o,u,s,c){var l;if(f(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=u,l.appCheckTokenProvider_=s,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=La("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=Ko,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!mr())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Wo.getInstance().on("visible",l.onVisible_,w(l)),-1===e.host.indexOf("fblocal")&&So.getInstance().on("online",l.onOnline_,w(l)),l}return m(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(_r(i)),Yn(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new sr,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),Yn(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Yn(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var u=o.d,s=o.s;n.warnOnListenWarnings_(u,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==s&&t.removeListen_(i,a),e.onComplete&&e.onComplete(s,u))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=xr(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=xr(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Yn(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+_r(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Fa("Unrecognized action received from server: "+_r(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;Yn(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ko,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ko,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ko),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=Kn(Bn().mark((function e(){var t,r,i,a,o,u,s,l,h,f,d,p,v,m,y=this;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,u=!1,s=null,l=function(){s?s.close():(u=!0,i())},h=function(e){Yn(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)},this.realtime_={close:l,sendRequest:h},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);case 19:d=e.sent,p=c(d,2),v=p[0],m=p[1],u?Da("getToken() completed but was canceled"):(Da("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=m&&m.token,s=new wo(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){ja(e+" ("+y.repoInfo_.toString()+")"),y.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),u||(this.repoInfo_.nodeAdmin&&ja(e.t0),l());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){Da("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){Da("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Tr(this.interruptReasons_)&&(this.reconnectDelay_=Ko,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return Ka(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new Io(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){Da("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){Da("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=T(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=T(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){t.e(s)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}},{key:"sendConnectStats_",value:function(){var e={},t="js";mr()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+ba.replace(/\./g,"-")]=1,hr()?e["framework.cordova"]=1:pr()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=So.getInstance().currentlyOnline();return Tr(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&Sr(e,"w")){var n=Er(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();ja("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(_o);Ho.nextPersistentConnectionId_=0,Ho.nextConnectionId_=0;var Go,Qo=function(){function e(t,n){f(this,e),this.name=t,this.node=n}return m(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),$o=function(){function e(){f(this,e)}return m(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new Qo(Va,e),r=new Qo(Va,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return Qo.MIN}}]),e}(),Yo=function(e){g(n,e);var t=_(n);function n(){return f(this,n),t.apply(this,arguments)}return m(n,[{key:"compare",value:function(e,t){return za(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw Jn("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return Qo.MIN}},{key:"maxPost",value:function(){return new Qo(qa,Go)}},{key:"makePost",value:function(e,t){return Yn("string"===typeof e,"KeyIndex indexValue must always be a string."),new Qo(e,Go)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return Go},set:function(e){Go=e}}]),n}($o),Jo=new Yo,Xo=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;f(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return m(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),Zo=function(){function e(t,n,r,i,a){f(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:nu.EMPTY_NODE,this.right=null!=a?a:nu.EMPTY_NODE}return m(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return nu.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return nu.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();Zo.RED=!0,Zo.BLACK=!1;var eu,tu=function(){function e(){f(this,e)}return m(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Zo(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),nu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;f(this,e),this.comparator_=t,this.root_=n}return m(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Zo.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Zo.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new Xo(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new Xo(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new Xo(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new Xo(this.root_,null,this.comparator_,!0,e)}}]),e}();function ru(e,t){return za(e.name,t.name)}function iu(e,t){return za(e,t)}nu.EMPTY_NODE=new tu;var au,ou,uu,su=function(e){return"number"===typeof e?"number:"+Qa(e):"string:"+e},cu=function(e){if(e.isLeafNode()){var t=e.val();Yn("string"===typeof t||"number"===typeof t||"object"===typeof t&&Sr(t,".sv"),"Priority must be a string or number.")}else Yn(e===eu||e.isEmpty(),"priority of unexpected type.");Yn(e===eu||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},lu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;f(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,Yn(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),cu(this.priorityNode_)}return m(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return Fo(t)?this:".priority"===Ao(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=Ao(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Yn(".priority"!==r||1===No(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Po(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+su(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?Qa(this.value_):this.value_,this.lazyHash_=Aa(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(Yn(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return Yn(i>=0,"Unknown leaf type: "+n),Yn(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return au},set:function(e){au=e}}]),e}();lu.VALUE_TYPE_ORDER=["object","boolean","number","string"];var hu,fu,du=function(e){g(n,e);var t=_(n);function n(){return f(this,n),t.apply(this,arguments)}return m(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?za(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return Qo.MIN}},{key:"maxPost",value:function(){return new Qo(qa,new lu("[PRIORITY-POST]",uu))}},{key:"makePost",value:function(e,t){var n=ou(e);return new Qo(t,new lu("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}($o),pu=new du,vu=Math.log(2),mu=function(){function e(t){f(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/vu,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return m(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),yu=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,u=i-r;if(0===u)return null;if(1===u)return a=e[r],o=n?n(a):a,new Zo(o,a.node,Zo.BLACK,null,null);var s=parseInt(u/2,10)+r,c=t(r,s),l=t(s+1,i);return a=e[s],o=n?n(a):a,new Zo(o,a.node,Zo.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,u=function(t,r){var a=o-t,u=o;o-=t;var c=i(a+1,u),l=e[a],h=n?n(l):l;s(new Zo(h,l.node,r,null,c))},s=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?u(h,Zo.BLACK):(u(h,Zo.BLACK),u(h,Zo.RED))}return a}(new mu(e.length));return new nu(r||t,a)},gu={},ku=function(){function e(t,n){f(this,e),this.indexes_=t,this.indexSet_=n}return m(e,[{key:"get",value:function(e){var t=Er(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof nu?t:null}},{key:"hasIndex",value:function(e){return Sr(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){Yn(t!==Jo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(Qo.Wrap),u=o.getNext();u;)a=a||t.isDefinedOn(u.node),i.push(u),u=o.getNext();r=a?yu(i,t.getCompare()):gu;var s=t.toString(),c=Object.assign({},this.indexSet_);c[s]=t;var l=Object.assign({},this.indexes_);return l[s]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(Ir(this.indexes_,(function(e,i){var a=Er(r.indexSet_,i);if(Yn(a,"Missing index implementation for "+i),e===gu){if(a.isDefinedOn(t.node)){for(var o=[],u=n.getIterator(Qo.Wrap),s=u.getNext();s;)s.name!==t.name&&o.push(s),s=u.getNext();return o.push(t),yu(o,a.getCompare())}return gu}var c=n.get(t.name),l=e;return c&&(l=l.remove(new Qo(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(Ir(this.indexes_,(function(e){if(e===gu)return e;var r=n.get(t.name);return r?e.remove(new Qo(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return Yn(gu&&pu,"ChildrenNode.ts has not been loaded"),hu=hu||new e({".priority":gu},{".priority":pu})}}]),e}(),bu=function(){function e(t,n,r){f(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&cu(this.priorityNode_),this.children_.isEmpty()&&Yn(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return m(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||fu}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?fu:t}},{key:"getChild",value:function(e){var t=Ao(e);return null===t?this:this.getImmediateChild(t).getChild(Po(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(Yn(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new Qo(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?fu:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=Ao(e);if(null===n)return t;Yn(".priority"!==Ao(e)||1===No(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(Po(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(pu,(function(o,u){n[o]=u.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var u in n)o[u]=n[u];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+su(this.getPriority().val())+":"),this.forEachChild(pu,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":Aa(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Qo(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new Qo(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new Qo(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,Qo.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,Qo.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===wu?-1:0}},{key:"withIndex",value:function(t){if(t===Jo||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===Jo||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(pu),r=t.getIterator(pu),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===Jo?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return fu||(fu=new e(new nu(iu),null,ku.Default))}}]),e}();bu.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var wu=new(function(e){g(n,e);var t=_(n);function n(){return f(this,n),t.call(this,new nu(iu),bu.EMPTY_NODE,ku.Default)}return m(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return bu.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(bu));Object.defineProperties(Qo,{MIN:{value:new Qo(Va,bu.EMPTY_NODE)},MAX:{value:new Qo(qa,wu)}}),Yo.__EMPTY_NODE=bu.EMPTY_NODE,lu.__childrenNodeConstructor=bu,eu=wu,function(e){uu=e}(wu);var _u=!0;function xu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return bu.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Yn(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e)return new lu(e,xu(t));if(e instanceof Array||!_u){var n=bu.EMPTY_NODE;return Ga(e,(function(t,r){if(Sr(e,t)&&"."!==t.substring(0,1)){var i=xu(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}})),n.updatePriority(xu(t))}var r=[],i=!1;if(Ga(e,(function(e,t){if("."!==e.substring(0,1)){var n=xu(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Qo(e,n)))}})),0===r.length)return bu.EMPTY_NODE;var a=yu(r,ru,(function(e){return e.name}),iu);if(i){var o=yu(r,pu.getCompare());return new bu(a,xu(t),new ku({".priority":o},{".priority":pu}))}return new bu(a,xu(t),ku.Default)}!function(e){ou=e}(xu);var Su=function(e){g(n,e);var t=_(n);function n(e){var r;return f(this,n),(r=t.call(this)).indexPath_=e,Yn(!Fo(e)&&".priority"!==Ao(e),"Can't create PathIndex with empty path or .priority key"),r}return m(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?za(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=xu(e),r=bu.EMPTY_NODE.updateChild(this.indexPath_,n);return new Qo(t,r)}},{key:"maxPost",value:function(){var e=bu.EMPTY_NODE.updateChild(this.indexPath_,wu);return new Qo(qa,e)}},{key:"toString",value:function(){return Oo(this.indexPath_,0).join("/")}}]),n}($o),Eu=function(e){g(n,e);var t=_(n);function n(){return f(this,n),t.apply(this,arguments)}return m(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?za(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return Qo.MIN}},{key:"maxPost",value:function(){return Qo.MAX}},{key:"makePost",value:function(e,t){var n=xu(e);return new Qo(t,n)}},{key:"toString",value:function(){return".value"}}]),n}($o),Tu=new Eu;function Iu(e){return{type:"value",snapshotNode:e}}function Cu(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Au(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Nu(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var Pu=function(){function e(t){f(this,e),this.index_=t}return m(e,[{key:"updateChild",value:function(e,t,n,r,i,a){Yn(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(Au(t,o)):Yn(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(Cu(t,n)):a.trackChildChange(Nu(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(pu,(function(e,r){t.hasChild(e)||n.trackChildChange(Au(e,r))})),t.isLeafNode()||t.forEachChild(pu,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Nu(t,r,i))}else n.trackChildChange(Cu(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?bu.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),Ru=function(){function e(t){f(this,e),this.indexedFilter_=new Pu(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return m(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){var t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new Qo(t,n))||(n=bu.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=bu.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(bu.EMPTY_NODE);var i=this;return t.forEachChild(pu,(function(e,t){i.matches(new Qo(e,t))||(r=r.updateImmediateChild(e,bu.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),Ou=function(){function e(t){var n=this;f(this,e),this.withinDirectionalStart=function(e){return n.reverse_?n.withinEndPost(e):n.withinStartPost(e)},this.withinDirectionalEnd=function(e){return n.reverse_?n.withinStartPost(e):n.withinEndPost(e)},this.withinStartPost=function(e){var t=n.index_.compare(n.rangedFilter_.getStartPost(),e);return n.startIsInclusive_?t<=0:t<0},this.withinEndPost=function(e){var t=n.index_.compare(e,n.rangedFilter_.getEndPost());return n.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new Ru(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return m(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new Qo(t,n))||(n=bu.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=bu.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=bu.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(this.withinDirectionalStart(o)){if(!this.withinDirectionalEnd(o))break;r=r.updateImmediateChild(o.name,o.node),a++}}}else{var u;r=(r=t.withIndex(this.index_)).updatePriority(bu.EMPTY_NODE),u=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);for(var s=0;u.hasNext();){var c=u.getNext();s<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?s++:r=r.updateImmediateChild(c.name,bu.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var u=e;Yn(u.numChildren()===this.limit_,"");var s=new Qo(t,n),c=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),l=this.rangedFilter_.matches(s);if(u.hasChild(t)){for(var h=u.getImmediateChild(t),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===t||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:a(f,s);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(Nu(t,n,h)),u.updateImmediateChild(t,n);null!=i&&i.trackChildChange(Au(t,h));var p=u.updateImmediateChild(t,bu.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(Cu(f.name,f.node)),p.updateImmediateChild(f.name,f.node)):p}return n.isEmpty()?e:l&&a(c,s)>=0?(null!=i&&(i.trackChildChange(Au(c.name,c.node)),i.trackChildChange(Cu(t,n))),u.updateImmediateChild(t,n).updateImmediateChild(c.name,bu.EMPTY_NODE)):e}}]),e}(),Du=function(){function e(){f(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=pu}return m(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return Yn(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return Yn(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Va}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return Yn(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return Yn(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:qa}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return Yn(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===pu}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function Lu(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Fu(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Mu(e,t){var n=e.copy();return n.index_=t,n}function ju(e){var t,n={};if(e.isDefault())return n;if(e.index_===pu?t="$priority":e.index_===Tu?t="$value":e.index_===Jo?t="$key":(Yn(e.index_ instanceof Su,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=_r(t),e.startSet_){var r=e.startAfterSet_?"startAfter":"startAt";n[r]=_r(e.indexStartValue_),e.startNameSet_&&(n[r]+=","+_r(e.indexStartName_))}if(e.endSet_){var i=e.endBeforeSet_?"endBefore":"endAt";n[i]=_r(e.indexEndValue_),e.endNameSet_&&(n[i]+=","+_r(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function Uu(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==pu&&(t.i=e.index_.toString()),t}var Vu=function(e){g(n,e);var t=_(n);function n(e,r,i,a){var o;return f(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=La("p:rest:"),o.listens_={},o}return m(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var u=n.getListenId_(e,r),s={};this.listens_[u]=s;var c=ju(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),Er(a.listens_,u)===s)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=ju(e._queryParams),r=e._path.toString(),i=new sr;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=c(i,2),o=a[0],u=a[1];o&&o.accessToken&&(n.auth=o.accessToken),u&&u.token&&(n.ac=u.token);var s=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+Nr(n);t.log_("Sending REST request for "+s);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(r&&4===l.readyState){t.log_("REST Response for "+s+" received. status:",l.status,"response:",l.responseText);var e=null;if(l.status>=200&&l.status<300){try{e=wr(l.responseText)}catch(n){ja("Failed to parse JSON response for "+s+": "+l.responseText)}r(null,e)}else 401!==l.status&&404!==l.status&&ja("Got unsuccessful REST response for "+s+" Status: "+l.status),r(l.status);r=null}},l.open("GET",s,!0),l.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(Yn(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(_o),qu=function(){function e(){f(this,e),this.rootNode_=bu.EMPTY_NODE}return m(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function zu(){return{value:null,children:new Map}}function Bu(e,t,n){if(Fo(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=Ao(t);e.children.has(r)||e.children.set(r,zu()),Bu(e.children.get(r),t=Po(t),n)}}function Wu(e,t){if(Fo(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(pu,(function(t,n){Bu(e,new Io(t),n)})),Wu(e,t)}if(e.children.size>0){var r=Ao(t);if(t=Po(t),e.children.has(r))Wu(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function Ku(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){Ku(r,new Io(t.toString()+"/"+e),n)}))}var Hu,Gu=function(){function e(t){f(this,e),this.collection_=t,this.last_=null}return m(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ga(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),Qu=function(){function e(t,n){f(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new Gu(t);var r=1e4+2e4*Math.random();Xa(this.reportStats_.bind(this),Math.floor(r))}return m(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;Ga(t,(function(t,i){i>0&&Sr(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),Xa(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function $u(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Hu||(Hu={}));var Yu,Ju=function(){function e(t,n,r){f(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=Hu.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return m(e,[{key:"operationForChild",value:function(t){if(Fo(this.path)){if(null!=this.affectedTree.value)return Yn(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Io(t));return new e(Co(),n,this.revert)}return Yn(Ao(this.path)===t,"operationForChild called for unrelated child."),new e(Po(this.path),this.affectedTree,this.revert)}}]),e}(),Xu=function(){function e(t,n){f(this,e),this.source=t,this.path=n,this.type=Hu.LISTEN_COMPLETE}return m(e,[{key:"operationForChild",value:function(t){return Fo(this.path)?new e(this.source,Co()):new e(this.source,Po(this.path))}}]),e}(),Zu=function(){function e(t,n,r){f(this,e),this.source=t,this.path=n,this.snap=r,this.type=Hu.OVERWRITE}return m(e,[{key:"operationForChild",value:function(t){return Fo(this.path)?new e(this.source,Co(),this.snap.getImmediateChild(t)):new e(this.source,Po(this.path),this.snap)}}]),e}(),es=function(){function e(t,n,r){f(this,e),this.source=t,this.path=n,this.children=r,this.type=Hu.MERGE}return m(e,[{key:"operationForChild",value:function(t){if(Fo(this.path)){var n=this.children.subtree(new Io(t));return n.isEmpty()?null:n.value?new Zu(this.source,Co(),n.value):new e(this.source,Co(),n)}return Yn(Ao(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,Po(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),ts=function(){function e(t,n,r){f(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return m(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(Fo(e))return this.isFullyInitialized()&&!this.filtered_;var t=Ao(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),ns=m((function e(t){f(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function rs(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw Jn("Should only compare child_ events.");var r=new Qo(t.childName,t.snapshotNode),i=new Qo(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function is(e,t){return{eventCache:e,serverCache:t}}function as(e,t,n,r){return is(new ts(t,n,r),e.serverCache)}function os(e,t,n,r){return is(e.eventCache,new ts(t,n,r))}function us(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function ss(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var cs=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(Yu||(Yu=new nu(Ba)),Yu);f(this,e),this.value=t,this.children=n}return m(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:Co(),value:this.value};if(Fo(e))return null;var n=Ao(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(Po(e),t);return null!=i?{path:Lo(new Io(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(Fo(t))return this;var n=Ao(t),r=this.children.get(n);return null!==r?r.subtree(Po(t)):new e(null)}},{key:"set",value:function(t,n){if(Fo(t))return new e(n,this.children);var r=Ao(t),i=(this.children.get(r)||new e(null)).set(Po(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(Fo(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=Ao(t),r=this.children.get(n);if(r){var i,a=r.remove(Po(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(Fo(e))return this.value;var t=Ao(e),n=this.children.get(t);return n?n.get(Po(e)):null}},{key:"setTree",value:function(t,n){if(Fo(t))return n;var r,i=Ao(t),a=(this.children.get(i)||new e(null)).setTree(Po(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(Co(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(Lo(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,Co(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(Fo(e))return null;var i=Ao(e),a=this.children.get(i);return a?a.findOnPath_(Po(e),Lo(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,Co(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(Fo(t))return this;this.value&&r(n,this.value);var i=Ao(t),a=this.children.get(i);return a?a.foreachOnPath_(Po(t),Lo(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(Co(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(Lo(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return Ga(t,(function(e,t){n=n.set(new Io(e),t)})),n}}]),e}(),ls=function(){function e(t){f(this,e),this.writeTree_=t}return m(e,null,[{key:"empty",value:function(){return new e(new cs(null))}}]),e}();function hs(e,t,n){if(Fo(t))return new ls(new cs(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=Mo(i,t);return a=a.updateChild(o,n),new ls(e.writeTree_.set(i,a))}var u=new cs(n),s=e.writeTree_.setTree(t,u);return new ls(s)}function fs(e,t,n){var r=e;return Ga(n,(function(e,n){r=hs(r,Lo(t,e),n)})),r}function ds(e,t){if(Fo(t))return ls.empty();var n=e.writeTree_.setTree(t,new cs(null));return new ls(n)}function ps(e,t){return null!=vs(e,t)}function vs(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Mo(n.path,t)):null}function ms(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(pu,(function(e,n){t.push(new Qo(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Qo(e,n.value))})),t}function ys(e,t){if(Fo(t))return e;var n=vs(e,t);return new ls(null!=n?new cs(n):e.writeTree_.subtree(t))}function gs(e){return e.writeTree_.isEmpty()}function ks(e,t){return bs(Co(),e.writeTree_,t)}function bs(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(Yn(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=bs(Lo(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Lo(e,".priority"),r)),n}function ws(e,t){return Ds(t,e)}function _s(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));Yn(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var u=e.allWrites[o];u.visible&&(o>=n&&xs(u,r.path)?i=!1:Vo(r.path,u.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=Es(e.allWrites,Ss,Co()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=ds(e.visibleWrites,r.path):Ga(r.children,(function(t){e.visibleWrites=ds(e.visibleWrites,Lo(r.path,t))}));return!0}return!1}function xs(e,t){if(e.snap)return Vo(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&Vo(Lo(e.path,n),t))return!0;return!1}function Ss(e){return e.visible}function Es(e,t,n){for(var r=ls.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,u=void 0;if(a.snap)Vo(n,o)?r=hs(r,u=Mo(n,o),a.snap):Vo(o,n)&&(u=Mo(o,n),r=hs(r,Co(),a.snap.getChild(u)));else{if(!a.children)throw Jn("WriteRecord should have .snap or .children");if(Vo(n,o))r=fs(r,u=Mo(n,o),a.children);else if(Vo(o,n))if(Fo(u=Mo(o,n)))r=fs(r,Co(),a.children);else{var s=Er(a.children,Ao(u));if(s){var c=s.getChild(Po(u));r=hs(r,Co(),c)}}}}}return r}function Ts(e,t,n,r,i){if(r||i){var a=ys(e.visibleWrites,t);if(!i&&gs(a))return n;if(i||null!=n||ps(a,Co())){return ks(Es(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Vo(e.path,t)||Vo(t,e.path))}),t),n||bu.EMPTY_NODE)}return null}var o=vs(e.visibleWrites,t);if(null!=o)return o;var u=ys(e.visibleWrites,t);return gs(u)?n:null!=n||ps(u,Co())?ks(u,n||bu.EMPTY_NODE):null}function Is(e,t,n,r){return Ts(e.writeTree,e.treePath,t,n,r)}function Cs(e,t){return function(e,t,n){var r=bu.EMPTY_NODE,i=vs(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(pu,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=ys(e.visibleWrites,t);return n.forEachChild(pu,(function(e,t){var n=ks(ys(a,new Io(e)),t);r=r.updateImmediateChild(e,n)})),ms(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return ms(ys(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function As(e,t,n,r){return function(e,t,n,r,i){Yn(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=Lo(t,n);if(ps(e.visibleWrites,a))return null;var o=ys(e.visibleWrites,a);return gs(o)?i.getChild(n):ks(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function Ns(e,t){return function(e,t){return vs(e.visibleWrites,t)}(e.writeTree,Lo(e.treePath,t))}function Ps(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var u,s=ys(e.visibleWrites,t),c=vs(s,Co());if(null!=c)u=c;else{if(null==n)return[];u=ks(s,n)}if((u=u.withIndex(o)).isEmpty()||u.isLeafNode())return[];for(var l=[],h=o.getCompare(),f=a?u.getReverseIteratorFrom(r,o):u.getIteratorFrom(r,o),d=f.getNext();d&&l.length<i;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function Rs(e,t,n){return function(e,t,n,r){var i=Lo(t,n),a=vs(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?ks(ys(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function Os(e,t){return Ds(Lo(e.treePath,t),e.writeTree)}function Ds(e,t){return{treePath:e,writeTree:t}}var Ls=function(){function e(){f(this,e),this.changeMap=new Map}return m(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;Yn("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Yn(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Nu(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Au(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Cu(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Jn("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Nu(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),Fs=new(function(){function e(){f(this,e)}return m(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),Ms=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;f(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return m(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new ts(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Rs(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ss(this.viewCache_),i=Ps(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function js(e,t,n,r,i){var a,o,u=new Ls;if(n.type===Hu.OVERWRITE){var s=n;s.source.fromUser?a=qs(e,t,s.path,s.snap,r,i,u):(Yn(s.source.fromServer,"Unknown source."),o=s.source.tagged||t.serverCache.isFiltered()&&!Fo(s.path),a=Vs(e,t,s.path,s.snap,r,i,o,u))}else if(n.type===Hu.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var u=t;return r.foreach((function(r,s){var c=Lo(n,r);zs(t,Ao(c))&&(u=qs(e,u,c,s,i,a,o))})),r.foreach((function(r,s){var c=Lo(n,r);zs(t,Ao(c))||(u=qs(e,u,c,s,i,a,o))})),u}(e,t,c.path,c.children,r,i,u):(Yn(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=Ws(e,t,c.path,c.children,r,i,o,u))}else if(n.type===Hu.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=Ns(r,n))return t;var u,s=new Ms(r,t,i),c=t.eventCache.getNode();if(Fo(n)||".priority"===Ao(n)){var l;if(t.serverCache.isFullyInitialized())l=Is(r,ss(t));else{var h=t.serverCache.getNode();Yn(h instanceof bu,"serverChildren would be complete if leaf node"),l=Cs(r,h)}u=e.filter.updateFullNode(c,l,a)}else{var f=Ao(n),d=Rs(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=c.getImmediateChild(f)),(u=null!=d?e.filter.updateChild(c,f,d,Po(n),s,a):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(c,f,bu.EMPTY_NODE,Po(n),s,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Is(r,ss(t))).isLeafNode()&&(u=e.filter.updateFullNode(u,o,a))}return o=t.serverCache.isFullyInitialized()||null!=Ns(r,Co()),as(t,u,o,e.filter.filtersNodes())}(e,t,l.path,r,i,u):function(e,t,n,r,i,a,o){if(null!=Ns(i,n))return t;var u=t.serverCache.isFiltered(),s=t.serverCache;if(null!=r.value){if(Fo(n)&&s.isFullyInitialized()||s.isCompleteForPath(n))return Vs(e,t,n,s.getNode().getChild(n),i,a,u,o);if(Fo(n)){var c=new cs(null);return s.getNode().forEachChild(Jo,(function(e,t){c=c.set(new Io(e),t)})),Ws(e,t,n,c,i,a,u,o)}return t}var l=new cs(null);return r.foreach((function(e,t){var r=Lo(n,e);s.isCompleteForPath(r)&&(l=l.set(e,s.getNode().getChild(r)))})),Ws(e,t,n,l,i,a,u,o)}(e,t,l.path,l.affectedTree,r,i,u)}else{if(n.type!==Hu.LISTEN_COMPLETE)throw Jn("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=os(t,a.getNode(),a.isFullyInitialized()||Fo(n),a.isFiltered());return Us(e,o,n,r,Fs,i)}(e,t,n.path,r,u)}var h=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=us(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(Iu(us(t)))}}(t,a,h),{viewCache:a,changes:h}}function Us(e,t,n,r,i,a){var o,u,s=t.eventCache;if(null!=Ns(r,n))return t;if(Fo(n))if(Yn(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=ss(t),l=Cs(r,c instanceof bu?c:bu.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var h=Is(r,ss(t));o=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=Ao(n);if(".priority"===f){Yn(1===No(n),"Can't have a priority with additional path components");var d=s.getNode(),p=As(r,n,d,u=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):s.getNode()}else{var v,m=Po(n);if(s.isCompleteForChild(f)){u=t.serverCache.getNode();var y=As(r,n,s.getNode(),u);v=null!=y?s.getNode().getImmediateChild(f).updateChild(m,y):s.getNode().getImmediateChild(f)}else v=Rs(r,f,t.serverCache);o=null!=v?e.filter.updateChild(s.getNode(),f,v,m,i,a):s.getNode()}}return as(t,o,s.isFullyInitialized()||Fo(n),e.filter.filtersNodes())}function Vs(e,t,n,r,i,a,o,u){var s,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(Fo(n))s=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);s=l.updateFullNode(c.getNode(),h,null)}else{var f=Ao(n);if(!c.isCompleteForPath(n)&&No(n)>1)return t;var d=Po(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);s=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,Fs,null)}var v=os(t,s,c.isFullyInitialized()||Fo(n),l.filtersNodes());return Us(e,v,n,i,new Ms(i,v,a),u)}function qs(e,t,n,r,i,a,o){var u,s,c=t.eventCache,l=new Ms(i,t,a);if(Fo(n))s=e.filter.updateFullNode(t.eventCache.getNode(),r,o),u=as(t,s,!0,e.filter.filtersNodes());else{var h=Ao(n);if(".priority"===h)s=e.filter.updatePriority(t.eventCache.getNode(),r),u=as(t,s,c.isFullyInitialized(),c.isFiltered());else{var f,d=Po(n),p=c.getNode().getImmediateChild(h);if(Fo(d))f=r;else{var v=l.getCompleteChild(h);f=null!=v?".priority"===Ro(d)&&v.getChild(Do(d)).isEmpty()?v:v.updateChild(d,r):bu.EMPTY_NODE}if(p.equals(f))u=t;else u=as(t,e.filter.updateChild(c.getNode(),h,f,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return u}function zs(e,t){return e.eventCache.isCompleteForChild(t)}function Bs(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function Ws(e,t,n,r,i,a,o,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var s,c=t;s=Fo(n)?r:new cs(null).setTree(n,r);var l=t.serverCache.getNode();return s.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var s=Bs(0,t.serverCache.getNode().getImmediateChild(n),r);c=Vs(e,c,new Io(n),s,i,a,o,u)}})),s.children.inorderTraversal((function(n,r){var s=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!l.hasChild(n)&&!s){var h=Bs(0,t.serverCache.getNode().getImmediateChild(n),r);c=Vs(e,c,new Io(n),h,i,a,o,u)}})),c}var Ks,Hs=function(){function e(t,n){f(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new Pu(i.getIndex()),o=(r=i).loadsAllData()?new Pu(r.getIndex()):r.hasLimit()?new Ou(r):new Ru(r);this.processor_=function(e){return{filter:e}}(o);var u=n.serverCache,s=n.eventCache,c=a.updateFullNode(bu.EMPTY_NODE,u.getNode(),null),l=o.updateFullNode(bu.EMPTY_NODE,s.getNode(),null),h=new ts(c,u.isFullyInitialized(),a.filtersNodes()),d=new ts(l,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=is(d,h),this.eventGenerator_=new ns(this.query_)}return m(e,[{key:"query",get:function(){return this.query_}}]),e}();function Gs(e,t){var n=ss(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Fo(t)&&!n.getImmediateChild(Ao(t)).isEmpty())?n.getChild(t):null}function Qs(e){return 0===e.eventRegistrations_.length}function $s(e,t,n){var r=[];if(n){Yn(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var u=e.eventRegistrations_[o];if(u.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(u)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function Ys(e,t,n,r){t.type===Hu.MERGE&&null!==t.source.queryId&&(Yn(ss(e.viewCache_),"We should always have a full cache before handling merges"),Yn(us(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,u=js(e.processor_,o,t,n,r);return i=e.processor_,a=u.viewCache,Yn(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Yn(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Yn(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=u.viewCache,Js(e,u.changes,u.viewCache.eventCache.getNode(),null)}function Js(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),rs(e,i,"child_removed",t,r,n),rs(e,i,"child_added",t,r,n),rs(e,i,"child_moved",a,r,n),rs(e,i,"child_changed",t,r,n),rs(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var Xs,Zs=m((function e(){f(this,e),this.views=new Map}));function ec(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return Yn(null!=a,"SyncTree gave us an op for an invalid query."),Ys(a,t,n,r)}var o,u=[],s=T(e.views.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u=u.concat(Ys(c,t,n,r))}}catch(l){s.e(l)}finally{s.f()}return u}function tc(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var u=Is(n,i?r:null),s=!1;u?s=!0:r instanceof bu?(u=Cs(n,r),s=!1):(u=bu.EMPTY_NODE,s=!1);var c=is(new ts(u,s,!1),new ts(r,i,!1));return new Hs(t,c)}return o}function nc(e,t,n,r,i,a){var o=tc(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(pu,(function(e,t){r.push(Cu(e,t))})),n.isFullyInitialized()&&r.push(Iu(n.getNode())),Js(e,r,n.getNode(),t)}(o,n)}function rc(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],u=sc(e);if("default"===i){var s,l=T(e.views.entries());try{for(l.s();!(s=l.n()).done;){var h=c(s.value,2),f=h[0],d=h[1];o=o.concat($s(d,n,r)),Qs(d)&&(e.views.delete(f),d.query._queryParams.loadsAllData()||a.push(d.query))}}catch(v){l.e(v)}finally{l.f()}}else{var p=e.views.get(i);p&&(o=o.concat($s(p,n,r)),Qs(p)&&(e.views.delete(i),p.query._queryParams.loadsAllData()||a.push(p.query)))}return u&&!sc(e)&&a.push(new(Yn(Ks,"Reference.ts has not been loaded"),Ks)(t._repo,t._path)),{removed:a,events:o}}function ic(e){var t,n=[],r=T(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function ac(e,t){var n,r=null,i=T(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||Gs(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function oc(e,t){if(t._queryParams.loadsAllData())return cc(e);var n=t._queryIdentifier;return e.views.get(n)}function uc(e,t){return null!=oc(e,t)}function sc(e){return null!=cc(e)}function cc(e){var t,n=T(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var lc=1,hc=m((function e(t){f(this,e),this.listenProvider_=t,this.syncPointTree_=new cs(null),this.pendingWriteTree_={visibleWrites:ls.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function fc(e,t,n,r,i){return function(e,t,n,r,i){Yn(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=hs(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?wc(e,new Zu({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function dc(e,t,n,r){!function(e,t,n,r){Yn(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=fs(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=cs.fromObject(n);return wc(e,new es({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function pc(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(_s(e.pendingWriteTree_,t)){var i=new cs(null);return null!=r.snap?i=i.set(Co(),!0):Ga(r.children,(function(e){i=i.set(new Io(e),!0)})),wc(e,new Ju(r.path,i,n))}return[]}function vc(e,t,n){return wc(e,new Zu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function mc(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t._path,o=e.syncPointTree_.get(a),u=[];if(o&&("default"===t._queryIdentifier||uc(o,t))){var s=rc(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(a));var c=s.removed;if(u=s.events,!i){var l=-1!==c.findIndex((function(e){return e._queryParams.loadsAllData()})),h=e.syncPointTree_.findOnPath(a,(function(e,t){return sc(t)}));if(l&&!h){var f=e.syncPointTree_.subtree(a);if(!f.isEmpty())for(var d=function(e){return e.fold((function(e,t,n){if(t&&sc(t))return[cc(t)];var r=[];return t&&(r=ic(t)),Ga(n,(function(e,t){r=r.concat(t)})),r}))}(f),p=0;p<d.length;++p){var v=d[p],m=v.query,y=Sc(e,v);e.listenProvider_.startListening(Nc(m),Ec(e,m),y.hashFn,y.onComplete)}}if(!h&&c.length>0&&!r)if(l){e.listenProvider_.stopListening(Nc(t),null)}else c.forEach((function(t){var n=e.queryToTagMap.get(Tc(t));e.listenProvider_.stopListening(Nc(t),n)}))}!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=Tc(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}(e,c)}return u}function yc(e,t,n,r){var i=Ic(e,r);if(null!=i){var a=Cc(i),o=a.path,u=a.queryId,s=Mo(o,t);return Ac(e,o,new Zu($u(u),s,n))}return[]}function gc(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t._path,a=null,o=!1;e.syncPointTree_.foreachOnPath(i,(function(e,t){var n=Mo(e,i);a=a||ac(t,n),o=o||sc(t)}));var u,s=e.syncPointTree_.get(i);(s?(o=o||sc(s),a=a||ac(s,Co())):(s=new Zs,e.syncPointTree_=e.syncPointTree_.set(i,s)),null!=a)?u=!0:(u=!1,a=bu.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((function(e,t){var n=ac(t,Co());n&&(a=a.updateImmediateChild(e,n))})));var c=uc(s,t);if(!c&&!t._queryParams.loadsAllData()){var l=Tc(t);Yn(!e.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=lc++;e.queryToTagMap.set(l,h),e.tagToQueryMap.set(h,l)}var f=nc(s,t,n,ws(e.pendingWriteTree_,i),a,u);if(!c&&!o&&!r){var d=oc(s,t);f=f.concat(function(e,t,n){var r=t._path,i=Ec(e,t),a=Sc(e,n),o=e.listenProvider_.startListening(Nc(t),i,a.hashFn,a.onComplete),u=e.syncPointTree_.subtree(r);if(i)Yn(!sc(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var s=u.fold((function(e,t,n){if(!Fo(e)&&t&&sc(t))return[cc(t).query];var r=[];return t&&(r=r.concat(ic(t).map((function(e){return e.query})))),Ga(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<s.length;++c){var l=s[c];e.listenProvider_.stopListening(Nc(l),Ec(e,l))}return o}(e,t,d))}return f}function kc(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=ac(n,Mo(e,t));if(r)return r}));return Ts(r,t,i,n,!0)}function bc(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=Mo(e,n);r=r||ac(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||ac(i,Co()):(i=new Zs,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new ts(r,!0,!1):null;return function(e){return us(e.viewCache_)}(tc(i,t,ws(e.pendingWriteTree_,t._path),a?o.getNode():bu.EMPTY_NODE,a))}function wc(e,t){return _c(t,e.syncPointTree_,null,ws(e.pendingWriteTree_,Co()))}function _c(e,t,n,r){if(Fo(e.path))return xc(e,t,n,r);var i=t.get(Co());null==n&&null!=i&&(n=ac(i,Co()));var a=[],o=Ao(e.path),u=e.operationForChild(o),s=t.children.get(o);if(s&&u){var c=n?n.getImmediateChild(o):null,l=Os(r,o);a=a.concat(_c(u,s,c,l))}return i&&(a=a.concat(ec(i,e,r,n))),a}function xc(e,t,n,r){var i=t.get(Co());null==n&&null!=i&&(n=ac(i,Co()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,u=Os(r,t),s=e.operationForChild(t);s&&(a=a.concat(xc(s,i,o,u)))})),i&&(a=a.concat(ec(i,e,r,n))),a}function Sc(e,t){var n=t.query,r=Ec(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||bu.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=Ic(e,n);if(r){var i=Cc(r),a=i.path,o=i.queryId,u=Mo(a,t);return Ac(e,a,new Xu($u(o),u))}return[]}(e,n._path,r):function(e,t){return wc(e,new Xu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return mc(e,n,null,i)}}}function Ec(e,t){var n=Tc(t);return e.queryToTagMap.get(n)}function Tc(e){return e._path.toString()+"$"+e._queryIdentifier}function Ic(e,t){return e.tagToQueryMap.get(t)}function Cc(e){var t=e.indexOf("$");return Yn(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Io(e.substr(0,t))}}function Ac(e,t,n){var r=e.syncPointTree_.get(t);return Yn(r,"Missing sync point for query tag that we're tracking"),ec(r,n,ws(e.pendingWriteTree_,t),null)}function Nc(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Yn(Xs,"Reference.ts has not been loaded"),Xs)(e._repo,e._path):e}var Pc=function(){function e(t){f(this,e),this.node_=t}return m(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),Rc=function(){function e(t,n){f(this,e),this.syncTree_=t,this.path_=n}return m(e,[{key:"getImmediateChild",value:function(t){var n=Lo(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return kc(this.syncTree_,this.path_)}}]),e}(),Oc=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},Dc=function(e,t,n){return e&&"object"===typeof e?(Yn(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?Lc(e[".sv"],t,n):"object"===typeof e[".sv"]?Fc(e[".sv"],t):void Yn(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Lc=function(e,t,n){if("timestamp"===e)return n.timestamp;Yn(!1,"Unexpected server value: "+e)},Fc=function(e,t,n){e.hasOwnProperty("increment")||Yn(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&Yn(!1,"Unexpected increment value: "+r);var i=t.node();if(Yn(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},Mc=function(e,t,n,r){return Uc(t,new Rc(n,e),r)},jc=function(e,t,n){return Uc(e,new Pc(t),n)};function Uc(e,t,n){var r,i=e.getPriority().val(),a=Dc(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,u=Dc(o.getValue(),t,n);return u!==o.getValue()||a!==o.getPriority().val()?new lu(u,xu(a)):e}var s=e;return r=s,a!==s.getPriority().val()&&(r=r.updatePriority(new lu(a))),s.forEachChild(pu,(function(e,i){var a=Uc(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var Vc=m((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};f(this,e),this.name=t,this.parent=n,this.node=r}));function qc(e,t){for(var n=t instanceof Io?t:new Io(t),r=e,i=Ao(n);null!==i;){var a=Er(r.node.children,i)||{children:{},childCount:0};r=new Vc(i,r,a),i=Ao(n=Po(n))}return r}function zc(e){return e.node.value}function Bc(e,t){e.node.value=t,Qc(e)}function Wc(e){return e.node.childCount>0}function Kc(e,t){Ga(e.node.children,(function(n,r){t(new Vc(n,e,r))}))}function Hc(e,t,n,r){n&&!r&&t(e),Kc(e,(function(e){Hc(e,t,!0,r)})),n&&r&&t(e)}function Gc(e){return new Io(null===e.parent?e.name:Gc(e.parent)+"/"+e.name)}function Qc(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===zc(e)&&!Wc(e)}(n),i=Sr(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Qc(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Qc(e))}(e.parent,e.name,e)}var $c=/[\[\].#$\/\u0000-\u001F\u007F]/,Yc=/[\[\].#$\u0000-\u001F\u007F]/,Jc=10485760,Xc=function(e){return"string"===typeof e&&0!==e.length&&!$c.test(e)},Zc=function(e){return"string"===typeof e&&0!==e.length&&!Yc.test(e)},el=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!Ua(e)||e&&"object"===typeof e&&Sr(e,".sv")},tl=function(e,t,n,r){r&&void 0===t||nl(jr(e,"value"),t,n)},nl=function e(t,n,r){var i=r instanceof Io?new qo(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+Bo(i));if("function"===typeof n)throw new Error(t+"contains a function "+Bo(i)+" with contents = "+n.toString());if(Ua(n))throw new Error(t+"contains "+n.toString()+" "+Bo(i));if("string"===typeof n&&n.length>Jc/3&&qr(n)>Jc)throw new Error(t+"contains a string greater than "+Jc+" utf8 bytes "+Bo(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(Ga(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!Xc(n)))throw new Error(t+" contains an invalid key ("+n+") "+Bo(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var u,s;s=n,(u=i).parts_.length>0&&(u.byteLength_+=1),u.parts_.push(s),u.byteLength_+=qr(s),zo(u),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=qr(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+Bo(i)+" in addition to actual children.")}},rl=function(e,t,n,r){if(!r||void 0!==t){var i=jr(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var a=[];Ga(t,(function(e,t){var r=new Io(e);if(nl(i,t,Lo(n,r)),".priority"===Ro(r)&&!el(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=Oo(r=t[n]),a=0;a<i.length;a++)if(".priority"===i[a]&&a===i.length-1);else if(!Xc(i[a]))throw new Error(e+"contains an invalid key ("+i[a]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(jo);var o=null;for(n=0;n<t.length;n++){if(r=t[n],null!==o&&Vo(o,r))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(i,a)}},il=function(e,t,n){if(!n||void 0!==t){if(Ua(t))throw new Error(jr(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!el(t))throw new Error(jr(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},al=function(e,t,n,r){if((!r||void 0!==n)&&!Xc(n))throw new Error(jr(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ol=function(e,t,n,r){if((!r||void 0!==n)&&!Zc(n))throw new Error(jr(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ul=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ol(e,t,n,r)},sl=function(e,t){if(".info"===Ao(t))throw new Error(e+" failed = Can't modify data under /.info/")},cl=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Xc(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Zc(e)}(n))throw new Error(jr(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},ll=m((function e(){f(this,e),this.eventLists_=[],this.recursionDepth_=0}));function hl(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||Uo(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function fl(e,t,n){hl(e,n),pl(e,(function(e){return Uo(e,t)}))}function dl(e,t,n){hl(e,n),pl(e,(function(e){return Vo(e,t)||Vo(t,e)}))}function pl(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(vl(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function vl(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();Pa&&Da("event: "+n.toString()),Ja(r)}}}var ml="repo_interrupt",yl=25,gl=function(){function e(t,n,r,i){f(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ll,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=zu(),this.transactionQueueTree_=new Vc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return m(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function kl(e,t,n){if(e.stats_=fo(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Vu(e.repoInfo_,(function(t,n,r,i){_l(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return xl(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{_r(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Ho(e.repoInfo_,t,(function(t,n,r,i){_l(e,t,n,r,i)}),(function(t){xl(e,t)}),(function(t){!function(e,t){Ga(t,(function(t,n){Sl(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return ho[n]||(ho[n]=t()),ho[n]}(e.repoInfo_,(function(){return new Qu(e.stats_,e.server_)})),e.infoData_=new qu,e.infoSyncTree_=new hc({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=vc(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),Sl(e,"connected",!1),e.serverSyncTree_=new hc({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);dl(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function bl(e){var t=e.infoData_.getNode(new Io(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function wl(e){return Oc({timestamp:bl(e)})}function _l(e,t,n,r,i){e.dataUpdateCount++;var a=new Io(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var u=Ir(n,(function(e){return xu(e)}));o=function(e,t,n,r){var i=Ic(e,r);if(i){var a=Cc(i),o=a.path,u=a.queryId,s=Mo(o,t),c=cs.fromObject(n);return Ac(e,o,new es($u(u),s,c))}return[]}(e.serverSyncTree_,a,u,i)}else{var s=xu(n);o=yc(e.serverSyncTree_,a,s,i)}else if(r){var c=Ir(n,(function(e){return xu(e)}));o=function(e,t,n){var r=cs.fromObject(n);return wc(e,new es({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=xu(n);o=vc(e.serverSyncTree_,a,l)}var h=a;o.length>0&&(h=Ll(e,a)),dl(e.eventQueue_,h,o)}function xl(e,t){Sl(e,"connected",t),!1===t&&function(e){Pl(e,"onDisconnectEvents");var t=wl(e),n=zu();Ku(e.onDisconnect_,Co(),(function(r,i){var a=Mc(r,i,e.serverSyncTree_,t);Bu(n,r,a)}));var r=[];Ku(n,Co(),(function(t,n){r=r.concat(vc(e.serverSyncTree_,t,n));var i=Vl(e,t);Ll(e,i)})),e.onDisconnect_=zu(),dl(e.eventQueue_,Co(),r)}(e)}function Sl(e,t,n){var r=new Io("/.info/"+t),i=xu(n);e.infoData_.updateSnapshot(r,i);var a=vc(e.infoSyncTree_,r,i);dl(e.eventQueue_,r,a)}function El(e){return e.nextWriteId_++}function Tl(e,t,n,r,i){Pl(e,"set",{path:t.toString(),value:n,priority:r});var a=wl(e),o=xu(n,r),u=kc(e.serverSyncTree_,t),s=jc(o,u,a),c=El(e),l=fc(e.serverSyncTree_,t,s,c,!0);hl(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||ja("set at "+t+" failed: "+n);var o=pc(e.serverSyncTree_,c,!a);dl(e.eventQueue_,t,o),Rl(e,i,n,r)}));var h=Vl(e,t);Ll(e,h),dl(e.eventQueue_,h,[])}function Il(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&Wu(e.onDisconnect_,t),Rl(e,n,r,i)}))}function Cl(e,t,n,r){var i=xu(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,a){"ok"===n&&Bu(e.onDisconnect_,t,i),Rl(e,r,n,a)}))}function Al(e,t,n){var r;r=".info"===Ao(t._path)?mc(e.infoSyncTree_,t,n):mc(e.serverSyncTree_,t,n),fl(e.eventQueue_,t._path,r)}function Nl(e){e.persistentConnection_&&e.persistentConnection_.interrupt(ml)}function Pl(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Da.apply(void 0,[t].concat(r))}function Rl(e,t,n,r){t&&Ja((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function Ol(e,t,n){return kc(e.serverSyncTree_,t,n)||bu.EMPTY_NODE}function Dl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||Ul(e,t),zc(t)){var n=Ml(e,t);Yn(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return 0===e.status}))&&function(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=Ol(e,t,r),a=i,o=i.hash(),u=0;u<n.length;u++){var s=n[u];Yn(0===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;var c=Mo(t,s.path);a=a.updateChild(c,s.currentOutputSnapshotRaw)}var l=a.val(!0),h=t;e.server_.put(h.toString(),l,(function(r){Pl(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(pc(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},u=0;u<n.length;u++)o(u);Ul(e,qc(e.transactionQueueTree_,t)),Dl(e,e.transactionQueueTree_),dl(e.eventQueue_,t,i);for(var s=0;s<a.length;s++)Ja(a[s])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{ja("transaction at "+h.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}Ll(e,t)}}),o)}(e,Gc(t),n)}else Wc(t)&&Kc(t,(function(t){Dl(e,t)}))}function Ll(e,t){var n=Fl(e,t),r=Gc(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),u=function(a){var u,s,c=t[a],l=Mo(n,c.path),h=!1;if(Yn(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,i=i.concat(pc(e.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=yl)h=!0,u="maxretry",i=i.concat(pc(e.serverSyncTree_,c.currentWriteId,!0));else{var f=Ol(e,c.path,o);c.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){nl("transaction failed: Data returned ",d,c.path);var p=xu(d);"object"===typeof d&&null!=d&&Sr(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=c.currentWriteId,m=wl(e),y=jc(p,f,m);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=y,c.currentWriteId=El(e),o.splice(o.indexOf(v),1),i=(i=i.concat(fc(e.serverSyncTree_,c.path,y,c.currentWriteId,c.applyLocally))).concat(pc(e.serverSyncTree_,v,!0))}else h=!0,u="nodata",i=i.concat(pc(e.serverSyncTree_,c.currentWriteId,!0))}dl(e.eventQueue_,n,i),i=[],h&&(t[a].status=2,s=t[a].unwatcher,setTimeout(s,Math.floor(0)),t[a].onComplete&&("nodata"===u?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(u),!1,null)}))))},s=0;s<t.length;s++)u(s);Ul(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)Ja(r[c]);Dl(e,e.transactionQueueTree_)}(e,Ml(e,n),r),r}function Fl(e,t){var n,r=e.transactionQueueTree_;for(n=Ao(t);null!==n&&void 0===zc(r);)r=qc(r,n),n=Ao(t=Po(t));return r}function Ml(e,t){var n=[];return jl(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function jl(e,t,n){var r=zc(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Kc(t,(function(t){jl(e,t,n)}))}function Ul(e,t){var n=zc(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Bc(t,n.length>0?n:void 0)}Kc(t,(function(t){Ul(e,t)}))}function Vl(e,t){var n=Gc(Fl(e,t)),r=qc(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){ql(e,t)})),ql(e,r),Hc(r,(function(t){ql(e,t)})),n}function ql(e,t){var n=zc(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(Yn(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(Yn(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(pc(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Bc(t,void 0):n.length=a+1,dl(e.eventQueue_,Gc(t),i);for(var u=0;u<r.length;u++)Ja(r[u])}}var zl=function(e,t){var n=Bl(e),r=n.namespace;"firebase.com"===n.domain&&Ma(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Ma("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ja("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new uo(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Io(n.pathString)}},Bl=function(e){var t="",n="",r="",i="",a="",o=!0,u="https",s=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(u=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,h)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=T(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):ja("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(o="https"===u||"wss"===u,s=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in f&&(a=f.ns)}return{host:t,port:s,domain:n,subdomain:r,secure:o,scheme:u,pathString:i,namespace:a}},Wl="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Kl=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=Wl.charAt(n%64),n=Math.floor(n/64);Yn(0===n,"Cannot push at time == 0");var o=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=Wl.charAt(t[r]);return Yn(20===o.length,"nextPushId: Length should be 20."),o}}(),Hl=function(){function e(t,n,r,i){f(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return m(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+_r(this.snapshot.exportVal())}}]),e}(),Gl=function(){function e(t,n,r){f(this,e),this.eventRegistration=t,this.error=n,this.path=r}return m(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),Ql=function(){function e(t,n){f(this,e),this.snapshotCallback=t,this.cancelCallback=n}return m(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return Yn(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),$l=function(){function e(t,n){f(this,e),this._repo=t,this._path=n}return m(e,[{key:"cancel",value:function(){var e=new sr;return Il(this._repo,this._path,e.wrapCallback((function(){}))),e.promise}},{key:"remove",value:function(){sl("OnDisconnect.remove",this._path);var e=new sr;return Cl(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise}},{key:"set",value:function(e){sl("OnDisconnect.set",this._path),tl("OnDisconnect.set",e,this._path,!1);var t=new sr;return Cl(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}},{key:"setWithPriority",value:function(e,t){sl("OnDisconnect.setWithPriority",this._path),tl("OnDisconnect.setWithPriority",e,this._path,!1),il("OnDisconnect.setWithPriority",t,!1);var n=new sr;return function(e,t,n,r,i){var a=xu(n,r);e.server_.onDisconnectPut(t.toString(),a.val(!0),(function(n,r){"ok"===n&&Bu(e.onDisconnect_,t,a),Rl(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise}},{key:"update",value:function(e){sl("OnDisconnect.update",this._path),rl("OnDisconnect.update",e,this._path,!1);var t=new sr;return function(e,t,n,r){if(Tr(n))return Da("onDisconnect().update() called with empty data.  Don't do anything."),void Rl(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,a){"ok"===i&&Ga(n,(function(n,r){var i=xu(r);Bu(e.onDisconnect_,Lo(t,n),i)})),Rl(0,r,i,a)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}}]),e}(),Yl=function(){function e(t,n,r,i){f(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return m(e,[{key:"key",get:function(){return Fo(this._path)?null:Ro(this._path)}},{key:"ref",get:function(){return new eh(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=Uu(this._queryParams),t=Ka(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return Uu(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=zr(t))instanceof e))return!1;var n=this._repo===t._repo,r=Uo(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();function Jl(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Xl(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Jo){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==Va)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==qa)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===pu){if(null!=t&&!el(t)||null!=n&&!el(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Yn(e.getIndex()instanceof Su||e.getIndex()===Tu,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Zl(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var eh=function(e){g(n,e);var t=_(n);function n(e,r){return f(this,n),t.call(this,e,r,new Du,!1)}return m(n,[{key:"parent",get:function(){var e=Do(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(Yl),th=function(){function e(t,n,r){f(this,e),this._node=t,this.ref=n,this._index=r}return m(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new Io(t),r=ih(this.ref,t);return new e(this._node.getChild(n),r,pu)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,ih(n.ref,r),pu))}))}},{key:"hasChild",value:function(e){var t=new Io(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function nh(e,t){return(e=zr(e))._checkNotDeleted("ref"),void 0!==t?ih(e._root,t):e._root}function rh(e,t){(e=zr(e))._checkNotDeleted("refFromURL");var n=zl(t,e._repo.repoInfo_.nodeAdmin);cl("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||Ma("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),nh(e,n.path.toString())}function ih(e,t){return null===Ao((e=zr(e))._path)?ul("child","path",t,!1):ol("child","path",t,!1),new eh(e._repo,Lo(e._path,t))}function ah(e,t){e=zr(e),sl("set",e._path),tl("set",t,e._path,!1);var n=new sr;return Tl(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function oh(e,t){rl("update",t,e._path,!1);var n=new sr;return function(e,t,n,r){Pl(e,"update",{path:t.toString(),value:n});var i=!0,a=wl(e),o={};if(Ga(n,(function(n,r){i=!1,o[n]=Mc(Lo(t,n),xu(r),e.serverSyncTree_,a)})),i)Da("update() called with empty data.  Don't do anything."),Rl(0,r,"ok",void 0);else{var u=El(e),s=dc(e.serverSyncTree_,t,o,u);hl(e.eventQueue_,s),e.server_.merge(t.toString(),n,(function(n,i){var a="ok"===n;a||ja("update at "+t+" failed: "+n);var o=pc(e.serverSyncTree_,u,!a),s=o.length>0?Ll(e,t):t;dl(e.eventQueue_,s,o),Rl(0,r,n,i)})),Ga(n,(function(n){var r=Vl(e,Lo(t,n));Ll(e,r)})),dl(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function uh(e){e=zr(e);var t=new Ql((function(){})),n=new sh(t);return function(e,t,n){var r=bc(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((function(r){var i,a=xu(r).withIndex(t._queryParams.getIndex());if(gc(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())i=vc(e.serverSyncTree_,t._path,a);else{var o=Ec(e.serverSyncTree_,t);i=yc(e.serverSyncTree_,t._path,a,o)}return dl(e.eventQueue_,t._path,i),mc(e.serverSyncTree_,t,n,null,!0),a}),(function(n){return Pl(e,"get for query "+_r(t)+" failed: "+n),Promise.reject(new Error(n))}))}(e._repo,e,n).then((function(t){return new th(t,new eh(e._repo,e._path),e._queryParams.getIndex())}))}var sh=function(){function e(t){f(this,e),this.callbackContext=t}return m(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new Hl("value",this,new th(e.snapshotNode,new eh(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new Gl(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),ch=function(){function e(t,n){f(this,e),this.eventType=t,this.callbackContext=n}return m(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new Gl(this,e,t):null}},{key:"createEvent",value:function(e,t){Yn(null!=e.childName,"Child events should have a childName.");var n=ih(new eh(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new Hl(e.type,this,new th(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function lh(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,u=function(t,n){Al(e._repo,e,c),o(t,n)};u.userCallback=n.userCallback,u.context=n.context,n=u}var s=new Ql(n,a||void 0),c="value"===t?new sh(s):new ch(t,s);return function(e,t,n){var r;r=".info"===Ao(t._path)?gc(e.infoSyncTree_,t,n):gc(e.serverSyncTree_,t,n),fl(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return Al(e._repo,e,c)}}function hh(e,t,n,r){return lh(e,"value",t,n,r)}function fh(e,t,n,r){return lh(e,"child_added",t,n,r)}function dh(e,t,n,r){return lh(e,"child_changed",t,n,r)}function ph(e,t,n,r){return lh(e,"child_moved",t,n,r)}function vh(e,t,n,r){return lh(e,"child_removed",t,n,r)}function mh(e,t,n){var r=null,i=n?new Ql(n):null;"value"===t?r=new sh(i):t&&(r=new ch(t,i)),Al(e._repo,e,r)}var yh=m((function e(){f(this,e)})),gh=function(e){g(n,e);var t=_(n);function n(e,r){var i;return f(this,n),(i=t.call(this))._value=e,i._key=r,i}return m(n,[{key:"_apply",value:function(e){tl("endAt",this._value,e._path,!0);var t=Fu(e._queryParams,this._value,this._key);if(Zl(t),Xl(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Yl(e._repo,e._path,t,e._orderByCalled)}}]),n}(yh);var kh=function(e){g(n,e);var t=_(n);function n(e,r){var i;return f(this,n),(i=t.call(this))._value=e,i._key=r,i}return m(n,[{key:"_apply",value:function(e){tl("endBefore",this._value,e._path,!1);var t=function(e,t,n){var r;return(r=e.index_===Jo||n?Fu(e,t,n):Fu(e,t,Va)).endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(Zl(t),Xl(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Yl(e._repo,e._path,t,e._orderByCalled)}}]),n}(yh);var bh=function(e){g(n,e);var t=_(n);function n(e,r){var i;return f(this,n),(i=t.call(this))._value=e,i._key=r,i}return m(n,[{key:"_apply",value:function(e){tl("startAt",this._value,e._path,!0);var t=Lu(e._queryParams,this._value,this._key);if(Zl(t),Xl(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Yl(e._repo,e._path,t,e._orderByCalled)}}]),n}(yh);var wh=function(e){g(n,e);var t=_(n);function n(e,r){var i;return f(this,n),(i=t.call(this))._value=e,i._key=r,i}return m(n,[{key:"_apply",value:function(e){tl("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;return(r=e.index_===Jo||n?Lu(e,t,n):Lu(e,t,qa)).startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(Zl(t),Xl(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Yl(e._repo,e._path,t,e._orderByCalled)}}]),n}(yh);var _h=function(e){g(n,e);var t=_(n);function n(e){var r;return f(this,n),(r=t.call(this))._limit=e,r}return m(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Yl(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(yh);var xh=function(e){g(n,e);var t=_(n);function n(e){var r;return f(this,n),(r=t.call(this))._limit=e,r}return m(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Yl(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(yh);var Sh=function(e){g(n,e);var t=_(n);function n(e){var r;return f(this,n),(r=t.call(this))._path=e,r}return m(n,[{key:"_apply",value:function(e){Jl(e,"orderByChild");var t=new Io(this._path);if(Fo(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new Su(t),r=Mu(e._queryParams,n);return Xl(r),new Yl(e._repo,e._path,r,!0)}}]),n}(yh);var Eh=function(e){g(n,e);var t=_(n);function n(){return f(this,n),t.apply(this,arguments)}return m(n,[{key:"_apply",value:function(e){Jl(e,"orderByKey");var t=Mu(e._queryParams,Jo);return Xl(t),new Yl(e._repo,e._path,t,!0)}}]),n}(yh);var Th=function(e){g(n,e);var t=_(n);function n(){return f(this,n),t.apply(this,arguments)}return m(n,[{key:"_apply",value:function(e){Jl(e,"orderByPriority");var t=Mu(e._queryParams,pu);return Xl(t),new Yl(e._repo,e._path,t,!0)}}]),n}(yh);var Ih=function(e){g(n,e);var t=_(n);function n(){return f(this,n),t.apply(this,arguments)}return m(n,[{key:"_apply",value:function(e){Jl(e,"orderByValue");var t=Mu(e._queryParams,Tu);return Xl(t),new Yl(e._repo,e._path,t,!0)}}]),n}(yh);var Ch=function(e){g(n,e);var t=_(n);function n(e,r){var i;return f(this,n),(i=t.call(this))._value=e,i._key=r,i}return m(n,[{key:"_apply",value:function(e){if(tl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new gh(this._value,this._key)._apply(new bh(this._value,this._key)._apply(e))}}]),n}(yh);function Ah(e){for(var t=zr(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0,o=r;a<o.length;a++){t=o[a]._apply(t)}return t}!function(e){Yn(!Ks,"__referenceConstructor has already been defined"),Ks=e}(eh),function(e){Yn(!Xs,"__referenceConstructor has already been defined"),Xs=e}(eh);var Nh="FIREBASE_DATABASE_EMULATOR_HOST",Ph={},Rh=!1;function Oh(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||Ma("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Da("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,u=zl(a,i),s=u.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}[Nh]),c?(o=!0,a="http://".concat(c,"?ns=").concat(s.namespace),s=(u=zl(a,i)).repoInfo):o=!u.repoInfo.secure;var l=i&&o?new to(to.OWNER):new eo(e.name,e.options,t);cl("Invalid Firebase Database URL",u),Fo(u.path)||Ma("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=Ph[t.name];i||(i={},Ph[t.name]=i);var a=i[e.toURLString()];a&&Ma("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new gl(e,Rh,n,r),i[e.toURLString()]=a,a}(s,e,l,new Za(e.name,n));return new Dh(h,e)}var Dh=function(){function e(t,n){f(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return m(e,[{key:"_repo",get:function(){return this._instanceStarted||(kl(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new eh(this._repo,Co())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=Ph[t];n&&n[e.key]===e||Ma("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),Nl(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&Ma("Cannot call "+e+" on a deleted database.")}}]),e}();function Lh(){bo.IS_TRANSPORT_INITIALIZED&&ja("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Fh(){Lh(),mo.forceDisallow()}function Mh(){Lh(),ko.forceDisallow(),mo.forceAllow()}function jh(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=zr(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&Ma("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ma('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new to(to.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:cr(r.mockUserToken,e.app.options.projectId);a=new to(o)}!function(e,t,n,r){e.repoInfo_=new uo("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,a)}function Uh(e){var t;(e=zr(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(ml)}function Vh(e,t){Oa(e,t)}var qh={".sv":"timestamp"};var zh=function(){function e(t,n){f(this,e),this.committed=t,this.snapshot=n}return m(e,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}();function Bh(e,t,n){var r;if(e=zr(e),sl("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new sr,o=hh(e,(function(){}));return function(e,t,n,r,i,a){Pl(e,"transaction on "+t);var o={path:t,update:n,onComplete:r,status:null,order:Ca(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=Ol(e,t,void 0);o.currentInputSnapshot=u;var s=o.update(u.val());if(void 0===s)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{nl("transaction failed: Data returned ",s,o.path),o.status=0;var c,l=qc(e.transactionQueueTree_,t),h=zc(l)||[];h.push(o),Bc(l,h),"object"===typeof s&&null!==s&&Sr(s,".priority")?(c=Er(s,".priority"),Yn(el(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(kc(e.serverSyncTree_,t)||bu.EMPTY_NODE).getPriority().val();var f=wl(e),d=xu(s,c),p=jc(d,u,f);o.currentOutputSnapshotRaw=d,o.currentOutputSnapshotResolved=p,o.currentWriteId=El(e);var v=fc(e.serverSyncTree_,t,p,o.currentWriteId,o.applyLocally);dl(e.eventQueue_,t,v),Dl(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?a.reject(t):(i=new th(r,new eh(e._repo,e._path),pu),a.resolve(new zh(n,i)))}),o,i),a.promise}Ho.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Ho.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){wa(Ui),Ri(new Br("database",(function(e,t){var n=t.instanceIdentifier;return Oh(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Ki(ga,ka,e),Ki(ga,ka,"esm2017")}();var Wh=new ei("@firebase/database-compat"),Kh=function(e){var t="FIREBASE WARNING: "+e;Wh.warn(t)},Hh=function(){function e(t){f(this,e),this._delegate=t}return m(e,[{key:"cancel",value:function(e){Mr("OnDisconnect.cancel",0,1,arguments.length),Ur("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"remove",value:function(e){Mr("OnDisconnect.remove",0,1,arguments.length),Ur("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"set",value:function(e,t){Mr("OnDisconnect.set",1,2,arguments.length),Ur("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"setWithPriority",value:function(e,t,n){Mr("OnDisconnect.setWithPriority",2,3,arguments.length),Ur("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"update",value:function(e,t){if(Mr("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,Kh("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ur("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}}]),e}(),Gh=function(){function e(t,n){f(this,e),this.committed=t,this.snapshot=n}return m(e,[{key:"toJSON",value:function(){return Mr("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}(),Qh=function(){function e(t,n){f(this,e),this._database=t,this._delegate=n}return m(e,[{key:"val",value:function(){return Mr("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return Mr("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return Mr("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return Mr("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(t){return Mr("DataSnapshot.child",0,1,arguments.length),t=String(t),ol("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}},{key:"hasChild",value:function(e){return Mr("DataSnapshot.hasChild",1,1,arguments.length),ol("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}},{key:"getPriority",value:function(){return Mr("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(t){var n=this;return Mr("DataSnapshot.forEach",1,1,arguments.length),Ur("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))}},{key:"hasChildren",value:function(){return Mr("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return Mr("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return Mr("DataSnapshot.ref",0,0,arguments.length),new Yh(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),e}(),$h=function(){function e(t,n){f(this,e),this.database=t,this._delegate=n}return m(e,[{key:"on",value:function(t,n,r,i){var a,o=this;Mr("Query.on",2,4,arguments.length),Ur("Query.on","callback",n,!1);var u=e.getCancelAndContextArgs_("Query.on",r,i),s=function(e,t){n.call(u.context,new Qh(o.database,e),t)};s.userCallback=n,s.context=u.context;var c=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(t){case"value":return hh(this._delegate,s,c),n;case"child_added":return fh(this._delegate,s,c),n;case"child_removed":return vh(this._delegate,s,c),n;case"child_changed":return dh(this._delegate,s,c),n;case"child_moved":return ph(this._delegate,s,c),n;default:throw new Error(jr("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(e,t,n){if(Mr("Query.off",0,3,arguments.length),function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(jr(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}("Query.off",e,!0),Ur("Query.off","callback",t,!0),Vr("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,mh(this._delegate,e,r)}else mh(this._delegate,e)}},{key:"get",value:function(){var e=this;return uh(this._delegate).then((function(t){return new Qh(e.database,t)}))}},{key:"once",value:function(t,n,r,i){var a=this;Mr("Query.once",1,4,arguments.length),Ur("Query.once","callback",n,!0);var o=e.getCancelAndContextArgs_("Query.once",r,i),u=new sr,s=function(e,t){var r=new Qh(a.database,e);n&&n.call(o.context,r,t),u.resolve(r)};s.userCallback=n,s.context=o.context;var c=function(e){o.cancel&&o.cancel.call(o.context,e),u.reject(e)};switch(t){case"value":hh(this._delegate,s,c,{onlyOnce:!0});break;case"child_added":fh(this._delegate,s,c,{onlyOnce:!0});break;case"child_removed":vh(this._delegate,s,c,{onlyOnce:!0});break;case"child_changed":dh(this._delegate,s,c,{onlyOnce:!0});break;case"child_moved":ph(this._delegate,s,c,{onlyOnce:!0});break;default:throw new Error(jr("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}},{key:"limitToFirst",value:function(t){return Mr("Query.limitToFirst",1,1,arguments.length),new e(this.database,Ah(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new _h(e)}(t)))}},{key:"limitToLast",value:function(t){return Mr("Query.limitToLast",1,1,arguments.length),new e(this.database,Ah(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new xh(e)}(t)))}},{key:"orderByChild",value:function(t){return Mr("Query.orderByChild",1,1,arguments.length),new e(this.database,Ah(this._delegate,function(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ol("orderByChild","path",e,!1),new Sh(e)}(t)))}},{key:"orderByKey",value:function(){return Mr("Query.orderByKey",0,0,arguments.length),new e(this.database,Ah(this._delegate,new Eh))}},{key:"orderByPriority",value:function(){return Mr("Query.orderByPriority",0,0,arguments.length),new e(this.database,Ah(this._delegate,new Th))}},{key:"orderByValue",value:function(){return Mr("Query.orderByValue",0,0,arguments.length),new e(this.database,Ah(this._delegate,new Ih))}},{key:"startAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Mr("Query.startAt",0,2,arguments.length),new e(this.database,Ah(this._delegate,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return al("startAt","key",t,!0),new bh(e,t)}(t,n)))}},{key:"startAfter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Mr("Query.startAfter",0,2,arguments.length),new e(this.database,Ah(this._delegate,function(e,t){return al("startAfter","key",t,!0),new wh(e,t)}(t,n)))}},{key:"endAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Mr("Query.endAt",0,2,arguments.length),new e(this.database,Ah(this._delegate,function(e,t){return al("endAt","key",t,!0),new gh(e,t)}(t,n)))}},{key:"endBefore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Mr("Query.endBefore",0,2,arguments.length),new e(this.database,Ah(this._delegate,function(e,t){return al("endBefore","key",t,!0),new kh(e,t)}(t,n)))}},{key:"equalTo",value:function(t,n){return Mr("Query.equalTo",1,2,arguments.length),new e(this.database,Ah(this._delegate,function(e,t){return al("equalTo","key",t,!0),new Ch(e,t)}(t,n)))}},{key:"toString",value:function(){return Mr("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return Mr("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(t){if(Mr("Query.isEqual",1,1,arguments.length),!(t instanceof e)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}return this._delegate.isEqual(t._delegate)}},{key:"ref",get:function(){return new Yh(this.database,new eh(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,Ur(e,"cancel",r.cancel,!0),r.context=n,Vr(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(jr(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}}]),e}(),Yh=function(e){g(n,e);var t=_(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,new Yl(r._repo,r._path,new Du,!1))).database=e,i._delegate=r,i}return m(n,[{key:"getKey",value:function(){return Mr("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(e){return Mr("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new n(this.database,ih(this._delegate,e))}},{key:"getParent",value:function(){Mr("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new n(this.database,e):null}},{key:"getRoot",value:function(){return Mr("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(e,t){Mr("Reference.set",1,2,arguments.length),Ur("Reference.set","onComplete",t,!0);var n=ah(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"update",value:function(e,t){if(Mr("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,Kh("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}sl("Reference.update",this._delegate._path),Ur("Reference.update","onComplete",t,!0);var i=oh(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}},{key:"setWithPriority",value:function(e,t,n){Mr("Reference.setWithPriority",2,3,arguments.length),Ur("Reference.setWithPriority","onComplete",n,!0);var r=function(e,t,n){if(sl("setWithPriority",e._path),tl("setWithPriority",t,e._path,!1),il("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new sr;return Tl(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"remove",value:function(e){Mr("Reference.remove",0,1,arguments.length),Ur("Reference.remove","onComplete",e,!0);var t,n=(t=this._delegate,sl("remove",t._path),ah(t,null));return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n}},{key:"transaction",value:function(e,t,n){var r=this;Mr("Reference.transaction",1,3,arguments.length),Ur("Reference.transaction","transactionUpdate",e,!1),Ur("Reference.transaction","onComplete",t,!0),function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(jr(e,t)+"must be a boolean.")}("Reference.transaction","applyLocally",n,!0);var i=Bh(this._delegate,e,{applyLocally:n}).then((function(e){return new Gh(e.committed,new Qh(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i}},{key:"setPriority",value:function(e,t){Mr("Reference.setPriority",1,2,arguments.length),Ur("Reference.setPriority","onComplete",t,!0);var n=function(e,t){e=zr(e),sl("setPriority",e._path),il("setPriority",t,!1);var n=new sr;return Tl(e._repo,Lo(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"push",value:function(e,t){var r=this;Mr("Reference.push",0,2,arguments.length),Ur("Reference.push","onComplete",t,!0);var i=function(e,t){e=zr(e),sl("push",e._path),tl("push",t,e._path,!0);var n,r=bl(e._repo),i=Kl(r),a=ih(e,i),o=ih(e,i);return n=null!=t?ah(o,t).then((function(){return o})):Promise.resolve(o),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}(this._delegate,e),a=i.then((function(e){return new n(r.database,e)}));t&&a.then((function(){return t(null)}),(function(e){return t(e)}));var o=new n(this.database,i);return o.then=a.then.bind(a),o.catch=a.catch.bind(a,void 0),o}},{key:"onDisconnect",value:function(){return sl("Reference.onDisconnect",this._delegate._path),new Hh(new $l(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}($h),Jh=function(){function e(t,n){var r=this;f(this,e),this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()},forceWebSockets:Fh,forceLongPolling:Mh}}return m(e,[{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};jh(this._delegate,e,t,n)}},{key:"ref",value:function(e){if(Mr("database.ref",0,1,arguments.length),e instanceof Yh){var t=rh(this._delegate,e.toString());return new Yh(this,t)}var n=nh(this._delegate,e);return new Yh(this,n)}},{key:"refFromURL",value:function(e){Mr("database.refFromURL",1,1,arguments.length);var t=rh(this._delegate,e);return new Yh(this,t)}},{key:"goOffline",value:function(){return Mr("database.goOffline",0,0,arguments.length),function(e){(e=zr(e))._checkNotDeleted("goOffline"),Nl(e._repo)}(this._delegate)}},{key:"goOnline",value:function(){return Mr("database.goOnline",0,0,arguments.length),Uh(this._delegate)}}]),e}();Jh.ServerValue={TIMESTAMP:qh,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}};var Xh,Zh=Object.freeze({__proto__:null,initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,a=e.namespace,o=e.nodeAdmin,u=void 0!==o&&o;wa(r);var s=new Kr("auth-internal",new Qr("database-standalone"));return s.setComponent(new Br("auth-internal",(function(){return i}),"PRIVATE")),{instance:new Jh(Oh(t,s,void 0,n,u),t),namespace:a}}}),ef=Jh.ServerValue;function tf(){return tf="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},tf.apply(this,arguments)}(Xh=ya).INTERNAL.registerComponent(new Br("database-compat",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new Jh(i,r)}),"PUBLIC").setServiceProps({Reference:Yh,Query:$h,Database:Jh,DataSnapshot:Qh,enableLogging:Vh,INTERNAL:Zh,ServerValue:ef}).setMultipleInstances(!0)),Xh.registerVersion("@firebase/database-compat","0.3.4");var nf,rf="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},af={},of=of||{},uf=rf||self;function sf(){}function cf(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function lf(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var hf="closure_uid_"+(1e9*Math.random()>>>0),ff=0;function df(e,t,n){return e.call.apply(e.bind,arguments)}function pf(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function vf(e,t,n){return(vf=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?df:pf).apply(null,arguments)}function mf(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function yf(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function gf(){this.s=this.s,this.o=this.o}gf.prototype.s=!1,gf.prototype.ra=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,hf)&&e[hf]||(e[hf]=++ff))},gf.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var kf=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function bf(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function wf(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(cf(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function _f(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}_f.prototype.h=function(){this.defaultPrevented=!0};var xf=function(){if(!uf.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{uf.addEventListener("test",sf,t),uf.removeEventListener("test",sf,t)}catch(n){}return e}();function Sf(e){return/^[\s\xa0]*$/.test(e)}var Ef=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Tf(e,t){return e<t?-1:e>t?1:0}function If(){var e=uf.navigator;return e&&(e=e.userAgent)?e:""}function Cf(e){return-1!=If().indexOf(e)}function Af(e){return Af[" "](e),e}function Nf(e,t,n){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:e[t]=n(t)}Af[" "]=sf;var Pf,Rf=Cf("Opera"),Of=Cf("Trident")||Cf("MSIE"),Df=Cf("Edge"),Lf=Df||Of,Ff=Cf("Gecko")&&!(-1!=If().toLowerCase().indexOf("webkit")&&!Cf("Edge"))&&!(Cf("Trident")||Cf("MSIE"))&&!Cf("Edge"),Mf=-1!=If().toLowerCase().indexOf("webkit")&&!Cf("Edge");function jf(){var e=uf.document;return e?e.documentMode:void 0}e:{var Uf="",Vf=function(){var e=If();return Ff?/rv:([^\);]+)(\)|;)/.exec(e):Df?/Edge\/([\d\.]+)/.exec(e):Of?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Mf?/WebKit\/(\S+)/.exec(e):Rf?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Vf&&(Uf=Vf?Vf[1]:""),Of){var qf=jf();if(null!=qf&&qf>parseFloat(Uf)){Pf=String(qf);break e}}Pf=Uf}var zf,Bf={};if(uf.document&&Of){var Wf=jf();zf=Wf||(parseInt(Pf,10)||void 0)}else zf=void 0;var Kf=zf;function Hf(e,t){if(_f.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Ff){e:{try{Af(t.nodeName);var i=!0;break e}catch(Sn){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Gf[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Hf.$.h.call(this)}}yf(Hf,_f);var Gf={2:"touch",3:"pen",4:"mouse"};Hf.prototype.h=function(){Hf.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Qf="closure_listenable_"+(1e6*Math.random()|0),$f=0;function Yf(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++$f,this.fa=this.ia=!1}function Jf(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Xf(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Zf(e){var t={};for(var n in e)t[n]=e[n];return t}var ed="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function td(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<ed.length;a++)n=ed[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function nd(e){this.src=e,this.g={},this.h=0}function rd(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=kf(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Jf(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function id(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}nd.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=id(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Yf(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var ad="closure_lm_"+(1e6*Math.random()|0),od={};function ud(e,t,n,r,i){if(r&&r.once)return cd(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)ud(e,t[a],n,r,i);return null}return n=md(n),e&&e[Qf]?e.O(t,n,lf(r)?!!r.capture:!!r,i):sd(e,t,n,!1,r,i)}function sd(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=lf(i)?!!i.capture:!!i,u=pd(e);if(u||(e[ad]=u=new nd(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=dd;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)xf||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(fd(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function cd(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)cd(e,t[a],n,r,i);return null}return n=md(n),e&&e[Qf]?e.P(t,n,lf(r)?!!r.capture:!!r,i):sd(e,t,n,!0,r,i)}function ld(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)ld(e,t[a],n,r,i);else r=lf(r)?!!r.capture:!!r,n=md(n),e&&e[Qf]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=id(a=e.g[t],n,r,i))&&(Jf(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=pd(e))&&(t=e.g[t.toString()],e=-1,t&&(e=id(t,n,r,i)),(n=-1<e?t[e]:null)&&hd(n))}function hd(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Qf])rd(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(fd(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=pd(t))?(rd(n,e),0==n.h&&(n.src=null,t[ad]=null)):Jf(e)}}}function fd(e){return e in od?od[e]:od[e]="on"+e}function dd(e,t){if(e.fa)e=!0;else{t=new Hf(t,this);var n=e.listener,r=e.la||e.src;e.ia&&hd(e),e=n.call(r,t)}return e}function pd(e){return(e=e[ad])instanceof nd?e:null}var vd="__closure_events_fn_"+(1e9*Math.random()>>>0);function md(e){return"function"===typeof e?e:(e[vd]||(e[vd]=function(t){return e.handleEvent(t)}),e[vd])}function yd(){gf.call(this),this.i=new nd(this),this.S=this,this.J=null}function gd(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new _f(t,e);else if(t instanceof _f)t.target=t.target||e;else{var i=t;td(t=new _f(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=kd(o,r,!0,t)&&i}if(i=kd(o=t.g=e,r,!0,t)&&i,i=kd(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=kd(o=t.g=n[a],r,!1,t)&&i}function kd(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var u=o.listener,s=o.la||o.src;o.ia&&rd(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}yf(yd,gf),yd.prototype[Qf]=!0,yd.prototype.removeEventListener=function(e,t,n,r){ld(this,e,t,n,r)},yd.prototype.N=function(){if(yd.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Jf(n[r]);delete t.g[e],t.h--}}this.J=null},yd.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},yd.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var bd=uf.JSON.stringify;function wd(){var e=Ad,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var _d,xd=function(){function e(){f(this,e),this.h=this.g=null}return m(e,[{key:"add",value:function(e,t){var n=Sd.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Sd=new(function(){function e(t,n){f(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return m(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Ed}),(function(e){return e.reset()})),Ed=function(){function e(){f(this,e),this.next=this.g=this.h=null}return m(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Td(e){uf.setTimeout((function(){throw e}),0)}function Id(e,t){_d||function(){var e=uf.Promise.resolve(void 0);_d=function(){e.then(Nd)}}(),Cd||(_d(),Cd=!0),Ad.add(e,t)}var Cd=!1,Ad=new xd;function Nd(){for(var e;e=wd();){try{e.h.call(e.g)}catch(n){Td(n)}var t=Sd;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Cd=!1}function Pd(e,t){yd.call(this),this.h=e||1,this.g=t||uf,this.j=vf(this.qb,this),this.l=Date.now()}function Rd(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Od(e,t,n){if("function"===typeof e)n&&(e=vf(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=vf(e.handleEvent,e)}return 2147483647<Number(t)?-1:uf.setTimeout(e,t||0)}function Dd(e){e.g=Od((function(){e.g=null,e.i&&(e.i=!1,Dd(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}yf(Pd,yd),(nf=Pd.prototype).ga=!1,nf.T=null,nf.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),gd(this,"tick"),this.ga&&(Rd(this),this.start()))}},nf.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},nf.N=function(){Pd.$.N.call(this),Rd(this),delete this.g};var Ld=function(e){g(n,e);var t=_(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return m(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Dd(this)}},{key:"N",value:function(){tf(k(n.prototype),"N",this).call(this),this.g&&(uf.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(gf);function Fd(e){gf.call(this),this.h=e,this.g={}}yf(Fd,gf);var Md=[];function jd(e,t,n,r){Array.isArray(n)||(n&&(Md[0]=n.toString()),n=Md);for(var i=0;i<n.length;i++){var a=ud(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Ud(e){Xf(e.g,(function(e,t){this.g.hasOwnProperty(t)&&hd(e)}),e),e.g={}}function Vd(){this.g=!0}function qd(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return bd(n)}catch(In){return t}}(e,n)+(r?" "+r:"")}))}Fd.prototype.N=function(){Fd.$.N.call(this),Ud(this)},Fd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Vd.prototype.Ea=function(){this.g=!1},Vd.prototype.info=function(){};var zd={},Bd=null;function Wd(){return Bd=Bd||new yd}function Kd(e){_f.call(this,zd.Ta,e)}function Hd(e){var t=Wd();gd(t,new Kd(t))}function Gd(e,t){_f.call(this,zd.STAT_EVENT,e),this.stat=t}function Qd(e){var t=Wd();gd(t,new Gd(t,e))}function $d(e,t){_f.call(this,zd.Ua,e),this.size=t}function Yd(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return uf.setTimeout((function(){e()}),t)}zd.Ta="serverreachability",yf(Kd,_f),zd.STAT_EVENT="statevent",yf(Gd,_f),zd.Ua="timingevent",yf($d,_f);var Jd={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Xd={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Zd(){}function ep(e){return e.h||(e.h=e.i())}function tp(){}Zd.prototype.h=null;var np,rp={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ip(){_f.call(this,"d")}function ap(){_f.call(this,"c")}function op(){}function up(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Fd(this),this.P=cp,e=Lf?125:void 0,this.V=new Pd(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new sp}function sp(){this.i=null,this.g="",this.h=!1}yf(ip,_f),yf(ap,_f),yf(op,Zd),op.prototype.g=function(){return new XMLHttpRequest},op.prototype.i=function(){return{}},np=new op;var cp=45e3,lp={},hp={};function fp(e,t,n){e.L=1,e.v=Pp(Tp(t)),e.s=n,e.S=!0,dp(e,null)}function dp(e,t){e.G=Date.now(),yp(e),e.A=Tp(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),Wp(n.i,"t",r),e.C=0,n=e.l.I,e.h=new sp,e.g=Kv(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Ld(vf(e.Pa,e,e.g),e.O)),jd(e.U,e.g,"readystatechange",e.nb),t=e.I?Zf(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Hd(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function pp(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function vp(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=mp(e,n))==hp){4==t&&(e.o=4,Qd(14),i=!1),qd(e.j,e.m,null,"[Incomplete Response]");break}if(r==lp){e.o=4,Qd(15),qd(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}qd(e.j,e.m,r,null),_p(e,r)}pp(e)&&r!=hp&&r!=lp&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Qd(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ca&&(e.ca=!0,(t=e.l).g==e&&t.ca&&!t.L&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Mv(t),t.L=!0,Qd(11))):(qd(e.j,e.m,n,"[Invalid Chunked Response]"),wp(e),bp(e))}function mp(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?hp:(n=Number(t.substring(n,r)),isNaN(n)?lp:(r+=1)+n>t.length?hp:(t=t.substr(r,n),e.C=r+n,t))}function yp(e){e.Y=Date.now()+e.P,gp(e,e.P)}function gp(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Yd(vf(e.lb,e),t)}function kp(e){e.B&&(uf.clearTimeout(e.B),e.B=null)}function bp(e){0==e.l.H||e.J||Vv(e.l,e)}function wp(e){kp(e);var t=e.M;t&&"function"==typeof t.ra&&t.ra(),e.M=null,Rd(e.V),Ud(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ra())}function _p(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Xp(n.h,e)))if(!e.K&&Xp(n.h,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Uv(n),Av(n)}Fv(n),Qd(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.M&&0==n.A&&!n.v&&(n.v=Yd(vf(n.ib,n),6e3));if(1>=Jp(n.h)&&n.na){try{n.na()}catch(a){}n.na=void 0}}else zv(n,11)}else if((e.K||n.g==e)&&Uv(n),!Sf(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.J=a[1],n.oa=a[2];var o=a[3];null!=o&&(n.qa=o,n.j.info("VER="+n.qa));var u=a[4];null!=u&&(n.Ga=u,n.j.info("SVER="+n.Ga));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.h;h.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(h.j=h.l,h.g=new Set,h.h&&(Zp(h,h.h),h.h=null))}if(r.F){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.Da=f,Np(r.G,r.F,f))}}n.H=3,n.l&&n.l.Ba(),n.ca&&(n.S=Date.now()-e.G,n.j.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=Wv(r,r.I?r.oa:null,r.Y),d.K){ev(r.h,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(kp(p),yp(p)),r.g=d}else Lv(r);0<n.i.length&&Pv(n)}else"stop"!=a[0]&&"close"!=a[0]||zv(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?zv(n,7):Cv(n):"noop"!=a[0]&&n.l&&n.l.Aa(a),n.A=0)}Hd()}catch(a){}}function xp(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(cf(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.sa&&"function"==typeof e.sa)return e.sa();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(cf(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(cf(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(nf=up.prototype).setTimeout=function(e){this.P=e},nf.nb=function(e){e=e.target;var t=this.M;t&&3==_v(e)?t.l():this.Pa(e)},nf.Pa=function(e){try{if(e==this.g)e:{var t=_v(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||Lf||this.g&&(this.h.h||this.g.ja()||xv(this.g)))){this.J||4!=t||7==n||Hd(),kp(this);var r=this.g.da();this.aa=r;t:if(pp(this)){var i=xv(this.g);e="";var a=i.length,o=4==_v(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){wp(this),bp(this);var u="";break t}this.h.i=new uf.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.ba&&!this.K){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Sf(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Qd(12),wp(this),bp(this);break e}qd(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_p(this,r)}this.S?(vp(this,t,u),Lf&&this.i&&3==t&&(jd(this.U,this.V,"tick",this.mb),this.V.start())):(qd(this.j,this.m,u,null),_p(this,u)),4==t&&wp(this),this.i&&!this.J&&(4==t?Vv(this.l,this):(this.i=!1,yp(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,Qd(12)):(this.o=0,Qd(13)),wp(this),bp(this)}}}catch(t){}},nf.mb=function(){if(this.g){var e=_v(this.g),t=this.g.ja();this.C<t.length&&(kp(this),vp(this,e,t),this.i&&4!=e&&yp(this))}},nf.cancel=function(){this.J=!0,wp(this)},nf.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(Hd(),Qd(17)),wp(this),this.o=2,bp(this)):gp(this,this.Y-e)};var Sp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ep(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Ep){this.h=void 0!==t?t:e.h,Ip(this,e.j),this.s=e.s,this.g=e.g,Cp(this,e.m),this.l=e.l,t=e.i;var n=new Vp;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Ap(this,n),this.o=e.o}else e&&(n=String(e).match(Sp))?(this.h=!!t,Ip(this,n[1]||"",!0),this.s=Rp(n[2]||""),this.g=Rp(n[3]||"",!0),Cp(this,n[4]),this.l=Rp(n[5]||"",!0),Ap(this,n[6]||"",!0),this.o=Rp(n[7]||"")):(this.h=!!t,this.i=new Vp(null,this.h))}function Tp(e){return new Ep(e)}function Ip(e,t,n){e.j=n?Rp(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Cp(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Ap(e,t,n){t instanceof Vp?(e.i=t,function(e,t){t&&!e.j&&(qp(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(zp(this,t),Wp(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Op(t,jp)),e.i=new Vp(t,e.h))}function Np(e,t,n){e.i.set(t,n)}function Pp(e){return Np(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Rp(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Op(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Dp),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Dp(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ep.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Op(t,Lp,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Op(t,Lp,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Op(n,"/"==n.charAt(0)?Mp:Fp,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Op(n,Up)),e.join("")};var Lp=/[#\/\?@]/g,Fp=/[#\?:]/g,Mp=/[#\?]/g,jp=/[#\?@]/g,Up=/#/g;function Vp(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function qp(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function zp(e,t){qp(e),t=Kp(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Bp(e,t){return qp(e),t=Kp(e,t),e.g.has(t)}function Wp(e,t,n){zp(e,t),0<n.length&&(e.i=null,e.g.set(Kp(e,t),bf(n)),e.h+=n.length)}function Kp(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(nf=Vp.prototype).add=function(e,t){qp(this),this.i=null,e=Kp(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},nf.forEach=function(e,t){qp(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},nf.sa=function(){qp(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},nf.Z=function(e){qp(this);var t=[];if("string"===typeof e)Bp(this,e)&&(t=t.concat(this.g.get(Kp(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},nf.set=function(e,t){return qp(this),this.i=null,Bp(this,e=Kp(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},nf.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},nf.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Hp=m((function e(t,n){f(this,e),this.h=t,this.g=n}));function Gp(e){this.l=e||$p,uf.PerformanceNavigationTiming?e=0<(e=uf.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(uf.g&&uf.g.Ka&&uf.g.Ka()&&uf.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Qp,$p=10;function Yp(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Jp(e){return e.h?1:e.g?e.g.size:0}function Xp(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Zp(e,t){e.g?e.g.add(t):e.h=t}function ev(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function tv(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=T(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return bf(e.i)}function nv(){}function rv(){this.g=new nv}function iv(e,t,n){var r=n||"";try{xp(e,(function(e,n){var i=e;lf(e)&&(i=bd(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function av(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(Sn){}}function ov(e){this.l=e.fc||null,this.j=e.ob||!1}function uv(e,t){yd.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=sv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Gp.prototype.cancel=function(){if(this.i=tv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=T(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},nv.prototype.stringify=function(e){return uf.JSON.stringify(e,void 0)},nv.prototype.parse=function(e){return uf.JSON.parse(e,void 0)},yf(ov,Zd),ov.prototype.g=function(){return new uv(this.l,this.j)},ov.prototype.i=(Qp={},function(){return Qp}),yf(uv,yd);var sv=0;function cv(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function lv(e){e.readyState=4,e.l=null,e.j=null,e.A=null,hv(e)}function hv(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(nf=uv.prototype).open=function(e,t){if(this.readyState!=sv)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,hv(this)},nf.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||uf).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},nf.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,lv(this)),this.readyState=sv},nf.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,hv(this)),this.g&&(this.readyState=3,hv(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof uf.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;cv(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},nf.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?lv(this):hv(this),3==this.readyState&&cv(this)}},nf.Za=function(e){this.g&&(this.response=this.responseText=e,lv(this))},nf.Ya=function(e){this.g&&(this.response=e,lv(this))},nf.ka=function(){this.g&&lv(this)},nf.setRequestHeader=function(e,t){this.v.append(e,t)},nf.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},nf.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(uv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var fv=uf.JSON.parse;function dv(e){yd.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=pv,this.L=this.M=!1}yf(dv,yd);var pv="",vv=/^https?$/i,mv=["POST","PUT"];function yv(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,gv(e),bv(e)}function gv(e){e.F||(e.F=!0,gd(e,"complete"),gd(e,"error"))}function kv(e){if(e.h&&"undefined"!=typeof of&&(!e.C[1]||4!=_v(e)||2!=e.da()))if(e.v&&4==_v(e))Od(e.La,0,e);else if(gd(e,"readystatechange"),4==_v(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(Sp)[1]||null;if(!a&&uf.self&&uf.self.location){var o=uf.self.location.protocol;a=o.substr(0,o.length-1)}i=!vv.test(a?a.toLowerCase():"")}t=i}if(t)gd(e,"complete"),gd(e,"success");else{e.m=6;try{var u=2<_v(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.da()+"]",gv(e)}}finally{bv(e)}}}function bv(e,t){if(e.g){wv(e);var n=e.g,r=e.C[0]?sf:null;e.g=null,e.C=null,t||gd(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function wv(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(uf.clearTimeout(e.A),e.A=null)}function _v(e){return e.g?e.g.readyState:0}function xv(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case pv:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(nt){return null}}function Sv(e){var t="";return Xf(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Ev(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Sv(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Np(e,t,n))}function Tv(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Iv(e){this.Ga=0,this.i=[],this.j=new Vd,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Tv("failFast",!1,e),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Tv("baseRetryDelayMs",5e3,e),this.hb=Tv("retryDelaySeedMs",1e4,e),this.eb=Tv("forwardChannelMaxRetries",2,e),this.xa=Tv("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.K=void 0,this.I=e&&e.supportsCrossDomainXhr||!1,this.J="",this.h=new Gp(e&&e.concurrentRequestLimit),this.Ja=new rv,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.j.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function Cv(e){if(Nv(e),3==e.H){var t=e.W++,n=Tp(e.G);Np(n,"SID",e.J),Np(n,"RID",t),Np(n,"TYPE","terminate"),Ov(e,n),(t=new up(e,e.j,t,void 0)).L=2,t.v=Pp(Tp(n)),n=!1,uf.navigator&&uf.navigator.sendBeacon&&(n=uf.navigator.sendBeacon(t.v.toString(),"")),!n&&uf.Image&&((new Image).src=t.v,n=!0),n||(t.g=Kv(t.l,null),t.g.ha(t.v)),t.G=Date.now(),yp(t)}Bv(e)}function Av(e){e.g&&(Mv(e),e.g.cancel(),e.g=null)}function Nv(e){Av(e),e.u&&(uf.clearTimeout(e.u),e.u=null),Uv(e),e.h.cancel(),e.m&&("number"===typeof e.m&&uf.clearTimeout(e.m),e.m=null)}function Pv(e){Yp(e.h)||e.m||(e.m=!0,Id(e.Na,e),e.C=0)}function Rv(e,t){var n;n=t?t.m:e.W++;var r=Tp(e.G);Np(r,"SID",e.J),Np(r,"RID",n),Np(r,"AID",e.V),Ov(e,r),e.o&&e.s&&Ev(r,e.o,e.s),n=new up(e,e.j,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.i=t.F.concat(e.i)),t=Dv(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Zp(e.h,n),fp(n,r,t)}function Ov(e,t){e.ma&&Xf(e.ma,(function(e,n){Np(t,n,e)})),e.l&&xp({},(function(e,n){Np(t,n,e)}))}function Dv(e,t,n){n=Math.min(e.i.length,n);var r=e.l?vf(e.l.Va,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{iv(l,o,"req"+c+"_")}catch(yt){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.F=e,r}function Lv(e){e.g||e.u||(e.ba=1,Id(e.Ma,e),e.A=0)}function Fv(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Yd(vf(e.Ma,e),qv(e,e.A)),e.A++,!0)}function Mv(e){null!=e.B&&(uf.clearTimeout(e.B),e.B=null)}function jv(e){e.g=new up(e,e.j,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Tp(e.wa);Np(t,"RID","rpc"),Np(t,"SID",e.J),Np(t,"CI",e.M?"0":"1"),Np(t,"AID",e.V),Np(t,"TYPE","xmlhttp"),Ov(e,t),e.o&&e.s&&Ev(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.oa,n.L=1,n.v=Pp(Tp(t)),n.s=null,n.S=!0,dp(n,e)}function Uv(e){null!=e.v&&(uf.clearTimeout(e.v),e.v=null)}function Vv(e,t){var n=null;if(e.g==t){Uv(e),Mv(e),e.g=null;var r=2}else{if(!Xp(e.h,t))return;n=t.F,ev(e.h,t),r=1}if(0!=e.H)if(e.ta=t.aa,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;gd(r=Wd(),new $d(r,n)),Pv(e)}else Lv(e);else if(3==(i=t.o)||0==i&&0<e.ta||!(1==r&&function(e,t){return!(Jp(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.F.concat(e.i),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Yd(vf(e.Na,e,t),qv(e,e.C)),e.C++,!0))}(e,t)||2==r&&Fv(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:zv(e,5);break;case 4:zv(e,10);break;case 3:zv(e,6);break;default:zv(e,2)}}function qv(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.l||(n*=2),n*t}function zv(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=vf(e.pb,e);n||(n=new Ep("//www.google.com/images/cleardot.gif"),uf.location&&"http"==uf.location.protocol||Ip(n,"https"),Pp(n)),function(e,t){var n=new Vd;if(uf.Image){var r=new Image;r.onload=mf(av,n,r,"TestLoadImage: loaded",!0,t),r.onerror=mf(av,n,r,"TestLoadImage: error",!1,t),r.onabort=mf(av,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=mf(av,n,r,"TestLoadImage: timeout",!1,t),uf.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Qd(2);e.H=0,e.l&&e.l.za(t),Bv(e),Nv(e)}function Bv(e){if(e.H=0,e.pa=[],e.l){var t=tv(e.h);0==t.length&&0==e.i.length||(wf(e.pa,t),wf(e.pa,e.i),e.h.i.length=0,bf(e.i),e.i.length=0),e.l.ya()}}function Wv(e,t,n){var r=n instanceof Ep?Tp(n):new Ep(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),Cp(r,r.m);else{var i=uf.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Ep(null,void 0);r&&Ip(a,r),t&&(a.g=t),i&&Cp(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&Np(r,n,t),Np(r,"VER",e.qa),Ov(e,r),r}function Kv(e,t,n){if(t&&!e.I)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new dv(new ov({ob:!0})):new dv(e.va)).Oa(e.I),t}function Hv(){}function Gv(){if(Of&&!(10<=Number(Kf)))throw Error("Environmental error: no available transport.")}function Qv(e,t){yd.call(this),this.g=new Iv(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Sf(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Sf(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Jv(this)}function $v(e){ip.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Yv(){ap.call(this),this.status=1}function Jv(e){this.g=e}function Xv(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Zv(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function em(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(nf=dv.prototype).Oa=function(e){this.M=e},nf.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():np.g(),this.C=this.u?ep(this.u):ep(np),this.g.onreadystatechange=vf(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(u){return void yv(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=T(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=uf.FormData&&e instanceof uf.FormData,!(0<=kf(mv,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,l=T(n);try{for(l.s();!(s=l.n()).done;){var h=c(s.value,2),f=h[0],d=h[1];this.g.setRequestHeader(f,d)}}catch(p){l.e(p)}finally{l.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{wv(this),0<this.B&&((this.L=function(e){return Of&&Nf(Bf,9,(function(){for(var e=0,t=Ef(String(Pf)).split("."),n=Ef("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Tf(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Tf(0==a[2].length,0==o[2].length)||Tf(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=vf(this.ua,this)):this.A=Od(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){yv(this,u)}},nf.ua=function(){"undefined"!=typeof of&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,gd(this,"timeout"),this.abort(8))},nf.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,gd(this,"complete"),gd(this,"abort"),bv(this))},nf.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),bv(this,!0)),dv.$.N.call(this)},nf.La=function(){this.s||(this.G||this.v||this.l?kv(this):this.kb())},nf.kb=function(){kv(this)},nf.da=function(){try{return 2<_v(this)?this.g.status:-1}catch(Qp){return-1}},nf.ja=function(){try{return this.g?this.g.responseText:""}catch(Qp){return""}},nf.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),fv(t)}},nf.Ia=function(){return this.m},nf.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(nf=Iv.prototype).qa=8,nf.H=1,nf.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new up(this,this.j,e,void 0),n=this.s;if(this.U&&(n?td(n=Zf(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Dv(this,t,r),Np(i=Tp(this.G),"RID",e),Np(i,"CVER",22),this.F&&Np(i,"X-HTTP-Session-Id",this.F),Ov(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(Sv(n)))+"&"+r:this.o&&Ev(i,this.o,n)),Zp(this.h,t),this.bb&&Np(i,"TYPE","init"),this.P?(Np(i,"$req",r),Np(i,"SID","null"),t.ba=!0,fp(t,i,null)):fp(t,i,r),this.H=2}}else 3==this.H&&(e?Rv(this,e):0==this.i.length||Yp(this.h)||Rv(this))},nf.Ma=function(){if(this.u=null,jv(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var e=2*this.S;this.j.info("BP detection timer enabled: "+e),this.B=Yd(vf(this.jb,this),e)}},nf.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,Qd(10),Av(this),jv(this))},nf.ib=function(){null!=this.v&&(this.v=null,Av(this),Fv(this),Qd(19))},nf.pb=function(e){e?(this.j.info("Successfully pinged google.com"),Qd(2)):(this.j.info("Failed to ping google.com"),Qd(1))},(nf=Hv.prototype).Ba=function(){},nf.Aa=function(){},nf.za=function(){},nf.ya=function(){},nf.Va=function(){},Gv.prototype.g=function(e,t){return new Qv(e,t)},yf(Qv,yd),Qv.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var e=this.g,t=this.l,n=this.h||void 0;Qd(0),e.Y=t,e.ma=n||{},e.M=e.aa,e.G=Wv(e,null,e.Y),Pv(e)},Qv.prototype.close=function(){Cv(this.g)},Qv.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=bd(e),e=n);t.i.push(new Hp(t.fb++,e)),3==t.H&&Pv(t)},Qv.prototype.N=function(){this.g.l=null,delete this.j,Cv(this.g),delete this.g,Qv.$.N.call(this)},yf($v,ip),yf(Yv,ap),yf(Jv,Hv),Jv.prototype.Ba=function(){gd(this.g,"a")},Jv.prototype.Aa=function(e){gd(this.g,new $v(e))},Jv.prototype.za=function(e){gd(this.g,new Yv)},Jv.prototype.ya=function(){gd(this.g,"b")},yf(Xv,(function(){this.blockSize=-1})),Xv.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Xv.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)Zv(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){Zv(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){Zv(this,r),i=0;break}}this.h=i,this.i+=t},Xv.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var tm={};function nm(e){return-128<=e&&128>e?Nf(tm,e,(function(e){return new em([0|e],0>e?-1:0)})):new em([0|e],0>e?-1:0)}function rm(e){if(isNaN(e)||!isFinite(e))return am;if(0>e)return lm(rm(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=im;return new em(t,0)}var im=4294967296,am=nm(0),om=nm(1),um=nm(16777216);function sm(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function cm(e){return-1==e.h}function lm(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new em(n,~e.h).add(om)}function hm(e,t){return e.add(lm(t))}function fm(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function dm(e,t){this.g=e,this.h=t}function pm(e,t){if(sm(t))throw Error("division by zero");if(sm(e))return new dm(am,am);if(cm(e))return t=pm(lm(e),t),new dm(lm(t.g),lm(t.h));if(cm(t))return t=pm(e,lm(t)),new dm(lm(t.g),t.h);if(30<e.g.length){if(cm(e)||cm(t))throw Error("slowDivide_ only works with positive integers.");for(var n=om,r=t;0>=r.X(e);)n=vm(n),r=vm(r);var i=mm(n,1),a=mm(r,1);for(r=mm(r,2),n=mm(n,2);!sm(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=mm(r,1),n=mm(n,1)}return t=hm(e,i.R(t)),new dm(i,t)}for(i=am;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=rm(n)).R(t);cm(o)||0<o.X(e);)o=(a=rm(n-=r)).R(t);sm(a)&&(a=om),i=i.add(a),e=hm(e,o)}return new dm(i,e)}function vm(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new em(n,e.h)}function mm(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new em(i,e.h)}(nf=em.prototype).ea=function(){if(cm(this))return-lm(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:im+r)*t,t*=im}return e},nf.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(sm(this))return"0";if(cm(this))return"-"+lm(this).toString(e);for(var t=rm(Math.pow(e,6)),n=this,r="";;){var i=pm(n,t).g,a=((0<(n=hm(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(sm(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},nf.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},nf.X=function(e){return cm(e=hm(this,e))?-1:sm(e)?0:1},nf.abs=function(){return cm(this)?lm(this):this},nf.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new em(n,-2147483648&n[n.length-1]?-1:0)},nf.R=function(e){if(sm(this)||sm(e))return am;if(cm(this))return cm(e)?lm(this).R(lm(e)):lm(lm(this).R(e));if(cm(e))return lm(this.R(lm(e)));if(0>this.X(um)&&0>e.X(um))return rm(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),u=e.D(i)>>>16,s=65535&e.D(i);n[2*r+2*i]+=o*s,fm(n,2*r+2*i),n[2*r+2*i+1]+=a*s,fm(n,2*r+2*i+1),n[2*r+2*i+1]+=o*u,fm(n,2*r+2*i+1),n[2*r+2*i+2]+=a*u,fm(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new em(n,0)},nf.gb=function(e){return pm(this,e).h},nf.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new em(n,this.h&e.h)},nf.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new em(n,this.h|e.h)},nf.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new em(n,this.h^e.h)},Gv.prototype.createWebChannel=Gv.prototype.g,Qv.prototype.send=Qv.prototype.u,Qv.prototype.open=Qv.prototype.m,Qv.prototype.close=Qv.prototype.close,Jd.NO_ERROR=0,Jd.TIMEOUT=8,Jd.HTTP_ERROR=6,Xd.COMPLETE="complete",tp.EventType=rp,rp.OPEN="a",rp.CLOSE="b",rp.ERROR="c",rp.MESSAGE="d",yd.prototype.listen=yd.prototype.O,dv.prototype.listenOnce=dv.prototype.P,dv.prototype.getLastError=dv.prototype.Sa,dv.prototype.getLastErrorCode=dv.prototype.Ia,dv.prototype.getStatus=dv.prototype.da,dv.prototype.getResponseJson=dv.prototype.Wa,dv.prototype.getResponseText=dv.prototype.ja,dv.prototype.send=dv.prototype.ha,dv.prototype.setWithCredentials=dv.prototype.Oa,Xv.prototype.digest=Xv.prototype.l,Xv.prototype.reset=Xv.prototype.reset,Xv.prototype.update=Xv.prototype.j,em.prototype.add=em.prototype.add,em.prototype.multiply=em.prototype.R,em.prototype.modulo=em.prototype.gb,em.prototype.compare=em.prototype.X,em.prototype.toNumber=em.prototype.ea,em.prototype.toString=em.prototype.toString,em.prototype.getBits=em.prototype.D,em.fromNumber=rm,em.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return lm(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=rm(Math.pow(n,8)),i=am,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+o),n);8>o?(o=rm(Math.pow(n,o)),i=i.R(o).add(rm(u))):i=(i=i.R(r)).add(rm(u))}return i};var ym=af.createWebChannelTransport=function(){return new Gv},gm=af.getStatEventTarget=function(){return Wd()},km=af.ErrorCode=Jd,bm=af.EventType=Xd,wm=af.Event=zd,_m=af.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},xm=af.FetchXmlHttpFactory=ov,Sm=af.WebChannel=tp,Em=af.XhrIo=dv,Tm=af.Md5=Xv,Im=af.Integer=em,Cm="@firebase/firestore",Am=function(){function e(t){f(this,e),this.uid=t}return m(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Am.UNAUTHENTICATED=new Am(null),Am.GOOGLE_CREDENTIALS=new Am("google-credentials-uid"),Am.FIRST_PARTY=new Am("first-party-uid"),Am.MOCK_USER=new Am("mock-user");var Nm="9.22.0",Pm=new ei("@firebase/firestore");function Rm(){return Pm.logLevel}function Om(e){if(Pm.logLevel<=Gr.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Fm);Pm.debug.apply(Pm,["Firestore (".concat(Nm,"): ").concat(e)].concat(h(i)))}}function Dm(e){if(Pm.logLevel<=Gr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Fm);Pm.error.apply(Pm,["Firestore (".concat(Nm,"): ").concat(e)].concat(h(i)))}}function Lm(e){if(Pm.logLevel<=Gr.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Fm);Pm.warn.apply(Pm,["Firestore (".concat(Nm,"): ").concat(e)].concat(h(i)))}}function Fm(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Mm(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Nm,") INTERNAL ASSERTION FAILED: ")+e;throw Dm(t),new Error(t)}function jm(e,t){e||Mm()}function Um(e,t){return e}var Vm={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},qm=function(e){g(n,e);var t=_(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return m(n)}(gr),zm=m((function e(){var t=this;f(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Bm=m((function e(t,n){f(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Wm=function(){function e(){f(this,e)}return m(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Am.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Km=function(){function e(t){f(this,e),this.token=t,this.changeListener=null}return m(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Hm=function(){function e(t){f(this,e),this.t=t,this.currentUser=Am.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return m(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new zm;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new zm,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Kn(Bn().mark((function e(){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Om("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Om("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new zm)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Om("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(jm("string"==typeof n.accessToken),new Bm(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return jm(null===e||"string"==typeof e),new Am(e)}}]),e}(),Gm=function(){function e(t,n,r){f(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=Am.FIRST_PARTY,this.g=new Map}return m(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),Qm=function(){function e(t,n,r){f(this,e),this.h=t,this.l=n,this.m=r}return m(e,[{key:"getToken",value:function(){return Promise.resolve(new Gm(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Am.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),$m=m((function e(t){f(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Ym=function(){function e(t){f(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return m(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Om("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,Om("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Om("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?i(e):Om("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(jm("string"==typeof t.token),e.T=t.token,new $m(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Jm(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Xm=function(){function e(){f(this,e)}return m(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=Jm(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function Zm(e,t){return e<t?-1:e>t?1:0}function ey(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function ty(e){return e+"\0"}var ny=function(){function e(t,n){if(f(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new qm(Vm.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new qm(Vm.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new qm(Vm.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new qm(Vm.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return m(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Zm(this.nanoseconds,e.nanoseconds):Zm(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),ry=function(){function e(t){f(this,e),this.timestamp=t}return m(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new ny(0,0))}},{key:"max",value:function(){return new e(new ny(253402300799,999999999))}}]),e}(),iy=function(){function e(t,n,r){f(this,e),void 0===n?n=0:n>t.length&&Mm(),void 0===r?r=t.length-n:r>t.length-n&&Mm(),this.segments=t,this.offset=n,this.len=r}return m(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),ay=function(e){g(n,e);var t=_(n);function n(){return f(this,n),t.apply(this,arguments)}return m(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new qm(Vm.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,h(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(iy),oy=/^[_a-zA-Z][_a-zA-Z0-9]*$/,uy=function(e){g(n,e);var t=_(n);function n(){return f(this,n),t.apply(this,arguments)}return m(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return oy.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new qm(Vm.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new qm(Vm.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new qm(Vm.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new qm(Vm.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(iy),sy=function(){function e(t){f(this,e),this.path=t}return m(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===ay.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(ay.fromString(t))}},{key:"fromName",value:function(t){return new e(ay.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(ay.emptyPath())}},{key:"comparator",value:function(e,t){return ay.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new ay(t.slice()))}}]),e}(),cy=m((function e(t,n,r,i){f(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function ly(e){return e.fields.find((function(e){return 2===e.kind}))}function hy(e){return e.fields.filter((function(e){return 2!==e.kind}))}cy.UNKNOWN_ID=-1;var fy=m((function e(t,n){f(this,e),this.fieldPath=t,this.kind=n}));var dy=function(){function e(t,n){f(this,e),this.sequenceNumber=t,this.offset=n}return m(e,null,[{key:"empty",value:function(){return new e(0,my.min())}}]),e}();function py(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ry.fromTimestamp(1e9===r?new ny(n+1,0):new ny(n,r));return new my(i,sy.empty(),t)}function vy(e){return new my(e.readTime,e.key,-1)}var my=function(){function e(t,n,r){f(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return m(e,null,[{key:"min",value:function(){return new e(ry.min(),sy.empty(),-1)}},{key:"max",value:function(){return new e(ry.max(),sy.empty(),-1)}}]),e}();function yy(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=sy.comparator(e.documentKey,t.documentKey))?n:Zm(e.largestBatchId,t.largestBatchId)}var gy="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ky=function(){function e(){f(this,e),this.onCommittedListeners=[]}return m(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function by(e){return wy.apply(this,arguments)}function wy(){return(wy=Kn(Bn().mark((function e(t){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Vm.FAILED_PRECONDITION&&t.message===gy){e.next=2;break}throw t;case 2:Om("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _y=function(){function e(t){var n=this;f(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return m(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Mm(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=T(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),xy=function(){function e(t,n){var r=this;f(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.v=new zm,this.transaction.oncomplete=function(){r.v.resolve()},this.transaction.onabort=function(){n.error?r.v.reject(new Ty(t,n.error)):r.v.resolve()},this.transaction.onerror=function(e){var n=Py(e.target.error);r.v.reject(new Ty(t,n))}}return m(e,[{key:"R",get:function(){return this.v.promise}},{key:"abort",value:function(e){e&&this.v.reject(e),this.aborted||(Om("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"P",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Cy(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Ty(n,t)}}}]),e}(),Sy=function(){function e(t,n,r){f(this,e),this.name=t,this.version=n,this.V=r,12.2===e.S(lr())&&Dm("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return m(e,[{key:"$",value:function(){var e=Kn(Bn().mark((function e(t){var n=this;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Om("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Ty(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new qm(Vm.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new qm(Vm.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Ty(t,n))},i.onupgradeneeded=function(e){Om("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.V.O(t,i.transaction,e.oldVersion,n.version).next((function(){Om("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.F&&(this.db.onversionchange=function(e){return n.F(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"B",value:function(e){this.F=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Kn(Bn().mark((function e(t,n,r,i){var a,o,u,s,c=this;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=Bn().mark((function e(){var n,u,s,l;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.$(t);case 4:return c.db=e.sent,n=xy.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.P(),e})).catch((function(e){return n.abort(e),_y.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.R;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,l="FirebaseError"!==s.name&&o<3,Om("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if("object"!==typeof(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Om("SimpleDb","Removing database:",e),Ay(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!yr())return!1;if(e.C())return!0;var t=lr(),n=e.S(t),r=0<n&&n<10,i=e.N(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/Cacarrot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"N",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Ey=function(){function e(t){f(this,e),this.L=t,this.q=!1,this.U=null}return m(e,[{key:"isDone",get:function(){return this.q}},{key:"K",get:function(){return this.U}},{key:"cursor",set:function(e){this.L=e}},{key:"done",value:function(){this.q=!0}},{key:"G",value:function(e){this.U=e}},{key:"delete",value:function(){return Ay(this.L.delete())}}]),e}(),Ty=function(e){g(n,e);var t=_(n);function n(e,r){var i;return f(this,n),(i=t.call(this,Vm.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return m(n)}(qm);function Iy(e){return"IndexedDbTransactionError"===e.name}var Cy=function(){function e(t){f(this,e),this.store=t}return m(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Om("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Om("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ay(n)}},{key:"add",value:function(e){return Om("SimpleDb","ADD",this.store.name,e,e),Ay(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Ay(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Om("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Om("SimpleDb","DELETE",this.store.name,e),Ay(this.store.delete(e))}},{key:"count",value:function(){return Om("SimpleDb","COUNT",this.store.name),Ay(this.store.count())}},{key:"j",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.W(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new _y((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new _y((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){Om("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.W(r,(function(e,t,n){return n.delete()}))}},{key:"X",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.W(r,t)}},{key:"Z",value:function(e){var t=this.cursor({});return new _y((function(n,r){t.onerror=function(e){var t=Py(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"W",value:function(e,t){var n=[];return new _y((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Ey(i),o=t(i.primaryKey,i.value,a);if(o instanceof _y){var u=o.catch((function(e){return a.done(),_y.reject(e)}));n.push(u)}a.isDone?r():null===a.K?i.continue():i.continue(a.K)}else r()}})).next((function(){return _y.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Ay(e){return new _y((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Py(e.target.error);n(t)}}))}var Ny=!1;function Py(e){var t=Sy.S(lr());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new qm("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Ny||(Ny=!0,setTimeout((function(){throw r}),0)),r}}return e}var Ry=function(){function e(t,n){f(this,e),this.asyncQueue=t,this.tt=n,this.task=null}return m(e,[{key:"start",value:function(){this.et(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"et",value:function(e){var t=this;Om("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,Kn(Bn().mark((function e(){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=Om,e.t1="Documents written: ",e.next=6,t.tt.nt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Iy(e.t4)){e.next=17;break}Om("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,by(e.t4);case 19:return e.next=21,t.et(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),Oy=function(){function e(t,n){f(this,e),this.localStore=t,this.persistence=n}return m(e,[{key:"nt",value:function(){var e=Kn(Bn().mark((function e(){var t,n=this,r=arguments;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.st(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"st",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return _y.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return Om("IndexBackiller","Processing collection: ".concat(t)),n.it(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"it",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.rt(i,n)})).next((function(n){return Om("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"rt",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=vy(t);yy(r,n)>0&&(n=r)})),new my(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Dy=function(){function e(t,n){var r=this;f(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return m(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function Ly(e){return null==e}function Fy(e){return 0===e&&1/e==-1/0}function My(e){return"number"==typeof e&&Number.isInteger(e)&&!Fy(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function jy(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Vy(t)),t=Uy(e.get(n),t);return Vy(t)}function Uy(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Vy(e){return e+"\x01\x01"}function qy(e){var t=e.length;if(jm(t>=2),2===t)return jm("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),ay.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Mm(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Mm()}a=o+2}return new ay(r)}Dy.ct=-1;var zy=["userId","batchId"];function By(e,t){return[e,jy(t)]}function Wy(e,t,n){return[e,jy(t),n]}var Ky={},Hy=["prefixPath","collectionGroup","readTime","documentId"],Gy=["prefixPath","collectionGroup","documentId"],Qy=["collectionGroup","readTime","prefixPath","documentId"],$y=["canonicalId","targetId"],Yy=["targetId","path"],Jy=["path","targetId"],Xy=["collectionId","parent"],Zy=["indexId","uid"],eg=["uid","sequenceNumber"],tg=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ng=["indexId","uid","orderedDocumentKey"],rg=["userId","collectionPath","documentId"],ig=["userId","collectionPath","largestBatchId"],ag=["userId","collectionGroup","largestBatchId"],og=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),ug=[].concat(h(og),["documentOverlays"]),sg=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],cg=sg,lg=[].concat(cg,["indexConfiguration","indexState","indexEntries"]),hg=function(e){g(n,e);var t=_(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).ht=e,i.currentSequenceNumber=r,i}return m(n)}(ky);function fg(e,t){var n=Um(e);return Sy.M(n.ht,t)}function dg(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function pg(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function vg(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var mg=function(){function e(t,n){f(this,e),this.comparator=t,this.root=n||gg.EMPTY}return m(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,gg.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,gg.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new yg(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new yg(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new yg(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new yg(this.root,e,this.comparator,!0)}}]),e}(),yg=function(){function e(t,n,r,i){f(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return m(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),gg=function(){function e(t,n,r,i,a){f(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return m(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Mm();if(this.right.isRed())throw Mm();var e=this.left.check();if(e!==this.right.check())throw Mm();return e+(this.isRed()?0:1)}}]),e}();gg.EMPTY=null,gg.RED=!0,gg.BLACK=!1,gg.EMPTY=new(function(){function e(){f(this,e),this.size=0}return m(e,[{key:"key",get:function(){throw Mm()}},{key:"value",get:function(){throw Mm()}},{key:"color",get:function(){throw Mm()}},{key:"left",get:function(){throw Mm()}},{key:"right",get:function(){throw Mm()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new gg(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var kg=function(){function e(t){f(this,e),this.comparator=t,this.data=new mg(this.comparator)}return m(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new bg(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new bg(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),bg=function(){function e(t){f(this,e),this.iter=t}return m(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function wg(e){return e.hasNext()?e.getNext():void 0}var _g=function(){function e(t){f(this,e),this.fields=t,t.sort(uy.comparator)}return m(e,[{key:"unionWith",value:function(t){var n,r=new kg(uy.comparator),i=T(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=T(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=T(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return ey(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),xg=function(e){g(n,e);var t=_(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return m(n)}(S(Error));var Sg=function(e){function t(e){f(this,t),this.binaryString=e}return m(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Zm(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new xg("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Sg.EMPTY_BYTE_STRING=new Sg("");var Eg=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tg(e){if(jm(!!e),"string"==typeof e){var t=0,n=Eg.exec(e);if(jm(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ig(e.seconds),nanos:Ig(e.nanos)}}function Ig(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Cg(e){return"string"==typeof e?Sg.fromBase64String(e):Sg.fromUint8Array(e)}function Ag(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ng(e){var t=e.mapValue.fields.__previous_value__;return Ag(t)?Ng(t):t}function Pg(e){var t=Tg(e.mapValue.fields.__local_write_time__.timestampValue);return new ny(t.seconds,t.nanos)}var Rg=m((function e(t,n,r,i,a,o,u,s,c){f(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=s,this.useFetchStreams=c})),Og=function(){function e(t,n){f(this,e),this.projectId=t,this.database=n||"(default)"}return m(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),Dg={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Lg={nullValue:"NULL_VALUE"};function Fg(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ag(e)?4:Yg(e)?9007199254740991:10:Mm()}function Mg(e,t){if(e===t)return!0;var n=Fg(e);if(n!==Fg(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Pg(e).isEqual(Pg(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Tg(e.timestampValue),r=Tg(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Cg(e.bytesValue).isEqual(Cg(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ig(e.geoPointValue.latitude)===Ig(t.geoPointValue.latitude)&&Ig(e.geoPointValue.longitude)===Ig(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ig(e.integerValue)===Ig(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Ig(e.doubleValue),r=Ig(t.doubleValue);return n===r?Fy(n)===Fy(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ey(e.arrayValue.values||[],t.arrayValue.values||[],Mg);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(dg(n)!==dg(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Mg(n[i],r[i])))return!1;return!0}(e,t);default:return Mm()}}function jg(e,t){return void 0!==(e.values||[]).find((function(e){return Mg(e,t)}))}function Ug(e,t){if(e===t)return 0;var n=Fg(e),r=Fg(t);if(n!==r)return Zm(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Zm(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Ig(e.integerValue||e.doubleValue),r=Ig(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Vg(e.timestampValue,t.timestampValue);case 4:return Vg(Pg(e),Pg(t));case 5:return Zm(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Cg(e),r=Cg(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Zm(n[i],r[i]);if(0!==a)return a}return Zm(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Zm(Ig(e.latitude),Ig(t.latitude));return 0!==n?n:Zm(Ig(e.longitude),Ig(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Ug(n[i],r[i]);if(a)return a}return Zm(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Dg.mapValue&&t===Dg.mapValue)return 0;if(e===Dg.mapValue)return 1;if(t===Dg.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Zm(r[o],a[o]);if(0!==u)return u;var s=Ug(n[r[o]],i[a[o]]);if(0!==s)return s}return Zm(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Mm()}}function Vg(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Zm(e,t);var n=Tg(e),r=Tg(t),i=Zm(n.seconds,r.seconds);return 0!==i?i:Zm(n.nanos,r.nanos)}function qg(e){return zg(e)}function zg(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Tg(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Cg(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,sy.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=T(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=zg(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=T(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(zg(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Mm();var t,n}function Bg(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Wg(e){return!!e&&"integerValue"in e}function Kg(e){return!!e&&"arrayValue"in e}function Hg(e){return!!e&&"nullValue"in e}function Gg(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Qg(e){return!!e&&"mapValue"in e}function $g(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return pg(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=$g(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=$g(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Yg(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Jg(e){return"nullValue"in e?Lg:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Bg(Og.empty(),sy.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Mm()}function Xg(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Bg(Og.empty(),sy.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Dg:Mm()}function Zg(e,t){var n=Ug(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function ek(e,t){var n=Ug(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var tk=function(){function e(t){f(this,e),this.value=t}return m(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Qg(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$g(t)}},{key:"setAll",value:function(e){var t=this,n=uy.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=$g(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Qg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Mg(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Qg(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){pg(t,(function(t,n){return e[t]=n}));var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e($g(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function nk(e){var t=[];return pg(e.fields,(function(e,n){var r=new uy([e]);if(Qg(n)){var i=nk(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=T(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new _g(t)}var rk=function(){function e(t,n,r,i,a,o,u){f(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return m(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(ry.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=tk.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=tk.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=ry.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,ry.min(),ry.min(),ry.min(),tk.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,ry.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,ry.min(),ry.min(),tk.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,ry.min(),ry.min(),tk.empty(),2)}}]),e}(),ik=m((function e(t,n){f(this,e),this.position=t,this.inclusive=n}));function ak(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?sy.comparator(sy.fromName(o.referenceValue),n.key):Ug(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function ok(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Mg(e.position[n],t.position[n]))return!1;return!0}var uk=m((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";f(this,e),this.field=t,this.dir=n}));function sk(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var ck=m((function e(){f(this,e)})),lk=function(e){g(n,e);var t=_(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return m(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ug(t,this.value)):null!==t&&Fg(this.value)===Fg(t)&&this.matchesComparison(Ug(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Mm()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new bk(e,t,r):"array-contains"===t?new Sk(e,r):"in"===t?new Ek(e,r):"not-in"===t?new Tk(e,r):"array-contains-any"===t?new Ik(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new wk(e,n):new _k(e,n)}}]),n}(ck),hk=function(e){g(n,e);var t=_(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).filters=e,i.op=r,i.lt=null,i}return m(n,[{key:"matches",value:function(e){return fk(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.lt||(this.lt=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.lt}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.ft((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"ft",value:function(e){var t,n=T(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(ck);function fk(e){return"and"===e.op}function dk(e){return"or"===e.op}function pk(e){return vk(e)&&fk(e)}function vk(e){var t,n=T(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof hk)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function mk(e){if(e instanceof lk)return e.field.canonicalString()+e.op.toString()+qg(e.value);if(pk(e))return e.filters.map((function(e){return mk(e)})).join(",");var t=e.filters.map((function(e){return mk(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function yk(e,t){return e instanceof lk?function(e,t){return t instanceof lk&&e.op===t.op&&e.field.isEqual(t.field)&&Mg(e.value,t.value)}(e,t):e instanceof hk?function(e,t){return t instanceof hk&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&yk(n,t.filters[r])}),!0)}(e,t):void Mm()}function gk(e,t){var n=e.filters.concat(t);return hk.create(n,e.op)}function kk(e){return e instanceof lk?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(qg(e.value))}(e):e instanceof hk?function(e){return e.op.toString()+" {"+e.getFilters().map(kk).join(" ,")+"}"}(e):"Filter"}var bk=function(e){g(n,e);var t=_(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,e,r,i)).key=sy.fromName(i.referenceValue),a}return m(n,[{key:"matches",value:function(e){var t=sy.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(lk),wk=function(e){g(n,e);var t=_(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,"in",r)).keys=xk("in",r),i}return m(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(lk),_k=function(e){g(n,e);var t=_(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,"not-in",r)).keys=xk("not-in",r),i}return m(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(lk);function xk(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return sy.fromName(e.referenceValue)}))}var Sk=function(e){g(n,e);var t=_(n);function n(e,r){return f(this,n),t.call(this,e,"array-contains",r)}return m(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Kg(t)&&jg(t.arrayValue,this.value)}}]),n}(lk),Ek=function(e){g(n,e);var t=_(n);function n(e,r){return f(this,n),t.call(this,e,"in",r)}return m(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&jg(this.value.arrayValue,t)}}]),n}(lk),Tk=function(e){g(n,e);var t=_(n);function n(e,r){return f(this,n),t.call(this,e,"not-in",r)}return m(n,[{key:"matches",value:function(e){if(jg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!jg(this.value.arrayValue,t)}}]),n}(lk),Ik=function(e){g(n,e);var t=_(n);function n(e,r){return f(this,n),t.call(this,e,"array-contains-any",r)}return m(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Kg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return jg(t.value.arrayValue,e)}))}}]),n}(lk),Ck=m((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;f(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.dt=null}));function Ak(e){return new Ck(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Nk(e){var t=Um(e);if(null===t.dt){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return mk(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Ly(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return qg(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return qg(e)})).join(",")),t.dt=n}return t.dt}function Pk(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!sk(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!yk(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ok(e.startAt,t.startAt)&&ok(e.endAt,t.endAt)}function Rk(e){return sy.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Ok(e,t){return e.filters.filter((function(e){return e instanceof lk&&e.field.isEqual(t)}))}function Dk(e,t,n){var r,i=Lg,a=!0,o=T(Ok(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Lg,c=!0;switch(u.op){case"<":case"<=":s=Jg(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Lg}Zg({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];Zg({value:i,inclusive:a},{value:h,inclusive:n.inclusive})<0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}function Lk(e,t,n){var r,i=Dg,a=!0,o=T(Ok(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Dg,c=!0;switch(u.op){case">=":case">":s=Xg(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Dg}ek({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];ek({value:i,inclusive:a},{value:h,inclusive:n.inclusive})>0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}var Fk=m((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;f(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.wt=null,this._t=null,this.startAt,this.endAt}));function Mk(e,t,n,r,i,a,o,u){return new Fk(e,t,n,r,i,a,o,u)}function jk(e){return new Fk(e)}function Uk(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Vk(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function qk(e){var t,n=T(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function zk(e){return null!==e.collectionGroup}function Bk(e){var t=Um(e);if(null===t.wt){t.wt=[];var n=qk(t),r=Vk(t);if(null!==n&&null===r)n.isKeyField()||t.wt.push(new uk(n)),t.wt.push(new uk(uy.keyField(),"asc"));else{var i,a=!1,o=T(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.wt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new uk(uy.keyField(),s))}}}return t.wt}function Wk(e){var t=Um(e);if(!t._t)if("F"===t.limitType)t._t=Ak(t.path,t.collectionGroup,Bk(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=T(Bk(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new uk(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new ik(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new ik(t.startAt.position,t.startAt.inclusive):null;t._t=Ak(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t._t}function Kk(e,t){t.getFirstInequalityField(),qk(e);var n=e.filters.concat([t]);return new Fk(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Hk(e,t,n){return new Fk(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Gk(e,t){return Pk(Wk(e),Wk(t))&&e.limitType===t.limitType}function Qk(e){return"".concat(Nk(Wk(e)),"|lt:").concat(e.limitType)}function $k(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return kk(e)})).join(", "),"]")),Ly(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return qg(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return qg(e)})).join(",")),"Target(".concat(t,")")}(Wk(e)),"; limitType=").concat(e.limitType,")")}function Yk(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):sy.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=T(Bk(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=T(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=ak(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Bk(e),t))&&!(e.endAt&&!function(e,t,n){var r=ak(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Bk(e),t))}(e,t)}function Jk(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Xk(e){return function(t,n){var r,i=!1,a=T(Bk(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Zk(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Zk(e,t,n){var r=e.field.isKeyField()?sy.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Ug(r,i):Mm()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Mm()}}var eb=function(){function e(t,n){f(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return m(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){pg(this.inner,(function(t,n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return vg(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),tb=new mg(sy.comparator);function nb(){return tb}var rb=new mg(sy.comparator);function ib(){for(var e=rb,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function ab(e){var t=rb;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function ob(){return sb()}function ub(){return sb()}function sb(){return new eb((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var cb=new mg(sy.comparator),lb=new kg(sy.comparator);function hb(){for(var e=lb,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var fb=new kg(Zm);function db(){return fb}function pb(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fy(t)?"-0":t}}function vb(e){return{integerValue:""+e}}function mb(e,t){return My(t)?vb(t):pb(e,t)}var yb=m((function e(){f(this,e),this._=void 0}));function gb(e,t,n){return e instanceof wb?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Ag(t)&&(t=Ng(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof _b?xb(e,t):e instanceof Sb?Eb(e,t):function(e,t){var n=bb(e,t),r=Ib(n)+Ib(e.gt);return Wg(n)&&Wg(e.gt)?vb(r):pb(e.serializer,r)}(e,t)}function kb(e,t,n){return e instanceof _b?xb(e,t):e instanceof Sb?Eb(e,t):n}function bb(e,t){return e instanceof Tb?Wg(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var wb=function(e){g(n,e);var t=_(n);function n(){return f(this,n),t.apply(this,arguments)}return m(n)}(yb),_b=function(e){g(n,e);var t=_(n);function n(e){var r;return f(this,n),(r=t.call(this)).elements=e,r}return m(n)}(yb);function xb(e,t){var n,r=Cb(t),i=T(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Mg(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Sb=function(e){g(n,e);var t=_(n);function n(e){var r;return f(this,n),(r=t.call(this)).elements=e,r}return m(n)}(yb);function Eb(e,t){var n,r=Cb(t),i=T(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Mg(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Tb=function(e){g(n,e);var t=_(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).serializer=e,i.gt=r,i}return m(n)}(yb);function Ib(e){return Ig(e.integerValue||e.doubleValue)}function Cb(e){return Kg(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Ab=m((function e(t,n){f(this,e),this.field=t,this.transform=n}));var Nb=m((function e(t,n){f(this,e),this.version=t,this.transformResults=n})),Pb=function(){function e(t,n){f(this,e),this.updateTime=t,this.exists=n}return m(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Rb(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Ob=m((function e(){f(this,e)}));function Db(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Hb(e.key,Pb.none()):new Ub(e.key,e.data,Pb.none());var n,r=e.data,i=tk.empty(),a=new kg(uy.comparator),o=T(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new Vb(e.key,i,new _g(a.toArray()),Pb.none())}function Lb(e,t,n){e instanceof Ub?function(e,t,n){var r=e.value.clone(),i=zb(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Vb?function(e,t,n){if(Rb(e.precondition,t)){var r=zb(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(qb(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Fb(e,t,n,r){return e instanceof Ub?function(e,t,n,r){if(!Rb(e.precondition,t))return n;var i=e.value.clone(),a=Bb(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Vb?function(e,t,n,r){if(!Rb(e.precondition,t))return n;var i=Bb(e.fieldTransforms,r,t),a=t.data;return a.setAll(qb(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Rb(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Mb(e,t){var n,r=null,i=T(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=bb(a.transform,o||null);null!=u&&(null===r&&(r=tk.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function jb(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ey(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof _b&&t instanceof _b||e instanceof Sb&&t instanceof Sb?ey(e.elements,t.elements,Mg):e instanceof Tb&&t instanceof Tb?Mg(e.gt,t.gt):e instanceof wb&&t instanceof wb}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Ub=function(e){g(n,e);var t=_(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return f(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return m(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Ob),Vb=function(e){g(n,e);var t=_(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return f(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return m(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Ob);function qb(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function zb(e,t,n){var r=new Map;jm(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,kb(o,u,n[i]))}return r}function Bb(e,t,n){var r,i=new Map,a=T(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,gb(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Wb,Kb,Hb=function(e){g(n,e);var t=_(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return m(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Ob),Gb=function(e){g(n,e);var t=_(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return m(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Ob),Qb=function(){function e(t,n,r,i){f(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return m(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Lb(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=T(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Fb(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=T(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=Fb(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=ub();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=Db(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(ry.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),hb())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&ey(this.mutations,e.mutations,(function(e,t){return jb(e,t)}))&&ey(this.baseMutations,e.baseMutations,(function(e,t){return jb(e,t)}))}}]),e}(),$b=function(){function e(t,n,r,i){f(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return m(e,null,[{key:"from",value:function(t,n,r){jm(t.mutations.length===r.length);for(var i=cb,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Yb=function(){function e(t,n){f(this,e),this.largestBatchId=t,this.mutation=n}return m(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Jb=m((function e(t,n){f(this,e),this.count=t,this.unchangedNames=n}));function Xb(e){switch(e){default:return Mm();case Vm.CANCELLED:case Vm.UNKNOWN:case Vm.DEADLINE_EXCEEDED:case Vm.RESOURCE_EXHAUSTED:case Vm.INTERNAL:case Vm.UNAVAILABLE:case Vm.UNAUTHENTICATED:return!1;case Vm.INVALID_ARGUMENT:case Vm.NOT_FOUND:case Vm.ALREADY_EXISTS:case Vm.PERMISSION_DENIED:case Vm.FAILED_PRECONDITION:case Vm.ABORTED:case Vm.OUT_OF_RANGE:case Vm.UNIMPLEMENTED:case Vm.DATA_LOSS:return!0}}function Zb(e){if(void 0===e)return Dm("GRPC error has no .code"),Vm.UNKNOWN;switch(e){case Wb.OK:return Vm.OK;case Wb.CANCELLED:return Vm.CANCELLED;case Wb.UNKNOWN:return Vm.UNKNOWN;case Wb.DEADLINE_EXCEEDED:return Vm.DEADLINE_EXCEEDED;case Wb.RESOURCE_EXHAUSTED:return Vm.RESOURCE_EXHAUSTED;case Wb.INTERNAL:return Vm.INTERNAL;case Wb.UNAVAILABLE:return Vm.UNAVAILABLE;case Wb.UNAUTHENTICATED:return Vm.UNAUTHENTICATED;case Wb.INVALID_ARGUMENT:return Vm.INVALID_ARGUMENT;case Wb.NOT_FOUND:return Vm.NOT_FOUND;case Wb.ALREADY_EXISTS:return Vm.ALREADY_EXISTS;case Wb.PERMISSION_DENIED:return Vm.PERMISSION_DENIED;case Wb.FAILED_PRECONDITION:return Vm.FAILED_PRECONDITION;case Wb.ABORTED:return Vm.ABORTED;case Wb.OUT_OF_RANGE:return Vm.OUT_OF_RANGE;case Wb.UNIMPLEMENTED:return Vm.UNIMPLEMENTED;case Wb.DATA_LOSS:return Vm.DATA_LOSS;default:return Mm()}}(Kb=Wb||(Wb={}))[Kb.OK=0]="OK",Kb[Kb.CANCELLED=1]="CANCELLED",Kb[Kb.UNKNOWN=2]="UNKNOWN",Kb[Kb.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kb[Kb.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kb[Kb.NOT_FOUND=5]="NOT_FOUND",Kb[Kb.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kb[Kb.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kb[Kb.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kb[Kb.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kb[Kb.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kb[Kb.ABORTED=10]="ABORTED",Kb[Kb.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kb[Kb.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kb[Kb.INTERNAL=13]="INTERNAL",Kb[Kb.UNAVAILABLE=14]="UNAVAILABLE",Kb[Kb.DATA_LOSS=15]="DATA_LOSS";var ew=function(){function e(){f(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return m(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return tw}},{key:"getOrCreateInstance",value:function(){return null===tw&&(tw=new e),tw}}]),e}(),tw=null;function nw(){return new TextEncoder}var rw=new Im([4294967295,4294967295],0);function iw(e){var t=nw().encode(e),n=new Tm;return n.update(t),new Uint8Array(n.digest())}function aw(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Im([n,r],0),new Im([i,a],0)]}var ow=function(){function e(t,n,r){if(f(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new uw("Invalid padding: ".concat(n));if(r<0)throw new uw("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new uw("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new uw("Invalid padding when bitmap length is 0: ".concat(n));this.It=8*t.length-n,this.Tt=Im.fromNumber(this.It)}return m(e,[{key:"Et",value:function(e,t,n){var r=e.add(t.multiply(Im.fromNumber(n)));return 1===r.compare(rw)&&(r=new Im([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}},{key:"At",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"vt",value:function(e){if(0===this.It)return!1;for(var t=c(aw(iw(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Et(n,r,i);if(!this.At(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.It)for(var t=c(aw(iw(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Et(n,r,i);this.Rt(a)}}},{key:"Rt",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),uw=function(e){g(n,e);var t=_(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return m(n)}(S(Error)),sw=function(){function e(t,n,r,i,a){f(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return m(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,cw.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(ry.min(),i,new mg(Zm),nb(),hb())}}]),e}(),cw=function(){function e(t,n,r,i,a){f(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return m(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,hb(),hb(),hb())}}]),e}(),lw=m((function e(t,n,r,i){f(this,e),this.Pt=t,this.removedTargetIds=n,this.key=r,this.bt=i})),hw=m((function e(t,n){f(this,e),this.targetId=t,this.Vt=n})),fw=m((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sg.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;f(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),dw=function(){function e(){f(this,e),this.St=0,this.Dt=mw(),this.Ct=Sg.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}return m(e,[{key:"current",get:function(){return this.xt}},{key:"resumeToken",get:function(){return this.Ct}},{key:"kt",get:function(){return 0!==this.St}},{key:"Mt",get:function(){return this.Nt}},{key:"$t",value:function(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}},{key:"Ot",value:function(){var e=hb(),t=hb(),n=hb();return this.Dt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Mm()}})),new cw(this.Ct,this.xt,e,t,n)}},{key:"Ft",value:function(){this.Nt=!1,this.Dt=mw()}},{key:"Bt",value:function(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}},{key:"Lt",value:function(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}},{key:"qt",value:function(){this.St+=1}},{key:"Ut",value:function(){this.St-=1}},{key:"Kt",value:function(){this.Nt=!0,this.xt=!0}}]),e}(),pw=function(){function e(t){f(this,e),this.Gt=t,this.Qt=new Map,this.jt=nb(),this.zt=vw(),this.Wt=new mg(Zm)}return m(e,[{key:"Ht",value:function(e){var t,n=T(e.Pt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.bt&&e.bt.isFoundDocument()?this.Jt(r,e.bt):this.Yt(r,e.key,e.bt)}}catch(u){n.e(u)}finally{n.f()}var i,a=T(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Yt(o,e.key,e.bt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Xt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Zt(n);switch(e.state){case 0:t.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||t.removeTarget(n);break;case 3:t.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:t.te(n)&&(t.ee(n),r.$t(e.resumeToken));break;default:Mm()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((function(e,r){n.te(r)&&t(r)}))}},{key:"ne",value:function(e){var t,n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){var a=i.target;if(Rk(a))if(0===r){var o=new sy(a.path);this.Yt(n,o,rk.newNoDocument(o,ry.min()))}else jm(1===r);else{var u=this.ie(n);if(u!==r){var s=this.re(e,u);if(0!==s){this.ee(n);var c=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,c)}null===(t=ew.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,a,o,u,s,c={localCacheCount:t,existenceFilterCount:n.count},l=n.unchangedNames;return l&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==l?void 0:l.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(a=null===(i=null==l?void 0:l.bits)||void 0===i?void 0:i.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(s=null===(u=null==l?void 0:l.bits)||void 0===u?void 0:u.padding)&&void 0!==s?s:0}),c}(s,u,e.Vt))}}}}},{key:"re",value:function(e,t){var n=e.Vt,r=n.unchangedNames,i=n.count;if(!r||!r.bits)return 1;var a,o,u=r.bits,s=u.bitmap,c=void 0===s?"":s,l=u.padding,h=void 0===l?0:l,f=r.hashCount,d=void 0===f?0:f;try{a=Cg(c).toUint8Array()}catch(e){if(e instanceof xg)return Lm("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{o=new ow(a,h,d)}catch(e){return Lm(e instanceof uw?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===o.It?1:i!==t-this.oe(e.targetId,o)?2:0}},{key:"oe",value:function(e,t){var n=this,r=this.Gt.getRemoteKeysForTarget(e),i=0;return r.forEach((function(r){var a=n.Gt.ue(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());t.vt(o)||(n.Yt(e,r,null),i++)})),i}},{key:"ce",value:function(e){var t=this,n=new Map;this.Qt.forEach((function(r,i){var a=t.se(i);if(a){if(r.current&&Rk(a.target)){var o=new sy(a.target.path);null!==t.jt.get(o)||t.ae(i,o)||t.Yt(i,o,rk.newNoDocument(o,e))}r.Mt&&(n.set(i,r.Ot()),r.Ft())}}));var r=hb();this.zt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.se(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.jt.forEach((function(t,n){return n.setReadTime(e)}));var i=new sw(e,n,this.Wt,this.jt,r);return this.jt=nb(),this.zt=vw(),this.Wt=new mg(Zm),i}},{key:"Jt",value:function(e,t){if(this.te(e)){var n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}}},{key:"Yt",value:function(e,t,n){if(this.te(e)){var r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Qt.delete(e)}},{key:"ie",value:function(e){var t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"qt",value:function(e){this.Zt(e).qt()}},{key:"Zt",value:function(e){var t=this.Qt.get(e);return t||(t=new dw,this.Qt.set(e,t)),t}},{key:"he",value:function(e){var t=this.zt.get(e);return t||(t=new kg(Zm),this.zt=this.zt.insert(e,t)),t}},{key:"te",value:function(e){var t=null!==this.se(e);return t||Om("WatchChangeAggregator","Detected inactive target",e),t}},{key:"se",value:function(e){var t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}},{key:"ee",value:function(e){var t=this;this.Qt.set(e,new dw),this.Gt.getRemoteKeysForTarget(e).forEach((function(n){t.Yt(e,n,null)}))}},{key:"ae",value:function(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}]),e}();function vw(){return new mg(sy.comparator)}function mw(){return new mg(sy.comparator)}var yw={asc:"ASCENDING",desc:"DESCENDING"},gw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kw={and:"AND",or:"OR"},bw=m((function e(t,n){f(this,e),this.databaseId=t,this.useProto3Json=n}));function ww(e,t){return e.useProto3Json||Ly(t)?t:{value:t}}function _w(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function xw(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Sw(e,t){return _w(e,t.toTimestamp())}function Ew(e){return jm(!!e),ry.fromTimestamp(function(e){var t=Tg(e);return new ny(t.seconds,t.nanos)}(e))}function Tw(e,t){return function(e){return new ay(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Iw(e){var t=ay.fromString(e);return jm(Yw(t)),t}function Cw(e,t){return Tw(e.databaseId,t.path)}function Aw(e,t){var n=Iw(t);if(n.get(1)!==e.databaseId.projectId)throw new qm(Vm.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new qm(Vm.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new sy(Ow(n))}function Nw(e,t){return Tw(e.databaseId,t)}function Pw(e){var t=Iw(e);return 4===t.length?ay.emptyPath():Ow(t)}function Rw(e){return new ay(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ow(e){return jm(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Dw(e,t,n){return{name:Cw(e,t),fields:n.value.mapValue.fields}}function Lw(e,t,n){var r=Aw(e,t.name),i=Ew(t.updateTime),a=t.createTime?Ew(t.createTime):ry.min(),o=new tk({mapValue:{fields:t.fields}}),u=rk.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function Fw(e,t){return"found"in t?function(e,t){jm(!!t.found),t.found.name,t.found.updateTime;var n=Aw(e,t.found.name),r=Ew(t.found.updateTime),i=t.found.createTime?Ew(t.found.createTime):ry.min(),a=new tk({mapValue:{fields:t.found.fields}});return rk.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){jm(!!t.missing),jm(!!t.readTime);var n=Aw(e,t.missing),r=Ew(t.readTime);return rk.newNoDocument(n,r)}(e,t):Mm()}function Mw(e,t){var n;if(t instanceof Ub)n={update:Dw(e,t.key,t.value)};else if(t instanceof Hb)n={delete:Cw(e,t.key)};else if(t instanceof Vb)n={update:Dw(e,t.key,t.data),updateMask:$w(t.fieldMask)};else{if(!(t instanceof Gb))return Mm();n={verify:Cw(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof wb)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof _b)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Sb)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Tb)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Mm()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Sw(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Mm()}(e,t.precondition)),n}function jw(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Pb.updateTime(Ew(e.updateTime)):void 0!==e.exists?Pb.exists(e.exists):Pb.none()}(t.currentDocument):Pb.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)jm("REQUEST_TIME"===t.setToServerValue),n=new wb;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new _b(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Sb(i)}else"increment"in t?n=new Tb(e,t.increment):Mm();var a=uy.fromServerFormat(t.fieldPath);return new Ab(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Aw(e,t.update.name),a=new tk({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new _g(t.map((function(e){return uy.fromServerFormat(e)})))}(t.updateMask);return new Vb(i,a,o,n,r)}return new Ub(i,a,n,r)}if(t.delete){var u=Aw(e,t.delete);return new Hb(u,n)}if(t.verify){var s=Aw(e,t.verify);return new Gb(s,n)}return Mm()}function Uw(e,t){return{documents:[Nw(e,t.path)]}}function Vw(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Nw(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Nw(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return Qw(hk.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Hw(e.field),direction:Bw(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=ww(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function qw(e){var t=Pw(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){jm(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=zw(e);return t instanceof hk&&pk(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new uk(Gw(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Ly(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new ik(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new ik(n,t)}(n.endAt)),Mk(t,i,u,o,s,"F",c,l)}function zw(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Gw(e.unaryFilter.field);return lk.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Gw(e.unaryFilter.field);return lk.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Gw(e.unaryFilter.field);return lk.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Gw(e.unaryFilter.field);return lk.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Mm()}}(e):void 0!==e.fieldFilter?function(e){return lk.create(Gw(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Mm()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return hk.create(e.compositeFilter.filters.map((function(e){return zw(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Mm()}}(e.compositeFilter.op))}(e):Mm()}function Bw(e){return yw[e]}function Ww(e){return gw[e]}function Kw(e){return kw[e]}function Hw(e){return{fieldPath:e.canonicalString()}}function Gw(e){return uy.fromServerFormat(e.fieldPath)}function Qw(e){return e instanceof lk?function(e){if("=="===e.op){if(Gg(e.value))return{unaryFilter:{field:Hw(e.field),op:"IS_NAN"}};if(Hg(e.value))return{unaryFilter:{field:Hw(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Gg(e.value))return{unaryFilter:{field:Hw(e.field),op:"IS_NOT_NAN"}};if(Hg(e.value))return{unaryFilter:{field:Hw(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hw(e.field),op:Ww(e.op),value:e.value}}}(e):e instanceof hk?function(e){var t=e.getFilters().map((function(e){return Qw(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Kw(e.op),filters:t}}}(e):Mm()}function $w(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Yw(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var Jw=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ry.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ry.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Sg.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;f(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=s}return m(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),Xw=m((function e(t){f(this,e),this.fe=t}));function Zw(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:e_(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Cw(e,t.key),fields:t.data.value.mapValue.fields,updateTime:_w(e,t.version.toTimestamp()),createTime:_w(e,t.createTime.toTimestamp())}}(e.fe,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:t_(t.version)};else{if(!t.isUnknownDocument())return Mm();r.unknownDocument={path:n.path.toArray(),version:t_(t.version)}}return r}function e_(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function t_(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function n_(e){var t=new ny(e.seconds,e.nanoseconds);return ry.fromTimestamp(t)}function r_(e,t){for(var n=(t.baseMutations||[]).map((function(t){return jw(e.fe,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return jw(e.fe,t)})),u=ny.fromMillis(t.localWriteTimeMs);return new Qb(t.batchId,u,n,o)}function i_(e){var t,n,r=n_(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?n_(e.lastLimboFreeSnapshotVersion):ry.min();return void 0!==e.query.documents?(jm(1===(n=e.query).documents.length),t=Wk(jk(Pw(n.documents[0])))):t=function(e){return Wk(qw(e))}(e.query),new Jw(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,r,i,Sg.fromBase64String(e.resumeToken))}function a_(e,t){var n,r=t_(t.snapshotVersion),i=t_(t.lastLimboFreeSnapshotVersion);n=Rk(t.target)?Uw(e.fe,t.target):Vw(e.fe,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Nk(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function o_(e){var t=qw({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Hk(t,t.limit,"L"):t}function u_(e,t){return new Yb(t.largestBatchId,jw(e.fe,t.overlayMutation))}function s_(e,t){var n=t.path.lastSegment();return[e,jy(t.path.popLast()),n]}function c_(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:t_(r.readTime),documentKey:jy(r.documentKey.path),largestBatchId:r.largestBatchId}}var l_=function(){function e(){f(this,e)}return m(e,[{key:"getBundleMetadata",value:function(e,t){return h_(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:n_(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return h_(e).put({bundleId:(n=t).id,createTime:t_(Ew(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return f_(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:o_(t.bundledQuery),readTime:n_(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return f_(e).put(function(e){return{name:e.name,readTime:t_(Ew(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function h_(e){return fg(e,"bundles")}function f_(e){return fg(e,"namedQueries")}var d_=function(){function e(t,n){f(this,e),this.serializer=t,this.userId=n}return m(e,[{key:"getOverlay",value:function(e,t){var n=this;return p_(e).get(s_(this.userId,t)).next((function(e){return e?u_(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=ob();return _y.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Yb(t,a);i.push(r.we(e,o))})),_y.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(jy(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(p_(e).J("collectionPathOverlayIndex",i))})),_y.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=ob(),a=jy(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return p_(e).j("collectionPathOverlayIndex",o).next((function(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=u_(r.serializer,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=ob(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return p_(e).X({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=u_(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"we",value:function(e,t){return p_(e).put(function(e,t,n){var r=c(s_(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Mw(e.fe,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"de",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function p_(e){return fg(e,"documentOverlays")}var v_=function(){function e(){f(this,e)}return m(e,[{key:"_e",value:function(e,t){this.me(e,t),t.ge()}},{key:"me",value:function(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Ig(e.integerValue));else if("doubleValue"in e){var n=Ig(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),Fy(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie("".concat(r.seconds||"")),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Cg(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ye(t,45),t.pe(i.latitude||0),t.pe(i.longitude||0)}else"mapValue"in e?Yg(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Mm()}},{key:"Te",value:function(e,t){this.ye(t,25),this.be(e,t)}},{key:"be",value:function(e,t){t.Ie(e)}},{key:"Re",value:function(e,t){var n=e.fields||{};this.ye(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Te(a,t),this.me(n[a],t)}}},{key:"Pe",value:function(e,t){var n=e.values||[];this.ye(t,50);var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.me(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ve",value:function(e,t){var n=this;this.ye(t,37),sy.fromName(e).path.forEach((function(e){n.ye(t,60),n.be(e,t)}))}},{key:"ye",value:function(e,t){e.pe(t)}},{key:"Ee",value:function(e){e.pe(2)}}]),e}();function m_(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function y_(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=m_(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}v_.Ve=new v_;var g_=function(){function e(){f(this,e),this.buffer=new Uint8Array(1024),this.position=0}return m(e,[{key:"Se",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.De(n.value),n=t.next();this.Ce()}},{key:"xe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ne(n.value),n=t.next();this.ke()}},{key:"Me",value:function(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.De(i);else if(i<2048)this.De(960|i>>>6),this.De(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.De(480|i>>>12),this.De(128|63&i>>>6),this.De(128|63&i);else{var a=r.codePointAt(0);this.De(240|a>>>18),this.De(128|63&a>>>12),this.De(128|63&a>>>6),this.De(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ce()}},{key:"$e",value:function(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ne(i);else if(i<2048)this.Ne(960|i>>>6),this.Ne(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ne(480|i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i);else{var a=r.codePointAt(0);this.Ne(240|a>>>18),this.Ne(128|63&a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ke()}},{key:"Oe",value:function(e){var t=this.Fe(e),n=y_(t);this.Be(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Le",value:function(e){var t=this.Fe(e),n=y_(t);this.Be(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"qe",value:function(){this.Ue(255),this.Ue(255)}},{key:"Ke",value:function(){this.Ge(255),this.Ge(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Qe",value:function(){return this.buffer.slice(0,this.position)}},{key:"Fe",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"De",value:function(e){var t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}},{key:"Ne",value:function(e){var t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}},{key:"Ce",value:function(){this.Ue(0),this.Ue(1)}},{key:"ke",value:function(){this.Ge(0),this.Ge(1)}},{key:"Ue",value:function(e){this.Be(1),this.buffer[this.position++]=e}},{key:"Ge",value:function(e){this.Be(1),this.buffer[this.position++]=~e}},{key:"Be",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),k_=function(){function e(t){f(this,e),this.je=t}return m(e,[{key:"Ae",value:function(e){this.je.Se(e)}},{key:"Ie",value:function(e){this.je.Me(e)}},{key:"pe",value:function(e){this.je.Oe(e)}},{key:"ge",value:function(){this.je.qe()}}]),e}(),b_=function(){function e(t){f(this,e),this.je=t}return m(e,[{key:"Ae",value:function(e){this.je.xe(e)}},{key:"Ie",value:function(e){this.je.$e(e)}},{key:"pe",value:function(e){this.je.Le(e)}},{key:"ge",value:function(){this.je.Ke()}}]),e}(),w_=function(){function e(){f(this,e),this.je=new g_,this.ze=new k_(this.je),this.We=new b_(this.je)}return m(e,[{key:"seed",value:function(e){this.je.seed(e)}},{key:"He",value:function(e){return 0===e?this.ze:this.We}},{key:"Qe",value:function(){return this.je.Qe()}},{key:"reset",value:function(){this.je.reset()}}]),e}(),__=function(){function e(t,n,r,i){f(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return m(e,[{key:"Je",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function x_(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=S_(e.arrayValue,t.arrayValue))?n:0!==(n=S_(e.directionalValue,t.directionalValue))?n:sy.comparator(e.documentKey,t.documentKey)}function S_(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var E_=function(){function e(t){f(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ye=t.orderBy,this.Xe=[];var n,r=T(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Ze=i:this.Xe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return m(e,[{key:"tn",value:function(e){jm(e.collectionGroup===this.collectionId);var t=ly(e);if(void 0!==t&&!this.en(t))return!1;for(var n=hy(e),r=0,i=0;r<n.length&&this.en(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Ze){var a=n[r];if(!this.nn(this.Ze,a)||!this.sn(this.Ye[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ye.length||!this.sn(this.Ye[i++],o))return!1}return!0}},{key:"en",value:function(e){var t,n=T(this.Xe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.nn(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"nn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"sn",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function T_(e){var t,n;if(jm(e instanceof lk||e instanceof hk),e instanceof lk){if(e instanceof Ek){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return lk.create(e.field,"==",t)})))||[];return hk.create(r,"or")}return e}var i=e.filters.map((function(e){return T_(e)}));return hk.create(i,e.op)}function I_(e){if(0===e.getFilters().length)return[];var t=P_(T_(e));return jm(N_(t)),C_(t)||A_(t)?[t]:t.getFilters()}function C_(e){return e instanceof lk}function A_(e){return e instanceof hk&&pk(e)}function N_(e){return C_(e)||A_(e)||function(e){if(e instanceof hk&&dk(e)){var t,n=T(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!C_(r)&&!A_(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function P_(e){if(jm(e instanceof lk||e instanceof hk),e instanceof lk)return e;if(1===e.filters.length)return P_(e.filters[0]);var t=e.filters.map((function(e){return P_(e)})),n=hk.create(t,e.op);return N_(n=D_(n))?n:(jm(n instanceof hk),jm(fk(n)),jm(n.filters.length>1),n.filters.reduce((function(e,t){return R_(e,t)})))}function R_(e,t){var n;return jm(e instanceof lk||e instanceof hk),jm(t instanceof lk||t instanceof hk),n=e instanceof lk?t instanceof lk?function(e,t){return hk.create([e,t],"and")}(e,t):O_(e,t):t instanceof lk?O_(t,e):function(e,t){if(jm(e.filters.length>0&&t.filters.length>0),fk(e)&&fk(t))return gk(e,t.getFilters());var n=dk(e)?e:t,r=dk(e)?t:e,i=n.filters.map((function(e){return R_(e,r)}));return hk.create(i,"or")}(e,t),D_(n)}function O_(e,t){if(fk(t))return gk(t,e.getFilters());var n=t.filters.map((function(t){return R_(e,t)}));return hk.create(n,"or")}function D_(e){if(jm(e instanceof lk||e instanceof hk),e instanceof lk)return e;var t=e.getFilters();if(1===t.length)return D_(t[0]);if(vk(e))return e;var n=t.map((function(e){return D_(e)})),r=[];return n.forEach((function(t){t instanceof lk?r.push(t):t instanceof hk&&(t.op===e.op?r.push.apply(r,h(t.filters)):r.push(t))})),1===r.length?r[0]:hk.create(r,e.op)}var L_=function(){function e(){f(this,e),this.rn=new F_}return m(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.rn.add(t),_y.resolve()}},{key:"getCollectionParents",value:function(e,t){return _y.resolve(this.rn.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return _y.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return _y.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return _y.resolve(null)}},{key:"getIndexType",value:function(e,t){return _y.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return _y.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return _y.resolve(null)}},{key:"getMinOffset",value:function(e,t){return _y.resolve(my.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return _y.resolve(my.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return _y.resolve()}},{key:"updateIndexEntries",value:function(e,t){return _y.resolve()}}]),e}(),F_=function(){function e(){f(this,e),this.index={}}return m(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new kg(ay.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new kg(ay.comparator)).toArray()}}]),e}(),M_=new Uint8Array(0),j_=function(){function e(t,n){f(this,e),this.user=t,this.databaseId=n,this.on=new F_,this.un=new eb((function(e){return Nk(e)}),(function(e,t){return Pk(e,t)})),this.uid=t.uid||""}return m(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.on.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.on.add(t)}));var a={collectionId:r,parent:jy(i)};return U_(e).put(a)}return _y.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[ty(t),""],!1,!0);return U_(e).j(r).next((function(e){var r,i=T(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(qy(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=q_(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=z_(e);return a.next((function(e){o.put(c_(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=q_(e),r=z_(e),i=V_(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=V_(e),i=!0,a=new Map;return _y.forEach(this.cn(t),(function(t){return n.an(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=hb(),o=[];return _y.forEach(a,(function(i,a){var u;Om("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Nk(t)));var s=function(e,t){var n=ly(t);if(void 0===n)return null;var r,i=T(Ok(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=T(hy(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=T(Ok(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=T(hy(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Dk(e,o.fieldPath,e.startAt):Lk(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new ik(r,i)}(a,i),h=function(e,t){var n,r=[],i=!0,a=T(hy(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Lk(e,o.fieldPath,e.endAt):Dk(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new ik(r,i)}(a,i),f=n.hn(i,a,l),d=n.hn(i,a,h),p=n.ln(i,a,c),v=n.fn(i.indexId,s,f,l.inclusive,d,h.inclusive,p);return _y.forEach(v,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=sy.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return _y.resolve(null)}))}},{key:"cn",value:function(e){var t=this.un.get(e);return t||(t=0===e.filters.length?[e]:I_(hk.create(e.filters,"and")).map((function(t){return Ak(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.un.set(e,t),t)}},{key:"fn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(){var s=t?u.dn(t[d/c]):M_,f=u.wn(e,s,n[d%c],r),p=u._n(e,s,i[d%c],a),v=o.map((function(t){return u.wn(e,s,t,!0)}));l.push.apply(l,h(u.createRange(f,p,v)))},d=0;d<s;++d)f();return l}},{key:"wn",value:function(e,t,n,r){var i=new __(e,sy.empty(),t,n);return r?i:i.Je()}},{key:"_n",value:function(e,t,n,r){var i=new __(e,sy.empty(),t,n);return r?i.Je():i}},{key:"an",value:function(e,t){var n=new E_(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=T(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.tn(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.cn(t);return _y.forEach(i,(function(t){return n.an(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new kg(uy.comparator),r=!1,i=T(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=T(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(h){o.e(h)}finally{o.f()}}}catch(h){i.e(h)}finally{i.f()}var s,c=T(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(h){c.e(h)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"mn",value:function(e,t){var n,r=new w_,i=T(hy(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.He(a.kind);v_.Ve._e(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Qe()}},{key:"dn",value:function(e){var t=new w_;return v_.Ve._e(e,t.He(0)),t.Qe()}},{key:"gn",value:function(e,t){var n=new w_;return v_.Ve._e(Bg(this.databaseId,t),n.He(function(e){var t=hy(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Qe()}},{key:"ln",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new w_);var i,a=0,o=T(hy(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=T(r);try{for(l.s();!(u=l.n()).done;){var h=u.value;if(this.yn(t,s.fieldPath)&&Kg(c))r=this.pn(r,s,c);else{var f=h.He(s.kind);v_.Ve._e(c,f)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.In(r)}},{key:"hn",value:function(e,t,n){return this.ln(e,t,n.position)}},{key:"In",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Qe();return t}},{key:"pn",value:function(e,t,n){var r,i=h(e),a=[],o=T(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=T(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new w_;f.seed(l.Qe()),v_.Ve._e(s,f.He(t.kind)),a.push(f)}}catch(d){c.e(d)}finally{c.f()}}}catch(d){o.e(d)}finally{o.f()}return a}},{key:"yn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof lk&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=q_(e),i=z_(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next((function(e){var t=[];return _y.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new dy(t.sequenceNumber,new my(n_(t.readTime),new sy(qy(t.documentKey)),t.largestBatchId)):dy.empty(),r=e.fields.map((function(e){var t=c(e,2),n=t[0],r=t[1];return new fy(uy.fromServerFormat(n),r)}));return new cy(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Zm(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=q_(e),a=z_(e);return this.Tn(e).next((function(e){return i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return _y.forEach(t,(function(t){return a.put(c_(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return _y.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?_y.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),_y.forEach(a,(function(r){return n.En(e,t,r).next((function(t){var a=n.An(i,r);return t.isEqual(a)?_y.resolve():n.vn(e,i,r,t,a)}))}))}))}))}},{key:"Rn",value:function(e,t,n,r){return V_(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"Pn",value:function(e,t,n,r){return V_(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(n,t.key),t.key.path.toArray()])}},{key:"En",value:function(e,t,n){var r=V_(e),i=new kg(x_);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,t)])},(function(e,r){i=i.add(new __(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"An",value:function(e,t){var n=new kg(x_),r=this.mn(t,e);if(null==r)return n;var i=ly(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Kg(a)){var o,u=T(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new __(t.indexId,e.key,this.dn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new __(t.indexId,e.key,M_,r));return n}},{key:"vn",value:function(e,t,n,r,i){var a=this;Om("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=wg(a),s=wg(o);u||s;){var c=!1,l=!1;if(u&&s){var h=n(u,s);h<0?l=!0:h>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=wg(o)):l?(i(u),u=wg(a)):(u=wg(a),s=wg(o))}}(r,i,x_,(function(r){o.push(a.Rn(e,t,n,r))}),(function(r){o.push(a.Pn(e,t,n,r))})),_y.waitFor(o)}},{key:"Tn",value:function(e){var t=1;return z_(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return x_(e,t)})).filter((function(e,t,n){return!t||0!==x_(e,n[t-1])}));var r=[];r.push(e);var i,a=T(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=x_(o,e),s=x_(o,t);if(0===u)r[0]=e.Je();else if(u>0&&s<0)r.push(o),r.push(o.Je());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.bn(r[l],r[l+1]))return[];var h=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,M_,[]],f=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,M_,[]];c.push(IDBKeyRange.bound(h,f))}return c}},{key:"bn",value:function(e,t){return x_(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(B_)}},{key:"getMinOffset",value:function(e,t){var n=this;return _y.mapArray(this.cn(t),(function(t){return n.an(e,t).next((function(e){return e||Mm()}))})).next(B_)}}]),e}();function U_(e){return fg(e,"collectionParents")}function V_(e){return fg(e,"indexEntries")}function q_(e){return fg(e,"indexConfiguration")}function z_(e){return fg(e,"indexState")}function B_(e){jm(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;yy(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new my(t.readTime,t.documentKey,n)}var W_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},K_=function(){function e(t,n,r){f(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return m(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function H_(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.X({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){jm(1===u)})));var c,l=[],h=T(n.mutations);try{for(h.s();!(c=h.n()).done;){var f=c.value,d=Wy(t,f.key.path,n.batchId);a.push(i.delete(d)),l.push(f.key)}}catch(p){h.e(p)}finally{h.f()}return _y.waitFor(a).next((function(){return l}))}function G_(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Mm();t=e.noDocument}return JSON.stringify(t).length}K_.DEFAULT_COLLECTION_PERCENTILE=10,K_.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,K_.DEFAULT=new K_(41943040,K_.DEFAULT_COLLECTION_PERCENTILE,K_.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),K_.DISABLED=new K_(-1,0,0);var Q_=function(){function e(t,n,r,i){f(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}return m(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Y_(e).X({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=J_(e),o=Y_(e);return o.add({}).next((function(u){jm("number"==typeof u);var s,c=new Qb(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Mw(e.fe,t)})),i=n.mutations.map((function(t){return Mw(e.fe,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),h=[],f=new kg((function(e,t){return Zm(e.canonicalString(),t.canonicalString())})),d=T(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Wy(i.userId,p.key.path,u);f=f.add(p.key.path.popLast()),h.push(o.put(l)),h.push(a.put(v,Ky))}}catch(m){d.e(m)}finally{d.f()}return f.forEach((function(t){h.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Vn[u]=c.keys()})),_y.waitFor(h).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Y_(e).get(t).next((function(e){return e?(jm(e.userId===n.userId),r_(n.serializer,e)):null}))}},{key:"Sn",value:function(e,t){var n=this;return this.Vn[t]?_y.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Vn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Y_(e).X({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(jm(t.batchId>=r),a=r_(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Y_(e).X({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Y_(e).j("userMutationsIndex",n).next((function(e){return e.map((function(e){return r_(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=By(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return J_(e).X({range:i},(function(r,i,o){var u=c(r,3),s=u[0],l=u[1],h=u[2],f=qy(l);if(s===n.userId&&t.path.isEqual(f))return Y_(e).get(h).next((function(e){if(!e)throw Mm();jm(e.userId===n.userId),a.push(r_(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new kg(Zm),i=[];return t.forEach((function(t){var a=By(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=J_(e).X({range:o},(function(e,i,a){var o=c(e,3),u=o[0],s=o[1],l=o[2],h=qy(s);u===n.userId&&t.path.isEqual(h)?r=r.add(l):a.done()}));i.push(u)})),_y.waitFor(i).next((function(){return n.Dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=By(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new kg(Zm);return J_(e).X({range:o},(function(e,t,a){var o=c(e,3),s=o[0],l=o[1],h=o[2],f=qy(l);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(h)):a.done()})).next((function(){return n.Dn(e,u)}))}},{key:"Dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Y_(e).get(t).next((function(e){if(null===e)throw Mm();jm(e.userId===n.userId),r.push(r_(n.serializer,e))})))})),_y.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return H_(e.ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Cn(t.batchId)})),_y.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Cn",value:function(e){delete this.Vn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return _y.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return J_(e).X({range:r},(function(e,n,r){if(e[0]===t.userId){var a=qy(e[1]);i.push(a)}else r.done()})).next((function(){jm(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return $_(e,this.userId,t)}},{key:"xn",value:function(e){var t=this;return X_(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"de",value:function(t,n,r,i){return jm(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function $_(e,t,n){var r=By(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return J_(e).X({range:a,Y:!0},(function(e,n,r){var a=c(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function Y_(e){return fg(e,"mutations")}function J_(e){return fg(e,"documentMutations")}function X_(e){return fg(e,"mutationQueues")}var Z_=function(){function e(t){f(this,e),this.Nn=t}return m(e,[{key:"next",value:function(){return this.Nn+=2,this.Nn}}],[{key:"kn",value:function(){return new e(0)}},{key:"Mn",value:function(){return new e(-1)}}]),e}(),ex=function(){function e(t,n){f(this,e),this.referenceDelegate=t,this.serializer=n}return m(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.$n(e).next((function(n){var r=new Z_(n.highestTargetId);return n.highestTargetId=r.next(),t.On(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.$n(e).next((function(e){return ry.fromTimestamp(new ny(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.$n(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.$n(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.On(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Fn(e,t).next((function(){return n.$n(e).next((function(r){return r.targetCount+=1,n.Bn(t,r),n.On(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Fn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return tx(e).delete(t.targetId)})).next((function(){return n.$n(e)})).next((function(t){return jm(t.targetCount>0),t.targetCount-=1,n.On(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return tx(e).X((function(o,u){var s=i_(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return _y.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return tx(e).X((function(e,n){var r=i_(n);t(r)}))}},{key:"$n",value:function(e){return nx(e).get("targetGlobalKey").next((function(e){return jm(null!==e),e}))}},{key:"On",value:function(e,t){return nx(e).put("targetGlobalKey",t)}},{key:"Fn",value:function(e,t){return tx(e).put(a_(this.serializer,t))}},{key:"Bn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.$n(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Nk(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return tx(e).X({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=i_(n);Pk(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=rx(e);return t.forEach((function(t){var o=jy(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),_y.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=rx(e);return _y.forEach(t,(function(t){var a=jy(t.path);return _y.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=rx(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=rx(e),i=hb();return r.X({range:n,Y:!0},(function(e,t,n){var r=qy(e[1]),a=new sy(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=jy(t.path),r=IDBKeyRange.bound([n],[ty(n)],!1,!0),i=0;return rx(e).X({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=c(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"le",value:function(e,t){return tx(e).get(t).next((function(e){return e?i_(e):null}))}}]),e}();function tx(e){return fg(e,"targets")}function nx(e){return fg(e,"targetGlobal")}function rx(e){return fg(e,"targetDocuments")}function ix(e,t){var n=c(e,2),r=n[0],i=n[1],a=c(t,2),o=a[0],u=a[1],s=Zm(r,o);return 0===s?Zm(i,u):s}var ax=function(){function e(t){f(this,e),this.Ln=t,this.buffer=new kg(ix),this.qn=0}return m(e,[{key:"Un",value:function(){return++this.qn}},{key:"Kn",value:function(e){var t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();ix(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),ox=function(){function e(t,n,r){f(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Gn=null}return m(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}},{key:"stop",value:function(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}},{key:"started",get:function(){return null!==this.Gn}},{key:"Qn",value:function(e){var t=this;Om("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,Kn(Bn().mark((function e(){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Gn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Iy(e.t0)){e.next=12;break}Om("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,by(e.t0);case 14:return e.next=16,t.Qn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),ux=function(){function e(t,n){f(this,e),this.jn=t,this.params=n}return m(e,[{key:"calculateTargetCount",value:function(e,t){return this.jn.zn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return _y.resolve(Dy.ct);var r=new ax(t);return this.jn.forEachTarget(e,(function(e){return r.Kn(e.sequenceNumber)})).next((function(){return n.jn.Wn(e,(function(e){return r.Kn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.jn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.jn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Om("LruGarbageCollector","Garbage collection skipped; disabled"),_y.resolve(W_)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Om("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),W_):n.Hn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.jn.getCacheSize(e)}},{key:"Hn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Om("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Rm()<=Gr.DEBUG&&Om("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),_y.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function sx(e,t){return new ux(e,t)}var cx=function(){function e(t,n){f(this,e),this.db=t,this.garbageCollector=sx(this,n)}return m(e,[{key:"zn",value:function(e){var t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Jn",value:function(e){var t=0;return this.Wn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Wn",value:function(e,t){return this.Yn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return lx(e,n)}},{key:"removeReference",value:function(e,t,n){return lx(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return lx(e,t)}},{key:"Xn",value:function(e,t){return function(e,t){var n=!1;return X_(e).Z((function(r){return $_(e,r,t).next((function(e){return e&&(n=!0),_y.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Yn(e,(function(o,u){if(u<=t){var s=n.Xn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,ry.min()),rx(e).delete([0,jy(o.path)])}))}));i.push(s)}})).next((function(){return _y.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return lx(e,t)}},{key:"Yn",value:function(e,t){var n,r=rx(e),i=Dy.ct;return r.X({index:"documentTargetsIndex"},(function(e,r){var a=c(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==Dy.ct&&t(new sy(qy(n)),i),i=s,n=u):i=Dy.ct})).next((function(){i!==Dy.ct&&t(new sy(qy(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function lx(e,t){return rx(e).put(function(e,t){return{targetId:0,path:jy(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var hx=function(){function e(){f(this,e),this.changes=new eb((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return m(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,rk.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?_y.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),fx=function(){function e(t){f(this,e),this.serializer=t}return m(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return mx(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return mx(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],e_(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Zn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=rk.newInvalidDocument(t);return mx(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(yx(t))},(function(e,i){r=n.ts(t,i)})).next((function(){return r}))}},{key:"es",value:function(e,t){var n=this,r={size:0,document:rk.newInvalidDocument(t)};return mx(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(yx(t))},(function(e,i){r={document:n.ts(t,i),size:G_(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=nb();return this.ns(e,t,(function(e,t){var i=n.ts(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"ss",value:function(e,t){var n=this,r=nb(),i=new mg(sy.comparator);return this.ns(e,t,(function(e,t){var a=n.ts(e,t);r=r.insert(e,a),i=i.insert(e,G_(t))})).next((function(){return{documents:r,rs:i}}))}},{key:"ns",value:function(e,t,n){if(t.isEmpty())return _y.resolve();var r=new kg(kx);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(yx(r.first()),yx(r.last())),a=r.getIterator(),o=a.getNext();return mx(e).X({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=sy.fromSegments([].concat(h(t.prefixPath),[t.collectionGroup,t.documentId]));o&&kx(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.G(yx(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),e_(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return mx(e).j(IDBKeyRange.bound(o,u,!0)).next((function(e){var n,a=nb(),o=T(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=i.ts(sy.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s.isFoundDocument()&&(Yk(t,s)||r.has(s.key))&&(a=a.insert(s.key,s))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=nb(),o=gx(t,n),u=gx(t,my.max());return mx(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.ts(sy.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new px(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return vx(e).get("remoteDocumentGlobalKey").next((function(e){return jm(!!e),e}))}},{key:"Zn",value:function(e,t){return vx(e).put("remoteDocumentGlobalKey",t)}},{key:"ts",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Lw(e.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=sy.fromSegments(t.noDocument.path),i=n_(t.noDocument.readTime);n=rk.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Mm();var a=sy.fromSegments(t.unknownDocument.path),o=n_(t.unknownDocument.version);n=rk.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new ny(e[0],e[1]);return ry.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(ry.min()))return n}return rk.newInvalidDocument(e)}}]),e}();function dx(e){return new fx(e)}var px=function(e){g(n,e);var t=_(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).os=e,i.trackRemovals=r,i.us=new eb((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return m(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new kg((function(e,t){return Zm(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.us.get(a);if(n.push(t.os.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Zw(t.os.serializer,o);i=i.add(a.path.popLast());var c=G_(s);r+=c-u.size,n.push(t.os.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Zw(t.os.serializer,o.convertToNoDocument(ry.min()));n.push(t.os.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.os.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.os.updateMetadata(e,r)),_y.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.os.es(e,t).next((function(e){return n.us.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.os.ss(e,t).next((function(e){var t=e.documents;return e.rs.forEach((function(e,r){n.us.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(hx);function vx(e){return fg(e,"remoteDocumentGlobal")}function mx(e){return fg(e,"remoteDocumentsV14")}function yx(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function gx(e,t){var n=t.documentKey.path.toArray();return[e,e_(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function kx(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Zm(n[a],r[a]))return i;return(i=Zm(n.length,r.length))||((i=Zm(n[n.length-2],r[r.length-2]))||Zm(n[n.length-1],r[r.length-1]))}var bx=m((function e(t,n){f(this,e),this.overlayedDocument=t,this.mutatedFields=n})),wx=function(){function e(t,n,r,i){f(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return m(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&Fb(r.mutation,e,_g.empty(),ny.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,hb()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:hb(),i=ob();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=ib();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=ob();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,hb())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=nb(),a=sb(),o=sb();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Vb)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),Fb(o.mutation,t,o.mutation.getFieldMask(),ny.now())):a.set(t.key,_g.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new bx(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=sb(),i=new mg((function(e,t){return e-t})),a=hb();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=T(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||_g.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||hb()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=ub();c.forEach((function(e){if(!a.has(e)){var n=Db(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return _y.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return sy.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):zk(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):_y.resolve(ob()),u=-1,s=a;return o.next((function(t){return _y.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?_y.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,hb())})).next((function(e){return{batchId:u,changes:ab(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new sy(t)).next((function(e){var t=ib();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=ib();return this.indexManager.getCollectionParents(e,i).next((function(o){return _y.forEach(o,(function(o){var u=function(e,t){return new Fk(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,rk.newInvalidDocument(r)))}));var n=ib();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&Fb(a.mutation,i,_g.empty(),ny.now()),Yk(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),_x=function(){function e(t){f(this,e),this.serializer=t,this.cs=new Map,this.hs=new Map}return m(e,[{key:"getBundleMetadata",value:function(e,t){return _y.resolve(this.cs.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:Ew(n.createTime)}),_y.resolve()}},{key:"getNamedQuery",value:function(e,t){return _y.resolve(this.hs.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:o_(e.bundledQuery),readTime:Ew(e.readTime)}}(t)),_y.resolve()}}]),e}(),xx=function(){function e(){f(this,e),this.overlays=new mg(sy.comparator),this.ls=new Map}return m(e,[{key:"getOverlay",value:function(e,t){return _y.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=ob();return _y.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.we(e,t,i)})),_y.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ls.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ls.delete(n)),_y.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=ob(),i=t.length+1,a=new sy(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return _y.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new mg((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=ob(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=ob(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return _y.resolve(s)}},{key:"we",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Yb(t,n));var a=this.ls.get(t);void 0===a&&(a=hb(),this.ls.set(t,a)),this.ls.set(t,a.add(n.key))}}]),e}(),Sx=function(){function e(){f(this,e),this.fs=new kg(Ex.ds),this.ws=new kg(Ex._s)}return m(e,[{key:"isEmpty",value:function(){return this.fs.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Ex(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}},{key:"gs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.ys(new Ex(e,t))}},{key:"ps",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Is",value:function(e){var t=this,n=new sy(new ay([])),r=new Ex(n,e),i=new Ex(n,e+1),a=[];return this.ws.forEachInRange([r,i],(function(e){t.ys(e),a.push(e.key)})),a}},{key:"Ts",value:function(){var e=this;this.fs.forEach((function(t){return e.ys(t)}))}},{key:"ys",value:function(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}},{key:"Es",value:function(e){var t=new sy(new ay([])),n=new Ex(t,e),r=new Ex(t,e+1),i=hb();return this.ws.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Ex(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Ex=function(){function e(t,n){f(this,e),this.key=t,this.As=n}return m(e,null,[{key:"ds",value:function(e,t){return sy.comparator(e.key,t.key)||Zm(e.As,t.As)}},{key:"_s",value:function(e,t){return Zm(e.As,t.As)||sy.comparator(e.key,t.key)}}]),e}(),Tx=function(){function e(t,n){f(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new kg(Ex.ds)}return m(e,[{key:"checkEmpty",value:function(e){return _y.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Qb(i,t,n,r);this.mutationQueue.push(a);var o,u=T(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Rs=this.Rs.add(new Ex(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return _y.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return _y.resolve(this.Ps(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.bs(n),i=r<0?0:r;return _y.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return _y.resolve(0===this.mutationQueue.length?-1:this.vs-1)}},{key:"getAllMutationBatches",value:function(e){return _y.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Ex(t,0),i=new Ex(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],(function(e){var t=n.Ps(e.As);a.push(t)})),_y.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new kg(Zm);return t.forEach((function(e){var t=new Ex(e,0),i=new Ex(e,Number.POSITIVE_INFINITY);n.Rs.forEachInRange([t,i],(function(e){r=r.add(e.As)}))})),_y.resolve(this.Vs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;sy.isDocumentKey(i)||(i=i.child(""));var a=new Ex(new sy(i),0),o=new kg(Zm);return this.Rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.As)),!0)}),a),_y.resolve(this.Vs(o))}},{key:"Vs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Ps(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;jm(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();var r=this.Rs;return _y.forEach(t.mutations,(function(i){var a=new Ex(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Rs=r}))}},{key:"Cn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Ex(t,0),r=this.Rs.firstAfterOrEqual(n);return _y.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,_y.resolve()}},{key:"Ss",value:function(e,t){return this.bs(e)}},{key:"bs",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"Ps",value:function(e){var t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Ix=function(){function e(t){f(this,e),this.Ds=t,this.docs=new mg(sy.comparator),this.size=0}return m(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return _y.resolve(n?n.document.mutableCopy():rk.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=nb();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():rk.newInvalidDocument(e))})),_y.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=nb(),a=t.path,o=new sy(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||yy(vy(l),n)<=0||(r.has(l.key)||Yk(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return _y.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Mm()}},{key:"Cs",value:function(e,t){return _y.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Cx(this)}},{key:"getSize",value:function(e){return _y.resolve(this.size)}}]),e}(),Cx=function(e){g(n,e);var t=_(n);function n(e){var r;return f(this,n),(r=t.call(this)).os=e,r}return m(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.os.addEntry(e,i)):t.os.removeEntry(r)})),_y.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.os.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.os.getEntries(e,t)}}]),n}(hx),Ax=function(){function e(t){f(this,e),this.persistence=t,this.xs=new eb((function(e){return Nk(e)}),Pk),this.lastRemoteSnapshotVersion=ry.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Sx,this.targetCount=0,this.Ms=Z_.kn()}return m(e,[{key:"forEachTarget",value:function(e,t){return this.xs.forEach((function(e,n){return t(n)})),_y.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return _y.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return _y.resolve(this.Ns)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ms.next(),_y.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),_y.resolve()}},{key:"Fn",value:function(e){this.xs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ms=new Z_(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Fn(t),this.targetCount+=1,_y.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Fn(t),_y.resolve()}},{key:"removeTargetData",value:function(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,_y.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.xs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.xs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),_y.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return _y.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.xs.get(t)||null;return _y.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.ks.gs(t,n),_y.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.ks.ps(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),_y.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.ks.Is(t),_y.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.ks.Es(t);return _y.resolve(n)}},{key:"containsKey",value:function(e,t){return _y.resolve(this.ks.containsKey(t))}}]),e}(),Nx=function(){function e(t,n){var r=this;f(this,e),this.$s={},this.overlays={},this.Os=new Dy(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=t(this),this.Bs=new Ax(this),this.indexManager=new L_,this.remoteDocumentCache=new Ix((function(e){return r.referenceDelegate.Ls(e)})),this.serializer=new Xw(n),this.qs=new _x(this.serializer)}return m(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Fs=!1,Promise.resolve()}},{key:"started",get:function(){return this.Fs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new xx,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.$s[e.toKey()];return n||(n=new Tx(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;Om("MemoryPersistence","Starting transaction:",e);var i=new Px(this.Os.next());return this.referenceDelegate.Us(),n(i).next((function(e){return r.referenceDelegate.Ks(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Gs",value:function(e,t){return _y.or(Object.values(this.$s).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Px=function(e){g(n,e);var t=_(n);function n(e){var r;return f(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return m(n)}(ky),Rx=function(){function e(t){f(this,e),this.persistence=t,this.Qs=new Sx,this.js=null}return m(e,[{key:"Ws",get:function(){if(this.js)return this.js;throw Mm()}},{key:"addReference",value:function(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),_y.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),_y.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ws.add(t.toString()),_y.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Qs.Is(t.targetId).forEach((function(e){return n.Ws.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ws.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Us",value:function(){this.js=new Set}},{key:"Ks",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _y.forEach(this.Ws,(function(r){var i=sy.fromPath(r);return t.Hs(e,i).next((function(e){e||n.removeEntry(i,ry.min())}))})).next((function(){return t.js=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hs(e,t).next((function(e){e?n.Ws.delete(t.toString()):n.Ws.add(t.toString())}))}},{key:"Ls",value:function(e){return 0}},{key:"Hs",value:function(e,t){var n=this;return _y.or([function(){return _y.resolve(n.Qs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Gs(e,t)}])}}],[{key:"zs",value:function(t){return new e(t)}}]),e}(),Ox=function(){function e(t){f(this,e),this.serializer=t}return m(e,[{key:"O",value:function(e,t,n,r){var i=this,a=new xy("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zy,{unique:!0}),e.createObjectStore("documentMutations")}(e),Dx(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=_y.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Dx(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ry.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").j().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zy,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return _y.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Ys(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Xs(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Zs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ti(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ei(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:rg});t.createIndex("collectionPathOverlayIndex",ig,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",ag,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Hy});t.createIndex("documentKeyIndex",Gy),t.createIndex("collectionGroupIndex",Qy)}(e)})).next((function(){return i.ni(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.si(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Zy}).createIndex("sequenceNumberIndex",eg,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:tg}).createIndex("documentKeyIndex",ng,{unique:!1})}(e)}))),o}},{key:"Xs",value:function(e){var t=0;return e.store("remoteDocuments").X((function(e,n){t+=G_(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Ys",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next((function(n){return _y.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",i).next((function(r){return _y.forEach(r,(function(r){jm(r.userId===n.userId);var i=r_(t.serializer,r);return H_(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Zs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.X((function(n,i){var a=new ay(n),o=function(e){return[0,jy(e)]}(a);r.push(t.get(o).next((function(n){return n?_y.resolve():function(n){return t.put({targetId:0,path:jy(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return _y.waitFor(r)}))}))}},{key:"ti",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Xy});var n=t.store("collectionParents"),r=new F_,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:jy(i)})}};return t.store("remoteDocuments").X({Y:!0},(function(e,t){var n=new ay(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").X({Y:!0},(function(e,t){var n=c(e,3),r=(n[0],n[1]),a=(n[2],qy(r));return i(a.popLast())}))}))}},{key:"ei",value:function(e){var t=this,n=e.store("targets");return n.X((function(e,r){var i=i_(r),a=a_(t.serializer,i);return n.put(a)}))}},{key:"ni",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.X((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new sy(ay.fromString(i.document.name).popFirst(5)):i.noDocument?sy.fromSegments(i.noDocument.path):i.unknownDocument?sy.fromSegments(i.unknownDocument.path):Mm()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return _y.waitFor(r)}))}},{key:"si",value:function(e,t){var n=this,r=t.store("mutations"),i=dx(this.serializer),a=new Nx(Rx.zs,this.serializer.fe);return r.j().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:hb();r_(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),_y.forEach(r,(function(e,r){var o=new Am(r),u=d_.de(n.serializer,o),s=a.getIndexManager(o),c=Q_.de(o,n.serializer,s,a.referenceDelegate);return new wx(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new hg(t,Dy.ct),e).next()}))}))}}]),e}();function Dx(e){e.createObjectStore("targetDocuments",{keyPath:Yy}).createIndex("documentTargetsIndex",Jy,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",$y,{unique:!0}),e.createObjectStore("targetGlobal")}var Lx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Fx=function(){function e(t,n,r,i,a,o,u,s,c,l){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(f(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.ii=a,this.window=o,this.document=u,this.ri=c,this.oi=l,this.ui=h,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=function(e){return Promise.resolve()},!e.D())throw new qm(Vm.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new cx(this,i),this.di=n+"main",this.serializer=new Xw(s),this.wi=new Sy(this.di,this.ui,new Ox(this.serializer)),this.Bs=new ex(this.referenceDelegate,this.serializer),this.remoteDocumentCache=dx(this.serializer),this.qs=new l_,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===l&&Dm("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return m(e,[{key:"start",value:function(){var e=this;return this.mi().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new qm(Vm.FAILED_PRECONDITION,Lx);return e.gi(),e.yi(),e.pi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Bs.getHighestSequenceNumber(t)}))})).then((function(t){e.Os=new Dy(t,e.ri)})).then((function(){e.Fs=!0})).catch((function(t){return e.wi&&e.wi.close(),Promise.reject(t)}))}},{key:"Ii",value:function(e){var t=this;return this.fi=function(){var n=Kn(Bn().mark((function n(r){return Bn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.wi.B(function(){var t=Kn(Bn().mark((function t(n){return Bn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget(Kn(Bn().mark((function e(){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.mi();case 4:case"end":return e.stop()}}),e)})))))}},{key:"mi",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return jx(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Ti(t).next((function(t){t||(e.isPrimary=!1,e.ii.enqueueRetryable((function(){return e.fi(!1)})))}))})).next((function(){return e.Ei(t)})).next((function(n){return e.isPrimary&&!n?e.Ai(t).next((function(){return!1})):!!n&&e.vi(t).next((function(){return!0}))}))})).catch((function(t){if(Iy(t))return Om("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Om("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.ii.enqueueRetryable((function(){return e.fi(t)})),e.isPrimary=t}))}},{key:"Ti",value:function(e){var t=this;return Mx(e).get("owner").next((function(e){return _y.resolve(t.Ri(e))}))}},{key:"Pi",value:function(e){return jx(e).delete(this.clientId)}},{key:"bi",value:function(){var e=Kn(Bn().mark((function e(){var t,n,r,i,a=this;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Vi(this.li,18e5)){e.next=6;break}return this.li=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=fg(e,"clientMetadata");return t.j().next((function(e){var n=a.Si(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return _y.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this._i){n=T(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this._i.removeItem(this.Di(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pi",value:function(){var e=this;this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.mi().then((function(){return e.bi()})).then((function(){return e.pi()}))}))}},{key:"Ri",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Ei",value:function(e){var t=this;return this.oi?_y.resolve(!0):Mx(e).get("owner").next((function(n){if(null!==n&&t.Vi(n.leaseTimestampMs,5e3)&&!t.Ci(n.ownerId)){if(t.Ri(n)&&t.networkEnabled)return!0;if(!t.Ri(n)){if(!n.allowTabSynchronization)throw new qm(Vm.FAILED_PRECONDITION,Lx);return!1}}return!(!t.networkEnabled||!t.inForeground)||jx(e).j().next((function(e){return void 0===t.Si(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Om("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Kn(Bn().mark((function e(){var t=this;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),e.next=7,this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new hg(e,Dy.ct);return t.Ai(n).next((function(){return t.Pi(n)}))}));case 7:this.wi.close(),this.Mi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Si",value:function(e,t){var n=this;return e.filter((function(e){return n.Vi(e.updateTimeMs,t)&&!n.Ci(e.clientId)}))}},{key:"$i",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return jx(t).j().next((function(t){return e.Si(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Fs}},{key:"getMutationQueue",value:function(e,t){return Q_.de(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new j_(e,this.serializer.fe.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return d_.de(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;Om("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.ui)?lg:14===i?cg:13===i?sg:12===i?ug:11===i?og:void Mm();return this.wi.runTransaction(e,o,u,(function(i){return a=new hg(i,r.Os?r.Os.next():Dy.ct),"readwrite-primary"===t?r.Ti(a).next((function(e){return!!e||r.Ei(a)})).next((function(t){if(!t)throw Dm("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.ii.enqueueRetryable((function(){return r.fi(!1)})),new qm(Vm.FAILED_PRECONDITION,gy);return n(a)})).next((function(e){return r.vi(a).next((function(){return e}))})):r.Oi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Oi",value:function(e){var t=this;return Mx(e).get("owner").next((function(e){if(null!==e&&t.Vi(e.leaseTimestampMs,5e3)&&!t.Ci(e.ownerId)&&!t.Ri(e)&&!(t.oi||t.allowTabSynchronization&&e.allowTabSynchronization))throw new qm(Vm.FAILED_PRECONDITION,Lx)}))}},{key:"vi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Mx(e).put("owner",t)}},{key:"Ai",value:function(e){var t=this,n=Mx(e);return n.get("owner").next((function(e){return t.Ri(e)?(Om("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):_y.resolve()}))}},{key:"Vi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Dm("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"gi",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=function(){e.ii.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.mi()}))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ni",value:function(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}},{key:"yi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=function(){t.xi();var e=/(?:Version|Mobile)\/1[456]/;!fr()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.ii.enterRestrictedMode(!0),t.ii.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ci))}},{key:"ki",value:function(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}},{key:"Ci",value:function(e){var t;try{var n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Om("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Dm("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"xi",value:function(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Dm("Failed to set zombie client id.",e)}}},{key:"Mi",value:function(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(e){}}},{key:"Di",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return Sy.D()}}]),e}();function Mx(e){return fg(e,"owner")}function jx(e){return fg(e,"clientMetadata")}function Ux(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Vx=function(){function e(t,n,r,i){f(this,e),this.targetId=t,this.fromCache=n,this.Fi=r,this.Bi=i}return m(e,null,[{key:"Li",value:function(t,n){var r,i=hb(),a=hb(),o=T(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),qx=function(){function e(){f(this,e),this.qi=!1}return m(e,[{key:"initialize",value:function(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ki(e,t).next((function(a){return a||i.Gi(e,t,r,n)})).next((function(n){return n||i.Qi(e,t)}))}},{key:"Ki",value:function(e,t){var n=this;if(Uk(t))return _y.resolve(null);var r=Wk(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Hk(t,null,"F"),r=Wk(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=hb.apply(void 0,h(i));return n.Ui.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.ji(t,i);return n.zi(t,o,a,r.readTime)?n.Ki(e,Hk(t,null,"F")):n.Wi(e,o,t,r)}))}))})))}))}},{key:"Gi",value:function(e,t,n,r){var i=this;return Uk(t)||r.isEqual(ry.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((function(a){var o=i.ji(t,a);return i.zi(t,o,n,r)?i.Qi(e,t):(Rm()<=Gr.DEBUG&&Om("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),$k(t)),i.Wi(e,o,t,py(r,-1)))}))}},{key:"ji",value:function(e,t){var n=new kg(Xk(e));return t.forEach((function(t,r){Yk(e,r)&&(n=n.add(r))})),n}},{key:"zi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Qi",value:function(e,t){return Rm()<=Gr.DEBUG&&Om("QueryEngine","Using full collection scan to execute query:",$k(t)),this.Ui.getDocumentsMatchingQuery(e,t,my.min())}},{key:"Wi",value:function(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),zx=function(){function e(t,n,r,i){f(this,e),this.persistence=t,this.Hi=n,this.serializer=i,this.Ji=new mg(Zm),this.Yi=new eb((function(e){return Nk(e)}),Pk),this.Xi=new Map,this.Zi=t.getRemoteDocumentCache(),this.Bs=t.getTargetCache(),this.qs=t.getBundleCache(),this.tr(r)}return m(e,[{key:"tr",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wx(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ji)}))}}]),e}();function Bx(e,t,n,r){return new zx(e,t,n,r)}function Wx(e,t){return Kx.apply(this,arguments)}function Kx(){return(Kx=Kn(Bn().mark((function e(t,n){var r;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Um(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.tr(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=hb(),s=T(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,h=T(c.mutations);try{for(h.s();!(l=h.n()).done;){var f=l.value;u=u.add(f.key)}}catch(k){h.e(k)}finally{h.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=T(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=T(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{er:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hx(e,t){var n=Um(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=_y.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);jm(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=hb(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Gx(e){var t=Um(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Bs.getLastRemoteSnapshotVersion(e)}))}function Qx(e,t){var n=Um(e),r=t.snapshotVersion,i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Bs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Bs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(u)?c=c.withResumeToken(Sg.EMPTY_BYTE_STRING,ry.min()).withLastLimboFreeSnapshotVersion(ry.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Bs.updateTargetData(e,c))}}));var u=nb(),s=hb();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push($x(e,a,t.documentUpdates).next((function(e){u=e.nr,s=e.sr}))),!r.isEqual(ry.min())){var c=n.Bs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return _y.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Ji=i,e}))}function $x(e,t,n){var r=hb(),i=hb();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=nb();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(ry.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Om("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{nr:r,sr:i}}))}function Yx(e,t){var n=Um(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Jx(e,t){var n=Um(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Bs.getTargetData(e,t).next((function(i){return i?(r=i,_y.resolve(r)):n.Bs.allocateTargetId(e).next((function(i){return r=new Jw(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}function Xx(e,t,n){return Zx.apply(this,arguments)}function Zx(){return(Zx=Kn(Bn().mark((function e(t,n,r){var i,a,o;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Um(t),a=i.Ji.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Iy(e.t1)){e.next=12;break}throw e.t1;case 12:Om("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ji=i.Ji.remove(n),i.Yi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function eS(e,t,n){var r=Um(e),i=ry.min(),a=hb();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Um(e),i=r.Yi.get(n);return void 0!==i?_y.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,Wk(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Hi.getDocumentsMatchingQuery(e,t,n?i:ry.min(),n?a:hb())})).next((function(e){return rS(r,Jk(t),e),{documents:e,ir:a}}))}))}function tS(e,t){var n=Um(e),r=Um(n.Bs),i=n.Ji.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.le(e,t).next((function(e){return e?e.target:null}))}))}function nS(e,t){var n=Um(e),r=n.Xi.get(t)||ry.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Zi.getAllFromCollectionGroup(e,t,py(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return rS(n,t,e),e}))}function rS(e,t,n){var r=e.Xi.get(t)||ry.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}function iS(e,t,n,r){return aS.apply(this,arguments)}function aS(){return aS=Kn(Bn().mark((function e(t,n,r,i){var a,o,u,s,c,l,h,f,d,p;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Um(t),o=hb(),u=nb(),s=T(r);try{for(s.s();!(c=s.n()).done;)l=c.value,h=n.rr(l.metadata.name),l.document&&(o=o.add(h)),(f=n.ur(l)).setReadTime(n.cr(l.metadata.readTime)),u=u.insert(h,f)}catch(v){s.e(v)}finally{s.f()}return d=a.Zi.newChangeBuffer({trackRemovals:!0}),e.next=7,Jx(a,function(e){return Wk(jk(ay.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return $x(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Bs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Bs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.nr,t.sr)})).next((function(){return t.nr}))}))})));case 9:case"end":return e.stop()}}),e)}))),aS.apply(this,arguments)}function oS(e,t){return uS.apply(this,arguments)}function uS(){return uS=Kn(Bn().mark((function e(t,n){var r,i,a,o=arguments;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:hb(),e.next=3,Jx(t,Wk(o_(n.bundledQuery)));case 3:return i=e.sent,a=Um(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Ew(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.qs.saveNamedQuery(e,n);var o=i.withResumeToken(Sg.EMPTY_BYTE_STRING,t);return a.Ji=a.Ji.insert(o.targetId,o),a.Bs.updateTargetData(e,o).next((function(){return a.Bs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Bs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.qs.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),uS.apply(this,arguments)}function sS(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function cS(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function lS(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var hS=function(){function e(t,n,r,i){f(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return m(e,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new qm(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Dm("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),fS=function(){function e(t,n,r){f(this,e),this.targetId=t,this.state=n,this.error=r}return m(e,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new qm(i.error.code,i.error.message))),a?new e(t,i.state,r):(Dm("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),dS=function(){function e(t,n){f(this,e),this.clientId=t,this.activeTargetIds=n}return m(e,null,[{key:"ar",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=db(),o=0;i&&o<r.activeTargetIds.length;++o)i=My(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Dm("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),pS=function(){function e(t,n){f(this,e),this.clientId=t,this.onlineState=n}return m(e,null,[{key:"ar",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Dm("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),vS=function(){function e(){f(this,e),this.activeTargetIds=db()}return m(e,[{key:"lr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"dr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"hr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),mS=function(){function e(t,n,r,i,a){f(this,e),this.window=t,this.ii=n,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new mg(Zm),this.started=!1,this.yr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=sS(this.persistenceKey,this.wr),this.Ir=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gr=this.gr.insert(this.wr,new vS),this.Tr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Er=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Ar=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.vr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Rr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this._r)}return m(e,[{key:"start",value:function(){var e=Kn(Bn().mark((function e(){var t,n,r,i,a,o,u,s,c,l,h,f=this;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.$i();case 2:t=e.sent,n=T(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.wr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(sS(this.persistenceKey,i)))&&(o=dS.ar(i,a))&&(this.gr=this.gr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Pr(),(u=this.storage.getItem(this.vr))&&(s=this.br(u))&&this.Vr(s),c=T(this.yr);try{for(c.s();!(l=c.n()).done;)h=l.value,this.mr(h)}catch(d){c.e(d)}finally{c.f()}this.yr=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Ir,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Sr(this.gr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.gr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Dr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Dr(e,t,n),this.Cr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(lS(this.persistenceKey,e));if(n){var r=fS.ar(e,n);r&&(t=r.state)}}return this.Nr.lr(e),this.Pr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Nr.dr(e),this.Pr()}},{key:"isLocalQueryTarget",value:function(e){return this.Nr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(lS(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.kr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Cr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Mr(e)}},{key:"notifyBundleLoaded",value:function(e){this.$r(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Om("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Om("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Om("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"mr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Om("SharedClientState","EVENT",n.key,n.newValue),n.key===this.pr)return void Dm("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable(Kn(Bn().mark((function e(){var r,i,a,o,u,s,c;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.Tr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Or(n.key),e.abrupt("return",t.Fr(r,null));case 6:if(!(i=t.Br(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Fr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.Er.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Lr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.qr(a));case 16:e.next=41;break;case 18:if(!t.Ar.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Ur(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Kr(o));case 23:e.next=41;break;case 25:if(n.key!==t.vr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.br(n.newValue))){e.next=30;break}return e.abrupt("return",t.Vr(u));case 30:e.next=41;break;case 32:if(n.key!==t.Ir){e.next=37;break}s=function(e){var t=Dy.ct;if(null!=e)try{var n=JSON.parse(e);jm("number"==typeof n),t=n}catch(e){Dm("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Dy.ct&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.Rr){e.next=41;break}return c=t.Gr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Qr(e)})));case 41:e.next=44;break;case 43:t.yr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Nr",get:function(){return this.gr.get(this.wr)}},{key:"Pr",value:function(){this.setItem(this.pr,this.Nr.hr())}},{key:"Dr",value:function(e,t,n){var r=new hS(this.currentUser,e,t,n),i=cS(this.persistenceKey,this.currentUser,e);this.setItem(i,r.hr())}},{key:"Cr",value:function(e){var t=cS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Mr",value:function(e){var t={clientId:this.wr,onlineState:e};this.storage.setItem(this.vr,JSON.stringify(t))}},{key:"kr",value:function(e,t,n){var r=lS(this.persistenceKey,e),i=new fS(e,t,n);this.setItem(r,i.hr())}},{key:"$r",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}},{key:"Or",value:function(e){var t=this.Tr.exec(e);return t?t[1]:null}},{key:"Br",value:function(e,t){var n=this.Or(e);return dS.ar(n,t)}},{key:"Lr",value:function(e,t){var n=this.Er.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return hS.ar(new Am(i),r,t)}},{key:"Ur",value:function(e,t){var n=this.Ar.exec(e),r=Number(n[1]);return fS.ar(r,t)}},{key:"br",value:function(e){return pS.ar(e)}},{key:"Gr",value:function(e){return JSON.parse(e)}},{key:"qr",value:function(){var e=Kn(Bn().mark((function e(t){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.jr(t.batchId,t.state,t.error));case 2:Om("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Kr",value:function(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}},{key:"Fr",value:function(e,t){var n=this,r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Wr(o,u).then((function(){n.gr=r}))}},{key:"Vr",value:function(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Sr",value:function(e){var t=db();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),e}(),yS=function(){function e(){f(this,e),this.Hr=new vS,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return m(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Jr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Hr.dr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Jr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Hr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Hr=new vS,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),gS=function(){function e(){f(this,e)}return m(e,[{key:"Yr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),kS=function(){function e(){var t=this;f(this,e),this.Xr=function(){return t.Zr()},this.eo=function(){return t.no()},this.so=[],this.io()}return m(e,[{key:"Yr",value:function(e){this.so.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}},{key:"io",value:function(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}},{key:"Zr",value:function(){Om("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=T(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"no",value:function(){Om("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=T(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),bS=null;function wS(){return null===bS?bS=268435456+Math.round(2147483648*Math.random()):bS++,"0x"+bS.toString(16)}var _S={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},xS=function(){function e(t){f(this,e),this.ro=t.ro,this.oo=t.oo}return m(e,[{key:"uo",value:function(e){this.co=e}},{key:"ao",value:function(e){this.ho=e}},{key:"onMessage",value:function(e){this.lo=e}},{key:"close",value:function(){this.oo()}},{key:"send",value:function(e){this.ro(e)}},{key:"fo",value:function(){this.co()}},{key:"wo",value:function(e){this.ho(e)}},{key:"_o",value:function(e){this.lo(e)}}]),e}(),SS="WebChannelConnection",ES=function(e){g(n,e);var t=_(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return m(n,[{key:"Ao",value:function(e,t,n,r){var i=wS();return new Promise((function(a,o){var u=new Em;u.setWithCredentials(!0),u.listenOnce(bm.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case km.NO_ERROR:var t=u.getResponseJson();Om(SS,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case km.TIMEOUT:Om(SS,"RPC '".concat(e,"' ").concat(i," timed out")),o(new qm(Vm.DEADLINE_EXCEEDED,"Request time out"));break;case km.HTTP_ERROR:var n=u.getStatus();if(Om(SS,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Vm).indexOf(t)>=0?t:Vm.UNKNOWN}(s.status);o(new qm(c,s.message))}else o(new qm(Vm.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new qm(Vm.UNAVAILABLE,"Connection failed."));break;default:Mm()}}finally{Om(SS,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);Om(SS,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"Ro",value:function(e,t,n){var r=wS(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=ym(),o=gm(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},s=this.longPollingOptions.timeoutSeconds;void 0!==s&&(u.longPollingTimeout=Math.round(1e3*s)),this.useFetchStreams&&(u.xmlHttpFactory=new xm({})),this.Eo(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var c=i.join("");Om(SS,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),u);var l=a.createWebChannel(c,u),h=!1,f=!1,d=new xS({ro:function(t){f?Om(SS,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Om(SS,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),h=!0),Om(SS,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},oo:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,Sm.EventType.OPEN,(function(){f||Om(SS,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,Sm.EventType.CLOSE,(function(){f||(f=!0,Om(SS,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.wo())})),p(l,Sm.EventType.ERROR,(function(t){f||(f=!0,Lm(SS,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.wo(new qm(Vm.UNAVAILABLE,"The operation could not be completed")))})),p(l,Sm.EventType.MESSAGE,(function(t){var n;if(!f){var i=t.data[0];jm(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){Om(SS,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=Wb[e];if(void 0!==t)return Zb(t)}(u),c=o.message;void 0===s&&(s=Vm.INTERNAL,c="Unknown error status: "+u+" with message "+o.message),f=!0,d.wo(new qm(s,c)),l.close()}else Om(SS,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d._o(i)}})),p(o,wm.STAT_EVENT,(function(t){t.stat===_m.PROXY?Om(SS,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===_m.NOPROXY&&Om(SS,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.fo()}),0),d}}]),n}(function(){function e(t){f(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.mo=n+"://"+t.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return m(e,[{key:"po",get:function(){return!1}},{key:"Io",value:function(e,t,n,r,i){var a=wS(),o=this.To(e,t);Om("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={};return this.Eo(u,r,i),this.Ao(e,o,u,n).then((function(t){return Om("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw Lm("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"vo",value:function(e,t,n,r,i,a){return this.Io(e,t,n,r,i)}},{key:"Eo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Nm,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"To",value:function(e,t){var n=_S[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}]),e}());function TS(){return"undefined"!=typeof window?window:null}function IS(){return"undefined"!=typeof document?document:null}function CS(e){return new bw(e,!0)}var AS=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;f(this,e),this.ii=t,this.timerId=n,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}return m(e,[{key:"reset",value:function(){this.So=0}},{key:"xo",value:function(){this.So=this.Vo}},{key:"No",value:function(e){var t=this;this.cancel();var n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&Om("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,(function(){return t.Co=Date.now(),e()})),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}},{key:"Mo",value:function(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}},{key:"cancel",value:function(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"ko",value:function(){return(Math.random()-.5)*this.So}}]),e}(),NS=function(){function e(t,n,r,i,a,o,u,s){f(this,e),this.ii=t,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new AS(t,n)}return m(e,[{key:"Uo",value:function(){return 1===this.state||5===this.state||this.Ko()}},{key:"Ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Go()}},{key:"stop",value:function(){var e=Kn(Bn().mark((function e(){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Uo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Qo",value:function(){this.state=0,this.qo.reset()}},{key:"jo",value:function(){var e=this;this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(function(){return e.zo()})))}},{key:"Wo",value:function(e){this.Ho(),this.stream.send(e)}},{key:"zo",value:function(){var e=Kn(Bn().mark((function e(){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ho",value:function(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}},{key:"Jo",value:function(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}},{key:"close",value:function(){var e=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==t?this.qo.reset():n&&n.code===Vm.RESOURCE_EXHAUSTED?(Dm(n.toString()),Dm("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===Vm.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.ao(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Yo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=c(t,2),i=r[0],a=r[1];e.Fo===n&&e.Zo(i,a)}),(function(n){t((function(){var t=new qm(Vm.UNKNOWN,"Fetching auth token failed: "+n.message);return e.tu(t)}))}))}},{key:"Zo",value:function(e,t){var n=this,r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((function(){r((function(){return n.state=2,n.Lo=n.ii.enqueueAfterDelay(n.Oo,1e4,(function(){return n.Ko()&&(n.state=3),Promise.resolve()})),n.listener.uo()}))})),this.stream.ao((function(e){r((function(){return n.tu(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Go",value:function(){var e=this;this.state=5,this.qo.No(Kn(Bn().mark((function t(){return Bn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"tu",value:function(e){return Om("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Xo",value:function(e){var t=this;return function(n){t.ii.enqueueAndForget((function(){return t.Fo===e?n():(Om("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),PS=function(e){g(n,e);var t=_(n);function n(e,r,i,a,o,u){var s;return f(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return m(n,[{key:"eu",value:function(e,t){return this.connection.Ro("Listen",e,t)}},{key:"onMessage",value:function(e){this.qo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Mm()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(jm(void 0===t||"string"==typeof t),Sg.fromBase64String(t||"")):(jm(void 0===t||t instanceof Uint8Array),Sg.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Vm.UNKNOWN:Zb(e.code);return new qm(t,e.message||"")}(o);n=new fw(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Aw(e,s.document.name),l=Ew(s.document.updateTime),h=s.document.createTime?Ew(s.document.createTime):ry.min(),f=new tk({mapValue:{fields:s.document.fields}}),d=rk.newFoundDocument(c,l,h,f),p=s.targetIds||[],v=s.removedTargetIds||[];n=new lw(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=Aw(e,m.document),g=m.readTime?Ew(m.readTime):ry.min(),k=rk.newNoDocument(y,g),b=m.removedTargetIds||[];n=new lw([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var _=Aw(e,w.document),x=w.removedTargetIds||[];n=new lw([],x,_,null)}else{if(!("filter"in t))return Mm();t.filter;var S=t.filter;S.targetId;var E=S.count,T=void 0===E?0:E,I=S.unchangedNames,C=new Jb(T,I),A=S.targetId;n=new hw(A,C)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ry.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?ry.min():t.readTime?Ew(t.readTime):ry.min()}(e);return this.listener.nu(t,n)}},{key:"su",value:function(e){var t={};t.database=Rw(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=Rk(r)?{documents:Uw(e,r)}:{query:Vw(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=xw(e,t.resumeToken);var i=ww(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(ry.min())>0){n.readTime=_w(e,t.snapshotVersion.toTimestamp());var a=ww(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Mm()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}},{key:"iu",value:function(e){var t={};t.database=Rw(this.serializer),t.removeTarget=e,this.Wo(t)}}]),n}(NS),RS=function(e){g(n,e);var t=_(n);function n(e,r,i,a,o,u){var s;return f(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s.ru=!1,s}return m(n,[{key:"ou",get:function(){return this.ru}},{key:"start",value:function(){this.ru=!1,this.lastStreamToken=void 0,tf(k(n.prototype),"start",this).call(this)}},{key:"Yo",value:function(){this.ru&&this.uu([])}},{key:"eu",value:function(e,t){return this.connection.Ro("Write",e,t)}},{key:"onMessage",value:function(e){if(jm(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();var t=function(e,t){return e&&e.length>0?(jm(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Ew(e.updateTime):Ew(t);return n.isEqual(ry.min())&&(n=Ew(t)),new Nb(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Ew(e.commitTime);return this.listener.cu(n,t)}return jm(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}},{key:"hu",value:function(){var e={};e.database=Rw(this.serializer),this.Wo(e)}},{key:"uu",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Mw(t.serializer,e)}))};this.Wo(n)}}]),n}(NS),OS=function(e){g(n,e);var t=_(n);function n(e,r,i,a){var o;return f(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.lu=!1,o}return m(n,[{key:"fu",value:function(){if(this.lu)throw new qm(Vm.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Io",value:function(e,t,n){var r=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=c(i,2),o=a[0],u=a[1];return r.connection.Io(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Vm.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new qm(Vm.UNKNOWN,e.toString())}))}},{key:"vo",value:function(e,t,n,r){var i=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=c(a,2),u=o[0],s=o[1];return i.connection.vo(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Vm.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new qm(Vm.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.lu=!0}}]),n}(function(){return m((function e(){f(this,e)}))}());var DS=function(){function e(t,n){f(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}return m(e,[{key:"gu",value:function(){var e=this;0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e._u=null,e.pu("Backend didn't respond within 10 seconds."),e.yu("Offline"),Promise.resolve()})))}},{key:"Iu",value:function(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}},{key:"set",value:function(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}},{key:"yu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"pu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(Dm(t),this.mu=!1):Om("OnlineStateTracker",t)}},{key:"Tu",value:function(){null!==this._u&&(this._u.cancel(),this._u=null)}}]),e}(),LS=m((function e(t,n,r,i,a){var o=this;f(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr((function(e){r.enqueueAndForget(Kn(Bn().mark((function e(){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=HS(o),!e.t0){e.next=5;break}return Om("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Kn(Bn().mark((function e(t){var n;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Um(t)).vu.add(4),e.next=4,jS(n);case 4:return n.bu.set("Unknown"),n.vu.delete(4),e.next=8,FS(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.bu=new DS(r,i)}));function FS(e){return MS.apply(this,arguments)}function MS(){return(MS=Kn(Bn().mark((function e(t){var n,r,i;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!HS(t)){e.next=18;break}n=T(t.Ru),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function jS(e){return US.apply(this,arguments)}function US(){return(US=Kn(Bn().mark((function e(t){var n,r,i;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=T(t.Ru),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function VS(e,t){var n=Um(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),KS(n)?WS(n):wE(n).Ko()&&zS(n,t))}function qS(e,t){var n=Um(e),r=wE(n);n.Au.delete(t),r.Ko()&&BS(n,t),0===n.Au.size&&(r.Ko()?r.jo():HS(n)&&n.bu.set("Unknown"))}function zS(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ry.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}wE(e).su(t)}function BS(e,t){e.Vu.qt(t),wE(e).iu(t)}function WS(e){e.Vu=new pw({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},le:function(t){return e.Au.get(t)||null},ue:function(){return e.datastore.serializer.databaseId}}),wE(e).start(),e.bu.gu()}function KS(e){return HS(e)&&!wE(e).Uo()&&e.Au.size>0}function HS(e){return 0===Um(e).vu.size}function GS(e){e.Vu=void 0}function QS(e){return $S.apply(this,arguments)}function $S(){return($S=Kn(Bn().mark((function e(t){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Au.forEach((function(e,n){zS(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function YS(e,t){return JS.apply(this,arguments)}function JS(){return(JS=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:GS(t),KS(t)?(t.bu.Iu(n),WS(t)):t.bu.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function XS(e,t,n){return ZS.apply(this,arguments)}function ZS(){return ZS=Kn(Bn().mark((function e(t,n,r){var i;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.bu.set("Online"),!(n instanceof fw&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Kn(Bn().mark((function e(t,n){var r,i,a,o;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=T(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.Au.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.Au.delete(o),t.Vu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Om("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,eE(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof lw?t.Vu.Ht(n):n instanceof hw?t.Vu.ne(n):t.Vu.Xt(n),r.isEqual(ry.min())){e.next=29;break}return e.prev=14,e.next=17,Gx(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Vu.ce(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.Au.get(t);if(r){e.Au.set(t,r.withResumeToken(Sg.EMPTY_BYTE_STRING,r.snapshotVersion)),BS(e,t);var i=new Jw(r.target,t,n,r.sequenceNumber);zS(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Om("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,eE(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),ZS.apply(this,arguments)}function eE(e,t,n){return tE.apply(this,arguments)}function tE(){return(tE=Kn(Bn().mark((function e(t,n,r){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Iy(n)){e.next=2;break}throw n;case 2:return t.vu.add(1),e.next=5,jS(t);case 5:t.bu.set("Offline"),r||(r=function(){return Gx(t.localStore)}),t.asyncQueue.enqueueRetryable(Kn(Bn().mark((function e(){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Om("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.vu.delete(1),e.next=6,FS(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nE(e,t){return t().catch((function(n){return eE(e,n,t)}))}function rE(e){return iE.apply(this,arguments)}function iE(){return(iE=Kn(Bn().mark((function e(t){var n,r,i,a;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Um(t),r=_E(n),i=n.Eu.length>0?n.Eu[n.Eu.length-1].batchId:-1;case 2:if(!aE(n)){e.next=19;break}return e.prev=3,e.next=6,Yx(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Eu.length&&r.jo(),e.abrupt("break",19);case 10:i=a.batchId,oE(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,eE(n,e.t0);case 17:e.next=2;break;case 19:uE(n)&&sE(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function aE(e){return HS(e)&&e.Eu.length<10}function oE(e,t){e.Eu.push(t);var n=_E(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function uE(e){return HS(e)&&!_E(e).Uo()&&e.Eu.length>0}function sE(e){_E(e).start()}function cE(e){return lE.apply(this,arguments)}function lE(){return(lE=Kn(Bn().mark((function e(t){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_E(t).hu();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hE(e){return fE.apply(this,arguments)}function fE(){return(fE=Kn(Bn().mark((function e(t){var n,r,i,a;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=_E(t),r=T(t.Eu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.uu(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dE(e,t,n){return pE.apply(this,arguments)}function pE(){return(pE=Kn(Bn().mark((function e(t,n,r){var i,a;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Eu.shift(),a=$b.from(i,n,r),e.next=3,nE(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,rE(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vE(e,t){return mE.apply(this,arguments)}function mE(){return mE=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&_E(t).ou,!e.t0){e.next=4;break}return e.next=4,function(){var e=Kn(Bn().mark((function e(t,n){var r,i;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Xb(i=n.code)||i===Vm.ABORTED){e.next=7;break}return r=t.Eu.shift(),_E(t).Qo(),e.next=5,nE(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,rE(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:uE(t)&&sE(t);case 5:case"end":return e.stop()}}),e)}))),mE.apply(this,arguments)}function yE(e,t){return gE.apply(this,arguments)}function gE(){return(gE=Kn(Bn().mark((function e(t,n){var r,i;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Um(t)).asyncQueue.verifyOperationInProgress(),Om("RemoteStore","RemoteStore received new credentials"),i=HS(r),r.vu.add(3),e.next=6,jS(r);case 6:return i&&r.bu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.vu.delete(3),e.next=12,FS(r);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kE(e,t){return bE.apply(this,arguments)}function bE(){return(bE=Kn(Bn().mark((function e(t,n){var r;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Um(t),!n){e.next=7;break}return r.vu.delete(2),e.next=5,FS(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.vu.add(2),e.next=12,jS(r);case 12:r.bu.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wE(e){return e.Su||(e.Su=function(e,t,n){var r=Um(e);return r.fu(),new PS(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:QS.bind(null,e),ao:YS.bind(null,e),nu:XS.bind(null,e)}),e.Ru.push(function(){var t=Kn(Bn().mark((function t(n){return Bn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Su.Qo(),KS(e)?WS(e):e.bu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Su.stop();case 6:GS(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Su}function _E(e){return e.Du||(e.Du=function(e,t,n){var r=Um(e);return r.fu(),new RS(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:cE.bind(null,e),ao:vE.bind(null,e),au:hE.bind(null,e),cu:dE.bind(null,e)}),e.Ru.push(function(){var t=Kn(Bn().mark((function t(n){return Bn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Du.Qo(),t.next=4,rE(e);case 4:t.next=9;break;case 6:return t.next=8,e.Du.stop();case 8:e.Eu.length>0&&(Om("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Du}var xE=function(){function e(t,n,r,i,a){f(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new zm,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return m(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new qm(Vm.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function SE(e,t){if(Dm("AsyncQueue","".concat(t,": ").concat(e)),Iy(e))return new qm(Vm.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var EE=function(){function e(t){f(this,e),this.comparator=t?function(e,n){return t(e,n)||sy.comparator(e.key,n.key)}:function(e,t){return sy.comparator(e.key,t.key)},this.keyedMap=ib(),this.sortedSet=new mg(this.comparator)}return m(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),TE=function(){function e(){f(this,e),this.Cu=new mg(sy.comparator)}return m(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Mm():this.Cu=this.Cu.insert(t,e)}},{key:"xu",value:function(){var e=[];return this.Cu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),IE=function(){function e(t,n,r,i,a,o,u,s,c){f(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return m(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gk(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,EE.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),CE=m((function e(){f(this,e),this.Nu=void 0,this.listeners=[]})),AE=m((function e(){f(this,e),this.queries=new eb((function(e){return Qk(e)}),Gk),this.onlineState="Unknown",this.ku=new Set}));function NE(e,t){return PE.apply(this,arguments)}function PE(){return(PE=Kn(Bn().mark((function e(t,n){var r,i,a,o,u;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Um(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new CE),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Nu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=SE(e.t0,"Initialization of query '".concat($k(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Mu(r.onlineState),o.Nu&&n.$u(o.Nu)&&FE(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}function RE(e,t){return OE.apply(this,arguments)}function OE(){return(OE=Kn(Bn().mark((function e(t,n){var r,i,a,o,u;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Um(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function DE(e,t){var n,r=Um(e),i=!1,a=T(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=T(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.$u(o)&&(i=!0)}}catch(h){l.e(h)}finally{l.f()}s.Nu=o}}}catch(h){a.e(h)}finally{a.f()}i&&FE(r)}function LE(e,t,n){var r=Um(e),i=r.queries.get(t);if(i){var a,o=T(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function FE(e){e.ku.forEach((function(e){e.next()}))}var ME=function(){function e(t,n,r){f(this,e),this.query=t,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}return m(e,[{key:"$u",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=T(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new IE(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),a=!0):this.qu(e,this.onlineState)&&(this.Uu(e),a=!0),this.Bu=e,a}},{key:"onError",value:function(e){this.Ou.error(e)}},{key:"Mu",value:function(e){this.onlineState=e;var t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}},{key:"qu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Lu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Uu",value:function(e){e=IE.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}]),e}(),jE=function(){function e(t,n){f(this,e),this.Gu=t,this.byteLength=n}return m(e,[{key:"Qu",value:function(){return"metadata"in this.Gu}}]),e}(),UE=function(){function e(t){f(this,e),this.serializer=t}return m(e,[{key:"rr",value:function(e){return Aw(this.serializer,e)}},{key:"ur",value:function(e){return e.metadata.exists?Lw(this.serializer,e.document,!1):rk.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}},{key:"cr",value:function(e){return Ew(e)}}]),e}(),VE=function(){function e(t,n,r){f(this,e),this.ju=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=qE(t)}return m(e,[{key:"zu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;var n=ay.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Wu",value:function(e){var t,n=new Map,r=new UE(this.serializer),i=T(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.rr(a.metadata.name),s=T(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||hb()).add(u);n.set(c,l)}}catch(h){s.e(h)}finally{s.f()}}}}catch(h){i.e(h)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Kn(Bn().mark((function e(){var t,n,r,i,a;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,iS(this.localStore,new UE(this.serializer),this.documents,this.ju.id);case 2:t=e.sent,n=this.Wu(this.documents),r=T(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,oS(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Hu:this.collectionGroups,Ju:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function qE(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var zE=m((function e(t){f(this,e),this.key=t})),BE=m((function e(t){f(this,e),this.key=t})),WE=function(){function e(t,n){f(this,e),this.query=t,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=hb(),this.mutatedKeys=hb(),this.tc=Xk(t),this.ec=new EE(this.tc)}return m(e,[{key:"nc",get:function(){return this.Yu}},{key:"sc",value:function(e,t){var n=this,r=t?t.ic:new TE,i=t?t.ec:this.ec,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=Yk(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.rc(l,h)||(r.track({type:2,doc:h}),p=!0,(s&&n.tc(h,s)>0||c&&n.tc(h,c)<0)&&(u=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{ec:o,ic:r,zi:u,mutatedKeys:a}}},{key:"rc",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;var a=e.ic.xu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Mm()}};return n(e)-n(t)}(e.type,t.type)||r.tc(e.doc,t.doc)})),this.oc(n);var o=t?this.uc():[],u=0===this.Zu.size&&this.current?1:0,s=u!==this.Xu;return this.Xu=u,0!==a.length||s?{snapshot:new IE(this.query,e.ec,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}},{key:"Mu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new TE,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}},{key:"ac",value:function(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}},{key:"oc",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Yu=t.Yu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Yu=t.Yu.delete(e)})),this.current=e.current)}},{key:"uc",value:function(){var e=this;if(!this.current)return[];var t=this.Zu;this.Zu=hb(),this.ec.forEach((function(t){e.ac(t.key)&&(e.Zu=e.Zu.add(t.key))}));var n=[];return t.forEach((function(t){e.Zu.has(t)||n.push(new BE(t))})),this.Zu.forEach((function(e){t.has(e)||n.push(new zE(e))})),n}},{key:"hc",value:function(e){this.Yu=e.ir,this.Zu=hb();var t=this.sc(e.documents);return this.applyChanges(t,!0)}},{key:"lc",value:function(){return IE.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}]),e}(),KE=m((function e(t,n,r){f(this,e),this.query=t,this.targetId=n,this.view=r})),HE=m((function e(t){f(this,e),this.key=t,this.fc=!1})),GE=function(){function e(t,n,r,i,a,o){f(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new eb((function(e){return Qk(e)}),Gk),this._c=new Map,this.mc=new Set,this.gc=new mg(sy.comparator),this.yc=new Map,this.Ic=new Sx,this.Tc={},this.Ec=new Map,this.Ac=Z_.Mn(),this.onlineState="Unknown",this.vc=void 0}return m(e,[{key:"isPrimaryClient",get:function(){return!0===this.vc}}]),e}();function QE(e,t){return $E.apply(this,arguments)}function $E(){return($E=Kn(Bn().mark((function e(t,n){var r,i,a,o,u,s;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=qT(t),!(o=r.wc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.lc(),e.next=15;break;case 6:return e.next=8,Jx(r.localStore,Wk(n));case 8:return u=e.sent,s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=13,YE(r,n,i,"current"===s,u.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&VS(r.remoteStore,u);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function YE(e,t,n,r,i){return JE.apply(this,arguments)}function JE(){return JE=Kn(Bn().mark((function e(t,n,r,i,a){var o,u,s,c,l,h;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Rc=function(e,n,r){return function(){var e=Kn(Bn().mark((function e(t,n,r,i){var a,o,u;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.sc(r),e.t0=a.zi,!e.t0){e.next=6;break}return e.next=5,eS(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.sc(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(yT(t,n.targetId,u.cc),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,eS(t.localStore,n,!0);case 3:return o=e.sent,u=new WE(n,o.ir),s=u.sc(o.documents),c=cw.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),yT(t,r,l.cc),h=new KE(n,r,u),e.abrupt("return",(t.wc.set(n,h),t._c.has(r)?t._c.get(r).push(n):t._c.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),JE.apply(this,arguments)}function XE(e,t){return ZE.apply(this,arguments)}function ZE(){return(ZE=Kn(Bn().mark((function e(t,n){var r,i,a;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Um(t),i=r.wc.get(n),!((a=r._c.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r._c.set(i.targetId,a.filter((function(e){return!Gk(e,n)}))),void r.wc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Xx(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),qS(r.remoteStore,i.targetId),vT(r,i.targetId)})).catch(by);case 9:e.next=14;break;case 11:return vT(r,i.targetId),e.next=14,Xx(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eT(e,t,n){return tT.apply(this,arguments)}function tT(){return tT=Kn(Bn().mark((function e(t,n,r){var i,a,o;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=zT(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Um(e),a=ny.now(),o=t.reduce((function(e,t){return e.add(t.key)}),hb());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=nb(),s=hb();return i.Zi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=T(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Mb(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new Vb(c.key,l,nk(l.value.mapValue),Pb.exists(!0)))}}catch(h){s.e(h)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:ab(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Tc[e.currentUser.toKey()];r||(r=new mg(Zm)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,bT(i,a.changes);case 9:return e.next=11,rE(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=SE(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),tT.apply(this,arguments)}function nT(e,t){return rT.apply(this,arguments)}function rT(){return(rT=Kn(Bn().mark((function e(t,n){var r,i;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Um(t),e.prev=1,e.next=4,Qx(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.yc.get(t);n&&(jm(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.fc=!0:e.modifiedDocuments.size>0?jm(n.fc):e.removedDocuments.size>0&&(jm(n.fc),n.fc=!1))})),e.next=8,bT(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,by(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function iT(e,t,n){var r=Um(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.wc.forEach((function(e,n){var r=n.view.Mu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Um(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=T(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Mu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&FE(n)}(r.eventManager,t),i.length&&r.dc.nu(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function aT(e,t,n){return oT.apply(this,arguments)}function oT(){return(oT=Kn(Bn().mark((function e(t,n,r){var i,a,o,u,s,c;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Um(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.yc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new mg(sy.comparator)).insert(o,rk.newNoDocument(o,ry.min())),s=hb().add(o),c=new sw(ry.min(),new Map,new mg(Zm),u,s),e.next=9,nT(i,c);case 9:i.gc=i.gc.remove(o),i.yc.delete(n),kT(i),e.next=16;break;case 14:return e.next=16,Xx(i.localStore,n,!1).then((function(){return vT(i,n,r)})).catch(by);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uT(e,t){return sT.apply(this,arguments)}function sT(){return(sT=Kn(Bn().mark((function e(t,n){var r,i,a;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Um(t),i=n.batch.batchId,e.prev=1,e.next=4,Hx(r.localStore,n);case 4:return a=e.sent,pT(r,i,null),dT(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,bT(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,by(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function cT(e,t,n){return lT.apply(this,arguments)}function lT(){return(lT=Kn(Bn().mark((function e(t,n,r){var i,a;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Um(t),e.prev=1,e.next=4,function(e,t){var n=Um(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return jm(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,pT(i,n,r),dT(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,bT(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,by(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function hT(e,t){return fT.apply(this,arguments)}function fT(){return(fT=Kn(Bn().mark((function e(t,n){var r,i,a,o;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return HS((r=Um(t)).remoteStore)||Om("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Um(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Ec.get(i)||[]).push(n),r.Ec.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=SE(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}function dT(e,t){(e.Ec.get(t)||[]).forEach((function(e){e.resolve()})),e.Ec.delete(t)}function pT(e,t,n){var r=Um(e),i=r.Tc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function vT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=T(e._c.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.wc.delete(a),n&&e.dc.Pc(a,n)}}catch(o){i.e(o)}finally{i.f()}e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((function(t){e.Ic.containsKey(t)||mT(e,t)}))}function mT(e,t){e.mc.delete(t.path.canonicalString());var n=e.gc.get(t);null!==n&&(qS(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),kT(e))}function yT(e,t,n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof zE?(e.Ic.addReference(a.key,t),gT(e,a)):a instanceof BE?(Om("SyncEngine","Document no longer in limbo: "+a.key),e.Ic.removeReference(a.key,t),e.Ic.containsKey(a.key)||mT(e,a.key)):Mm()}}catch(o){i.e(o)}finally{i.f()}}function gT(e,t){var n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(Om("SyncEngine","New document in limbo: "+n),e.mc.add(r),kT(e))}function kT(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){var t=e.mc.values().next().value;e.mc.delete(t);var n=new sy(ay.fromString(t)),r=e.Ac.next();e.yc.set(r,new HE(n)),e.gc=e.gc.insert(n,r),VS(e.remoteStore,new Jw(Wk(jk(n.path)),r,"TargetPurposeLimboResolution",Dy.ct))}}function bT(e,t,n){return wT.apply(this,arguments)}function wT(){return wT=Kn(Bn().mark((function e(t,n,r){var i,a,o,u;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Um(t),a=[],o=[],u=[],e.t0=i.wc.isEmpty(),e.t0){e.next=9;break}return i.wc.forEach((function(e,t){u.push(i.Rc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=Vx.Li(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.dc.nu(a),e.next=9,function(){var e=Kn(Bn().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Um(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return _y.forEach(n,(function(t){return _y.forEach(t.Fi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return _y.forEach(t.Bi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Iy(e.t0)){e.next=10;break}throw e.t0;case 10:Om("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=T(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Ji.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Ji=r.Ji.insert(u,l))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),wT.apply(this,arguments)}function _T(e,t){return xT.apply(this,arguments)}function xT(){return(xT=Kn(Bn().mark((function e(t,n){var r,i;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Um(t)).currentUser.isEqual(n)){e.next=11;break}return Om("SyncEngine","User change. New user:",n.toKey()),e.next=5,Wx(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Ec.forEach((function(e){e.forEach((function(e){e.reject(new qm(Vm.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,bT(r,i.er);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ST(e,t){var n=Um(e),r=n.yc.get(t);if(r&&r.fc)return hb().add(r.key);var i=hb(),a=n._c.get(t);if(!a)return i;var o,u=T(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.wc.get(s);i=i.unionWith(c.view.nc)}}catch(l){u.e(l)}finally{u.f()}return i}function ET(e,t){return TT.apply(this,arguments)}function TT(){return(TT=Kn(Bn().mark((function e(t,n){var r,i,a;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Um(t),e.next=3,eS(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.hc(i),e.abrupt("return",(r.isPrimaryClient&&yT(r,n.targetId,a.cc),a));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function IT(e,t){return CT.apply(this,arguments)}function CT(){return(CT=Kn(Bn().mark((function e(t,n){var r;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Um(t),e.abrupt("return",nS(r.localStore,n).then((function(e){return bT(r,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function AT(e,t,n,r){return NT.apply(this,arguments)}function NT(){return(NT=Kn(Bn().mark((function e(t,n,r,i){var a,o;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Um(t),e.next=3,function(e,t){var n=Um(e),r=Um(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Sn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):_y.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,rE(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(pT(a,n,i||null),dT(a,n),function(e,t){Um(Um(e).mutationQueue).Cn(t)}(a.localStore,n)):Mm();case 11:return e.next=13,bT(a,o);case 13:e.next=16;break;case 15:Om("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function PT(e,t){return RT.apply(this,arguments)}function RT(){return(RT=Kn(Bn().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(qT(r=Um(t)),zT(r),!0!==n||!0===r.vc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,OT(r,i.toArray());case 5:return a=e.sent,r.vc=!0,e.next=9,kE(r.remoteStore,!0);case 9:o=T(a);try{for(o.s();!(u=o.n()).done;)s=u.value,VS(r.remoteStore,s)}catch(h){o.e(h)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.vc){e.next=25;break}return c=[],l=Promise.resolve(),r._c.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return vT(r,t),Xx(r.localStore,t,!0)})),qS(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,OT(r,c);case 21:return function(e){var t=Um(e);t.yc.forEach((function(e,n){qS(t.remoteStore,n)})),t.Ic.Ts(),t.yc=new Map,t.gc=new mg(sy.comparator)}(r),r.vc=!1,e.next=25,kE(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function OT(e,t,n){return DT.apply(this,arguments)}function DT(){return(DT=Kn(Bn().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,f,d,p,v,m,y;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Um(t),a=[],o=[],u=T(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(h=i._c.get(c))||0===h.length){e.next=34;break}return e.next=11,Jx(i.localStore,Wk(h[0]));case 11:l=e.sent,f=T(h),e.prev=13,f.s();case 15:if((d=f.n()).done){e.next=24;break}return p=d.value,v=i.wc.get(p),e.next=20,ET(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),f.e(e.t0);case 29:return e.prev=29,f.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,tS(i.localStore,c);case 36:return y=e.sent,e.next=39,Jx(i.localStore,y);case 39:return l=e.sent,e.next=42,YE(i,LT(y),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.dc.nu(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])})))).apply(this,arguments)}function LT(e){return Mk(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function FT(e){var t=Um(e);return Um(Um(t.localStore).persistence).$i()}function MT(e,t,n,r){return jT.apply(this,arguments)}function jT(){return(jT=Kn(Bn().mark((function e(t,n,r,i){var a,o,u,s;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Um(t)).vc){e.next=3;break}return e.abrupt("return",void Om("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a._c.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,nS(a.localStore,Jk(o[0]));case 10:return u=e.sent,s=sw.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,Sg.EMPTY_BYTE_STRING),e.next=14,bT(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,Xx(a.localStore,n,!0);case 17:return vT(a,n,i),e.abrupt("break",20);case 19:Mm();case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function UT(e,t,n){return VT.apply(this,arguments)}function VT(){return(VT=Kn(Bn().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,f;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=qT(t)).vc){e.next=45;break}a=T(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i._c.has(u)){e.next=10;break}return Om("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,tS(i.localStore,u);case 12:return s=e.sent,e.next=15,Jx(i.localStore,s);case 15:return c=e.sent,e.next=18,YE(i,LT(s),c.targetId,!1,c.resumeToken);case 18:VS(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=T(r),e.prev=30,f=Bn().mark((function e(){var t;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i._c.has(t),!e.t0){e.next=5;break}return e.next=5,Xx(i.localStore,t,!1).then((function(){qS(i.remoteStore,t),vT(i,t)})).catch(by);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((h=l.n()).done){e.next=37;break}return e.delegateYield(f(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])})))).apply(this,arguments)}function qT(e){var t=Um(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=nT.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ST.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=aT.bind(null,t),t.dc.nu=DE.bind(null,t.eventManager),t.dc.Pc=LE.bind(null,t.eventManager),t}function zT(e){var t=Um(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=uT.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=cT.bind(null,t),t}function BT(e,t,n){var r=Um(e);(function(){var e=Kn(Bn().mark((function e(t,n,r){var i,a,o,u,s;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Um(e),r=Ew(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.qs.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(qE(i)),a=new VE(i,t.localStore,n.serializer),e.next=15,n.bc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.zu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.bc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,bT(t,s.Ju,void 0);case 31:return e.next=33,function(e,t){var n=Um(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.qs.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Hu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Lm("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var WT=function(){function e(){f(this,e),this.synchronizeTabs=!1}return m(e,[{key:"initialize",value:function(){var e=Kn(Bn().mark((function e(t){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=CS(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return Bx(this.persistence,new qx,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new Nx(Rx.zs,this.serializer)}},{key:"createSharedClientState",value:function(e){return new yS}},{key:"terminate",value:function(){var e=Kn(Bn().mark((function e(){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),KT=function(e){g(n,e);var t=_(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this)).Vc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return m(n,[{key:"initialize",value:function(){var e=Kn(Bn().mark((function e(t){var r=this;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tf(k(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Vc.initialize(this,t);case 4:return e.next=6,zT(this.Vc.syncEngine);case 6:return e.next=8,rE(this.Vc.remoteStore);case 8:return e.next=10,this.persistence.Ii((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return Bx(this.persistence,new qx,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new ox(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new Oy(t,this.persistence);return new Ry(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=Ux(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?K_.withCacheSize(this.cacheSizeBytes):K_.DEFAULT;return new Fx(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,TS(),IS(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new yS}}]),n}(WT),HT=function(e){g(n,e);var t=_(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,r,!1)).Vc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return m(n,[{key:"initialize",value:function(){var e=Kn(Bn().mark((function e(t){var r,i=this;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tf(k(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Vc.syncEngine,e.t0=this.sharedClientState instanceof mS,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={jr:AT.bind(null,r),zr:MT.bind(null,r),Wr:UT.bind(null,r),$i:FT.bind(null,r),Qr:IT.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ii(function(){var e=Kn(Bn().mark((function e(t){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,PT(i.Vc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=TS();if(!mS.D(t))throw new qm(Vm.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Ux(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new mS(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(KT),GT=function(){function e(){f(this,e)}return m(e,[{key:"initialize",value:function(){var e=Kn(Bn().mark((function e(t,n){var r=this;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return iT(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=_T.bind(null,this.syncEngine),e.next=12,kE(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new AE}},{key:"createDatastore",value:function(e){var t,n=CS(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new ES(t));return function(e,t,n,r){return new OS(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return iT(o.syncEngine,e,0)},a=kS.D()?new kS:new gS,new LS(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new GE(e,t,n,r,i,a);return o&&(u.vc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Kn(Bn().mark((function e(t){var n;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Um(t),Om("RemoteStore","RemoteStore shutting down."),n.vu.add(5),e.next=5,jS(n);case 5:n.Pu.shutdown(),n.bu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function QT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Kn(Bn().mark((function r(){var i;return Bn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Kn(Bn().mark((function e(){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var $T=function(){function e(t){f(this,e),this.observer=t,this.muted=!1}return m(e,[{key:"next",value:function(e){this.observer.next&&this.Sc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Sc(this.observer.error,e):Dm("Uncaught Error in snapshot listener:",e.toString())}},{key:"Dc",value:function(){this.muted=!0}},{key:"Sc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),YT=function(){function e(t,n){var r=this;f(this,e),this.Cc=t,this.serializer=n,this.metadata=new zm,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then((function(e){e&&e.Qu()?r.metadata.resolve(e.Gu.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Gu))))}),(function(e){return r.metadata.reject(e)}))}return m(e,[{key:"close",value:function(){return this.Cc.cancel()}},{key:"getMetadata",value:function(){var e=Kn(Bn().mark((function e(){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bc",value:function(){var e=Kn(Bn().mark((function e(){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Nc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Nc",value:function(){var e=Kn(Bn().mark((function e(){var t,n,r,i;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.kc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.xc.decode(t),r=Number(n),isNaN(r)&&this.Mc("length string (".concat(n,") is not valid number")),e.next=9,this.$c(r);case 9:return i=e.sent,e.abrupt("return",new jE(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"kc",value:function(){var e=Kn(Bn().mark((function e(){var t,n;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Oc()<0)){e.next=7;break}return e.next=3,this.Fc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Oc())<0&&this.Mc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"$c",value:function(){var e=Kn(Bn().mark((function e(t){var n;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Fc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Mc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.xc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mc",value:function(e){throw this.Cc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Fc",value:function(){var e=Kn(Bn().mark((function e(){var t,n;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Cc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),JT=function(){function e(t){f(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return m(e,[{key:"lookup",value:function(){var e=Kn(Bn().mark((function e(t){var n,r=this;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new qm(Vm.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Kn(Bn().mark((function e(t,n){var r,i,a,o,u,s;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Um(t),i=Rw(r.serializer)+"/documents",a={documents:n.map((function(e){return Cw(r.serializer,e)}))},e.next=5,r.vo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Fw(r.serializer,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());jm(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Hb(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Kn(Bn().mark((function e(){var t,n=this;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=sy.fromPath(t);n.mutations.push(new Gb(r,n.precondition(r)))})),e.next=7,function(){var e=Kn(Bn().mark((function e(t,n){var r,i,a;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Um(t),i=Rw(r.serializer)+"/documents",a={writes:n.map((function(e){return Mw(r.serializer,e)}))},e.next=3,r.Io("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Mm();t=ry.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new qm(Vm.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ry.min())?Pb.exists(!1):Pb.updateTime(t):Pb.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ry.min()))throw new qm(Vm.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Pb.updateTime(t)}return Pb.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),XT=function(){function e(t,n,r,i,a){f(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Bc=r.maxAttempts,this.qo=new AS(this.asyncQueue,"transaction_retry")}return m(e,[{key:"run",value:function(){this.Bc-=1,this.Lc()}},{key:"Lc",value:function(){var e=this;this.qo.No(Kn(Bn().mark((function t(){var n,r;return Bn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new JT(e.datastore),(r=e.qc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Uc(t)}))}))})).catch((function(t){e.Uc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"qc",value:function(e){try{var t=this.updateFunction(e);return!Ly(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Uc",value:function(e){var t=this;this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Lc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Xb(t)}return!1}}]),e}(),ZT=function(){function e(t,n,r,i){var a=this;f(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Am.UNAUTHENTICATED,this.clientId=Xm.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Kn(Bn().mark((function e(t){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Om("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Om("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return m(e,[{key:"getConfiguration",value:function(){var e=Kn(Bn().mark((function e(){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new qm(Vm.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new zm;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Kn(Bn().mark((function n(){var r;return Bn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=SE(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function eI(e,t){return tI.apply(this,arguments)}function tI(){return tI=Kn(Bn().mark((function e(t,n){var r,i;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Om("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Kn(Bn().mark((function e(t){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Wx(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),tI.apply(this,arguments)}function nI(e,t){return rI.apply(this,arguments)}function rI(){return(rI=Kn(Bn().mark((function e(t,n){var r,i;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,aI(t);case 3:return r=e.sent,Om("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return yE(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return yE(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function iI(e){return"FirebaseError"===e.name?e.code===Vm.FAILED_PRECONDITION||e.code===Vm.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function aI(e){return oI.apply(this,arguments)}function oI(){return(oI=Kn(Bn().mark((function e(t){var n;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return Om("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,eI(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),iI(n=e.t0)){e.next=13;break}throw n;case 13:return Lm("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,eI(t,new WT);case 16:e.next=21;break;case 18:return Om("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,eI(t,new WT);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function uI(e){return sI.apply(this,arguments)}function sI(){return(sI=Kn(Bn().mark((function e(t){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return Om("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,nI(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return Om("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,nI(t,new GT);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cI(e){return aI(e).then((function(e){return e.persistence}))}function lI(e){return aI(e).then((function(e){return e.localStore}))}function hI(e){return uI(e).then((function(e){return e.remoteStore}))}function fI(e){return uI(e).then((function(e){return e.syncEngine}))}function dI(e){return uI(e).then((function(e){return e.datastore}))}function pI(e){return vI.apply(this,arguments)}function vI(){return(vI=Kn(Bn().mark((function e(t){var n,r;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uI(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=QE.bind(null,n.syncEngine),r.onUnlisten=XE.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new zm;return e.asyncQueue.enqueueAndForget(Kn(Bn().mark((function i(){return Bn().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new $T({next:function(a){t.enqueueAndForget((function(){return RE(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new qm(Vm.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new qm(Vm.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new ME(jk(n.path),a,{includeMetadataChanges:!0,Ku:!0});return NE(e,o)},i.next=3,pI(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function yI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new zm;return e.asyncQueue.enqueueAndForget(Kn(Bn().mark((function i(){return Bn().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new $T({next:function(n){t.enqueueAndForget((function(){return RE(e,o)})),n.fromCache&&"server"===r.source?i.reject(new qm(Vm.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new ME(n,a,{includeMetadataChanges:!0,Ku:!0});return NE(e,o)},i.next=3,pI(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function gI(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var kI=new Map;function bI(e,t,n){if(!n)throw new qm(Vm.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function wI(e,t,n,r){if(!0===t&&!0===r)throw new qm(Vm.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function _I(e){if(!sy.isDocumentKey(e))throw new qm(Vm.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function xI(e){if(sy.isDocumentKey(e))throw new qm(Vm.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function SI(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Mm()}function EI(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new qm(Vm.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=SI(e);throw new qm(Vm.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function TI(e,t){if(t<=0)throw new qm(Vm.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var II=function(){function e(t){var n,r;if(f(this,e),void 0===t.host){if(void 0!==t.ssl)throw new qm(Vm.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new qm(Vm.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}wI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gI(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new qm(Vm.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new qm(Vm.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new qm(Vm.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return m(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}]),e}(),CI=function(){function e(t,n,r,i){f(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new II({}),this._settingsFrozen=!1}return m(e,[{key:"app",get:function(){if(!this._app)throw new qm(Vm.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new qm(Vm.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new II(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Wm;switch(e.type){case"firstParty":return new Qm(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new qm(Vm.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=kI.get(e);t&&(Om("ComponentProvider","Removing Datastore"),kI.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function AI(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=EI(e,CI))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Lm("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Am.MOCK_USER;else{o=cr(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new qm(Vm.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Am(s)}e._authCredentials=new Km(new Bm(o,u))}}var NI=function(){function e(t,n,r){f(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return m(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new RI(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),PI=function(){function e(t,n,r){f(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return m(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),RI=function(e){g(n,e);var t=_(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,e,r,jk(i)))._path=i,a.type="collection",a}return m(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new NI(this.firestore,null,new sy(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(PI);function OI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=zr(e),bI("collection","path",t),e instanceof CI){var a=ay.fromString.apply(ay,[t].concat(r));return xI(a),new RI(e,null,a)}if(!(e instanceof NI||e instanceof RI))throw new qm(Vm.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(ay.fromString.apply(ay,[t].concat(r)));return xI(o),new RI(e.firestore,null,o)}function DI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=zr(e),1===arguments.length&&(t=Xm.A()),bI("doc","path",t),e instanceof CI){var a=ay.fromString.apply(ay,[t].concat(r));return _I(a),new NI(e,null,new sy(a))}if(!(e instanceof NI||e instanceof RI))throw new qm(Vm.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(ay.fromString.apply(ay,[t].concat(r)));return _I(o),new NI(e.firestore,e instanceof RI?e.converter:null,new sy(o))}function LI(e,t){return e=zr(e),t=zr(t),(e instanceof NI||e instanceof RI)&&(t instanceof NI||t instanceof RI)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function FI(e,t){return e=zr(e),t=zr(t),e instanceof PI&&t instanceof PI&&e.firestore===t.firestore&&Gk(e._query,t._query)&&e.converter===t.converter}var MI=function(){function e(){var t=this;f(this,e),this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new AS(this,"async_queue_retry"),this.Xc=function(){var e=IS();e&&Om("AsyncQueue","Visibility state changed to "+e.visibilityState),t.qo.Mo()};var n=IS();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Xc)}return m(e,[{key:"isShuttingDown",get:function(){return this.jc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Zc(),this.ta(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;var t=IS();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Zc(),this.jc)return new Promise((function(){}));var n=new zm;return this.ta((function(){return t.jc&&t.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Qc.push(e),t.ea()}))}},{key:"ea",value:function(){var e=Kn(Bn().mark((function e(){var t=this;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Qc.length){e.next=14;break}return e.prev=1,e.next=4,this.Qc[0]();case 4:this.Qc.shift(),this.qo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Iy(e.t0)){e.next=12;break}throw e.t0;case 12:Om("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Qc.length>0&&this.qo.No((function(){return t.ea()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"ta",value:function(e){var t=this,n=this.Gc.then((function(){return t.Hc=!0,e().catch((function(e){t.Wc=e,t.Hc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Dm("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Hc=!1,e}))}));return this.Gc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);var i=xE.createAndSchedule(this,e,t,n,(function(e){return r.na(e)}));return this.zc.push(i),i}},{key:"Zc",value:function(){this.Wc&&Mm()}},{key:"verifyOperationInProgress",value:function(){}},{key:"sa",value:function(){var e=Kn(Bn().mark((function e(){var t;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Gc,e.next=3,t;case 3:if(t!==this.Gc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ia",value:function(e){var t,n=T(this.zc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ra",value:function(e){var t=this;return this.sa().then((function(){t.zc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=T(t.zc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.sa()}))}},{key:"oa",value:function(e){this.Yc.push(e)}},{key:"na",value:function(e){var t=this.zc.indexOf(e);this.zc.splice(t,1)}}]),e}();function jI(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=T(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var UI=function(){function e(){f(this,e),this._progressObserver={},this._taskCompletionResolver=new zm,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return m(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),VI=function(e){g(n,e);var t=_(n);function n(e,r,i,a){var o;return f(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new MI,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return m(n,[{key:"_terminate",value:function(){return this._firestoreClient||zI(this),this._firestoreClient.terminate()}}]),n}(CI);function qI(e){return e._firestoreClient||zI(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function zI(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new Rg(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,gI(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new ZT(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function BI(e,t,n){var r=new zm;return e.asyncQueue.enqueue(Kn(Bn().mark((function i(){var a;return Bn().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,eI(e,n);case 3:return i.next=5,nI(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),iI(a=i.t0)){i.next=13;break}throw a;case 13:Lm("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function WI(e){return function(e){return e.asyncQueue.enqueue(Kn(Bn().mark((function t(){var n,r;return Bn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,cI(e);case 2:return n=t.sent,t.next=5,hI(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Um(e);return t.vu.delete(0),FS(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(qI(e=EI(e,VI)))}function KI(e){return function(e){return e.asyncQueue.enqueue(Kn(Bn().mark((function t(){var n,r;return Bn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,cI(e);case 2:return n=t.sent,t.next=5,hI(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Kn(Bn().mark((function e(t){var n;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Um(t)).vu.add(0),e.next=4,jS(n);case 4:n.bu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(qI(e=EI(e,VI)))}function HI(e,t){var n=qI(e=EI(e,VI)),r=new UI;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new YT(e,t)}(function(e,t){if(e instanceof Uint8Array)return QT(e,t);if(e instanceof ArrayBuffer)return QT(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?nw().encode(e):e),t)}(n,CS(t));e.asyncQueue.enqueueAndForget(Kn(Bn().mark((function t(){return Bn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=BT,t.next=3,fI(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function GI(e,t){return function(e,t){return e.asyncQueue.enqueue(Kn(Bn().mark((function n(){return Bn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Um(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.qs.getNamedQuery(e,t)}))},n.next=3,lI(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(qI(e=EI(e,VI)),t).then((function(t){return t?new PI(e,null,t.query):null}))}function QI(e){if(e._initialized||e._terminated)throw new qm(Vm.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var $I=function(){function e(t){f(this,e),this._byteString=t}return m(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Sg.fromBase64String(t))}catch(t){throw new qm(Vm.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Sg.fromUint8Array(t))}}]),e}(),YI=function(){function e(){f(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new qm(Vm.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new uy(n)}return m(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var JI=m((function e(t){f(this,e),this._methodName=t})),XI=function(){function e(t,n){if(f(this,e),!isFinite(t)||t<-90||t>90)throw new qm(Vm.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new qm(Vm.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return m(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Zm(this._lat,e._lat)||Zm(this._long,e._long)}}]),e}(),ZI=/^__.*__$/,eC=function(){function e(t,n,r){f(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return m(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Vb(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ub(e,this.data,t,this.fieldTransforms)}}]),e}(),tC=function(){function e(t,n,r){f(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return m(e,[{key:"toMutation",value:function(e,t){return new Vb(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function nC(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Mm()}}var rC=function(){function e(t,n,r,i,a,o){f(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return m(e,[{key:"path",get:function(){return this.settings.path}},{key:"ca",get:function(){return this.settings.ca}},{key:"aa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ha",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}},{key:"da",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}},{key:"wa",value:function(e){return this.aa({path:void 0,la:!0})}},{key:"_a",value:function(e){return xC(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ua",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.fa(this.path.get(e))}},{key:"fa",value:function(e){if(0===e.length)throw this._a("Document fields must not be empty");if(nC(this.ca)&&ZI.test(e))throw this._a('Document fields cannot begin and end with "__"')}}]),e}(),iC=function(){function e(t,n,r){f(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||CS(t)}return m(e,[{key:"ya",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new rC({ca:e,methodName:t,ga:n,path:uy.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function aC(e){var t=e._freezeSettings(),n=CS(e._databaseId);return new iC(e._databaseId,!!t.ignoreUndefinedProperties,n)}function oC(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ya(a.merge||a.mergeFields?2:0,t,n,i);kC("Data must be an object, but it was:",o,r);var u,s,c=yC(r,o);if(a.merge)u=new _g(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,h=[],f=T(a.mergeFields);try{for(f.s();!(l=f.n()).done;){var d=bC(t,l.value,n);if(!o.contains(d))throw new qm(Vm.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));SC(h,d)||h.push(d)}}catch(p){f.e(p)}finally{f.f()}u=new _g(h),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new eC(new tk(c),u,s)}var uC=function(e){g(n,e);var t=_(n);function n(){return f(this,n),t.apply(this,arguments)}return m(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(JI);function sC(e,t,n){return new rC({ca:3,ga:t.settings.ga,methodName:e._methodName,la:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var cC=function(e){g(n,e);var t=_(n);function n(){return f(this,n),t.apply(this,arguments)}return m(n,[{key:"_toFieldTransform",value:function(e){return new Ab(e.path,new wb)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(JI),lC=function(e){g(n,e);var t=_(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).pa=r,i}return m(n,[{key:"_toFieldTransform",value:function(e){var t=sC(this,e,!0),n=this.pa.map((function(e){return mC(e,t)})),r=new _b(n);return new Ab(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(JI),hC=function(e){g(n,e);var t=_(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).pa=r,i}return m(n,[{key:"_toFieldTransform",value:function(e){var t=sC(this,e,!0),n=this.pa.map((function(e){return mC(e,t)})),r=new Sb(n);return new Ab(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(JI),fC=function(e){g(n,e);var t=_(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).Ia=r,i}return m(n,[{key:"_toFieldTransform",value:function(e){var t=new Tb(e.serializer,mb(e.serializer,this.Ia));return new Ab(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(JI);function dC(e,t,n,r){var i=e.ya(1,t,n);kC("Data must be an object, but it was:",i,r);var a=[],o=tk.empty();pg(r,(function(e,r){var u=_C(t,e,n);r=zr(r);var s=i.da(u);if(r instanceof uC)a.push(u);else{var c=mC(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new _g(a);return new tC(o,u,i.fieldTransforms)}function pC(e,t,n,r,i,a){var o=e.ya(1,t,n),u=[bC(t,r,n)],s=[i];if(a.length%2!=0)throw new qm(Vm.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(bC(t,a[c])),s.push(a[c+1]);for(var l=[],h=tk.empty(),f=u.length-1;f>=0;--f)if(!SC(l,u[f])){var d=u[f],p=s[f];p=zr(p);var v=o.da(d);if(p instanceof uC)l.push(d);else{var m=mC(p,v);null!=m&&(l.push(d),h.set(d,m))}}var y=new _g(l);return new tC(h,y,o.fieldTransforms)}function vC(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return mC(n,e.ya(r?4:3,t))}function mC(e,t){if(gC(e=zr(e)))return kC("Unsupported field value:",t,e),yC(e,t);if(e instanceof JI)return function(e,t){if(!nC(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=T(e);try{for(a.s();!(n=a.n()).done;){var o=mC(n.value,t.wa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=zr(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return mb(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=ny.fromDate(e);return{timestampValue:_w(t.serializer,n)}}if(e instanceof ny){var r=new ny(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:_w(t.serializer,r)}}if(e instanceof XI)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof $I)return{bytesValue:xw(t.serializer,e._byteString)};if(e instanceof NI){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t._a("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Tw(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(SI(e)))}(e,t)}function yC(e,t){var n={};return vg(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):pg(e,(function(e,r){var i=mC(r,t.ha(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function gC(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ny||e instanceof XI||e instanceof $I||e instanceof NI||e instanceof JI)}function kC(e,t,n){if(!gC(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=SI(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function bC(e,t,n){if((t=zr(t))instanceof YI)return t._internalPath;if("string"==typeof t)return _C(e,t);throw xC("Field path arguments must be of type string or ",e,!1,void 0,n)}var wC=new RegExp("[~\\*/\\[\\]]");function _C(e,t,n){if(t.search(wC)>=0)throw xC("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return x(YI,h(t.split(".")))._internalPath}catch(r){throw xC("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function xC(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new qm(Vm.INVALID_ARGUMENT,u+e+s)}function SC(e,t){return e.some((function(e){return e.isEqual(t)}))}var EC=function(){function e(t,n,r,i,a){f(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return m(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new NI(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new TC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(IC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),TC=function(e){g(n,e);var t=_(n);function n(){return f(this,n),t.apply(this,arguments)}return m(n,[{key:"data",value:function(){return tf(k(n.prototype),"data",this).call(this)}}]),n}(EC);function IC(e,t){return"string"==typeof t?_C(e,t):t instanceof YI?t._internalPath:t._delegate._internalPath}function CC(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new qm(Vm.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var AC=m((function e(){f(this,e)})),NC=function(e){g(n,e);var t=_(n);function n(){return f(this,n),t.apply(this,arguments)}return m(n)}(AC);function PC(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof AC&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof OC})).length,n=e.filter((function(e){return e instanceof RC})).length;if(t>1||t>0&&n>0)throw new qm(Vm.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=T(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var RC=function(e){g(n,e);var t=_(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return m(n,[{key:"_apply",value:function(e){var t=this._parse(e);return KC(e._query,t),new PI(e.firestore,e.converter,Kk(e._query,t))}},{key:"_parse",value:function(e){var t=aC(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new qm(Vm.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){WC(o,a);var s,c=[],l=T(o);try{for(l.s();!(s=l.n()).done;){var h=s.value;c.push(BC(r,e,h))}}catch(f){l.e(f)}finally{l.f()}u={arrayValue:{values:c}}}else u=BC(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||WC(o,a),u=vC(n,"where",o,"in"===a||"not-in"===a);return lk.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(NC);var OC=function(e){g(n,e);var t=_(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return m(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:hk.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=T(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;KC(r,a),r=Kk(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new PI(e.firestore,e.converter,Kk(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(AC);var DC=function(e){g(n,e);var t=_(n);function n(e,r){var i;return f(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return m(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new qm(Vm.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new qm(Vm.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new uk(t,n);return function(e,t){if(null===Vk(e)){var n=qk(e);null!==n&&HC(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new PI(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Fk(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(NC);var LC=function(e){g(n,e);var t=_(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return m(n,[{key:"_apply",value:function(e){return new PI(e.firestore,e.converter,Hk(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(NC);var FC=function(e){g(n,e);var t=_(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return m(n,[{key:"_apply",value:function(e){var t=zC(e,this.type,this._docOrFields,this._inclusive);return new PI(e.firestore,e.converter,function(e,t){return new Fk(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(NC);function MC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return FC._create("startAt",t,!0)}function jC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return FC._create("startAfter",t,!1)}var UC=function(e){g(n,e);var t=_(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return m(n,[{key:"_apply",value:function(e){var t=zC(e,this.type,this._docOrFields,this._inclusive);return new PI(e.firestore,e.converter,function(e,t){return new Fk(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(NC);function VC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return UC._create("endBefore",t,!1)}function qC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return UC._create("endAt",t,!0)}function zC(e,t,n,r){if(n[0]=zr(n[0]),n[0]instanceof EC)return function(e,t,n,r,i){if(!r)throw new qm(Vm.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=T(Bk(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Bg(t,r.key));else{var c=r.data.field(s.field);if(Ag(c))throw new qm(Vm.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new qm(Vm.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(h){u.e(h)}finally{u.f()}return new ik(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=aC(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new qm(Vm.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new qm(Vm.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!zk(e)&&-1!==c.indexOf("/"))throw new qm(Vm.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(ay.fromString(c));if(!sy.isDocumentKey(l))throw new qm(Vm.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var h=new sy(l);u.push(Bg(t,h))}else{var f=vC(n,r,c);u.push(f)}}return new ik(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function BC(e,t,n){if("string"==typeof(n=zr(n))){if(""===n)throw new qm(Vm.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zk(t)&&-1!==n.indexOf("/"))throw new qm(Vm.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(ay.fromString(n));if(!sy.isDocumentKey(r))throw new qm(Vm.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Bg(e,new sy(r))}if(n instanceof NI)return Bg(e,n._key);throw new qm(Vm.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(SI(n),"."))}function WC(e,t){if(!Array.isArray(e)||0===e.length)throw new qm(Vm.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function KC(e,t){if(t.isInequality()){var n=qk(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new qm(Vm.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=Vk(e);null!==i&&HC(e,r,i)}var a=function(e,t){var n,r=T(e);try{for(r.s();!(n=r.n()).done;){var i,a=T(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new qm(Vm.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new qm(Vm.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function HC(e,t,n){if(!n.isEqual(t))throw new qm(Vm.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var GC=function(){function e(){f(this,e)}return m(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Fg(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ig(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Cg(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Mm()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return pg(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new XI(Ig(e.latitude),Ig(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Ng(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Pg(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Tg(e);return new ny(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=ay.fromString(e);jm(Yw(n));var r=new Og(n.get(1),n.get(3)),i=new sy(n.popFirst(5));return r.isEqual(t)||Dm("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function QC(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var $C=function(e){g(n,e);var t=_(n);function n(e){var r;return f(this,n),(r=t.call(this)).firestore=e,r}return m(n,[{key:"convertBytes",value:function(e){return new $I(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new NI(this.firestore,null,t)}}]),n}(GC);var YC=function(){function e(t,n){f(this,e),this.hasPendingWrites=t,this.fromCache=n}return m(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),JC=function(e){g(n,e);var t=_(n);function n(e,r,i,a,o,u){var s;return f(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return m(n,[{key:"exists",value:function(){return tf(k(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new XC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(IC("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(EC),XC=function(e){g(n,e);var t=_(n);function n(){return f(this,n),t.apply(this,arguments)}return m(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return tf(k(n.prototype),"data",this).call(this,e)}}]),n}(JC),ZC=function(){function e(t,n,r,i){f(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new YC(i.hasPendingWrites,i.fromCache),this.query=r}return m(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new XC(n._firestore,n._userDataWriter,r.key,r,new YC(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new qm(Vm.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new XC(e._firestore,e._userDataWriter,t.doc.key,t.doc,new YC(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new XC(e._firestore,e._userDataWriter,t.doc.key,t.doc,new YC(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:eA(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function eA(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Mm()}}function tA(e,t){return e instanceof JC&&t instanceof JC?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof ZC&&t instanceof ZC&&e._firestore===t._firestore&&FI(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var nA=function(e){g(n,e);var t=_(n);function n(e){var r;return f(this,n),(r=t.call(this)).firestore=e,r}return m(n,[{key:"convertBytes",value:function(e){return new $I(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new NI(this.firestore,null,t)}}]),n}(GC);function rA(e){e=EI(e,NI);var t=EI(e.firestore,VI),n=qI(t),r=new nA(t);return function(e,t){var n=new zm;return e.asyncQueue.enqueueAndForget(Kn(Bn().mark((function r(){return Bn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Kn(Bn().mark((function e(t,n,r){var i,a;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Um(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new qm(Vm.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=SE(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,lI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new JC(t,r,e._key,n,new YC(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function iA(e){e=EI(e,PI);var t=EI(e.firestore,VI),n=qI(t),r=new nA(t);return function(e,t){var n=new zm;return e.asyncQueue.enqueueAndForget(Kn(Bn().mark((function r(){return Bn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Kn(Bn().mark((function e(t,n,r){var i,a,o,u,s;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,eS(t,n,!0);case 3:i=e.sent,a=new WE(n,i.ir),o=a.sc(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=SE(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,lI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new ZC(t,r,e,n)}))}function aA(e,t,n){e=EI(e,NI);var r=EI(e.firestore,VI),i=QC(e.converter,t,n);return cA(r,[oC(aC(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Pb.none())])}function oA(e,t,n){e=EI(e,NI);for(var r=EI(e.firestore,VI),i=aC(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return cA(r,[("string"==typeof(t=zr(t))||t instanceof YI?pC(i,"updateDoc",e._key,t,n,o):dC(i,"updateDoc",e._key,t)).toMutation(e._key,Pb.exists(!0))])}function uA(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=zr(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||jI(n[s])||(u=n[s],s++);var c,l,h,f={includeMetadataChanges:u.includeMetadataChanges};if(jI(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof NI)l=EI(e.firestore,VI),h=jk(e._key.path),c={next:function(t){n[s]&&n[s](lA(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=EI(e,PI);l=EI(p.firestore,VI),h=p._query;var v=new nA(l);c={next:function(e){n[s]&&n[s](new ZC(l,v,p,e))},error:n[s+1],complete:n[s+2]},CC(e._query)}return function(e,t,n,r){var i=new $T(r),a=new ME(t,i,n);return e.asyncQueue.enqueueAndForget(Kn(Bn().mark((function t(){return Bn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=NE,t.next=3,pI(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Dc(),e.asyncQueue.enqueueAndForget(Kn(Bn().mark((function t(){return Bn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=RE,t.next=3,pI(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(qI(l),h,f,c)}function sA(e,t){return function(e,t){var n=new $T(t);return e.asyncQueue.enqueueAndForget(Kn(Bn().mark((function t(){return Bn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Um(e).ku.add(t),t.next()},t.next=3,pI(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Dc(),e.asyncQueue.enqueueAndForget(Kn(Bn().mark((function t(){return Bn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Um(e).ku.delete(t)},t.next=3,pI(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(qI(e=EI(e,VI)),jI(t)?t:{next:t})}function cA(e,t){return function(e,t){var n=new zm;return e.asyncQueue.enqueueAndForget(Kn(Bn().mark((function r(){return Bn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=eT,r.next=3,fI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(qI(e),t)}function lA(e,t,n){var r=n.docs.get(t._key),i=new nA(e);return new JC(e,i,t._key,r,new YC(n.hasPendingWrites,n.fromCache),t.converter)}var hA={maxAttempts:5},fA=function(){function e(t,n){f(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=aC(t)}return m(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=dA(e,this._firestore),i=QC(r.converter,t,n),a=oC(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Pb.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=dA(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=zr(t))||t instanceof YI?pC(this._dataReader,"WriteBatch.update",i._key,t,n,o):dC(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Pb.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=dA(e,this._firestore);return this._mutations=this._mutations.concat(new Hb(t._key,Pb.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new qm(Vm.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function dA(e,t){if((e=zr(e)).firestore!==t)throw new qm(Vm.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var pA=function(e){g(n,e);var t=_(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,r))._firestore=e,i}return m(n,[{key:"get",value:function(e){var t=this,r=dA(e,this._firestore),i=new nA(this._firestore);return tf(k(n.prototype),"get",this).call(this,e).then((function(e){return new JC(t._firestore,i,r._key,e._document,new YC(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){f(this,e),this._firestore=t,this._transaction=n,this._dataReader=aC(t)}return m(e,[{key:"get",value:function(e){var t=this,n=dA(e,this._firestore),r=new $C(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Mm();var i=e[0];if(i.isFoundDocument())return new EC(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new EC(t._firestore,r,n._key,null,n.converter);throw Mm()}))}},{key:"set",value:function(e,t,n){var r=dA(e,this._firestore),i=QC(r.converter,t,n),a=oC(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=dA(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=zr(t))||t instanceof YI?pC(this._dataReader,"Transaction.update",i._key,t,n,o):dC(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=dA(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function vA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new lC("arrayUnion",t)}function mA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new hC("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Nm=e}(Ui),Ri(new Br("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new VI(new Hm(e.getProvider("auth-internal")),new Ym(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new qm(Vm.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Og(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Ki(Cm,"3.12.0",e),Ki(Cm,"3.12.0","esm2017")}();function yA(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new qm("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function gA(){if("undefined"===typeof Uint8Array)throw new qm("unimplemented","Uint8Arrays are not available in this environment.")}function kA(){if("undefined"==typeof atob)throw new qm("unimplemented","Blobs are unavailable in Firestore in this environment.")}var bA=function(){function e(t){f(this,e),this._delegate=t}return m(e,[{key:"toBase64",value:function(){return kA(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return gA(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return kA(),new e($I.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return gA(),new e($I.fromUint8Array(t))}}]),e}();function wA(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=T(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var _A=function(){function e(){f(this,e)}return m(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){QI(e=EI(e,VI));var n=qI(e);if(n._uninitializedComponentsProvider)throw new qm(Vm.FAILED_PRECONDITION,"SDK cache is already specified.");Lm("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new GT;return BI(n,i,new KT(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){QI(e=EI(e,VI));var t=qI(e);if(t._uninitializedComponentsProvider)throw new qm(Vm.FAILED_PRECONDITION,"SDK cache is already specified.");Lm("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new GT;return BI(t,r,new HT(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new qm(Vm.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new zm;return e._queue.enqueueAndForgetEvenWhileRestricted(Kn(Bn().mark((function n(){return Bn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Kn(Bn().mark((function e(t){var n;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Sy.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Sy.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Ux(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),xA=function(){function e(t,n,r){var i=this;f(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Og||(this._appCompat=t)}return m(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Lm("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};AI(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return WI(this._delegate)}},{key:"disableNetwork",value:function(){return KI(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&wI("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){var t=new zm;return e.asyncQueue.enqueueAndForget(Kn(Bn().mark((function n(){return Bn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=hT,n.next=3,fI(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(qI(EI(this._delegate,VI)))}},{key:"onSnapshotsInSync",value:function(e){return sA(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new qm("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new MA(this,OI(this._delegate,e))}catch(t){throw AA(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new CA(this,DI(this._delegate,e))}catch(t){throw AA(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new DA(this,function(e,t){if(e=EI(e,CI),bI("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new qm(Vm.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new PI(e,null,function(e){return new Fk(ay.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw AA(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=EI(e,VI);var r=Object.assign(Object.assign({},hA),n);return function(e){if(e.maxAttempts<1)throw new qm(Vm.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new zm;return e.asyncQueue.enqueueAndForget(Kn(Bn().mark((function i(){var a;return Bn().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,dI(e);case 2:a=i.sent,new XT(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(qI(e),(function(n){return t(new pA(e,n))}),r)}(this._delegate,(function(n){return e(new EA(t,n))}))}},{key:"batch",value:function(){var e=this;return qI(this._delegate),new TA(new fA(this._delegate,(function(t){return cA(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return HI(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return GI(this._delegate,e).then((function(e){return e?new DA(t,e):null}))}}]),e}(),SA=function(e){g(n,e);var t=_(n);function n(e){var r;return f(this,n),(r=t.call(this)).firestore=e,r}return m(n,[{key:"convertBytes",value:function(e){return new bA(new $I(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return CA.forKey(t,this.firestore,null)}}]),n}(GC);var EA=function(){function e(t,n){f(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new SA(t)}return m(e,[{key:"get",value:function(e){var t=this,n=jA(e);return this._delegate.get(n).then((function(e){return new RA(t._firestore,new JC(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=jA(e);return n?(yA("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=jA(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=jA(e);return this._delegate.delete(t),this}}]),e}(),TA=function(){function e(t){f(this,e),this._delegate=t}return m(e,[{key:"set",value:function(e,t,n){var r=jA(e);return n?(yA("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=jA(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=jA(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),IA=function(){function e(t,n,r){f(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return m(e,[{key:"fromFirestore",value:function(e,t){var n=new XC(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new OA(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new SA(t),n),i.set(n,a)),a}}]),e}();IA.INSTANCES=new WeakMap;var CA=function(){function e(t,n){f(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new SA(t)}return m(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new MA(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new MA(this.firestore,OI(this._delegate,e))}catch(t){throw AA(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=zr(e))instanceof NI&&LI(this._delegate,e)}},{key:"set",value:function(e,t){t=yA("DocumentReference.set",t);try{return t?aA(this._delegate,e,t):aA(this._delegate,e)}catch(n){throw AA(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?oA(this._delegate,e):oA.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw AA(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return cA(EI((e=this._delegate).firestore,VI),[new Hb(e._key,Pb.none())]);var e}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=NA(n),a=PA(n,(function(t){return new RA(e.firestore,new JC(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return uA(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?rA(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=EI(e,NI);var t=EI(e.firestore,VI);return mI(qI(t),e._key,{source:"server"}).then((function(n){return lA(t,e,n)}))}(this._delegate):function(e){e=EI(e,NI);var t=EI(e.firestore,VI);return mI(qI(t),e._key).then((function(n){return lA(t,e,n)}))}(this._delegate)).then((function(e){return new RA(t.firestore,new JC(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(IA.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new qm("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new NI(n._delegate,r,new sy(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new NI(n._delegate,r,t))}}]),e}();function AA(e,t,n){return e.message=e.message.replace(t,n),e}function NA(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!wA(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function PA(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=wA(e[0])?e[0]:wA(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var RA=function(){function e(t,n){f(this,e),this._firestore=t,this._delegate=n}return m(e,[{key:"ref",get:function(){return new CA(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return tA(this._delegate,e._delegate)}}]),e}(),OA=function(e){g(n,e);var t=_(n);function n(){return f(this,n),t.apply(this,arguments)}return m(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return void 0!==t||Mm(),t}}]),n}(RA),DA=function(){function e(t,n){f(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new SA(t)}return m(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,PC(this._delegate,function(e,t,n){var r=t,i=IC("where",e);return RC._create(i,r,n)}(t,n,r)))}catch(i){throw AA(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,PC(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=IC("orderBy",e);return DC._create(n,t)}(t,n)))}catch(r){throw AA(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,PC(this._delegate,(TI("limit",n=t),LC._create("limit",n,"F"))))}catch(r){throw AA(r,"limit()","Query.limit()")}var n}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,PC(this._delegate,(TI("limitToLast",n=t),LC._create("limitToLast",n,"L"))))}catch(r){throw AA(r,"limitToLast()","Query.limitToLast()")}var n}},{key:"startAt",value:function(){try{return new e(this.firestore,PC(this._delegate,MC.apply(void 0,arguments)))}catch(t){throw AA(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,PC(this._delegate,jC.apply(void 0,arguments)))}catch(t){throw AA(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,PC(this._delegate,VC.apply(void 0,arguments)))}catch(t){throw AA(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,PC(this._delegate,qC.apply(void 0,arguments)))}catch(t){throw AA(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return FI(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?iA(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=EI(e,PI);var t=EI(e.firestore,VI),n=qI(t),r=new nA(t);return yI(n,e._query,{source:"server"}).then((function(n){return new ZC(t,r,e,n)}))}(this._delegate):function(e){e=EI(e,PI);var t=EI(e.firestore,VI),n=qI(t),r=new nA(t);return CC(e._query),yI(n,e._query).then((function(n){return new ZC(t,r,e,n)}))}(this._delegate)).then((function(e){return new FA(t.firestore,new ZC(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=NA(n),a=PA(n,(function(t){return new FA(e.firestore,new ZC(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return uA(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(IA.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),LA=function(){function e(t,n){f(this,e),this._firestore=t,this._delegate=n}return m(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new OA(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),FA=function(){function e(t,n){f(this,e),this._firestore=t,this._delegate=n}return m(e,[{key:"query",get:function(){return new DA(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new OA(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new LA(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new OA(n._firestore,r))}))}},{key:"isEqual",value:function(e){return tA(this._delegate,e._delegate)}}]),e}(),MA=function(e){g(n,e);var t=_(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return m(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new CA(this.firestore,e):null}},{key:"doc",value:function(e){try{return new CA(this.firestore,void 0===e?DI(this._delegate):DI(this._delegate,e))}catch(t){throw AA(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=EI(e.firestore,VI),r=DI(e),i=QC(e.converter,t);return cA(n,[oC(aC(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Pb.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new CA(t.firestore,e)}))}},{key:"isEqual",value:function(e){return LI(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(IA.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(DA);function jA(e){return EI(e,NI)}var UA=function(){function e(){f(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=x(YI,n)}return m(e,[{key:"isEqual",value:function(e){return(e=zr(e))instanceof YI&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(uy.keyField().canonicalString())}}]),e}(),VA=function(){function e(t){f(this,e),this._delegate=t}return m(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new cC("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new uC("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=vA.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=mA.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=new fC("increment",t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),qA={Firestore:xA,GeoPoint:XI,Timestamp:ny,Blob:bA,Transaction:EA,WriteBatch:TA,DocumentReference:CA,DocumentSnapshot:RA,Query:DA,QueryDocumentSnapshot:OA,QuerySnapshot:FA,CollectionReference:MA,FieldPath:UA,FieldValue:VA,setLogLevel:function(e){var t;t=e,Pm.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Br("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},qA)))}(e,(function(e,t){return new xA(e,t,new _A)})),e.registerVersion("@firebase/firestore-compat","0.3.9")}(ya);function zA(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;var BA,WA={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},KA="EMAIL_SIGNIN",HA="PASSWORD_RESET",GA="RECOVER_EMAIL",QA="REVERT_SECOND_FACTOR_ADDITION",$A="VERIFY_AND_CHANGE_EMAIL",YA="VERIFY_EMAIL";function JA(){return Hn({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var XA=function(){var e;return Hn(e={},"admin-restricted-operation","This operation is restricted to administrators only."),Hn(e,"argument-error",""),Hn(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),Hn(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),Hn(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),Hn(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),Hn(e,"cordova-not-ready","Cordova framework is not ready."),Hn(e,"cors-unsupported","This browser is not supported."),Hn(e,"credential-already-in-use","This credential is already associated with a different user account."),Hn(e,"custom-token-mismatch","The custom token corresponds to a different audience."),Hn(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),Hn(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),Hn(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),Hn(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),Hn(e,"email-already-in-use","The email address is already in use by another account."),Hn(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),Hn(e,"expired-action-code","The action code has expired."),Hn(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),Hn(e,"internal-error","An internal AuthError has occurred."),Hn(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),Hn(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),Hn(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),Hn(e,"invalid-auth-event","An internal AuthError has occurred."),Hn(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),Hn(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),Hn(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),Hn(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),Hn(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),Hn(e,"invalid-email","The email address is badly formatted."),Hn(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),Hn(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),Hn(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),Hn(e,"invalid-credential","The supplied auth credential is malformed or has expired."),Hn(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),Hn(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),Hn(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),Hn(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),Hn(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),Hn(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),Hn(e,"wrong-password","The password is invalid or the user does not have a password."),Hn(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),Hn(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),Hn(e,"invalid-provider-id","The specified provider ID is invalid."),Hn(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),Hn(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),Hn(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),Hn(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),Hn(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),Hn(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),Hn(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),Hn(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),Hn(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),Hn(e,"missing-continue-uri","A continue URL must be provided in the request."),Hn(e,"missing-iframe-start","An internal AuthError has occurred."),Hn(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),Hn(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),Hn(e,"missing-password","A non-empty password must be provided"),Hn(e,"missing-multi-factor-info","No second factor identifier is provided."),Hn(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),Hn(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),Hn(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),Hn(e,"app-deleted","This instance of FirebaseApp has been deleted."),Hn(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),Hn(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),Hn(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),Hn(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),Hn(e,"no-auth-event","An internal AuthError has occurred."),Hn(e,"no-such-provider","User was not linked to an account with the given provider."),Hn(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),Hn(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),Hn(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),Hn(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),Hn(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),Hn(e,"provider-already-linked","User can only be linked to one identity for the given provider."),Hn(e,"quota-exceeded","The project's quota for this operation has been exceeded."),Hn(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),Hn(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),Hn(e,"rejected-credential","The request contains malformed or mismatching credentials."),Hn(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),Hn(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),Hn(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),Hn(e,"timeout","The operation has timed out."),Hn(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),Hn(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),Hn(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),Hn(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),Hn(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),Hn(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),Hn(e,"unverified-email","The operation requires a verified email."),Hn(e,"user-cancelled","The user did not grant your application the permissions it requested."),Hn(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),Hn(e,"user-disabled","The user account has been disabled by an administrator."),Hn(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),Hn(e,"user-signed-out",""),Hn(e,"weak-password","The password must be 6 characters long or more."),Hn(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),Hn(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),Hn(e,"missing-recaptcha-token","The reCAPTCHA token is missing when sending request to the backend."),Hn(e,"invalid-recaptcha-token","The reCAPTCHA token is invalid when sending request to the backend."),Hn(e,"invalid-recaptcha-action","The reCAPTCHA action is invalid when sending request to the backend."),Hn(e,"recaptcha-not-enabled","reCAPTCHA Enterprise integration is not enabled for this project."),Hn(e,"missing-client-type","The reCAPTCHA client type is missing when sending request to the backend."),Hn(e,"missing-recaptcha-version","The reCAPTCHA version is missing when sending request to the backend."),Hn(e,"invalid-req-type","Invalid request parameters."),Hn(e,"invalid-recaptcha-version","The reCAPTCHA version is invalid when sending request to the backend."),e},ZA=JA,eN=new kr("auth","Firebase",JA()),tN=new ei("@firebase/auth");function nN(e){if(tN.logLevel<=Gr.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];tN.warn.apply(tN,["Auth (".concat(Ui,"): ").concat(e)].concat(n))}}function rN(e){if(tN.logLevel<=Gr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];tN.error.apply(tN,["Auth (".concat(Ui,"): ").concat(e)].concat(n))}}function iN(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw sN.apply(void 0,[e].concat(n))}function aN(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return sN.apply(void 0,[e].concat(n))}function oN(e,t,n){var r=Object.assign(Object.assign({},ZA()),Hn({},t,n));return new kr("auth","Firebase",r).create(t,{appName:e.name})}function uN(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&iN(e,"argument-error"),oN(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function sN(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=h(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(h(o)))}return eN.create.apply(eN,[e].concat(n))}function cN(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw sN.apply(void 0,[t].concat(r))}}function lN(e){var t="INTERNAL ASSERTION FAILED: "+e;throw rN(t),new Error(t)}function hN(e,t){e||lN(t)}function fN(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function dN(){return"http:"===pN()||"https:"===pN()}function pN(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var vN=function(){function e(t,n){f(this,e),this.shortDelay=t,this.longDelay=n,hN(n>t,"Short delay should be less than long delay!"),this.isMobile=hr()||pr()}return m(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(dN()||dr()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function mN(e,t){hN(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var yN=function(){function e(){f(this,e)}return m(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void lN("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void lN("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void lN("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),gN=(Hn(BA={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),Hn(BA,"MISSING_CUSTOM_TOKEN","internal-error"),Hn(BA,"INVALID_IDENTIFIER","invalid-email"),Hn(BA,"MISSING_CONTINUE_URI","internal-error"),Hn(BA,"INVALID_PASSWORD","wrong-password"),Hn(BA,"MISSING_PASSWORD","missing-password"),Hn(BA,"EMAIL_EXISTS","email-already-in-use"),Hn(BA,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Hn(BA,"INVALID_IDP_RESPONSE","invalid-credential"),Hn(BA,"INVALID_PENDING_TOKEN","invalid-credential"),Hn(BA,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Hn(BA,"MISSING_REQ_TYPE","internal-error"),Hn(BA,"EMAIL_NOT_FOUND","user-not-found"),Hn(BA,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Hn(BA,"EXPIRED_OOB_CODE","expired-action-code"),Hn(BA,"INVALID_OOB_CODE","invalid-action-code"),Hn(BA,"MISSING_OOB_CODE","internal-error"),Hn(BA,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Hn(BA,"INVALID_ID_TOKEN","invalid-user-token"),Hn(BA,"TOKEN_EXPIRED","user-token-expired"),Hn(BA,"USER_NOT_FOUND","user-token-expired"),Hn(BA,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Hn(BA,"INVALID_CODE","invalid-verification-code"),Hn(BA,"INVALID_SESSION_INFO","invalid-verification-id"),Hn(BA,"INVALID_TEMPORARY_PROOF","invalid-credential"),Hn(BA,"MISSING_SESSION_INFO","missing-verification-id"),Hn(BA,"SESSION_EXPIRED","code-expired"),Hn(BA,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Hn(BA,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Hn(BA,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Hn(BA,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Hn(BA,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Hn(BA,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Hn(BA,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Hn(BA,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Hn(BA,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Hn(BA,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Hn(BA,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Hn(BA,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),Hn(BA,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),Hn(BA,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),Hn(BA,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),Hn(BA,"MISSING_CLIENT_TYPE","missing-client-type"),Hn(BA,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),Hn(BA,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),Hn(BA,"INVALID_REQ_TYPE","invalid-req-type"),BA),kN=new vN(3e4,6e4);function bN(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function wN(e,t,n,r){return _N.apply(this,arguments)}function _N(){return _N=Kn(Bn().mark((function e(t,n,r,i){var a,o=arguments;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",xN(t,a,Kn(Bn().mark((function e(){var a,o,u,s;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Nr(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",yN.fetch()(IN(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),_N.apply(this,arguments)}function xN(e,t,n){return SN.apply(this,arguments)}function SN(){return SN=Kn(Bn().mark((function e(t,n,r){var i,a,o,u,s,l,h,f,d,p;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},gN),n),e.prev=2,a=new CN(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw AN(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,l=s.split(" : "),h=c(l,2),f=h[0],d=h[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw AN(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw AN(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw AN(t,"user-disabled",u);case 29:if(p=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw oN(t,p,d);case 34:iN(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof gr)){e.next=41;break}throw e.t0;case 41:iN(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),SN.apply(this,arguments)}function EN(e,t,n,r){return TN.apply(this,arguments)}function TN(){return TN=Kn(Bn().mark((function e(t,n,r,i){var a,o,u=arguments;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,wN(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&iN(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),TN.apply(this,arguments)}function IN(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?mN(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var CN=function(){function e(t){var n=this;f(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(aN(n.auth,"network-request-failed"))}),kN.get())}))}return m(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function AN(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=aN(e,t,r);return i.customData._tokenResponse=n,i}function NN(e,t){return PN.apply(this,arguments)}function PN(){return(PN=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wN(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function RN(e,t){return ON.apply(this,arguments)}function ON(){return(ON=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wN(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function DN(e,t){return LN.apply(this,arguments)}function LN(){return(LN=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wN(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function FN(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function MN(){return MN=Kn(Bn().mark((function e(t){var n,r,i,a,o,u,s=arguments;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=zr(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,cN((a=UN(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:FN(jN(a.auth_time)),issuedAtTime:FN(jN(a.iat)),expirationTime:FN(jN(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),MN.apply(this,arguments)}function jN(e){return 1e3*Number(e)}function UN(e){var t=c(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return rN("JWT malformed, contained fewer than 3 sections"),null;try{var a=rr(r);return a?JSON.parse(a):(rN("Failed to decode base64 JWT payload"),null)}catch(o){return rN("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function VN(e,t){return qN.apply(this,arguments)}function qN(){return qN=Kn(Bn().mark((function e(t,n){var r=arguments;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof gr&&zN(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),qN.apply(this,arguments)}function zN(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var BN=function(){function e(t){f(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return m(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Kn(Bn().mark((function t(){return Bn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Kn(Bn().mark((function e(){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),WN=function(){function e(t,n){f(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return m(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=FN(this.lastLoginAt),this.creationTime=FN(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function KN(e){return HN.apply(this,arguments)}function HN(){return HN=Kn(Bn().mark((function e(t){var n,r,i,a,o,u,s,c,l,h,f;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,VN(t,DN(r,{idToken:i}));case 6:cN(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=zA(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],s=QN(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),h=!!c&&l,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new WN(o.createdAt,o.lastLoginAt),isAnonymous:h},Object.assign(t,f);case 17:case"end":return e.stop()}}),e)}))),HN.apply(this,arguments)}function GN(){return(GN=Kn(Bn().mark((function e(t){var n;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=zr(t),e.next=3,KN(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function QN(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(h(n),h(t))}function $N(e,t){return YN.apply(this,arguments)}function YN(){return(YN=Kn(Bn().mark((function e(t,n){var r;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xN(t,{},Kn(Bn().mark((function e(){var r,i,a,o,u,s;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Nr({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=IN(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",yN.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var JN=function(){function e(){f(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return m(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){cN(e.idToken,"internal-error"),cN("undefined"!==typeof e.idToken,"internal-error"),cN("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=UN(e);return cN(t,"internal-error"),cN("undefined"!==typeof t.exp,"internal-error"),cN("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Kn(Bn().mark((function e(t){var n,r=arguments;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],cN(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Kn(Bn().mark((function e(t,n){var r,i,a,o;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$N(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return lN("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(cN("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(cN("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(cN("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function XN(e,t){cN("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var ZN=function(){function e(t){f(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=zA(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new BN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?h(a.providerData):[],this.metadata=new WN(a.createdAt||void 0,a.lastLoginAt||void 0)}return m(e,[{key:"getIdToken",value:function(){var e=Kn(Bn().mark((function e(t){var n;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,VN(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(cN(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return MN.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return GN.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(cN(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){cN(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Kn(Bn().mark((function e(t){var n,r,i=arguments;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,KN(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Kn(Bn().mark((function e(){var t;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,VN(this,NN(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;cN(k&&x,t,"internal-error");var S=JN.fromJSON(this.name,x);cN("string"===typeof k,t,"internal-error"),XN(h,t.name),XN(f,t.name),cN("boolean"===typeof b,t,"internal-error"),cN("boolean"===typeof w,t,"internal-error"),XN(d,t.name),XN(p,t.name),XN(v,t.name),XN(m,t.name),XN(y,t.name),XN(g,t.name);var E=new e({uid:k,auth:t,email:f,emailVerified:b,displayName:h,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:S,createdAt:y,lastLoginAt:g});return _&&Array.isArray(_)&&(E.providerData=_.map((function(e){return Object.assign({},e)}))),m&&(E._redirectEventId=m),E}},{key:"_fromIdTokenResponse",value:function(){var t=Kn(Bn().mark((function t(n,r){var i,a,o,u=arguments;return Bn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new JN).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,KN(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),eP=new Map;function tP(e){hN(e instanceof Function,"Expected a class definition");var t=eP.get(e);return t?(hN(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,eP.set(e,t),t)}var nP=function(){function e(){f(this,e),this.type="NONE",this.storage={}}return m(e,[{key:"_isAvailable",value:function(){var e=Kn(Bn().mark((function e(){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Kn(Bn().mark((function e(t){var n;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Kn(Bn().mark((function e(t){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();nP.type="NONE";var rP=nP;function iP(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var aP=function(){function e(t,n,r){f(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=iP(this.userKey,a.apiKey,o),this.fullPersistenceKey=iP("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return m(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Kn(Bn().mark((function e(){var t;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?ZN._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Kn(Bn().mark((function e(t){var n;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Kn(Bn().mark((function t(n,r){var i,a,o,u,s,c,l,h,f,d,p,v=arguments;return Bn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(tP(rP),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Kn(Bn().mark((function e(t){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||tP(rP),u=iP(i,n.config.apiKey,n.name),s=null,c=T(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return h=l.value,t.prev=14,t.next=17,h._get(u);case 17:if(!(f=t.sent)){t.next=23;break}return d=ZN._fromJSON(n,f),h!==o&&(s=d),o=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Kn(Bn().mark((function e(t){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function oP(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(lP(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(uP(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(fP(t))return"Blackberry";if(dP(t))return"Webos";if(sP(t))return"Safari";if((t.includes("chrome/")||cP(t))&&!t.includes("edge/"))return"Chrome";if(hP(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function uP(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lr();return/firefox\//i.test(e)}function sP(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:lr()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cP(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lr();return/crios\//i.test(e)}function lP(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lr();return/iemobile/i.test(e)}function hP(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lr();return/android/i.test(e)}function fP(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lr();return/blackberry/i.test(e)}function dP(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lr();return/webos/i.test(e)}function pP(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lr();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function vP(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lr();return pP(e)||hP(e)||dP(e)||fP(e)||/windows phone/i.test(e)||lP(e)}function mP(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=oP(lr());break;case"Worker":t="".concat(oP(lr()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Ui,"/").concat(r)}function yP(e){return gP.apply(this,arguments)}function gP(){return(gP=Kn(Bn().mark((function e(t){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wN(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kP(e,t){return bP.apply(this,arguments)}function bP(){return(bP=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wN(t,"GET","/v2/recaptchaConfig",bN(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wP(e){return void 0!==e&&void 0!==e.getResponse}function _P(e){return void 0!==e&&void 0!==e.enterprise}var xP=m((function e(t){if(f(this,e),this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((function(e){return"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState}))}));function SP(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=aN("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function EP(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var TP=function(){function e(t){f(this,e),this.type="recaptcha-enterprise",this.auth=PP(t)}return m(e,[{key:"verify",value:function(){var e=Kn(Bn().mark((function e(){var t,n,r,i,a,o=this,u=arguments;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n,r){var i=window.grecaptcha;_P(i)?i.enterprise.ready((function(){i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=Kn(Bn().mark((function e(t){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=Kn(Bn().mark((function e(n,r){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:kP(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new xP(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=u.length>0&&void 0!==u[0]?u[0]:"verify",n=u.length>1&&void 0!==u[1]&&u[1],e.abrupt("return",new Promise((function(e,t){r(o.auth).then((function(r){if(!n&&_P(window.grecaptcha))a(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));SP("https://www.google.com/recaptcha/enterprise.js?render="+r).then((function(){a(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function IP(e,t,n){return CP.apply(this,arguments)}function CP(){return CP=Kn(Bn().mark((function e(t,n,r){var i,a,o,u,s=arguments;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>3&&void 0!==s[3]&&s[3],a=new TP(t),e.prev=2,e.next=5,a.verify(r);case 5:o=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,a.verify(r,!0);case 12:o=e.sent;case 13:return u=Object.assign({},n),i?Object.assign(u,{captchaResp:o}):Object.assign(u,{captchaResponse:o}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",u);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),CP.apply(this,arguments)}var AP=function(){function e(t){f(this,e),this.auth=t,this.queue=[]}return m(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=Kn(Bn().mark((function e(t){var n,r,i,a,o,u,s;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=T(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=T(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(rt){}}}catch(c){o.e(c)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),NP=function(){function e(t,n,r,i){f(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new RP(this),this.idTokenSubscription=new RP(this),this.beforeStateQueue=new AP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}return m(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=tP(t)),this._initializationPromise=this.queue(Kn(Bn().mark((function r(){var i,a;return Bn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,aP.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Kn(Bn().mark((function e(){var t;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Kn(Bn().mark((function e(t){var n,r,i,a,o,u,s;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return cN(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Kn(Bn().mark((function e(t){var n;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Kn(Bn().mark((function e(t){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,KN(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Kn(Bn().mark((function e(){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Kn(Bn().mark((function e(t){var n;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?zr(t):null)&&cN(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Kn(Bn().mark((function e(t){var n,r=this,i=arguments;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&cN(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(Kn(Bn().mark((function e(){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Kn(Bn().mark((function e(){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Kn(Bn().mark((function n(){return Bn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(tP(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"initializeRecaptchaConfig",value:function(){var e=Kn(Bn().mark((function e(){var t,n;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kP(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"});case 2:t=e.sent,n=new xP(t),null==this.tenantId?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new TP(this).verify();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new kr("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Kn(Bn().mark((function e(t,n){var r;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Kn(Bn().mark((function e(t){var n;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return cN(n=t&&tP(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,aP.create(this,[tP(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Kn(Bn().mark((function e(t){var n,r;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Kn(Bn().mark((function e(){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Kn(Bn().mark((function e(t){var n=this;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Kn(Bn().mark((function e(){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return cN(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Kn(Bn().mark((function e(t){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return cN(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mP(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Kn(Bn().mark((function e(){var t,n,r,i;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Hn({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.next=8,this._getAppCheckToken();case 8:return(i=e.sent)&&(n["X-Firebase-AppCheck"]=i),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=Kn(Bn().mark((function e(){var t,n;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&nN("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function PP(e){return zr(e)}var RP=function(){function e(t){var n=this;f(this,e),this.auth=t,this.observer=null,this.addObserver=Dr((function(e){return n.observer=e}))}return m(e,[{key:"next",get:function(){return cN(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function OP(e,t,n){var r=PP(e);cN(r._canInitEmulator,r,"emulator-config-failed"),cN(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=DP(t),o=function(e){var t=DP(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:LP(r.substr(a.length+1))}}var o=c(r.split(":"),2);return{host:o[0],port:LP(o[1])}}(t),u=o.host,s=o.port,l=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function DP(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function LP(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var FP=function(){function e(t,n){f(this,e),this.providerId=t,this.signInMethod=n}return m(e,[{key:"toJSON",value:function(){return lN("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return lN("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return lN("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return lN("not implemented")}}]),e}();function MP(e,t){return jP.apply(this,arguments)}function jP(){return(jP=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wN(t,"POST","/v1/accounts:resetPassword",bN(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function UP(e,t){return VP.apply(this,arguments)}function VP(){return(VP=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wN(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qP(e,t){return zP.apply(this,arguments)}function zP(){return(zP=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wN(t,"POST","/v1/accounts:update",bN(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function BP(e,t){return WP.apply(this,arguments)}function WP(){return(WP=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",EN(t,"POST","/v1/accounts:signInWithPassword",bN(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function KP(e,t){return HP.apply(this,arguments)}function HP(){return(HP=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wN(t,"POST","/v1/accounts:sendOobCode",bN(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function GP(e,t){return QP.apply(this,arguments)}function QP(){return(QP=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",KP(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $P(e,t){return YP.apply(this,arguments)}function YP(){return(YP=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",KP(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function JP(e,t){return XP.apply(this,arguments)}function XP(){return(XP=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",KP(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ZP(e,t){return eR.apply(this,arguments)}function eR(){return(eR=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",KP(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tR(e,t){return nR.apply(this,arguments)}function nR(){return(nR=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",EN(t,"POST","/v1/accounts:signInWithEmailLink",bN(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rR(e,t){return iR.apply(this,arguments)}function iR(){return(iR=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",EN(t,"POST","/v1/accounts:signInWithEmailLink",bN(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var aR=function(e){g(n,e);var t=_(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return f(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return m(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Kn(Bn().mark((function e(t){var n,r,i;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?12:13;break;case 3:if(r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},!(null===(n=t._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled)){e.next=11;break}return e.next=7,IP(t,r,"signInWithPassword");case 7:return i=e.sent,e.abrupt("return",BP(t,i));case 11:return e.abrupt("return",BP(t,r).catch(function(){var e=Kn(Bn().mark((function e(n){var i;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,IP(t,r,"signInWithPassword");case 4:return i=e.sent,e.abrupt("return",BP(t,i));case 8:return e.abrupt("return",Promise.reject(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.abrupt("return",tR(t,{email:this._email,oobCode:this._password}));case 13:iN(t,"internal-error");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",UP(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",rR(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:iN(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(FP);function oR(e,t){return uR.apply(this,arguments)}function uR(){return(uR=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",EN(t,"POST","/v1/accounts:signInWithIdp",bN(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var sR=function(e){g(n,e);var t=_(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return m(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return oR(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,oR(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,oR(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Nr(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):iN("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=zA(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(FP);function cR(e,t){return lR.apply(this,arguments)}function lR(){return(lR=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wN(t,"POST","/v1/accounts:sendVerificationCode",bN(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hR(){return(hR=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",EN(t,"POST","/v1/accounts:signInWithPhoneNumber",bN(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fR(){return(fR=Kn(Bn().mark((function e(t,n){var r;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,EN(t,"POST","/v1/accounts:signInWithPhoneNumber",bN(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw AN(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var dR=Hn({},"USER_NOT_FOUND","user-not-found");function pR(){return(pR=Kn(Bn().mark((function e(t,n){var r;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",EN(t,"POST","/v1/accounts:signInWithPhoneNumber",bN(t,r),dR));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var vR=function(e){g(n,e);var t=_(n);function n(e){var r;return f(this,n),(r=t.call(this,"phone","phone")).params=e,r}return m(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return hR.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return fR.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return pR.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(FP);var mR=function(){function e(t){var n,r,i,a,o,u;f(this,e);var s=Pr(Rr(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);cN(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return m(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Pr(Rr(e)).link,n=t?Pr(Rr(t)).deep_link_id:null,r=Pr(Rr(e)).deep_link_id;return(r?Pr(Rr(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(LT){return null}}}]),e}();var yR=function(){function e(){f(this,e),this.providerId=e.PROVIDER_ID}return m(e,null,[{key:"credential",value:function(e,t){return aR._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=mR.parseLink(t);return cN(n,"argument-error"),aR._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();yR.PROVIDER_ID="password",yR.EMAIL_PASSWORD_SIGN_IN_METHOD="password",yR.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var gR=function(){function e(t){f(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return m(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),kR=function(e){g(n,e);var t=_(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).scopes=[],e}return m(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return h(this.scopes)}}]),n}(gR),bR=function(e){g(n,e);var t=_(n);function n(){return f(this,n),t.apply(this,arguments)}return m(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return cN(e.idToken||e.accessToken,"argument-error"),sR._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return cN("providerId"in t&&"signInMethod"in t,"argument-error"),sR._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(kR),wR=function(e){g(n,e);var t=_(n);function n(){return f(this,n),t.call(this,"facebook.com")}return m(n,null,[{key:"credential",value:function(e){return sR._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(LT){return null}}}]),n}(kR);wR.FACEBOOK_SIGN_IN_METHOD="facebook.com",wR.PROVIDER_ID="facebook.com";var _R=function(e){g(n,e);var t=_(n);function n(){var e;return f(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return m(n,null,[{key:"credential",value:function(e,t){return sR._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(LT){return null}}}]),n}(kR);_R.GOOGLE_SIGN_IN_METHOD="google.com",_R.PROVIDER_ID="google.com";var xR=function(e){g(n,e);var t=_(n);function n(){return f(this,n),t.call(this,"github.com")}return m(n,null,[{key:"credential",value:function(e){return sR._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(LT){return null}}}]),n}(kR);xR.GITHUB_SIGN_IN_METHOD="github.com",xR.PROVIDER_ID="github.com";var SR=function(e){g(n,e);var t=_(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return m(n,[{key:"_getIdTokenResponse",value:function(e){return oR(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,oR(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,oR(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(FP),ER=function(e){g(n,e);var t=_(n);function n(e){return f(this,n),cN(e.startsWith("saml."),"argument-error"),t.call(this,e)}return m(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=SR.fromJSON(e);return cN(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return SR._create(r,n)}catch(i){return null}}}]),n}(gR),TR=function(e){g(n,e);var t=_(n);function n(){return f(this,n),t.call(this,"twitter.com")}return m(n,null,[{key:"credential",value:function(e,t){return sR._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(LT){return null}}}]),n}(kR);function IR(e,t){return CR.apply(this,arguments)}function CR(){return(CR=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",EN(t,"POST","/v1/accounts:signUp",bN(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}TR.TWITTER_SIGN_IN_METHOD="twitter.com",TR.PROVIDER_ID="twitter.com";var AR=function(){function e(t){f(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return m(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Kn(Bn().mark((function t(n,r,i){var a,o,u,s,c=arguments;return Bn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,ZN._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=NR(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Kn(Bn().mark((function t(n,r,i){var a;return Bn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=NR(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function NR(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function PR(){return PR=Kn(Bn().mark((function e(t){var n,r,i,a;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=PP(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new AR({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,IR(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,AR._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),PR.apply(this,arguments)}var RR=function(e){g(n,e);var t=_(n);function n(e,r,i,a){var o,u;return f(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(w(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return m(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(gr);function OR(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw RR._fromErrorAndOperation(e,n,t,r);throw n}))}function DR(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function LR(e,t){return FR.apply(this,arguments)}function FR(){return FR=Kn(Bn().mark((function e(t,n){var r,i,a,o;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zr(t),e.next=3,UR(!0,r,n);case 3:return e.t0=RN,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=DR(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),FR.apply(this,arguments)}function MR(e,t){return jR.apply(this,arguments)}function jR(){return jR=Kn(Bn().mark((function e(t,n){var r,i,a=arguments;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=VN,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",AR._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),jR.apply(this,arguments)}function UR(e,t,n){return VR.apply(this,arguments)}function VR(){return(VR=Kn(Bn().mark((function e(t,n,r){var i,a;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,KN(n);case 2:i=DR(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",cN(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qR(e,t){return zR.apply(this,arguments)}function zR(){return zR=Kn(Bn().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,VN(t,OR(i,a,n,t),r);case 6:return cN((o=e.sent).idToken,i,"internal-error"),cN(u=UN(o.idToken),i,"internal-error"),s=u.sub,cN(t.uid===s,i,"user-mismatch"),e.abrupt("return",AR._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&iN(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),zR.apply(this,arguments)}function BR(e,t){return WR.apply(this,arguments)}function WR(){return WR=Kn(Bn().mark((function e(t,n){var r,i,a,o,u=arguments;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,OR(t,i,n);case 4:return a=e.sent,e.next=7,AR._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),WR.apply(this,arguments)}function KR(e,t){return HR.apply(this,arguments)}function HR(){return(HR=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",BR(PP(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function GR(e,t){return QR.apply(this,arguments)}function QR(){return(QR=Kn(Bn().mark((function e(t,n){var r;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zr(t),e.next=3,UR(!1,r,n.providerId);case 3:return e.abrupt("return",MR(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $R(e,t){return YR.apply(this,arguments)}function YR(){return(YR=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qR(zr(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function JR(e,t){return XR.apply(this,arguments)}function XR(){return(XR=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",EN(t,"POST","/v1/accounts:signInWithCustomToken",bN(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ZR(){return(ZR=Kn(Bn().mark((function e(t,n){var r,i,a;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=PP(t),e.next=3,JR(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,AR._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var eO=function(){function e(t,n){f(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return m(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?tO._fromServerResponse(e,t):"totpInfo"in t?nO._fromServerResponse(e,t):iN(e,"internal-error")}}]),e}(),tO=function(e){g(n,e);var t=_(n);function n(e){var r;return f(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return m(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(eO),nO=function(e){g(n,e);var t=_(n);function n(e){return f(this,n),t.call(this,"totp",e)}return m(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(eO);function rO(e,t,n){var r;cN((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),cN("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(cN(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(cN(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function iO(){return iO=Kn(Bn().mark((function e(t,n,r){var i,a,o,u;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=PP(t),o={requestType:"PASSWORD_RESET",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=11;break}return e.next=5,IP(a,o,"getOobCode",!0);case 5:return u=e.sent,r&&rO(a,u,r),e.next=9,$P(a,u);case 9:e.next=14;break;case 11:return r&&rO(a,o,r),e.next=14,$P(a,o).catch(function(){var e=Kn(Bn().mark((function e(t){var n;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow."),e.next=4,IP(a,o,"getOobCode",!0);case 4:return n=e.sent,r&&rO(a,n,r),e.next=8,$P(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)}))),iO.apply(this,arguments)}function aO(){return(aO=Kn(Bn().mark((function e(t,n,r){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,MP(zr(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oO(){return(oO=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qP(zr(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uO(e,t){return sO.apply(this,arguments)}function sO(){return(sO=Kn(Bn().mark((function e(t,n){var r,i,a,o;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zr(t),e.next=3,MP(r,{oobCode:n});case 3:i=e.sent,cN(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return cN(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:cN(i.mfaInfo,r,"internal-error");case 13:cN(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=eO._fromServerResponse(PP(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cO(){return(cO=Kn(Bn().mark((function e(t,n){var r,i;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uO(zr(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lO(e,t,n){return hO.apply(this,arguments)}function hO(){return hO=Kn(Bn().mark((function e(t,n,r){var i,a,o,u,s,c,l;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=PP(t),o={returnSecureToken:!0,email:n,password:r,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=9;break}return e.next=5,IP(a,o,"signUpPassword");case 5:s=e.sent,u=IR(a,s),e.next=10;break;case 9:u=IR(a,o).catch(function(){var e=Kn(Bn().mark((function e(t){var n;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow."),e.next=4,IP(a,o,"signUpPassword");case 4:return n=e.sent,e.abrupt("return",IR(a,n));case 8:return e.abrupt("return",Promise.reject(t));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:return e.next=12,u.catch((function(e){return Promise.reject(e)}));case 12:return c=e.sent,e.next=15,AR._fromIdTokenResponse(a,"signIn",c);case 15:return l=e.sent,e.next=18,a._updateCurrentUser(l.user);case 18:return e.abrupt("return",l);case 19:case"end":return e.stop()}}),e)}))),hO.apply(this,arguments)}function fO(){return fO=Kn(Bn().mark((function e(t,n,r){var i,a,o,u,s;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=function(e,t){cN(t.handleCodeInApp,a,"argument-error"),t&&rO(a,e,t)},a=PP(t),o={requestType:"EMAIL_SIGNIN",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=12;break}return e.next=6,IP(a,o,"getOobCode",!0);case 6:return s=e.sent,u(s,r),e.next=10,JP(a,s);case 10:e.next=15;break;case 12:return u(o,r),e.next=15,JP(a,o).catch(function(){var e=Kn(Bn().mark((function e(t){var n;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,IP(a,o,"getOobCode",!0);case 4:return n=e.sent,u(n,r),e.next=8,JP(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}}),e)}))),fO.apply(this,arguments)}function dO(){return(dO=Kn(Bn().mark((function e(t,n,r){var i,a;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=zr(t),cN((a=yR.credentialWithLink(n,r||fN()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",KR(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pO(e,t){return vO.apply(this,arguments)}function vO(){return(vO=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wN(t,"POST","/v1/accounts:createAuthUri",bN(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mO(){return(mO=Kn(Bn().mark((function e(t,n){var r,i,a,o;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=dN()?fN():"http://localhost",i={identifier:n,continueUri:r},e.next=4,pO(zr(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yO(){return(yO=Kn(Bn().mark((function e(t,n){var r,i,a,o;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zr(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&rO(r.auth,a,n),e.next=8,GP(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gO(){return(gO=Kn(Bn().mark((function e(t,n,r){var i,a,o,u;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=zr(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&rO(i.auth,o,r),e.next=8,ZP(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kO(e,t){return bO.apply(this,arguments)}function bO(){return(bO=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wN(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wO(){return(wO=Kn(Bn().mark((function e(t,n){var r,i,a,o,u,s,c;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=zr(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,VN(a,kO(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _O(e,t,n){return xO.apply(this,arguments)}function xO(){return(xO=Kn(Bn().mark((function e(t,n,r){var i,a,o,u;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,VN(t,UP(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var SO=m((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};f(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),EO=function(e){g(n,e);var t=_(n);function n(e,r,i,a){var o;return f(this,n),(o=t.call(this,e,r,i)).username=a,o}return m(n)}(SO),TO=function(e){g(n,e);var t=_(n);function n(e,r){return f(this,n),t.call(this,e,"facebook.com",r)}return m(n)}(SO),IO=function(e){g(n,e);var t=_(n);function n(e,r){return f(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return m(n)}(EO),CO=function(e){g(n,e);var t=_(n);function n(e,r){return f(this,n),t.call(this,e,"google.com",r)}return m(n)}(SO),AO=function(e){g(n,e);var t=_(n);function n(e,r,i){return f(this,n),t.call(this,e,"twitter.com",r,i)}return m(n)}(EO);function NO(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=UN(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new SO(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new TO(a,i);case"github.com":return new IO(a,i);case"google.com":return new CO(a,i);case"twitter.com":return new AO(a,i,e.screenName||null);case"custom":case"anonymous":return new SO(a,null);default:return new SO(a,r,i)}}(n)}var PO=function(){function e(t,n,r){f(this,e),this.type=t,this.credential=n,this.auth=r}return m(e,[{key:"toJSON",value:function(){return{multiFactorSession:Hn({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),RO=function(){function e(t,n,r){f(this,e),this.session=t,this.hints=n,this.signInResolver=r}return m(e,[{key:"resolveSignIn",value:function(){var e=Kn(Bn().mark((function e(t){var n;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=PP(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return eO._fromServerResponse(r,e)}));cN(i.mfaPendingCredential,r,"internal-error");var o=PO._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=Kn(Bn().mark((function e(t){var a,u,s;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,AR._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return cN(n.user,r,"internal-error"),e.abrupt("return",AR._forOperation(n.user,n.operationType,u));case 17:iN(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function OO(e,t){return wN(e,"POST","/v2/accounts/mfaEnrollment:start",bN(e,t))}function DO(e,t){return wN(e,"POST","/v2/accounts/mfaEnrollment:finalize",bN(e,t))}var LO=function(){function e(t){var n=this;f(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return eO._fromServerResponse(t.auth,e)})))}))}return m(e,[{key:"getSession",value:function(){var e=Kn(Bn().mark((function e(){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=PO,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=Kn(Bn().mark((function e(t,n){var r,i,a;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,VN(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=Kn(Bn().mark((function e(t){var n,r,i;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,VN(this.user,wN(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",bN(a,{idToken:r,mfaEnrollmentId:n})));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}var a}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),FO=new WeakMap;var MO="__sak",jO=function(){function e(t,n){f(this,e),this.storageRetriever=t,this.type=n}return m(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(MO,"1"),this.storage.removeItem(MO),Promise.resolve(!0)):Promise.resolve(!1)}catch(LT){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var UO=function(e){g(n,e);var t=_(n);function n(){var e;return f(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=lr();return sP(e)||pP(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=vP(),e._shouldAllowMigration=!0,e}return m(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);vr()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Kn(Bn().mark((function e(t,r){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tf(k(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Kn(Bn().mark((function e(t){var r;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tf(k(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Kn(Bn().mark((function e(t){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tf(k(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(jO);UO.type="LOCAL";var VO=UO,qO=function(e){g(n,e);var t=_(n);function n(){return f(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return m(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(jO);qO.type="SESSION";var zO=qO;function BO(e){return Promise.all(e.map(function(){var e=Kn(Bn().mark((function e(t){var n;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var WO=function(){function e(t){f(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return m(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Kn(Bn().mark((function e(t){var n,r,i,a,o,u,s,c;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=Kn(Bn().mark((function e(t){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,BO(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function KO(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}WO.receivers=[];var HO=function(){function e(t){f(this,e),this.target=t,this.handlers=new Set}return m(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Kn(Bn().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=KO("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function GO(){return window}function QO(e){GO().location.href=e}function $O(){return"undefined"!==typeof GO().WorkerGlobalScope&&"function"===typeof GO().importScripts}function YO(){return JO.apply(this,arguments)}function JO(){return(JO=Kn(Bn().mark((function e(){var t;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function XO(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var ZO="firebaseLocalStorageDb",eD="firebaseLocalStorage",tD="fbase_key",nD=function(){function e(t){f(this,e),this.request=t}return m(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function rD(e,t){return e.transaction([eD],t?"readwrite":"readonly").objectStore(eD)}function iD(){var e=indexedDB.deleteDatabase(ZO);return new nD(e).toPromise()}function aD(){var e=indexedDB.open(ZO,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(eD,{keyPath:tD})}catch(r){n(r)}})),e.addEventListener("success",Kn(Bn().mark((function n(){var r;return Bn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(eD)){n.next=12;break}return r.close(),n.next=5,iD();case 5:return n.t0=t,n.next=8,aD();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function oD(e,t,n){return uD.apply(this,arguments)}function uD(){return uD=Kn(Bn().mark((function e(t,n,r){var i,a;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=rD(t,!0).put((Hn(i={},tD,n),Hn(i,"value",r),i)),e.abrupt("return",new nD(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),uD.apply(this,arguments)}function sD(e,t){return cD.apply(this,arguments)}function cD(){return cD=Kn(Bn().mark((function e(t,n){var r,i;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=rD(t,!1).get(n),e.next=3,new nD(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),cD.apply(this,arguments)}function lD(e,t){var n=rD(e,!0).delete(t);return new nD(n).toPromise()}var hD=function(){function e(){f(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return m(e,[{key:"_openDb",value:function(){var e=Kn(Bn().mark((function e(){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,aD();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Kn(Bn().mark((function e(t){var n,r;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Kn(Bn().mark((function e(){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$O()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Kn(Bn().mark((function e(){var t=this;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=WO._getInstance($O()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Kn(Bn().mark((function e(n,r){var i;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Kn(Bn().mark((function e(){var t,n,r;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,YO();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new HO(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Kn(Bn().mark((function e(t){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&XO()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Kn(Bn().mark((function e(){var t;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,aD();case 5:return t=e.sent,e.next=8,oD(t,MO,"1");case 8:return e.next=10,lD(t,MO);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Kn(Bn().mark((function e(t){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Kn(Bn().mark((function e(t,n){var r=this;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Kn(Bn().mark((function e(){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return oD(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Kn(Bn().mark((function e(t){var n;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return sD(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Kn(Bn().mark((function e(t){var n=this;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Kn(Bn().mark((function e(){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return lD(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Kn(Bn().mark((function e(){var t,n,r,i,a,o,u,s,c,l,h;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=rD(e,!1).getAll();return new nD(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=T(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(f){i.e(f)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)h=l[c],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Kn(Bn().mark((function t(){return Bn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();hD.type="LOCAL";var fD=hD;function dD(e,t){return wN(e,"POST","/v2/accounts/mfaSignIn:start",bN(e,t))}function pD(e,t){return wN(e,"POST","/v2/accounts/mfaSignIn:finalize",bN(e,t))}var vD=1e12,mD=function(){function e(t){f(this,e),this.auth=t,this.counter=vD,this._widgets=new Map}return m(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new yD(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||vD;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||vD;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=Kn(Bn().mark((function e(t){var n,r;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||vD,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),yD=function(){function e(t,n,r){var i=this;f(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;cN(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return m(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var gD=EP("rcb"),kD=new vN(3e4,6e4),bD=function(){function e(){var t;f(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=GO().grecaptcha)||void 0===t?void 0:t.render)}return m(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return cN(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)&&wP(GO().grecaptcha)?Promise.resolve(GO().grecaptcha):new Promise((function(r,i){var a=GO().setTimeout((function(){i(aN(e,"network-request-failed"))}),kD.get());GO()[gD]=function(){GO().clearTimeout(a),delete GO()[gD];var o=GO().grecaptcha;if(o&&wP(o)){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(aN(e,"internal-error"))},SP("".concat("https://www.google.com/recaptcha/api.js?","?").concat(Nr({onload:gD,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(aN(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=GO().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var wD=function(){function e(){f(this,e)}return m(e,[{key:"load",value:function(){var e=Kn(Bn().mark((function e(t){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new mD(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),_D="recaptcha",xD={theme:"light",type:"image"},SD=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},xD),r=arguments.length>2?arguments[2]:void 0;f(this,e),this.parameters=n,this.type=_D,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=PP(r),this.isInvisible="invisible"===this.parameters.size,cN("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;cN(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new wD:new bD,this.validateStartingState()}return m(e,[{key:"verify",value:function(){var e=Kn(Bn().mark((function e(){var t,n,r,i=this;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){cN(!this.parameters.sitekey,this.auth,"argument-error"),cN(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),cN("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=GO()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){cN(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=Kn(Bn().mark((function e(){var t,n;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Kn(Bn().mark((function e(){var t;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return cN(dN()&&!$O(),this.auth,"internal-error"),e.next=3,ED();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,yP(this.auth);case 8:cN(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return cN(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function ED(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var TD=function(){function e(t,n){f(this,e),this.verificationId=t,this.onConfirmation=n}return m(e,[{key:"confirm",value:function(e){var t=vR._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function ID(){return(ID=Kn(Bn().mark((function e(t,n,r){var i,a;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=PP(t),e.next=3,PD(i,n,zr(r));case 3:return a=e.sent,e.abrupt("return",new TD(a,(function(e){return KR(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function CD(e,t,n){return AD.apply(this,arguments)}function AD(){return(AD=Kn(Bn().mark((function e(t,n,r){var i,a;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=zr(t),e.next=3,UR(!1,i,"phone");case 3:return e.next=5,PD(i.auth,n,zr(r));case 5:return a=e.sent,e.abrupt("return",new TD(a,(function(e){return GR(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ND(){return(ND=Kn(Bn().mark((function e(t,n,r){var i,a;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=zr(t),e.next=3,PD(i.auth,n,zr(r));case 3:return a=e.sent,e.abrupt("return",new TD(a,(function(e){return $R(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function PD(e,t,n){return RD.apply(this,arguments)}function RD(){return RD=Kn(Bn().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,f;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,cN("string"===typeof a,t,"argument-error"),cN(r.type===_D,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return cN("enroll"===u.type,t,"internal-error"),e.next=13,OO(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return cN("signin"===u.type,t,"internal-error"),cN(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,dD(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,cR(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,f=h.sessionInfo,e.abrupt("return",f);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),RD.apply(this,arguments)}function OD(){return(OD=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,MR(zr(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var DD=function(){function e(t){f(this,e),this.providerId=e.PROVIDER_ID,this.auth=PP(t)}return m(e,[{key:"verifyPhoneNumber",value:function(e,t){return PD(this.auth,e,zr(t))}}],[{key:"credential",value:function(e,t){return vR._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?vR._fromTokenResponse(n,r):null}}]),e}();function LD(e,t){return t?tP(t):(cN(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}DD.PROVIDER_ID="phone",DD.PHONE_SIGN_IN_METHOD="phone";var FD=function(e){g(n,e);var t=_(n);function n(e){var r;return f(this,n),(r=t.call(this,"custom","custom")).params=e,r}return m(n,[{key:"_getIdTokenResponse",value:function(e){return oR(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return oR(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return oR(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(FP);function MD(e){return BR(e.auth,new FD(e),e.bypassAuthState)}function jD(e){var t=e.auth,n=e.user;return cN(n,t,"internal-error"),qR(n,new FD(e),e.bypassAuthState)}function UD(e){return VD.apply(this,arguments)}function VD(){return(VD=Kn(Bn().mark((function e(t){var n,r;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,cN(r=t.user,n,"internal-error"),e.abrupt("return",MR(r,new FD(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qD=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];f(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return m(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Kn(Bn().mark((function t(n,r){return Bn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Kn(Bn().mark((function e(t){var n,r,i,a,o,u,s;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return MD;case"linkViaPopup":case"linkViaRedirect":return UD;case"reauthViaPopup":case"reauthViaRedirect":return jD;default:iN(this.auth,"internal-error")}}},{key:"resolve",value:function(e){hN(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){hN(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),zD=new vN(2e3,1e4);function BD(e,t,n){return WD.apply(this,arguments)}function WD(){return(WD=Kn(Bn().mark((function e(t,n,r){var i,a,o;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=PP(t),uN(t,n,gR),a=LD(i,r),o=new QD(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function KD(){return(KD=Kn(Bn().mark((function e(t,n,r){var i,a,o;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return uN((i=zr(t)).auth,n,gR),a=LD(i.auth,r),o=new QD(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function HD(e,t,n){return GD.apply(this,arguments)}function GD(){return(GD=Kn(Bn().mark((function e(t,n,r){var i,a,o;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return uN((i=zr(t)).auth,n,gR),a=LD(i.auth,r),o=new QD(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var QD=function(e){g(n,e);var t=_(n);function n(e,r,i,a,o){var u;return f(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=w(u),u}return m(n,[{key:"executeNotNull",value:function(){var e=Kn(Bn().mark((function e(){var t;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return cN(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Kn(Bn().mark((function e(){var t,n=this;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hN(1===this.filter.length,"Popup operations only handle one event"),t=KO(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(aN(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(aN(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(aN(e.auth,"popup-closed-by-user"))}),8e3):e.pollId=window.setTimeout(t,zD.get())}()}}]),n}(qD);QD.currentPopupAction=null;var $D="pendingRedirect",YD=new Map,JD=function(e){g(n,e);var t=_(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return f(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return m(n,[{key:"execute",value:function(){var e=Kn(Bn().mark((function e(){var t,r;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=YD.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,XD(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,tf(k(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:YD.set(this.auth._key(),t);case 21:return this.bypassAuthState||YD.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Kn(Bn().mark((function e(t){var r;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",tf(k(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",tf(k(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Kn(Bn().mark((function e(){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(qD);function XD(e,t){return ZD.apply(this,arguments)}function ZD(){return(ZD=Kn(Bn().mark((function e(t,n){var r,i,a;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=iL(n),i=rL(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eL(e,t){return tL.apply(this,arguments)}function tL(){return(tL=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rL(t)._set(iL(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nL(e,t){YD.set(e._key(),t)}function rL(e){return tP(e._redirectPersistence)}function iL(e){return iP($D,e.config.apiKey,e.name)}function aL(e,t,n){return function(e,t,n){return oL.apply(this,arguments)}(e,t,n)}function oL(){return(oL=Kn(Bn().mark((function e(t,n,r){var i,a;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=PP(t),uN(t,n,gR),e.next=4,i._initializationPromise;case 4:return a=LD(i,r),e.next=7,eL(a,i);case 7:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uL(e,t,n){return function(e,t,n){return sL.apply(this,arguments)}(e,t,n)}function sL(){return(sL=Kn(Bn().mark((function e(t,n,r){var i,a,o;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return uN((i=zr(t)).auth,n,gR),e.next=4,i.auth._initializationPromise;case 4:return a=LD(i.auth,r),e.next=7,eL(a,i.auth);case 7:return e.next=9,vL(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cL(e,t,n){return function(e,t,n){return lL.apply(this,arguments)}(e,t,n)}function lL(){return(lL=Kn(Bn().mark((function e(t,n,r){var i,a,o;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return uN((i=zr(t)).auth,n,gR),e.next=4,i.auth._initializationPromise;case 4:return a=LD(i.auth,r),e.next=7,UR(!1,i,n.providerId);case 7:return e.next=9,eL(a,i.auth);case 9:return e.next=11,vL(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hL(e,t){return fL.apply(this,arguments)}function fL(){return(fL=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,PP(t)._initializationPromise;case 2:return e.abrupt("return",dL(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dL(e,t){return pL.apply(this,arguments)}function pL(){return pL=Kn(Bn().mark((function e(t,n){var r,i,a,o,u,s=arguments;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=PP(t),a=LD(i,n),o=new JD(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),pL.apply(this,arguments)}function vL(e){return mL.apply(this,arguments)}function mL(){return(mL=Kn(Bn().mark((function e(t){var n;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=KO("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var yL=function(){function e(t){f(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return m(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kL(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!kL(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(aN(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(gL(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(gL(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function gL(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function kL(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function bL(e){return wL.apply(this,arguments)}function wL(){return wL=Kn(Bn().mark((function e(t){var n,r=arguments;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",wN(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),wL.apply(this,arguments)}var _L=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xL=/^https?/;function SL(){return(SL=Kn(Bn().mark((function e(t){var n,r,i,a,o;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,bL(t);case 4:n=e.sent,r=n.authorizedDomains,i=T(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!EL(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:iN(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function EL(e){var t=fN(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!xL.test(r))return!1;if(_L.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var TL=new vN(3e4,6e4);function IL(){var e=GO().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=h(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var CL=null;function AL(e){return CL=CL||function(e){return new Promise((function(t,n){var r,i,a;function o(){IL(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){IL(),n(aN(e,"network-request-failed"))},timeout:TL.get()})}if(null===(i=null===(r=GO().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=GO().gapi)||void 0===a?void 0:a.load)){var u=EP("iframefcb");return GO()[u]=function(){gapi.load?o():n(aN(e,"network-request-failed"))},SP("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw CL=null,e}))}(e),CL}var NL=new vN(5e3,15e3),PL="__/auth/iframe",RL="emulator/auth/iframe",OL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},DL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function LL(e){var t=e.config;cN(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?mN(t,RL):"https://".concat(e.config.authDomain,"/").concat(PL),r={apiKey:t.apiKey,appName:e.name,v:Ui},i=DL.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Nr(r).slice(1))}function FL(e){return ML.apply(this,arguments)}function ML(){return ML=Kn(Bn().mark((function e(t){var n,r;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,AL(t);case 2:return n=e.sent,cN(r=GO().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:LL(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:OL,dontclear:!0},(function(e){return new Promise(function(){var n=Kn(Bn().mark((function n(r,i){var a,o,u;return Bn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){GO().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=aN(t,"network-request-failed"),o=GO().setTimeout((function(){i(a)}),NL.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),ML.apply(this,arguments)}var jL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},UL=function(){function e(t){f(this,e),this.window=t,this.associatedEvent=null}return m(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function VL(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},jL),{width:r.toString(),height:i.toString(),top:a,left:o}),l=lr().toLowerCase();n&&(u=cP(l)?"_blank":n),uP(l)&&(t=t||"http://localhost",s.scrollbars="yes");var h=Object.entries(s).reduce((function(e,t){var n=c(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return pP(arguments.length>0&&void 0!==arguments[0]?arguments[0]:lr())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==u)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new UL(null);var f=window.open(t||"",u,h);cN(f,e,"popup-blocked");try{f.focus()}catch(d){}return new UL(f)}var qL="__/auth/handler",zL="emulator/auth/handler",BL=encodeURIComponent("fac");function WL(e,t,n,r,i,a){return KL.apply(this,arguments)}function KL(){return KL=Kn(Bn().mark((function e(t,n,r,i,a,o){var u,s,l,h,f,d,p,v,m,y,g,k,b;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(cN(t.config.authDomain,t,"auth-domain-config-required"),cN(t.config.apiKey,t,"invalid-api-key"),u={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:Ui,eventId:a},n instanceof gR)for(n.setDefaultLanguage(t.languageCode),u.providerId=n.providerId||"",Tr(n.getCustomParameters())||(u.customParameters=JSON.stringify(n.getCustomParameters())),s=0,l=Object.entries(o||{});s<l.length;s++)h=c(l[s],2),f=h[0],d=h[1],u[f]=d;for(n instanceof kR&&(p=n.getScopes().filter((function(e){return""!==e}))).length>0&&(u.scopes=p.join(",")),t.tenantId&&(u.tid=t.tenantId),v=u,m=0,y=Object.keys(v);m<y.length;m++)g=y[m],void 0===v[g]&&delete v[g];return e.next=10,t._getAppCheckToken();case 10:return k=e.sent,b=k?"#".concat(BL,"=").concat(encodeURIComponent(k)):"",e.abrupt("return","".concat(HL(t),"?").concat(Nr(v).slice(1)).concat(b));case 13:case"end":return e.stop()}}),e)}))),KL.apply(this,arguments)}function HL(e){var t=e.config;return t.emulator?mN(t,zL):"https://".concat(t.authDomain,"/").concat(qL)}var GL="webStorageSupport",QL=function(){function e(){f(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zO,this._completeRedirectFn=dL,this._overrideRedirectResult=nL}return m(e,[{key:"_openPopup",value:function(){var e=Kn(Bn().mark((function e(t,n,r,i){var a,o;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hN(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),e.next=3,WL(t,n,r,fN(),i);case 3:return o=e.sent,e.abrupt("return",VL(t,o,KO()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Kn(Bn().mark((function e(t,n,r,i){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,WL(t,n,r,fN(),i);case 4:return QO(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(hN(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Kn(Bn().mark((function e(t){var n,r;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,FL(t);case 2:return n=e.sent,r=new yL(t),n.register("authEvent",(function(e){return cN(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(GL,{type:GL},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[GL];void 0!==i&&t(!!i),iN(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return SL.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return vP()||sP()||pP()}}]),e}(),$L=QL,YL=function(){function e(t){f(this,e),this.factorId=t}return m(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return lN("unexpected MultiFactorSessionType")}}}]),e}(),JL=function(e){g(n,e);var t=_(n);function n(e){var r;return f(this,n),(r=t.call(this,"phone")).credential=e,r}return m(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return wN(e,"POST","/v2/accounts/mfaEnrollment:finalize",bN(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return wN(e,"POST","/v2/accounts/mfaSignIn:finalize",bN(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(YL),XL=function(){function e(){f(this,e)}return m(e,null,[{key:"assertion",value:function(e){return JL._fromCredential(e)}}]),e}();XL.FACTOR_ID="phone";var ZL=function(){function e(){f(this,e)}return m(e,null,[{key:"assertionForEnrollment",value:function(e,t){return eF._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return eF._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=Kn(Bn().mark((function e(t){var n,r;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return cN("undefined"!==typeof(n=t).auth,"internal-error"),e.next=4,i=n.auth,a={idToken:n.credential,totpEnrollmentInfo:{}},wN(i,"POST","/v2/accounts/mfaEnrollment:start",bN(i,a));case 4:return r=e.sent,e.abrupt("return",tF._fromStartTotpMfaEnrollmentResponse(r,n.auth));case 6:case"end":return e.stop()}var i,a}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();ZL.FACTOR_ID="totp";var eF=function(e){g(n,e);var t=_(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return m(n,[{key:"_finalizeEnroll",value:function(){var e=Kn(Bn().mark((function e(t,n,r){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return cN("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",DO(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=Kn(Bn().mark((function e(t,n){var r;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return cN(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",pD(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(YL),tF=function(){function e(t,n,r,i,a,o,u){f(this,e),this.sessionInfo=o,this.auth=u,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return m(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(nF(e)||nF(t))&&(r=!0),r&&(nF(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),nF(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function nF(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var rF="@firebase/auth",iF="0.23.2",aF=function(){function e(t){f(this,e),this.auth=t,this.internalListeners=new Map}return m(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Kn(Bn().mark((function e(t){var n;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){cN(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var oF;!function(e){var t;null===(t=or())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function uF(){return window}oF="Browser",Ri(new Br("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,u=o.apiKey,s=o.authDomain;cN(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});var c={apiKey:u,authDomain:s,clientPlatform:oF,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mP(oF)},l=new NP(r,i,a,c);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(tP);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Ri(new Br("auth-internal",(function(e){return function(e){return new aF(e)}(PP(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Ki(rF,iF,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(oF)),Ki(rF,iF,"esm2017");var sF=2e3;function cF(e,t,n){return lF.apply(this,arguments)}function lF(){return lF=Kn(Bn().mark((function e(t,n,r){var i,a,o,u,s;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=uF(),o=a.BuildInfo,hN(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,mF(n.sessionId);case 4:return u=e.sent,s={},pP()?s.ibi=o.packageName:hP()?s.apn=o.packageName:iN(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",WL(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),lF.apply(this,arguments)}function hF(){return(hF=Kn(Bn().mark((function e(t){var n,r,i;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=uF(),r=n.BuildInfo,i={},pP()?i.iosBundleId=r.packageName:hP()?i.androidPackageName=r.packageName:iN(t,"operation-not-supported-in-this-environment"),e.next=5,bL(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fF(e){var t=uF().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lr();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function dF(e,t,n){return pF.apply(this,arguments)}function pF(){return pF=Kn(Bn().mark((function e(t,n,r){var i,a,o;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=uF(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(aN(t,"redirect-cancelled-by-user"))}),sF))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),hP()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),pF.apply(this,arguments)}function vF(e){var t,n,r,i,a,o,u,s,c,l,h=uF();cN("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),cN("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),cN("function"===typeof(null===(a=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),cN("function"===typeof(null===(s=null===(u=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),cN("function"===typeof(null===(l=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function mF(e){return yF.apply(this,arguments)}function yF(){return(yF=Kn(Bn().mark((function e(t){var n,r,i;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=gF(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gF(e){if(hN(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var kF=20,bF=function(e){g(n,e);var t=_(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return m(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),tf(k(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=Kn(Bn().mark((function e(){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(yL);function wF(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:TF(),postBody:null,tenantId:e.tenantId,error:aN(e,"no-auth-event")}}function _F(e,t){return IF()._set(CF(e),t)}function xF(e){return SF.apply(this,arguments)}function SF(){return(SF=Kn(Bn().mark((function e(t){var n;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,IF()._get(CF(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,IF()._remove(CF(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function EF(e,t){var n,r,i=function(e){var t=AF(e),n=t.link?decodeURIComponent(t.link):void 0,r=AF(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return AF(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=AF(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?aN(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function TF(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<kF;n++){var r=Math.floor(62*Math.random());e.push(t.charAt(r))}return e.join("")}function IF(){return tP(VO)}function CF(e){return iP("authEvent",e.config.apiKey,e.name)}function AF(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t=E(e.split("?"));t[0];return Pr(t.slice(1).join("?"))}var NF=function(){function e(){f(this,e),this._redirectPersistence=zO,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=dL,this._overrideRedirectResult=nL}return m(e,[{key:"_initialize",value:function(){var e=Kn(Bn().mark((function e(t){var n,r;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new bF(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){iN(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=Kn(Bn().mark((function e(t,n,r,i){var a,o,u,s;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vF(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),YD.clear(),e.next=10,this._originValidation(t);case 10:return o=wF(t,r,i),e.next=13,_F(t,o);case 13:return e.next=15,cF(t,o,n);case 15:return u=e.sent,e.next=18,fF(u);case 18:return s=e.sent,e.abrupt("return",dF(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return hF.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=uF(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(Kn(Bn().mark((function n(){return Bn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,xF(e);case 2:t.onEvent(RF());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=Kn(Bn().mark((function n(r){var i,a;return Bn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,xF(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=EF(i,r.url)),t.onEvent(a||RF());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");uF().handleOpenURL=function(){var e=Kn(Bn().mark((function e(t){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),PF=NF;function RF(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:aN("no-auth-event")}}var OF=1e3;function DF(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function LF(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lr();return!("file:"!==DF()&&"ionic:"!==DF()&&"capacitor:"!==DF()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function FF(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lr();return vr()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lr();return/Edge\/\d+/.test(e)}(e)}function MF(){try{var e=self.localStorage,t=KO();if(e)return e.setItem(t,"1"),e.removeItem(t),!FF()||yr()}catch(n){return jF()&&yr()}return!1}function jF(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function UF(){return("http:"===DF()||"https:"===DF()||dr()||LF())&&!(pr()||fr())&&MF()&&!jF()}function VF(){return LF()&&"undefined"!==typeof document}function qF(){return zF.apply(this,arguments)}function zF(){return(zF=Kn(Bn().mark((function e(){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(VF()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),OF);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var BF={LOCAL:"local",NONE:"none",SESSION:"session"},WF=cN,KF="persistence";function HF(e,t){WF(Object.values(BF).includes(t),e,"invalid-persistence-type"),pr()?WF(t!==BF.SESSION,e,"unsupported-persistence-type"):fr()?WF(t===BF.NONE,e,"unsupported-persistence-type"):jF()?WF(t===BF.NONE||t===BF.LOCAL&&yr(),e,"unsupported-persistence-type"):WF(t===BF.NONE||MF(),e,"unsupported-persistence-type")}function GF(e){return QF.apply(this,arguments)}function QF(){return(QF=Kn(Bn().mark((function e(t){var n,r;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=$F(),r=iP(KF,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $F(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var YF=cN,JF=function(){function e(){f(this,e),this.browserResolver=tP($L),this.cordovaResolver=tP(PF),this.underlyingResolver=null,this._redirectPersistence=zO,this._completeRedirectFn=dL,this._overrideRedirectResult=nL}return m(e,[{key:"_initialize",value:function(){var e=Kn(Bn().mark((function e(t){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=Kn(Bn().mark((function e(t,n,r,i){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Kn(Bn().mark((function e(t,n,r,i){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return VF()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return YF(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=Kn(Bn().mark((function e(){var t;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,qF();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function XF(e){return e.unwrap()}function ZF(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new iM(e,function(e,t){var n,r=zr(e),i=t;return cN(t.customData.operationType,r,"argument-error"),cN(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),RO._fromError(r,i)}(e,t));else if(r){var i=eM(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function eM(e){var t=(e instanceof gr?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof gr)&&"temporaryProof"in t&&"phoneNumber"in t)return DD.credentialFromResult(e);var n,r=t.providerId;if(!r||r===WA.PASSWORD)return null;switch(r){case WA.GOOGLE:n=_R;break;case WA.FACEBOOK:n=wR;break;case WA.GITHUB:n=xR;break;case WA.TWITTER:n=TR;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?SR._create(r,u):sR._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new bR(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof gr?n.credentialFromError(e):n.credentialFromResult(e)}function tM(e,t){return t.catch((function(t){throw t instanceof gr&&ZF(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,eM(t)),additionalUserInfo:NO(e),user:aM.getOrCreate(r)}}))}function nM(e,t){return rM.apply(this,arguments)}function rM(){return(rM=Kn(Bn().mark((function e(t,n){var r;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return tM(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var iM=function(){function e(t,n){f(this,e),this.resolver=n,this.auth=function(e){return e.wrapped()}(t)}return m(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return tM(XF(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),aM=function(){function e(t){f(this,e),this._delegate=t,this.multiFactor=function(e){var t=zr(e);return FO.has(t)||FO.set(t,LO._fromUser(t)),FO.get(t)}(t)}return m(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=Kn(Bn().mark((function e(t){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tM(this.auth,GR(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nM(this.auth,CD(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=Kn(Bn().mark((function e(t){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tM(this.auth,HD(this._delegate,t,JF)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=Kn(Bn().mark((function e(t){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GF(PP(this.auth));case 2:return e.abrupt("return",cL(this._delegate,t,JF));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=Kn(Bn().mark((function e(t){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tM(this.auth,$R(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return nM(this.auth,function(e,t,n){return ND.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return tM(this.auth,function(e,t,n){return KD.apply(this,arguments)}(this._delegate,e,JF))}},{key:"reauthenticateWithRedirect",value:function(){var e=Kn(Bn().mark((function e(t){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GF(PP(this.auth));case 2:return e.abrupt("return",uL(this._delegate,t,JF));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return yO.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=Kn(Bn().mark((function e(t){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,LR(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return _O(zr(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return _O(zr(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return OD.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return wO.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return gO.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();aM.USER_MAP=new WeakMap;var oM=cN,uM=function(){function e(t,n){if(f(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;oM(r,"invalid-api-key",{appName:t.name}),oM(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?JF:void 0;this._delegate=n.initialize({options:{persistence:cM(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(XA),this.linkUnderlyingAuth()}return m(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?aM.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){OP(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return oO.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return uO(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return aO.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tM(this._delegate,lO(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return mO.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=mR.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=Kn(Bn().mark((function e(){var t;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oM(UF(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,hL(this._delegate,JF);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",tM(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){PP(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=sM(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=sM(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return fO.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return iO.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=Kn(Bn().mark((function e(t){var n,r;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:HF(this._delegate,t),e.t0=t,e.next=e.t0===BF.SESSION?4:e.t0===BF.LOCAL?6:e.t0===BF.NONE?11:13;break;case 4:return n=zO,e.abrupt("break",14);case 6:return e.next=8,tP(fD)._isAvailable();case 8:return r=e.sent,n=r?fD:VO,e.abrupt("break",14);case 11:return n=rP,e.abrupt("break",14);case 13:return e.abrupt("return",iN("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return tM(this._delegate,function(e){return PR.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return tM(this._delegate,KR(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return tM(this._delegate,function(e,t){return ZR.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return tM(this._delegate,function(e,t,n){return KR(zr(e),yR.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return tM(this._delegate,function(e,t,n){return dO.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return nM(this._delegate,function(e,t,n){return ID.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=Kn(Bn().mark((function e(t){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oM(UF(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",tM(this._delegate,BD(this._delegate,t,JF)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=Kn(Bn().mark((function e(t){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oM(UF(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,GF(this._delegate);case 3:return e.abrupt("return",aL(this._delegate,t,JF));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return cO.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function sM(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&aM.getOrCreate(e))},error:t,complete:n}}function cM(e,t){var n=function(e,t){var n=$F();if(!n)return[];var r=iP(KF,e,t);switch(n.getItem(r)){case BF.NONE:return[rP];case BF.LOCAL:return[fD,zO];case BF.SESSION:return[zO];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(fD)||n.push(fD),"undefined"!==typeof window)for(var r=0,i=[VO,zO];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(rP)||n.push(rP),n}uM.Persistence=BF;var lM=function(){function e(){f(this,e),this.providerId="phone",this._delegate=new DD(XF(ya.auth()))}return m(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return DD.credential(e,t)}}]),e}();lM.PHONE_SIGN_IN_METHOD=DD.PHONE_SIGN_IN_METHOD,lM.PROVIDER_ID=DD.PROVIDER_ID;var hM=cN,fM=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ya.app();f(this,e),hM(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new SD(t,n,i.auth()),this.type=this._delegate.type}return m(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new Br("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new uM(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:KA,PASSWORD_RESET:HA,RECOVER_EMAIL:GA,REVERT_SECOND_FACTOR_ADDITION:QA,VERIFY_AND_CHANGE_EMAIL:$A,VERIFY_EMAIL:YA}},EmailAuthProvider:yR,FacebookAuthProvider:wR,GithubAuthProvider:xR,GoogleAuthProvider:_R,OAuthProvider:bR,SAMLAuthProvider:ER,PhoneAuthProvider:lM,PhoneMultiFactorGenerator:XL,RecaptchaVerifier:fM,TwitterAuthProvider:TR,Auth:uM,AuthCredential:FP,Error:gr}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.4.2")}(ya);ya.initializeApp({apiKey:"AIzaSyDusTR62nXSXyjblgvFNIFGepxtzYxHVF8",authDomain:"kakoot-d06ff.firebaseapp.com",databaseURL:"https://kakoot-d06ff-default-rtdb.firebaseio.com",projectId:"kakoot-d06ff",storageBucket:"kakoot-d06ff.appspot.com",messagingSenderId:"594818848188",appId:"1:594818848188:web:331461933f89b9bcb707b9"});var dM=ya.database(),pM=ya.database().ref(),vM=pM.child("users"),mM=pM.child("games");ya.firestore();function yM(){return(yM=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vM.child(t).child("templates").child(n.id).set(n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gM(){return gM=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vM.once("value",(function(e){var r=e.val();Object.keys(r).forEach((function(e){e==t&&vM.child(t).child("templates").once("value",(function(e){var t=e.val(),r=[];t&&Object.values(t).forEach((function(e){var t=null!==e&&void 0!==e?e:{},n={allQuestions:t.allQuestions,id:t.id,questionTime:t.questionTime,templateName:t.templateName};r.push(n)})),n(r)}),(function(e){console.error("Error retrieving data ",e)}))}))}));case 2:case"end":return e.stop()}}),e)}))),gM.apply(this,arguments)}var kM="".concat("/Cacarrot");function bM(e){var t=e.answerSign,n=e.answerRef,r=e.characterLimit,i=e.handleInput,a=e.onQuestionChange,o=e.answer,u=e.checkboxNumber,s=e.checkboxes,c=e.handleCheckboxChange;return(0,jn.jsxs)("span",{id:"answer-".concat(t),className:"answer",children:[(0,jn.jsx)("div",{ref:n,className:"my-input editable-div",contentEditable:!0,onInput:function(){i(n,r),a("answer".concat(t),n.current.innerText)},children:o}),(0,jn.jsx)("input",{checked:s[u].checked,className:"answer-checkbox",type:"checkbox",onChange:function(e){c(u),a("correctAnswer",t)}})]})}function wM(e){var t=e.question,n=e.questionNumber,i=e.setQuestions,a=(0,r.useRef)(null),o=(0,r.useRef)(null),u=(0,r.useRef)(null),s=(0,r.useRef)(null),l=(0,r.useRef)(null),h=c((0,r.useState)([{id:0,checked:!1},{id:1,checked:!1},{id:2,checked:!1},{id:3,checked:!1}]),2),f=h[0],d=h[1];function p(e,t){i((function(r){return r.forEach((function(r){return r.questionNumber===n&&("question"===e?r.question=t:"answerA"===e?r.answerA=t:"answerB"===e?r.answerB=t:"answerC"===e?r.answerC=t:"answerD"===e?r.answerD=t:"correctAnswer"===e&&(r.correctAnswer=t)),r})),r}))}(0,r.useEffect)((function(){var e=f.map((function(e){return 0===e.id&&"A"===t.correctAnswer||1===e.id&&"B"===t.correctAnswer||2===e.id&&"C"===t.correctAnswer||3===e.id&&"D"===t.correctAnswer?ni(ni({},e),{},{checked:!0}):ni(ni({},e),{},{checked:!1})}));d(e)}),[n]);var v=function(e,t){var n=e.current.innerText;n.length>t&&(console.log(e.current.innerText),e.current.innerText=n.slice(0,t))};function m(e){if(console.log(e),f[e].checked){var t=f.map((function(t){return t.id===e?ni(ni({},t),{},{checked:!1}):ni({},t)}));console.log(t),d(t)}else{var n=f.map((function(t){return t.id===e?ni(ni({},t),{},{checked:!0}):ni(ni({},t),{},{checked:!1})}));console.log(n),d(n)}}var y=[{answerSign:"A",answerRef:o,answer:t.answerA,checkboxNumber:0},{answerSign:"B",answerRef:u,answer:t.answerB,checkboxNumber:1},{answerSign:"C",answerRef:s,answer:t.answerC,checkboxNumber:2},{answerSign:"D",answerRef:l,answer:t.answerD,checkboxNumber:3}];return(0,jn.jsxs)("section",{className:"question-template",children:[(0,jn.jsx)("div",{ref:a,className:"my-input question-input",placeholder:"Write your question here",contentEditable:!0,onInput:function(){v(a,40),p("question",a.current.innerText)},children:t.question}),(0,jn.jsx)("img",{className:"question-image",src:"".concat(kM,"/landscape-image.jpg"),alt:"Beautiful"}),(0,jn.jsx)("div",{className:"answers-placeholder",children:y.map((function(e){return(0,jn.jsx)(bM,{answerSign:e.answerSign,answerRef:e.answerRef,answer:e.answer,checkboxNumber:e.checkboxNumber,characterLimit:70,handleInput:v,onQuestionChange:p,checkboxes:f,handleCheckboxChange:m})}))})]})}function _M(e){var t=e.value,n=e.setValue,i=e.placeholder,a=e.characterLimit,o=e.visibleWarning,u=(0,r.useRef)(null),s=c((0,r.useState)(""),2),l=s[0],h=s[1];return(0,jn.jsxs)(jn.Fragment,{children:[(0,jn.jsx)("input",{ref:u,className:"my-input",style:{margin:"1rem",fontSize:"1.5rem"},placeholder:i,value:t,onChange:function(e){!function(e){var t=e.current.value;t.length>a?(e.current.value=t.slice(0,a),o&&h("Template name can only have ".concat(a," characters length."))):h("")}(u),n(e.target.value)}}),(0,jn.jsx)("div",{className:"error",style:{padding:"10px"},children:l})]})}var xM=function(){var e=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n((function(e){return e.length>1?e.filter((function(n){return n!==e[t-1]})):e}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),SM=function(){var e=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n((function(e){return[].concat(h(e),[t])}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function EM(e){var t=e.toggleModal,n=e.questionTime,r=e.setQuestionTime,i=e.timesForAnswer;return(0,jn.jsxs)("div",{className:"bar right-bar",children:[(0,jn.jsx)("button",{onClick:t,children:"Save template"}),(0,jn.jsx)("label",{children:"Time for answer"}),(0,jn.jsx)("select",{value:n,onChange:function(e){r(parseInt(e.target.value))},children:i.map((function(e){return(0,jn.jsxs)("option",{value:e,children:[e," sec"]},e)}))})]})}function TM(e){var t=e.slideNumber,n=e.questions,i=(e.setQuestions,e.choosenQuestion),a=e.setChoosenQuestion,o=e.removeSlide;(0,r.useEffect)((function(){n[t-1].questionNumber=t}),[t]);var u=t===i?{background:"#7c73e6"}:{};return(0,jn.jsxs)("div",{className:"slide",style:u,children:[(0,jn.jsx)("div",{style:{position:"relative",left:"25%"},children:t}),(0,jn.jsx)("img",{className:"small-image",src:"".concat(kM,"/bin-image.png"),alt:"Bin",onClick:function(){o()}}),(0,jn.jsx)("img",{className:"slide-image",src:"".concat(kM,"/question-image.png"),alt:"Slide",onClick:function(){a(t)}})]})}function IM(e){var t=e.questions,n=e.setQuestions,r=e.choosenQuestion,i=e.setChoosenQuestion,a=e.deleteQuestion;return(0,jn.jsxs)("div",{className:"bar question-bar",children:[t&&t.map((function(e,o){return(0,jn.jsx)(TM,{slideNumber:o+1,questions:t,setQuestions:n,choosenQuestion:r,setChoosenQuestion:i,removeSlide:function(){a(o+1)}},e.questionNumber)})),(0,jn.jsx)("button",{onClick:function(){SM({questionNumber:t.length+1,question:"",answerA:"",answerB:"",answerC:"",answerD:"",correctAnswer:""},n)},children:"Add question"})]})}var CM=function(){var e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()};function AM(e,t,n,r){var i=c(localStorage.getItem("username").split("@"),2),a=i[0],o=(i[1],[]);e.forEach((function(e){(function(e){if(e.answerA&&e.answerB&&e.answerC&&e.answerD&&e.question&&e.correctAnswer)return!0;return!1})(e)&&o.push(e)}));var u={id:r||CM(),templateName:t,allQuestions:o,questionTime:n};return!(o.length<1)&&(function(e,t){yM.apply(this,arguments)}(a,u),!0)}function NM(e){var t=e.time,n=e.setTime,i=e.bonusStyling;return(0,r.useEffect)((function(){var e=setInterval((function(){t>0&&n((function(e){return e-1}))}),1e3);return function(){return clearInterval(e)}}),[t]),(0,jn.jsx)("div",{className:"timer",style:i,children:(0,jn.jsx)("span",{style:{fontSize:"2.5em"},children:t})})}function PM(e){var t=e.time,n=e.setTime,i=e.bonusStyling;return(0,r.useEffect)((function(){var e=setInterval((function(){t>0&&n((function(e){return e-1}))}),1e3);return function(){return clearInterval(e)}}),[t]),(0,jn.jsx)("div",{className:"timer",style:i,children:(0,jn.jsx)("span",{style:{fontSize:"2.5em"},children:t})})}function RM(e){return OM.apply(this,arguments)}function OM(){return OM=Kn(Bn().mark((function e(t){var n;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=mM.orderByChild("name").equalTo(t.gamecode),e.next=3,n.once("value",(function(e){e.exists()&&mM.child(t.gamecode).remove(),mM.child(t.gamecode).set(t)}),(function(e){console.error("Error checking record existence: ",e)}));case 3:case"end":return e.stop()}}),e)}))),OM.apply(this,arguments)}function DM(){return(DM=Kn(Bn().mark((function e(t,n,r){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mM.once("value",(function(e){var i=e.val();Object.keys(i).forEach((function(e){var a=i[e];t==e&&"waiting"==a.started&&((a.players?Object.keys(a.players).length:0)<10?n(!0):r("Maximum amount of players reached!"))})),r("Wrong code!")}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function LM(){return(LM=Kn(Bn().mark((function e(t,n,r,i){var a;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!0,e.next=3,mM.child(t).child("players").once("value",(function(e){var t=e.val();t&&Object.values(t).forEach((function(e){e.name==n&&(a=!1)}))}));case 3:console.log(a),a?r(!0):i("There is player with that name");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function FM(e,t,n){return MM.apply(this,arguments)}function MM(){return MM=Kn(Bn().mark((function e(t,n,r){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:mM.child(t).on("value",(function(e){var t=e.val();if(t){var r=null!==t&&void 0!==t?t:{},i=r.gameTemplate,a=r.gamecode,o=r.players,u=r.started,s=r.currentQuestion,c=r.gamePhase,l=r.time,h=r.startingTime,f=[];o&&Object.values(o).forEach((function(e){var t=null!==e&&void 0!==e?e:{},n=t.id,r=t.name,i=t.points,a=t.lastAnswer,o=t.shownComponent;if(a){var u={id:n,name:r,points:i,lastAnswer:a,shownComponent:o};f.push(u)}else{var s={id:n,name:r,points:i,lastAnswer:{choosenAnswer:"",sendingTime:0,questionNumber:1},shownComponent:"answers"};null===f||void 0===f||f.push(s)}})),n({gameTemplate:i,gamecode:a,players:f,started:u,currentQuestion:s,gamePhase:c,time:l,startingTime:h})}}));case 1:case"end":return e.stop()}}),e)}))),MM.apply(this,arguments)}function jM(){return(jM=Kn(Bn().mark((function e(t,n,r){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:mM.child(t).child("players").once("value",(function(e){var i=e.val(),a=0;i&&Object.keys(i).forEach((function(e){parseInt(e)==a&&(a+=1)})),n.id=a,r(a),mM.child(t).child("players").child("".concat(a)).set(n)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function UM(e,t){return VM.apply(this,arguments)}function VM(){return(VM=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:mM.child(t).child("started").on("value",(function(e){var t=e.val();n(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qM(e,t,n,r,i){return zM.apply(this,arguments)}function zM(){return(zM=Kn(Bn().mark((function e(t,n,r,i,a){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:mM.child(t).child("players").once("value",(function(e){e.val().forEach((function(e){e.name==n&&mM.child(t).child("players").child("".concat(e.id)).child("lastAnswer").set({choosenAnswer:r,sendingTime:a,questionNumber:i})}))}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function BM(e,t){return WM.apply(this,arguments)}function WM(){return(WM=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:mM.child(t).child("currentQuestion").set(n);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function KM(){return(KM=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:mM.child(t).child("currentQuestion").on("value",(function(e){var t=e.val();n(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function HM(e,t,n){return GM.apply(this,arguments)}function GM(){return(GM=Kn(Bn().mark((function e(t,n,r){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:mM.child(t).child("players").once("value",(function(e){e.val().forEach((function(e){e.name==n&&mM.child(t).child("players").child("".concat(e.id)).child("points").set(r)}))}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function QM(){return(QM=Kn(Bn().mark((function e(t,n,r){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:mM.child(t).child("players").once("value",(function(e){e.val().forEach((function(e){e.name==n&&mM.child(t).child("players").child("".concat(e.id)).child("points").once("value",(function(n){var i=n.val()+r;mM.child(t).child("players").child("".concat(e.id)).child("points").set(i)}))}))}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $M(){return($M=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:mM.child(t).child("time").on("value",(function(e){var t=e.val();null!=t&&n(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function YM(){return(YM=Kn(Bn().mark((function e(t,n,r){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:mM.child(t).child("players").once("value",(function(e){e.val().forEach((function(e){e.name==n&&r(e)}))}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function JM(){return(JM=Kn(Bn().mark((function e(t,n,r){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:mM.child(t).child("players").child("".concat(n)).child("shownComponent").on("value",(function(e){var t=e.val();t&&r(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function XM(){return(XM=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:mM.child(t).child("startingTime").on("value",(function(e){var t=e.val();n(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ZM(){return(ZM=Kn(Bn().mark((function e(t,n){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:mM.child(t).child("winners").on("value",(function(e){var t=e.val();n(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ej=function(){var e=Kn(Bn().mark((function e(t,n,r,i){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("game"!=r){e.next=5;break}return e.next=3,mM.child(t).set(n);case 3:case 8:case 13:case 18:case 23:case 28:case 33:case 38:case 43:case 48:case 53:case 58:case 63:e.next=68;break;case 5:if("currentQuestion"!=r){e.next=10;break}return e.next=8,mM.child(t).child("currentQuestion").set(n);case 10:if("time"!=r){e.next=15;break}return e.next=13,mM.child(t).child("time").set(n);case 15:if("questionDone"!=r){e.next=20;break}return e.next=18,mM.child(t).child("currentQuestion").set(n);case 20:if("points"!=r){e.next=25;break}return e.next=23,mM.child(t).child("players").child("".concat(i)).child("points").set(n);case 25:if("game"!=r){e.next=30;break}return e.next=28,mM.child(t).set(n);case 30:if("shownComponent"!=r){e.next=35;break}return e.next=33,mM.child(t).child("players").child("".concat(i)).child("shownComponent").set(n);case 35:if("players"!=r){e.next=40;break}return e.next=38,mM.child(t).child("players").set(n);case 40:if("gamePhase"!=r){e.next=45;break}return e.next=43,mM.child(t).child("gamePhase").set(n);case 45:if("lastAnswer"!=r){e.next=50;break}return e.next=48,mM.child(t).child("players").child("".concat(i)).child("lastAnswer").set(n);case 50:if("gameStarted"!=r){e.next=55;break}return e.next=53,mM.child(t).child("started").set(n);case 55:if("startingTime"!=r){e.next=60;break}return e.next=58,mM.child(t).child("startingTime").set(n);case 60:if("winners"!=r){e.next=65;break}return e.next=63,mM.child(t).child("winners").set(n);case 65:if("hostShowing"!=r){e.next=68;break}return e.next=68,mM.child(t).child("hostShowing").set(n);case 68:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),tj=function(){var e=Kn(Bn().mark((function e(t,n,r,i,a){var o,u;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nj(i,t,a);case 2:o=e.sent,u=o.val(),"hostConnection"==i&&console.log(u),r("number"==typeof n?"number"==typeof u?u:n:u||n);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a){return e.apply(this,arguments)}}();function nj(e,t,n){return rj.apply(this,arguments)}function rj(){return(rj=Kn(Bn().mark((function e(t,n,r){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("currentQuestion"!=t){e.next=6;break}return e.next=3,mM.child(n).child("currentQuestion").once("value");case 3:case 9:case 15:case 21:case 27:case 33:case 39:case 45:case 51:case 57:case 63:case 69:case 75:case 81:return e.abrupt("return",e.sent);case 6:if("time"!=t){e.next=12;break}return e.next=9,mM.child(n).child("time").once("value");case 12:if("questionDone"!=t){e.next=18;break}return e.next=15,mM.child(n).child("currentQuestion").once("value");case 18:if("points"!=t){e.next=24;break}return e.next=21,mM.child(n).child("players").child("".concat(r)).child("points").once("value");case 24:if("game"!=t){e.next=30;break}return e.next=27,mM.child(n).once("value");case 30:if("shownComponent"!=t){e.next=36;break}return e.next=33,mM.child(n).child("players").child("".concat(r)).child("shownComponent").once("value");case 36:if("players"!=t){e.next=42;break}return e.next=39,mM.child(n).child("players").once("value");case 42:if("gamePhase"!=t){e.next=48;break}return e.next=45,mM.child(n).child("gamePhase").once("value");case 48:if("currentQuestionIndex"!=t){e.next=54;break}return e.next=51,mM.child(n).child("currentQuestion").once("value");case 54:if("lastAnswer"!=t){e.next=60;break}return e.next=57,mM.child(n).child("players").child("".concat(r)).child("lastAnswer").once("value");case 60:if("startingTime"!=t){e.next=66;break}return e.next=63,mM.child(n).child("startingTime").once("value");case 66:if("winners"!=t){e.next=72;break}return e.next=69,mM.child(n).child("winners").once("value");case 72:if("hostConnection"!=t){e.next=78;break}return e.next=75,mM.child("".concat(n,"/hostConnection")).once("value");case 78:if("hostShowing"!=t){e.next=82;break}return e.next=81,mM.child(n).child("hostShowing").once("value");case 82:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ij=nh(dM,".info/connected");function aj(e){var t=e.currentQuestion,n=e.time,i=e.setTime,a=e.gamecode,o=c((0,r.useState)(),2),u=o[0],s=o[1],l=c((0,r.useState)(!1),2),h=l[0],f=l[1],d=c((0,r.useState)({}),2),p=(d[0],d[1]);return(0,r.useEffect)((function(){tj(a,3,s,"startingTime")}),[]),(0,r.useEffect)((function(){u&&(p({transform:"rotate(".concat(90*(3-u),"deg)")}),ej(a,u,"startingTime"),u<1&&setTimeout((function(){f(!0)}),1e3)),0==u&&(ej(a,u,"startingTime"),f(!0))}),[u]),(0,jn.jsxs)(jn.Fragment,{children:[!h&&(0,jn.jsx)(jn.Fragment,{children:(0,jn.jsxs)("div",{style:{position:"absolute",top:"45%"},children:[(0,jn.jsx)("div",{className:"my-input shown-question",children:t.question}),(0,jn.jsx)(PM,{time:u,setTime:s,bonusStyling:{display:"none"}})]})}),h&&(0,jn.jsxs)(jn.Fragment,{children:[(0,jn.jsx)(NM,{time:n,setTime:i,bonusStyling:{left:"90%"}}),(0,jn.jsx)("div",{className:"my-input shown-question",children:t.question}),(0,jn.jsx)("img",{className:"question-image",src:"".concat(kM,"/landscape-image.jpg"),style:{width:"40%"}}),(0,jn.jsxs)("div",{className:"answers-placeholder",style:{width:"80%",marginBottom:"2em"},children:[(0,jn.jsx)("span",{id:"answer-A",className:"answer",children:t.answerA}),(0,jn.jsx)("span",{id:"answer-B",className:"answer",children:t.answerB}),(0,jn.jsx)("span",{id:"answer-C",className:"answer",children:t.answerC}),(0,jn.jsx)("span",{id:"answer-D",className:"answer",children:t.answerD})]})]})]})}function oj(e){var t=e.player;return(0,jn.jsxs)("div",{className:"player-stats",children:[(0,jn.jsx)("span",{children:t.name}),(0,jn.jsx)("span",{children:t.points})]})}function uj(e){var t=e.time,n=e.setTime,i=e.players,a=e.setPlayers,o=e.gamecode;return(0,r.useEffect)((function(){a(i.sort((function(e,t){return t.points-e.points})))}),[]),(0,r.useEffect)((function(){t<1&&ej(o,3,"startingTime")}),[t]),(0,jn.jsxs)(jn.Fragment,{children:[(0,jn.jsx)(NM,{time:t,setTime:n,bonusStyling:{top:"1%"}}),(0,jn.jsxs)("div",{className:"player-stats-list column-shaped-container",children:[(0,jn.jsxs)("p",{style:{display:"flex",justifyContent:"space-between",width:"80%"},children:[(0,jn.jsx)("span",{style:{backgroundColor:"#fafafa",borderRadius:"30px",padding:"10px"},children:"Name"}),(0,jn.jsx)("span",{style:{backgroundColor:"#fafafa",borderRadius:"30px",padding:"10px"},children:"Score"})]}),i.map((function(e){return(0,jn.jsx)(oj,{player:e},e.id)}))]})]})}function sj(e){var t=e.name,n=e.points,r=e.statsColor,i=e.winImage;return(0,jn.jsxs)("div",{className:"player-stats",style:{backgroundColor:r},children:[(0,jn.jsxs)("div",{className:"img-name-container",style:{height:"100%"},children:[(0,jn.jsx)("img",{className:"winners-image",src:"".concat(kM,"/").concat(i)}),(0,jn.jsx)("span",{children:t})]}),(0,jn.jsxs)("span",{style:{marginLeft:"2rem"},children:["Score: ",n]})]})}function cj(e){var t=e.winners,n=be(),r=[{name:t[0].name,points:t[0].points,statsColor:"#ffd700",winImage:"first-place.png"},{name:t[1]?t[1].name:null,points:t[1]?t[1].points:0,statsColor:"#C0C0C0",winImage:"second-place.jpg"},{name:t[2]?t[2].name:null,points:t[2]?t[2].points:0,statsColor:"#CD7F32",winImage:"third-place.jpg"}];return(0,jn.jsx)(jn.Fragment,{children:(0,jn.jsxs)("div",{className:"player-stats-list column-shaped-container",style:{margin:"10% 0 0 0",maxHeight:"40%",overflow:"visible"},children:[(0,jn.jsx)("h1",{children:"Winners"}),r.map((function(e){return e.name&&(0,jn.jsx)(sj,{name:e.name,points:e.points,statsColor:e.statsColor,winImage:e.winImage},e.name)})),(0,jn.jsx)("button",{style:{marginTop:"10%"},onClick:function(){n("/")},children:"Go back to menu"})]})})}var lj=function(){return(0,r.useEffect)((function(){var e=function(e){e.preventDefault(),e.returnValue=""};return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}),[]),null};var hj=function(){var e=Kn(Bn().mark((function e(t,n){var r,i,a,o,u,s,c,l,h,f,d,p,v,m,y;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mM.child(t.gamecode).once("value");case 2:if(r=e.sent,i=r.val(),a={gameTemplate:t.template,players:[],gamecode:t.gamecode,started:"waiting",currentQuestion:0,time:t.template.questionTime,gamePhase:1,startingTime:3,winners:[],hostConnection:!0},!i){e.next=12;break}u=(o=null!==i&&void 0!==i?i:{}).gameTemplate,s=o.gamecode,c=o.players,l=o.started,h=o.currentQuestion,f=o.time,d=o.gamePhase,p=o.startingTime,v=o.winners,m=o.hostConnection,y=c?Object.values(c).map((function(e){var t=null!==e&&void 0!==e?e:{};return{id:t.id,name:t.name,points:t.points,lastAnswer:t.lastAnswer,shownComponent:t.shownComponent}})):[],n(a={gameTemplate:u,gamecode:s,players:y,started:l,currentQuestion:h,time:f,gamePhase:d,startingTime:p,winners:v,hostConnection:m}),e.next=14;break;case 12:return e.next=14,RM(a);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function fj(e,t){t(e.sort((function(e,t){return t.points-e.points})).slice(0,2))}function dj(){var e=be();return(0,jn.jsxs)(jn.Fragment,{children:[(0,jn.jsx)("h1",{children:"Game has been abandoned"}),(0,jn.jsx)("button",{onClick:function(){return e("/")},children:"Return back to menu"})]})}function pj(e){var t=e.message,n=e.time,i=e.setTime,a=c((0,r.useState)(!0),2),o=a[0],u=a[1];return(0,r.useEffect)((function(){localStorage.setItem("time","".concat(n)),n<1&&o&&u(!1)}),[n]),(0,jn.jsx)(jn.Fragment,{children:o?(0,jn.jsxs)(jn.Fragment,{children:[(0,jn.jsx)("img",{src:"".concat(kM,"/loading.gif"),style:{height:"30rem",width:"30rem"}}),(0,jn.jsx)("h1",{children:t}),(0,jn.jsx)(PM,{time:n,setTime:i,bonusStyling:{display:"none"}})]}):(0,jn.jsx)(dj,{})})}function vj(e){var t=e.gameState,n=e.time,i=e.setShownComponent,a=e.username,o=e.setPointsForLast,u=e.setLastAnswer,s=c((0,r.useState)(3),2),l=s[0],h=s[1],f=c((0,r.useState)({}),2),d=f[0],p=f[1];(0,r.useEffect)((function(){!function(e,t){XM.apply(this,arguments)}(t.gamecode,h)}),[]);var v=function(e){return Kn(Bn().mark((function r(){var s,c;return Bn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=t.gameTemplate.questionTime-n,r.next=3,qM(t.gamecode,a,e,t.currentQuestion,s);case 3:c={choosenAnswer:e,sendingTime:s,questionNumber:t.currentQuestion},u(c),o(c),i("between");case 7:case"end":return r.stop()}}),r)})))};return(0,r.useEffect)((function(){n<1&&i("between")}),[n]),(0,r.useEffect)((function(){(l||0==l)&&p({transform:"rotate(".concat(90*(3-l),"deg)")})}),[l]),(0,jn.jsxs)(jn.Fragment,{children:[l>0&&(0,jn.jsxs)("div",{className:"circle",style:{position:"absolute",top:"45%"},children:[(0,jn.jsx)("div",{className:"rolling-square",style:d}),(0,jn.jsx)(PM,{time:l,setTime:function(){},bonusStyling:{marginTop:"0",position:"absolute"}})]}),0==l&&(0,jn.jsxs)(jn.Fragment,{children:[(0,jn.jsx)(NM,{time:n,setTime:function(){},bonusStyling:{top:"0%"}}),(0,jn.jsxs)("div",{className:"grid-container",children:[(0,jn.jsx)("div",{id:"answer-A",onClick:v("A")}),(0,jn.jsx)("div",{id:"answer-B",onClick:v("B")}),(0,jn.jsx)("div",{id:"answer-C",onClick:v("C")}),(0,jn.jsx)("div",{id:"answer-D",onClick:v("D")})]})]})]})}function mj(e){var t=e.ability,n=e.playerPoints,i=e.gameState,a=e.player,o=e.setPoints,u=e.setActiveEffects,s=(0,r.useRef)(null),l="EraseEnemyPoints"==t.name,h=n<500,f=c((0,r.useState)(""),2),d=f[0],p=f[1];return console.log(i),(0,jn.jsxs)("div",{ref:s,className:"ability-card",style:{},"aria-disabled":!0,children:[(0,jn.jsx)("div",{className:"ability-card-name",children:t.name}),(0,jn.jsx)("div",{className:"ability-card-image",children:(0,jn.jsx)("img",{src:"".concat(kM,"/").concat(t.representingImage),style:{height:"100%",width:"100%"}})}),(0,jn.jsxs)("div",{className:"ability-card-text",children:[t.explanation,(0,jn.jsxs)("div",{children:[l&&(0,jn.jsx)("select",{onChange:function(e){return p(e.target.value)},children:i.players.map((function(e,t){return(0,jn.jsx)("option",{value:e.name,children:e.name},t)}))}),(0,jn.jsx)("button",{disabled:h,onClick:function(){l?d&&t.onChoose(i.gamecode,a.name,o,u,d):t.onChoose(i.gamecode,a.name,o,u,d)},children:"Use ability"})]})]})]})}var yj=[{name:"DoubleNext",cost:500,onChoose:function(e,t,n,r,i){console.log("double next"),n((function(n){var r=n-500;return HM(e,t,r),r})),r((function(e){var t=h(e);return t.push("DoubleNext"),t}))},representingImage:"2x-image.jpg",explanation:"You sacrifice your 500 points to double your next answer points"},{name:"EraseEnemyPoints",cost:500,onChoose:function(e,t,n,r,i){console.log("erase points"),n((function(n){return HM(e,t,n-500),n-500})),function(e,t,n){QM.apply(this,arguments)}(e,i,-700)},representingImage:"thief-stealing.jpg",explanation:"You sacrifice your 500 points to erase 700 points from choosen player"}];function gj(e){var t=e.gameState,n=e.player,r=e.setPoints,i=e.setActiveEffects,a=e.points,o=e.setComponentState;return(0,jn.jsxs)(jn.Fragment,{children:[(0,jn.jsx)("div",{className:"abilities-placeholder",children:yj.map((function(e,o){return(0,jn.jsx)(mj,{ability:e,playerPoints:a,gameState:t,player:n,setPoints:r,setActiveEffects:i},o)}))}),(0,jn.jsx)("button",{style:{marginTop:"2rem"},onClick:function(){return o("waitingForOthers")},children:"Skip using abilities"})]})}function kj(e){var t=e.gameState,n=e.setShownComponent,i=e.questionDone,a=e.setQuestionsDone,o=e.setTime,u=e.lastQuestionPoints,s=e.setLastQuestionPoints,l=e.player,h=e.points,f=e.setPoints,d=e.setActiveEffects,p=c((0,r.useState)(0),2),v=p[0],m=p[1],y=c((0,r.useState)("showingAnswer"),2),g=y[0],k=y[1];(0,r.useEffect)((function(){tj(t.gamecode,i,a,"questionDone"),function(e,t){KM.apply(this,arguments)}(t.gamecode,m)}),[]),(0,r.useEffect)((function(){v>i&&(console.log("alo"),o(t.gameTemplate.questionTime),s(0),n("answers"))}),[v]),(0,r.useEffect)((function(){k("showingAnswer")}),[t.gamePhase]);var b=0!=u?"good-answer.png":"wrong-answer.png",w=0!=u?"Good answer!":"Wrong answer!";return(0,jn.jsxs)(jn.Fragment,{children:["showingAnswer"==g&&(0,jn.jsx)(jn.Fragment,{children:(0,jn.jsxs)("div",{className:"answer-result-container",children:[(0,jn.jsx)("img",{className:"circle-image",src:"".concat(kM,"/").concat(b),alt:"Answer",style:{width:"50%",aspectRatio:1}}),(0,jn.jsx)("h2",{children:w}),(0,jn.jsxs)("h4",{children:["+ ",u," points"]})]})}),"choosingAbility"==g&&(0,jn.jsx)(gj,{gameState:t,player:l,setPoints:f,setActiveEffects:d,points:h,setComponentState:k}),"waitingForOthers"==g&&(0,jn.jsx)(pj,{message:"Wait for other players"})]})}function bj(e){var t=e.player,n=e.points;return(0,jn.jsxs)("div",{className:"navbar",style:{zIndex:"20",position:"absolute",top:"0"},children:[(0,jn.jsx)("h3",{style:{margin:"0 30px"},children:t.name}),(0,jn.jsxs)("h3",{style:{margin:"0 30px"},children:["Points: ",n]})]})}function wj(e){var t=e.player,n=e.image;return(0,jn.jsxs)("div",{className:"player-container",children:[(0,jn.jsx)("div",{className:"player",style:{backgroundImage:n}}),(0,jn.jsx)("span",{children:t.name})]},t.id)}var _j=r.createContext({claims:[],update:function(){}});function xj(e){var t=c((0,r.useState)(!1),2),n=t[0],i=t[1],a=(0,r.useContext)(_j).claims;return(0,r.useEffect)((function(){if(e.role){var t=a.findIndex((function(t){return"role"===t.name&&t.value===e.role}));i(t>-1)}else i(a.length>0)}),[a,e.role]),(0,jn.jsx)(jn.Fragment,{children:n?e.isAuthorized:e.notAuthorized})}function Sj(){var e=be(),t=c((0,r.useState)(""),2),n=t[0],i=t[1],a=c((0,r.useState)(!1),2),o=a[0],u=a[1],s=c((0,r.useState)(""),2),l=s[0],h=s[1],f=c((0,r.useState)(window.innerWidth),2),d=f[0],p=f[1];(0,r.useEffect)((function(){window.addEventListener("resize",(function(){p(window.innerWidth)}))}),[]),(0,r.useEffect)((function(){p(window.innerWidth)}),[window.innerWidth]);var v=d>550;function m(){!function(e,t,n){DM.apply(this,arguments)}(n,u,h)}return(0,r.useEffect)((function(){o&&e("/input-name",{state:n})}),[o]),(0,jn.jsxs)(jn.Fragment,{children:[v&&(0,jn.jsxs)(jn.Fragment,{children:[(0,jn.jsx)("h1",{children:"Cacarrot"}),(0,jn.jsx)("div",{className:"paragraph",children:(0,jn.jsx)(xj,{isAuthorized:(0,jn.jsx)("button",{className:"my-button",onClick:function(){e("create")},children:"Create your own Cacarrot"}),notAuthorized:(0,jn.jsxs)(jn.Fragment,{children:[(0,jn.jsx)("button",{onClick:function(){return e("/login")},children:"Login"}),(0,jn.jsx)("button",{onClick:function(){return e("/register")},children:"Register"})]})})})]}),(0,jn.jsxs)("div",{className:"paragraph",style:{marginTop:"30px"},children:[(0,jn.jsx)("div",{children:"Join game with code"}),(0,jn.jsx)(_M,{value:n,setValue:i,placeholder:"Put in game code",characterLimit:6,visibleWarning:!1}),l&&(0,jn.jsx)("div",{className:"error",children:l}),(0,jn.jsx)("button",{className:"my-button",onClick:function(){m()},children:"Join"})]})]})}function Ej(e){return(0,jn.jsx)(jn.Fragment,{children:e.errors?(0,jn.jsx)("ul",{style:{color:"red"},children:e.errors.map((function(e,t){return(0,jn.jsx)("li",{children:e},t)}))}):null})}var Tj=n(457),Ij=n.n(Tj),Cj=function(e){return function(e){return!!e&&"object"===typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===Aj}(e)}(e)};var Aj="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function Nj(e,t){return!1!==t.clone&&t.isMergeableObject(e)?Rj(function(e){return Array.isArray(e)?[]:{}}(e),e,t):e}function Pj(e,t,n){return e.concat(t).map((function(e){return Nj(e,n)}))}function Rj(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||Pj,n.isMergeableObject=n.isMergeableObject||Cj;var r=Array.isArray(t);return r===Array.isArray(e)?r?n.arrayMerge(e,t,n):function(e,t,n){var r={};return n.isMergeableObject(e)&&Object.keys(e).forEach((function(t){r[t]=Nj(e[t],n)})),Object.keys(t).forEach((function(i){n.isMergeableObject(t[i])&&e[i]?r[i]=Rj(e[i],t[i],n):r[i]=Nj(t[i],n)})),r}(e,t,n):Nj(t,n)}Rj.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return Rj(e,n,t)}),{})};var Oj=Rj,Dj="object"==typeof global&&global&&global.Object===Object&&global,Lj="object"==typeof self&&self&&self.Object===Object&&self,Fj=Dj||Lj||Function("return this")(),Mj=Fj.Symbol,jj=Object.prototype,Uj=jj.hasOwnProperty,Vj=jj.toString,qj=Mj?Mj.toStringTag:void 0;var zj=function(e){var t=Uj.call(e,qj),n=e[qj];try{e[qj]=void 0;var r=!0}catch(a){}var i=Vj.call(e);return r&&(t?e[qj]=n:delete e[qj]),i},Bj=Object.prototype.toString;var Wj=function(e){return Bj.call(e)},Kj=Mj?Mj.toStringTag:void 0;var Hj=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Kj&&Kj in Object(e)?zj(e):Wj(e)};var Gj=function(e,t){return function(n){return e(t(n))}},Qj=Gj(Object.getPrototypeOf,Object);var $j=function(e){return null!=e&&"object"==typeof e},Yj=Function.prototype,Jj=Object.prototype,Xj=Yj.toString,Zj=Jj.hasOwnProperty,eU=Xj.call(Object);var tU=function(e){if(!$j(e)||"[object Object]"!=Hj(e))return!1;var t=Qj(e);if(null===t)return!0;var n=Zj.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Xj.call(n)==eU};var nU=function(){this.__data__=[],this.size=0};var rU=function(e,t){return e===t||e!==e&&t!==t};var iU=function(e,t){for(var n=e.length;n--;)if(rU(e[n][0],t))return n;return-1},aU=Array.prototype.splice;var oU=function(e){var t=this.__data__,n=iU(t,e);return!(n<0)&&(n==t.length-1?t.pop():aU.call(t,n,1),--this.size,!0)};var uU=function(e){var t=this.__data__,n=iU(t,e);return n<0?void 0:t[n][1]};var sU=function(e){return iU(this.__data__,e)>-1};var cU=function(e,t){var n=this.__data__,r=iU(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function lU(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}lU.prototype.clear=nU,lU.prototype.delete=oU,lU.prototype.get=uU,lU.prototype.has=sU,lU.prototype.set=cU;var hU=lU;var fU=function(){this.__data__=new hU,this.size=0};var dU=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var pU=function(e){return this.__data__.get(e)};var vU=function(e){return this.__data__.has(e)};var mU=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var yU=function(e){if(!mU(e))return!1;var t=Hj(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},gU=Fj["__core-js_shared__"],kU=function(){var e=/[^.]+$/.exec(gU&&gU.keys&&gU.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var bU=function(e){return!!kU&&kU in e},wU=Function.prototype.toString;var _U=function(e){if(null!=e){try{return wU.call(e)}catch(t){}try{return e+""}catch(t){}}return""},xU=/^\[object .+?Constructor\]$/,SU=Function.prototype,EU=Object.prototype,TU=SU.toString,IU=EU.hasOwnProperty,CU=RegExp("^"+TU.call(IU).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var AU=function(e){return!(!mU(e)||bU(e))&&(yU(e)?CU:xU).test(_U(e))};var NU=function(e,t){return null==e?void 0:e[t]};var PU=function(e,t){var n=NU(e,t);return AU(n)?n:void 0},RU=PU(Fj,"Map"),OU=PU(Object,"create");var DU=function(){this.__data__=OU?OU(null):{},this.size=0};var LU=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},FU=Object.prototype.hasOwnProperty;var MU=function(e){var t=this.__data__;if(OU){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return FU.call(t,e)?t[e]:void 0},jU=Object.prototype.hasOwnProperty;var UU=function(e){var t=this.__data__;return OU?void 0!==t[e]:jU.call(t,e)};var VU=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=OU&&void 0===t?"__lodash_hash_undefined__":t,this};function qU(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}qU.prototype.clear=DU,qU.prototype.delete=LU,qU.prototype.get=MU,qU.prototype.has=UU,qU.prototype.set=VU;var zU=qU;var BU=function(){this.size=0,this.__data__={hash:new zU,map:new(RU||hU),string:new zU}};var WU=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var KU=function(e,t){var n=e.__data__;return WU(t)?n["string"==typeof t?"string":"hash"]:n.map};var HU=function(e){var t=KU(this,e).delete(e);return this.size-=t?1:0,t};var GU=function(e){return KU(this,e).get(e)};var QU=function(e){return KU(this,e).has(e)};var $U=function(e,t){var n=KU(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function YU(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}YU.prototype.clear=BU,YU.prototype.delete=HU,YU.prototype.get=GU,YU.prototype.has=QU,YU.prototype.set=$U;var JU=YU;var XU=function(e,t){var n=this.__data__;if(n instanceof hU){var r=n.__data__;if(!RU||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new JU(r)}return n.set(e,t),this.size=n.size,this};function ZU(e){var t=this.__data__=new hU(e);this.size=t.size}ZU.prototype.clear=fU,ZU.prototype.delete=dU,ZU.prototype.get=pU,ZU.prototype.has=vU,ZU.prototype.set=XU;var eV=ZU;var tV=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},nV=function(){try{var e=PU(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();var rV=function(e,t,n){"__proto__"==t&&nV?nV(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},iV=Object.prototype.hasOwnProperty;var aV=function(e,t,n){var r=e[t];iV.call(e,t)&&rU(r,n)&&(void 0!==n||t in e)||rV(e,t,n)};var oV=function(e,t,n,r){var i=!n;n||(n={});for(var a=-1,o=t.length;++a<o;){var u=t[a],s=r?r(n[u],e[u],u,n,e):void 0;void 0===s&&(s=e[u]),i?rV(n,u,s):aV(n,u,s)}return n};var uV=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};var sV=function(e){return $j(e)&&"[object Arguments]"==Hj(e)},cV=Object.prototype,lV=cV.hasOwnProperty,hV=cV.propertyIsEnumerable,fV=sV(function(){return arguments}())?sV:function(e){return $j(e)&&lV.call(e,"callee")&&!hV.call(e,"callee")},dV=fV,pV=Array.isArray;var vV=function(){return!1},mV="object"==typeof exports&&exports&&!exports.nodeType&&exports,yV=mV&&"object"==typeof module&&module&&!module.nodeType&&module,gV=yV&&yV.exports===mV?Fj.Buffer:void 0,kV=(gV?gV.isBuffer:void 0)||vV,bV=/^(?:0|[1-9]\d*)$/;var wV=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&bV.test(e))&&e>-1&&e%1==0&&e<t};var _V=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},xV={};xV["[object Float32Array]"]=xV["[object Float64Array]"]=xV["[object Int8Array]"]=xV["[object Int16Array]"]=xV["[object Int32Array]"]=xV["[object Uint8Array]"]=xV["[object Uint8ClampedArray]"]=xV["[object Uint16Array]"]=xV["[object Uint32Array]"]=!0,xV["[object Arguments]"]=xV["[object Array]"]=xV["[object ArrayBuffer]"]=xV["[object Boolean]"]=xV["[object DataView]"]=xV["[object Date]"]=xV["[object Error]"]=xV["[object Function]"]=xV["[object Map]"]=xV["[object Number]"]=xV["[object Object]"]=xV["[object RegExp]"]=xV["[object Set]"]=xV["[object String]"]=xV["[object WeakMap]"]=!1;var SV=function(e){return $j(e)&&_V(e.length)&&!!xV[Hj(e)]};var EV=function(e){return function(t){return e(t)}},TV="object"==typeof exports&&exports&&!exports.nodeType&&exports,IV=TV&&"object"==typeof module&&module&&!module.nodeType&&module,CV=IV&&IV.exports===TV&&Dj.process,AV=function(){try{var e=IV&&IV.require&&IV.require("util").types;return e||CV&&CV.binding&&CV.binding("util")}catch(t){}}(),NV=AV&&AV.isTypedArray,PV=NV?EV(NV):SV,RV=Object.prototype.hasOwnProperty;var OV=function(e,t){var n=pV(e),r=!n&&dV(e),i=!n&&!r&&kV(e),a=!n&&!r&&!i&&PV(e),o=n||r||i||a,u=o?uV(e.length,String):[],s=u.length;for(var c in e)!t&&!RV.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||wV(c,s))||u.push(c);return u},DV=Object.prototype;var LV=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||DV)},FV=Gj(Object.keys,Object),MV=Object.prototype.hasOwnProperty;var jV=function(e){if(!LV(e))return FV(e);var t=[];for(var n in Object(e))MV.call(e,n)&&"constructor"!=n&&t.push(n);return t};var UV=function(e){return null!=e&&_V(e.length)&&!yU(e)};var VV=function(e){return UV(e)?OV(e):jV(e)};var qV=function(e,t){return e&&oV(t,VV(t),e)};var zV=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},BV=Object.prototype.hasOwnProperty;var WV=function(e){if(!mU(e))return zV(e);var t=LV(e),n=[];for(var r in e)("constructor"!=r||!t&&BV.call(e,r))&&n.push(r);return n};var KV=function(e){return UV(e)?OV(e,!0):WV(e)};var HV=function(e,t){return e&&oV(t,KV(t),e)},GV="object"==typeof exports&&exports&&!exports.nodeType&&exports,QV=GV&&"object"==typeof module&&module&&!module.nodeType&&module,$V=QV&&QV.exports===GV?Fj.Buffer:void 0,YV=$V?$V.allocUnsafe:void 0;var JV=function(e,t){if(t)return e.slice();var n=e.length,r=YV?YV(n):new e.constructor(n);return e.copy(r),r};var XV=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t};var ZV=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a};var eq=function(){return[]},tq=Object.prototype.propertyIsEnumerable,nq=Object.getOwnPropertySymbols,rq=nq?function(e){return null==e?[]:(e=Object(e),ZV(nq(e),(function(t){return tq.call(e,t)})))}:eq,iq=rq;var aq=function(e,t){return oV(e,iq(e),t)};var oq=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},uq=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)oq(t,iq(e)),e=Qj(e);return t}:eq,sq=uq;var cq=function(e,t){return oV(e,sq(e),t)};var lq=function(e,t,n){var r=t(e);return pV(e)?r:oq(r,n(e))};var hq=function(e){return lq(e,VV,iq)};var fq=function(e){return lq(e,KV,sq)},dq=PU(Fj,"DataView"),pq=PU(Fj,"Promise"),vq=PU(Fj,"Set"),mq=PU(Fj,"WeakMap"),yq="[object Map]",gq="[object Promise]",kq="[object Set]",bq="[object WeakMap]",wq="[object DataView]",_q=_U(dq),xq=_U(RU),Sq=_U(pq),Eq=_U(vq),Tq=_U(mq),Iq=Hj;(dq&&Iq(new dq(new ArrayBuffer(1)))!=wq||RU&&Iq(new RU)!=yq||pq&&Iq(pq.resolve())!=gq||vq&&Iq(new vq)!=kq||mq&&Iq(new mq)!=bq)&&(Iq=function(e){var t=Hj(e),n="[object Object]"==t?e.constructor:void 0,r=n?_U(n):"";if(r)switch(r){case _q:return wq;case xq:return yq;case Sq:return gq;case Eq:return kq;case Tq:return bq}return t});var Cq=Iq,Aq=Object.prototype.hasOwnProperty;var Nq=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Aq.call(e,"index")&&(n.index=e.index,n.input=e.input),n},Pq=Fj.Uint8Array;var Rq=function(e){var t=new e.constructor(e.byteLength);return new Pq(t).set(new Pq(e)),t};var Oq=function(e,t){var n=t?Rq(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},Dq=/\w*$/;var Lq=function(e){var t=new e.constructor(e.source,Dq.exec(e));return t.lastIndex=e.lastIndex,t},Fq=Mj?Mj.prototype:void 0,Mq=Fq?Fq.valueOf:void 0;var jq=function(e){return Mq?Object(Mq.call(e)):{}};var Uq=function(e,t){var n=t?Rq(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)};var Vq=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return Rq(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return Oq(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Uq(e,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return Lq(e);case"[object Symbol]":return jq(e)}},qq=Object.create,zq=function(){function e(){}return function(t){if(!mU(t))return{};if(qq)return qq(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),Bq=zq;var Wq=function(e){return"function"!=typeof e.constructor||LV(e)?{}:Bq(Qj(e))};var Kq=function(e){return $j(e)&&"[object Map]"==Cq(e)},Hq=AV&&AV.isMap,Gq=Hq?EV(Hq):Kq;var Qq=function(e){return $j(e)&&"[object Set]"==Cq(e)},$q=AV&&AV.isSet,Yq=$q?EV($q):Qq,Jq="[object Arguments]",Xq="[object Function]",Zq="[object Object]",ez={};ez[Jq]=ez["[object Array]"]=ez["[object ArrayBuffer]"]=ez["[object DataView]"]=ez["[object Boolean]"]=ez["[object Date]"]=ez["[object Float32Array]"]=ez["[object Float64Array]"]=ez["[object Int8Array]"]=ez["[object Int16Array]"]=ez["[object Int32Array]"]=ez["[object Map]"]=ez["[object Number]"]=ez[Zq]=ez["[object RegExp]"]=ez["[object Set]"]=ez["[object String]"]=ez["[object Symbol]"]=ez["[object Uint8Array]"]=ez["[object Uint8ClampedArray]"]=ez["[object Uint16Array]"]=ez["[object Uint32Array]"]=!0,ez["[object Error]"]=ez[Xq]=ez["[object WeakMap]"]=!1;var tz=function e(t,n,r,i,a,o){var u,s=1&n,c=2&n,l=4&n;if(r&&(u=a?r(t,i,a,o):r(t)),void 0!==u)return u;if(!mU(t))return t;var h=pV(t);if(h){if(u=Nq(t),!s)return XV(t,u)}else{var f=Cq(t),d=f==Xq||"[object GeneratorFunction]"==f;if(kV(t))return JV(t,s);if(f==Zq||f==Jq||d&&!a){if(u=c||d?{}:Wq(t),!s)return c?cq(t,HV(u,t)):aq(t,qV(u,t))}else{if(!ez[f])return a?t:{};u=Vq(t,f,s)}}o||(o=new eV);var p=o.get(t);if(p)return p;o.set(t,u),Yq(t)?t.forEach((function(i){u.add(e(i,n,r,i,t,o))})):Gq(t)&&t.forEach((function(i,a){u.set(a,e(i,n,r,a,t,o))}));var v=h?void 0:(l?c?fq:hq:c?KV:VV)(t);return tV(v||t,(function(i,a){v&&(i=t[a=i]),aV(u,a,e(i,n,r,a,t,o))})),u};var nz=function(e){return tz(e,4)};var rz=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i};var iz=function(e){return"symbol"==typeof e||$j(e)&&"[object Symbol]"==Hj(e)};function az(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(az.Cache||JU),n}az.Cache=JU;var oz=az;var uz=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,sz=/\\(\\)?/g,cz=function(e){var t=oz(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(uz,(function(e,n,r,i){t.push(r?i.replace(sz,"$1"):n||e)})),t})),lz=cz;var hz=function(e){if("string"==typeof e||iz(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t},fz=Mj?Mj.prototype:void 0,dz=fz?fz.toString:void 0;var pz=function e(t){if("string"==typeof t)return t;if(pV(t))return rz(t,e)+"";if(iz(t))return dz?dz.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n};var vz=function(e){return null==e?"":pz(e)};var mz=function(e){return pV(e)?rz(e,hz):iz(e)?[e]:XV(lz(vz(e)))};var yz=function(e,t){};var gz=function(e){return tz(e,5)};function kz(){return kz=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kz.apply(this,arguments)}function bz(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function wz(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function _z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var xz=function(e){return Array.isArray(e)&&0===e.length},Sz=function(e){return"function"===typeof e},Ez=function(e){return null!==e&&"object"===typeof e},Tz=function(e){return String(Math.floor(Number(e)))===e},Iz=function(e){return"[object String]"===Object.prototype.toString.call(e)},Cz=function(e){return 0===r.Children.count(e)},Az=function(e){return Ez(e)&&Sz(e.then)};function Nz(e,t,n,r){void 0===r&&(r=0);for(var i=mz(t);e&&r<i.length;)e=e[i[r++]];return void 0===e?n:e}function Pz(e,t,n){for(var r=nz(e),i=r,a=0,o=mz(t);a<o.length-1;a++){var u=o[a],s=Nz(e,o.slice(0,a+1));if(s&&(Ez(s)||Array.isArray(s)))i=i[u]=nz(s);else{var c=o[a+1];i=i[u]=Tz(c)&&Number(c)>=0?[]:{}}}return(0===a?e:i)[o[a]]===n?e:(void 0===n?delete i[o[a]]:i[o[a]]=n,0===a&&void 0===n&&delete r[o[a]],r)}function Rz(e,t,n,r){void 0===n&&(n=new WeakMap),void 0===r&&(r={});for(var i=0,a=Object.keys(e);i<a.length;i++){var o=a[i],u=e[o];Ez(u)?n.get(u)||(n.set(u,!0),r[o]=Array.isArray(u)?[]:{},Rz(u,t,n,r[o])):r[o]=t}return r}var Oz=(0,r.createContext)(void 0);Oz.displayName="FormikContext";Oz.Provider,Oz.Consumer;function Dz(){var e=(0,r.useContext)(Oz);return e||yz(!1),e}function Lz(e,t){switch(t.type){case"SET_VALUES":return kz({},e,{values:t.payload});case"SET_TOUCHED":return kz({},e,{touched:t.payload});case"SET_ERRORS":return Ij()(e.errors,t.payload)?e:kz({},e,{errors:t.payload});case"SET_STATUS":return kz({},e,{status:t.payload});case"SET_ISSUBMITTING":return kz({},e,{isSubmitting:t.payload});case"SET_ISVALIDATING":return kz({},e,{isValidating:t.payload});case"SET_FIELD_VALUE":return kz({},e,{values:Pz(e.values,t.payload.field,t.payload.value)});case"SET_FIELD_TOUCHED":return kz({},e,{touched:Pz(e.touched,t.payload.field,t.payload.value)});case"SET_FIELD_ERROR":return kz({},e,{errors:Pz(e.errors,t.payload.field,t.payload.value)});case"RESET_FORM":return kz({},e,t.payload);case"SET_FORMIK_STATE":return t.payload(e);case"SUBMIT_ATTEMPT":return kz({},e,{touched:Rz(e.values,!0),isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":case"SUBMIT_SUCCESS":return kz({},e,{isSubmitting:!1});default:return e}}var Fz={},Mz={};function jz(e){var t=e.validateOnChange,n=void 0===t||t,i=e.validateOnBlur,a=void 0===i||i,o=e.validateOnMount,u=void 0!==o&&o,s=e.isInitialValid,c=e.enableReinitialize,l=void 0!==c&&c,h=e.onSubmit,f=wz(e,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),d=kz({validateOnChange:n,validateOnBlur:a,validateOnMount:u,onSubmit:h},f),p=(0,r.useRef)(d.initialValues),v=(0,r.useRef)(d.initialErrors||Fz),m=(0,r.useRef)(d.initialTouched||Mz),y=(0,r.useRef)(d.initialStatus),g=(0,r.useRef)(!1),k=(0,r.useRef)({});(0,r.useEffect)((function(){return g.current=!0,function(){g.current=!1}}),[]);var b=(0,r.useReducer)(Lz,{values:d.initialValues,errors:d.initialErrors||Fz,touched:d.initialTouched||Mz,status:d.initialStatus,isSubmitting:!1,isValidating:!1,submitCount:0}),w=b[0],_=b[1],x=(0,r.useCallback)((function(e,t){return new Promise((function(n,r){var i=d.validate(e,t);null==i?n(Fz):Az(i)?i.then((function(e){n(e||Fz)}),(function(e){r(e)})):n(i)}))}),[d.validate]),S=(0,r.useCallback)((function(e,t){var n=d.validationSchema,r=Sz(n)?n(t):n,i=t&&r.validateAt?r.validateAt(t,e):function(e,t,n,r){void 0===n&&(n=!1);void 0===r&&(r={});var i=Uz(e);return t[n?"validateSync":"validate"](i,{abortEarly:!1,context:r})}(e,r);return new Promise((function(e,t){i.then((function(){e(Fz)}),(function(n){"ValidationError"===n.name?e(function(e){var t={};if(e.inner){if(0===e.inner.length)return Pz(t,e.path,e.message);var n=e.inner,r=Array.isArray(n),i=0;for(n=r?n:n[Symbol.iterator]();;){var a;if(r){if(i>=n.length)break;a=n[i++]}else{if((i=n.next()).done)break;a=i.value}var o=a;Nz(t,o.path)||(t=Pz(t,o.path,o.message))}}return t}(n)):t(n)}))}))}),[d.validationSchema]),E=(0,r.useCallback)((function(e,t){return new Promise((function(n){return n(k.current[e].validate(t))}))}),[]),T=(0,r.useCallback)((function(e){var t=Object.keys(k.current).filter((function(e){return Sz(k.current[e].validate)})),n=t.length>0?t.map((function(t){return E(t,Nz(e,t))})):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(n).then((function(e){return e.reduce((function(e,n,r){return"DO_NOT_DELETE_YOU_WILL_BE_FIRED"===n||n&&(e=Pz(e,t[r],n)),e}),{})}))}),[E]),I=(0,r.useCallback)((function(e){return Promise.all([T(e),d.validationSchema?S(e):{},d.validate?x(e):{}]).then((function(e){var t=e[0],n=e[1],r=e[2];return Oj.all([t,n,r],{arrayMerge:Vz})}))}),[d.validate,d.validationSchema,T,x,S]),C=zz((function(e){return void 0===e&&(e=w.values),_({type:"SET_ISVALIDATING",payload:!0}),I(e).then((function(e){return g.current&&(_({type:"SET_ISVALIDATING",payload:!1}),_({type:"SET_ERRORS",payload:e})),e}))}));(0,r.useEffect)((function(){u&&!0===g.current&&Ij()(p.current,d.initialValues)&&C(p.current)}),[u,C]);var A=(0,r.useCallback)((function(e){var t=e&&e.values?e.values:p.current,n=e&&e.errors?e.errors:v.current?v.current:d.initialErrors||{},r=e&&e.touched?e.touched:m.current?m.current:d.initialTouched||{},i=e&&e.status?e.status:y.current?y.current:d.initialStatus;p.current=t,v.current=n,m.current=r,y.current=i;var a=function(){_({type:"RESET_FORM",payload:{isSubmitting:!!e&&!!e.isSubmitting,errors:n,touched:r,status:i,values:t,isValidating:!!e&&!!e.isValidating,submitCount:e&&e.submitCount&&"number"===typeof e.submitCount?e.submitCount:0}})};if(d.onReset){var o=d.onReset(w.values,Q);Az(o)?o.then(a):a()}else a()}),[d.initialErrors,d.initialStatus,d.initialTouched]);(0,r.useEffect)((function(){!0!==g.current||Ij()(p.current,d.initialValues)||(l&&(p.current=d.initialValues,A()),u&&C(p.current))}),[l,d.initialValues,A,u,C]),(0,r.useEffect)((function(){l&&!0===g.current&&!Ij()(v.current,d.initialErrors)&&(v.current=d.initialErrors||Fz,_({type:"SET_ERRORS",payload:d.initialErrors||Fz}))}),[l,d.initialErrors]),(0,r.useEffect)((function(){l&&!0===g.current&&!Ij()(m.current,d.initialTouched)&&(m.current=d.initialTouched||Mz,_({type:"SET_TOUCHED",payload:d.initialTouched||Mz}))}),[l,d.initialTouched]),(0,r.useEffect)((function(){l&&!0===g.current&&!Ij()(y.current,d.initialStatus)&&(y.current=d.initialStatus,_({type:"SET_STATUS",payload:d.initialStatus}))}),[l,d.initialStatus,d.initialTouched]);var N=zz((function(e){if(k.current[e]&&Sz(k.current[e].validate)){var t=Nz(w.values,e),n=k.current[e].validate(t);return Az(n)?(_({type:"SET_ISVALIDATING",payload:!0}),n.then((function(e){return e})).then((function(t){_({type:"SET_FIELD_ERROR",payload:{field:e,value:t}}),_({type:"SET_ISVALIDATING",payload:!1})}))):(_({type:"SET_FIELD_ERROR",payload:{field:e,value:n}}),Promise.resolve(n))}return d.validationSchema?(_({type:"SET_ISVALIDATING",payload:!0}),S(w.values,e).then((function(e){return e})).then((function(t){_({type:"SET_FIELD_ERROR",payload:{field:e,value:t[e]}}),_({type:"SET_ISVALIDATING",payload:!1})}))):Promise.resolve()})),P=(0,r.useCallback)((function(e,t){var n=t.validate;k.current[e]={validate:n}}),[]),R=(0,r.useCallback)((function(e){delete k.current[e]}),[]),O=zz((function(e,t){return _({type:"SET_TOUCHED",payload:e}),(void 0===t?a:t)?C(w.values):Promise.resolve()})),D=(0,r.useCallback)((function(e){_({type:"SET_ERRORS",payload:e})}),[]),L=zz((function(e,t){var r=Sz(e)?e(w.values):e;return _({type:"SET_VALUES",payload:r}),(void 0===t?n:t)?C(r):Promise.resolve()})),F=(0,r.useCallback)((function(e,t){_({type:"SET_FIELD_ERROR",payload:{field:e,value:t}})}),[]),M=zz((function(e,t,r){return _({type:"SET_FIELD_VALUE",payload:{field:e,value:t}}),(void 0===r?n:r)?C(Pz(w.values,e,t)):Promise.resolve()})),j=(0,r.useCallback)((function(e,t){var n,r=t,i=e;if(!Iz(e)){e.persist&&e.persist();var a=e.target?e.target:e.currentTarget,o=a.type,u=a.name,s=a.id,c=a.value,l=a.checked,h=(a.outerHTML,a.options),f=a.multiple;r=t||(u||s),i=/number|range/.test(o)?(n=parseFloat(c),isNaN(n)?"":n):/checkbox/.test(o)?function(e,t,n){if("boolean"===typeof e)return Boolean(t);var r=[],i=!1,a=-1;if(Array.isArray(e))r=e,i=(a=e.indexOf(n))>=0;else if(!n||"true"==n||"false"==n)return Boolean(t);if(t&&n&&!i)return r.concat(n);if(!i)return r;return r.slice(0,a).concat(r.slice(a+1))}(Nz(w.values,r),l,c):h&&f?function(e){return Array.from(e).filter((function(e){return e.selected})).map((function(e){return e.value}))}(h):c}r&&M(r,i)}),[M,w.values]),U=zz((function(e){if(Iz(e))return function(t){return j(t,e)};j(e)})),V=zz((function(e,t,n){return void 0===t&&(t=!0),_({type:"SET_FIELD_TOUCHED",payload:{field:e,value:t}}),(void 0===n?a:n)?C(w.values):Promise.resolve()})),q=(0,r.useCallback)((function(e,t){e.persist&&e.persist();var n=e.target,r=n.name,i=n.id,a=(n.outerHTML,t||(r||i));V(a,!0)}),[V]),z=zz((function(e){if(Iz(e))return function(t){return q(t,e)};q(e)})),B=(0,r.useCallback)((function(e){Sz(e)?_({type:"SET_FORMIK_STATE",payload:e}):_({type:"SET_FORMIK_STATE",payload:function(){return e}})}),[]),W=(0,r.useCallback)((function(e){_({type:"SET_STATUS",payload:e})}),[]),K=(0,r.useCallback)((function(e){_({type:"SET_ISSUBMITTING",payload:e})}),[]),H=zz((function(){return _({type:"SUBMIT_ATTEMPT"}),C().then((function(e){var t=e instanceof Error;if(!t&&0===Object.keys(e).length){var n;try{if(void 0===(n=$()))return}catch(Fa){throw Fa}return Promise.resolve(n).then((function(e){return g.current&&_({type:"SUBMIT_SUCCESS"}),e})).catch((function(e){if(g.current)throw _({type:"SUBMIT_FAILURE"}),e}))}if(g.current&&(_({type:"SUBMIT_FAILURE"}),t))throw e}))})),G=zz((function(e){e&&e.preventDefault&&Sz(e.preventDefault)&&e.preventDefault(),e&&e.stopPropagation&&Sz(e.stopPropagation)&&e.stopPropagation(),H().catch((function(e){console.warn("Warning: An unhandled error was caught from submitForm()",e)}))})),Q={resetForm:A,validateForm:C,validateField:N,setErrors:D,setFieldError:F,setFieldTouched:V,setFieldValue:M,setStatus:W,setSubmitting:K,setTouched:O,setValues:L,setFormikState:B,submitForm:H},$=zz((function(){return h(w.values,Q)})),Y=zz((function(e){e&&e.preventDefault&&Sz(e.preventDefault)&&e.preventDefault(),e&&e.stopPropagation&&Sz(e.stopPropagation)&&e.stopPropagation(),A()})),J=(0,r.useCallback)((function(e){return{value:Nz(w.values,e),error:Nz(w.errors,e),touched:!!Nz(w.touched,e),initialValue:Nz(p.current,e),initialTouched:!!Nz(m.current,e),initialError:Nz(v.current,e)}}),[w.errors,w.touched,w.values]),X=(0,r.useCallback)((function(e){return{setValue:function(t,n){return M(e,t,n)},setTouched:function(t,n){return V(e,t,n)},setError:function(t){return F(e,t)}}}),[M,V,F]),Z=(0,r.useCallback)((function(e){var t=Ez(e),n=t?e.name:e,r=Nz(w.values,n),i={name:n,value:r,onChange:U,onBlur:z};if(t){var a=e.type,o=e.value,u=e.as,s=e.multiple;"checkbox"===a?void 0===o?i.checked=!!r:(i.checked=!(!Array.isArray(r)||!~r.indexOf(o)),i.value=o):"radio"===a?(i.checked=r===o,i.value=o):"select"===u&&s&&(i.value=i.value||[],i.multiple=!0)}return i}),[z,U,w.values]),ee=(0,r.useMemo)((function(){return!Ij()(p.current,w.values)}),[p.current,w.values]),te=(0,r.useMemo)((function(){return"undefined"!==typeof s?ee?w.errors&&0===Object.keys(w.errors).length:!1!==s&&Sz(s)?s(d):s:w.errors&&0===Object.keys(w.errors).length}),[s,ee,w.errors,d]);return kz({},w,{initialValues:p.current,initialErrors:v.current,initialTouched:m.current,initialStatus:y.current,handleBlur:z,handleChange:U,handleReset:Y,handleSubmit:G,resetForm:A,setErrors:D,setFormikState:B,setFieldTouched:V,setFieldValue:M,setFieldError:F,setStatus:W,setSubmitting:K,setTouched:O,setValues:L,submitForm:H,validateForm:C,validateField:N,isValid:te,dirty:ee,unregisterField:R,registerField:P,getFieldProps:Z,getFieldMeta:J,getFieldHelpers:X,validateOnBlur:a,validateOnChange:n,validateOnMount:u})}function Uz(e){var t=Array.isArray(e)?[]:{};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=String(n);!0===Array.isArray(e[r])?t[r]=e[r].map((function(e){return!0===Array.isArray(e)||tU(e)?Uz(e):""!==e?e:void 0})):tU(e[r])?t[r]=Uz(e[r]):t[r]=""!==e[r]?e[r]:void 0}return t}function Vz(e,t,n){var r=e.slice();return t.forEach((function(t,i){if("undefined"===typeof r[i]){var a=!1!==n.clone&&n.isMergeableObject(t);r[i]=a?Oj(Array.isArray(t)?[]:{},t,n):t}else n.isMergeableObject(t)?r[i]=Oj(e[i],t,n):-1===e.indexOf(t)&&r.push(t)})),r}var qz="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?r.useLayoutEffect:r.useEffect;function zz(e){var t=(0,r.useRef)(e);return qz((function(){t.current=e})),(0,r.useCallback)((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.current.apply(void 0,n)}),[])}(0,r.forwardRef)((function(e,t){var n=e.action,i=wz(e,["action"]),a=null!=n?n:"#",o=Dz(),u=o.handleReset,s=o.handleSubmit;return(0,r.createElement)("form",Object.assign({onSubmit:s,ref:t,onReset:u,action:a},i))})).displayName="Form";var Bz=function(e,t,n){var r=Wz(e);return r.splice(t,0,n),r},Wz=function(e){if(e){if(Array.isArray(e))return[].concat(e);var t=Object.keys(e).map((function(e){return parseInt(e)})).reduce((function(e,t){return t>e?t:e}),0);return Array.from(kz({},e,{length:t+1}))}return[]},Kz=function(e){function t(t){var n;return(n=e.call(this,t)||this).updateArrayField=function(e,t,r){var i=n.props,a=i.name;(0,i.formik.setFormikState)((function(n){var i="function"===typeof r?r:e,o="function"===typeof t?t:e,u=Pz(n.values,a,e(Nz(n.values,a))),s=r?i(Nz(n.errors,a)):void 0,c=t?o(Nz(n.touched,a)):void 0;return xz(s)&&(s=void 0),xz(c)&&(c=void 0),kz({},n,{values:u,errors:r?Pz(n.errors,a,s):n.errors,touched:t?Pz(n.touched,a,c):n.touched})}))},n.push=function(e){return n.updateArrayField((function(t){return[].concat(Wz(t),[gz(e)])}),!1,!1)},n.handlePush=function(e){return function(){return n.push(e)}},n.swap=function(e,t){return n.updateArrayField((function(n){return function(e,t,n){var r=Wz(e),i=r[t];return r[t]=r[n],r[n]=i,r}(n,e,t)}),!0,!0)},n.handleSwap=function(e,t){return function(){return n.swap(e,t)}},n.move=function(e,t){return n.updateArrayField((function(n){return function(e,t,n){var r=Wz(e),i=r[t];return r.splice(t,1),r.splice(n,0,i),r}(n,e,t)}),!0,!0)},n.handleMove=function(e,t){return function(){return n.move(e,t)}},n.insert=function(e,t){return n.updateArrayField((function(n){return Bz(n,e,t)}),(function(t){return Bz(t,e,null)}),(function(t){return Bz(t,e,null)}))},n.handleInsert=function(e,t){return function(){return n.insert(e,t)}},n.replace=function(e,t){return n.updateArrayField((function(n){return function(e,t,n){var r=Wz(e);return r[t]=n,r}(n,e,t)}),!1,!1)},n.handleReplace=function(e,t){return function(){return n.replace(e,t)}},n.unshift=function(e){var t=-1;return n.updateArrayField((function(n){var r=n?[e].concat(n):[e];return t<0&&(t=r.length),r}),(function(e){var n=e?[null].concat(e):[null];return t<0&&(t=n.length),n}),(function(e){var n=e?[null].concat(e):[null];return t<0&&(t=n.length),n})),t},n.handleUnshift=function(e){return function(){return n.unshift(e)}},n.handleRemove=function(e){return function(){return n.remove(e)}},n.handlePop=function(){return function(){return n.pop()}},n.remove=n.remove.bind(_z(n)),n.pop=n.pop.bind(_z(n)),n}bz(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){this.props.validateOnChange&&this.props.formik.validateOnChange&&!Ij()(Nz(e.formik.values,e.name),Nz(this.props.formik.values,this.props.name))&&this.props.formik.validateForm(this.props.formik.values)},n.remove=function(e){var t;return this.updateArrayField((function(n){var r=n?Wz(n):[];return t||(t=r[e]),Sz(r.splice)&&r.splice(e,1),r}),!0,!0),t},n.pop=function(){var e;return this.updateArrayField((function(t){var n=t;return e||(e=n&&n.pop&&n.pop()),n}),!0,!0),e},n.render=function(){var e={push:this.push,pop:this.pop,swap:this.swap,move:this.move,insert:this.insert,replace:this.replace,unshift:this.unshift,remove:this.remove,handlePush:this.handlePush,handlePop:this.handlePop,handleSwap:this.handleSwap,handleMove:this.handleMove,handleInsert:this.handleInsert,handleReplace:this.handleReplace,handleUnshift:this.handleUnshift,handleRemove:this.handleRemove},t=this.props,n=t.component,i=t.render,a=t.children,o=t.name,u=kz({},e,{form:wz(t.formik,["validate","validationSchema"]),name:o});return n?(0,r.createElement)(n,u):i?i(u):a?"function"===typeof a?a(u):Cz(a)?null:r.Children.only(a):null},t}(r.Component);Kz.defaultProps={validateOnChange:!0};r.Component,r.Component;var Hz=n(758),Gz=n(564),Qz=n(514),$z=n.n(Qz),Yz=Object.prototype.toString,Jz=Error.prototype.toString,Xz=RegExp.prototype.toString,Zz="undefined"!==typeof Symbol?Symbol.prototype.toString:function(){return""},eB=/^Symbol\((.*)\)(.*)$/;function tB(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==e||!0===e||!1===e)return""+e;var n=typeof e;if("number"===n)return function(e){return e!=+e?"NaN":0===e&&1/e<0?"-0":""+e}(e);if("string"===n)return t?'"'.concat(e,'"'):e;if("function"===n)return"[Function "+(e.name||"anonymous")+"]";if("symbol"===n)return Zz.call(e).replace(eB,"Symbol($1)");var r=Yz.call(e).slice(8,-1);return"Date"===r?isNaN(e.getTime())?""+e:e.toISOString(e):"Error"===r||e instanceof Error?"["+Jz.call(e)+"]":"RegExp"===r?Xz.call(e):null}function nB(e,t){var n=tB(e,t);return null!==n?n:JSON.stringify(e,(function(e,n){var r=tB(this[e],t);return null!==r?r:n}),2)}function rB(e){return null==e?[]:[].concat(e)}var iB=/\$\{\s*(\w+)\s*\}/g,aB=function(e){g(n,e);var t=_(n);function n(e,r,i,a){var o;return f(this,n),(o=t.call(this)).value=void 0,o.path=void 0,o.type=void 0,o.errors=void 0,o.params=void 0,o.inner=void 0,o.name="ValidationError",o.value=r,o.path=i,o.type=a,o.errors=[],o.inner=[],rB(e).forEach((function(e){var t;n.isError(e)?((t=o.errors).push.apply(t,h(e.errors)),o.inner=o.inner.concat(e.inner.length?e.inner:e)):o.errors.push(e)})),o.message=o.errors.length>1?"".concat(o.errors.length," errors occurred"):o.errors[0],Error.captureStackTrace&&Error.captureStackTrace(w(o),n),o}return m(n,null,[{key:"formatError",value:function(e,t){var n=t.label||t.path||"this";return n!==t.path&&(t=Object.assign({},t,{path:n})),"string"===typeof e?e.replace(iB,(function(e,n){return nB(t[n])})):"function"===typeof e?e(t):e}},{key:"isError",value:function(e){return e&&"ValidationError"===e.name}}]),n}(S(Error)),oB={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:function(e){var t=e.path,n=e.type,r=e.value,i=e.originalValue,a=null!=i&&i!==r?" (cast from the value `".concat(nB(i,!0),"`)."):".";return"mixed"!==n?"".concat(t," must be a `").concat(n,"` type, ")+"but the final value was: `".concat(nB(r,!0),"`")+a:"".concat(t," must match the configured type. ")+"The validated value was: `".concat(nB(r,!0),"`")+a}},uB={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},sB={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},cB={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},lB={isValue:"${path} field must be ${value}"},hB={noUnknown:"${path} field has unspecified keys: ${unknown}"},fB={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},dB=function(e){var t=e.path,n=e.value,r=e.spec.types.length;if(Array.isArray(n)){if(n.length<r)return"".concat(t," tuple value has too few items, expected a length of ").concat(r," but got ").concat(n.length," for value: `").concat(nB(n,!0),"`");if(n.length>r)return"".concat(t," tuple value has too many items, expected a length of ").concat(r," but got ").concat(n.length," for value: `").concat(nB(n,!0),"`")}return aB.formatError(oB.notType,e)},pB=(Object.assign(Object.create(null),{mixed:oB,string:uB,number:sB,date:cB,object:hB,array:fB,boolean:lB}),function(e){return e&&e.__isYupSchema__}),vB=function(){function e(t,n){f(this,e),this.fn=void 0,this.refs=t,this.refs=t,this.fn=n}return m(e,[{key:"resolve",value:function(e,t){var n=this.refs.map((function(e){return e.getValue(null==t?void 0:t.value,null==t?void 0:t.parent,null==t?void 0:t.context)})),r=this.fn(n,e,t);if(void 0===r||r===e)return e;if(!pB(r))throw new TypeError("conditions must return a schema object");return r.resolve(t)}}],[{key:"fromOptions",value:function(t,n){if(!n.then&&!n.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");var r=n.is,i=n.then,a=n.otherwise,o="function"===typeof r?r:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every((function(e){return e===r}))};return new e(t,(function(e,t){var n,r=o.apply(void 0,h(e))?i:a;return null!=(n=null==r?void 0:r(t))?n:t}))}}]),e}(),mB="$",yB=".";var gB=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(f(this,e),this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,"string"!==typeof t)throw new TypeError("ref must be a string, got: "+t);if(this.key=t.trim(),""===t)throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===mB,this.isValue=this.key[0]===yB,this.isSibling=!this.isContext&&!this.isValue;var r=this.isContext?mB:this.isValue?yB:"";this.path=this.key.slice(r.length),this.getter=this.path&&(0,Hz.getter)(this.path,!0),this.map=n.map}return m(e,[{key:"getValue",value:function(e,t,n){var r=this.isContext?n:this.isValue?e:t;return this.getter&&(r=this.getter(r||{})),this.map&&(r=this.map(r)),r}},{key:"cast",value:function(e,t){return this.getValue(e,null==t?void 0:t.parent,null==t?void 0:t.context)}},{key:"resolve",value:function(){return this}},{key:"describe",value:function(){return{type:"ref",key:this.key}}},{key:"toString",value:function(){return"Ref(".concat(this.key,")")}}],[{key:"isRef",value:function(e){return e&&e.__isYupRef}}]),e}();gB.prototype.__isYupRef=!0;var kB=function(e){return null==e};function bB(e){function t(t,n,r){var i=t.value,a=t.path,o=void 0===a?"":a,u=t.options,s=t.originalValue,c=t.schema,l=e.name,h=e.test,f=e.params,d=e.message,p=e.skipAbsent,v=u.parent,m=u.context,y=u.abortEarly;function g(e){return gB.isRef(e)?e.getValue(i,v,m):e}function k(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({value:i,originalValue:s,label:c.spec.label,path:e.path||o,spec:c.spec},f,e.params),n=0,r=Object.keys(t);n<r.length;n++){var a=r[n];t[a]=g(t[a])}var u=new aB(aB.formatError(e.message||d,t),i,t.path,e.type||l);return u.params=t,u}var b=(void 0===y?c.spec.abortEarly:y)?n:r,w={path:o,parent:v,type:l,from:u.from,createError:k,resolve:g,options:u,originalValue:s,schema:c},_=function(e){aB.isError(e)?b(e):e?r(null):b(k())},x=function(e){aB.isError(e)?b(e):n(e)},S=p&&kB(i);if(u.sync){var E;try{var T;if("function"===typeof(null==(T=E=!!S||h.call(w,i,w))?void 0:T.then))throw new Error('Validation test of type: "'.concat(w.type,'" returned a Promise during a synchronous validate. ')+"This test will finish after the validate call has returned")}catch(I){return void x(I)}_(E)}else try{Promise.resolve(!!S||h.call(w,i,w)).then(_,x)}catch(I){x(I)}}return t.OPTIONS=e,t}function wB(e,t,n){var r,i,a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return t?((0,Hz.forEach)(t,(function(u,s,c){var l=s?u.slice(1,u.length-1):u,h="tuple"===(e=e.resolve({context:o,parent:r,value:n})).type,f=c?parseInt(l,10):0;if(e.innerType||h){if(h&&!c)throw new Error('Yup.reach cannot implicitly index into a tuple type. the path part "'.concat(a,'" must contain an index to the tuple element, e.g. "').concat(a,'[0]"'));if(n&&f>=n.length)throw new Error("Yup.reach cannot resolve an array item at index: ".concat(u,", in the path: ").concat(t,". ")+"because there is no value at that index. ");r=n,n=n&&n[f],e=h?e.spec.types[f]:e.innerType}if(!c){if(!e.fields||!e.fields[l])throw new Error("The schema does not contain the path: ".concat(t,". ")+"(failed at: ".concat(a,' which is a type: "').concat(e.type,'")'));r=n,n=n&&n[l],e=e.fields[l]}i=l,a=s?"["+u+"]":"."+u})),{schema:e,parent:r,parentPath:i}):{parent:r,parentPath:t,schema:e}}var _B=function(e){g(n,e);var t=_(n);function n(){return f(this,n),t.apply(this,arguments)}return m(n,[{key:"describe",value:function(){var e,t=[],n=T(this.values());try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(gB.isRef(r)?r.describe():r)}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"resolveAll",value:function(e){var t,n=[],r=T(this.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n.push(e(i))}}catch(a){r.e(a)}finally{r.f()}return n}},{key:"clone",value:function(){return new n(this.values())}},{key:"merge",value:function(e,t){var n=this.clone();return e.forEach((function(e){return n.add(e)})),t.forEach((function(e){return n.delete(e)})),n}}]),n}(S(Set));function xB(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;if(pB(e)||!e||"object"!==typeof e)return e;if(n.has(e))return n.get(e);if(e instanceof Date)t=new Date(e.getTime()),n.set(e,t);else if(e instanceof RegExp)t=new RegExp(e),n.set(e,t);else if(Array.isArray(e)){t=new Array(e.length),n.set(e,t);for(var r=0;r<e.length;r++)t[r]=xB(e[r],n)}else if(e instanceof Map){t=new Map,n.set(e,t);var i,a=T(e.entries());try{for(a.s();!(i=a.n()).done;){var o=c(i.value,2),u=o[0],s=o[1];t.set(u,xB(s,n))}}catch(g){a.e(g)}finally{a.f()}}else if(e instanceof Set){t=new Set,n.set(e,t);var l,h=T(e);try{for(h.s();!(l=h.n()).done;){var f=l.value;t.add(xB(f,n))}}catch(g){h.e(g)}finally{h.f()}}else{if(!(e instanceof Object))throw Error("Unable to clone ".concat(e));t={},n.set(e,t);for(var d=0,p=Object.entries(e);d<p.length;d++){var v=c(p[d],2),m=v[0],y=v[1];t[m]=xB(y,n)}}return t}var SB=function(){function e(t){var n=this;f(this,e),this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new _B,this._blacklist=new _B,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation((function(){n.typeError(oB.notType)})),this.type=t.type,this._typeCheck=t.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,nullable:!1,optional:!0,coerce:!0},null==t?void 0:t.spec),this.withMutation((function(e){e.nonNullable()}))}return m(e,[{key:"_type",get:function(){return this.type}},{key:"clone",value:function(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;var t=Object.create(Object.getPrototypeOf(this));return t.type=this.type,t._typeCheck=this._typeCheck,t._whitelist=this._whitelist.clone(),t._blacklist=this._blacklist.clone(),t.internalTests=Object.assign({},this.internalTests),t.exclusiveTests=Object.assign({},this.exclusiveTests),t.deps=h(this.deps),t.conditions=h(this.conditions),t.tests=h(this.tests),t.transforms=h(this.transforms),t.spec=xB(Object.assign({},this.spec,e)),t}},{key:"label",value:function(e){var t=this.clone();return t.spec.label=e,t}},{key:"meta",value:function(){if(0===arguments.length)return this.spec.meta;var e=this.clone();return e.spec.meta=Object.assign(e.spec.meta||{},arguments.length<=0?void 0:arguments[0]),e}},{key:"withMutation",value:function(e){var t=this._mutate;this._mutate=!0;var n=e(this);return this._mutate=t,n}},{key:"concat",value:function(e){if(!e||e===this)return this;if(e.type!==this.type&&"mixed"!==this.type)throw new TypeError("You cannot `concat()` schema's of different types: ".concat(this.type," and ").concat(e.type));var t=this,n=e.clone(),r=Object.assign({},t.spec,n.spec);return n.spec=r,n.internalTests=Object.assign({},t.internalTests,n.internalTests),n._whitelist=t._whitelist.merge(e._whitelist,e._blacklist),n._blacklist=t._blacklist.merge(e._blacklist,e._whitelist),n.tests=t.tests,n.exclusiveTests=t.exclusiveTests,n.withMutation((function(t){e.tests.forEach((function(e){t.test(e.OPTIONS)}))})),n.transforms=[].concat(h(t.transforms),h(n.transforms)),n}},{key:"isType",value:function(e){return null==e?!(!this.spec.nullable||null!==e)||!(!this.spec.optional||void 0!==e):this._typeCheck(e)}},{key:"resolve",value:function(e){var t=this;if(t.conditions.length){var n=t.conditions;(t=t.clone()).conditions=[],t=(t=n.reduce((function(t,n){return n.resolve(t,e)}),t)).resolve(e)}return t}},{key:"resolveOptions",value:function(e){var t,n,r;return Object.assign({},e,{from:e.from||[],strict:null!=(t=e.strict)?t:this.spec.strict,abortEarly:null!=(n=e.abortEarly)?n:this.spec.abortEarly,recursive:null!=(r=e.recursive)?r:this.spec.recursive})}},{key:"cast",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.resolve(Object.assign({value:e},t)),r="ignore-optionality"===t.assert,i=n._cast(e,t);if(!1!==t.assert&&!n.isType(i)){if(r&&kB(i))return i;var a=nB(e),o=nB(i);throw new TypeError("The value of ".concat(t.path||"field"," could not be cast to a value ")+'that satisfies the schema type: "'.concat(n.type,'". \n\n')+"attempted value: ".concat(a," \n")+(o!==a?"result of cast: ".concat(o):""))}return i}},{key:"_cast",value:function(e,t){var n=this,r=void 0===e?e:this.transforms.reduce((function(t,r){return r.call(n,t,e,n)}),e);return void 0===r&&(r=this.getDefault(t)),r}},{key:"_validate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=n.path,o=n.originalValue,u=void 0===o?e:o,s=n.strict,c=void 0===s?this.spec.strict:s,l=e;c||(l=this._cast(l,Object.assign({assert:!1},n)));for(var h=[],f=0,d=Object.values(this.internalTests);f<d.length;f++){var p=d[f];p&&h.push(p)}this.runTests({path:a,value:l,originalValue:u,options:n,tests:h},r,(function(e){if(e.length)return i(e,l);t.runTests({path:a,value:l,originalValue:u,options:n,tests:t.tests},r,i)}))}},{key:"runTests",value:function(e,t,n){var r=!1,i=e.tests,a=e.value,o=e.originalValue,u=e.path,s=e.options,c=function(e){r||(r=!0,t(e,a))},l=function(e){r||(r=!0,n(e,a))},h=i.length,f=[];if(!h)return l([]);for(var d={value:a,originalValue:o,path:u,options:s,schema:this},p=0;p<i.length;p++){(0,i[p])(d,c,(function(e){e&&(f=f.concat(e)),--h<=0&&l(f)}))}}},{key:"asNestedTest",value:function(e){var t,n=this,r=e.key,i=e.index,a=e.parent,o=e.parentPath,u=e.originalParent,s=e.options,c=null!=r?r:i;if(null==c)throw TypeError("Must include `key` or `index` for nested validations");var l="number"===typeof c,h=a[c],f=Object.assign({},s,(Hn(t={strict:!0,parent:a,value:h,originalValue:u[c],key:void 0},l?"index":"key",c),Hn(t,"path",l||c.includes(".")?"".concat(o||"","[").concat(h?c:'"'.concat(c,'"'),"]"):(o?"".concat(o,"."):"")+r),t));return function(e,t,r){return n.resolve(f)._validate(h,f,t,r)}}},{key:"validate",value:function(e,t){var n=this.resolve(Object.assign({},t,{value:e}));return new Promise((function(r,i){return n._validate(e,t,(function(e,t){aB.isError(e)&&(e.value=t),i(e)}),(function(e,t){e.length?i(new aB(e,t)):r(t)}))}))}},{key:"validateSync",value:function(e,t){var n;return this.resolve(Object.assign({},t,{value:e}))._validate(e,Object.assign({},t,{sync:!0}),(function(e,t){throw aB.isError(e)&&(e.value=t),e}),(function(t,r){if(t.length)throw new aB(t,e);n=r})),n}},{key:"isValid",value:function(e,t){return this.validate(e,t).then((function(){return!0}),(function(e){if(aB.isError(e))return!1;throw e}))}},{key:"isValidSync",value:function(e,t){try{return this.validateSync(e,t),!0}catch(n){if(aB.isError(n))return!1;throw n}}},{key:"_getDefault",value:function(e){var t=this.spec.default;return null==t?t:"function"===typeof t?t.call(this):xB(t)}},{key:"getDefault",value:function(e){return this.resolve(e||{})._getDefault(e)}},{key:"default",value:function(e){return 0===arguments.length?this._getDefault():this.clone({default:e})}},{key:"strict",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.clone({strict:e})}},{key:"nullability",value:function(e,t){var n=this.clone({nullable:e});return n.internalTests.nullable=bB({message:t,name:"nullable",test:function(e){return null!==e||this.schema.spec.nullable}}),n}},{key:"optionality",value:function(e,t){var n=this.clone({optional:e});return n.internalTests.optionality=bB({message:t,name:"optionality",test:function(e){return void 0!==e||this.schema.spec.optional}}),n}},{key:"optional",value:function(){return this.optionality(!0)}},{key:"defined",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oB.defined;return this.optionality(!1,e)}},{key:"nullable",value:function(){return this.nullability(!0)}},{key:"nonNullable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oB.notNull;return this.nullability(!1,e)}},{key:"required",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oB.required;return this.clone().withMutation((function(t){return t.nonNullable(e).defined(e)}))}},{key:"notRequired",value:function(){return this.clone().withMutation((function(e){return e.nullable().optional()}))}},{key:"transform",value:function(e){var t=this.clone();return t.transforms.push(e),t}},{key:"test",value:function(){var e;if(void 0===(e=1===arguments.length?"function"===typeof(arguments.length<=0?void 0:arguments[0])?{test:arguments.length<=0?void 0:arguments[0]}:arguments.length<=0?void 0:arguments[0]:2===arguments.length?{name:arguments.length<=0?void 0:arguments[0],test:arguments.length<=1?void 0:arguments[1]}:{name:arguments.length<=0?void 0:arguments[0],message:arguments.length<=1?void 0:arguments[1],test:arguments.length<=2?void 0:arguments[2]}).message&&(e.message=oB.default),"function"!==typeof e.test)throw new TypeError("`test` is a required parameters");var t=this.clone(),n=bB(e),r=e.exclusive||e.name&&!0===t.exclusiveTests[e.name];if(e.exclusive&&!e.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return e.name&&(t.exclusiveTests[e.name]=!!e.exclusive),t.tests=t.tests.filter((function(t){if(t.OPTIONS.name===e.name){if(r)return!1;if(t.OPTIONS.test===n.OPTIONS.test)return!1}return!0})),t.tests.push(n),t}},{key:"when",value:function(e,t){Array.isArray(e)||"string"===typeof e||(t=e,e=".");var n=this.clone(),r=rB(e).map((function(e){return new gB(e)}));return r.forEach((function(e){e.isSibling&&n.deps.push(e.key)})),n.conditions.push("function"===typeof t?new vB(r,t):vB.fromOptions(r,t)),n}},{key:"typeError",value:function(e){var t=this.clone();return t.internalTests.typeError=bB({message:e,name:"typeError",skipAbsent:!0,test:function(e){return!!this.schema._typeCheck(e)||this.createError({params:{type:this.schema.type}})}}),t}},{key:"oneOf",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oB.oneOf,n=this.clone();return e.forEach((function(e){n._whitelist.add(e),n._blacklist.delete(e)})),n.internalTests.whiteList=bB({message:t,name:"oneOf",skipAbsent:!0,test:function(e){var t=this.schema._whitelist,n=t.resolveAll(this.resolve);return!!n.includes(e)||this.createError({params:{values:Array.from(t).join(", "),resolved:n}})}}),n}},{key:"notOneOf",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oB.notOneOf,n=this.clone();return e.forEach((function(e){n._blacklist.add(e),n._whitelist.delete(e)})),n.internalTests.blacklist=bB({message:t,name:"notOneOf",test:function(e){var t=this.schema._blacklist,n=t.resolveAll(this.resolve);return!n.includes(e)||this.createError({params:{values:Array.from(t).join(", "),resolved:n}})}}),n}},{key:"strip",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.clone();return t.spec.strip=e,t}},{key:"describe",value:function(e){var t=(e?this.resolve(e):this).clone(),n=t.spec,r=n.label,i={meta:n.meta,label:r,optional:n.optional,nullable:n.nullable,default:t.getDefault(e),type:t.type,oneOf:t._whitelist.describe(),notOneOf:t._blacklist.describe(),tests:t.tests.map((function(e){return{name:e.OPTIONS.name,params:e.OPTIONS.params}})).filter((function(e,t,n){return n.findIndex((function(t){return t.name===e.name}))===t}))};return i}}]),e}();SB.prototype.__isYupSchema__=!0;for(var EB=function(){var e=IB[TB];SB.prototype["".concat(e,"At")]=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=wB(this,t,n,r.context),a=i.parent,o=i.parentPath;return i.schema[e](a&&a[o],Object.assign({},r,{parent:a,path:t}))}},TB=0,IB=["validate","validateSync"];TB<IB.length;TB++)EB();for(var CB=0,AB=["equals","is"];CB<AB.length;CB++){var NB=AB[CB];SB.prototype[NB]=SB.prototype.oneOf}for(var PB=0,RB=["not","nope"];PB<RB.length;PB++){var OB=RB[PB];SB.prototype[OB]=SB.prototype.notOneOf}var DB=function(){return!0};var LB=function(e){g(n,e);var t=_(n);function n(e){return f(this,n),t.call(this,"function"===typeof e?{type:"mixed",check:e}:Object.assign({type:"mixed",check:DB},e))}return m(n)}(SB);LB.prototype;var FB=function(e){g(n,e);var t=_(n);function n(){var e;return f(this,n),e=t.call(this,{type:"boolean",check:function(e){return e instanceof Boolean&&(e=e.valueOf()),"boolean"===typeof e}}),e.withMutation((function(){e.transform((function(e,t,n){if(n.spec.coerce&&!n.isType(e)){if(/^(true|1)$/i.test(String(e)))return!0;if(/^(false|0)$/i.test(String(e)))return!1}return e}))})),e}return m(n,[{key:"isTrue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lB.isValue;return this.test({message:e,name:"is-value",exclusive:!0,params:{value:"true"},test:function(e){return kB(e)||!0===e}})}},{key:"isFalse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lB.isValue;return this.test({message:e,name:"is-value",exclusive:!0,params:{value:"false"},test:function(e){return kB(e)||!1===e}})}},{key:"default",value:function(e){return tf(k(n.prototype),"default",this).call(this,e)}},{key:"defined",value:function(e){return tf(k(n.prototype),"defined",this).call(this,e)}},{key:"optional",value:function(){return tf(k(n.prototype),"optional",this).call(this)}},{key:"required",value:function(e){return tf(k(n.prototype),"required",this).call(this,e)}},{key:"notRequired",value:function(){return tf(k(n.prototype),"notRequired",this).call(this)}},{key:"nullable",value:function(){return tf(k(n.prototype),"nullable",this).call(this)}},{key:"nonNullable",value:function(e){return tf(k(n.prototype),"nonNullable",this).call(this,e)}},{key:"strip",value:function(e){return tf(k(n.prototype),"strip",this).call(this,e)}}]),n}(SB);FB.prototype;var MB=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,jB=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,UB=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,VB=function(e){return kB(e)||e===e.trim()},qB={}.toString();function zB(){return new BB}var BB=function(e){g(n,e);var t=_(n);function n(){var e;return f(this,n),(e=t.call(this,{type:"string",check:function(e){return e instanceof String&&(e=e.valueOf()),"string"===typeof e}})).withMutation((function(){e.transform((function(e,t,n){if(!n.spec.coerce||n.isType(e))return e;if(Array.isArray(e))return e;var r=null!=e&&e.toString?e.toString():e;return r===qB?e:r}))})),e}return m(n,[{key:"required",value:function(e){return tf(k(n.prototype),"required",this).call(this,e).withMutation((function(t){return t.test({message:e||oB.required,name:"required",skipAbsent:!0,test:function(e){return!!e.length}})}))}},{key:"notRequired",value:function(){return tf(k(n.prototype),"notRequired",this).call(this).withMutation((function(e){return e.tests=e.tests.filter((function(e){return"required"!==e.OPTIONS.name})),e}))}},{key:"length",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uB.length;return this.test({message:t,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test:function(t){return t.length===this.resolve(e)}})}},{key:"min",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uB.min;return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test:function(t){return t.length>=this.resolve(e)}})}},{key:"max",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uB.max;return this.test({name:"max",exclusive:!0,message:t,params:{max:e},skipAbsent:!0,test:function(t){return t.length<=this.resolve(e)}})}},{key:"matches",value:function(e,t){var n,r,i=!1;if(t)if("object"===typeof t){var a=t.excludeEmptyString;i=void 0!==a&&a,n=t.message,r=t.name}else n=t;return this.test({name:r||"matches",message:n||uB.matches,params:{regex:e},skipAbsent:!0,test:function(t){return""===t&&i||-1!==t.search(e)}})}},{key:"email",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uB.email;return this.matches(MB,{name:"email",message:e,excludeEmptyString:!0})}},{key:"url",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uB.url;return this.matches(jB,{name:"url",message:e,excludeEmptyString:!0})}},{key:"uuid",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uB.uuid;return this.matches(UB,{name:"uuid",message:e,excludeEmptyString:!1})}},{key:"ensure",value:function(){return this.default("").transform((function(e){return null===e?"":e}))}},{key:"trim",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uB.trim;return this.transform((function(e){return null!=e?e.trim():e})).test({message:e,name:"trim",test:VB})}},{key:"lowercase",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uB.lowercase;return this.transform((function(e){return kB(e)?e:e.toLowerCase()})).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:function(e){return kB(e)||e===e.toLowerCase()}})}},{key:"uppercase",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uB.uppercase;return this.transform((function(e){return kB(e)?e:e.toUpperCase()})).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:function(e){return kB(e)||e===e.toUpperCase()}})}}]),n}(SB);zB.prototype=BB.prototype;var WB=function(e){g(n,e);var t=_(n);function n(){var e;return f(this,n),(e=t.call(this,{type:"number",check:function(e){return e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&!function(e){return e!=+e}(e)}})).withMutation((function(){e.transform((function(e,t,n){if(!n.spec.coerce)return e;var r=e;if("string"===typeof r){if(""===(r=r.replace(/\s/g,"")))return NaN;r=+r}return n.isType(r)||null===r?r:parseFloat(r)}))})),e}return m(n,[{key:"min",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sB.min;return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test:function(t){return t>=this.resolve(e)}})}},{key:"max",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sB.max;return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test:function(t){return t<=this.resolve(e)}})}},{key:"lessThan",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sB.lessThan;return this.test({message:t,name:"max",exclusive:!0,params:{less:e},skipAbsent:!0,test:function(t){return t<this.resolve(e)}})}},{key:"moreThan",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sB.moreThan;return this.test({message:t,name:"min",exclusive:!0,params:{more:e},skipAbsent:!0,test:function(t){return t>this.resolve(e)}})}},{key:"positive",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sB.positive;return this.moreThan(0,e)}},{key:"negative",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sB.negative;return this.lessThan(0,e)}},{key:"integer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sB.integer;return this.test({name:"integer",message:e,skipAbsent:!0,test:function(e){return Number.isInteger(e)}})}},{key:"truncate",value:function(){return this.transform((function(e){return kB(e)?e:0|e}))}},{key:"round",value:function(e){var t,n=["ceil","floor","round","trunc"];if("trunc"===(e=(null==(t=e)?void 0:t.toLowerCase())||"round"))return this.truncate();if(-1===n.indexOf(e.toLowerCase()))throw new TypeError("Only valid options for round() are: "+n.join(", "));return this.transform((function(t){return kB(t)?t:Math[e](t)}))}}]),n}(SB);WB.prototype;var KB=/^(\d{4}|[+\-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;var HB=new Date("");function GB(){return new QB}var QB=function(e){g(n,e);var t=_(n);function n(){var e;return f(this,n),e=t.call(this,{type:"date",check:function(e){return t=e,"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(e.getTime());var t}}),e.withMutation((function(){e.transform((function(e,t,r){return!r.spec.coerce||r.isType(e)||null===e?e:(e=function(e){var t,n,r=[1,4,5,6,7,10,11],i=0;if(n=KB.exec(e)){for(var a,o=0;a=r[o];++o)n[a]=+n[a]||0;n[2]=(+n[2]||1)-1,n[3]=+n[3]||1,n[7]=n[7]?String(n[7]).substr(0,3):0,void 0!==n[8]&&""!==n[8]||void 0!==n[9]&&""!==n[9]?("Z"!==n[8]&&void 0!==n[9]&&(i=60*n[10]+n[11],"+"===n[9]&&(i=0-i)),t=Date.UTC(n[1],n[2],n[3],n[4],n[5]+i,n[6],n[7])):t=+new Date(n[1],n[2],n[3],n[4],n[5],n[6],n[7])}else t=Date.parse?Date.parse(e):NaN;return t}(e),isNaN(e)?n.INVALID_DATE:new Date(e))}))})),e}return m(n,[{key:"prepareParam",value:function(e,t){var n;if(gB.isRef(e))n=e;else{var r=this.cast(e);if(!this._typeCheck(r))throw new TypeError("`".concat(t,"` must be a Date or a value that can be `cast()` to a Date"));n=r}return n}},{key:"min",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cB.min,n=this.prepareParam(e,"min");return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test:function(e){return e>=this.resolve(n)}})}},{key:"max",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cB.max,n=this.prepareParam(e,"max");return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test:function(e){return e<=this.resolve(n)}})}}]),n}(SB);function $B(e,t){var n=1/0;return e.some((function(e,r){var i;if(null!=(i=t.path)&&i.includes(e))return n=r,!0})),n}function YB(e){return function(t,n){return $B(e,t)-$B(e,n)}}QB.INVALID_DATE=HB,GB.prototype=QB.prototype,GB.INVALID_DATE=HB;var JB=function(e,t,n){if("string"!==typeof e)return e;var r=e;try{r=JSON.parse(e)}catch(i){}return n.isType(r)?r:e};function XB(e){if("fields"in e){for(var t={},n=0,r=Object.entries(e.fields);n<r.length;n++){var i=c(r[n],2),a=i[0],o=i[1];t[a]=XB(o)}return e.setFields(t)}if("array"===e.type){var u=e.optional();return u.innerType&&(u.innerType=XB(u.innerType)),u}return"tuple"===e.type?e.optional().clone({types:e.spec.types.map(XB)}):"optional"in e?e.optional():e}var ZB=function(e){return"[object Object]"===Object.prototype.toString.call(e)};var eW=YB([]);function tW(e){return new nW(e)}var nW=function(e){g(n,e);var t=_(n);function n(e){var r;return f(this,n),(r=t.call(this,{type:"object",check:function(e){return ZB(e)||"function"===typeof e}})).fields=Object.create(null),r._sortErrors=eW,r._nodes=[],r._excludedEdges=[],r.withMutation((function(){e&&r.shape(e)})),r}return m(n,[{key:"_cast",value:function(e){var t,r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=tf(k(n.prototype),"_cast",this).call(this,e,i);if(void 0===a)return this.getDefault(i);if(!this._typeCheck(a))return a;var o,u=this.fields,s=null!=(t=i.stripUnknown)?t:this.spec.noUnknown,c=[].concat(this._nodes,Object.keys(a).filter((function(e){return!r._nodes.includes(e)}))),l={},h=Object.assign({},i,{parent:l,__validating:i.__validating||!1}),f=!1,d=T(c);try{for(d.s();!(o=d.n()).done;){var p=o.value,v=u[p],m=p in a;if(v){var y,g=a[p];h.path=(i.path?"".concat(i.path,"."):"")+p;var b=(v=v.resolve({value:g,context:i.context,parent:l}))instanceof SB?v.spec:void 0,w=null==b?void 0:b.strict;if(null!=b&&b.strip){f=f||p in a;continue}void 0!==(y=i.__validating&&w?a[p]:v.cast(a[p],h))&&(l[p]=y)}else m&&!s&&(l[p]=a[p]);m===p in l&&l[p]===a[p]||(f=!0)}}catch(_){d.e(_)}finally{d.f()}return f?l:a}},{key:"_validate",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=r.from,u=void 0===o?[]:o,s=r.originalValue,c=void 0===s?e:s,l=r.recursive,f=void 0===l?this.spec.recursive:l;r.from=[{schema:this,value:c}].concat(h(u)),r.__validating=!0,r.originalValue=c,tf(k(n.prototype),"_validate",this).call(this,e,r,i,(function(e,n){if(f&&ZB(n)){c=c||n;var o,u=[],s=T(t._nodes);try{for(s.s();!(o=s.n()).done;){var l=o.value,h=t.fields[l];h&&!gB.isRef(h)&&u.push(h.asNestedTest({options:r,key:l,parent:n,parentPath:r.path,originalParent:c}))}}catch(d){s.e(d)}finally{s.f()}t.runTests({tests:u,value:n,originalValue:c,options:r},i,(function(r){a(r.sort(t._sortErrors).concat(e),n)}))}else a(e,n)}))}},{key:"clone",value:function(e){var t=tf(k(n.prototype),"clone",this).call(this,e);return t.fields=Object.assign({},this.fields),t._nodes=this._nodes,t._excludedEdges=this._excludedEdges,t._sortErrors=this._sortErrors,t}},{key:"concat",value:function(e){for(var t=this,r=tf(k(n.prototype),"concat",this).call(this,e),i=r.fields,a=0,o=Object.entries(this.fields);a<o.length;a++){var u=c(o[a],2),s=u[0],l=u[1],f=i[s];i[s]=void 0===f?l:f}return r.withMutation((function(n){return n.setFields(i,[].concat(h(t._excludedEdges),h(e._excludedEdges)))}))}},{key:"_getDefault",value:function(e){var t=this;if("default"in this.spec)return tf(k(n.prototype),"_getDefault",this).call(this,e);if(this._nodes.length){var r={};return this._nodes.forEach((function(n){var i,a=t.fields[n],o=e;null!=(i=o)&&i.value&&(o=Object.assign({},o,{parent:o.value,value:o.value[n]})),r[n]=a&&"getDefault"in a?a.getDefault(o):void 0})),r}}},{key:"setFields",value:function(e,t){var n=this.clone();return n.fields=e,n._nodes=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=new Set,i=new Set(t.map((function(e){var t=c(e,2),n=t[0],r=t[1];return"".concat(n,"-").concat(r)})));function a(e,t){var a=(0,Hz.split)(e)[0];r.add(a),i.has("".concat(t,"-").concat(a))||n.push([t,a])}for(var o=function(){var t=s[u],n=e[t];r.add(t),gB.isRef(n)&&n.isSibling?a(n.path,t):pB(n)&&"deps"in n&&n.deps.forEach((function(e){return a(e,t)}))},u=0,s=Object.keys(e);u<s.length;u++)o();return $z().array(Array.from(r),n).reverse()}(e,t),n._sortErrors=YB(Object.keys(e)),t&&(n._excludedEdges=t),n}},{key:"shape",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.clone().withMutation((function(n){var r=n._excludedEdges;return t.length&&(Array.isArray(t[0])||(t=[t]),r=[].concat(h(n._excludedEdges),h(t))),n.setFields(Object.assign(n.fields,e),r)}))}},{key:"partial",value:function(){for(var e={},t=0,n=Object.entries(this.fields);t<n.length;t++){var r=c(n[t],2),i=r[0],a=r[1];e[i]="optional"in a&&a.optional instanceof Function?a.optional():a}return this.setFields(e)}},{key:"deepPartial",value:function(){return XB(this)}},{key:"pick",value:function(e){var t,n={},r=T(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;this.fields[i]&&(n[i]=this.fields[i])}}catch(a){r.e(a)}finally{r.f()}return this.setFields(n)}},{key:"omit",value:function(e){var t,n=Object.assign({},this.fields),r=T(e);try{for(r.s();!(t=r.n()).done;){delete n[t.value]}}catch(i){r.e(i)}finally{r.f()}return this.setFields(n)}},{key:"from",value:function(e,t,n){var r=(0,Hz.getter)(e,!0);return this.transform((function(i){if(!i)return i;var a=i;return function(e,t){var n=h((0,Hz.normalizePath)(t));if(1===n.length)return n[0]in e;var r=n.pop(),i=(0,Hz.getter)((0,Hz.join)(n),!0)(e);return!(!i||!(r in i))}(i,e)&&(a=Object.assign({},i),n||delete a[e],a[t]=r(i)),a}))}},{key:"json",value:function(){return this.transform(JB)}},{key:"noUnknown",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hB.noUnknown;"boolean"!==typeof e&&(t=e,e=!0);var n=this.test({name:"noUnknown",exclusive:!0,message:t,test:function(t){if(null==t)return!0;var n=function(e,t){var n=Object.keys(e.fields);return Object.keys(t).filter((function(e){return-1===n.indexOf(e)}))}(this.schema,t);return!e||0===n.length||this.createError({params:{unknown:n.join(", ")}})}});return n.spec.noUnknown=e,n}},{key:"unknown",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hB.noUnknown;return this.noUnknown(!e,t)}},{key:"transformKeys",value:function(e){return this.transform((function(t){if(!t)return t;for(var n={},r=0,i=Object.keys(t);r<i.length;r++){var a=i[r];n[e(a)]=t[a]}return n}))}},{key:"camelCase",value:function(){return this.transformKeys(Gz.camelCase)}},{key:"snakeCase",value:function(){return this.transformKeys(Gz.snakeCase)}},{key:"constantCase",value:function(){return this.transformKeys((function(e){return(0,Gz.snakeCase)(e).toUpperCase()}))}},{key:"describe",value:function(e){var t=tf(k(n.prototype),"describe",this).call(this,e);t.fields={};for(var r=0,i=Object.entries(this.fields);r<i.length;r++){var a,o=c(i[r],2),u=o[0],s=o[1],l=e;null!=(a=l)&&a.value&&(l=Object.assign({},l,{parent:l.value,value:l.value[u]})),t.fields[u]=s.describe(l)}return t}}]),n}(SB);tW.prototype=nW.prototype;var rW=function(e){g(n,e);var t=_(n);function n(e){var r;return f(this,n),r=t.call(this,{type:"array",spec:{types:e},check:function(e){return Array.isArray(e)}}),r.innerType=void 0,r.innerType=e,r}return m(n,[{key:"_cast",value:function(e,t){var r=this,i=tf(k(n.prototype),"_cast",this).call(this,e,t);if(!this._typeCheck(i)||!this.innerType)return i;var a=!1,o=i.map((function(e,n){var i=r.innerType.cast(e,Object.assign({},t,{path:"".concat(t.path||"","[").concat(n,"]")}));return i!==e&&(a=!0),i}));return a?o:i}},{key:"_validate",value:function(e){var t,r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,u=this.innerType,s=null!=(t=i.recursive)?t:this.spec.recursive;null!=i.originalValue&&i.originalValue,tf(k(n.prototype),"_validate",this).call(this,e,i,a,(function(t,n){var c;if(s&&u&&r._typeCheck(n)){for(var l=new Array(n.length),h=0;h<n.length;h++){var f;l[h]=u.asNestedTest({options:i,index:h,parent:n,parentPath:i.path,originalParent:null!=(f=i.originalValue)?f:e})}r.runTests({value:n,tests:l,originalValue:null!=(c=i.originalValue)?c:e,options:i},a,(function(e){return o(e.concat(t),n)}))}else o(t,n)}))}},{key:"clone",value:function(e){var t=tf(k(n.prototype),"clone",this).call(this,e);return t.innerType=this.innerType,t}},{key:"json",value:function(){return this.transform(JB)}},{key:"concat",value:function(e){var t=tf(k(n.prototype),"concat",this).call(this,e);return t.innerType=this.innerType,e.innerType&&(t.innerType=t.innerType?t.innerType.concat(e.innerType):e.innerType),t}},{key:"of",value:function(e){var t=this.clone();if(!pB(e))throw new TypeError("`array.of()` sub-schema must be a valid yup schema not: "+nB(e));return t.innerType=e,t.spec=Object.assign({},t.spec,{types:e}),t}},{key:"length",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fB.length;return this.test({message:t,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test:function(t){return t.length===this.resolve(e)}})}},{key:"min",value:function(e,t){return t=t||fB.min,this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test:function(t){return t.length>=this.resolve(e)}})}},{key:"max",value:function(e,t){return t=t||fB.max,this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test:function(t){return t.length<=this.resolve(e)}})}},{key:"ensure",value:function(){var e=this;return this.default((function(){return[]})).transform((function(t,n){return e._typeCheck(t)?t:null==n?[]:[].concat(n)}))}},{key:"compact",value:function(e){var t=e?function(t,n,r){return!e(t,n,r)}:function(e){return!!e};return this.transform((function(e){return null!=e?e.filter(t):e}))}},{key:"describe",value:function(e){var t=tf(k(n.prototype),"describe",this).call(this,e);if(this.innerType){var r,i=e;null!=(r=i)&&r.value&&(i=Object.assign({},i,{parent:i.value,value:i.value[0]})),t.innerType=this.innerType.describe(i)}return t}}]),n}(SB);rW.prototype;var iW=function(e){g(n,e);var t=_(n);function n(e){var r;return f(this,n),r=t.call(this,{type:"tuple",spec:{types:e},check:function(e){var t=this.spec.types;return Array.isArray(e)&&e.length===t.length}}),r.withMutation((function(){r.typeError(dB)})),r}return m(n,[{key:"_cast",value:function(e,t){var r=this.spec.types,i=tf(k(n.prototype),"_cast",this).call(this,e,t);if(!this._typeCheck(i))return i;var a=!1,o=r.map((function(e,n){var r=e.cast(i[n],Object.assign({},t,{path:"".concat(t.path||"","[").concat(n,"]")}));return r!==i[n]&&(a=!0),r}));return a?o:i}},{key:"_validate",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=this.spec.types;tf(k(n.prototype),"_validate",this).call(this,e,r,i,(function(n,u){var s;if(t._typeCheck(u)){var l,h=[],f=T(o.entries());try{for(f.s();!(l=f.n()).done;){var d,p=c(l.value,2),v=p[0],m=p[1];h[v]=m.asNestedTest({options:r,index:v,parent:u,parentPath:r.path,originalParent:null!=(d=r.originalValue)?d:e})}}catch(y){f.e(y)}finally{f.f()}t.runTests({value:u,tests:h,originalValue:null!=(s=r.originalValue)?s:e,options:r},i,(function(e){return a(e.concat(n),u)}))}else a(n,u)}))}},{key:"describe",value:function(e){var t=tf(k(n.prototype),"describe",this).call(this,e);return t.innerType=this.spec.types.map((function(t,n){var r,i=e;return null!=(r=i)&&r.value&&(i=Object.assign({},i,{parent:i.value,value:i.value[n]})),t.describe(i)})),t}}]),n}(SB);iW.prototype;var aW=tW().shape({email:zB().email("Enter valid email").required("Required"),password:zB().min(5).max(20).matches(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{5,20}$/,{message:"Create stronger password"}).required("Required")});function oW(e,t){var n=c((0,r.useState)(!1),2),i=n[0],a=n[1],o=jz({initialValues:{email:"",password:""},validationSchema:aW,onSubmit:function(t,n){e.onSubmit(t),a(!0),setTimeout((function(){a(!1)}),3e3)}}),u=o.values,s=o.errors,l=o.touched,h=o.handleBlur,f=o.handleChange,d=o.handleSubmit;o.isSubmitting;return(0,jn.jsxs)("form",{autoComplete:"off",onSubmit:d,children:[(0,jn.jsx)("label",{htmlFor:"email",children:"Email"}),(0,jn.jsx)("input",{style:{textAlign:"left"},className:"my-input",value:u.email,onChange:f,onBlur:h,id:"email",type:"email",placeholder:"Enter your email"}),l.email&&s.email&&(0,jn.jsx)("div",{className:"error",children:s.email}),(0,jn.jsx)("label",{htmlFor:"password",children:"Password"}),(0,jn.jsx)("input",{style:{textAlign:"left"},className:"my-input",value:u.password,onChange:f,onBlur:h,id:"password",type:"password",placeholder:"Enter your password"}),l.password&&s.password&&(0,jn.jsx)("div",{className:"error",children:s.password}),(0,jn.jsx)("button",{disabled:i,type:"submit",children:"Submit"})]})}var uW="token",sW="token-expiration";function cW(){var e=localStorage.getItem("username");if(!e||"null"==e)return[];localStorage.getItem(sW);var t=[];return t.push({name:e,value:e}),t}var lW=r.createContext({profileDTO:{id:"",email:""},updateProfile:function(){}});function hW(e,t){return fW.apply(this,arguments)}function fW(){return(fW=Kn(Bn().mark((function e(t,n){var r;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="",e.next=3,pM.child("usersAccounts").once("value",(function(e){var i=e.val();Object.values(i).forEach((function(e){if(e.username==t&&e.password==n)return r=t,t}))}));case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dW(e,t){return pW.apply(this,arguments)}function pW(){return(pW=Kn(Bn().mark((function e(t,n){var r;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,pM.child("usersAccounts").once("value",(function(e){var n=e.val();n&&Object.values(n).forEach((function(e){if(e.username==t)return r="",null}))}));case 3:if(!r){e.next=7;break}return localStorage.setItem("username",t),pM.child("usersAccounts").push({username:t,password:n}),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var vW=[{path:"/login",component:function(){var e=c((0,r.useState)([]),2),t=e[0],n=e[1],i=(0,r.useContext)(_j),a=(i.claims,i.update),o=((0,r.useContext)(lW).updateProfile,be());function u(e){return s.apply(this,arguments)}function s(){return(s=Kn(Bn().mark((function e(t){var r;return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,n([]),e.next=5,hW(t.email,t.password);case 5:r=e.sent,i=r,localStorage.setItem("username",i),a(cW()),a(cW()),console.log(r),null!=r?(o("/"),o(0)):n(["Your login or password was wrong!"]),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),n(["Your login or password was wrong!"]);case 16:case"end":return e.stop()}var i}),e,null,[[1,13]])})))).apply(this,arguments)}return(0,jn.jsxs)(jn.Fragment,{children:[(0,jn.jsx)("h3",{style:{fontSize:"3em"},children:"Login"}),(0,jn.jsx)(Ej,{errors:t}),(0,jn.jsx)(oW,{model:{email:"",password:""},onSubmit:function(){var e=Kn(Bn().mark((function e(t){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),submitButtonName:"Login"}),(0,jn.jsx)("span",{style:{color:"red"},children:t})]})}},{path:"/register",component:function(){var e=c((0,r.useState)([]),2),t=e[0],n=e[1],i=(0,r.useContext)(_j).update,a=((0,r.useContext)(lW).updateProfile,be());function o(e){return u.apply(this,arguments)}function u(){return(u=Kn(Bn().mark((function e(t){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,n([]),e.next=5,dW(t.email,t.password);case 5:e.sent,i(cW()),i(cW()),a("/"),a(0),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),n(["The name is already taken"]);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}return(0,jn.jsxs)(jn.Fragment,{children:[(0,jn.jsx)("h1",{children:"Register"}),(0,jn.jsx)(Ej,{errors:t}),(0,jn.jsx)(oW,{model:{email:"",password:""},onSubmit:function(){var e=Kn(Bn().mark((function e(t){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),submitButtonName:"Register"})]})}},{path:"/waiting-room",component:function(){var e=ge().state,t=be(),n=c((0,r.useState)("waiting"),2),i=n[0],a=n[1],o=mM.child(e.game.gamecode).child("players").child("".concat(e.playerId));console.log(e.playerId);var u=o.onDisconnect();return(0,r.useEffect)((function(){UM(e.game.gamecode,a),function(){var e=localStorage.getItem("token"),t=localStorage.getItem("email"),n=localStorage.getItem("id"),r=localStorage.getItem("profileImage"),i=localStorage.getItem("username");localStorage.clear(),localStorage.setItem("token",e),localStorage.setItem("email",t),localStorage.setItem("id",n),localStorage.setItem("profileImage",r),localStorage.setItem("username",i)}(),u.remove()}),[]),(0,r.useEffect)((function(){if("started"==i){u.cancel();var n={game:e.game,username:e.username,playerNumber:e.playerId+1};localStorage.setItem("username/".concat(e.playerId+1),e.username),t("/game-player/".concat(e.game.gamecode),{state:n})}}),[i]),(0,jn.jsxs)(jn.Fragment,{children:[(0,jn.jsx)(lj,{}),(0,jn.jsx)("div",{style:{fontSize:"2em",alignItems:"center",justifyContent:"center",padding:"20px"},children:"Wait for start of game..."})]})}},{path:"/game-player/:code",component:function(){var e=ge().state,t=c((0,r.useState)(e.game),2),n=t[0],i=t[1],a=c((0,r.useState)(e.game.gameTemplate.questionTime),2),o=a[0],u=a[1],s=c((0,r.useState)(null),2),l=s[0],h=s[1],f=c((0,r.useState)(0),2),d=f[0],p=f[1],v=c((0,r.useState)([]),2),m=v[0],y=v[1],g=c((0,r.useState)([]),2),k=g[0],b=g[1],w=c((0,r.useState)(0),2),_=w[0],x=w[1],S=c((0,r.useState)(),2),E=S[0],T=S[1],I=c((0,r.useState)(0),2),C=I[0],A=I[1],N=c((0,r.useState)(),2),P=N[0],R=N[1],O=c((0,r.useState)("started"),2),D=O[0],L=O[1],F=c((0,r.useState)(),2),M=F[0],j=F[1],U=c((0,r.useState)([]),2),V=(U[0],U[1]),q=c((0,r.useState)(!1),2),z=q[0],B=q[1],W=c((0,r.useState)((function(){var e=localStorage.getItem("time");return e&&"undefined"!=e?parseInt(JSON.parse(e)):15})),2),K=W[0],H=W[1],G=Math.round(1e3/e.game.gameTemplate.questionTime),Q=e.username?e.username:localStorage.getItem("username/".concat(e.playerNumber));return(0,r.useEffect)((function(){FM(e.game.gamecode,i),function(e,t){$M.apply(this,arguments)}(null===n||void 0===n?void 0:n.gamecode,u),UM(n.gamecode,L),function(e,t){mM.child(e).child("hostConnection").on("value",(function(e){var n=e.val();console.log(n),t(n)}))}(n.gamecode,B)}),[]),(0,r.useEffect)((function(){P&&(n.currentQuestion||0==n.currentQuestion)&&n.gameTemplate.allQuestions[n.currentQuestion].correctAnswer==P.choosenAnswer&&n.currentQuestion==P.questionNumber&&A(1e3-G*P.sendingTime)}),[P,n.currentQuestion]),(0,r.useEffect)((function(){n.gamecode&&Q&&(E||function(e,t,n){YM.apply(this,arguments)}(n.gamecode,Q,T),E&&(tj(n.gamecode,m,y,"players"),tj(n.gamecode,d,p,"questionDone"),tj(n.gamecode,_,x,"points",E.id),tj(n.gamecode,l,h,"shownComponent",E.id),tj(n.gamecode,o,u,"time"),tj(n.gamecode,P,R,"lastAnswer",E.id),tj(n.gamecode,M,j,"startingTime"),function(e,t){ZM.apply(this,arguments)}(n.gamecode,b),function(e,t,n){JM.apply(this,arguments)}(n.gamecode,E.id,h)))}),[n.gamecode,Q,E]),(0,r.useEffect)((function(){n.gamePhase==2*n.gameTemplate.allQuestions.length+1?(fj(n.players,b),h("winners")):"answers"==l&&n.gamePhase%2==0?h("between"):"between"==l&&n.gamePhase%2==1&&h("answers")}),[n.gamePhase]),(0,r.useEffect)((function(){y(null===n||void 0===n?void 0:n.players)}),[null===n||void 0===n?void 0:n.players]),(0,r.useEffect)((function(){b(n.winners)}),[n.winners]),(0,r.useEffect)((function(){E&&l&&ej(n.gamecode,l,"shownComponent",null===E||void 0===E?void 0:E.id)}),[l]),(0,jn.jsxs)(jn.Fragment,{children:[(0,jn.jsx)(lj,{}),E&&(0,jn.jsx)(bj,{player:E,points:_}),z?(0,jn.jsxs)(jn.Fragment,{children:["answers"==l&&"started"==D&&(0,jn.jsx)(vj,{gameState:n,time:o,setShownComponent:h,username:e.username,setPointsForLast:function(t){n.gameTemplate.allQuestions[n.currentQuestion].correctAnswer==t.choosenAnswer&&n.currentQuestion==t.questionNumber?x((function(r){var i=1e3-G*t.sendingTime;return A(i),x(r+i),HM(n.gamecode,e.username,r+i),r+i})):A(0)},setLastAnswer:R}),"between"==l&&"started"==D&&(0,jn.jsx)(kj,{gameState:n,setShownComponent:h,questionDone:d,setQuestionsDone:p,setTime:u,lastQuestionPoints:C,setLastQuestionPoints:A,player:E,points:_,setPoints:x,setActiveEffects:V}),"winners"==l&&"winners"==D&&k&&(0,jn.jsx)(cj,{winners:k})]}):(0,jn.jsx)(pj,{message:"Waiting for host to reconnect",time:K,setTime:H})]})}},{path:"/input-name",component:function(){var e=ge().state,t=be(),n=c((0,r.useState)(""),2),i=n[0],a=n[1],o=c((0,r.useState)(),2),u=o[0],s=o[1],l=c((0,r.useState)(),2),h=l[0],f=l[1],d=c((0,r.useState)(),2),p=d[0],v=d[1],m=c((0,r.useState)(),2),y=m[0],g=m[1];return(0,r.useEffect)((function(){h&&i&&(!function(e,t,n){jM.apply(this,arguments)}(e,{id:0,name:i,points:0,lastAnswer:{choosenAnswer:"",sendingTime:0,questionNumber:1},shownComponent:"answers"},g),FM(e,s))}),[h]),(0,r.useEffect)((function(){u&&"number"==typeof y&&t("/waiting-room",{state:{game:u,username:i,playedId:y}})}),[u,y]),(0,jn.jsxs)(jn.Fragment,{children:[(0,jn.jsx)(_M,{value:i,setValue:a,placeholder:"Input your name",characterLimit:15,visibleWarning:!0}),(0,jn.jsx)("div",{className:"error",children:p}),(0,jn.jsx)("button",{onClick:function(){!function(e,t,n,r){LM.apply(this,arguments)}(e,i,f,v)},children:"Submit name"})]})}},{path:"/",component:Sj},{path:"*",component:Sj}],mW=[{path:"create",component:function(){var e=be(),t=c((0,r.useState)(!1),2),n=t[0],i=t[1],a=c((0,r.useState)(!1),2),o=a[0],u=a[1];function s(e,t,n){n(!t)}var l=c((0,r.useState)([]),2),h=l[0],f=l[1];(0,r.useEffect)((function(){var e=c(localStorage.getItem("username").split("@"),2),t=e[0];e[1];!function(e,t){gM.apply(this,arguments)}(t,f)}),[]),(0,r.useEffect)((function(){v(h[0])}),[h]);var d=c((0,r.useState)(h[0]),2),p=d[0],v=d[1];function m(e){v(h[e-1])}function y(){for(var e,t,n="",r=0;r<6;r++){var i=(e=0,t=9,Math.floor(Math.random()*(t-e+1))+e);n+="".concat(i)}return n}var g=!p;return(0,jn.jsx)(jn.Fragment,{children:(0,jn.jsxs)("section",{className:"flex-section",children:[(0,jn.jsxs)("article",{className:"half-article",children:[(0,jn.jsx)("button",{className:"my-button",onClick:function(e){s(0,n,i)},style:{height:"100%",aspectRatio:"1"},children:"Choose game template"}),(0,jn.jsx)(Vn,{isOpen:n,toggleModal:function(e){s(0,n,i)},children:(0,jn.jsx)(jn.Fragment,{children:(0,jn.jsx)(zn,{templates:h,chooseTemplate:m,choosenTemplate:p})}),disableSubmit:g,submitButtonText:"Choose",onSubmit:function(){var t={template:p,gamecode:y()};e("/game-code",{state:t}),localStorage.setItem("gameTemplate",JSON.stringify(p))}})]}),(0,jn.jsxs)("article",{className:"half-article",children:[(0,jn.jsx)("button",{className:"my-button",onClick:function(e){s(0,o,u)},style:{height:"100%",aspectRatio:"1"},children:"Edit game templates"}),(0,jn.jsx)(Vn,{isOpen:o,toggleModal:function(e){s(0,o,u)},children:(0,jn.jsx)(jn.Fragment,{children:(0,jn.jsx)(zn,{templates:h,chooseTemplate:m,choosenTemplate:p})}),disableSubmit:g,submitButtonText:"Choose",onSubmit:function(){e("/edit-template",{state:p})}})]}),(0,jn.jsx)("article",{className:"half-article",children:(0,jn.jsx)("button",{className:"my-button",onClick:function(){e("/create-template")},style:{height:"100%",aspectRatio:"1"},children:"Create new game template"})})]})})}},{path:"create-template",component:function(){var e=be(),t=c((0,r.useState)(!1),2),n=t[0],i=t[1];function a(e){i(!n)}var o=c((0,r.useState)([{questionNumber:1,question:"",answerA:"",answerB:"",answerC:"",answerD:"",correctAnswer:""},{questionNumber:2,question:"",answerA:"",answerB:"",answerC:"",answerD:"",correctAnswer:""}]),2),u=o[0],s=o[1],l=c((0,r.useState)(1),2),h=l[0],f=l[1],d=c((0,r.useState)(10),2),p=d[0],v=d[1],m=c((0,r.useState)(""),2),y=m[0],g=m[1],k=c((0,r.useState)(""),2),b=k[0],w=k[1],_=function(){var e=Kn(Bn().mark((function e(t){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t>=u.length||t<h)&&h>1?f(h-1):f(1),xM(t,s);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){console.log(u)}),[u]),(0,jn.jsxs)("main",{className:"question-placeholder",children:[(0,jn.jsx)(IM,{questions:u,setQuestions:s,choosenQuestion:h,setChoosenQuestion:f,deleteQuestion:_}),(0,jn.jsx)(wM,{question:u[h-1],questionNumber:h,setQuestions:s}),(0,jn.jsx)(EM,{toggleModal:a,questionTime:p,setQuestionTime:v,timesForAnswer:[5,10,20,30,40]}),(0,jn.jsx)(Vn,{isOpen:n,toggleModal:a,children:(0,jn.jsxs)("div",{style:{width:"100%",height:"100%",textAlign:"center"},children:[(0,jn.jsx)("h2",{children:"Template name"}),(0,jn.jsx)(_M,{value:y,setValue:g,placeholder:"Enter template name",characterLimit:20,visibleWarning:!0}),b&&(0,jn.jsx)("span",{className:"error",children:b})]}),submitButtonText:"Save template",onSubmit:function(){AM(u,y,p)?e("/create"):w("You have to have at least 1 full question!")}})]})}},{path:"/edit-template",component:function(){var e=ge().state,t=be(),n=c((0,r.useState)(!1),2),i=n[0],a=n[1];function o(e){a(!i)}var u=c((0,r.useState)(e.allQuestions),2),s=u[0],l=u[1],h=c((0,r.useState)(1),2),f=h[0],d=h[1],p=c((0,r.useState)(e.questionTime),2),v=p[0],m=p[1],y=c((0,r.useState)(e.templateName),2),g=y[0],k=y[1],b=c((0,r.useState)(""),2),w=b[0],_=b[1],x=function(){var e=Kn(Bn().mark((function e(t){return Bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t>=s.length||t<f)&&f>1?d(f-1):d(1),xM(t,l);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,jn.jsxs)("main",{className:"question-placeholder",children:[(0,jn.jsx)(IM,{questions:s,setQuestions:l,choosenQuestion:f,setChoosenQuestion:d,deleteQuestion:x}),(0,jn.jsx)(wM,{question:s[f-1],questionNumber:f,setQuestions:l}),(0,jn.jsx)(EM,{toggleModal:o,questionTime:v,setQuestionTime:m,timesForAnswer:[5,10,20,30,40]}),(0,jn.jsx)(Vn,{isOpen:i,toggleModal:o,children:(0,jn.jsxs)("div",{style:{width:"100%",height:"100%",textAlign:"center"},children:[(0,jn.jsx)("h2",{children:"Template name"}),(0,jn.jsx)(_M,{value:g,setValue:k,placeholder:"Enter template name",characterLimit:20,visibleWarning:!0}),w&&(0,jn.jsx)("span",{className:"error",children:w})]}),submitButtonText:"Save template",onSubmit:function(){AM(s,g,v,e.id)?t("/create"):_("You have to have at least 1 full question!")}})]})}},{path:"/game-code",component:function(){var e=ge().state,t=be(),n=c((0,r.useState)({gameTemplate:e.template,players:[],gamecode:e.gamecode,started:"waiting",currentQuestion:0,time:e.template.questionTime,gamePhase:1,startingTime:3,winners:[],hostConnection:!0}),2),i=n[0],a=n[1],o=c((0,r.useState)(!0),2),u=o[0],s=o[1];return(0,r.useEffect)((function(){hj(e,a),FM(i.gamecode,a)}),[]),(0,r.useEffect)((function(){i.players.length>=1?s(!1):s(!0)}),[i.players]),(0,r.useEffect)((function(){if("started"==i.started){var e={gamestate:i};t("/game-host/".concat(i.gamecode),{state:e})}}),[i]),(0,jn.jsx)("div",{className:"column-shaped-container",children:i&&(0,jn.jsxs)(jn.Fragment,{children:[(0,jn.jsx)("h2",{children:"Your game code"}),(0,jn.jsxs)("span",{className:"column-shaped-container",children:[(0,jn.jsx)("h2",{children:e.gamecode}),(0,jn.jsxs)("h3",{children:["Number of players in game: ",i.players.length,"/10"]})]}),(0,jn.jsx)("div",{className:"player-list",children:i.players&&0!=i.players.length&&i.players.map((function(e){return(0,jn.jsx)(wj,{player:e,image:""},e.id)}))}),(0,jn.jsx)("button",{disabled:u,className:"start-game-btn",onClick:function(){return function(e,t){e.players.length>=1&&(t(ni(ni({},e),{},{started:"started"})),ej(e.gamecode,"started","gameStarted"))}(i,a)},children:"Start game"})]})})}},{path:"/game-host/:code",component:function(){var e=ge().state.gamestate,t=c((0,r.useState)(e),2),n=t[0],i=t[1],a=e.gamecode,o=c((0,r.useState)("question"),2),u=o[0],s=o[1],l=c((0,r.useState)(),2),h=l[0],f=l[1],d=c((0,r.useState)(n.gameTemplate.allQuestions[0]),2),p=d[0],v=d[1],m=c((0,r.useState)(n.players),2),y=m[0],g=m[1],k=c((0,r.useState)([]),2),b=k[0],w=k[1],_=c((0,r.useState)(),2),x=_[0],S=_[1],E=c((0,r.useState)(),2),T=E[0],I=E[1],C=c((0,r.useState)(!1),2),A=C[0],N=C[1],P=c((0,r.useState)(!0),2),R=P[0],O=P[1];return(0,r.useEffect)((function(){!function(e){mM.child(e).child("hostConnection").onDisconnect().set(!1),hh(ij,(function(t){!0===t.val()?mM.child(e).child("hostConnection").set(!0):mM.child(e).child("hostConnection").set(!1)}))}(a),FM(a,i,!1)}),[]),(0,r.useEffect)((function(){!x&&0!=x||!h&&0!=h||!u||N(!0)}),[h,T,x]),(0,r.useEffect)((function(){a&&(tj(a,R,O,"hostConnection"),tj(a,x,S,"time"),tj(a,b,w,"winners"),tj(a,T,I,"gamePhase"),tj(a,0,f,"currentQuestionIndex"),FM(a,i,!0))}),[a]),(0,r.useEffect)((function(){T&&(T==2*n.gameTemplate.allQuestions.length+1||(T%2==0?s("statistics"):T%2==1&&((x||0==x)&&x<1&&(h||0==h)&&f(h+1),s("question"))),(x||0==x)&&x<1&&S(n.gameTemplate.questionTime))}),[T]),(0,r.useEffect)((function(){(x||0==x)&&(ej(n.gamecode,x,"time"),x<1&&T&&(i(ni(ni({},n),{},{gamePhase:n.gamePhase+1})),I(T+1),ej(n.gamecode,n.gamePhase+1,"gamePhase"),T+1==2*n.gameTemplate.allQuestions.length+1&&(ej(n.gamecode,"winners","gameStarted"),fj(y,w))))}),[x]),(0,r.useEffect)((function(){h&&(v(n.gameTemplate.allQuestions[h]),BM(n.gamecode,h))}),[h]),(0,r.useEffect)((function(){b.length>0&&(ej(n.gamecode,b,"winners"),s("winners"))}),[b]),(0,r.useEffect)((function(){h&&BM(n.gamecode,h)}),[u]),(0,r.useEffect)((function(){!function(e,t){t(e.sort((function(e,t){return t.points-e.points})))}(n.players,g)}),[n.players]),(0,jn.jsxs)(jn.Fragment,{children:[(0,jn.jsx)(lj,{}),A&&R?(0,jn.jsxs)("div",{className:"column-shaped-container",style:{justifyContent:"space-between",width:"100%",height:"100%"},children:["question"==u&&(0,jn.jsx)(aj,{currentQuestion:p,time:x,setTime:S,gamecode:n.gamecode}),"statistics"==u&&(0,jn.jsx)(uj,{time:x,setTime:S,players:y,setPlayers:g,gamecode:n.gamecode}),"winners"==u&&(0,jn.jsx)(cj,{winners:b})]}):(0,jn.jsx)(pj,{message:"Waiting for connection"})]})}}],yW=vW;function gW(){var e=be();return(0,jn.jsx)("button",{className:"go-back-button",style:{height:"fit-content"},onClick:function(){e("/")},children:"Cacarrot"})}function kW(){var e=be(),t=(0,r.useContext)(_j).update;return(0,jn.jsx)("button",{onClick:function(){localStorage.removeItem(uW),localStorage.removeItem("email"),localStorage.removeItem("id"),localStorage.removeItem("profileImage"),localStorage.removeItem("username"),t([]),e("/"),e(0)},style:{height:"fit-content"},children:"Logout"})}function bW(){return(0,jn.jsxs)("div",{className:"navbar",children:[(0,jn.jsx)(gW,{}),(0,jn.jsx)(xj,{isAuthorized:(0,jn.jsx)(jn.Fragment,{children:(0,jn.jsx)(kW,{})}),notAuthorized:(0,jn.jsx)(jn.Fragment,{})})]})}function wW(){return(0,jn.jsx)("div",{className:"landing-page",style:{height:"100%"},children:(0,jn.jsx)("h2",{children:"You have lost your internet connection. Try to reconnect"})})}function _W(e){var t=e.isAuthenticated;return(0,jn.jsx)(jn.Fragment,{children:t?(0,jn.jsx)(Le,{}):(0,jn.jsx)(De,{to:"/login"})})}var xW=function(){var e=c((0,r.useState)([{name:"kacper",value:"kaswer"}]),2),t=e[0],n=e[1],i=c((0,r.useState)(!0),2),a=i[0],o=i[1];return(0,r.useEffect)((function(){o(navigator.onLine),function(e){var t=function(){console.log("online"),e(!0)},n=function(){console.log("ofline"),e(!1)};window.addEventListener("online",t),window.addEventListener("offline",n)}(o)}),[]),(0,r.useEffect)((function(){n(cW())}),[localStorage]),(0,jn.jsx)(_j.Provider,{value:{claims:t,update:n},children:(0,jn.jsx)(Pn,{children:(0,jn.jsx)("div",{className:"App",children:(0,jn.jsx)("main",{className:"wrapper",children:a?(0,jn.jsxs)(jn.Fragment,{children:[(0,jn.jsx)(bW,{}),(0,jn.jsx)("section",{className:"landing-page",children:(0,jn.jsxs)(je,{children:[yW.map((function(e){return(0,jn.jsx)(Fe,{path:e.path,Component:e.component},e.path)})),mW.map((function(e){return(0,jn.jsx)(Fe,{element:(0,jn.jsx)(_W,{isAuthenticated:t.length>0}),children:(0,jn.jsx)(Fe,{Component:e.component,path:e.path})},e.path)}))]})})]}):(0,jn.jsx)(wW,{})})})})})},SW=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};function EW(e){var t,n=e.basename,i=e.children,a=e.window,o=r.useRef();null==o.current&&(o.current=(void 0===(t={window:a,v5Compat:!0})&&(t={}),F((function(e,t){var n=L(e.location.hash.substr(1)),r=n.pathname,i=void 0===r?"/":r,a=n.search,o=void 0===a?"":a,u=n.hash;return O("",{pathname:i,search:o,hash:void 0===u?"":u},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){var n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){var i=e.location.href,a=i.indexOf("#");r=-1===a?i:i.slice(0,a)}return r+"#"+("string"===typeof t?t:D(t))}),(function(e,t){P("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),t)));var u=o.current,s=c(r.useState({action:u.action,location:u.location}),2),l=s[0],h=s[1];return r.useLayoutEffect((function(){return u.listen(h)}),[u]),r.createElement(Me,{basename:n,children:i,location:l.location,navigationType:l.action,navigator:u})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var TW,IW;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(TW||(TW={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(IW||(IW={}));i.createRoot(document.getElementById("root")).render((0,jn.jsx)(r.StrictMode,{children:(0,jn.jsx)(EW,{children:(0,jn.jsx)(xW,{})})})),SW()}()}();
//# sourceMappingURL=main.76026616.js.map